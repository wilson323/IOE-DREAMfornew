# è€ƒå‹¤æ¨¡å—å‰ç«¯å®Œæ•´å¼€å‘è®¡åˆ’

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
> **åˆ›å»ºæ—¥æœŸ**: 2025-01-30
> **ç›®æ ‡æ—¥æœŸ**: 2025-03-15ï¼ˆ6å‘¨å®Œæˆï¼‰
> **æŠ€æœ¯æ ˆ**: Vue 3.4 + Ant Design Vue 4 + Vite 5

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### å½“å‰çŠ¶æ€
- **åç«¯APIå®Œæˆåº¦**: 85%ï¼ˆ16ä¸ªControllerå·²å®ç°ï¼‰
- **å‰ç«¯é¡µé¢å®Œæˆåº¦**: 37.5%ï¼ˆä»…3ä¸ªé¡µé¢ï¼‰
- **ç§»åŠ¨ç«¯å®Œæˆåº¦**: 60%ï¼ˆ3ä¸ªåŸºç¡€é¡µé¢ï¼‰

### ç›®æ ‡çŠ¶æ€
- **å‰ç«¯é¡µé¢å®Œæˆåº¦**: 100%ï¼ˆ8ä¸ªæ ¸å¿ƒé¡µé¢ + é…å¥—ç»„ä»¶ï¼‰
- **ä»£ç è´¨é‡**: ç¬¦åˆä¼ä¸šçº§è§„èŒƒ
- **å…¨å±€ä¸€è‡´æ€§**: ä¸å…¶ä»–ä¸šåŠ¡æ¨¡å—ä¿æŒä¸€è‡´

### å¼€å‘å‘¨æœŸ
- **P0çº§åŠŸèƒ½**: 3å‘¨ï¼ˆä»ªè¡¨ä¸­å¿ƒã€åŸºç¡€ä¿¡æ¯ã€æ’ç­ç®¡ç†ï¼‰
- **P1çº§åŠŸèƒ½**: 2å‘¨ï¼ˆè€ƒå‹¤æ•°æ®ã€å¼‚å¸¸ç®¡ç†ã€æŠ¥è¡¨ï¼‰
- **P2çº§åŠŸèƒ½**: 1å‘¨ï¼ˆä¼˜åŒ–å’Œæµ‹è¯•ï¼‰

**æ€»è®¡**: 6å‘¨ï¼ˆ30ä¸ªå·¥ä½œæ—¥ï¼‰

---

## ğŸ¯ å¼€å‘åŸåˆ™ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

### 1. æ¶æ„è§„èŒƒï¼ˆP0çº§å¼ºåˆ¶ï¼‰

#### 1.1 ç›®å½•ç»“æ„è§„èŒƒ

```
src/views/business/attendance/
â”œâ”€â”€ dashboard/                    # ä»ªè¡¨ä¸­å¿ƒ
â”‚   â”œâ”€â”€ index.vue                # ä¸»é¡µé¢
â”‚   â””â”€â”€ components/              # å­ç»„ä»¶
â”‚       â”œâ”€â”€ StatCard.vue         # ç»Ÿè®¡å¡ç‰‡
â”‚       â”œâ”€â”€ PunchChart.vue       # æ‰“å¡å›¾è¡¨
â”‚       â””â”€â”€ AttendanceRate.vue   # å‡ºå‹¤ç‡å›¾è¡¨
â”œâ”€â”€ base-info/                    # åŸºç¡€ä¿¡æ¯ç®¡ç†
â”‚   â”œâ”€â”€ index.vue                # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ shift/                   # ç­æ¬¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ ShiftFormModal.vue
â”‚   â”œâ”€â”€ time-period/             # æ—¶é—´æ®µç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ TimePeriodFormModal.vue
â”‚   â””â”€â”€ rule/                    # è§„åˆ™é…ç½®
â”‚       â”œâ”€â”€ index.vue
â”‚       â””â”€â”€ components/
â”‚           â””â”€â”€ RuleFormModal.vue
â”œâ”€â”€ schedule/                     # æ’ç­ç®¡ç†
â”‚   â”œâ”€â”€ index.vue                # æ—¥å†è§†å›¾ï¼ˆå·²æœ‰ï¼Œéœ€å¢å¼ºï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ CalendarView.vue     # æ—¥å†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ScheduleModal.vue    # æ’ç­å¼¹çª—
â”‚   â”‚   â””â”€â”€ TemplateModal.vue    # æ¨¡æ¿ç®¡ç†
â”‚   â””â”€â”€ template/                # æ¨¡æ¿ç®¡ç†
â”‚       â””â”€â”€ index.vue
â”œâ”€â”€ attendance-data/              # è€ƒå‹¤æ•°æ®
â”‚   â”œâ”€â”€ index.vue                # è€ƒå‹¤ç»“æœæŸ¥è¯¢
â”‚   â”œâ”€â”€ punch-record/            # æ‰“å¡è®°å½•ï¼ˆå·²æœ‰ï¼Œéœ€å¢å¼ºï¼‰
â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ ResultTable.vue      # ç»“æœè¡¨æ ¼
â”‚       â”œâ”€â”€ FilterForm.vue       # ç­›é€‰è¡¨å•
â”‚       â””â”€â”€ DetailModal.vue      # è¯¦æƒ…å¼¹çª—
â”œâ”€â”€ exception/                    # å¼‚å¸¸ç®¡ç†
â”‚   â”œâ”€â”€ index.vue                # å¼‚å¸¸å®¡æ‰¹åˆ—è¡¨
â”‚   â”œâ”€â”€ leave/                   # è¯·å‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ LeaveFormModal.vue
â”‚   â”‚       â””â”€â”€ ApprovalFlow.vue
â”‚   â”œâ”€â”€ overtime/                # åŠ ç­ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ OvertimeFormModal.vue
â”‚   â”œâ”€â”€ supplement/              # è¡¥ç­¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ SupplementFormModal.vue
â”‚   â””â”€â”€ trade/                   # è°ƒç­ç®¡ç†ï¼ˆP2ï¼‰
â”‚       â””â”€â”€ index.vue
â”œâ”€â”€ report/                       # æ±‡æ€»æŠ¥è¡¨
â”‚   â”œâ”€â”€ index.vue                # æŠ¥è¡¨åˆ—è¡¨
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ MonthlySummary.vue   # æœˆåº¦æ±‡æ€»
â”‚   â”‚   â”œâ”€â”€ AttendanceStats.vue  # å‡ºå‹¤ç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ AbnormalStats.vue    # å¼‚å¸¸ç»Ÿè®¡
â”‚   â”‚   â””â”€â”€ ExportModal.vue      # å¯¼å‡ºåŠŸèƒ½
â”‚   â””â”€â”€ charts/                  # å›¾è¡¨ç»„ä»¶
â”‚       â”œâ”€â”€ TrendChart.vue       # è¶‹åŠ¿å›¾
â”‚       â””â”€â”€ PieChart.vue         # é¥¼å›¾
â””â”€â”€ api/                          # APIæ¥å£
    â”œâ”€â”€ attendance.ts            # è€ƒå‹¤API
    â”œâ”€â”€ shift.ts                 # ç­æ¬¡API
    â”œâ”€â”€ schedule.ts              # æ’ç­API
    â”œâ”€â”€ leave.ts                 # è¯·å‡API
    â”œâ”€â”€ overtime.ts              # åŠ ç­API
    â””â”€â”€ report.ts                # æŠ¥è¡¨API
```

**å¼ºåˆ¶è§„èŒƒ**:
- âœ… æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ç›®å½•
- âœ… ç»„ä»¶æ–‡ä»¶æ”¾åœ¨ `components/` å­ç›®å½•
- âœ… APIæ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ `api/` ç›®å½•
- âœ… é¡µé¢ä¸»æ–‡ä»¶åä¸º `index.vue`
- âœ… ç»„ä»¶åä½¿ç”¨ PascalCase
- âœ… æ–‡ä»¶åä½¿ç”¨ kebab-case

#### 1.2 å‘½åè§„èŒƒï¼ˆP0çº§å¼ºåˆ¶ï¼‰

**Vueç»„ä»¶å‘½å**:
```javascript
// âœ… æ­£ç¡®
<template>
  <div class="attendance-dashboard">
    <StatCard />
    <PunchChart />
  </div>
</template>

<script setup>
import StatCard from './components/StatCard.vue';
import PunchChart from './components/PunchChart.vue';
</script>

// âŒ é”™è¯¯
<stat-card />           // æœªä½¿ç”¨PascalCase
<stat_card />           // æœªä½¿ç”¨PascalCase
```

**æ–‡ä»¶å‘½å**:
```
âœ… æ­£ç¡®: attendance-dashboard.vue
âœ… æ­£ç¡®: StatCard.vue
âœ… æ­£ç¡®: leave-form-modal.vue
âŒ é”™è¯¯: AttendanceDashboard.vue  # æ–‡ä»¶åä¸ä½¿ç”¨PascalCase
âŒ é”™è¯¯: leave_form_modal.vue     # ä¸ä½¿ç”¨ä¸‹åˆ’çº¿
```

**å˜é‡å‘½å**:
```javascript
// âœ… æ­£ç¡®
const attendanceList = ref([]);
const isLoading = ref(false);
const handleDelete = () => {};

// âŒ é”™è¯¯
const attendance_list = ref([]);    // ä¸ä½¿ç”¨ä¸‹åˆ’çº¿
const isloading = ref(false);         // åº”ä½¿ç”¨é©¼å³°
const handle_delete = () => {};       // ä¸ä½¿ç”¨ä¸‹åˆ’çº¿
```

#### 1.3 ç»„ä»¶è®¾è®¡è§„èŒƒ

**å•æ–‡ä»¶ç»„ä»¶ç»“æ„ï¼ˆSFCï¼‰**:
```vue
<template>
  <!-- æ¨¡æ¿éƒ¨åˆ† -->
</template>

<script setup>
import { ref, computed, onMounted } from 'vue';
import { message } from 'ant-design-vue';
import SmartTable from '@/components/SmartTable/index.vue';
import { attendanceApi } from '@/api/business/attendance';

// 1. å®šä¹‰propsï¼ˆå¦‚æœ‰ï¼‰
// 2. å®šä¹‰emitsï¼ˆå¦‚æœ‰ï¼‰
// 3. å“åº”å¼æ•°æ®
const tableData = ref([]);
const loading = ref(false);

// 4. è®¡ç®—å±æ€§
const totalCount = computed(() => tableData.value.length);

// 5. æ–¹æ³•
const fetchData = async () => {
  loading.value = true;
  try {
    const res = await attendanceApi.queryPage(queryForm);
    tableData.value = res.data;
  } catch (error) {
    message.error('åŠ è½½æ•°æ®å¤±è´¥');
  } finally {
    loading.value = false;
  }
};

// 6. ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  fetchData();
});

// 7. æš´éœ²ç»™æ¨¡æ¿
defineExpose({
  refresh: fetchData
});
</script>

<style scoped lang="less">
.attendance-dashboard {
  padding: 20px;
}
</style>
```

**ç»„ä»¶å¼€å‘å¼ºåˆ¶è§„èŒƒ**:
- âœ… ä½¿ç”¨ `<script setup>` è¯­æ³•ç³–
- âœ… ä½¿ç”¨ Composition API
- âœ… å“åº”å¼æ•°æ®ä½¿ç”¨ `ref()` / `reactive()`
- âœ… è®¡ç®—å±æ€§ä½¿ç”¨ `computed()`
- âœ… ç”Ÿå‘½å‘¨æœŸä½¿ç”¨ `onMounted()` ç­‰
- âœ… APIè°ƒç”¨ç»Ÿä¸€ä½¿ç”¨ `async/await`
- âœ… é”™è¯¯å¤„ç†ç»Ÿä¸€ä½¿ç”¨ `try-catch`
- âœ… æ ·å¼ä½¿ç”¨ `scoped` é¿å…æ±¡æŸ“
- âŒ ç¦æ­¢ä½¿ç”¨ Options APIï¼ˆ`data()`, `methods` ç­‰ï¼‰

---

## ğŸ“¦ è¯¦ç»†å¼€å‘è®¡åˆ’

### é˜¶æ®µä¸€ï¼šP0çº§æ ¸å¿ƒåŠŸèƒ½ï¼ˆç¬¬1-3å‘¨ï¼‰

#### ç¬¬1å‘¨ï¼šä»ªè¡¨ä¸­å¿ƒ + åŸºç¡€ä¿¡æ¯ç®¡ç†

##### 1.1 ä»ªè¡¨ä¸­å¿ƒï¼ˆDashboardï¼‰

**æ–‡ä»¶**: `src/views/business/attendance/dashboard/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] å®æ—¶è€ƒå‹¤ç»Ÿè®¡å¡ç‰‡ï¼ˆåº”å‡ºå‹¤/å®å‡ºå‹¤/è¿Ÿåˆ°/æ—©é€€/æ—·å·¥ï¼‰
- [ ] ä»Šæ—¥æ‰“å¡è¶‹åŠ¿å›¾è¡¨ï¼ˆæŠ˜çº¿å›¾ï¼‰
- [ ] éƒ¨é—¨å‡ºå‹¤ç‡å¯¹æ¯”ï¼ˆæŸ±çŠ¶å›¾ï¼‰
- [ ] å¼‚å¸¸å‘Šè­¦åˆ—è¡¨ï¼ˆå®æ—¶æ»šåŠ¨ï¼‰
- [ ] å¿«æ·æ“ä½œå…¥å£ï¼ˆæ’ç­/å®¡æ‰¹/æŠ¥è¡¨ï¼‰

**APIæ¥å£**:
```typescript
// src/api/business/attendance/dashboard.ts
export const dashboardApi = {
  // è·å–å®æ—¶ç»Ÿè®¡æ•°æ®
  getRealtimeStats: (params: any) => request.get('/api/attendance/dashboard/stats', { params }),

  // è·å–ä»Šæ—¥æ‰“å¡è¶‹åŠ¿
  getTodayTrend: () => request.get('/api/attendance/dashboard/trend'),

  // è·å–éƒ¨é—¨å‡ºå‹¤ç‡
  getDepartmentRate: (params: any) => request.get('/api/attendance/dashboard/department-rate', { params }),

  // è·å–å¼‚å¸¸å‘Šè­¦
  getAlertList: (params: any) => request.get('/api/attendance/dashboard/alerts', { params })
};
```

**æ ¸å¿ƒç»„ä»¶**:
```vue
<!-- components/StatCard.vue -->
<template>
  <a-card :bordered="false" class="stat-card">
    <a-statistic
      :title="title"
      :value="value"
      :precision="0"
      :suffix="suffix"
      :value-style="{ color: color }"
    >
      <template #prefix>
        <component :is="icon" />
      </template>
    </a-statistic>
  </a-card>
</template>

<script setup>
defineProps({
  title: String,
  value: Number,
  suffix: String,
  color: String,
  icon: String
});
</script>
```

**å¼€å‘æ—¶é—´**: 2å¤©

##### 1.2 åŸºç¡€ä¿¡æ¯ç®¡ç† - ç­æ¬¡ç®¡ç†

**æ–‡ä»¶**: `src/views/business/attendance/base-info/shift/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] ç­æ¬¡åˆ—è¡¨æŸ¥è¯¢ï¼ˆåˆ†é¡µã€ç­›é€‰ï¼‰
- [ ] ç­æ¬¡æ–°å¢/ç¼–è¾‘/åˆ é™¤
- [ ] ç­æ¬¡ç±»å‹ç®¡ç†ï¼ˆæ ‡å‡†/å¼¹æ€§/è½®ç­ï¼‰
- [ ] ç­æ¬¡æ—¶é—´æ®µå…³è”
- [ ] å·¥ä½œæ—¶é•¿è‡ªåŠ¨è®¡ç®—
- [ ] è·¨æ—¥ç­æ¬¡æ”¯æŒ

**è¡¨å•æ ¡éªŒè§„åˆ™**:
```typescript
const shiftFormRules = {
  shiftName: [
    { required: true, message: 'ç­æ¬¡åç§°ä¸èƒ½ä¸ºç©º', trigger: 'blur' },
    { min: 2, max: 50, message: 'ç­æ¬¡åç§°é•¿åº¦ä¸º2-50ä¸ªå­—ç¬¦', trigger: 'blur' }
  ],
  shiftType: [
    { required: true, message: 'ç­æ¬¡ç±»å‹ä¸èƒ½ä¸ºç©º', trigger: 'change' }
  ],
  timePeriods: [
    { required: true, message: 'è¯·é€‰æ‹©æ—¶é—´æ®µ', trigger: 'change' },
    {
      validator: (rule, value) => {
        return value && value.length > 0;
      },
      message: 'è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ—¶é—´æ®µ',
      trigger: 'change'
    }
  ]
};
```

**APIæ¥å£**:
```typescript
// src/api/business/attendance/shift.ts
export const shiftApi = {
  create: (data: any) => request.post('/api/attendance/shift/create', data),
  update: (data: any) => request.put('/api/attendance/shift/update', data),
  delete: (id: number) => request.delete(`/api/attendance/shift/delete/${id}`),
  query: (data: any) => request.post('/api/attendance/shift/query', data),
  detail: (id: number) => request.get(`/api/attendance/shift/detail/${id}`)
};
```

**å¼€å‘æ—¶é—´**: 2å¤©

##### 1.3 åŸºç¡€ä¿¡æ¯ç®¡ç† - æ—¶é—´æ®µç®¡ç†

**æ–‡ä»¶**: `src/views/business/attendance/base-info/time-period/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] æ—¶é—´æ®µåˆ—è¡¨æŸ¥è¯¢
- [ ] æ—¶é—´æ®µæ–°å¢/ç¼–è¾‘/åˆ é™¤
- [ ] æ—¶é—´æ®µé…ç½®ï¼ˆä¸Šä¸‹ç­æ—¶é—´ã€å®¹å¿åº¦ï¼‰
- [ ] è¿Ÿåˆ°/æ—©é€€è§„åˆ™é…ç½®
- [ ] æ˜¯å¦å¿…é¡»ç­¾åˆ°/ç­¾é€€

**å¼€å‘æ—¶é—´**: 1.5å¤©

##### 1.4 åŸºç¡€ä¿¡æ¯ç®¡ç† - è§„åˆ™é…ç½®

**æ–‡ä»¶**: `src/views/business/attendance/base-info/rule/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] è€ƒå‹¤è§„åˆ™åˆ—è¡¨
- [ ] è§„åˆ™æ–°å¢/ç¼–è¾‘/åˆ é™¤
- [ ] è§„åˆ™ç±»å‹é…ç½®ï¼ˆè¿Ÿåˆ°/æ—©é€€/æ—·å·¥/åŠ ç­ï¼‰
- [ ] è§„åˆ™å‚æ•°é…ç½®ï¼ˆJSONç¼–è¾‘å™¨ï¼‰
- [ ] è§„åˆ™å¯ç”¨/ç¦ç”¨
- [ ] è§„åˆ™é€‚ç”¨èŒƒå›´è®¾ç½®

**å¼€å‘æ—¶é—´**: 1.5å¤©

**ç¬¬1å‘¨å°è®¡**: 7å¤© âœ…

---

#### ç¬¬2å‘¨ï¼šæ’ç­ç®¡ç† + è€ƒå‹¤æ•°æ®

##### 2.1 æ’ç­ç®¡ç† - æ—¥å†è§†å›¾

**æ–‡ä»¶**: `src/views/business/attendance/schedule/index.vue`ï¼ˆå·²æœ‰ï¼Œéœ€å¢å¼ºï¼‰

**å¢å¼ºåŠŸèƒ½**:
- [ ] æœˆå†/å‘¨å†è§†å›¾åˆ‡æ¢
- [ ] æ‹–æ‹½å¼æ’ç­è°ƒæ•´
- [ ] æ’ç­å†²çªå®æ—¶æç¤º
- [ ] å¿«é€Ÿæ’ç­åŠŸèƒ½
- [ ] æ’ç­æ‰¹é‡å¯¼å…¥/å¯¼å‡º

**å…³é”®ç»„ä»¶**:
```vue
<!-- components/CalendarView.vue -->
<template>
  <div class="calendar-view">
    <a-calendar
      v-model:value="selectedDate"
      :fullscreen="false"
      @select="onDateSelect"
    >
      <template #dateCellRender="{ current }">
        <div class="calendar-cell">
          <div class="date-number">{{ current.getDate() }}</div>
          <div class="schedule-info">
            <a-tag
              v-for="item in getSchedules(current)"
              :key="item.id"
              :color="getShiftColor(item.shiftType)"
            >
              {{ item.shiftName }}
            </a-tag>
          </div>
        </div>
      </template>
    </a-calendar>
  </div>
</template>

<script setup>
import { ref } from 'vue';
import { scheduleApi } from '@/api/business/attendance/schedule';

const selectedDate = ref(moment());

const getSchedules = (date) => {
  // æ ¹æ®æ—¥æœŸè·å–æ’ç­ä¿¡æ¯
  return [];
};

const getShiftColor = (shiftType) => {
  const colors = {
    1: 'blue',    // æ ‡å‡†ç­
    2: 'green',   // å¼¹æ€§ç­
    3: 'orange',  // è½®ç­
    4: 'purple'    // å››ç­ä¸‰å€’
  };
  return colors[shiftType] || 'default';
};

const onDateSelect = (date) => {
  selectedDate.value = date;
  // æ˜¾ç¤ºæ’ç­å¼¹çª—
};
</script>
```

**å¼€å‘æ—¶é—´**: 3å¤©

##### 2.2 æ’ç­ç®¡ç† - æ¨¡æ¿ç®¡ç†

**æ–‡ä»¶**: `src/views/business/attendance/schedule/template/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] æ’ç­æ¨¡æ¿åˆ—è¡¨
- [ ] æ¨¡æ¿æ–°å¢/ç¼–è¾‘/åˆ é™¤
- [ ] æ¨¡æ¿ç±»å‹ï¼ˆéƒ¨é—¨/å²—ä½/ä¸ªäººï¼‰
- [ ] æ¨¡æ¿å‘¨æœŸé…ç½®
- [ ] æ¨¡æ¿æ‰¹é‡åº”ç”¨
- [ ] æ¨¡æ¿å¤åˆ¶åŠŸèƒ½

**å¼€å‘æ—¶é—´**: 2å¤©

##### 2.3 è€ƒå‹¤æ•°æ® - è€ƒå‹¤ç»“æœæŸ¥è¯¢

**æ–‡ä»¶**: `src/views/business/attendance/attendance-data/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] æ—¥è€ƒå‹¤ç»“æœæŸ¥è¯¢
- [ ] è€ƒå‹¤çŠ¶æ€ç­›é€‰ï¼ˆæ­£å¸¸/è¿Ÿåˆ°/æ—©é€€/æ—·å·¥ï¼‰
- [ ] è€ƒå‹¤è¯¦æƒ…æŸ¥çœ‹
- [ ] å¼‚å¸¸æ•°æ®æ ‡è®°
- [ ] æ•°æ®å¯¼å‡ºï¼ˆExcelï¼‰
- [ ] æ‰¹é‡ä¿®æ­£åŠŸèƒ½

**æ ¸å¿ƒè¡¨æ ¼é…ç½®**:
```typescript
const columns = [
  { title: 'å‘˜å·¥ç¼–å·', dataIndex: 'employeeNo', width: 120, fixed: 'left' },
  { title: 'å‘˜å·¥å§“å', dataIndex: 'employeeName', width: 120 },
  { title: 'éƒ¨é—¨', dataIndex: 'departmentName', width: 150 },
  { title: 'æ—¥æœŸ', dataIndex: 'attendanceDate', width: 120 },
  { title: 'ç­æ¬¡', dataIndex: 'shiftName', width: 100 },
  { title: 'ç­¾åˆ°æ—¶é—´', dataIndex: 'punchInTime', width: 100 },
  { title: 'ç­¾é€€æ—¶é—´', dataIndex: 'punchOutTime', width: 100 },
  {
    title: 'è€ƒå‹¤çŠ¶æ€',
    dataIndex: 'attendanceStatus',
    width: 100,
    customRender: ({ record }) => {
      const statusMap = {
        1: { text: 'æ­£å¸¸', color: 'success' },
        2: { text: 'è¿Ÿåˆ°', color: 'warning' },
        3: { text: 'æ—©é€€', color: 'warning' },
        4: { text: 'æ—·å·¥', color: 'error' },
        5: { text: 'è¯·å‡', color: 'processing' }
      };
      const status = statusMap[record.attendanceStatus];
      return h('a-tag', { color: status.color }, status.text);
    }
  },
  { title: 'å·¥ä½œæ—¶é•¿', dataIndex: 'workHours', width: 100 },
  { title: 'æ“ä½œ', dataIndex: 'action', width: 150, fixed: 'right' }
];
```

**å¼€å‘æ—¶é—´**: 2å¤©

**ç¬¬2å‘¨å°è®¡**: 7å¤© âœ…

---

#### ç¬¬3å‘¨ï¼šå¼‚å¸¸ç®¡ç† + æŠ¥è¡¨å¯¼å‡º

##### 3.1 å¼‚å¸¸ç®¡ç† - è¯·å‡ç®¡ç†

**æ–‡ä»¶**: `src/views/business/attendance/exception/leave/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] è¯·å‡ç”³è¯·åˆ—è¡¨ï¼ˆå¾…å®¡æ‰¹/å·²å®¡æ‰¹/å·²æ‹’ç»ï¼‰
- [ ] è¯·å‡ç”³è¯·å®¡æ‰¹ï¼ˆé€šè¿‡/æ‹’ç»ï¼‰
- [ ] å‡æœŸä½™é¢æŸ¥è¯¢
- [ ] è¯·å‡è¯¦æƒ…æŸ¥çœ‹
- [ ] é”€å‡åŠŸèƒ½ï¼ˆP1ï¼Œç¬¬4å‘¨å®ç°ï¼‰

**å®¡æ‰¹æµç¨‹ç»„ä»¶**:
```vue
<!-- components/ApprovalFlow.vue -->
<template>
  <a-timeline>
    <a-timeline-item
      v-for="item in approvalFlow"
      :key="item.id"
      :color="getStatusColor(item.status)"
    >
      <template #dot>
        <component :is="getStatusIcon(item.status)" />
      </template>
      <div class="flow-content">
        <div class="approver">{{ item.approverName }}</div>
        <div class="action">{{ item.actionName }}</div>
        <div class="time">{{ item.approvalTime }}</div>
        <div class="comment">{{ item.comment }}</div>
      </div>
    </a-timeline-item>
  </a-timeline>
</template>

<script setup>
import { defineProps } from 'vue';

defineProps({
  approvalFlow: Array
});

const getStatusColor = (status) => {
  return status === 2 ? 'green' : status === 3 ? 'red' : 'gray';
};

const getStatusIcon = (status) => {
  // è¿”å›å¯¹åº”çŠ¶æ€çš„å›¾æ ‡
};
</script>
```

**å¼€å‘æ—¶é—´**: 2å¤©

##### 3.2 å¼‚å¸¸ç®¡ç† - åŠ ç­ç®¡ç†

**æ–‡ä»¶**: `src/views/business/attendance/exception/overtime/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] åŠ ç­ç”³è¯·åˆ—è¡¨
- [ ] åŠ ç­ç”³è¯·å®¡æ‰¹
- [ ] åŠ ç­æ—¶é•¿è®¡ç®—
- [ ] è¡¥å¿æ–¹å¼é€‰æ‹©ï¼ˆè°ƒä¼‘/åŠ ç­è´¹ï¼‰

**å¼€å‘æ—¶é—´**: 1.5å¤©

##### 3.3 å¼‚å¸¸ç®¡ç† - è¡¥ç­¾ç®¡ç†

**æ–‡ä»¶**: `src/views/business/attendance/exception/supplement/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] è¡¥ç­¾ç”³è¯·åˆ—è¡¨
- [ ] è¡¥ç­¾ç”³è¯·å®¡æ‰¹
- [ ] è¡¥ç­¾åŸå› å®¡æ ¸
- [ ] è¡¥ç­¾è®°å½•æŸ¥çœ‹

**å¼€å‘æ—¶é—´**: 1å¤©

##### 3.4 æ±‡æ€»æŠ¥è¡¨ - æœˆåº¦æ±‡æ€»

**æ–‡ä»¶**: `src/views/business/attendance/report/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] æœˆåº¦è€ƒå‹¤æ±‡æ€»æŸ¥è¯¢
- [ ] æŒ‰å‘˜å·¥/éƒ¨é—¨æ±‡æ€»
- [ ] å‡ºå‹¤ç»Ÿè®¡æ•°æ®
- [ ] è¿Ÿåˆ°/æ—©é€€/æ—·å·¥ç»Ÿè®¡
- [ ] è¯·å‡/åŠ ç­ç»Ÿè®¡
- [ ] Excelå¯¼å‡ºåŠŸèƒ½

**å¯¼å‡ºåŠŸèƒ½å®ç°**:
```typescript
// components/ExportModal.vue
const handleExport = async (exportConfig) => {
  const loading = message.loading('æ­£åœ¨å¯¼å‡º...', 0);

  try {
    const res = await reportApi.exportMonthlySummary({
      ...exportConfig,
      format: 'excel'
    });

    // ä¸‹è½½æ–‡ä»¶
    const blob = new Blob([res.data], {
      type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
    });
    const url = window.URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `è€ƒå‹¤æ±‡æ€»_${exportConfig.yearMonth}.xlsx`;
    link.click();
    window.URL.revokeObjectURL(url);

    message.success('å¯¼å‡ºæˆåŠŸ');
  } catch (error) {
    message.error('å¯¼å‡ºå¤±è´¥');
  } finally {
    loading();
  }
};
```

**å¼€å‘æ—¶é—´**: 2.5å¤©

**ç¬¬3å‘¨å°è®¡**: 7å¤© âœ…

---

### é˜¶æ®µäºŒï¼šP1çº§é‡è¦åŠŸèƒ½ï¼ˆç¬¬4-5å‘¨ï¼‰

#### ç¬¬4å‘¨ï¼šå®¡æ‰¹æµç¨‹ + ç§»åŠ¨ç«¯

##### 4.1 å®¡æ‰¹æµç¨‹ç»Ÿä¸€ç®¡ç†

**æ–‡ä»¶**: `src/views/business/attendance/approval/index.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] å¾…å®¡æ‰¹åˆ—è¡¨ï¼ˆè¯·å‡/åŠ ç­/è¡¥ç­¾/è°ƒç­ï¼‰
- [ ] å®¡æ‰¹è¯¦æƒ…æŸ¥çœ‹
- [ ] å¿«é€Ÿå®¡æ‰¹æ“ä½œ
- [ ] æ‰¹é‡å®¡æ‰¹åŠŸèƒ½
- [ ] å®¡æ‰¹å†å²æŸ¥è¯¢

**å¼€å‘æ—¶é—´**: 3å¤©

##### 4.2 ç§»åŠ¨ç«¯å®¡æ‰¹åŠŸèƒ½

**ä½ç½®**: `smart-app/src/pages/attendance/`

**æ–°å¢é¡µé¢**:
- [ ] `approval.vue` - ç§»åŠ¨å®¡æ‰¹åˆ—è¡¨
- [ ] `approval-detail.vue` - å®¡æ‰¹è¯¦æƒ…é¡µ

**åŠŸèƒ½æ¸…å•**:
- [ ] å¾…å®¡æ‰¹æ•°é‡æé†’
- [ ] å¿«é€Ÿå®¡æ‰¹æ“ä½œ
- [ ] å®¡æ‰¹è¯¦æƒ…æŸ¥çœ‹
- [ ] å®¡æ‰¹å†å²æŸ¥çœ‹

**å¼€å‘æ—¶é—´**: 2å¤©

##### 4.3 è€ƒå‹¤é€šçŸ¥åŠŸèƒ½

**åŠŸèƒ½æ¸…å•**:
- [ ] æ‰“å¡æé†’ï¼ˆä¸Šä¸‹ç­å‰15åˆ†é’Ÿï¼‰
- [ ] æœªæ‰“å¡æé†’
- [ ] è€ƒå‹¤å¼‚å¸¸é€šçŸ¥
- [ ] å®¡æ‰¹ç»“æœé€šçŸ¥
- [ ] é€šçŸ¥é…ç½®é¡µé¢

**å¼€å‘æ—¶é—´**: 2å¤©

**ç¬¬4å‘¨å°è®¡**: 7å¤© âœ…

---

#### ç¬¬5å‘¨ï¼šæŠ¥è¡¨ç»Ÿè®¡ + é«˜çº§åŠŸèƒ½

##### 5.1 å‡ºå‹¤ç»Ÿè®¡åˆ†æ

**æ–‡ä»¶**: `src/views/business/attendance/report/stats.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] æŒ‰éƒ¨é—¨ç»Ÿè®¡å‡ºå‹¤ç‡
- [ ] æŒ‰å²—ä½ç»Ÿè®¡å‡ºå‹¤ç‡
- [ ] å‡ºå‹¤è¶‹åŠ¿åˆ†æ
- [ ] å¯¹æ¯”åˆ†æåŠŸèƒ½
- [ ] å¯è§†åŒ–å›¾è¡¨å±•ç¤º

**å¼€å‘æ—¶é—´**: 3å¤©

##### 5.2 å¼‚å¸¸ç»Ÿè®¡åˆ†æ

**æ–‡ä»¶**: `src/views/business/attendance/report/abnormal.vue`

**åŠŸèƒ½æ¸…å•**:
- [ ] å¼‚å¸¸ç±»å‹åˆ†å¸ƒ
- [ ] å¼‚å¸¸è¶‹åŠ¿åˆ†æ
- [ ] å¼‚å¸¸æ’è¡Œæ¦œ
- [ ] å¼‚å¸¸å¤„ç†ç‡ç»Ÿè®¡
- [ ] é¢„è­¦å¤„ç†è·Ÿè¸ª

**å¼€å‘æ—¶é—´**: 2å¤©

##### 5.3 æ™ºèƒ½æ’ç­ä¼˜åŒ–

**åŠŸèƒ½æ¸…å•**:
- [ ] æ’ç­æ–¹æ¡ˆå¯¹æ¯”
- [ ] æ’ç­æ•ˆæœé¢„è§ˆ
- [ ] çº¦æŸæ¡ä»¶å¯è§†åŒ–ç¼–è¾‘
- [ ] æ’ç­å†²çªæ£€æµ‹

**å¼€å‘æ—¶é—´**: 2å¤©

**ç¬¬5å‘¨å°è®¡**: 7å¤© âœ…

---

### é˜¶æ®µä¸‰ï¼šP2çº§ä¼˜åŒ–åŠŸèƒ½ï¼ˆç¬¬6å‘¨ï¼‰

#### ç¬¬6å‘¨ï¼šä¼˜åŒ–å’Œæµ‹è¯•

##### 6.1 æ€§èƒ½ä¼˜åŒ–

**ä¼˜åŒ–æ¸…å•**:
- [ ] è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®åˆ—è¡¨ï¼‰
- [ ] æŒ‰éœ€åŠ è½½å›¾è¡¨
- [ ] APIè¯·æ±‚é˜²æŠ–èŠ‚æµ
- [ ] å›¾ç‰‡æ‡’åŠ è½½
- [ ] è·¯ç”±æ‡’åŠ è½½

**å¼€å‘æ—¶é—´**: 2å¤©

##### 6.2 ç”¨æˆ·ä½“éªŒä¼˜åŒ–

**ä¼˜åŒ–æ¸…å•**:
- [ ] éª¨æ¶å±åŠ è½½
- [ ] åŠ è½½çŠ¶æ€ä¼˜åŒ–
- [ ] ç©ºçŠ¶æ€æç¤º
- [ ] é”™è¯¯è¾¹ç•Œå¤„ç†
- [ ] æ“ä½œåé¦ˆä¼˜åŒ–

**å¼€å‘æ—¶é—´**: 2å¤©

##### 6.3 å•å…ƒæµ‹è¯•å’ŒE2Eæµ‹è¯•

**æµ‹è¯•æ¸…å•**:
- [ ] æ ¸å¿ƒç»„ä»¶å•å…ƒæµ‹è¯•ï¼ˆ80%è¦†ç›–ç‡ï¼‰
- [ ] APIæ¥å£é›†æˆæµ‹è¯•
- [ ] E2Eåœºæ™¯æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•

**å¼€å‘æ—¶é—´**: 3å¤©

**ç¬¬6å‘¨å°è®¡**: 7å¤© âœ…

---

## ğŸ”’ ä»£ç è´¨é‡è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

### 2.1 TypeScriptç±»å‹è§„èŒƒ

**å¼ºåˆ¶ä½¿ç”¨TypeScript**:
```typescript
// âœ… æ­£ç¡®
interface AttendanceRecord {
  id: number;
  employeeNo: string;
  employeeName: string;
  attendanceDate: string;
  punchInTime?: string;
  punchOutTime?: string;
  attendanceStatus: number;
}

const recordList = ref<AttendanceRecord[]>([]);
const selectedRecord = ref<AttendanceRecord | null>(null);

// âŒ é”™è¯¯
const recordList = ref([]);  // ç¼ºå°‘ç±»å‹æ³¨è§£
const selectedRecord = ref(null);  // ç¼ºå°‘ç±»å‹æ³¨è§£
```

**APIç±»å‹å®šä¹‰**:
```typescript
// api/business/attendance/types.ts
export interface AttendanceQueryForm {
  pageNum: number;
  pageSize: number;
  employeeNo?: string;
  employeeName?: string;
  departmentId?: number;
  startDate?: string;
  endDate?: string;
  attendanceStatus?: number;
}

export interface AttendanceRecordVO {
  id: number;
  employeeNo: string;
  employeeName: string;
  departmentName: string;
  attendanceDate: string;
  shiftName: string;
  punchInTime: string;
  punchOutTime: string;
  attendanceStatus: number;
  attendanceStatusText: string;
  workHours: number;
}
```

### 2.2 APIè°ƒç”¨è§„èŒƒ

**ç»Ÿä¸€ä½¿ç”¨axioså°è£…**:
```typescript
// src/api/business/attendance/index.ts
import request from '@/utils/request';

export const attendanceApi = {
  // æŸ¥è¯¢åˆ†é¡µ
  queryPage: (params: AttendanceQueryForm) => {
    return request.post<PageResult<AttendanceRecordVO>>('/api/attendance/record/query', params);
  },

  // æŸ¥è¯¢è¯¦æƒ…
  detail: (id: number) => {
    return request.get<AttendanceRecordVO>(`/api/attendance/record/detail/${id}`);
  },

  // å¯¼å‡º
  export: (params: any) => {
    return request.post('/api/attendance/record/export', params, {
      responseType: 'blob'
    });
  }
};
```

**è°ƒç”¨è§„èŒƒ**:
```vue
<script setup>
import { ref } from 'vue';
import { message } from 'ant-design-vue';
import { attendanceApi } from '@/api/business/attendance';

const tableData = ref([]);
const loading = ref(false);

const fetchData = async () => {
  loading.value = true;
  try {
    const res = await attendanceApi.queryPage(queryForm);
    tableData.value = res.data.list;
    pagination.total = res.data.total;
  } catch (error) {
    message.error('åŠ è½½æ•°æ®å¤±è´¥');
    console.error('Error:', error);
  } finally {
    loading.value = false;
  }
};
</script>
```

### 2.3 è¡¨å•éªŒè¯è§„èŒƒ

**ç»Ÿä¸€è¡¨å•éªŒè¯**:
```vue
<script setup>
import { ref, reactive } from 'vue';
import { message } from 'ant-design-vue';

const formRef = ref();
const formData = reactive({
  shiftName: '',
  shiftType: undefined,
  timePeriods: []
});

const rules = {
  shiftName: [
    { required: true, message: 'ç­æ¬¡åç§°ä¸èƒ½ä¸ºç©º', trigger: 'blur' },
    { min: 2, max: 50, message: 'ç­æ¬¡åç§°é•¿åº¦ä¸º2-50ä¸ªå­—ç¬¦', trigger: 'blur' }
  ],
  shiftType: [
    { required: true, message: 'è¯·é€‰æ‹©ç­æ¬¡ç±»å‹', trigger: 'change' }
  ],
  timePeriods: [
    {
      required: true,
      message: 'è¯·é€‰æ‹©æ—¶é—´æ®µ',
      trigger: 'change',
      validator: (rule, value) => {
        return value && value.length > 0;
      }
    }
  ]
};

const handleSubmit = async () => {
  try {
    await formRef.value.validate();
    // æäº¤é€»è¾‘
    await shiftApi.create(formData);
    message.success('åˆ›å»ºæˆåŠŸ');
    handleCancel();
  } catch (error) {
    if (error.errorFields) {
      message.error('è¡¨å•éªŒè¯å¤±è´¥');
    } else {
      message.error('åˆ›å»ºå¤±è´¥');
    }
  }
};

const handleCancel = () => {
  formRef.value.resetFields();
};
</script>
```

### 2.4 æ ·å¼è§„èŒƒ

**ä½¿ç”¨BEMå‘½å**:
```vue
<style scoped lang="less">
.attendance-dashboard {          // Block
  &__header {                    // Element
    &-title {                     // Modifier
      font-size: 18px;
    }
  }

  &__content {
    padding: 20px;
  }

  &--loading {                   // Variation
    opacity: 0.6;
  }
}
</style>
```

**ä½¿ç”¨CSSå˜é‡**:
```vue
<style scoped lang="less">
.attendance-dashboard {
  --primary-color: #1890ff;
  --success-color: #52c41a;
  --warning-color: #faad14;
  --error-color: #ff4d4f;
  --border-radius: 4px;

  &__stat-card {
    border-radius: var(--border-radius);
  }
}
</style>
```

---

## ğŸ“‹ å…¨å±€ä¸€è‡´æ€§æ£€æŸ¥æ¸…å•

### 3.1 ä¸å…¶ä»–æ¨¡å—ä¿æŒä¸€è‡´

**å‚è€ƒæ¨¡å—**:
- `src/views/business/consume/` - æ¶ˆè´¹æ¨¡å—
- `src/views/business/access/` - é—¨ç¦æ¨¡å—

**ä¸€è‡´æ€§æ£€æŸ¥é¡¹**:
- [ ] ç›®å½•ç»“æ„ä¸€è‡´
- [ ] ç»„ä»¶å‘½åä¸€è‡´
- [ ] APIè°ƒç”¨æ–¹å¼ä¸€è‡´
- [ ] è¡¨æ ¼é…ç½®ä¸€è‡´
- [ ] è¡¨å•éªŒè¯ä¸€è‡´
- [ ] é”™è¯¯å¤„ç†ä¸€è‡´
- [ ] åŠ è½½çŠ¶æ€ä¸€è‡´
- [ ] æ ·å¼é£æ ¼ä¸€è‡´

### 3.2 é¿å…åŠŸèƒ½å†—ä½™

**å†—ä½™æ£€æŸ¥**:
- [ ] ä¸é‡å¤é€ è½®å­ï¼ˆä½¿ç”¨SmartTableç­‰å…¬å…±ç»„ä»¶ï¼‰
- [ ] ä¸é‡å¤å®ç°å·¥å…·å‡½æ•°ï¼ˆä½¿ç”¨utils/ï¼‰
- [ ] ä¸é‡å¤å®šä¹‰å¸¸é‡ï¼ˆä½¿ç”¨constants/ï¼‰
- [ ] ä¸é‡å¤å°è£…APIï¼ˆä½¿ç”¨api/ï¼‰

**å…¬å…±ç»„ä»¶ä½¿ç”¨**:
```vue
<script setup>
import SmartTable from '@/components/SmartTable/index.vue';
import SmartForm from '@/components/SmartForm/index.vue';
import ModalWrapper from '@/components/ModalWrapper/index.vue';

// âœ… ä½¿ç”¨å…¬å…±ç»„ä»¶
<SmartTable :columns="columns" :data="tableData" />

// âŒ ä¸è¦è‡ªå·±é€ è½®å­
// <a-table :columns="columns" :data="tableData" />
</script>
```

---

## âš ï¸ å¼€å‘æ³¨æ„äº‹é¡¹

### 4.1 æ€§èƒ½æ³¨æ„äº‹é¡¹

**1. å¤§æ•°æ®åˆ—è¡¨ä¼˜åŒ–**:
```vue
<!-- âœ… ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ -->
<template>
  <a-list
    :data-source="largeDataList"
    :grid="{ gutter: 16, column: 4 }"
    :virtual-list-props="{ height: 600 }"
  >
    <template #renderItem="{ item }">
      <a-list-item>{{ item.name }}</a-list-item>
    </template>
  </a-list>
</template>
```

**2. å›¾è¡¨æŒ‰éœ€åŠ è½½**:
```typescript
// å»¶è¿ŸåŠ è½½å›¾è¡¨åº“
const initChart = async () => {
  if (!chartLoaded.value) {
    const echarts = await import('echarts');
    chartLoaded.value = true;
    // åˆå§‹åŒ–å›¾è¡¨
  }
};
```

**3. é˜²æŠ–å’ŒèŠ‚æµ**:
```typescript
import { debounce } from 'lodash-es';

// æœç´¢è¾“å…¥é˜²æŠ–
const handleSearch = debounce((value: string) => {
  queryForm.keyword = value;
  fetchData();
}, 300);
```

### 4.2 å®‰å…¨æ³¨æ„äº‹é¡¹

**1. XSSé˜²æŠ¤**:
```vue
<!-- âœ… ä½¿ç”¨v-textæˆ–{{ }}è‡ªåŠ¨è½¬ä¹‰ -->
<div>{{ userContent }}</div>

<!-- âŒ ä¸è¦ä½¿ç”¨v-htmlæ’å…¥ç”¨æˆ·è¾“å…¥ -->
<div v-html="userContent"></div>
```

**2. æƒé™æ§åˆ¶**:
```typescript
// ä½¿ç”¨v-authæŒ‡ä»¤
<template>
  <a-button
    v-auth="'attendance:shift:delete'"
    @click="handleDelete"
  >
    åˆ é™¤
  </a-button>
</template>
```

**3. æ•æ„Ÿæ•°æ®è„±æ•**:
```typescript
// æ‰‹æœºå·è„±æ•
const maskPhone = (phone: string) => {
  if (!phone) return '';
  return phone.replace(/(\d{3})\d{4}(\d{4})/, '$1****$2');
};
```

### 4.3 å…¼å®¹æ€§æ³¨æ„äº‹é¡¹

**1. æµè§ˆå™¨å…¼å®¹**:
- ç›®æ ‡æµè§ˆå™¨ï¼šChrome 90+ã€Edge 90+ã€Firefox 88+
- ä¸ä½¿ç”¨ES2022+æ–°ç‰¹æ€§
- Polyfillå¤„ç†ï¼šcore-jsã€regenerator-runtime

**2. ç§»åŠ¨ç«¯é€‚é…**:
- å“åº”å¼å¸ƒå±€ä½¿ç”¨åª’ä½“æŸ¥è¯¢
- è§¦æ‘¸äº‹ä»¶å¤„ç†
- ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–

---

## ğŸ“Š å¼€å‘è¿›åº¦è·Ÿè¸ª

### é‡Œç¨‹ç¢‘è®¡åˆ’

| é‡Œç¨‹ç¢‘ | ç›®æ ‡ | é¢„æœŸå®Œæˆæ—¥æœŸ | å®é™…å®Œæˆæ—¥æœŸ | çŠ¶æ€ |
|--------|------|-------------|-------------|------|
| **M1: P0æ ¸å¿ƒåŠŸèƒ½** | ä»ªè¡¨ä¸­å¿ƒ+åŸºç¡€ä¿¡æ¯+æ’ç­ | ç¬¬3å‘¨å‘¨æœ« | - | â³ |
| **M2: P0å®Œæ•´åŠŸèƒ½** | è€ƒå‹¤æ•°æ®+å¼‚å¸¸ç®¡ç†+æŠ¥è¡¨ | ç¬¬3å‘¨å‘¨æœ« | - | â³ |
| **M3: P1å¢å¼ºåŠŸèƒ½** | å®¡æ‰¹æµç¨‹+ç§»åŠ¨ç«¯+ç»Ÿè®¡ | ç¬¬5å‘¨å‘¨æœ« | - | â³ |
| **M4: é¡¹ç›®äº¤ä»˜** | æµ‹è¯•+ä¼˜åŒ–+æ–‡æ¡£ | ç¬¬6å‘¨å‘¨æœ« | - | â³ |

### æ¯å‘¨è¿›åº¦æŠ¥å‘Š

**ç¬¬1å‘¨**:
- [ ] ä»ªè¡¨ä¸­å¿ƒå®Œæˆåº¦: 100%
- [ ] ç­æ¬¡ç®¡ç†å®Œæˆåº¦: 100%
- [ ] æ—¶é—´æ®µç®¡ç†å®Œæˆåº¦: 100%
- [ ] è§„åˆ™é…ç½®å®Œæˆåº¦: 100%

**ç¬¬2å‘¨**:
- [ ] æ’ç­æ—¥å†å®Œæˆåº¦: 100%
- [ ] æ’ç­æ¨¡æ¿å®Œæˆåº¦: 100%
- [ ] è€ƒå‹¤ç»“æœå®Œæˆåº¦: 100%

**ç¬¬3å‘¨**:
- [ ] è¯·å‡ç®¡ç†å®Œæˆåº¦: 100%
- [ ] åŠ ç­ç®¡ç†å®Œæˆåº¦: 100%
- [ ] è¡¥ç­¾ç®¡ç†å®Œæˆåº¦: 100%
- [ ] æœˆåº¦æ±‡æ€»å®Œæˆåº¦: 100%

---

## ğŸ¯ è´¨é‡ä¿éšœæœºåˆ¶

### 5.1 ä»£ç å®¡æŸ¥æ¸…å•

**æäº¤å‰è‡ªæ£€**:
- [ ] ä»£ç ç¬¦åˆESLintè§„èŒƒï¼ˆæ— é”™è¯¯ã€æ— è­¦å‘Šï¼‰
- [ ] ç»„ä»¶å‘½åç¬¦åˆè§„èŒƒ
- [ ] æ–‡ä»¶å‘½åç¬¦åˆè§„èŒƒ
- [ ] TypeScriptç±»å‹å®Œæ•´
- [ ] æ— console.logè°ƒè¯•ä»£ç 
- [ ] æ— æ³¨é‡Šä»£ç 
- [ ] ç»„ä»¶æœ‰é€‚å½“çš„æ³¨é‡Š
- [ ] æ— ç¡¬ç¼–ç çš„é…ç½®å€¼

### 5.2 æµ‹è¯•è¦æ±‚

**å•å…ƒæµ‹è¯•**:
```typescript
// components/__tests__/StatCard.spec.ts
import { mount } from '@vue/test-utils';
import { describe, it, expect } from 'vitest';
import StatCard from '../StatCard.vue';

describe('StatCard', () => {
  it('renders props correctly', () => {
    const wrapper = mount(StatCard, {
      props: {
        title: 'åº”å‡ºå‹¤',
        value: 100,
        suffix: 'äºº'
      }
    });

    expect(wrapper.text()).toContain('åº”å‡ºå‹¤');
    expect(wrapper.text()).toContain('100');
    expect(wrapper.text()).toContain('äºº');
  });

  it('emits click event', async () => {
    const wrapper = mount(StatCard, {
      props: { title: 'åº”å‡ºå‹¤', value: 100 }
    });

    await wrapper.find('.stat-card').trigger('click');
    expect(wrapper.emitted('click')).toBeTruthy();
  });
});
```

### 5.3 æ–‡æ¡£è¦æ±‚

**æ¯ä¸ªé¡µé¢ç»„ä»¶å¿…é¡»åŒ…å«**:
1. ç»„ä»¶åŠŸèƒ½æè¿°ï¼ˆæ³¨é‡Šï¼‰
2. Propsè¯´æ˜ï¼ˆå¦‚é€‚ç”¨ï¼‰
3. Emitsè¯´æ˜ï¼ˆå¦‚é€‚ç”¨ï¼‰
4. ä¾èµ–è¯´æ˜ï¼ˆä½¿ç”¨çš„APIï¼‰
5. ç¤ºä¾‹ä»£ç ï¼ˆå¤æ‚ç»„ä»¶ï¼‰

**ç¤ºä¾‹**:
```vue
<!--
  @fileoverview è€ƒå‹¤ä»ªè¡¨ä¸­å¿ƒä¸»é¡µé¢
  @author IOE-DREAM Team
  @description å±•ç¤ºè€ƒå‹¤å®æ—¶ç»Ÿè®¡æ•°æ®å’Œå›¾è¡¨
  @dependencies
    - StatCard.vue - ç»Ÿè®¡å¡ç‰‡ç»„ä»¶
    - PunchChart.vue - æ‰“å¡è¶‹åŠ¿å›¾è¡¨
    - dashboardApi - ä»ªè¡¨ä¸­å¿ƒAPI
  @example
  <AttendanceDashboard />
-->
<template>
  ...
</template>
```

---

## ğŸ“š é™„å½•ï¼šå‚è€ƒèµ„æº

### A.1 æŠ€æœ¯æ–‡æ¡£
- Vue 3å®˜æ–¹æ–‡æ¡£: https://cn.vuejs.org/
- Ant Design Vue: https://www.antdv.com/
- Viteå®˜æ–¹æ–‡æ¡£: https://cn.vitejs.dev/
- Piniaå®˜æ–¹æ–‡æ¡£: https://pinia.vuejs.org/zh/

### A.2 é¡¹ç›®è§„èŒƒ
- `CLAUDE.md` - å…¨å±€æ¶æ„è§„èŒƒ
- `README.md` - é¡¹ç›®è¯´æ˜
- `documentation/technical/repowiki/` - è¯¦ç»†æŠ€æœ¯è§„èŒƒ

### A.3 å‚è€ƒæ¨¡å—
- `src/views/business/consume/` - æ¶ˆè´¹æ¨¡å—ï¼ˆå‚è€ƒå®ç°ï¼‰
- `src/views/business/access/` - é—¨ç¦æ¨¡å—ï¼ˆå‚è€ƒå®ç°ï¼‰

---

**æ–‡æ¡£ç»´æŠ¤**: è¯·æ ¹æ®å®é™…å¼€å‘è¿›åº¦æ›´æ–°æœ¬è®¡åˆ’æ–‡æ¡£
**æœ€åæ›´æ–°**: 2025-01-30
**ä¸‹æ¬¡å®¡æŸ¥**: æ¯å‘¨äº”è¿›åº¦ä¼šè®®
