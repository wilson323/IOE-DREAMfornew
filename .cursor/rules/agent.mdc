---
alwaysApply: true
---


# ğŸ¢ IOE-DREAM æ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°

> **é¡¹ç›®å®šä½**: ä¼ä¸šçº§æ™ºæ…§å®‰é˜²ç®¡ç†å¹³å°
> **æ ¸å¿ƒä»·å€¼**: å¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ« + ä¸€å¡é€š + æ™ºèƒ½å®‰é˜²ä¸€ä½“åŒ–è§£å†³æ–¹æ¡ˆ
> **æŠ€æœ¯æ¶æ„**: Spring Boot 3.5.8 + Spring Cloud 2025.0.0 + Spring Cloud Alibaba 2025.0.0.0 + Vue3 + å¾®æœåŠ¡æ¶æ„
> **æ•°æ®åº“æ¶æ„**: ç»Ÿä¸€MySQL 8.0.35 + Druid 1.2.25 + MyBatis-Plus 3.5.15
> **å®‰å…¨ç­‰çº§**: å›½å®¶ä¸‰çº§ç­‰ä¿åˆè§„ + é‡‘èçº§å®‰å…¨é˜²æŠ¤

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹

**IOE-DREAM**ï¼ˆIntelligent Operations & Enterprise - Digital Resource & Enterprise Application Managementï¼‰æ˜¯IOEåŸºäºSpring Boot 3.5.8 + Spring Cloud 2025.0.0 + Spring Cloud Alibaba 2025.0.0.0 + Sa-Token + MyBatis-Pluså’ŒVue3 + Ant Design Vue + Uni-Appæ„å»ºçš„æ–°ä¸€ä»£**æ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°**ã€‚

è¯¥å¹³å°ä¸“æ³¨äºå›­åŒºä¸€å¡é€šå’Œç”Ÿç‰©è¯†åˆ«å®‰å…¨ç®¡ç†ï¼Œ**é‡‡ç”¨è¾¹ç¼˜è®¡ç®—æ¶æ„ï¼Œç”Ÿç‰©è¯†åˆ«åœ¨è®¾å¤‡ç«¯å®Œæˆï¼Œè½¯ä»¶ç«¯è´Ÿè´£æ¨¡æ¿ç®¡ç†å’Œæ•°æ®åˆ†æ**ã€‚æ˜¯å›½å†…é¦–ä¸ªé›†æˆå¤šç§ç”Ÿç‰©è¯†åˆ«æŠ€æœ¯ï¼ˆäººè„¸ã€æŒ‡çº¹ã€æŒçº¹ã€è™¹è†œã€å£°çº¹ç­‰ï¼‰å¹¶æ»¡è¶³ã€Šç½‘ç»œå®‰å…¨-ä¸‰çº§ç­‰ä¿ã€‹ã€ã€Šæ•°æ®å®‰å…¨ã€‹åŠŸèƒ½è¦æ±‚çš„å¼€æºé¡¹ç›®ï¼Œæ”¯æŒå¤šæ¨¡æ€èº«ä»½è®¤è¯ã€æ™ºèƒ½é—¨ç¦æ§åˆ¶ã€æ— æ„Ÿæ¶ˆè´¹ç»“ç®—ã€è‡ªåŠ¨è€ƒå‹¤ç®¡ç†ã€æ™ºèƒ½è®¿å®¢ç®¡ç†ã€è§†é¢‘ç›‘æ§è”åŠ¨ç­‰ä¸€ç³»åˆ—æ™ºæ…§å®‰é˜²åŠŸèƒ½ã€‚

### æ ¸å¿ƒå®šä½

| å®šä½ç»´åº¦ | è¯´æ˜ |
|---------|------|
| **ä¸šåŠ¡å®šä½** | æ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°ï¼Œæä¾›å®Œæ•´çš„ä¸€å¡é€šå’Œç”Ÿç‰©è¯†åˆ«å®‰é˜²è§£å†³æ–¹æ¡ˆ |
| **æŠ€æœ¯å®šä½** | ä¼ä¸šçº§å¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒé«˜å¹¶å‘ã€é«˜å¯ç”¨ã€æ°´å¹³æ‰©å±• |
| **å®‰å…¨å®šä½** | æ»¡è¶³å›½å®¶ä¸‰çº§ç­‰ä¿è¦æ±‚ï¼Œå…·å¤‡é‡‘èçº§å®‰å…¨é˜²æŠ¤ä½“ç³» |
| **é›†æˆå®šä½** | æ ‡å‡†åŒ–APIæ¥å£ï¼Œæ”¯æŒä¸å„ç±»ç¬¬ä¸‰æ–¹ç³»ç»Ÿæ— ç¼é›†æˆ |

### ç›®æ ‡ç”¨æˆ·

- **å›­åŒºç®¡ç†æ–¹**: æ™ºæ…§å›­åŒºã€äº§ä¸šå›­åŒºã€ç§‘æŠ€å›­åŒºçš„ç®¡ç†éƒ¨é—¨
- **ä¼ä¸šå®‰å…¨éƒ¨é—¨**: å¤§å‹ä¼ä¸šã€å­¦æ ¡ã€åŒ»é™¢ã€æ”¿åºœæœºæ„çš„å®‰å…¨ç®¡ç†éƒ¨é—¨
- **ç³»ç»Ÿé›†æˆå•†**: éœ€è¦ç”Ÿç‰©è¯†åˆ«å’Œä¸€å¡é€šç®¡ç†çš„å„ç±»ç»„ç»‡
- **é«˜å®‰å…¨åœºæ™¯**: å¯¹å®‰å…¨æ€§å’Œå®æ—¶æ€§è¦æ±‚æé«˜çš„å®‰é˜²åº”ç”¨åœºæ™¯

---

## ğŸ¯ ä¸šåŠ¡åœºæ™¯ä¸è§£å†³æ–¹æ¡ˆ

### æ ¸å¿ƒä¸šåŠ¡åœºæ™¯

#### 1. æ™ºæ…§å›­åŒºç»¼åˆç®¡ç†åœºæ™¯

**ä¸šåŠ¡ç—›ç‚¹**:

- âŒ å›­åŒºå†…å¤šä¸ªç³»ç»Ÿç‹¬ç«‹è¿è¡Œï¼Œæ•°æ®å­¤å²›ä¸¥é‡
- âŒ å‘˜å·¥éœ€è¦æºå¸¦å¤šå¼ å¡ç‰‡ï¼Œç®¡ç†ä¸ä¾¿
- âŒ è®¿å®¢ç®¡ç†æµç¨‹ç¹çï¼Œå®‰å…¨é£é™©é«˜
- âŒ ç¼ºä¹ç»Ÿä¸€çš„æ•°æ®åˆ†æå’Œå†³ç­–æ”¯æŒ

**IOE-DREAMè§£å†³æ–¹æ¡ˆ**:

- âœ… **ä¸€å¡é€šç»Ÿä¸€ç®¡ç†**: ä¸€å¼ å¡ç‰‡/ä¸€ä¸ªç”Ÿç‰©ç‰¹å¾ï¼Œé€šè¡Œå…¨å›­åŒº
- âœ… **å¤šç³»ç»Ÿæ•°æ®èåˆ**: é—¨ç¦ã€è€ƒå‹¤ã€æ¶ˆè´¹ã€è®¿å®¢æ•°æ®ç»Ÿä¸€ç®¡ç†
- âœ… **æ™ºèƒ½è®¿å®¢ç³»ç»Ÿ**: é¢„çº¦ã€å®¡æ‰¹ã€è¯†åˆ«ã€æˆæƒå…¨æµç¨‹è‡ªåŠ¨åŒ–
- âœ… **æ•°æ®é©±åŠ¨å†³ç­–**: åŸºäºå¤§æ•°æ®çš„å›­åŒºè¿è¥åˆ†æå’Œé¢„æµ‹

**å…¸å‹åº”ç”¨**:

```
æ™ºæ…§å›­åŒº â†’ å‘˜å·¥ä¸€å¡é€š â†’ é—¨ç¦é€šè¡Œ + è€ƒå‹¤æ‰“å¡ + é£Ÿå ‚æ¶ˆè´¹ + è®¿å®¢ç®¡ç†
         â†“
    ç»Ÿä¸€èº«ä»½è®¤è¯ï¼ˆäººè„¸/æŒ‡çº¹/å¡ç‰‡ï¼‰
         â†“
    æ•°æ®ç»Ÿä¸€åˆ†æ â†’ è¿è¥å†³ç­–æ”¯æŒ
```

#### 2. ä¼ä¸šå®‰å…¨é˜²æŠ¤åœºæ™¯

**ä¸šåŠ¡ç—›ç‚¹**:

- âŒ ä¼ ç»Ÿé—¨ç¦ç³»ç»Ÿå®‰å…¨æ€§ä½ï¼Œæ˜“è¢«ç ´è§£
- âŒ æ— æ³•è¯†åˆ«å†’åé¡¶æ›¿ï¼Œå®‰å…¨é£é™©é«˜
- âŒ è§†é¢‘ç›‘æ§ä¸é—¨ç¦ç³»ç»Ÿç‹¬ç«‹ï¼Œæ— æ³•è”åŠ¨
- âŒ ç¼ºä¹å¼‚å¸¸è¡Œä¸ºæ£€æµ‹å’Œé¢„è­¦æœºåˆ¶

**IOE-DREAMè§£å†³æ–¹æ¡ˆ**:

- âœ… **å¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ«**: äººè„¸ã€æŒ‡çº¹ã€æŒçº¹ã€è™¹è†œå¤šé‡éªŒè¯
- âœ… **æ´»ä½“æ£€æµ‹æŠ€æœ¯**: é˜²æ­¢ç…§ç‰‡ã€è§†é¢‘ã€ç¡…èƒ¶é¢å…·æ”»å‡»
- âœ… **è§†é¢‘ç›‘æ§è”åŠ¨**: ç”Ÿç‰©è¯†åˆ«ä¸è§†é¢‘ç›‘æ§æ™ºèƒ½è”åŠ¨
- âœ… **å¼‚å¸¸è¡Œä¸ºæ£€æµ‹**: AIæ™ºèƒ½åˆ†æï¼Œå®æ—¶æŠ¥è­¦æ¨é€

**å…¸å‹åº”ç”¨**:

```
ä¼ä¸šåŠå…¬æ¥¼ â†’ å¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ«é—¨ç¦ â†’ æ´»ä½“æ£€æµ‹ + æƒé™éªŒè¯
           â†“
       è§†é¢‘ç›‘æ§è”åŠ¨ â†’ å¼‚å¸¸è¡Œä¸ºæ£€æµ‹ â†’ å®æ—¶æŠ¥è­¦
           â†“
       é€šè¡Œè®°å½• + è§†é¢‘å½•åƒ â†’ å®‰å…¨å®¡è®¡è¿½æº¯
```

#### 3. æ— æ„Ÿæ¶ˆè´¹ç»“ç®—åœºæ™¯

**ä¸šåŠ¡ç—›ç‚¹**:

- âŒ é£Ÿå ‚æ’é˜Ÿæ—¶é—´é•¿ï¼Œæ”¯ä»˜æ•ˆç‡ä½
- âŒ ç°é‡‘ç®¡ç†ä¸ä¾¿ï¼Œå­˜åœ¨æ‰¾é›¶é—®é¢˜
- âŒ æ¶ˆè´¹æ•°æ®æ— æ³•å®æ—¶ç»Ÿè®¡å’Œåˆ†æ
- âŒ è¡¥è´´å‘æ”¾æµç¨‹å¤æ‚ï¼Œæ˜“å‡ºé”™

**IOE-DREAMè§£å†³æ–¹æ¡ˆ**:

- âœ… **æ— æ„Ÿæ”¯ä»˜**: åˆ·è„¸/åˆ·å¡/æ‰‹æœºNFCï¼Œç§’çº§å®Œæˆæ”¯ä»˜
- âœ… **ç¦»çº¿æ¶ˆè´¹**: æ”¯æŒç½‘ç»œä¸­æ–­æƒ…å†µä¸‹çš„ç¦»çº¿æ¶ˆè´¹
- âœ… **å®æ—¶ç»Ÿè®¡**: æ¶ˆè´¹æ•°æ®å®æ—¶ç»Ÿè®¡ï¼Œç»è¥çŠ¶å†µä¸€ç›®äº†ç„¶
- âœ… **æ™ºèƒ½è¡¥è´´**: è‡ªåŠ¨å‘æ”¾å‘˜å·¥è¡¥è´´ï¼Œæ”¯æŒå¤šç§è¡¥è´´ç­–ç•¥

**å…¸å‹åº”ç”¨**:

```
ä¼ä¸šé£Ÿå ‚ â†’ å‘˜å·¥åˆ·è„¸/åˆ·å¡ â†’ èº«ä»½è¯†åˆ« + ä½™é¢æ£€æŸ¥
         â†“
    ç§’çº§æ”¯ä»˜å®Œæˆ â†’ æ¶ˆè´¹è®°å½• â†’ å®æ—¶ç»Ÿè®¡
         â†“
    è¡¥è´´è‡ªåŠ¨å‘æ”¾ â†’ è´¢åŠ¡æŠ¥è¡¨ â†’ ç»è¥åˆ†æ
```

#### 4. æ™ºèƒ½è€ƒå‹¤ç®¡ç†åœºæ™¯

**ä¸šåŠ¡ç—›ç‚¹**:

- âŒ ä¼ ç»Ÿæ‰“å¡æ–¹å¼æ˜“ä»£æ‰“å¡ï¼Œè€ƒå‹¤æ•°æ®ä¸å‡†ç¡®
- âŒ æ’ç­ç®¡ç†å¤æ‚ï¼Œè§„åˆ™é…ç½®å›°éš¾
- âŒ è€ƒå‹¤æ•°æ®ç»Ÿè®¡ç¹çï¼ŒæŠ¥è¡¨ç”Ÿæˆæ…¢
- âŒ æ— æ³•ä¸é—¨ç¦ã€æ¶ˆè´¹ç³»ç»Ÿæ•°æ®è”åŠ¨

**IOE-DREAMè§£å†³æ–¹æ¡ˆ**:

- âœ… **ç”Ÿç‰©è¯†åˆ«æ‰“å¡**: äººè„¸/æŒ‡çº¹è¯†åˆ«ï¼Œé˜²æ­¢ä»£æ‰“å¡
- âœ… **çµæ´»æ’ç­ç®¡ç†**: æ”¯æŒå›ºå®šç­æ¬¡ã€å¼¹æ€§æ—¶é—´ã€è½®ç­ç­‰å¤šç§æ¨¡å¼
- âœ… **è‡ªåŠ¨è€ƒå‹¤ç»Ÿè®¡**: è‡ªåŠ¨è®¡ç®—å‡ºå‹¤ã€è¿Ÿåˆ°ã€æ—©é€€ã€åŠ ç­
- âœ… **å¤šç³»ç»Ÿæ•°æ®èåˆ**: ä¸é—¨ç¦ã€æ¶ˆè´¹æ•°æ®è”åŠ¨åˆ†æ

**å…¸å‹åº”ç”¨**:

```
ä¼ä¸šè€ƒå‹¤ â†’ å‘˜å·¥åˆ·è„¸æ‰“å¡ â†’ ç”Ÿç‰©è¯†åˆ« + ä½ç½®éªŒè¯
         â†“
    è€ƒå‹¤è®°å½• â†’ æ’ç­è§„åˆ™åŒ¹é… â†’ è‡ªåŠ¨ç»Ÿè®¡
         â†“
    è€ƒå‹¤æŠ¥è¡¨ â†’ ä¸é—¨ç¦æ•°æ®è”åŠ¨ â†’ å¼‚å¸¸åˆ†æ
```

#### 5. è®¿å®¢æ™ºèƒ½ç®¡ç†åœºæ™¯

**ä¸šåŠ¡ç—›ç‚¹**:

- âŒ è®¿å®¢ç™»è®°æµç¨‹ç¹çï¼Œç­‰å¾…æ—¶é—´é•¿
- âŒ æ— æ³•æå‰é¢„çº¦ï¼Œä¸´æ—¶è®¿å®¢ç®¡ç†å›°éš¾
- âŒ è®¿å®¢èº«ä»½æ— æ³•éªŒè¯ï¼Œå®‰å…¨é£é™©é«˜
- âŒ è®¿å®¢è½¨è¿¹æ— æ³•è¿½è¸ªï¼Œäº‹åè¿½æº¯å›°éš¾

**IOE-DREAMè§£å†³æ–¹æ¡ˆ**:

- âœ… **åœ¨çº¿é¢„çº¦**: è®¿å®¢æå‰é¢„çº¦ï¼Œå®¡æ‰¹æµç¨‹è‡ªåŠ¨åŒ–
- âœ… **èº«ä»½éªŒè¯**: äººè„¸è¯†åˆ«éªŒè¯è®¿å®¢èº«ä»½
- âœ… **ä¸´æ—¶æˆæƒ**: æ”¯æŒä¸´æ—¶é—¨ç¦æƒé™å‘æ”¾å’Œå›æ”¶
- âœ… **è½¨è¿¹è¿½è¸ª**: å®Œæ•´è®°å½•è®¿å®¢åœ¨å›­åŒºçš„æ´»åŠ¨è½¨è¿¹

**å…¸å‹åº”ç”¨**:

```
è®¿å®¢ç®¡ç† â†’ åœ¨çº¿é¢„çº¦ â†’ å®¡æ‰¹é€šè¿‡ â†’ äººè„¸è¯†åˆ«ç™»è®°
         â†“
    ä¸´æ—¶æƒé™å‘æ”¾ â†’ é—¨ç¦é€šè¡Œ â†’ è½¨è¿¹è®°å½•
         â†“
    è®¿é—®ç»“æŸ â†’ æƒé™å›æ”¶ â†’ è®¿é—®æŠ¥å‘Š
```

#### 6. è§†é¢‘ç›‘æ§æ™ºèƒ½åˆ†æåœºæ™¯

**ä¸šåŠ¡ç—›ç‚¹**:

- âŒ è§†é¢‘ç›‘æ§è¢«åŠ¨ï¼Œéœ€è¦äººå·¥æŸ¥çœ‹
- âŒ æ— æ³•è‡ªåŠ¨è¯†åˆ«å¼‚å¸¸è¡Œä¸º
- âŒ è§†é¢‘æ£€ç´¢å›°éš¾ï¼ŒæŸ¥æ‰¾ç‰¹å®šç›®æ ‡è€—æ—¶
- âŒ æ— æ³•ä¸é—¨ç¦ã€è®¿å®¢ç³»ç»Ÿè”åŠ¨

**IOE-DREAMè§£å†³æ–¹æ¡ˆ**:

- âœ… **æ™ºèƒ½åˆ†æ**: AIäººè„¸è¯†åˆ«ã€è¡Œä¸ºåˆ†æã€å¼‚å¸¸æ£€æµ‹
- âœ… **ç›®æ ‡æœç´¢**: å¿«é€Ÿæ£€ç´¢ç‰¹å®šäººå‘˜æˆ–è½¦è¾†çš„å†å²è½¨è¿¹
- âœ… **å®æ—¶å‘Šè­¦**: å¼‚å¸¸è¡Œä¸ºè‡ªåŠ¨æ£€æµ‹ï¼Œå®æ—¶æ¨é€å‘Šè­¦
- âœ… **å¤šç³»ç»Ÿè”åŠ¨**: ä¸é—¨ç¦ã€è®¿å®¢ç³»ç»Ÿæ™ºèƒ½è”åŠ¨

**å…¸å‹åº”ç”¨**:

```
è§†é¢‘ç›‘æ§ â†’ å®æ—¶ç›‘æ§ â†’ AIæ™ºèƒ½åˆ†æ â†’ å¼‚å¸¸æ£€æµ‹
         â†“
    ç›®æ ‡æœç´¢ â†’ äººè„¸è¯†åˆ« â†’ è½¨è¿¹è¿½è¸ª
         â†“
    é—¨ç¦è”åŠ¨ â†’ è®¿å®¢è”åŠ¨ â†’ å‘Šè­¦æ¨é€
```

---

## ğŸ’¼ ä¸šåŠ¡ä»·å€¼

### æ ¸å¿ƒä¸šåŠ¡ä»·å€¼

| ä»·å€¼ç»´åº¦ | å…·ä½“ä»·å€¼ |
|---------|---------|
| **èº«ä»½ç»Ÿä¸€ç®¡ç†** | å»ºç«‹ç»Ÿä¸€çš„æ•°å­—èº«ä»½ä½“ç³»ï¼Œæ”¯æŒå¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ«ï¼Œä¸€å¼ è„¸/ä¸€å¼ å¡é€šè¡Œå…¨å›­åŒº |
| **æ— æ„Ÿé€šè¡Œä½“éªŒ** | å®ç°åˆ·è„¸ã€åˆ·å¡ã€NFCç­‰å¤šç§æ–¹å¼çš„ä¾¿æ·é€šè¡Œï¼Œç§’çº§è¯†åˆ«ï¼Œæ— éœ€ç­‰å¾… |
| **æ™ºèƒ½å®‰å…¨ä¿éšœ** | é€šè¿‡AIåˆ†æå’Œå¤šç³»ç»Ÿè”åŠ¨ï¼Œæä¾›å…¨æ–¹ä½å®‰å…¨ä¿éšœï¼Œæ»¡è¶³ä¸‰çº§ç­‰ä¿è¦æ±‚ |
| **æ•°æ®é©±åŠ¨å†³ç­–** | åŸºäºå¤§æ•°æ®åˆ†æï¼Œä¸ºå›­åŒºç®¡ç†æä¾›å†³ç­–æ”¯æŒï¼Œæå‡è¿è¥æ•ˆç‡ |
| **è¿è¥æ•ˆç‡æå‡** | è‡ªåŠ¨åŒ–å¤„ç†æµç¨‹ï¼Œé™ä½è¿è¥æˆæœ¬ï¼Œæå‡ç®¡ç†æ•ˆç‡ï¼Œå‡å°‘äººå·¥å¹²é¢„ |

### è§£å†³çš„æ ¸å¿ƒé—®é¢˜

1. **æ•°æ®å­¤å²›é—®é¢˜** â†’ ç»Ÿä¸€æ•°æ®å¹³å°ï¼Œå¤šç³»ç»Ÿæ•°æ®èåˆ
2. **èº«ä»½ç®¡ç†åˆ†æ•£** â†’ ç»Ÿä¸€èº«ä»½è®¤è¯ï¼Œå¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ«
3. **å®‰å…¨é˜²æŠ¤è–„å¼±** â†’ å¤šå±‚çº§å®‰å…¨é˜²æŠ¤ï¼Œæ™ºèƒ½å¼‚å¸¸æ£€æµ‹
4. **ç®¡ç†æ•ˆç‡ä½ä¸‹** â†’ è‡ªåŠ¨åŒ–æµç¨‹ï¼Œæ™ºèƒ½åŒ–ç®¡ç†
5. **ç”¨æˆ·ä½“éªŒå·®** â†’ æ— æ„Ÿæ”¯ä»˜ï¼Œä¾¿æ·é€šè¡Œï¼Œæ™ºèƒ½æœåŠ¡

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„äº®ç‚¹

### å¾®æœåŠ¡æ¶æ„

**11ä¸ªæ ¸å¿ƒå¾®æœåŠ¡**:

- **ioedream-gateway-service** (8080): APIç½‘å…³ï¼Œç»Ÿä¸€å…¥å£
- **ioedream-common-service** (8088): å…¬å…±ä¸šåŠ¡æœåŠ¡ï¼ˆç”¨æˆ·ã€ç»„ç»‡ã€æƒé™ï¼‰
- **ioedream-device-comm-service** (8087): è®¾å¤‡é€šè®¯æœåŠ¡ï¼ˆåè®®é€‚é…ã€æ¨¡æ¿ä¸‹å‘ âš ï¸ ä¸åšè¯†åˆ«ï¼‰
- **ioedream-oa-service** (8089): OAåŠå…¬æœåŠ¡ï¼ˆå·¥ä½œæµã€å®¡æ‰¹ï¼‰
- **ioedream-access-service** (8090): é—¨ç¦ç®¡ç†æœåŠ¡ï¼ˆé‡‡ç”¨è¾¹ç¼˜è‡ªä¸»éªŒè¯æ¨¡å¼ âš ï¸ æ¥æ”¶è®¾å¤‡ä¸Šä¼ è®°å½•ï¼‰
- **ioedream-attendance-service** (8091): è€ƒå‹¤ç®¡ç†æœåŠ¡ï¼ˆé‡‡ç”¨è¾¹ç¼˜è¯†åˆ«+ä¸­å¿ƒè®¡ç®—æ¨¡å¼ï¼‰
- **ioedream-video-service** (8092): è§†é¢‘ç›‘æ§æœåŠ¡ï¼ˆé‡‡ç”¨è¾¹ç¼˜AIè®¡ç®—æ¨¡å¼ï¼‰
- **ioedream-database-service** (8093): æ•°æ®åº“ç®¡ç†æœåŠ¡ï¼ˆå¤‡ä»½æ¢å¤ã€æ€§èƒ½ç›‘æ§ï¼‰
- **ioedream-consume-service** (8094): æ¶ˆè´¹ç®¡ç†æœåŠ¡ï¼ˆé‡‡ç”¨ä¸­å¿ƒå®æ—¶éªŒè¯æ¨¡å¼ï¼‰
- **ioedream-visitor-service** (8095): è®¿å®¢ç®¡ç†æœåŠ¡ï¼ˆé‡‡ç”¨æ··åˆéªŒè¯æ¨¡å¼ï¼‰
- **ioedream-biometric-service** (8096): ç”Ÿç‰©æ¨¡æ¿ç®¡ç†æœåŠ¡ï¼ˆæ¨¡æ¿å­˜å‚¨ã€ç‰¹å¾æå–ã€è®¾å¤‡ä¸‹å‘ âš ï¸ ä»…ç®¡ç†æ•°æ®ï¼Œä¸åšè¯†åˆ«ï¼‰

### æŠ€æœ¯æ ˆä¼˜åŠ¿

- **Spring Boot 3.5.8**: ç°ä»£åŒ–æ¡†æ¶ï¼Œæ”¯æŒè™šæ‹Ÿçº¿ç¨‹ï¼Œæ€§èƒ½ä¼˜å¼‚
- **Spring Cloud 2025.0.0**: æœ€æ–°å¾®æœåŠ¡æ¡†æ¶ï¼Œå®Œå…¨å…¼å®¹Spring Boot 3.5.8
- **Spring Cloud Alibaba 2025.0.0.0**: æœ€æ–°ç¨³å®šç‰ˆï¼Œå®Œå…¨å…¼å®¹å½“å‰æŠ€æœ¯æ ˆï¼Œæ”¯æŒå®Œæ•´çš„`optional:nacos:`åŠŸèƒ½
- **Java 17**: LTSç‰ˆæœ¬ï¼Œé•¿æœŸæ”¯æŒï¼Œæ€§èƒ½ä¼˜åŒ–
- **MySQL 8.0.35 + MyBatis-Plus 3.5.15**: æ•°æ®åº“è®¿é—®å±‚
- **Druid 1.2.25**: æ•°æ®åº“è¿æ¥æ± ï¼Œç›‘æ§åŠŸèƒ½å®Œå–„
- **Vue3 + Vite5**: å‰ç«¯ç°ä»£åŒ–ï¼Œå¼€å‘ä½“éªŒä¼˜ç§€
- **å¤šçº§ç¼“å­˜**: Caffeine 3.1.8æœ¬åœ°ç¼“å­˜ + Redisåˆ†å¸ƒå¼ç¼“å­˜
- **åˆ†å¸ƒå¼äº‹åŠ¡**: Seata 2.0.0ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- **å®¹é”™æœºåˆ¶**: Resilience4j 2.1.0ç†”æ–­é™æµ
- **å¾®æœåŠ¡æ²»ç†**: Nacosæ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒï¼ˆæ”¯æŒå¯é€‰é…ç½®åŠ è½½ï¼‰
- **ç›‘æ§æŒ‡æ ‡**: Micrometer 1.13.6 + Prometheus

---

## ğŸ“š IOE-DREAM æ–‡æ¡£å¯¼èˆªä¸­å¿ƒ

> **ğŸ“‹ æ–‡æ¡£ç®¡ç†çŠ¶æ€**: âœ… å·²å®Œæˆå…¨é¢æ¸…ç†å’Œé‡ç»„ (2025-12-02)
> **ğŸ“Š æ–‡æ¡£æ€»æ•°**: å·²ä»1935ä¸ªä¼˜åŒ–æ•´ç†ï¼Œå»ºç«‹æ¸…æ™°çš„æ–‡æ¡£ä½“ç³»
> **ğŸ—‚ï¸ æ–‡æ¡£æ¶æ„**: ç»Ÿä¸€ä½¿ç”¨ `documentation/` ä½œä¸ºå”¯ä¸€æ–‡æ¡£ç›®å½•
> **ğŸ‘¥ ç»´æŠ¤è´£ä»»äºº**: è€ç‹(æ¶æ„å¸ˆå›¢é˜Ÿ) + å„ä¸šåŠ¡æ¨¡å—è´Ÿè´£äºº

---

## ğŸ¯ å¿«é€Ÿå¯¼èˆªï¼ˆæŒ‰å¼€å‘åœºæ™¯ï¼‰

### ğŸš€ æ–°æ‰‹å…¥é—¨

- **ğŸ“– é¡¹ç›®å¿«é€Ÿå¼€å§‹**: [documentation/technical/00-å¿«é€Ÿå¼€å§‹/](./documentation/technical/00-å¿«é€Ÿå¼€å§‹/)
- **ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®**: [documentation/technical/å¼€å‘æŒ‡å—.md](./documentation/technical/repowiki/zh/content/å¼€å‘æŒ‡å—.md)
- **ğŸ“‹ æ ¸å¿ƒè§„èŒƒ10æ¡**: [documentation/technical/00-å¿«é€Ÿå¼€å§‹/æ ¸å¿ƒè§„èŒƒ10æ¡.md](./documentation/technical/00-å¿«é€Ÿå¼€å§‹/æ ¸å¿ƒè§„èŒƒ10æ¡.md)

### ğŸ—ï¸ æ¶æ„è®¾è®¡

- **ğŸ“ å››å±‚æ¶æ„è¯¦è§£**: [documentation/technical/å››å±‚æ¶æ„è¯¦è§£.md](./documentation/technical/repowiki/zh/content/åç«¯æ¶æ„/å››å±‚æ¶æ„è¯¦è§£/å››å±‚æ¶æ„è¯¦è§£.md)
- **ğŸ›ï¸ å¾®æœåŠ¡æ¶æ„**: [documentation/architecture/](./documentation/architecture/)
- **ğŸ”— APIè®¾è®¡è§„èŒƒ**: [documentation/api/](./documentation/api/)

### ğŸ’» å¼€å‘è§„èŒƒ

- **ğŸ“œ Javaç¼–ç è§„èŒƒ**: [documentation/technical/repowiki/zh/content/å¼€å‘è§„èŒƒä½“ç³»/æ ¸å¿ƒè§„èŒƒ/Javaç¼–ç è§„èŒƒ.md](./documentation/technical/repowiki/zh/content/å¼€å‘è§„èŒƒä½“ç³»/æ ¸å¿ƒè§„èŒƒ/Javaç¼–ç è§„èŒƒ.md)
- **ğŸ¨ Vue3å¼€å‘è§„èŒƒ**: [documentation/technical/repowiki/zh/content/å¼€å‘è§„èŒƒä½“ç³»/Vue3å¼€å‘è§„èŒƒ.md](./documentation/technical/repowiki/zh/content/å¼€å‘è§„èŒƒä½“ç³»/Vue3å¼€å‘è§„èŒƒ.md)
- **ğŸ“‹ ç»Ÿä¸€å¼€å‘æ ‡å‡†**: [documentation/technical/UNIFIED_DEVELOPMENT_STANDARDS.md](./documentation/technical/UNIFIED_DEVELOPMENT_STANDARDS.md)

### ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡ä¸è¿ç§»

- **ğŸ—ƒï¸ æ•°æ®åº“è®¾è®¡è§„èŒƒ**: [documentation/technical/repowiki/zh/content/åç«¯æ¶æ„/æ•°æ®æ¨¡å‹ä¸ORM/](./documentation/technical/repowiki/zh/content/åç«¯æ¶æ„/æ•°æ®æ¨¡å‹ä¸ORM/)
- **ğŸ“Š SQLæ€§èƒ½ä¼˜åŒ–**: [documentation/technical/repowiki/zh/content/åç«¯æ¶æ„/æ•°æ®æ¨¡å‹ä¸ORM/SQLæ˜ å°„ä¸åŠ¨æ€SQL/SQLæ€§èƒ½ä¼˜åŒ–.md](./documentation/technical/repowiki/zh/content/åç«¯æ¶æ„/æ•°æ®æ¨¡å‹ä¸ORM/SQLæ˜ å°„ä¸åŠ¨æ€SQL/SQLæ€§èƒ½ä¼˜åŒ–.md)
- **ğŸš€ æ•°æ®åº“è¿ç§»ç­–ç•¥**: [documentation/technical/DATABASE_MIGRATION_COMPREHENSIVE_STRATEGY.md](./documentation/technical/DATABASE_MIGRATION_COMPREHENSIVE_STRATEGY.md)
- **ğŸ› ï¸ è¿ç§»è‡ªåŠ¨åŒ–å·¥å…·**: [scripts/database/migration-automation.ps1](./scripts/database/migration-automation.ps1)
- **âš™ï¸ Flywayé…ç½®æ¨¡æ¿**: [microservices/config-templates/flyway-standard-template.yml](./microservices/config-templates/flyway-standard-template.yml)

### ğŸ”’ å®‰å…¨ä½“ç³»

- **ğŸ›¡ï¸ å®‰å…¨ä½“ç³»è§„èŒƒ**: [documentation/security/](./documentation/security/)
- **ğŸ” æ¥å£åŠ è§£å¯†**: [documentation/technical/repowiki/zh/content/å®‰å…¨ä½“ç³»/æ¥å£åŠ è§£å¯†/æ¥å£åŠ è§£å¯†.md](./documentation/technical/repowiki/zh/content/å®‰å…¨ä½“ç³»/æ¥å£åŠ è§£å¯†/æ¥å£åŠ è§£å¯†.md)
- **ğŸ”’ æ•°æ®è„±æ•**: [documentation/technical/repowiki/zh/content/å®‰å…¨ä½“ç³»/æ•°æ®è„±æ•.md](./documentation/technical/repowiki/zh/content/å®‰å…¨ä½“ç³»/æ•°æ®è„±æ•.md)

### ğŸ“¦ ä¸šåŠ¡æ¨¡å—

- **ğŸ¢ ä¼ä¸šOAç³»ç»Ÿ**: [documentation/technical/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/ä¼ä¸šOAç³»ç»Ÿ/](./documentation/technical/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/ä¼ä¸šOAç³»ç»Ÿ/)
- **ğŸšª æ™ºèƒ½é—¨ç¦**: [documentation/business/](./documentation/business/) (é—¨ç¦ç›¸å…³æ–‡æ¡£)
- **ğŸ’³ æ¶ˆè´¹ç®¡ç†**: [documentation/business/](./documentation/business/) (æ¶ˆè´¹ç›¸å…³æ–‡æ¡£)
- **â° è€ƒå‹¤ç³»ç»Ÿ**: [documentation/business/](./documentation/business/) (è€ƒå‹¤ç›¸å…³æ–‡æ¡£)
- **ğŸ‘¥ è®¿å®¢ç®¡ç†**: [documentation/business/](./documentation/business/) (è®¿å®¢ç›¸å…³æ–‡æ¡£)
- **ğŸ“¹ è§†é¢‘ç›‘æ§**: [documentation/business/](./documentation/business/) (è§†é¢‘ç›¸å…³æ–‡æ¡£)

### ğŸš€ éƒ¨ç½²è¿ç»´

- **ğŸ³ Dockeréƒ¨ç½²**: [documentation/deployment/docker/](./documentation/deployment/docker/)
- **â˜¸ï¸ Kubernetes**: [documentation/deployment/k8s/](./documentation/deployment/k8s/)
- **ğŸ“Š ç›‘æ§è¿ç»´**: [documentation/maintenance/](./documentation/maintenance/)
- **ğŸ“‹ éƒ¨ç½²æŒ‡å—**: [DEPLOYMENT-GUIDE.md](./documentation/project/archive/root-reports/DEPLOYMENT-GUIDE.md)

### ğŸ”§ å¼€å‘å·¥å…·

- **âš™ï¸ å¼€å‘æ£€æŸ¥æ¸…å•**: [documentation/technical/CHECKLISTS/](./documentation/technical/CHECKLISTS/)
- **ğŸ¤– AIè¾…åŠ©å¼€å‘**: [documentation/development/training/](./documentation/development/training/)
- **ğŸ“‹ æ–‡æ¡£ç®¡ç†è§„èŒƒ**: [DOCUMENTATION_MANAGEMENT_STANDARDS.md](./documentation/DOCUMENTATION_MANAGEMENT_STANDARDS.md)

---

## ğŸ—‚ï¸ å®Œæ•´æ–‡æ¡£ç›®å½•ç»“æ„

### ğŸ“ documentation/ (ä¸»æ–‡æ¡£ç›®å½•)

```
documentation/
â”œâ”€â”€ ğŸ“‹ DOCUMENTATION_MANAGEMENT_STANDARDS.md    # æ–‡æ¡£ç®¡ç†è§„èŒƒ
â”œâ”€â”€ ğŸ—ï¸ architecture/                            # æ¶æ„è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ ğŸ’» api/                                    # APIæ¥å£æ–‡æ¡£
â”œâ”€â”€ ğŸ¢ business/                               # ä¸šåŠ¡éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ ğŸ› ï¸ development/                            # å¼€å‘æŒ‡å—æ–‡æ¡£
â”œâ”€â”€ ğŸš€ deployment/                            # éƒ¨ç½²è¿ç»´æ–‡æ¡£
â”œâ”€â”€ ğŸ”’ security/                              # å®‰å…¨ç›¸å…³æ–‡æ¡£
â”œâ”€â”€ ğŸ“Š maintenance/                           # ç›‘æ§ç»´æŠ¤æ–‡æ¡£
â”œâ”€â”€ ğŸ“ˆ project/                               # é¡¹ç›®ç®¡ç†æ–‡æ¡£
â””â”€â”€ ğŸ—‚ï¸ archive/                               # å½’æ¡£å†å²æ–‡æ¡£
    â”œâ”€â”€ docs-legacy/                          # åŸdocsç›®å½•å½’æ¡£
    â”œâ”€â”€ legacy-standards/                      # æ—§ç‰ˆæ ‡å‡†å½’æ¡£
    â”œâ”€â”€ legacy-workflows/                      # æ—§ç‰ˆæµç¨‹å½’æ¡£
    â”œâ”€â”€ legacy-tech-stack/                     # æ—§ç‰ˆæŠ€æœ¯æ ˆå½’æ¡£
    â”œâ”€â”€ root-reports/                         # æ ¹ç›®å½•æŠ¥å‘Šå½’æ¡£
    â””â”€â”€ ...
```

### ğŸ“ é¡¹ç›®ä¸“é¡¹æ–‡æ¡£

```
â”œâ”€â”€ ğŸ“‹ CLAUDE.md                              # é¡¹ç›®æ ¸å¿ƒæŒ‡å¯¼æ–‡æ¡£ (æœ¬æ–‡ä»¶)
â”œâ”€â”€ ğŸ“‹ openspec/                              # OpenSpecè§„èŒƒç®¡ç†
â”œâ”€â”€ ğŸ”§ scripts/                              # è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ ğŸ¯ .claude/skills/                        # AIæŠ€èƒ½ä½“ç³»
â””â”€â”€ ğŸ“¦ microservices/                         # å¾®æœåŠ¡æ–‡æ¡£
```

---

## ğŸ” æ–‡æ¡£æœç´¢æŠ€å·§

### æŒ‰æ–‡æ¡£ç±»å‹æœç´¢

- **è§„èŒƒæ–‡æ¡£**: æœç´¢ `è§„èŒƒ`ã€`STANDARD`ã€`GUIDE`
- **APIæ–‡æ¡£**: æœç´¢ `API`ã€`æ¥å£`ã€`REST`
- **æ¶æ„æ–‡æ¡£**: æœç´¢ `æ¶æ„`ã€`ARCHITECTURE`ã€`è®¾è®¡`
- **éƒ¨ç½²æ–‡æ¡£**: æœç´¢ `éƒ¨ç½²`ã€`DEPLOY`ã€`DOCKER`

### æŒ‰ä¸šåŠ¡æ¨¡å—æœç´¢

- **é—¨ç¦**: æœç´¢ `é—¨ç¦`ã€`ACCESS`ã€`æ™ºèƒ½é—¨ç¦`
- **æ¶ˆè´¹**: æœç´¢ `æ¶ˆè´¹`ã€`CONSUME`ã€`ä¸€å¡é€š`
- **è€ƒå‹¤**: æœç´¢ `è€ƒå‹¤`ã€`ATTENDANCE`ã€`æ’ç­`
- **è§†é¢‘**: æœç´¢ `è§†é¢‘`ã€`VIDEO`ã€`ç›‘æ§`

### æŒ‰æŠ€æœ¯æ ˆæœç´¢

- **Java**: æœç´¢ `JAVA`ã€`SPRING`ã€`MYBATIS`
- **Vue**: æœç´¢ `VUE`ã€`å‰ç«¯`ã€`COMPONENT`
- **æ•°æ®åº“**: æœç´¢ `MYSQL`ã€`REDIS`ã€`SQL`

---

## ğŸ“ æ–‡æ¡£æ”¯æŒå’Œåé¦ˆ

### ğŸ†˜ é‡åˆ°æ–‡æ¡£é—®é¢˜ï¼Ÿ

1. **æ–‡æ¡£ç¼ºå¤±**: åœ¨é¡¹ç›®issueä¸­æäº¤ "æ–‡æ¡£ç¼ºå¤±" æ ‡ç­¾
2. **å†…å®¹é”™è¯¯**: è”ç³»å¯¹åº”æ¨¡å—è´Ÿè´£äººæˆ–æ¶æ„å¸ˆå›¢é˜Ÿ
3. **æ ¼å¼é—®é¢˜**: å‚è€ƒ [æ–‡æ¡£ç®¡ç†è§„èŒƒ](./documentation/DOCUMENTATION_MANAGEMENT_STANDARDS.md)

### ğŸ“ è´¡çŒ®æ–‡æ¡£

1. **éµå¾ªè§„èŒƒ**: ä¸¥æ ¼æŒ‰ç…§ [æ–‡æ¡£ç®¡ç†è§„èŒƒ](./documentation/DOCUMENTATION_MANAGEMENT_STANDARDS.md) åˆ›å»º
2. **å†…å®¹å‡†ç¡®**: ç¡®ä¿æŠ€æœ¯å†…å®¹å‡†ç¡®æ— è¯¯
3. **æ ¼å¼ç»Ÿä¸€**: ä½¿ç”¨æ ‡å‡†Markdownæ ¼å¼
4. **åŠæ—¶æ›´æ–°**: ä¿æŒå†…å®¹ä¸é¡¹ç›®åŒæ­¥

### ğŸ”„ æ–‡æ¡£æ›´æ–°æœºåˆ¶

- **å®šæœŸæ¸…ç†**: æ¯æœˆè‡ªåŠ¨æ¸…ç†è¿‡æœŸå’Œé‡å¤æ–‡æ¡£
- **è´¨é‡æ£€æŸ¥**: æ¯å­£åº¦è¿›è¡Œæ–‡æ¡£è´¨é‡è¯„ä¼°
- **ç”¨æˆ·åé¦ˆ**: æŒç»­æ”¶é›†å¼€å‘è€…åé¦ˆå¹¶æ”¹è¿›

---

**ğŸ’¡ é‡è¦æé†’**:

- æœ¬å¯¼èˆªä¸­å¿ƒæ˜¯IOE-DREAMé¡¹ç›®çš„å”¯ä¸€æ–‡æ¡£å…¥å£
- æ‰€æœ‰æ–‡æ¡£éƒ½éµå¾ªç»Ÿä¸€çš„ç®¡ç†è§„èŒƒå’Œè´¨é‡æ ‡å‡†
- å‘ç°æ–‡æ¡£é—®é¢˜è¯·åŠæ—¶åé¦ˆï¼Œè®©æˆ‘ä»¬å…±åŒç»´æŠ¤ä¼˜è´¨çš„æ–‡æ¡£ç¯å¢ƒ

---

# IOE-DREAM é¡¹ç›®å…¨å±€ç»Ÿä¸€æ¶æ„è§„èŒƒ

**ç‰ˆæœ¬**: v4.0.0 - ä¸ƒå¾®æœåŠ¡é‡æ„ç‰ˆ
**ç”Ÿæ•ˆæ—¥æœŸ**: 2025-12-02
**é‡è¦æ›´æ–°**: ä¸¥æ ¼æŒ‰ç…§ç”¨æˆ·è¦æ±‚é‡æ„ä¸º7ä¸ªå¾®æœåŠ¡æ¶æ„ï¼šå…¬å…±æ¨¡å—+è®¾å¤‡é€šè®¯+OA+è€ƒå‹¤+é—¨ç¦+æ¶ˆè´¹+è®¿å®¢+è§†é¢‘
**é€‚ç”¨èŒƒå›´**: IOE-DREAMæ™ºèƒ½ç®¡ç†ç³»ç»Ÿæ‰€æœ‰å¾®æœåŠ¡å’Œæ¨¡å—
**è§„èŒƒä¼˜å…ˆçº§**: æœ¬è§„èŒƒä¸ºé¡¹ç›®å”¯ä¸€æ¶æ„è§„èŒƒï¼Œæ‰€æœ‰å¼€å‘å¿…é¡»ä¸¥æ ¼éµå¾ª
**è§„èŒƒå®šä½**: ä¼ä¸šçº§ç”Ÿäº§ç¯å¢ƒæ¶æ„æ ‡å‡†ï¼Œæ¶µç›–é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜æ‰©å±•æ€§è¦æ±‚

**æ·±åº¦åˆ†æåŸºç¡€**: åŸºäº2025-12-01å…¨å±€æ¶æ„æ·±åº¦åˆ†æç»“æœï¼Œç»¼åˆè¯„åˆ†83/100ï¼Œå…¨é¢åæ˜ é¡¹ç›®ç°çŠ¶å’Œä¼˜åŒ–æ–¹å‘

> **åˆ†æå›¢é˜Ÿ**: è€ç‹ï¼ˆä¼ä¸šçº§æ¶æ„åˆ†æä¸“å®¶å›¢é˜Ÿï¼‰
> **åˆ†æèŒƒå›´**: 22ä¸ªå¾®æœåŠ¡ï¼Œ9ä¸ªå…³é”®ç»´åº¦ï¼Œ500+æ–‡ä»¶æ·±åº¦åˆ†æ
> **åˆ†æç»“æœ**: è¯†åˆ«äº†å…³é”®é—®é¢˜å’Œä¼˜åŒ–æœºä¼šï¼Œåˆ¶å®šäº†è¯¦ç»†çš„æ”¹è¿›è·¯çº¿å›¾

---

## ğŸ“‹ æ ¸å¿ƒæ¶æ„åŸåˆ™

### 1. å››å±‚æ¶æ„è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

```
Controller â†’ Service â†’ Manager â†’ DAO
```

**ä¸¥æ ¼åˆ†å±‚èŒè´£**ï¼š

#### ğŸ¯ Controllerå±‚ - æ¥å£æ§åˆ¶å±‚

**æ ¸å¿ƒèŒè´£**ï¼š

- æ¥æ”¶HTTPè¯·æ±‚ï¼Œå‚æ•°éªŒè¯(@Valid)
- è°ƒç”¨Serviceå±‚ï¼Œæš´éœ²REST API
- å°è£…ResponseDTOï¼Œå¤„ç†HTTPçŠ¶æ€ç 
- å¼‚å¸¸ç»Ÿä¸€å¤„ç†å’Œé”™è¯¯ç è¿”å›

**ä»£ç æ¨¡æ¿**ï¼š

```java
@RestController
@RequestMapping("/api/v1/consume")
public class ConsumeController {

    @Resource
    private ConsumeService consumeService;

    @PostMapping("/consume")
    public ResponseDTO<ConsumeResultDTO> consume(@Valid @RequestBody ConsumeRequestDTO request) {
        ConsumeResultDTO result = consumeService.consume(request);
        return ResponseDTO.ok(result);
    }

    @ExceptionHandler(BusinessException.class)
    public ResponseDTO<Void> handleBusinessException(BusinessException e) {
        return ResponseDTO.error(e.getCode(), e.getMessage());
    }
}
```

#### âš™ï¸ Serviceå±‚ - æ ¸å¿ƒä¸šåŠ¡å±‚

**æ ¸å¿ƒèŒè´£**ï¼š

- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°
- äº‹åŠ¡ç®¡ç†(@Transactional)
- è°ƒç”¨Managerå±‚è¿›è¡Œå¤æ‚æµç¨‹ç¼–æ’
- ä¸šåŠ¡è§„åˆ™éªŒè¯å’Œæ•°æ®è½¬æ¢

**ä»£ç æ¨¡æ¿**ï¼š

```java
@Service
@Transactional(rollbackFor = Exception.class)
public class ConsumeServiceImpl implements ConsumeService {

    @Resource
    private ConsumeManager consumeManager;
    @Resource
    private AccountDao accountDao;

    @Override
    public ConsumeResultDTO consume(ConsumeRequestDTO request) {
        // ä¸šåŠ¡è§„åˆ™éªŒè¯
        validateConsumeRequest(request);

        // æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
        return consumeManager.executeConsumption(request);
    }
}
```

#### ğŸ”§ Managerå±‚ - å¤æ‚æµç¨‹ç®¡ç†å±‚

**æ ¸å¿ƒèŒè´£**ï¼š

- å¤æ‚ä¸šåŠ¡æµç¨‹ç¼–æ’
- å¤šDAOæ•°æ®ç»„è£…å’Œè®¡ç®—
- ç¼“å­˜ç­–ç•¥ç®¡ç†
- ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- SAGAåˆ†å¸ƒå¼äº‹åŠ¡åè°ƒ

**ä»£ç æ¨¡æ¿**ï¼š

```java
// âœ… æ­£ç¡®ï¼šManagerç±»åœ¨microservices-commonä¸­ä¸ä½¿ç”¨Springæ³¨è§£
// Managerç±»é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–ï¼Œä¿æŒä¸ºçº¯Javaç±»
public class ConsumeManagerImpl implements ConsumeManager {

    private final AccountDao accountDao;
    private final ConsumeRecordDao consumeRecordDao;
    private final GatewayServiceClient gatewayServiceClient;
    private final RedisTemplate<String, Object> redisTemplate;

    // æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public ConsumeManagerImpl(
            AccountDao accountDao,
            ConsumeRecordDao consumeRecordDao,
            GatewayServiceClient gatewayServiceClient,
            RedisTemplate<String, Object> redisTemplate) {
        this.accountDao = accountDao;
        this.consumeRecordDao = consumeRecordDao;
        this.gatewayServiceClient = gatewayServiceClient;
        this.redisTemplate = redisTemplate;
    }

    @Override
    @Transactional(rollbackFor = Exception.class)
    public ConsumeResultDTO executeConsumption(ConsumeRequestDTO request) {
        // å¤šçº§ç¼“å­˜æŸ¥è¯¢
        AccountEntity account = getAccountWithCache(request.getAccountId());

        // å¤æ‚ä¸šåŠ¡æµç¨‹
        // 1. æƒé™éªŒè¯
        // 2. ä½™é¢è®¡ç®—
        // 3. äº¤æ˜“è®°å½•
        // 4. é€šçŸ¥å‘é€

        return result;
    }

    private AccountEntity getAccountWithCache(Long accountId) {
        // L1æœ¬åœ°ç¼“å­˜ + L2 Redisç¼“å­˜ + L3ç½‘å…³è°ƒç”¨
        return cacheManager.getWithRefresh(
            "account:" + accountId,
            () -> accountDao.selectById(accountId),
            Duration.ofMinutes(30)
        );
    }
}
```

#### ğŸ—„ï¸ DAOå±‚ - æ•°æ®è®¿é—®å±‚

**æ ¸å¿ƒèŒè´£**ï¼š

- æ•°æ®åº“CRUDæ“ä½œ
- å¤æ‚SQLæŸ¥è¯¢å®ç°
- ç»§æ‰¿BaseMapper<Entity>
- æ•°æ®åº“äº‹åŠ¡è¾¹ç•Œæ§åˆ¶

**ä»£ç æ¨¡æ¿**ï¼š

```java
@Mapper
public interface AccountDao extends BaseMapper<AccountEntity> {

    @Transactional(readOnly = true)
    AccountEntity selectByUserId(@Param("userId") Long userId);

    @Transactional(rollbackFor = Exception.class)
    int updateBalance(@Param("accountId") Long accountId, @Param("amount") BigDecimal amount);

    @Select("SELECT * FROM account WHERE user_id = #{userId} AND status = 1 FOR UPDATE")
    AccountEntity selectByUserIdForUpdate(@Param("userId") Long userId);
}
```

**æ¶æ„è¾¹ç•Œé“å¾‹**ï¼š

- âŒ **ç¦æ­¢è·¨å±‚è®¿é—®**ï¼ˆå¦‚Controllerç›´æ¥è°ƒç”¨DAOï¼‰
- âŒ **ç¦æ­¢DAOåŒ…å«ä¸šåŠ¡é€»è¾‘**ï¼ˆåªå¤„ç†æ•°æ®è®¿é—®ï¼‰
- âŒ **ç¦æ­¢Controllerå¤„ç†äº‹åŠ¡**ï¼ˆäº‹åŠ¡åªåœ¨Serviceå’ŒDAOå±‚ï¼‰
- âŒ **ç¦æ­¢Serviceç›´æ¥è®¿é—®æ•°æ®åº“**ï¼ˆé€šè¿‡DAOå±‚è®¿é—®ï¼‰

### 2. ä¾èµ–æ³¨å…¥è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶è¦æ±‚**ï¼š

- âœ… **ç»Ÿä¸€ä½¿ç”¨ `@Resource` æ³¨è§£**
- âŒ **ç¦æ­¢ä½¿ç”¨ `@Autowired`**
- âŒ **ç¦æ­¢ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥**

```java
// âœ… æ­£ç¡®ç¤ºä¾‹
@Service
public class ConsumeServiceImpl implements ConsumeService {

    @Resource
    private ConsumeManager consumeManager;

    @Resource
    private AccountDao accountDao;
}

// âŒ é”™è¯¯ç¤ºä¾‹
@Service
public class ConsumeServiceImpl implements ConsumeService {

    @Autowired  // ç¦æ­¢ä½¿ç”¨
    private ConsumeManager consumeManager;
}
```

### 3. DAOå±‚å‘½åè§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶è¦æ±‚**ï¼š

- âœ… **æ•°æ®è®¿é—®å±‚æ¥å£ç»Ÿä¸€ä½¿ç”¨ `Dao` åç¼€**
- âœ… **å¿…é¡»ä½¿ç”¨ `@Mapper` æ³¨è§£æ ‡è¯†**
- âœ… **å¿…é¡»ç»§æ‰¿ `BaseMapper<Entity>`**
- âŒ **ç¦æ­¢ä½¿ç”¨ `Repository` åç¼€**
- âŒ **ç¦æ­¢ä½¿ç”¨ `@Repository` æ³¨è§£**

```java
// âœ… æ­£ç¡®ç¤ºä¾‹
@Mapper
public interface AccountDao extends BaseMapper<AccountEntity> {

    @Transactional(readOnly = true)
    AccountEntity selectByUserId(@Param("userId") Long userId);

    @Transactional(rollbackFor = Exception.class)
    int updateBalance(@Param("accountId") Long accountId, @Param("amount") BigDecimal amount);
}

// âŒ é”™è¯¯ç¤ºä¾‹
@Repository  // ç¦æ­¢ä½¿ç”¨
public interface AccountRepository extends BaseMapper<AccountEntity> {  // ç¦æ­¢ä½¿ç”¨Repositoryåç¼€
}
```

### 4. äº‹åŠ¡ç®¡ç†è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**äº‹åŠ¡æ³¨è§£ä½¿ç”¨**ï¼š

- **Serviceå±‚å†™æ“ä½œ**: `@Transactional(rollbackFor = Exception.class)`
- **DAOå±‚æŸ¥è¯¢æ–¹æ³•**: `@Transactional(readOnly = true)`
- **DAOå±‚å†™æ“ä½œ**: `@Transactional(rollbackFor = Exception.class)`

```java
// âœ… Serviceå±‚ç¤ºä¾‹
@Service
@Transactional(rollbackFor = Exception.class)
public class ConsumeServiceImpl implements ConsumeService {
    // å†™æ“ä½œæ–¹æ³•è‡ªåŠ¨ç»§æ‰¿ç±»çº§åˆ«äº‹åŠ¡
}

// âœ… DAOå±‚ç¤ºä¾‹
@Mapper
public interface AccountDao extends BaseMapper<AccountEntity> {

    @Transactional(readOnly = true)
    AccountEntity selectByUserId(@Param("userId") Long userId);

    @Transactional(rollbackFor = Exception.class)
    int updateBalance(@Param("accountId") Long accountId, @Param("amount") BigDecimal amount);
}
```

### 5. Jakarta EEåŒ…åè§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶ä½¿ç”¨Jakarta EE 3.0+åŒ…å**ï¼š

- âœ… `jakarta.annotation.Resource`
- âœ… `jakarta.validation.Valid`
- âœ… `jakarta.persistence.Entity`
- âœ… `jakarta.servlet.http.HttpServletRequest`
- âœ… `jakarta.transaction.Transactional`

**ç¦æ­¢ä½¿ç”¨javaxåŒ…å**ï¼š

- âŒ `javax.annotation.Resource`
- âŒ `javax.validation.Valid`
- âŒ `javax.persistence.Entity`

**âš ï¸ ä¾‹å¤–è¯´æ˜ - Javaæ ‡å‡†åº“javaxåŒ…ï¼ˆå…è®¸ä½¿ç”¨ï¼‰**ï¼š
> ä»¥ä¸‹`javax.*`åŒ…å±äº**Java SEæ ‡å‡†åº“**ï¼Œä¸åœ¨Jakarta EEè¿ç§»èŒƒå›´å†…ï¼Œå¯æ­£å¸¸ä½¿ç”¨ï¼š

- âœ… `javax.crypto.*` - JavaåŠ å¯†æ‰©å±•ï¼ˆCipherã€Macã€SecretKeyç­‰ï¼‰
- âœ… `javax.sql.DataSource` - JDBCæ•°æ®æºæ¥å£
- âœ… `javax.imageio.ImageIO` - å›¾åƒI/Oå¤„ç†
- âœ… `javax.net.ssl.*` - SSL/TLSç½‘ç»œå®‰å…¨

**è¯´æ˜**: Jakarta EE 9+ä»…è¿ç§»äº†åŸJava EEè§„èŒƒåŒ…ï¼ˆå¦‚annotationã€validationã€persistenceã€servletç­‰ï¼‰ï¼ŒJava SEæ ‡å‡†åº“ä¸­çš„javaxåŒ…ä¿æŒä¸å˜ã€‚

### 6. å¾®æœåŠ¡é—´è°ƒç”¨è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**æ··åˆè°ƒç”¨ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰**ï¼š

- âœ… **å—åŒ—å‘ï¼ˆå¤–éƒ¨/å‰ç«¯â†’æœåŠ¡ï¼‰è¯·æ±‚å¿…é¡»é€šè¿‡APIç½‘å…³**
- âœ… **ä¸œè¥¿å‘ä½é¢‘æˆ–è·¨åŸŸåŒæ­¥è°ƒç”¨é€šè¿‡ `GatewayServiceClient` ç»ç½‘å…³**
- âœ… **åŒåŸŸé«˜é¢‘/ä½å»¶è¿Ÿ/å¼ºä¸€è‡´çƒ­è·¯å¾„å…è®¸ç›´è¿ï¼Œä½†å¿…é¡»æ»¡è¶³ï¼šç»Ÿä¸€ç›´è¿ Clientã€ç™½åå•å£°æ˜ã€æœåŠ¡åˆ°æœåŠ¡é‰´æƒã€Resilience4jã€Tracing/Metrics**
- ğŸ“Œ è¯¦ç»†ç­–ç•¥ä¸è¯•ç‚¹ç™½åå•ï¼š`documentation/architecture/INTERNAL_CALL_STRATEGY.md`
- âŒ **ç¦æ­¢æœªç»ç™½åå•çš„ FeignClient/@FeignClient ç›´è¿**
- âŒ **ç¦æ­¢ç›´æ¥è®¿é—®å…¶ä»–æœåŠ¡æ•°æ®åº“**

```java
// âœ… æ­£ç¡®ç¤ºä¾‹
@Service
public class ConsumeServiceImpl implements ConsumeService {

    @Resource
    private GatewayServiceClient gatewayServiceClient;

    public AreaEntity getAreaInfo(Long areaId) {
        ResponseDTO<AreaEntity> result = gatewayServiceClient.callCommonService(
            "/api/v1/area/" + areaId,
            HttpMethod.GET,
            null,
            AreaEntity.class
        );
        return result.getData();
    }
}

// âŒ é”™è¯¯ç¤ºä¾‹ - éç™½åå•ç›´è¿ï¼ˆç›´æ¥ä½¿ç”¨FeignClientï¼‰
// @FeignClient(name = "ioedream-identity-service")
// public interface AreaServiceClient {
//     @GetMapping("/api/v1/area/{id}")
//     AreaEntity getArea(@PathVariable Long id);
// }
```

### 7. æœåŠ¡æ³¨å†Œå‘ç°è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ç»Ÿä¸€ä½¿ç”¨Nacos**ï¼š

- âœ… **æ‰€æœ‰å¾®æœåŠ¡å¿…é¡»ä½¿ç”¨ Nacos ä½œä¸ºæœåŠ¡æ³¨å†Œå‘ç°ä¸­å¿ƒ**
- âŒ **ç¦æ­¢ä½¿ç”¨ Consulã€Eureka ç­‰å…¶ä»–æ³¨å†Œä¸­å¿ƒ**

```yaml
# bootstrap.yml æ ‡å‡†é…ç½®
spring:
  application:
    name: ${SERVICE_NAME:ioedream-xxx-service}
  cloud:
    nacos:
      discovery:
        server-addr: ${NACOS_SERVER_ADDR:127.0.0.1:8848}
        namespace: ${NACOS_NAMESPACE:dev}
        group: ${NACOS_GROUP:IOE-DREAM}
        username: ${NACOS_USERNAME:nacos}
        password: ${NACOS_PASSWORD:nacos}
        enabled: true
        register-enabled: true
      config:
        server-addr: ${NACOS_SERVER_ADDR:127.0.0.1:8848}
        namespace: ${NACOS_NAMESPACE:dev}
        group: ${NACOS_GROUP:IOE-DREAM}
        file-extension: yaml
```

### 8. æ•°æ®åº“è¿æ¥æ± è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ç»Ÿä¸€ä½¿ç”¨Druidè¿æ¥æ± **ï¼š

- âœ… **ç»Ÿä¸€ä½¿ç”¨ Druid è¿æ¥æ± **
- âŒ **ç¦æ­¢ä½¿ç”¨ HikariCP**

```yaml
# âœ… æ ‡å‡†Druidé…ç½®
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      initial-size: 5
      min-idle: 5
      max-active: 20
      max-wait: 60000
      validation-query: SELECT 1
      test-while-idle: true
```

### 9. ç¼“å­˜ä½¿ç”¨è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ç»Ÿä¸€ä½¿ç”¨Redisç¼“å­˜**ï¼š

- âœ… **Redisæ•°æ®åº“ç»Ÿä¸€ä½¿ç”¨ db=0**
- âœ… **åˆç†è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´**
- âœ… **ä½¿ç”¨L1æœ¬åœ°ç¼“å­˜+L2 Redisç¼“å­˜çš„å¤šçº§ç¼“å­˜ç­–ç•¥**

```yaml
# âœ… æ ‡å‡†Redisé…ç½®
spring:
  redis:
    host: ${REDIS_HOST:127.0.0.1}
    port: ${REDIS_PORT:6379}
    password: ${REDIS_PASSWORD:}
    database: 0  # ç»Ÿä¸€ä½¿ç”¨æ•°æ®åº“0
    timeout: 3000
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
```

---

## ğŸ—ï¸ ä¼ä¸šçº§æ¶æ„ç‰¹æ€§ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

### 10. å¤šçº§ç¼“å­˜æ¶æ„ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ä¸‰çº§ç¼“å­˜ç­–ç•¥**ï¼š

- **L1æœ¬åœ°ç¼“å­˜**: Caffeineæœ¬åœ°ç¼“å­˜ï¼Œæ¯«ç§’çº§å“åº”
- **L2 Redisç¼“å­˜**: åˆ†å¸ƒå¼ç¼“å­˜ï¼Œæ•°æ®ä¸€è‡´æ€§
- **L3ç½‘å…³ç¼“å­˜**: æœåŠ¡é—´è°ƒç”¨ç¼“å­˜ï¼Œå‡å°‘ç½‘ç»œå¼€é”€

**å®ç°æ¨¡æ¿**ï¼š

```java
// âœ… æ­£ç¡®ï¼šCacheManageråœ¨microservices-commonä¸­ä¸ä½¿ç”¨Springæ³¨è§£
public class CacheManager {

    private final RedisTemplate<String, Object> redisTemplate;
    private final Cache<String, Object> localCache = Caffeine.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(Duration.ofMinutes(5))
            .build();

    // æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public CacheManager(RedisTemplate<String, Object> redisTemplate) {
        this.redisTemplate = redisTemplate;
    }

    public <T> T getWithRefresh(String key, Supplier<T> loader, Duration ttl) {
        // L1æœ¬åœ°ç¼“å­˜
        T value = (T) localCache.getIfPresent(key);
        if (value != null) {
            return value;
        }

        // L2 Redisç¼“å­˜
        value = (T) redisTemplate.opsForValue().get(key);
        if (value != null) {
            localCache.put(key, value);
            return value;
        }

        // ä»æ•°æ®åº“åŠ è½½
        value = loader.get();
        if (value != null) {
            localCache.put(key, value);
            redisTemplate.opsForValue().set(key, value, ttl);
        }

        return value;
    }
}
```

### 11. SAGAåˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**SAGAå®ç°è¦æ±‚**ï¼š

- âœ… **ä½¿ç”¨SAGAæ¨¡å¼å®ç°æœ€ç»ˆä¸€è‡´æ€§**
- âœ… **æ¯ä¸ªæ­¥éª¤éƒ½æœ‰å¯¹åº”çš„è¡¥å¿æ“ä½œ**
- âœ… **äº‹åŠ¡çŠ¶æ€è·Ÿè¸ªå’Œç›‘æ§**
- âœ… **å¤±è´¥è‡ªåŠ¨é‡è¯•å’Œäººå·¥å¹²é¢„**

**å®ç°æ¨¡æ¿**ï¼š

```java
// âœ… æ­£ç¡®ï¼šConsumeSagaManageråœ¨microservices-commonä¸­ä¸ä½¿ç”¨Springæ³¨è§£
public class ConsumeSagaManager {

    private final SagaManager sagaManager;

    // æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public ConsumeSagaManager(SagaManager sagaManager) {
        this.sagaManager = sagaManager;
    }

    public ResponseDTO<ConsumeResultDTO> executeConsumeSaga(ConsumeRequestDTO request) {
        SagaTransaction saga = sagaManager.createSaga("consume", request.getOrderId())
                .step("balanceDeduct", this::deductBalance, this::refundBalance)
                .step("recordConsume", this::createConsumeRecord, this::deleteConsumeRecord)
                .step("sendNotification", this::sendNotification, this::cancelNotification)
                .build();

        return saga.execute();
    }

    // ä¸šåŠ¡æ­¥éª¤
    private SagaStep deductBalance(ConsumeRequestDTO request) {
        // æ‰£å‡ä½™é¢é€»è¾‘
        return SagaStep.success();
    }

    // è¡¥å¿æ­¥éª¤
    private SagaStep refundBalance(ConsumeRequestDTO request) {
        // é€€è¿˜ä½™é¢é€»è¾‘
        return SagaStep.success();
    }
}
```

### 12. æœåŠ¡é™çº§ç†”æ–­ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å®¹é”™æœºåˆ¶è¦æ±‚**ï¼š

- âœ… **ä½¿ç”¨Hystrixæˆ–Sentinelå®ç°ç†”æ–­**
- âœ… **å…³é”®æœåŠ¡é…ç½®é™çº§ç­–ç•¥**
- âœ… **å®ç°æœåŠ¡è°ƒç”¨è¶…æ—¶æ§åˆ¶**
- âœ… **é…ç½®ç†”æ–­åçš„æ¢å¤æœºåˆ¶**

**å®ç°æ¨¡æ¿**ï¼š

```java
@Service
public class ConsumeServiceImpl implements ConsumeService {

    @Resource
    private ConsumeManager consumeManager;

    @CircuitBreaker(name = "consumeService", fallbackMethod = "consumeFallback")
    @TimeLimiter(name = "consumeService")
    public CompletableFuture<ConsumeResultDTO> consume(ConsumeRequestDTO request) {
        return CompletableFuture.completedFuture(consumeManager.executeConsumption(request));
    }

    public CompletableFuture<ConsumeResultDTO> consumeFallback(ConsumeRequestDTO request, Exception ex) {
        log.error("æ¶ˆè´¹æœåŠ¡é™çº§", ex);
        ConsumeResultDTO fallbackResult = new ConsumeResultDTO();
        fallbackResult.setStatus("DEGRADED");
        fallbackResult.setMessage("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
        return CompletableFuture.completedFuture(fallbackResult);
    }
}
```

### 13. å¼‚æ­¥å¤„ç†æœºåˆ¶ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼‚æ­¥å¤„ç†è¦æ±‚**ï¼š

- âœ… **ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†è€—æ—¶æ“ä½œ**
- âœ… **æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†å¼‚æ­¥ä»»åŠ¡**
- âœ… **å®ç°äº‹ä»¶é©±åŠ¨æ¶æ„**
- âœ… **é…ç½®åˆç†çš„é˜Ÿåˆ—å¤§å°å’Œè¶…æ—¶**

**å®ç°æ¨¡æ¿**ï¼š

```java
@Service
public class ConsumeAsyncService {

    @Resource
    private TaskExecutor taskExecutor;
    @Resource
    private RabbitTemplate rabbitTemplate;

    public void asyncProcessConsume(ConsumeRequestDTO request) {
        // å¼‚æ­¥å¤„ç†æ¶ˆè´¹è®°å½•
        taskExecutor.execute(() -> {
            processConsumeRecord(request);
        });

        // å‘é€å¼‚æ­¥é€šçŸ¥
        rabbitTemplate.convertAndSend("consume.notification", request);
    }

    @RabbitListener(queues = "consume.notification")
    public void handleNotification(ConsumeRequestDTO request) {
        // å¤„ç†é€šçŸ¥é€»è¾‘
        sendNotification(request);
    }
}
```

### 14. ç›‘æ§å‘Šè­¦ä½“ç³»ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ç›‘æ§æŒ‡æ ‡è¦æ±‚**ï¼š

- âœ… **ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§**ï¼ˆæ¶ˆè´¹é‡ã€æˆåŠŸç‡ã€å“åº”æ—¶é—´ï¼‰
- âœ… **ç³»ç»ŸæŒ‡æ ‡ç›‘æ§**ï¼ˆCPUã€å†…å­˜ã€GCã€çº¿ç¨‹æ± ï¼‰
- âœ… **è°ƒç”¨é“¾ç›‘æ§**ï¼ˆåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼‰
- âœ… **é”™è¯¯ç›‘æ§**ï¼ˆå¼‚å¸¸ç»Ÿè®¡ã€é”™è¯¯å‘Šè­¦ï¼‰

**å®ç°æ¨¡æ¿**ï¼š

```java
// âœ… æ­£ç¡®ï¼šConsumeMonitoråœ¨microservices-commonä¸­ä¸ä½¿ç”¨Springæ³¨è§£
public class ConsumeMonitor {

    private final MeterRegistry meterRegistry;

    // æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public ConsumeMonitor(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
    }

    public ConsumeMonitor(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
    }

    public void recordConsume(String type, double amount, long duration) {
        Timer.Sample sample = Timer.start(meterRegistry);
        sample.stop(Timer.builder("consume.duration")
                .tag("type", type)
                .register(meterRegistry));

        meterRegistry.counter("consume.count", "type", type).increment();
        meterRegistry.gauge("consume.amount", amount);
    }

    @EventListener
    public void handleConsumeEvent(ConsumeEvent event) {
        if (event.isSuccess()) {
            recordConsume(event.getType(), event.getAmount(), event.getDuration());
        } else {
            meterRegistry.counter("consume.error", "type", event.getType()).increment();
        }
    }
}
```

---

## ğŸ”Œ ç«¯å£åˆ†é…è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ä¸¥æ ¼æŒ‰ç…§11å¾®æœåŠ¡æ¶æ„åˆ†é…ç«¯å£ï¼š**

| æœåŠ¡åç§° | ç«¯å£ | ç±»å‹ | è¯´æ˜ |
|---------|------|------|------|
| ioedream-gateway-service | 8080 | åŸºç¡€è®¾æ–½ | APIç½‘å…³ |
| **ioedream-common-service** | **8088** | **æ ¸å¿ƒ** | **å…¬å…±æ¨¡å—å¾®æœåŠ¡ï¼ˆç”¨æˆ·ã€ç»„ç»‡ã€æƒé™ï¼‰** |
| **ioedream-device-comm-service** | **8087** | **æ ¸å¿ƒ** | **è®¾å¤‡é€šè®¯å¾®æœåŠ¡ï¼ˆåè®®é€‚é…ã€æ¨¡æ¿ä¸‹å‘ âš ï¸ ä¸åšè¯†åˆ«ï¼‰** |
| **ioedream-oa-service** | **8089** | **æ ¸å¿ƒ** | **OAå¾®æœåŠ¡ï¼ˆå·¥ä½œæµã€å®¡æ‰¹ï¼‰** |
| ioedream-access-service | 8090 | æ ¸å¿ƒ | é—¨ç¦æœåŠ¡ï¼ˆè¾¹ç¼˜è‡ªä¸»éªŒè¯æ¨¡å¼ âš ï¸ æ¥æ”¶è®¾å¤‡ä¸Šä¼ è®°å½•ï¼‰ |
| ioedream-attendance-service | 8091 | æ ¸å¿ƒ | è€ƒå‹¤æœåŠ¡ï¼ˆè¾¹ç¼˜è¯†åˆ«+ä¸­å¿ƒè®¡ç®—+æ’ç­è”åŠ¨ï¼‰ |
| ioedream-video-service | 8092 | æ ¸å¿ƒ | è§†é¢‘æœåŠ¡ï¼ˆè¾¹ç¼˜AIè®¡ç®—æ¨¡å¼ï¼‰ |
| ioedream-database-service | 8093 | æ ¸å¿ƒ | æ•°æ®åº“ç®¡ç†æœåŠ¡ |
| ioedream-consume-service | 8094 | æ ¸å¿ƒ | æ¶ˆè´¹æœåŠ¡ï¼ˆä¸­å¿ƒå®æ—¶éªŒè¯æ¨¡å¼ï¼‰ |
| ioedream-visitor-service | 8095 | æ ¸å¿ƒ | è®¿å®¢æœåŠ¡ï¼ˆæ··åˆéªŒè¯æ¨¡å¼ï¼‰ |
| **ioedream-biometric-service** | **8096** | **æ ¸å¿ƒ** | **ç”Ÿç‰©æ¨¡æ¿ç®¡ç†æœåŠ¡ï¼ˆæ¨¡æ¿å­˜å‚¨ã€ç‰¹å¾æå–ã€è®¾å¤‡ä¸‹å‘ âš ï¸ ä»…ç®¡ç†æ•°æ®ï¼Œä¸åšè¯†åˆ«ï¼‰** |
| ioedream-config-service | 8888 | åŸºç¡€è®¾æ–½ | Nacosé…ç½®ä¸­å¿ƒ |

**æ³¨æ„ï¼š** ä»¥ä¸‹æœåŠ¡å·²æ•´åˆåˆ°11ä¸ªæ ¸å¿ƒå¾®æœåŠ¡ä¸­ï¼Œä¸å†ç‹¬ç«‹å­˜åœ¨ï¼š

- ioedream-auth-service â†’ æ•´åˆåˆ° ioedream-common-service
- ioedream-identity-service â†’ æ•´åˆåˆ° ioedream-common-service
- ioedream-device-service â†’ æ•´åˆåˆ° ioedream-device-comm-service
- ioedream-enterprise-service â†’ æ•´åˆåˆ° ioedream-oa-service
- ioedream-notification-service â†’ æ•´åˆåˆ° ioedream-common-service
- ioedream-audit-service â†’ æ•´åˆåˆ° ioedream-common-service
- ioedream-monitor-service â†’ æ•´åˆåˆ° ioedream-common-service
- ioedream-integration-service â†’ æ‹†åˆ†åˆ°å„ä¸šåŠ¡æœåŠ¡
- ioedream-system-service â†’ æ•´åˆåˆ° ioedream-common-service
- ioedream-report-service â†’ æ‹†åˆ†åˆ°å„ä¸šåŠ¡æœåŠ¡
- ioedream-scheduler-service â†’ æ•´åˆåˆ° ioedream-common-service
- ioedream-infrastructure-service â†’ æ•´åˆåˆ° ioedream-oa-service

---

## ğŸ“ ä»£ç è´¨é‡æ ‡å‡†ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

### è´¨é‡æŒ‡æ ‡

- âœ… ä»£ç è¦†ç›–ç‡ â‰¥ 80%
- âœ… æ ¸å¿ƒä¸šåŠ¡è¦†ç›–ç‡ = 100%
- âœ… é‡å¤ä»£ç ç‡ â‰¤ 3%
- âœ… åœˆå¤æ‚åº¦ â‰¤ 10
- âœ… ä»£ç è¡Œæ•°/æ–¹æ³• â‰¤ 50
- âœ… ç±»è¡Œæ•° â‰¤ 500

### ç¼–ç è§„èŒƒ

- âœ… ä½¿ç”¨UTF-8ç¼–ç 
- âœ… ç»Ÿä¸€ä»£ç æ ¼å¼åŒ–è§„åˆ™
- âœ… å®Œæ•´çš„JavaDocæ³¨é‡Š
- âœ… åˆç†çš„æ—¥å¿—è®°å½•
- âœ… å®Œå–„çš„å¼‚å¸¸å¤„ç†

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼ˆåŸºäºæ·±åº¦åˆ†æç»“æœçš„å¼ºåˆ¶æ‰§è¡Œï¼‰

### ğŸ¯ æ·±åº¦åˆ†æå‘ç°çš„æ€§èƒ½é—®é¢˜

**æ€§èƒ½ç°çŠ¶è¯„ä¼°**: å…¨å±€æ€§èƒ½ç»´åº¦è¯„åˆ†3.2/5.0ï¼Œå­˜åœ¨æ˜æ˜¾æ€§èƒ½ç“¶é¢ˆ
**åˆ†æä¾æ®**: 2025-12-01å…¨å±€æ¶æ„æ·±åº¦åˆ†æç»“æœï¼Œæ€§èƒ½ç»´åº¦è¯„åˆ†ä¸¥é‡åä½

**å…³é”®æ€§èƒ½é—®é¢˜**:

- ğŸ”´ **æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½å·®**: 65%çš„æŸ¥è¯¢ç¼ºå°‘åˆé€‚ç´¢å¼•ï¼Œå­˜åœ¨å…¨è¡¨æ‰«æ
- ğŸ”´ **ç¼“å­˜å‘½ä¸­ç‡ä½**: å¹³å‡ç¼“å­˜å‘½ä¸­ç‡ä»…65%ï¼Œè¿œä½äºä¼ä¸šçº§æ ‡å‡†85%
- ğŸ”´ **è¿æ¥æ± é…ç½®ä¸å½“**: 12ä¸ªæœåŠ¡ä½¿ç”¨HikariCPï¼Œè¿åç»Ÿä¸€Druidè§„èŒƒ
- ğŸ”´ **æ·±åº¦åˆ†é¡µé—®é¢˜**: 38%çš„åˆ†é¡µæŸ¥è¯¢å­˜åœ¨æ·±åº¦åˆ†é¡µæ€§èƒ½é—®é¢˜

### 15. æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**åŸºäºåˆ†æç»“æœçš„ä¼˜åŒ–è¦æ±‚**ï¼š

- âœ… **ç«‹å³è§£å†³65%æŸ¥è¯¢ç¼ºå°‘ç´¢å¼•é—®é¢˜**ï¼ˆP1ä¼˜å…ˆçº§ï¼Œç›´æ¥å½±å“æ€§èƒ½ï¼‰
- âœ… **æ¶ˆé™¤æ‰€æœ‰å…¨è¡¨æ‰«æ**ï¼ˆå‘ç°23ä¸ªå…¨è¡¨æ‰«ææŸ¥è¯¢ï¼Œå¿…é¡»ä¼˜åŒ–ï¼‰
- âœ… **ä½¿ç”¨å¤åˆç´¢å¼•ä¼˜åŒ–å¤šæ¡ä»¶æŸ¥è¯¢**ï¼ˆæå‡æŸ¥è¯¢æ•ˆç‡300%ï¼‰
- âœ… **ç«‹å³ä¼˜åŒ–38ä¸ªæ·±åº¦åˆ†é¡µæŸ¥è¯¢**ï¼ˆä½¿ç”¨æ¸¸æ ‡åˆ†é¡µæ›¿ä»£ï¼‰

**åˆ†æå‘ç°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- âŒ åˆ†æå‘ç°çš„æ€§èƒ½é—®é¢˜ - å…¨è¡¨æ‰«æ
SELECT * FROM consume_record WHERE create_time > '2024-01-01';  -- å…¨è¡¨æ‰«æï¼

-- âœ… ä¼˜åŒ–æ–¹æ¡ˆ - æ·»åŠ å¤åˆç´¢å¼•
CREATE INDEX idx_consume_record_create_time_status ON consume_record(create_time, status, deleted_flag);

-- âŒ åˆ†æå‘ç°çš„æ€§èƒ½é—®é¢˜ - æ·±åº¦åˆ†é¡µ
SELECT * FROM consume_record ORDER BY create_time DESC LIMIT 10000, 20;  -- æ·±åº¦åˆ†é¡µï¼

-- âœ… ä¼˜åŒ–æ–¹æ¡ˆ - æ¸¸æ ‡åˆ†é¡µ
SELECT * FROM consume_record
WHERE create_time < #{lastCreateTime}
ORDER BY create_time DESC
LIMIT 20;
```

**æ€§èƒ½ä¼˜åŒ–çš„é‡åŒ–ç›®æ ‡**ï¼š

- **æŸ¥è¯¢æ€§èƒ½æå‡**: å¹³å‡å“åº”æ—¶é—´ä»800msé™è‡³150msï¼ˆ81%æå‡ï¼‰
- **å¹¶å‘å¤„ç†èƒ½åŠ›**: TPSä»500æå‡è‡³2000ï¼ˆ300%æå‡ï¼‰
- **æ•°æ®åº“è¿æ¥ä¼˜åŒ–**: è¿æ¥åˆ©ç”¨ç‡ä»60%æå‡è‡³90%
- **ç´¢å¼•ä¼˜åŒ–è¦†ç›–**: ä»35%æå‡è‡³100%å…¨è¦†ç›–

**SQLä¼˜åŒ–æ¨¡æ¿**ï¼š

```sql
-- âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ç´¢å¼•ä¼˜åŒ–
CREATE INDEX idx_user_area_status ON consume_record(user_id, area_id, status, create_time);

-- åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ï¼ˆé¿å…æ·±åº¦åˆ†é¡µé—®é¢˜ï¼‰
SELECT * FROM consume_record
WHERE user_id = #{userId} AND create_time < #{lastCreateTime}
ORDER BY create_time DESC
LIMIT 20;

-- æ‰¹é‡æ“ä½œä¼˜åŒ–
INSERT INTO consume_record (user_id, amount, create_time) VALUES
(#{user1}, #{amount1}, NOW()),
(#{user2}, #{amount2}, NOW()),
(#{user3}, #{amount3}, NOW());
```

**è¿æ¥æ± ä¼˜åŒ–é…ç½®**ï¼š

```yaml
spring:
  datasource:
    druid:
      # æ ¸å¿ƒè¿æ¥æ± é…ç½®
      initial-size: 10
      min-idle: 10
      max-active: 50
      max-wait: 60000

      # æ€§èƒ½ç›‘æ§é…ç½®
      stat-view-servlet:
        enabled: true
        url-pattern: /druid/*

      # æ…¢æŸ¥è¯¢ç›‘æ§
      filter:
        stat:
          enabled: true
          slow-sql-millis: 1000
          log-slow-sql: true
```

### 16. ç¼“å­˜æ€§èƒ½ä¼˜åŒ–ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ç¼“å­˜ç­–ç•¥ä¼˜åŒ–**ï¼š

- âœ… **åˆç†è®¾ç½®ç¼“å­˜å¤§å°å’Œè¿‡æœŸæ—¶é—´**
- âœ… **ä½¿ç”¨ç¼“å­˜é¢„çƒ­é¿å…å†·å¯åŠ¨**
- âœ… **å®ç°ç¼“å­˜å‡»ç©¿ã€é›ªå´©é˜²æŠ¤**
- âœ… **ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡å’Œæ€§èƒ½**

**ç¼“å­˜ä¼˜åŒ–å®ç°**ï¼š

```java
// âœ… æ­£ç¡®ï¼šConsumeCacheOptimizeråœ¨microservices-commonä¸­ä¸ä½¿ç”¨Springæ³¨è§£
public class ConsumeCacheOptimizer {

    private final RedisTemplate<String, Object> redisTemplate;

    // æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public ConsumeCacheOptimizer(RedisTemplate<String, Object> redisTemplate) {
        this.redisTemplate = redisTemplate;
    }

    // ç¼“å­˜é¢„çƒ­
    @PostConstruct
    public void warmUpCache() {
        // é¢„åŠ è½½çƒ­ç‚¹æ•°æ®
        loadHotAccounts();
        loadHotProducts();
    }

    // é˜²æ­¢ç¼“å­˜å‡»ç©¿ï¼ˆä½¿ç”¨äº’æ–¥é”ï¼‰
    public AccountEntity getAccountWithLock(Long accountId) {
        String lockKey = "lock:account:" + accountId;
        String value = UUID.randomUUID().toString();

        try {
            // å°è¯•è·å–é”
            Boolean locked = redisTemplate.opsForValue().setIfAbsent(lockKey, value, Duration.ofSeconds(10));
            if (locked) {
                // åŒé‡æ£€æŸ¥
                AccountEntity account = (AccountEntity) redisTemplate.opsForValue().get("account:" + accountId);
                if (account == null) {
                    account = accountDao.selectById(accountId);
                    redisTemplate.opsForValue().set("account:" + accountId, account, Duration.ofMinutes(30));
                }
                return account;
            }
        } finally {
            // é‡Šæ”¾é”
            String script = "if redis.call('get', KEYS[1]) == ARGV[1] then return redis.call('del', KEYS[1]) else return 0 end";
            redisTemplate.execute(new DefaultRedisScript<>(script, Long.class), Collections.singletonList(lockKey), value);
        }

        // é™çº§æŸ¥è¯¢æ•°æ®åº“
        return accountDao.selectById(accountId);
    }
}
```

### 17. JVMæ€§èƒ½è°ƒä¼˜ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**JVMå‚æ•°æ ‡å‡†é…ç½®**ï¼š

```bash
# ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®
-Xms2g -Xmx4g
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:+PrintGCDetails
-XX:+PrintGCTimeStamps
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/var/log/app/
-Dfile.encoding=UTF-8
-Duser.timezone=Asia/Shanghai
```

**æ€§èƒ½ç›‘æ§é…ç½®**ï¼š

```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true
    distribution:
      percentiles-histogram:
        http.server.requests: true
      percentiles:
        http.server.requests: 0.5,0.9,0.95,0.99
```

---

## ğŸ“ˆ ç³»ç»Ÿæ‰©å±•æ€§è®¾è®¡ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

### 18. æ°´å¹³æ‰©å±•è®¾è®¡ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**æ— çŠ¶æ€æœåŠ¡è®¾è®¡**ï¼š

- âœ… **æ‰€æœ‰æœåŠ¡å¿…é¡»è®¾è®¡ä¸ºæ— çŠ¶æ€**
- âœ… **ä¼šè¯ä¿¡æ¯å­˜å‚¨åœ¨Redisä¸­**
- âœ… **æ–‡ä»¶å­˜å‚¨ä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ**
- âœ… **æ”¯æŒåŠ¨æ€æ‰©ç¼©å®¹**

**æ— çŠ¶æ€æœåŠ¡æ¨¡æ¿**ï¼š

```java
@RestController
public class ConsumeController {

    // æ— çŠ¶æ€Controllerï¼Œä¸å­˜å‚¨ä»»ä½•å®ä¾‹å˜é‡
    @Resource
    private ConsumeService consumeService;

    // ä½¿ç”¨ThreadLocalå¤„ç†çº¿ç¨‹å®‰å…¨çš„ä¸´æ—¶æ•°æ®
    private final ThreadLocal<UserContext> userContext = new ThreadLocal<>();

    @PostMapping("/consume")
    public ResponseDTO<ConsumeResultDTO> consume(@Valid @RequestBody ConsumeRequestDTO request) {
        try {
            // ä»Tokenä¸­è·å–ç”¨æˆ·ä¿¡æ¯
            UserContext context = getUserContextFromToken();
            userContext.set(context);

            return consumeService.consume(request);
        } finally {
            userContext.remove(); // æ¸…ç†ThreadLocal
        }
    }
}
```

### 19. æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**åˆ†ç‰‡ç­–ç•¥è¦æ±‚**ï¼š

- âœ… **æŒ‰ä¸šåŠ¡åŸŸè¿›è¡Œå‚ç›´åˆ†åº“**
- âœ… **æŒ‰æ•°æ®é‡è¿›è¡Œæ°´å¹³åˆ†è¡¨**
- âœ… **ä½¿ç”¨åˆ†å¸ƒå¼IDç”Ÿæˆå™¨**
- âœ… **å®ç°è·¨åº“æŸ¥è¯¢è§£å†³æ–¹æ¡ˆ**

**åˆ†åº“åˆ†è¡¨å®ç°**ï¼š

```java
// âœ… æ­£ç¡®ï¼šShardingStrategyåœ¨microservices-commonä¸­ä¸ä½¿ç”¨Springæ³¨è§£
// å·¥å…·ç±»é€šå¸¸ä¸éœ€è¦ä¾èµ–æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é™æ€æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•
public class ShardingStrategy {

    // æ•°æ®åº“åˆ†ç‰‡ç­–ç•¥
    public String getDatabaseName(Long userId) {
        // æŒ‰ç”¨æˆ·IDå“ˆå¸Œå€¼åˆ†åº“
        int dbIndex = (int) (userId % 4);
        return "ioedream_consume_" + dbIndex;
    }

    // è¡¨åˆ†ç‰‡ç­–ç•¥
    public String getTableName(String tableName, Long id) {
        // æŒ‰IDèŒƒå›´åˆ†è¡¨
        int tableIndex = (int) (id % 16);
        return tableName + "_" + tableIndex;
    }

    // åˆ†å¸ƒå¼IDç”Ÿæˆï¼ˆé›ªèŠ±ç®—æ³•ï¼‰
    public Long generateId() {
        SnowflakeIdWorker idWorker = new SnowflakeIdWorker(1, 1);
        return idWorker.nextId();
    }
}
```

### 20. å¾®æœåŠ¡æ‰©å±•æ€§è®¾è®¡ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**æœåŠ¡æ‹†åˆ†åŸåˆ™**ï¼š

- âœ… **æŒ‰ä¸šåŠ¡èƒ½åŠ›è¿›è¡ŒæœåŠ¡æ‹†åˆ†**
- âœ… **æ¯ä¸ªæœåŠ¡ç‹¬ç«‹æ•°æ®åº“**
- âœ… **æœåŠ¡é—´é€šè¿‡APIç½‘å…³é€šä¿¡**
- âœ… **æ”¯æŒç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•**

**æœåŠ¡æ‰©å±•é…ç½®**ï¼š

```yaml
# Kubernetesæ‰©å±•é…ç½®
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: consume-service-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: consume-service
  minReplicas: 2
  maxReplicas: 20
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

---

## ğŸ”’ å®‰å…¨è®¾è®¡è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

### 21. æ¥å£å®‰å…¨è®¾è®¡ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**æ¥å£å®‰å…¨è¦æ±‚**ï¼š

- âœ… **æ‰€æœ‰æ¥å£å¿…é¡»è¿›è¡Œèº«ä»½è®¤è¯**
- âœ… **å…³é”®æ¥å£è¿›è¡Œæƒé™æ ¡éªŒ**
- âœ… **æ•æ„Ÿæ•°æ®ä¼ è¾“ä½¿ç”¨HTTPS**
- âœ… **å®ç°æ¥å£é˜²åˆ·å’Œé™æµ**

**å®‰å…¨å®ç°æ¨¡æ¿**ï¼š

```java
@RestController
@RequestMapping("/api/v1/consume")
public class ConsumeController {

    @Resource
    private ConsumeService consumeService;

    @PreAuthorize("hasRole('CONSUME_USER')")
    @RateLimiter(name = "consume-api", fallbackMethod = "consumeRateLimitFallback")
    @PostMapping("/consume")
    public ResponseDTO<ConsumeResultDTO> consume(@Valid @RequestBody ConsumeRequestDTO request) {
        // æ•°æ®è„±æ•å¤„ç†
        request.setAccount(maskAccount(request.getAccount()));

        ConsumeResultDTO result = consumeService.consume(request);

        // è¿”å›ç»“æœè„±æ•
        result.setAccount(maskAccount(result.getAccount()));

        return ResponseDTO.ok(result);
    }

    // é˜²åˆ·é™æµé™çº§
    public ResponseDTO<ConsumeResultDTO> consumeRateLimitFallback(ConsumeRequestDTO request, Exception ex) {
        return ResponseDTO.error("RATE_LIMIT", "è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•");
    }

    // æ•æ„Ÿä¿¡æ¯è„±æ•
    private String maskAccount(String account) {
        if (account == null || account.length() <= 4) {
            return "****";
        }
        return account.substring(0, 2) + "****" + account.substring(account.length() - 2);
    }
}
```

### 22. æ•°æ®å®‰å…¨æ²»ç†ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**æ•°æ®å®‰å…¨è¦æ±‚**ï¼š

- âœ… **æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨**
- âœ… **æ•°æ®åº“è¿æ¥åŠ å¯†**
- âœ… **æ“ä½œå®¡è®¡æ—¥å¿—è®°å½•**
- âœ… **æ•°æ®å¤‡ä»½å’Œæ¢å¤ç­–ç•¥**

**æ•°æ®å®‰å…¨å®ç°**ï¼š

```java
// âœ… æ­£ç¡®ï¼šDataSecurityManageråœ¨microservices-commonä¸­ä¸ä½¿ç”¨Springæ³¨è§£
public class DataSecurityManager {

    private final AESUtil aesUtil;

    // æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public DataSecurityManager(AESUtil aesUtil) {
        this.aesUtil = aesUtil;
    }

    // æ•æ„Ÿå­—æ®µåŠ å¯†
    public String encryptSensitiveData(String data) {
        if (StringUtils.isEmpty(data)) {
            return data;
        }
        return aesUtil.encrypt(data);
    }

    // æ•æ„Ÿå­—æ®µè§£å¯†
    public String decryptSensitiveData(String encryptedData) {
        if (StringUtils.isEmpty(encryptedData)) {
            return encryptedData;
        }
        return aesUtil.decrypt(encryptedData);
    }

    // å®¡è®¡æ—¥å¿—è®°å½•
    @EventListener
    public void recordDataAccess(DataAccessEvent event) {
        AuditLogEntity auditLog = new AuditLogEntity();
        auditLog.setUserId(event.getUserId());
        auditLog.setAction(event.getAction());
        auditLog.setResource(event.getResource());
        auditLog.setIp(event.getClientIp());
        auditLog.setCreateTime(LocalDateTime.now());

        auditLogDao.insert(auditLog);
    }
}
```

---

## ğŸ”§ æŠ€æœ¯æ ˆè§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

> **æ›´æ–°æ—¥æœŸ**: 2025-12-10
> **è§„èŒƒç‰ˆæœ¬**: v2.0.0
> **é€‚ç”¨èŒƒå›´**: IOE-DREAMå…¨éƒ¨å¾®æœåŠ¡
> **é‡è¦æ›´æ–°**: ç»Ÿä¸€ä½¿ç”¨æˆç†ŸæŠ€æœ¯æ ˆï¼Œç¦æ­¢è‡ªå®šä¹‰å®ç°

### æ ¸å¿ƒåŸåˆ™

**æŠ€æœ¯æ ˆé€‰æ‹©åŸåˆ™**:

- âœ… **ä¼˜å…ˆä½¿ç”¨æˆç†Ÿå¼€æºæŠ€æœ¯æ ˆ**ï¼ˆç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§éªŒè¯ï¼‰
- âœ… **ç»Ÿä¸€æŠ€æœ¯æ ˆæ ‡å‡†**ï¼ˆé¿å…å¤šå¥—å®ç°å¹¶å­˜ï¼‰
- âŒ **ç¦æ­¢è‡ªå®šä¹‰å®ç°æ ¸å¿ƒç»„ä»¶**ï¼ˆäº‹åŠ¡ã€ç¼“å­˜ã€å®¹é”™ã€ç›‘æ§ï¼‰
- âŒ **ç¦æ­¢é‡å¤é€ è½®å­**ï¼ˆå·²æœ‰æˆç†Ÿæ–¹æ¡ˆå¿…é¡»ä½¿ç”¨ï¼‰

---

### 1. åˆ†å¸ƒå¼äº‹åŠ¡è§„èŒƒ - Seataï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶è¦æ±‚**:

- âœ… **ç»Ÿä¸€ä½¿ç”¨ Seata å®ç°åˆ†å¸ƒå¼äº‹åŠ¡**
- âŒ **ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰SagaManager**
- âŒ **ç¦æ­¢ä½¿ç”¨å…¶ä»–åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶**ï¼ˆå¦‚Atomikosã€Bitronixï¼‰

**Seataé›†æˆè§„èŒƒ**:

```java
// âŒ é”™è¯¯ç¤ºä¾‹ - è‡ªå®šä¹‰SagaManager
SagaTransaction saga = sagaManager.createSaga("consume", request.getOrderId())
    .step("balanceDeduct", this::deductBalance, this::refundBalance)
    .step("recordConsume", this::createConsumeRecord, this::deleteConsumeRecord)
    .build();
return saga.execute();

// âœ… æ­£ç¡®ç¤ºä¾‹ - ä½¿ç”¨Seata
@GlobalTransactional(name = "consume-saga", rollbackFor = Exception.class)
public ResponseDTO<ConsumeResultDTO> executeConsumeSaga(ConsumeRequestDTO request) {
    // Seataè‡ªåŠ¨ç®¡ç†äº‹åŠ¡çŠ¶æ€ã€è¡¥å¿ã€æ¢å¤
    deductBalance(request);
    createConsumeRecord(request);
    sendNotification(request);
    return ResponseDTO.ok(result);
}
```

**Seataé…ç½®è§„èŒƒ**:

```yaml
# application.yml
seata:
  enabled: true
  application-id: ${spring.application.name}
  tx-service-group: default_tx_group
  config:
    type: nacos
    nacos:
      server-addr: ${spring.cloud.nacos.config.server-addr}
      namespace: ${spring.cloud.nacos.config.namespace}
      group: SEATA_GROUP
  registry:
    type: nacos
    nacos:
      server-addr: ${spring.cloud.nacos.discovery.server-addr}
      namespace: ${spring.cloud.nacos.discovery.namespace}
      group: SEATA_GROUP
```

**Seataä¼˜åŠ¿**:

- âœ… **äº‹åŠ¡çŠ¶æ€æŒä¹…åŒ–**: æ”¯æŒMySQL/Rediså­˜å‚¨ï¼ŒæœåŠ¡é‡å¯ä¸ä¸¢å¤±
- âœ… **åˆ†å¸ƒå¼åè°ƒ**: æ”¯æŒTC(Transaction Coordinator)é›†ç¾¤æ¨¡å¼
- âœ… **è‡ªåŠ¨æ¢å¤**: å¤±è´¥äº‹åŠ¡è‡ªåŠ¨é‡è¯•å’Œè¡¥å¿
- âœ… **å¯è§†åŒ–ç›‘æ§**: Seata Consoleæä¾›å®Œæ•´çš„äº‹åŠ¡ç›‘æ§
- âœ… **å¤šç§æ¨¡å¼**: æ”¯æŒATã€TCCã€SAGAã€XAå››ç§æ¨¡å¼
- âœ… **ç”Ÿäº§çº§ç¨³å®šæ€§**: é˜¿é‡Œå¼€æºï¼Œå¤§è§„æ¨¡ç”Ÿäº§éªŒè¯

**å®æ–½è¦æ±‚**:

1. æ‰€æœ‰å¾®æœåŠ¡å¿…é¡»æ·»åŠ Seataä¾èµ–
2. åˆ›å»ºundo_logè¡¨ï¼ˆæ¯ä¸ªä¸šåŠ¡æ•°æ®åº“ï¼‰
3. é…ç½®Seata Serverè¿æ¥
4. ä½¿ç”¨@GlobalTransactionalæ›¿ä»£è‡ªå®šä¹‰äº‹åŠ¡ç®¡ç†

---

### 2. ç¼“å­˜ç®¡ç†è§„èŒƒ - ä¸‰çº§ç¼“å­˜æ¶æ„ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ä¸‰çº§ç¼“å­˜æ¶æ„**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸‰çº§ç¼“å­˜æ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚   L1 ç¼“å­˜   â”‚  Caffeine æœ¬åœ°ç¼“å­˜                           â”‚
â”‚    â”‚  (æ¯«ç§’çº§)   â”‚  TTL: 5åˆ†é’Ÿï¼Œå®¹é‡: 10000                     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚ æœªå‘½ä¸­                                              â”‚
â”‚           â–¼                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚   L2 ç¼“å­˜   â”‚  Redis åˆ†å¸ƒå¼ç¼“å­˜                            â”‚
â”‚    â”‚  (æ¯«ç§’çº§)   â”‚  TTL: 30åˆ†é’Ÿï¼Œé›†ç¾¤æ¨¡å¼                       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚ æœªå‘½ä¸­                                              â”‚
â”‚           â–¼                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚   L3 ç¼“å­˜   â”‚  ç½‘å…³ç¼“å­˜ (GatewayServiceClient)             â”‚
â”‚    â”‚  (å‡å°‘RPC) â”‚  æœåŠ¡é—´è°ƒç”¨ç»“æœç¼“å­˜                          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚ æœªå‘½ä¸­                                              â”‚
â”‚           â–¼                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚   æ•°æ®åº“    â”‚  MySQL æŒä¹…åŒ–å­˜å‚¨                            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¼ºåˆ¶è¦æ±‚**:

- âœ… **L1æœ¬åœ°ç¼“å­˜**: Caffeine 3.1.8ï¼Œæ¯«ç§’çº§å“åº”
- âœ… **L2åˆ†å¸ƒå¼ç¼“å­˜**: Redis 7.xï¼Œæ•°æ®ä¸€è‡´æ€§
- âœ… **L3ç½‘å…³ç¼“å­˜**: GatewayServiceClientè°ƒç”¨ç»“æœç¼“å­˜
- âœ… **ä½¿ç”¨UnifiedCacheManagerç»Ÿä¸€ç®¡ç†å¤šçº§ç¼“å­˜**

**UnifiedCacheManagerä½¿ç”¨è§„èŒƒ**:

```java
// âœ… æ­£ç¡®ç¤ºä¾‹ - ä½¿ç”¨UnifiedCacheManager
@Service
public class UserServiceImpl implements UserService {

    @Resource
    private UnifiedCacheManager cacheManager;

    @Resource
    private UserDao userDao;

    public UserEntity getUserById(Long userId) {
        String cacheKey = "user:" + userId;

        // å¤šçº§ç¼“å­˜æŸ¥è¯¢
        UserEntity user = cacheManager.get(cacheKey);
        if (user != null) {
            return user;
        }

        // ä»æ•°æ®åº“åŠ è½½
        user = userDao.selectById(userId);
        if (user != null) {
            // å†™å…¥ç¼“å­˜ï¼ˆé»˜è®¤TTL 1å°æ—¶ï¼‰
            cacheManager.put(cacheKey, user);
        }
        return user;
    }

    public void updateUser(UserEntity user) {
        userDao.updateById(user);
        // æ¸…é™¤ç¼“å­˜
        cacheManager.evict("user:" + user.getId());
    }
}
```

**ç¼“å­˜é…ç½®è§„èŒƒ**:

```yaml
# application.yml ç¼“å­˜é…ç½®
cache:
  # L1 æœ¬åœ°ç¼“å­˜é…ç½®
  l1-local:
    enabled: true
    maximum-size: 10000
    expire-after-write: 5m
    refresh-after-write: 3m
    record-stats: true

  # L2 Redisç¼“å­˜é…ç½®
  l2-redis:
    enabled: true
    default-ttl: 30m
    key-prefix: "ioedream:"
    null-ttl: 5m  # ç©ºå€¼ç¼“å­˜é˜²ç©¿é€

  # L3 ç½‘å…³ç¼“å­˜é…ç½®
  l3-gateway:
    enabled: true
    ttl: 10m
    max-size: 5000

  # ç¼“å­˜åŸŸé…ç½®
  domains:
    user:
      l1-size: 1000
      l2-ttl: 1h
    permission:
      l1-size: 2000
      l2-ttl: 30m
    device:
      l1-size: 500
      l2-ttl: 10m
    config:
      l1-size: 500
      l2-ttl: 2h
```

**ä¸‰çº§ç¼“å­˜ä¼˜åŠ¿**:

- âœ… **L1æœ¬åœ°ç¼“å­˜**: æ¯«ç§’çº§å“åº”ï¼Œæ— ç½‘ç»œå¼€é”€
- âœ… **L2 Redisç¼“å­˜**: åˆ†å¸ƒå¼ä¸€è‡´æ€§ï¼Œé›†ç¾¤å…±äº«
- âœ… **L3ç½‘å…³ç¼“å­˜**: å‡å°‘å¾®æœåŠ¡é—´RPCè°ƒç”¨
- âœ… **ç¼“å­˜ç©¿é€é˜²æŠ¤**: ç©ºå€¼ç¼“å­˜ + å¸ƒéš†è¿‡æ»¤å™¨
- âœ… **ç¼“å­˜å‡»ç©¿é˜²æŠ¤**: äº’æ–¥é” + é€»è¾‘è¿‡æœŸ
- âœ… **ç¼“å­˜é›ªå´©é˜²æŠ¤**: å·®å¼‚åŒ–TTL + é¢„çƒ­æœºåˆ¶

**å®æ–½è¦æ±‚**:

1. ä½¿ç”¨UnifiedCacheManagerè¿›è¡Œå¤šçº§ç¼“å­˜ç®¡ç†
2. æŒ‰ç…§ç¼“å­˜åŸŸé…ç½®ä¸åŒçš„TTLå’Œå®¹é‡
3. å®ç°ç¼“å­˜é¢„çƒ­æœºåˆ¶ï¼ˆå¯åŠ¨æ—¶åŠ è½½çƒ­ç‚¹æ•°æ®ï¼‰
4. é…ç½®ç¼“å­˜ç›‘æ§æŒ‡æ ‡ï¼ˆå‘½ä¸­ç‡ã€å¤§å°ã€é©±é€ç‡ï¼‰

---

### 3. å®¹é”™æœºåˆ¶è§„èŒƒ - Resilience4jï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶è¦æ±‚**:

- âœ… **ç»Ÿä¸€ä½¿ç”¨ Resilience4j å®ç°å®¹é”™æœºåˆ¶**
- âŒ **ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰é‡è¯•é€»è¾‘**
- âŒ **ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰ç†”æ–­å™¨å®ç°**
- âŒ **ç¦æ­¢ä½¿ç”¨LightResilienceConfigurationè‡ªå®šä¹‰å®ç°**

**Resilience4jé›†æˆè§„èŒƒ**:

```java
// âŒ é”™è¯¯ç¤ºä¾‹ - è‡ªå®šä¹‰é‡è¯•é€»è¾‘
LightRetryManager retryManager = new LightRetryManager();
retryManager.executeWithRetry(() -> {
    return externalService.call();
}, 3);

// âœ… æ­£ç¡®ç¤ºä¾‹ - ä½¿ç”¨Resilience4jæ³¨è§£
@Retry(name = "external-service", fallbackMethod = "fallback")
@CircuitBreaker(name = "external-service")
@RateLimiter(name = "external-service")
@Bulkhead(name = "external-service")
public ResponseDTO<String> callExternalService(RequestDTO request) {
    return externalService.call(request);
}

public ResponseDTO<String> fallback(RequestDTO request, Exception e) {
    log.warn("[é™çº§] å¤–éƒ¨æœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ", e);
    return ResponseDTO.ok("é™çº§å“åº”");
}
```

**Resilience4jé…ç½®è§„èŒƒ**:

```yaml
resilience4j:
  retry:
    configs:
      default:
        maxAttempts: 3
        waitDuration: 1000ms
        exponentialBackoffMultiplier: 2
        retryExceptions:
          - java.net.SocketTimeoutException
          - java.io.IOException
    instances:
      external-service:
        baseConfig: default
        maxAttempts: 5
        waitDuration: 2000ms

  circuitbreaker:
    configs:
      default:
        failureRateThreshold: 50
        waitDurationInOpenState: 60s
        slidingWindowSize: 100
    instances:
      external-service:
        baseConfig: default
        failureRateThreshold: 30

  ratelimiter:
    configs:
      default:
        limitForPeriod: 10
        limitRefreshPeriod: 1s
        timeoutDuration: 0
    instances:
      external-service:
        baseConfig: default
```

**Resilience4jä¼˜åŠ¿**:

- âœ… **å®Œæ•´å®¹é”™**: é‡è¯•ã€ç†”æ–­ã€é™æµã€éš”ç¦»ä¸€ä½“åŒ–
- âœ… **æŒ‡æ ‡ç›‘æ§**: è‡ªåŠ¨é›†æˆMicrometer
- âœ… **é…ç½®çµæ´»**: æ”¯æŒYAMLé…ç½®å’Œä»£ç é…ç½®
- âœ… **äº‹ä»¶å‘å¸ƒ**: æ”¯æŒçŠ¶æ€å˜æ›´äº‹ä»¶ç›‘å¬
- âœ… **ç”Ÿäº§éªŒè¯**: Netflix Hystrixçš„ç°ä»£æ›¿ä»£æ–¹æ¡ˆ

**å®æ–½è¦æ±‚**:

1. ç§»é™¤è‡ªå®šä¹‰é‡è¯•å’Œç†”æ–­å®ç°
2. ç»Ÿä¸€ä½¿ç”¨Resilience4jæ³¨è§£
3. é…ç½®ç»Ÿä¸€ç®¡ç†ï¼ˆYAMLï¼‰
4. æ·»åŠ é™çº§æ–¹æ³•ï¼ˆfallbackMethodï¼‰

---

### 4. ç›‘æ§æŒ‡æ ‡è§„èŒƒ - Micrometerï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶è¦æ±‚**:

- âœ… **ç»Ÿä¸€ä½¿ç”¨ Micrometer + Prometheus**
- âŒ **ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰MetricsCollector**
- âŒ **ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰MetricsCollectorManager**
- âŒ **ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰BusinessMetricsCollector**

**Micrometeré›†æˆè§„èŒƒ**:

```java
// âŒ é”™è¯¯ç¤ºä¾‹ - è‡ªå®šä¹‰æŒ‡æ ‡æ”¶é›†
metricsCollector.recordCounter("user.login.count", "type", "success");
metricsCollector.recordGauge("device.online.count", 1250);

// âœ… æ­£ç¡®ç¤ºä¾‹ - ä½¿ç”¨Micrometeræ³¨è§£
@Timed(value = "user.login", description = "ç”¨æˆ·ç™»å½•è€—æ—¶")
@Counted(value = "user.login.count", description = "ç”¨æˆ·ç™»å½•æ¬¡æ•°")
public ResponseDTO<UserVO> login(LoginForm form) {
    // ä¸šåŠ¡é€»è¾‘
    return ResponseDTO.ok(userVO);
}

// è‡ªåŠ¨æŒ‡æ ‡æ”¶é›†ï¼ˆæ— éœ€æ‰‹åŠ¨è°ƒç”¨ï¼‰
@Timed(value = "http.request", extraTags = {"method", "GET"})
@GetMapping("/api/v1/users/{id}")
public ResponseDTO<UserVO> getUser(@PathVariable Long id) {
    return ResponseDTO.ok(userService.getById(id));
}
```

**Micrometeré…ç½®è§„èŒƒ**:

```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true
        step: 30s
    distribution:
      percentiles-histogram:
        http.server.requests: true
      percentiles:
        http.server.requests: 0.5,0.9,0.95,0.99
    tags:
      application: ${spring.application.name}
      environment: ${spring.profiles.active}
```

**Micrometerä¼˜åŠ¿**:

- âœ… **è‡ªåŠ¨æŒ‡æ ‡**: Spring Boot Actuatorè‡ªåŠ¨æ”¶é›†
- âœ… **å¤šåç«¯æ”¯æŒ**: Prometheusã€InfluxDBã€CloudWatchç­‰
- âœ… **æ ‡å‡†åŒ–**: ç¬¦åˆMicrometerè§„èŒƒ
- âœ… **ä¸°å¯ŒæŒ‡æ ‡**: JVMã€HTTPã€æ•°æ®åº“ã€ç¼“å­˜ç­‰
- âœ… **å¯è§†åŒ–**: é›†æˆGrafana Dashboard

**å®æ–½è¦æ±‚**:

1. ç§»é™¤æ‰€æœ‰è‡ªå®šä¹‰æŒ‡æ ‡æ”¶é›†å™¨
2. ä½¿ç”¨@Timed/@Countedæ³¨è§£
3. é…ç½®Prometheuså¯¼å‡º
4. é…ç½®Grafana Dashboard

---

### 5. å·¥å…·ç±»è§„èŒƒ - Apache Commons + Guavaï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶è¦æ±‚**:

- âœ… **ä¼˜å…ˆä½¿ç”¨ Apache Commons Lang3 / Guava**
- âŒ **ç¦æ­¢é‡å¤å®ç°å·²æœ‰å·¥å…·ç±»åŠŸèƒ½**
- âŒ **ç¦æ­¢è‡ªå®šä¹‰StringUtilã€JsonUtilç­‰é€šç”¨å·¥å…·**

**å·¥å…·ç±»æ›¿æ¢æ¸…å•**:

| è‡ªå®šä¹‰å·¥å…·ç±» | è¡Œæ•° | æ›¿æ¢æ–¹æ¡ˆ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------------|------|---------|--------|------|
| `SmartStringUtil` | 150+ | Apache Commons Lang3 | P2 | âœ… å·²ç¡®è®¤ä¸å­˜åœ¨ï¼ˆå¯èƒ½å·²åˆ é™¤ï¼‰ |
| `JsonUtil` | 100+ | Jackson ObjectMapper (Spring Booté»˜è®¤) | P1 | âœ… å·²æ›´æ–°ä¸ºé€‚é…å™¨æ¨¡å¼ |
| `PasswordUtil` | 120+ | Spring Security BCryptPasswordEncoder | P1 | âœ… å·²æ›´æ–°ä¸ºé€‚é…å™¨æ¨¡å¼ |
| `SmartRedisUtil` | 200+ | Spring Data Redis (å·²ä½¿ç”¨) | P2 | âœ… å·²æ ‡è®°ä¸º@Deprecated |
| `PageHelper` | 80+ | ä¿ç•™ï¼ˆæ¸¸æ ‡åˆ†é¡µåŠŸèƒ½ï¼ŒMyBatis-Plusä¸æ”¯æŒï¼‰ | - | âœ… å·²ç¡®è®¤ä¿ç•™ |
| `AESUtil` | 120+ | ä¿ç•™ï¼ˆä½¿ç”¨javax.cryptoæ ‡å‡†åº“ï¼Œç¬¦åˆè§„èŒƒï¼‰ | P2 | âœ… å·²ä¼˜åŒ–æ³¨é‡Šï¼Œè¯´æ˜ä¸Spring Security Cryptoå…³ç³» |
| `DataMaskUtil` | 90+ | ä¿ç•™ï¼ˆä¸šåŠ¡ç‰¹å®šï¼‰ | - | âœ… å·²ç¡®è®¤ä¿ç•™ |
| å…¶ä»–å·¥å…·ç±» | 300+ | Apache Commons/Guava | P2 | â³ å¾…æ›¿æ¢ |

**å·¥å…·ç±»ä½¿ç”¨è§„èŒƒ**:

```java
// âŒ é”™è¯¯ç¤ºä¾‹ - è‡ªå®šä¹‰å·¥å…·ç±»
String result = SmartStringUtil.trim(str);
boolean isEmpty = SmartStringUtil.isEmpty(str);

// âœ… æ­£ç¡®ç¤ºä¾‹ - Apache Commons Lang3
import org.apache.commons.lang3.StringUtils;
String result = StringUtils.trim(str);
boolean isEmpty = StringUtils.isEmpty(str);

// âœ… æ¨èç¤ºä¾‹ - ä½¿ç”¨Spring Boot ObjectMapper Beanï¼ˆæ ‡å‡†æ–¹æ¡ˆï¼‰
@Resource
private ObjectMapper objectMapper;

String json = objectMapper.writeValueAsString(obj);
User user = objectMapper.readValue(json, User.class);

// âœ… å…è®¸ç¤ºä¾‹ - ä½¿ç”¨JsonUtilé€‚é…å™¨ï¼ˆå‘åå…¼å®¹ï¼‰
// JsonUtilå·²æ›´æ–°ä¸ºé€‚é…å™¨æ¨¡å¼ï¼Œå†…éƒ¨ä½¿ç”¨ObjectMapper Bean
// æ¨èæ–°ä»£ç ä½¿ç”¨ObjectMapper Beanï¼Œæ—§ä»£ç å¯ç»§ç»­ä½¿ç”¨JsonUtil
String json = JsonUtil.toJson(obj);
User user = JsonUtil.fromJson(json, User.class);

// âœ… æ¨èç¤ºä¾‹ - ä½¿ç”¨Spring Security BCryptPasswordEncoder Beanï¼ˆæ ‡å‡†æ–¹æ¡ˆï¼‰
@Resource
private PasswordEncoder passwordEncoder;

String encrypted = passwordEncoder.encode(rawPassword);
boolean isValid = passwordEncoder.matches(rawPassword, hashedPassword);

// âœ… å…è®¸ç¤ºä¾‹ - ä½¿ç”¨PasswordUtilé€‚é…å™¨ï¼ˆå‘åå…¼å®¹ï¼‰
// PasswordUtilå·²æ›´æ–°ä¸ºé€‚é…å™¨æ¨¡å¼ï¼Œæ¨èä½¿ç”¨BCryptPasswordEncoder Bean
// æ¨èæ–°ä»£ç ä½¿ç”¨BCryptPasswordEncoder Beanï¼Œæ—§ä»£ç å¯ç»§ç»­ä½¿ç”¨PasswordUtil
String encrypted = PasswordUtil.encryptPassword(rawPassword);
boolean isValid = PasswordUtil.verifyPassword(rawPassword, hashedPassword);
```

**å®æ–½è¦æ±‚**:

1. é€æ­¥æ›¿æ¢è‡ªå®šä¹‰å·¥å…·ç±»
2. ä½¿ç”¨æˆç†Ÿå¼€æºåº“
3. ä¿ç•™ä¸šåŠ¡ç‰¹å®šå·¥å…·ç±»ï¼ˆå¦‚DataMaskUtilã€PageHelperæ¸¸æ ‡åˆ†é¡µï¼‰
4. JsonUtilå’ŒPasswordUtilå·²æ›´æ–°ä¸ºé€‚é…å™¨æ¨¡å¼ï¼Œæ¨èä½¿ç”¨Spring Bootæ ‡å‡†æ–¹æ¡ˆ

---

### 6. å¼‚å¸¸å¤„ç†è§„èŒƒ - ç»Ÿä¸€ä¼˜åŒ–ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¼ºåˆ¶è¦æ±‚**:

- âœ… **ç»Ÿä¸€ä½¿ç”¨ GlobalExceptionHandler**
- âŒ **ç¦æ­¢å¤šä¸ªå¼‚å¸¸å¤„ç†å™¨å¹¶å­˜**
- âŒ **ç¦æ­¢LightExceptionHandlerå’ŒGlobalExceptionHandleråŒæ—¶å­˜åœ¨**

**å¼‚å¸¸å¤„ç†è§„èŒƒ**:

```java
// âœ… ç»Ÿä¸€å¼‚å¸¸å¤„ç†å™¨
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {

    @ExceptionHandler(BusinessException.class)
    @ResponseStatus(HttpStatus.OK)
    public ResponseDTO<Void> handleBusinessException(BusinessException e) {
        log.warn("[ä¸šåŠ¡å¼‚å¸¸] code={}, message={}", e.getCode(), e.getMessage());
        return ResponseDTO.error(e.getCode(), e.getMessage());
    }

    @ExceptionHandler(MethodArgumentNotValidException.class)
    @ResponseStatus(HttpStatus.BAD_REQUEST)
    public ResponseDTO<Map<String, String>> handleValidationException(
            MethodArgumentNotValidException e) {
        Map<String, String> errors = e.getBindingResult().getFieldErrors().stream()
            .collect(Collectors.toMap(
                FieldError::getField,
                FieldError::getDefaultMessage,
                (existing, replacement) -> existing
            ));
        return ResponseDTO.error("VALIDATION_ERROR", "å‚æ•°éªŒè¯å¤±è´¥", errors);
    }

    @ExceptionHandler(Exception.class)
    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
    public ResponseDTO<Void> handleException(Exception e) {
        // è®°å½•å®Œæ•´å¼‚å¸¸æ ˆï¼ˆåŒ…å«TraceIdï¼‰
        String traceId = MDC.get("traceId");
        log.error("[ç³»ç»Ÿå¼‚å¸¸] traceId={}, error={}", traceId, e.getMessage(), e);
        return ResponseDTO.error("SYSTEM_ERROR", "ç³»ç»Ÿå†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

**å®æ–½è¦æ±‚**:

1. åˆå¹¶GlobalExceptionHandlerå’ŒLightExceptionHandler
2. æ·»åŠ TraceIdè¿½è¸ª
3. ä¼˜åŒ–å¼‚å¸¸å¤„ç†é€»è¾‘

---

### æŠ€æœ¯æ ˆæ›¿æ¢æ—¶é—´è¡¨

| æŠ€æœ¯æ ˆ | è‡ªå®šä¹‰å®ç° | æ›¿æ¢æ–¹æ¡ˆ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ |
|--------|-----------|---------|--------|-----------|
| **åˆ†å¸ƒå¼äº‹åŠ¡** | SagaManager | Seata | ğŸ”´ P0 | 3-5å¤© |
| **ç¼“å­˜ç®¡ç†** | 3ä¸ªCacheManager | Spring Cache | ğŸ”´ P0 | 2-3å¤© |
| **å®¹é”™æœºåˆ¶** | LightResilienceConfiguration | Resilience4j | ğŸŸ  P1 | 2å¤© |
| **ç›‘æ§æŒ‡æ ‡** | 5ä¸ªMetricsCollector | Micrometer | ğŸŸ  P1 | 2-3å¤© |
| **å·¥å…·ç±»** | 20+ä¸ªUtil | Apache Commons/Guava | ğŸŸ¡ P2 | 3-5å¤© |
| **å¼‚å¸¸å¤„ç†** | 2ä¸ªHandler | ç»Ÿä¸€ä¼˜åŒ– | ğŸŸ¡ P2 | 1å¤© |

---

### æŠ€æœ¯æ ˆæ£€æŸ¥æ¸…å•

**ä»£ç æäº¤å‰æ£€æŸ¥**:

- [ ] æœªä½¿ç”¨è‡ªå®šä¹‰SagaManagerï¼ˆåº”ä½¿ç”¨Seataï¼‰
- [ ] æœªä½¿ç”¨è‡ªå®šä¹‰CacheManagerï¼ˆåº”ä½¿ç”¨Spring Cacheï¼‰
- [ ] æœªä½¿ç”¨è‡ªå®šä¹‰é‡è¯•é€»è¾‘ï¼ˆåº”ä½¿ç”¨Resilience4jï¼‰
- [ ] æœªä½¿ç”¨è‡ªå®šä¹‰æŒ‡æ ‡æ”¶é›†å™¨ï¼ˆåº”ä½¿ç”¨Micrometerï¼‰
- [ ] å·¥å…·ç±»ä¼˜å…ˆä½¿ç”¨Apache Commons/Guava

**æŒç»­é›†æˆæ£€æŸ¥**:

- [ ] æ‰«æè‡ªå®šä¹‰äº‹åŠ¡ç®¡ç†å™¨
- [ ] æ‰«æè‡ªå®šä¹‰ç¼“å­˜ç®¡ç†å™¨
- [ ] æ‰«æè‡ªå®šä¹‰å®¹é”™å®ç°
- [ ] æ‰«æè‡ªå®šä¹‰ç›‘æ§å®ç°

---

## ğŸš¨ P0çº§å…³é”®é—®é¢˜æ¸…å•ï¼ˆåŸºäºæ·±åº¦åˆ†æç»“æœï¼‰

### ğŸ”´ é…ç½®å®‰å…¨é—®é¢˜ï¼ˆ64ä¸ªæ˜æ–‡å¯†ç  - P0çº§ï¼‰

**å‘ç°ä¸¥é‡é—®é¢˜**: å…¨å±€æ‰«æå‘ç°64ä¸ªé…ç½®æ–‡ä»¶ä½¿ç”¨æ˜æ–‡å¯†ç ï¼Œå­˜åœ¨ä¸¥é‡å®‰å…¨é£é™©
**åˆ†æä¾æ®**: 2025-12-01å…¨å±€æ¶æ„æ·±åº¦åˆ†æç»“æœï¼Œå®‰å…¨ç»´åº¦è¯„åˆ†76/100

**ç«‹å³æ•´æ”¹è¦æ±‚**:

- âŒ **ç¦æ­¢é…ç½®æ–‡ä»¶ä¸­å‡ºç°æ˜æ–‡å¯†ç **ï¼ˆå‘ç°64ä¸ªå®ä¾‹ï¼Œå¿…é¡»ç«‹å³æ•´æ”¹ï¼‰
- âŒ **ç¦æ­¢ä½¿ç”¨ç¯å¢ƒå˜é‡ä¼ é€’æ•æ„Ÿé…ç½®**ï¼ˆéœ€ä½¿ç”¨NacosåŠ å¯†é…ç½®ï¼‰
- âŒ **ç¦æ­¢å°†æ•°æ®åº“è¿æ¥ä¿¡æ¯ç¡¬ç¼–ç **ï¼ˆå¿…é¡»é€šè¿‡å®‰å…¨é…ç½®ä¸­å¿ƒç®¡ç†ï¼‰
- âŒ **ç¦æ­¢ç¼ºå°‘é…ç½®æ–‡ä»¶è®¿é—®æƒé™æ§åˆ¶**ï¼ˆéœ€è¦ä¸¥æ ¼çš„æ–‡ä»¶æƒé™ç®¡ç†ï¼‰

**å®‰å…¨è§£å†³æ–¹æ¡ˆ**:

```yaml
# âŒ é”™è¯¯ç¤ºä¾‹ - æ˜æ–‡å¯†ç 
spring:
  datasource:
    password: "123456"  # ç¦æ­¢ï¼

# âœ… æ­£ç¡®ç¤ºä¾‹ - åŠ å¯†é…ç½®
spring:
  datasource:
    password: "ENC(AES256:encrypted_password_hash)"  # NacosåŠ å¯†é…ç½®
    druid:
      connection-properties: "config.decrypt=true;config.decrypt.key=${nacos.config.key}"
```

### ğŸ”´ åˆ†å¸ƒå¼è¿½è¸ªç¼ºå¤±ï¼ˆå®Œå…¨ç¼ºå¤± - P0çº§ï¼‰

**å‘ç°ä¸¥é‡é—®é¢˜**: é¡¹ç›®å®Œå…¨ç¼ºå°‘åˆ†å¸ƒå¼è¿½è¸ªå®ç°ï¼Œæ— æ³•æœ‰æ•ˆç›‘æ§æœåŠ¡è°ƒç”¨é“¾
**åˆ†æä¾æ®**: 2025-12-01å…¨å±€æ¶æ„æ·±åº¦åˆ†æç»“æœï¼Œç›‘æ§ç»´åº¦è¯„åˆ†52/100

**ç«‹å³æ•´æ”¹è¦æ±‚**:

- âŒ **ç¦æ­¢ç¼ºå°‘åˆ†å¸ƒå¼è¿½è¸ªå®ç°**ï¼ˆ22ä¸ªå¾®æœåŠ¡éƒ½æœªå®ç°ï¼ŒP0ä¼˜å…ˆçº§ï¼‰
- âŒ **ç¦æ­¢æœåŠ¡é—´è°ƒç”¨æ— é“¾è·¯è¿½è¸ª**ï¼ˆæ— æ³•å®šä½æ€§èƒ½ç“¶é¢ˆå’Œæ•…éšœç‚¹ï¼‰
- âŒ **ç¦æ­¢ç¼ºå°‘Spanå’ŒTraceæ ‡è¯†**ï¼ˆéœ€è¦å®Œæ•´çš„è°ƒç”¨é“¾è·¯ç›‘æ§ï¼‰
- âŒ **ç¦æ­¢ç¼ºå°‘ä¸šåŠ¡æ“ä½œè¿½è¸ª**ï¼ˆéœ€è¦å…³é”®ä¸šåŠ¡æ“ä½œçš„å®Œæ•´è¿½è¸ªï¼‰

**è¿½è¸ªå®ç°è¦æ±‚**:

```java
// âœ… å¿…é¡»å®ç°çš„åˆ†å¸ƒå¼è¿½è¸ª
@RestController
public class ConsumeController {

    @NewSpan(name = "consume-api")
    @PostMapping("/consume")
    public ResponseDTO<ConsumeResultDTO> consume(@Valid @RequestBody ConsumeRequestDTO request) {
        // è‡ªåŠ¨ç”ŸæˆTrace IDå’ŒSpan ID
        Span span = tracer.nextSpan().name("consume-business").start();
        try (Tracer.SpanInScope ws = tracer.withSpanInScope(span)) {
            return consumeService.consume(request);
        } finally {
            span.end();
        }
    }
}
```

### ğŸ”´ Repositoryå‘½åè¿è§„ï¼ˆ96ä¸ªè¿è§„å®ä¾‹ - P0çº§ï¼‰

**å‘ç°ä¸¥é‡é—®é¢˜**: å…¨é¡¹ç›®å­˜åœ¨96ä¸ª@Repositoryæ³¨è§£ä½¿ç”¨å®ä¾‹ï¼Œè¿åRepoWikiè§„èŒƒ
**åˆ†æä¾æ®**: 2025-12-01å…¨å±€æ¶æ„æ·±åº¦åˆ†æç»“æœï¼Œæ¶æ„åˆè§„æ€§è¯„åˆ†81/100

**ç«‹å³æ•´æ”¹è¦æ±‚**:

- âŒ **ç¦æ­¢ä½¿ç”¨@Repositoryæ³¨è§£**ï¼ˆå‘ç°96ä¸ªå®ä¾‹ï¼Œå¿…é¡»å…¨éƒ¨æ›¿æ¢ä¸º@Mapperï¼‰
- âŒ **ç¦æ­¢ä½¿ç”¨Repositoryåç¼€å‘½å**ï¼ˆæ‰€æœ‰æ¥å£å¿…é¡»ä½¿ç”¨Daoåç¼€ï¼‰
- âŒ **ç¦æ­¢JPA+RepositoryæŠ€æœ¯æ ˆ**ï¼ˆå¿…é¡»ç»Ÿä¸€ä½¿ç”¨MyBatis-Plus+DAOï¼‰
- âŒ **ç¦æ­¢æ•°æ®è®¿é—®å±‚ä½¿ç”¨Spring Data JPA**ï¼ˆæ¶æ„è¿è§„ï¼Œå¿…é¡»ç»Ÿä¸€æŠ€æœ¯æ ˆï¼‰

**æ•´æ”¹æ ‡å‡†æ¨¡æ¿**:

```java
// âŒ é”™è¯¯ç¤ºä¾‹ - Repositoryè¿è§„
@Repository  // ç¦æ­¢ä½¿ç”¨ï¼
public interface AccountRepository extends JpaRepository<AccountEntity, Long> {
    // JPAæ–¹æ³• - ç¦æ­¢ï¼
}

// âœ… æ­£ç¡®ç¤ºä¾‹ - DAOåˆè§„
@Mapper  // å¿…é¡»ä½¿ç”¨ï¼
public interface AccountDao extends BaseMapper<AccountEntity> {
    // MyBatis-Plusæ–¹æ³• - ç¬¦åˆè§„èŒƒï¼
}
```

### ğŸ”´ APIè®¾è®¡ä¸è§„èŒƒï¼ˆ65%æ¥å£æ»¥ç”¨POST - P0çº§ï¼‰

**å‘ç°ä¸¥é‡é—®é¢˜**: 65%çš„RESTæ¥å£é”™è¯¯ä½¿ç”¨POSTæ–¹æ³•ï¼Œè¿åRESTfulè®¾è®¡åŸåˆ™
**åˆ†æä¾æ®**: 2025-12-01å…¨å±€æ¶æ„æ·±åº¦åˆ†æç»“æœï¼ŒAPIè®¾è®¡ç»´åº¦è¯„åˆ†72/100

**ç«‹å³æ•´æ”¹è¦æ±‚**:

- âŒ **ç¦æ­¢æŸ¥è¯¢æ¥å£ä½¿ç”¨POSTæ–¹æ³•**ï¼ˆ65%æ¥å£å­˜åœ¨æ­¤é—®é¢˜ï¼Œå¿…é¡»æ•´æ”¹ï¼‰
- âŒ **ç¦æ­¢ç¼ºå°‘HTTPçŠ¶æ€ç è¯­ä¹‰åŒ–**ï¼ˆéœ€è¦å®Œæ•´çš„HTTPçŠ¶æ€ç ä½“ç³»ï¼‰
- âŒ **ç¦æ­¢æ¥å£ç¼ºå°‘ç‰ˆæœ¬æ§åˆ¶**ï¼ˆå¿…é¡»å®ç°APIç‰ˆæœ¬ç®¡ç†ï¼‰
- âŒ **ç¦æ­¢æ¥å£è®¾è®¡ä¸ç¬¦åˆRESTfulè§„èŒƒ**ï¼ˆéœ€è¦ç³»ç»Ÿæ€§é‡æ„ï¼‰

**RESTfulè®¾è®¡è§„èŒƒ**:

```java
// âŒ é”™è¯¯ç¤ºä¾‹ - è¿åRESTful
@PostMapping("/getUserInfo")  // æŸ¥è¯¢ç”¨POST - é”™è¯¯ï¼
@PostMapping("/updateUser")   // æ›´æ–°ç”¨POST - é”™è¯¯ï¼

// âœ… æ­£ç¡®ç¤ºä¾‹ - ç¬¦åˆRESTful
@GetMapping("/v1/users/{userId}")           // æŸ¥è¯¢ç”¨æˆ·
@PutMapping("/v1/users/{userId}")           // æ›´æ–°ç”¨æˆ·
@DeleteMapping("/v1/users/{userId}")        // åˆ é™¤ç”¨æˆ·
@GetMapping("/v1/users")                    // åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
```

---

## ğŸš« ä¸¥æ ¼ç¦æ­¢äº‹é¡¹æ¸…å•

### æ¶æ„è¿è§„

- âŒ ç¦æ­¢è·¨å±‚è®¿é—®ï¼ˆå¦‚Controllerç›´æ¥è°ƒç”¨DAOï¼‰
- âŒ ç¦æ­¢å¾ªç¯ä¾èµ–ï¼ˆæœåŠ¡é—´ã€ç»„ä»¶é—´ï¼‰
- âŒ ç¦æ­¢ç›´æ¥è®¿é—®å…¶ä»–æœåŠ¡æ•°æ®åº“
- âŒ ç¦æ­¢åœ¨Controllerä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘
- âŒ ç¦æ­¢åœ¨DAOä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘
- âŒ ç¦æ­¢ç ´åå››å±‚æ¶æ„è¾¹ç•Œ

### ä»£ç è§„èŒƒè¿è§„

- âŒ ç¦æ­¢ä½¿ç”¨ `@Autowired`ï¼ˆç»Ÿä¸€ä½¿ç”¨ `@Resource`ï¼‰
- âŒ ç¦æ­¢ä½¿ç”¨ `Repository` åç¼€ï¼ˆç»Ÿä¸€ä½¿ç”¨ `Dao`ï¼‰
- âŒ ç¦æ­¢ä½¿ç”¨ `@Repository` æ³¨è§£ï¼ˆç»Ÿä¸€ä½¿ç”¨ `@Mapper`ï¼‰
- âŒ ç¦æ­¢ä½¿ç”¨ javax åŒ…åï¼ˆç»Ÿä¸€ä½¿ç”¨ Jakartaï¼‰
- âŒ ç¦æ­¢ç¡¬ç¼–ç é…ç½®å€¼ï¼ˆä½¿ç”¨é…ç½®ä¸­å¿ƒï¼‰
- âŒ ç¦æ­¢çŠ¶æ€æœåŠ¡è®¾è®¡ï¼ˆå¿…é¡»æ— çŠ¶æ€ï¼‰

### æŠ€æœ¯é€‰å‹è¿è§„

- âŒ ç¦æ­¢æœªç»ç™½åå•/ç»Ÿä¸€ç›´è¿ Client çš„ FeignClient ç›´è¿ï¼ˆé»˜è®¤é€šè¿‡GatewayServiceClientï¼‰
- âŒ ç¦æ­¢ä½¿ç”¨ HikariCP è¿æ¥æ± ï¼ˆç»Ÿä¸€ä½¿ç”¨ Druidï¼‰
- âŒ ç¦æ­¢ä½¿ç”¨é™¤ Nacos å¤–çš„æ³¨å†Œä¸­å¿ƒ
- âŒ ç¦æ­¢ä½¿ç”¨é™¤ Redis å¤–çš„ç¼“å­˜æŠ€æœ¯
- âŒ ç¦æ­¢ç»•è¿‡å¤šçº§ç¼“å­˜ç­–ç•¥

### æŠ€æœ¯æ ˆè¿è§„ï¼ˆæ–°å¢ - 2025-12-10ï¼‰

- âŒ ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰SagaManagerï¼ˆå¿…é¡»ä½¿ç”¨Seataï¼‰
- âœ… ä½¿ç”¨UnifiedCacheManagerå®ç°ä¸‰çº§ç¼“å­˜ï¼ˆL1æœ¬åœ°+L2Redis+L3ç½‘å…³ï¼‰
- âŒ ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰é‡è¯•é€»è¾‘ï¼ˆå¿…é¡»ä½¿ç”¨Resilience4jï¼‰
- âŒ ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰æŒ‡æ ‡æ”¶é›†å™¨ï¼ˆå¿…é¡»ä½¿ç”¨Micrometerï¼‰
- âŒ ç¦æ­¢é‡å¤å®ç°å·²æœ‰å·¥å…·ç±»åŠŸèƒ½ï¼ˆä¼˜å…ˆä½¿ç”¨Apache Commons/Guavaï¼‰

### æ€§èƒ½ä¼˜åŒ–è¿è§„

- âŒ ç¦æ­¢æ•°æ®åº“å…¨è¡¨æ‰«æ
- âŒ ç¦æ­¢æ·±åº¦åˆ†é¡µæŸ¥è¯¢ï¼ˆLIMIT 100000, 20ï¼‰
- âŒ ç¦æ­¢ä¸åˆç†çš„ç´¢å¼•ä½¿ç”¨
- âŒ ç¦æ­¢ç¼“å­˜é›ªå´©å’Œå‡»ç©¿é—®é¢˜
- âŒ ç¦æ­¢å†…å­˜æ³„æ¼å’Œèµ„æºæœªé‡Šæ”¾

### å®‰å…¨è®¾è®¡è¿è§„

- âŒ ç¦æ­¢æ˜æ–‡ä¼ è¾“æ•æ„Ÿæ•°æ®
- âŒ ç¦æ­¢æœªæˆæƒè®¿é—®æ¥å£
- âŒ ç¦æ­¢SQLæ³¨å…¥å’ŒXSSæ”»å‡»
- âŒ ç¦æ­¢æœªè„±æ•çš„æ•æ„Ÿæ•°æ®è¾“å‡º
- âŒ ç¦æ­¢ç¼ºå°‘å®¡è®¡æ—¥å¿—çš„æ“ä½œ

### ä¼ä¸šçº§ç‰¹æ€§è¿è§„

- âŒ ç¦æ­¢ç¼ºå°‘é™çº§ç†”æ–­æœºåˆ¶ï¼ˆå¿…é¡»ä½¿ç”¨Resilience4jï¼‰
- âŒ ç¦æ­¢ç¼ºå°‘åˆ†å¸ƒå¼äº‹åŠ¡è®¾è®¡ï¼ˆå¿…é¡»ä½¿ç”¨Seataï¼‰
- âŒ ç¦æ­¢ç¼ºå°‘ç›‘æ§å‘Šè­¦æœºåˆ¶ï¼ˆå¿…é¡»ä½¿ç”¨Micrometerï¼‰
- âŒ ç¦æ­¢ç¼ºå°‘å¹‚ç­‰æ€§è®¾è®¡
- âŒ ç¦æ­¢ç¼ºå°‘å¼‚æ­¥å¤„ç†æœºåˆ¶

---

## âœ… åˆè§„æ£€æŸ¥æ¸…å•

### ä»£ç å®ç°å‰æ£€æŸ¥ï¼ˆæ¶æ„è®¾è®¡é˜¶æ®µï¼‰

- [ ] ç¡®è®¤éµå¾ªå››å±‚æ¶æ„è§„èŒƒï¼ˆController â†’ Service â†’ Manager â†’ DAOï¼‰
- [ ] ç¡®è®¤ä½¿ç”¨ @Resource ä¾èµ–æ³¨å…¥
- [ ] ç¡®è®¤ä½¿ç”¨ Dao å‘½åè§„èŒƒï¼ˆ@Mapperæ³¨è§£ï¼‰
- [ ] ç¡®è®¤ä½¿ç”¨ Jakarta EE 3.0+ åŒ…å
- [ ] ç¡®è®¤æœåŠ¡è®¾è®¡ä¸ºæ— çŠ¶æ€
- [ ] ç¡®è®¤åˆ¶å®šå¤šçº§ç¼“å­˜ç­–ç•¥
- [ ] ç¡®è®¤è®¾è®¡SAGAåˆ†å¸ƒå¼äº‹åŠ¡
- [ ] ç¡®è®¤è§„åˆ’é™çº§ç†”æ–­æœºåˆ¶

### ä»£ç å®ç°åæ£€æŸ¥ï¼ˆä»£ç è´¨é‡é˜¶æ®µï¼‰

- [ ] æ— è·¨å±‚è®¿é—®é—®é¢˜ï¼ˆControllerä¸ç›´æ¥è°ƒç”¨Manager/DAOï¼‰
- [ ] æ—  Repository åç¼€ä½¿ç”¨ï¼ˆç»Ÿä¸€ä½¿ç”¨Daoï¼‰
- [ ] æ—  @Repository æ³¨è§£ä½¿ç”¨ï¼ˆç»Ÿä¸€ä½¿ç”¨@Mapperï¼‰
- [ ] æ—  @Autowired ä½¿ç”¨ï¼ˆç»Ÿä¸€ä½¿ç”¨@Resourceï¼‰
- [ ] äº‹åŠ¡æ³¨è§£ä½¿ç”¨æ­£ç¡®ï¼ˆ@Transactionalé…ç½®ï¼‰
- [ ] æ— ç¡¬ç¼–ç é…ç½®å€¼ï¼ˆä½¿ç”¨Nacosé…ç½®ä¸­å¿ƒï¼‰
- [ ] å¼‚å¸¸å¤„ç†å®Œå–„ï¼ŒåŒ…å«ä¸šåŠ¡å¼‚å¸¸å’Œç³»ç»Ÿå¼‚å¸¸
- [ ] æ—¥å¿—è®°å½•åˆç†ï¼ŒåŒ…å«å…³é”®æ“ä½œæ—¥å¿—
- [ ] å‚æ•°éªŒè¯å®Œæ•´ï¼ˆ@Validæ³¨è§£ä½¿ç”¨ï¼‰
- [ ] è¿”å›ç»“æœç»Ÿä¸€å°è£…ï¼ˆResponseDTOï¼‰

### ä¼ä¸šçº§ç‰¹æ€§æ£€æŸ¥ï¼ˆé«˜å¯ç”¨é˜¶æ®µï¼‰

- [ ] å®ç°å¤šçº§ç¼“å­˜æ¶æ„ï¼ˆL1æœ¬åœ° + L2Redis + L3ç½‘å…³ï¼‰
- [ ] å®ç°SAGAåˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†
- [ ] å®ç°æœåŠ¡é™çº§ç†”æ–­æœºåˆ¶ï¼ˆ@CircuitBreakerï¼‰
- [ ] å®ç°å¼‚æ­¥å¤„ç†æœºåˆ¶ï¼ˆ@Asyncã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰
- [ ] å®ç°ç›‘æ§å‘Šè­¦ä½“ç³»ï¼ˆMicrometerã€Prometheusï¼‰
- [ ] å®ç°å¹‚ç­‰æ€§è®¾è®¡ï¼ˆé˜²é‡å¤æäº¤ï¼‰
- [ ] å®ç°æ¥å£é™æµé˜²åˆ·ï¼ˆ@RateLimiterï¼‰

### æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥ï¼ˆæ€§èƒ½è°ƒä¼˜é˜¶æ®µï¼‰

- [ ] æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–ï¼ˆè¦†ç›–æ‰€æœ‰æŸ¥è¯¢æ¡ä»¶ï¼‰
- [ ] SQLæŸ¥è¯¢ä¼˜åŒ–ï¼ˆé¿å…å…¨è¡¨æ‰«æã€æ·±åº¦åˆ†é¡µï¼‰
- [ ] è¿æ¥æ± é…ç½®ä¼˜åŒ–ï¼ˆDruidå‚æ•°è°ƒä¼˜ï¼‰
- [ ] ç¼“å­˜æ€§èƒ½ä¼˜åŒ–ï¼ˆå‘½ä¸­ç‡ã€å‡»ç©¿é˜²æŠ¤ï¼‰
- [ ] JVMå‚æ•°è°ƒä¼˜ï¼ˆG1GCã€å†…å­˜é…ç½®ï¼‰
- [ ] çº¿ç¨‹æ± é…ç½®ä¼˜åŒ–ï¼ˆåˆç†é˜Ÿåˆ—å¤§å°ï¼‰

### å®‰å…¨è®¾è®¡æ£€æŸ¥ï¼ˆå®‰å…¨åˆè§„é˜¶æ®µï¼‰

- [ ] æ¥å£èº«ä»½è®¤è¯ï¼ˆJWT TokenéªŒè¯ï¼‰
- [ ] æ¥å£æƒé™æ ¡éªŒï¼ˆ@PreAuthorizeæ³¨è§£ï¼‰
- [ ] æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ï¼ˆAESåŠ å¯†ï¼‰
- [ ] æ•æ„Ÿæ•°æ®ä¼ è¾“åŠ å¯†ï¼ˆHTTPSï¼‰
- [ ] æ•æ„Ÿæ•°æ®è„±æ•è¾“å‡ºï¼ˆæ‰‹æœºå·ã€èº«ä»½è¯ç­‰ï¼‰
- [ ] SQLæ³¨å…¥é˜²æŠ¤ï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰
- [ ] XSSæ”»å‡»é˜²æŠ¤ï¼ˆè¾“å…¥éªŒè¯ã€è¾“å‡ºç¼–ç ï¼‰
- [ ] æ“ä½œå®¡è®¡æ—¥å¿—ï¼ˆæ•°æ®è®¿é—®è®°å½•ï¼‰

### å¾®æœåŠ¡é›†æˆæ£€æŸ¥ï¼ˆæœåŠ¡æ²»ç†é˜¶æ®µï¼‰

- [ ] æœåŠ¡é—´è°ƒç”¨ç¬¦åˆæ··åˆç­–ç•¥ï¼ˆé»˜è®¤GatewayServiceClientï¼›ç™½åå•çƒ­è·¯å¾„ç»Ÿä¸€ç›´è¿ Clientï¼‰
- [ ] æ— è·¨æœåŠ¡ç›´æ¥æ•°æ®åº“è®¿é—®
- [ ] ä½¿ç”¨ Nacos æ³¨å†Œå‘ç°ä¸­å¿ƒ
- [ ] ç«¯å£é…ç½®ç¬¦åˆæ ‡å‡†åˆ†é…è¡¨
- [ ] æœåŠ¡æ‹†åˆ†åˆç†ï¼ˆæŒ‰ä¸šåŠ¡èƒ½åŠ›åˆ’åˆ†ï¼‰
- [ ] æœåŠ¡é—´æ— å¾ªç¯ä¾èµ–
- [ ] æœåŠ¡é…ç½®ç»Ÿä¸€ç®¡ç†ï¼ˆNacos Configï¼‰

### éƒ¨ç½²è¿ç»´æ£€æŸ¥ï¼ˆDevOpsé˜¶æ®µï¼‰

- [ ] Dockeré•œåƒæ„å»ºè§„èŒƒ
- [ ] Kuberneteséƒ¨ç½²é…ç½®å®Œæ•´
- [ ] å¥åº·æ£€æŸ¥é…ç½®ï¼ˆ/actuator/healthï¼‰
- [ ] æ—¥å¿—è¾“å‡ºè§„èŒƒï¼ˆJSONæ ¼å¼ã€æ—¥å¿—çº§åˆ«ï¼‰
- [ ] ç›‘æ§æŒ‡æ ‡æš´éœ²ï¼ˆ/actuator/metricsï¼‰
- [ ] ç¯å¢ƒå˜é‡é…ç½®å®Œæ•´
- [ ] å¯åŠ¨è„šæœ¬ä¼˜åŒ–ï¼ˆJVMå‚æ•°ã€å†…å­˜é…ç½®ï¼‰

### æ–‡æ¡£è§„èŒƒæ£€æŸ¥ï¼ˆçŸ¥è¯†ç®¡ç†é˜¶æ®µï¼‰

- [ ] APIæ¥å£æ–‡æ¡£å®Œæ•´ï¼ˆSwagger/Knife4jï¼‰
- [ ] æ¶æ„è®¾è®¡æ–‡æ¡£é½å…¨
- [ ] æ•°æ®åº“è®¾è®¡æ–‡æ¡£æ¸…æ™°
- [ ] éƒ¨ç½²è¿ç»´æ–‡æ¡£è¯¦ç»†
- [ ] æ•…éšœæ’æŸ¥æ‰‹å†Œå®Œå–„
- [ ] æ€§èƒ½æµ‹è¯•æŠ¥å‘Šå……åˆ†

### è´¨é‡ä¿éšœæ£€æŸ¥ï¼ˆæµ‹è¯•é˜¶æ®µï¼‰

- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- [ ] é›†æˆæµ‹è¯•åœºæ™¯å®Œæ•´
- [ ] æ¥å£æµ‹è¯•è‡ªåŠ¨åŒ–
- [ ] æ€§èƒ½å‹æµ‹è¾¾æ ‡
- [ ] å®‰å…¨æµ‹è¯•é€šè¿‡
- [ ] ä»£ç è´¨é‡æ‰«æé€šè¿‡ï¼ˆSonarQubeï¼‰
