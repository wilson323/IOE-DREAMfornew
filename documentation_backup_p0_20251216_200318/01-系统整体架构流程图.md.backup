# ZKBioSecurity-ACC门禁系统 - 系统整体架构流程图

## 系统整体架构流程图

```mermaid
graph TB
    A[用户登录] --> B[系统主界面]
    B --> C[设备管理模块]
    B --> D[区域空间管理模块]
    B --> E[实时监控模块]
    B --> F[事件记录查询模块]
    B --> G[审批流程管理模块]
    B --> H[系统配置模块]
    B --> I[高级功能模块]

    C --> C1[设备管理]
    C --> C2[门管理]
    C --> C3[读头管理]
    C --> C4[I/O扩展板管理]

    D --> D1[区域创建]
    D --> D2[人员权限分配]
    D --> D3[设备分配]
    D --> D4[占用监控]

    E --> E1[实时状态监控]
    E --> E2[报警处理]
    E --> E3[视频联动]
    E --> E4[人员追踪]

    F --> F1[事件查询]
    F --> F2[异常事件处理]
    F --> F3[统计报表生成]

    G --> G1[权限申请]
    G --> G2[访客预约]
    G --> G3[紧急权限处理]
    G --> G4[审批流程配置]

    H --> H1[系统参数配置]
    H --> H2[用户权限管理]
    H --> H3[许可证管理]
    H --> H4[备份恢复]

    I --> I1[全局反潜]
    I --> I2[全局联动]
    I --> I3[全局互锁]
    I --> I4[疏散点管理]
    I --> I5[人数控制]
    I --> I6[人员限制]

    C -.->|设备状态| E
    C -.->|设备配置| D
    D -.->|区域权限| C
    D -.->|占用数据| E
    E -.->|事件数据| F
    E -.->|报警事件| G
    G -.->|权限数据| D
    H -.->|系统配置| A
    I -.->|高级规则| C
    I -.->|高级规则| E
```

## 说明
## 📋 IOE-DREAM七微服务架构

**核心架构组成**:
- **Gateway Service (8080)**: API网关
- **Common Service (8088)**: 公共模块微服务
- **DeviceComm Service (8087)**: 设备通讯微服务
- **OA Service (8089)**: OA微服务
- **Access Service (8090)**: 门禁服务
- **Attendance Service (8091)**: 考勤服务
- **Video Service (8092)**: 视频服务
- **Consume Service (8094)**: 消费服务
- **Visitor Service (8095)**: 访客服务

**架构特点**:
- 基于Spring Boot 3.5.8 + Java 17
- 严格遵循企业级微服务规范
- 支持高并发、高可用、水平扩展

**技术栈标准**:
- **数据库**: MySQL 8.0 + Druid连接池
- **缓存**: Redis + Caffeine多级缓存
- **注册中心**: Nacos
- **配置中心**: Nacos Config
- **认证授权**: Sa-Token

## 🏗️ 四层架构规范

**标准架构模式**:
```
Controller (接口控制层)
    ↓
Service (核心业务层)
    ↓
Manager (流程管理层)
    ↓
DAO (数据访问层)
```

**层级职责**:
- **Controller层**: HTTP请求处理、参数验证、权限控制
- **Service层**: 核心业务逻辑、事务管理、业务规则验证
- **Manager层**: 复杂流程编排、多数据组装、第三方服务集成
- **DAO层**: 数据库CRUD操作、SQL查询实现、数据访问边界

**严格禁止跨层访问**: Controller不能直接调用Manager/DAO！
本流程图展示了ZKBioSecurity-ACC门禁系统的整体架构，包含七大核心模块及其相互关系：
## ⚠️ IOE-DREAM零容忍规则（强制执行）

**必须遵守的架构规则**:
- ✅ **必须使用 @Resource 注入依赖**
- ✅ **必须使用 @Mapper 注解** (禁止@Repository)
- ✅ **必须使用 Dao 后缀** (禁止Repository)
- ✅ **必须使用 @RestController 注解**
- ✅ **必须使用 @Valid 参数校验**
- ✅ **必须返回统一ResponseDTO格式**
- ✅ **必须遵循四层架构边界**

**严格禁止事项**:
- ❌ **禁止使用 @Autowired 注入**
- ❌ **禁止使用 @Repository 注解**
- ❌ **禁止使用 Repository 后缀命名**
- ❌ **禁止跨层访问**
- ❌ **禁止在Controller中包含业务逻辑**
- ❌ **禁止直接访问数据库**

**违规后果**: P0级问题，立即修复，禁止合并！

- **设备管理模块**：负责设备、门、读头、I/O扩展板的管理
- **区域空间管理模块**：处理区域创建、权限分配、设备分配和占用监控
- **实时监控模块**：提供实时状态监控、报警处理、视频联动和人员追踪
- **事件记录查询模块**：处理事件查询、异常处理和统计报表
- **审批流程管理模块**：管理权限申请、访客预约、紧急权限和流程配置
- **系统配置模块**：负责系统参数、用户权限、许可证和备份恢复
- **高级功能模块**：提供反潜、联动、互锁、疏散、容量控制和人员限制等高级功能

虚线箭头表示模块间的数据流和关联关系。