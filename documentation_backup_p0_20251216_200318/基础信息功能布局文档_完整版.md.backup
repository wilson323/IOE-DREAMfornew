# åŸºç¡€ä¿¡æ¯åŠŸèƒ½å¸ƒå±€æ–‡æ¡£ - å®Œæ•´ç‰ˆ

## åŠŸèƒ½æ¦‚è¿°

åŸºç¡€ä¿¡æ¯ç®¡ç†æ¨¡å—æ˜¯è€ƒå‹¤ç®¡ç†ç³»ç»Ÿçš„åŸºç¡€æ•°æ®æ”¯æ’‘ï¼Œè´Ÿè´£ç®¡ç†ç»„ç»‡æ¶æ„ã€å‘˜å·¥æ¡£æ¡ˆã€ç”¨æˆ·æƒé™ç­‰æ ¸å¿ƒåŸºç¡€æ•°æ®ã€‚è¯¥æ¨¡å—æä¾›å®Œæ•´çš„ç»„ç»‡æ ‘ç®¡ç†ã€å‘˜å·¥å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ç”¨æˆ·æƒé™åˆ†é…ç­‰åŠŸèƒ½ï¼Œä¸ºå…¶ä»–ä¸šåŠ¡æ¨¡å—æä¾›åŸºç¡€æ•°æ®æ”¯æ’‘ã€‚

## æŠ€æœ¯æ¶æ„è§„èŒƒ

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ ¸å¿ƒæ¡†æ¶**: Vue 3.4.27 (Composition API)
- **UIç»„ä»¶åº“**: Ant Design Vue 4.2.5
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.7
- **è·¯ç”±ç®¡ç†**: Vue Router 4.3.2
- **HTTPå®¢æˆ·ç«¯**: Axios 1.6.8
- **æ ·å¼é¢„å¤„ç†å™¨**: Less 4.2.0
- **å›¾æ ‡åº“**: @ant-design/icons-vue
- **è¡¨å•éªŒè¯**: VeeValidate 4.x

### é¡¹ç›®æ–‡ä»¶ç»„ç»‡ç»“æ„
```
src/views/business/attendance/basic-info/
â”œâ”€â”€ index.vue                        # åŸºç¡€ä¿¡æ¯ä¸»é¡µé¢
â”œâ”€â”€ organization/
â”‚   â”œâ”€â”€ index.vue                   # ç»„ç»‡æ¶æ„ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ OrgTree.vue            # ç»„ç»‡æ ‘ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DeptForm.vue           # éƒ¨é—¨è¡¨å•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PositionForm.vue       # å²—ä½è¡¨å•ç»„ä»¶
â”‚   â”‚   â””â”€â”€ LevelForm.vue          # èŒçº§è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ organization-api.js     # ç»„ç»‡æ¶æ„API
â”œâ”€â”€ employee/
â”‚   â”œâ”€â”€ index.vue                   # å‘˜å·¥ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ EmployeeTable.vue      # å‘˜å·¥è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ EmployeeForm.vue       # å‘˜å·¥è¡¨å•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ImportModal.vue        # æ‰¹é‡å¯¼å…¥ç»„ä»¶
â”‚   â”‚   â””â”€â”€ PermissionModal.vue    # æƒé™åˆ†é…ç»„ä»¶
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ employee-api.js         # å‘˜å·¥ç®¡ç†API
â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ index.vue                   # ç”¨æˆ·ç®¡ç†é¡µé¢ [ç³»ç»Ÿç®¡ç†å‘˜]
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ UserTable.vue          # ç”¨æˆ·è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ UserForm.vue           # ç”¨æˆ·è¡¨å•ç»„ä»¶
â”‚   â”‚   â””â”€â”€ RoleAssign.vue         # è§’è‰²åˆ†é…ç»„ä»¶
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ user-api.js             # ç”¨æˆ·ç®¡ç†API
â”œâ”€â”€ mock/
â”‚   â””â”€â”€ basic-info-mock.js          # æ¨¡æ‹Ÿæ•°æ®
â”œâ”€â”€ api/
â”‚   â””â”€â”€ basic-info-api.js            # ç»Ÿä¸€APIæ¥å£
â””â”€â”€ utils/
    â”œâ”€â”€ org-utils.js                # ç»„ç»‡æ¶æ„å·¥å…·å‡½æ•°
    â””â”€â”€ import-utils.js             # å¯¼å…¥å·¥å…·å‡½æ•°
```

### APIæ¥å£è®¾è®¡
```javascript
// src/api/business/attendance/basic-info/organization-api.js
import { postRequest, getRequest, putRequest, deleteRequest } from '/@/lib/axios';

export const organizationApi = {
  // éƒ¨é—¨ç®¡ç†
  getDeptList: () => getRequest('/attendance/organization/dept/list'),
  getDeptTree: () => getRequest('/attendance/organization/dept/tree'),
  getDeptById: (id) => getRequest(`/attendance/organization/dept/${id}`),
  createDept: (params) => postRequest('/attendance/organization/dept/create', params),
  updateDept: (id, params) => putRequest(`/attendance/organization/dept/update/${id}`, params),
  deleteDept: (id) => deleteRequest(`/attendance/organization/dept/delete/${id}`),

  // å²—ä½ç®¡ç†
  getPositionList: (params) => getRequest('/attendance/organization/position/list', params),
  createPosition: (params) => postRequest('/attendance/organization/position/create', params),
  updatePosition: (id, params) => putRequest(`/attendance/organization/position/update/${id}`, params),
  deletePosition: (id) => deleteRequest(`/attendance/organization/position/delete/${id}`),

  // èŒçº§ç®¡ç†
  getLevelList: (params) => getRequest('/attendance/organization/level/list', params),
  createLevel: (params) => postRequest('/attendance/organization/level/create', params),
  updateLevel: (id, params) => putRequest(`/attendance/organization/level/update/${id}`, params),
  deleteLevel: (id) => deleteRequest(`/attendance/organization/level/delete/${id}`),
};

// src/api/business/attendance/basic-info/employee-api.js
export const employeeApi = {
  // å‘˜å·¥ç®¡ç†
  getEmployeeList: (params) => getRequest('/attendance/employee/list', params),
  getEmployeeById: (id) => getRequest(`/attendance/employee/${id}`),
  createEmployee: (params) => postRequest('/attendance/employee/create', params),
  updateEmployee: (id, params) => putRequest(`/attendance/employee/update/${id}`, params),
  deleteEmployee: (id) => deleteRequest(`/attendance/employee/delete/${id}`),
  importEmployees: (formData) => postRequest('/attendance/employee/import', formData),
  downloadTemplate: () => getRequest('/attendance/employee/template'),

  // æƒé™ç®¡ç†
  getEmployeePermissions: (id) => getRequest(`/attendance/employee/${id}/permissions`),
  updateEmployeePermissions: (id, params) => putRequest(`/attendance/employee/${id}/permissions`, params),
};

// src/api/business/attendance/basic-info/user-api.js
export const userApi = {
  // ç”¨æˆ·ç®¡ç†
  getUserList: (params) => getRequest('/attendance/user/list', params),
  getUserById: (id) => getRequest(`/attendance/user/${id}`),
  createUser: (params) => postRequest('/attendance/user/create', params),
  updateUser: (id, params) => putRequest(`/attendance/user/update/${id}`, params),
  deleteUser: (id) => deleteRequest(`/attendance/user/delete/${id}`),
  resetPassword: (id) => postRequest(`/attendance/user/${id}/reset-password`),
  updateUserStatus: (id, status) => putRequest(`/attendance/user/${id}/status`, { status }),

  // è§’è‰²ç®¡ç†
  getRoleList: () => getRequest('/attendance/user/roles'),
  assignRole: (userId, roleIds) => postRequest('/attendance/user/assign-role', { userId, roleIds }),
};
```

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
## ğŸ“‹ IOE-DREAMä¸ƒå¾®æœåŠ¡æ¶æ„

**æ ¸å¿ƒæ¶æ„ç»„æˆ**:
- **Gateway Service (8080)**: APIç½‘å…³
- **Common Service (8088)**: å…¬å…±æ¨¡å—å¾®æœåŠ¡
- **DeviceComm Service (8087)**: è®¾å¤‡é€šè®¯å¾®æœåŠ¡
- **OA Service (8089)**: OAå¾®æœåŠ¡
- **Access Service (8090)**: é—¨ç¦æœåŠ¡
- **Attendance Service (8091)**: è€ƒå‹¤æœåŠ¡
- **Video Service (8092)**: è§†é¢‘æœåŠ¡
- **Consume Service (8094)**: æ¶ˆè´¹æœåŠ¡
- **Visitor Service (8095)**: è®¿å®¢æœåŠ¡

**æ¶æ„ç‰¹ç‚¹**:
- åŸºäºSpring Boot 3.5.8 + Java 17
- ä¸¥æ ¼éµå¾ªä¼ä¸šçº§å¾®æœåŠ¡è§„èŒƒ
- æ”¯æŒé«˜å¹¶å‘ã€é«˜å¯ç”¨ã€æ°´å¹³æ‰©å±•

**æŠ€æœ¯æ ˆæ ‡å‡†**:
- **æ•°æ®åº“**: MySQL 8.0 + Druidè¿æ¥æ± 
- **ç¼“å­˜**: Redis + Caffeineå¤šçº§ç¼“å­˜
- **æ³¨å†Œä¸­å¿ƒ**: Nacos
- **é…ç½®ä¸­å¿ƒ**: Nacos Config
- **è®¤è¯æˆæƒ**: Sa-Token

## ğŸ—ï¸ å››å±‚æ¶æ„è§„èŒƒ

**æ ‡å‡†æ¶æ„æ¨¡å¼**:
```
Controller (æ¥å£æ§åˆ¶å±‚)
    â†“
Service (æ ¸å¿ƒä¸šåŠ¡å±‚)
    â†“
Manager (æµç¨‹ç®¡ç†å±‚)
    â†“
DAO (æ•°æ®è®¿é—®å±‚)
```

**å±‚çº§èŒè´£**:
- **Controllerå±‚**: HTTPè¯·æ±‚å¤„ç†ã€å‚æ•°éªŒè¯ã€æƒé™æ§åˆ¶
- **Serviceå±‚**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†ã€ä¸šåŠ¡è§„åˆ™éªŒè¯
- **Managerå±‚**: å¤æ‚æµç¨‹ç¼–æ’ã€å¤šæ•°æ®ç»„è£…ã€ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- **DAOå±‚**: æ•°æ®åº“CRUDæ“ä½œã€SQLæŸ¥è¯¢å®ç°ã€æ•°æ®è®¿é—®è¾¹ç•Œ

**ä¸¥æ ¼ç¦æ­¢è·¨å±‚è®¿é—®**: Controllerä¸èƒ½ç›´æ¥è°ƒç”¨Manager/DAOï¼
### 1. ç»„ç»‡æ¶æ„ç®¡ç†
## âš ï¸ IOE-DREAMé›¶å®¹å¿è§„åˆ™ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¿…é¡»éµå®ˆçš„æ¶æ„è§„åˆ™**:
- âœ… **å¿…é¡»ä½¿ç”¨ @Resource æ³¨å…¥ä¾èµ–**
- âœ… **å¿…é¡»ä½¿ç”¨ @Mapper æ³¨è§£** (ç¦æ­¢@Repository)
- âœ… **å¿…é¡»ä½¿ç”¨ Dao åç¼€** (ç¦æ­¢Repository)
- âœ… **å¿…é¡»ä½¿ç”¨ @RestController æ³¨è§£**
- âœ… **å¿…é¡»ä½¿ç”¨ @Valid å‚æ•°æ ¡éªŒ**
- âœ… **å¿…é¡»è¿”å›ç»Ÿä¸€ResponseDTOæ ¼å¼**
- âœ… **å¿…é¡»éµå¾ªå››å±‚æ¶æ„è¾¹ç•Œ**

**ä¸¥æ ¼ç¦æ­¢äº‹é¡¹**:
- âŒ **ç¦æ­¢ä½¿ç”¨ @Autowired æ³¨å…¥**
- âŒ **ç¦æ­¢ä½¿ç”¨ @Repository æ³¨è§£**
- âŒ **ç¦æ­¢ä½¿ç”¨ Repository åç¼€å‘½å**
- âŒ **ç¦æ­¢è·¨å±‚è®¿é—®**
- âŒ **ç¦æ­¢åœ¨Controllerä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘**
- âŒ **ç¦æ­¢ç›´æ¥è®¿é—®æ•°æ®åº“**

**è¿è§„åæœ**: P0çº§é—®é¢˜ï¼Œç«‹å³ä¿®å¤ï¼Œç¦æ­¢åˆå¹¶ï¼

#### ç»„ç»‡æ ‘ç»„ä»¶
```vue
<!-- src/views/business/attendance/basic-info/organization/components/OrgTree.vue -->
<template>
  <div class="org-tree">
    <div class="tree-header">
      <h3>ç»„ç»‡æ¶æ„</h3>
      <div class="tree-actions">
        <a-button size="small" type="primary" @click="handleAddDept">
          <template #icon><PlusOutlined /></template>
          æ–°å¢éƒ¨é—¨
        </a-button>
        <a-button size="small" @click="handleExpandAll">
          <template #icon><ExpandOutlined /></template>
          å…¨éƒ¨å±•å¼€
        </a-button>
        <a-button size="small" @click="handleCollapseAll">
          <template #icon><CompressOutlined /></template>
          å…¨éƒ¨æ”¶èµ·
        </a-button>
      </div>
    </div>

    <a-tree
      v-model:expandedKeys="expandedKeys"
      v-model:selectedKeys="selectedKeys"
      :tree-data="treeData"
      :field-names="{ title: 'name', key: 'id', children: 'children' }"
      show-icon
      @select="handleTreeSelect"
      @right-click="handleRightClick"
    >
      <template #icon="{ dataRef }">
        <HomeOutlined v-if="dataRef.type === 'company'" />
        <BankOutlined v-else-if="dataRef.type === 'dept'" />
        <TeamOutlined v-else />
      </template>

      <template #title="{ name, code, employeeCount }">
        <div class="tree-node-title">
          <span class="node-name">{{ name }}</span>
          <span class="node-code" v-if="code">({{ code }})</span>
          <span class="node-count" v-if="employeeCount">{{ employeeCount }}äºº</span>
        </div>
      </template>
    </a-tree>

    <!-- å³é”®èœå• -->
    <div
      v-if="contextMenuVisible"
      class="context-menu"
      :style="{ left: contextMenuX + 'px', top: contextMenuY + 'px' }"
    >
      <div class="menu-item" @click="handleAddDept">
        <PlusOutlined />
        æ–°å¢å­éƒ¨é—¨
      </div>
      <div class="menu-item" @click="handleEditDept">
        <EditOutlined />
        ç¼–è¾‘éƒ¨é—¨
      </div>
      <div class="menu-item danger" @click="handleDeleteDept">
        <DeleteOutlined />
        åˆ é™¤éƒ¨é—¨
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted } from 'vue';
import { message } from 'ant-design-vue';
import {
  PlusOutlined,
  ExpandOutlined,
  CompressOutlined,
  HomeOutlined,
  BankOutlined,
  TeamOutlined,
  EditOutlined,
  DeleteOutlined
} from '@ant-design/icons-vue';
import { organizationApi } from '/@/api/business/attendance/basic-info/organization-api';

const emit = defineEmits(['dept-select', 'dept-add', 'dept-edit', 'dept-delete']);

const expandedKeys = ref([]);
const selectedKeys = ref([]);
const treeData = ref([]);
const contextMenuVisible = ref(false);
const contextMenuX = ref(0);
const contextMenuY = ref(0);
const currentNode = ref(null);

// åŠ è½½ç»„ç»‡æ ‘æ•°æ®
const loadOrgTree = async () => {
  try {
    const response = await organizationApi.getDeptTree();
    treeData.value = formatTreeData(response.data);
    // é»˜è®¤å±•å¼€åˆ°äºŒçº§
    expandedKeys.value = getExpandedKeys(treeData.value, 2);
  } catch (error) {
    console.error('åŠ è½½ç»„ç»‡æ ‘å¤±è´¥:', error);
    message.error('åŠ è½½ç»„ç»‡æ ‘å¤±è´¥');
  }
};

// æ ¼å¼åŒ–æ ‘æ•°æ®
const formatTreeData = (data) => {
  return data.map(item => ({
    ...item,
    type: item.level === 0 ? 'company' : 'dept',
    children: item.children ? formatTreeData(item.children) : []
  }));
};

// è·å–å±•å¼€çš„èŠ‚ç‚¹
const getExpandedKeys = (data, level) => {
  const keys = [];
  const traverse = (nodes, currentLevel) => {
    if (currentLevel < level) {
      nodes.forEach(node => {
        keys.push(node.id);
        if (node.children && node.children.length > 0) {
          traverse(node.children, currentLevel + 1);
        }
      });
    }
  };
  traverse(data, 0);
  return keys;
};

// æ ‘èŠ‚ç‚¹é€‰æ‹©
const handleTreeSelect = (selectedKeys, { node }) => {
  emit('dept-select', node);
};

// å³é”®èœå•
const handleRightClick = ({ event, node }) => {
  event.preventDefault();
  currentNode.value = node;
  contextMenuVisible.value = true;
  contextMenuX.value = event.clientX;
  contextMenuY.value = event.clientY;

  setTimeout(() => {
    document.addEventListener('click', () => {
      contextMenuVisible.value = false;
    }, { once: true });
  }, 100);
};

// æ–°å¢éƒ¨é—¨
const handleAddDept = () => {
  contextMenuVisible.value = false;
  const parentDept = currentNode.value || null;
  emit('dept-add', parentDept);
};

// ç¼–è¾‘éƒ¨é—¨
const handleEditDept = () => {
  contextMenuVisible.value = false;
  if (currentNode.value) {
    emit('dept-edit', currentNode.value);
  }
};

// åˆ é™¤éƒ¨é—¨
const handleDeleteDept = () => {
  contextMenuVisible.value = false;
  if (currentNode.value) {
    emit('dept-delete', currentNode.value);
  }
};

// å…¨éƒ¨å±•å¼€
const handleExpandAll = () => {
  const getAllKeys = (data) => {
    const keys = [];
    data.forEach(node => {
      keys.push(node.id);
      if (node.children && node.children.length > 0) {
        keys.push(...getAllKeys(node.children));
      }
    });
    return keys;
  };
  expandedKeys.value = getAllKeys(treeData.value);
};

// å…¨éƒ¨æ”¶èµ·
const handleCollapseAll = () => {
  expandedKeys.value = [];
};

onMounted(() => {
  loadOrgTree();
});
</script>

<style scoped lang="less">
.org-tree {
  height: 100%;
  background: #fff;
  border-radius: 8px;
  padding: 16px;

  .tree-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;

    h3 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
    }

    .tree-actions {
      display: flex;
      gap: 8px;
    }
  }

  .tree-node-title {
    display: flex;
    align-items: center;
    gap: 8px;

    .node-name {
      font-weight: 500;
    }

    .node-code {
      color: #999;
      font-size: 12px;
    }

    .node-count {
      color: #1890ff;
      font-size: 12px;
      background: #e6f7ff;
      padding: 2px 6px;
      border-radius: 4px;
    }
  }

  .context-menu {
    position: fixed;
    background: #fff;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    padding: 4px 0;
    z-index: 1000;
    min-width: 120px;

    .menu-item {
      padding: 8px 16px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;

      &:hover {
        background: #f5f5f5;
      }

      &.danger {
        color: #ff4d4f;

        &:hover {
          background: #fff2f0;
        }
      }
    }
  }
}
</style>
```

#### éƒ¨é—¨è¡¨å•ç»„ä»¶
```vue
<!-- src/views/business/attendance/basic-info/organization/components/DeptForm.vue -->
<template>
  <a-modal
    :open="visible"
    :title="isEdit ? 'ç¼–è¾‘éƒ¨é—¨' : 'æ–°å¢éƒ¨é—¨'"
    @ok="handleSubmit"
    @cancel="handleCancel"
    :confirm-loading="loading"
    width="600px"
  >
    <a-form
      ref="formRef"
      :model="formData"
      :rules="formRules"
      :label-col="{ span: 6 }"
      :wrapper-col="{ span: 18 }"
    >
      <a-form-item label="ä¸Šçº§éƒ¨é—¨" name="parentId" v-if="parentDept">
        <a-input :value="parentDept.name" disabled />
      </a-form-item>

      <a-form-item label="éƒ¨é—¨åç§°" name="name">
        <a-input v-model:value="formData.name" placeholder="è¯·è¾“å…¥éƒ¨é—¨åç§°" />
      </a-form-item>

      <a-form-item label="éƒ¨é—¨ç¼–ç " name="code">
        <a-input v-model:value="formData.code" placeholder="è¯·è¾“å…¥éƒ¨é—¨ç¼–ç " />
      </a-form-item>

      <a-form-item label="éƒ¨é—¨ç±»å‹" name="type">
        <a-select v-model:value="formData.type" placeholder="è¯·é€‰æ‹©éƒ¨é—¨ç±»å‹">
          <a-select-option value="company">å…¬å¸</a-select-option>
          <a-select-option value="dept">éƒ¨é—¨</a-select-option>
          <a-select-option value="team">å°ç»„</a-select-option>
        </a-select>
      </a-form-item>

      <a-form-item label="è´Ÿè´£äºº" name="managerId">
        <a-select
          v-model:value="formData.managerId"
          placeholder="è¯·é€‰æ‹©è´Ÿè´£äºº"
          show-search
          :filter-option="filterEmployeeOption"
        >
          <a-select-option
            v-for="employee in employeeList"
            :key="employee.id"
            :value="employee.id"
          >
            {{ employee.name }} - {{ employee.position }}
          </a-select-option>
        </a-select>
      </a-form-item>

      <a-form-item label="è”ç³»ç”µè¯" name="phone">
        <a-input v-model:value="formData.phone" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯" />
      </a-form-item>

      <a-form-item label="éƒ¨é—¨åœ°å€" name="address">
        <a-textarea v-model:value="formData.address" placeholder="è¯·è¾“å…¥éƒ¨é—¨åœ°å€" :rows="2" />
      </a-form-item>

      <a-form-item label="æè¿°" name="description">
        <a-textarea v-model:value="formData.description" placeholder="è¯·è¾“å…¥éƒ¨é—¨æè¿°" :rows="3" />
      </a-form-item>

      <a-form-item label="çŠ¶æ€" name="status">
        <a-radio-group v-model:value="formData.status">
          <a-radio value="active">å¯ç”¨</a-radio>
          <a-radio value="inactive">åœç”¨</a-radio>
        </a-radio-group>
      </a-form-item>
    </a-form>
  </a-modal>
</template>

<script setup>
import { ref, reactive, computed, watch } from 'vue';
import { message } from 'ant-design-vue';
import { organizationApi } from '/@/api/business/attendance/basic-info/organization-api';
import { employeeApi } from '/@/api/business/attendance/basic-info/employee-api';

const props = defineProps({
  visible: Boolean,
  isEdit: Boolean,
  deptData: Object,
  parentDept: Object,
});

const emit = defineEmits(['update:visible', 'success']);

const formRef = ref();
const loading = ref(false);
const employeeList = ref([]);

const formData = reactive({
  parentId: '',
  name: '',
  code: '',
  type: 'dept',
  managerId: '',
  phone: '',
  address: '',
  description: '',
  status: 'active',
});

const formRules = {
  name: [
    { required: true, message: 'è¯·è¾“å…¥éƒ¨é—¨åç§°', trigger: 'blur' },
    { max: 50, message: 'éƒ¨é—¨åç§°ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦', trigger: 'blur' }
  ],
  code: [
    { required: true, message: 'è¯·è¾“å…¥éƒ¨é—¨ç¼–ç ', trigger: 'blur' },
    { pattern: /^[A-Z0-9_-]+$/, message: 'éƒ¨é—¨ç¼–ç åªèƒ½åŒ…å«å¤§å†™å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œæ¨ªçº¿', trigger: 'blur' }
  ],
  type: [
    { required: true, message: 'è¯·é€‰æ‹©éƒ¨é—¨ç±»å‹', trigger: 'change' }
  ],
  phone: [
    { pattern: /^1[3-9]\d{9}$/, message: 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ', trigger: 'blur' }
  ]
};

// ç›‘å¬propså˜åŒ–
watch(() => props.visible, (visible) => {
  if (visible) {
    initForm();
  }
});

// åˆå§‹åŒ–è¡¨å•
const initForm = () => {
  if (props.isEdit && props.deptData) {
    Object.assign(formData, props.deptData);
  } else {
    resetForm();
    if (props.parentDept) {
      formData.parentId = props.parentDept.id;
    }
  }
  loadEmployeeList();
};

// é‡ç½®è¡¨å•
const resetForm = () => {
  Object.assign(formData, {
    parentId: '',
    name: '',
    code: '',
    type: 'dept',
    managerId: '',
    phone: '',
    address: '',
    description: '',
    status: 'active',
  });
};

// åŠ è½½å‘˜å·¥åˆ—è¡¨
const loadEmployeeList = async () => {
  try {
    const response = await employeeApi.getEmployeeList({ pageSize: 1000 });
    employeeList.value = response.data.records;
  } catch (error) {
    console.error('åŠ è½½å‘˜å·¥åˆ—è¡¨å¤±è´¥:', error);
  }
};

// è¿‡æ»¤å‘˜å·¥é€‰é¡¹
const filterEmployeeOption = (input, option) => {
  const employee = employeeList.value.find(emp => emp.id === option.value);
  return employee && (
    employee.name.toLowerCase().includes(input.toLowerCase()) ||
    employee.position.toLowerCase().includes(input.toLowerCase())
  );
};

// æäº¤è¡¨å•
const handleSubmit = async () => {
  try {
    await formRef.value.validate();
    loading.value = true;

    if (props.isEdit) {
      await organizationApi.updateDept(props.deptData.id, formData);
      message.success('éƒ¨é—¨æ›´æ–°æˆåŠŸ');
    } else {
      await organizationApi.createDept(formData);
      message.success('éƒ¨é—¨åˆ›å»ºæˆåŠŸ');
    }

    emit('success');
    handleCancel();
  } catch (error) {
    if (error.errorFields) {
      message.error('è¯·æ£€æŸ¥è¡¨å•å¡«å†™æ˜¯å¦æ­£ç¡®');
    } else {
      message.error(props.isEdit ? 'éƒ¨é—¨æ›´æ–°å¤±è´¥' : 'éƒ¨é—¨åˆ›å»ºå¤±è´¥');
    }
  } finally {
    loading.value = false;
  }
};

// å–æ¶ˆ
const handleCancel = () => {
  emit('update:visible', false);
  formRef.value?.resetFields();
};
</script>
```

### 2. å‘˜å·¥ç®¡ç†

#### å‘˜å·¥è¡¨æ ¼ç»„ä»¶
```vue
<!-- src/views/business/attendance/basic-info/employee/components/EmployeeTable.vue -->
<template>
  <div class="employee-table">
    <!-- æœç´¢å·¥å…·æ  -->
    <div class="table-toolbar">
      <a-form layout="inline" :model="searchForm" @finish="handleSearch">
        <a-form-item label="å§“å">
          <a-input v-model:value="searchForm.name" placeholder="è¯·è¾“å…¥å§“å" allow-clear />
        </a-form-item>
        <a-form-item label="å·¥å·">
          <a-input v-model:value="searchForm.employeeNo" placeholder="è¯·è¾“å…¥å·¥å·" allow-clear />
        </a-form-item>
        <a-form-item label="éƒ¨é—¨">
          <a-tree-select
            v-model:value="searchForm.deptId"
            :tree-data="deptTreeData"
            placeholder="è¯·é€‰æ‹©éƒ¨é—¨"
            allow-clear
            tree-default-expand-all
          />
        </a-form-item>
        <a-form-item label="çŠ¶æ€">
          <a-select v-model:value="searchForm.status" placeholder="è¯·é€‰æ‹©çŠ¶æ€" allow-clear>
            <a-select-option value="active">åœ¨èŒ</a-select-option>
            <a-select-option value="inactive">ç¦»èŒ</a-select-option>
            <a-select-option value="pending">å¾…å…¥èŒ</a-select-option>
          </a-select>
        </a-form-item>
        <a-form-item>
          <a-button type="primary" html-type="submit" :loading="loading">
            <template #icon><SearchOutlined /></template>
            æœç´¢
          </a-button>
          <a-button @click="handleReset">
            <template #icon><ReloadOutlined /></template>
            é‡ç½®
          </a-button>
        </a-form-item>
      </a-form>
    </div>

    <!-- æ“ä½œå·¥å…·æ  -->
    <div class="table-actions">
      <div class="actions-left">
        <a-button type="primary" @click="handleAdd">
          <template #icon><PlusOutlined /></template>
          æ–°å¢å‘˜å·¥
        </a-button>
        <a-button @click="handleImport">
          <template #icon><UploadOutlined /></template>
          æ‰¹é‡å¯¼å…¥
        </a-button>
        <a-button @click="handleDownloadTemplate">
          <template #icon><DownloadOutlined /></template>
          ä¸‹è½½æ¨¡æ¿
        </a-button>
      </div>
      <div class="actions-right">
        <a-button @click="handleRefresh" :loading="loading">
          <template #icon><ReloadOutlined /></template>
          åˆ·æ–°
        </a-button>
      </div>
    </div>

    <!-- æ•°æ®è¡¨æ ¼ -->
    <a-table
      :columns="columns"
      :data-source="dataSource"
      :loading="loading"
      :pagination="pagination"
      :row-selection="rowSelection"
      row-key="id"
      @change="handleTableChange"
    >
      <template #bodyCell="{ column, record }">
        <template v-if="column.key === 'avatar'">
          <a-avatar :src="record.avatar" :alt="record.name">
            {{ record.name?.charAt(0) }}
          </a-avatar>
        </template>

        <template v-else-if="column.key === 'deptName'">
          <a-tag color="blue">{{ record.deptName }}</a-tag>
        </template>

        <template v-else-if="column.key === 'status'">
          <a-badge :status="getStatusBadge(record.status)" :text="getStatusText(record.status)" />
        </template>

        <template v-else-if="column.key === 'action'">
          <a-space>
            <a-button type="link" size="small" @click="handleView(record)">æŸ¥çœ‹</a-button>
            <a-button type="link" size="small" @click="handleEdit(record)">ç¼–è¾‘</a-button>
            <a-button type="link" size="small" @click="handlePermission(record)">æƒé™</a-button>
            <a-popconfirm
              title="ç¡®å®šè¦åˆ é™¤è¯¥å‘˜å·¥å—ï¼Ÿ"
              @confirm="handleDelete(record)"
            >
              <a-button type="link" size="small" danger>åˆ é™¤</a-button>
            </a-popconfirm>
          </a-space>
        </template>
      </template>
    </a-table>
  </div>
</template>

<script setup>
import { ref, reactive, computed, onMounted } from 'vue';
import { message } from 'ant-design-vue';
import {
  SearchOutlined,
  ReloadOutlined,
  PlusOutlined,
  UploadOutlined,
  DownloadOutlined
} from '@ant-design/icons-vue';
import { employeeApi } from '/@/api/business/attendance/basic-info/employee-api';
import { organizationApi } from '/@/api/business/attendance/basic-info/organization-api';

const emit = defineEmits(['add', 'edit', 'view', 'permission', 'import']);

const loading = ref(false);
const dataSource = ref([]);
const deptTreeData = ref([]);
const selectedRowKeys = ref([]);

const searchForm = reactive({
  name: '',
  employeeNo: '',
  deptId: '',
  status: '',
});

const pagination = reactive({
  current: 1,
  pageSize: 20,
  total: 0,
  showSizeChanger: true,
  showQuickJumper: true,
  showTotal: (total) => `å…± ${total} æ¡è®°å½•`,
});

const columns = [
  {
    title: 'å¤´åƒ',
    key: 'avatar',
    width: 60,
    align: 'center',
  },
  {
    title: 'å§“å',
    dataIndex: 'name',
    key: 'name',
    width: 100,
  },
  {
    title: 'å·¥å·',
    dataIndex: 'employeeNo',
    key: 'employeeNo',
    width: 100,
  },
  {
    title: 'éƒ¨é—¨',
    dataIndex: 'deptName',
    key: 'deptName',
    width: 120,
  },
  {
    title: 'å²—ä½',
    dataIndex: 'position',
    key: 'position',
    width: 120,
  },
  {
    title: 'æ‰‹æœºå·',
    dataIndex: 'phone',
    key: 'phone',
    width: 120,
  },
  {
    title: 'é‚®ç®±',
    dataIndex: 'email',
    key: 'email',
    width: 180,
  },
  {
    title: 'çŠ¶æ€',
    dataIndex: 'status',
    key: 'status',
    width: 80,
  },
  {
    title: 'å…¥èŒæ—¶é—´',
    dataIndex: 'hireDate',
    key: 'hireDate',
    width: 120,
  },
  {
    title: 'æ“ä½œ',
    key: 'action',
    width: 200,
    fixed: 'right',
  },
];

const rowSelection = {
  selectedRowKeys: selectedRowKeys,
  onChange: (keys) => {
    selectedRowKeys.value = keys;
  },
};

// è·å–çŠ¶æ€å¾½æ ‡
const getStatusBadge = (status) => {
  const statusMap = {
    active: 'success',
    inactive: 'error',
    pending: 'warning',
  };
  return statusMap[status] || 'default';
};

// è·å–çŠ¶æ€æ–‡æœ¬
const getStatusText = (status) => {
  const statusMap = {
    active: 'åœ¨èŒ',
    inactive: 'ç¦»èŒ',
    pending: 'å¾…å…¥èŒ',
  };
  return statusMap[status] || 'æœªçŸ¥';
};

// åŠ è½½å‘˜å·¥æ•°æ®
const loadEmployeeData = async () => {
  loading.value = true;
  try {
    const params = {
      ...searchForm,
      page: pagination.current,
      pageSize: pagination.pageSize,
    };
    const response = await employeeApi.getEmployeeList(params);
    dataSource.value = response.data.records;
    pagination.total = response.data.total;
  } catch (error) {
    console.error('åŠ è½½å‘˜å·¥æ•°æ®å¤±è´¥:', error);
    message.error('åŠ è½½å‘˜å·¥æ•°æ®å¤±è´¥');
  } finally {
    loading.value = false;
  }
};

// åŠ è½½éƒ¨é—¨æ ‘æ•°æ®
const loadDeptTreeData = async () => {
  try {
    const response = await organizationApi.getDeptTree();
    deptTreeData.value = formatDeptTree(response.data);
  } catch (error) {
    console.error('åŠ è½½éƒ¨é—¨æ ‘å¤±è´¥:', error);
  }
};

// æ ¼å¼åŒ–éƒ¨é—¨æ ‘
const formatDeptTree = (data) => {
  return data.map(item => ({
    title: item.name,
    value: item.id,
    key: item.id,
    children: item.children ? formatDeptTree(item.children) : [],
  }));
};

// æœç´¢
const handleSearch = () => {
  pagination.current = 1;
  loadEmployeeData();
};

// é‡ç½®
const handleReset = () => {
  Object.assign(searchForm, {
    name: '',
    employeeNo: '',
    deptId: '',
    status: '',
  });
  pagination.current = 1;
  loadEmployeeData();
};

// è¡¨æ ¼å˜åŒ–
const handleTableChange = (pag) => {
  pagination.current = pag.current;
  pagination.pageSize = pag.pageSize;
  loadEmployeeData();
};

// æ–°å¢å‘˜å·¥
const handleAdd = () => {
  emit('add');
};

// ç¼–è¾‘å‘˜å·¥
const handleEdit = (record) => {
  emit('edit', record);
};

// æŸ¥çœ‹å‘˜å·¥
const handleView = (record) => {
  emit('view', record);
};

// æƒé™ç®¡ç†
const handlePermission = (record) => {
  emit('permission', record);
};

// åˆ é™¤å‘˜å·¥
const handleDelete = async (record) => {
  try {
    await employeeApi.deleteEmployee(record.id);
    message.success('åˆ é™¤æˆåŠŸ');
    loadEmployeeData();
  } catch (error) {
    message.error('åˆ é™¤å¤±è´¥');
  }
};

// æ‰¹é‡å¯¼å…¥
const handleImport = () => {
  emit('import');
};

// ä¸‹è½½æ¨¡æ¿
const handleDownloadTemplate = async () => {
  try {
    const response = await employeeApi.downloadTemplate();
    // å¤„ç†æ–‡ä»¶ä¸‹è½½
    const url = window.URL.createObjectURL(new Blob([response.data]));
    const link = document.createElement('a');
    link.href = url;
    link.setAttribute('download', 'å‘˜å·¥å¯¼å…¥æ¨¡æ¿.xlsx');
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    window.URL.revokeObjectURL(url);
  } catch (error) {
    message.error('ä¸‹è½½æ¨¡æ¿å¤±è´¥');
  }
};

// åˆ·æ–°
const handleRefresh = () => {
  loadEmployeeData();
};

onMounted(() => {
  loadEmployeeData();
  loadDeptTreeData();
});
</script>

<style scoped lang="less">
.employee-table {
  background: #fff;
  border-radius: 8px;
  padding: 16px;

  .table-toolbar {
    margin-bottom: 16px;
    padding: 16px;
    background: #fafafa;
    border-radius: 4px;
  }

  .table-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;

    .actions-left,
    .actions-right {
      display: flex;
      gap: 8px;
    }
  }
}
</style>
```

### 3. æ‰¹é‡å¯¼å…¥åŠŸèƒ½

```vue
<!-- src/views/business/attendance/basic-info/employee/components/ImportModal.vue -->
<template>
  <a-modal
    :open="visible"
    title="æ‰¹é‡å¯¼å…¥å‘˜å·¥"
    @ok="handleSubmit"
    @cancel="handleCancel"
    :confirm-loading="loading"
    width="800px"
  >
    <div class="import-content">
      <!-- å¯¼å…¥è¯´æ˜ -->
      <a-alert
        message="å¯¼å…¥è¯´æ˜"
        description="è¯·å…ˆä¸‹è½½æ¨¡æ¿ï¼ŒæŒ‰ç…§æ¨¡æ¿æ ¼å¼å¡«å†™å‘˜å·¥ä¿¡æ¯åä¸Šä¼ ã€‚æ”¯æŒxlsxã€xlsæ ¼å¼æ–‡ä»¶ï¼Œå•æ¬¡æœ€å¤šå¯¼å…¥1000æ¡è®°å½•ã€‚"
        type="info"
        show-icon
        style="margin-bottom: 16px;"
      />

      <!-- ä¸‹è½½æ¨¡æ¿ -->
      <div class="template-section">
        <a-button type="link" @click="handleDownloadTemplate">
          <template #icon><DownloadOutlined /></template>
          ä¸‹è½½å¯¼å…¥æ¨¡æ¿
        </a-button>
      </div>

      <!-- æ–‡ä»¶ä¸Šä¼  -->
      <a-upload-dragger
        v-model:file-list="fileList"
        :before-upload="beforeUpload"
        :remove="handleRemove"
        :accept="'.xlsx,.xls'"
        :multiple="false"
      >
        <p class="ant-upload-drag-icon">
          <InboxOutlined />
        </p>
        <p class="ant-upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤åŒºåŸŸä¸Šä¼ </p>
        <p class="ant-upload-hint">æ”¯æŒå•ä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œæ–‡ä»¶æ ¼å¼ä¸ºxlsxæˆ–xls</p>
      </a-upload-dragger>

      <!-- é¢„è§ˆæ•°æ® -->
      <div v-if="previewData.length > 0" class="preview-section">
        <h4>æ•°æ®é¢„è§ˆ</h4>
        <a-table
          :columns="previewColumns"
          :data-source="previewData"
          :pagination="false"
          :scroll="{ x: 800 }"
          size="small"
        >
          <template #bodyCell="{ column, record }">
            <template v-if="column.key === 'status'">
              <a-tag :color="record.valid ? 'success' : 'error'">
                {{ record.valid ? 'æ­£å¸¸' : 'å¼‚å¸¸' }}
              </a-tag>
            </template>
            <template v-else-if="column.key === 'errorMessage'">
              <span style="color: #ff4d4f;">{{ record.errorMessage }}</span>
            </template>
          </template>
        </a-table>
      </div>
    </div>
  </a-modal>
</template>

<script setup>
import { ref } from 'vue';
import { message } from 'ant-design-vue';
import { InboxOutlined, DownloadOutlined } from '@ant-design/icons-vue';
import { employeeApi } from '/@/api/business/attendance/basic-info/employee-api';
import * as XLSX from 'xlsx';

const props = defineProps({
  visible: Boolean,
});

const emit = defineEmits(['update:visible', 'success']);

const loading = ref(false);
const fileList = ref([]);
const previewData = ref([]);

const previewColumns = [
  { title: 'å§“å', dataIndex: 'name', key: 'name', width: 100 },
  { title: 'å·¥å·', dataIndex: 'employeeNo', key: 'employeeNo', width: 100 },
  { title: 'éƒ¨é—¨', dataIndex: 'deptName', key: 'deptName', width: 120 },
  { title: 'å²—ä½', dataIndex: 'position', key: 'position', width: 120 },
  { title: 'æ‰‹æœºå·', dataIndex: 'phone', key: 'phone', width: 120 },
  { title: 'çŠ¶æ€', key: 'status', width: 80 },
  { title: 'é”™è¯¯ä¿¡æ¯', key: 'errorMessage', width: 200 },
];

// ä¸‹è½½æ¨¡æ¿
const handleDownloadTemplate = async () => {
  try {
    const response = await employeeApi.downloadTemplate();
    const url = window.URL.createObjectURL(new Blob([response.data]));
    const link = document.createElement('a');
    link.href = url;
    link.setAttribute('download', 'å‘˜å·¥å¯¼å…¥æ¨¡æ¿.xlsx');
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    window.URL.revokeObjectURL(url);
  } catch (error) {
    message.error('ä¸‹è½½æ¨¡æ¿å¤±è´¥');
  }
};

// ä¸Šä¼ å‰å¤„ç†
const beforeUpload = (file) => {
  const isExcel = file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||
                  file.type === 'application/vnd.ms-excel';
  if (!isExcel) {
    message.error('åªèƒ½ä¸Šä¼ Excelæ–‡ä»¶ï¼');
    return false;
  }

  const isLt10M = file.size / 1024 / 1024 < 10;
  if (!isLt10M) {
    message.error('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MBï¼');
    return false;
  }

  readFile(file);
  return false; // é˜»æ­¢è‡ªåŠ¨ä¸Šä¼ 
};

// è¯»å–æ–‡ä»¶
const readFile = (file) => {
  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      const data = e.target.result;
      const workbook = XLSX.read(data, { type: 'binary' });
      const sheetName = workbook.SheetNames[0];
      const worksheet = workbook.Sheets[sheetName];
      const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });

      // è§£ææ•°æ®å¹¶éªŒè¯
      parseAndValidateData(jsonData);
    } catch (error) {
      message.error('æ–‡ä»¶è§£æå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼');
    }
  };
  reader.readAsBinaryString(file);
};

// è§£æå¹¶éªŒè¯æ•°æ®
const parseAndValidateData = (data) => {
  if (data.length < 2) {
    message.error('æ–‡ä»¶ä¸­æ²¡æœ‰æœ‰æ•ˆæ•°æ®');
    return;
  }

  const headers = data[0];
  const rows = data.slice(1);

  const parsedData = rows.map((row, index) => {
    const record = {
      row: index + 2,
      valid: true,
      errorMessage: '',
    };

    // æ˜ å°„åˆ—æ•°æ®
    headers.forEach((header, colIndex) => {
      const key = mapHeaderToField(header);
      if (key) {
        record[key] = row[colIndex] || '';
      }
    });

    // éªŒè¯å¿…å¡«å­—æ®µ
    if (!record.name) {
      record.valid = false;
      record.errorMessage += 'å§“åä¸èƒ½ä¸ºç©ºï¼›';
    }

    if (!record.employeeNo) {
      record.valid = false;
      record.errorMessage += 'å·¥å·ä¸èƒ½ä¸ºç©ºï¼›';
    }

    if (!record.phone) {
      record.valid = false;
      record.errorMessage += 'æ‰‹æœºå·ä¸èƒ½ä¸ºç©ºï¼›';
    } else if (!/^1[3-9]\d{9}$/.test(record.phone)) {
      record.valid = false;
      record.errorMessage += 'æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼›';
    }

    return record;
  });

  previewData.value = parsedData;
};

// æ˜ å°„è¡¨å¤´åˆ°å­—æ®µ
const mapHeaderToField = (header) => {
  const mapping = {
    'å§“å': 'name',
    'å·¥å·': 'employeeNo',
    'éƒ¨é—¨': 'deptName',
    'å²—ä½': 'position',
    'æ‰‹æœºå·': 'phone',
    'é‚®ç®±': 'email',
    'å…¥èŒæ—¶é—´': 'hireDate',
  };
  return mapping[header];
};

// ç§»é™¤æ–‡ä»¶
const handleRemove = () => {
  fileList.value = [];
  previewData.value = [];
};

// æäº¤å¯¼å…¥
const handleSubmit = async () => {
  if (fileList.value.length === 0) {
    message.error('è¯·é€‰æ‹©è¦å¯¼å…¥çš„æ–‡ä»¶');
    return;
  }

  const invalidCount = previewData.value.filter(item => !item.valid).length;
  if (invalidCount > 0) {
    message.error(`æœ‰${invalidCount}æ¡æ•°æ®éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æ ¼å¼`);
    return;
  }

  loading.value = true;
  try {
    const formData = new FormData();
    formData.append('file', fileList.value[0].originFileObj);

    const response = await employeeApi.importEmployees(formData);
    message.success(`æˆåŠŸå¯¼å…¥${response.data.successCount}æ¡æ•°æ®`);
    emit('success');
    handleCancel();
  } catch (error) {
    message.error('å¯¼å…¥å¤±è´¥');
  } finally {
    loading.value = false;
  }
};

// å–æ¶ˆ
const handleCancel = () => {
  emit('update:visible', false);
  fileList.value = [];
  previewData.value = [];
};
</script>

<style scoped lang="less">
.import-content {
  .template-section {
    margin-bottom: 16px;
    text-align: center;
  }

  .preview-section {
    margin-top: 16px;

    h4 {
      margin-bottom: 8px;
      font-weight: 600;
    }
  }
}
</style>
```

## Mockæ•°æ®ç¤ºä¾‹

```javascript
// src/mock/basic-info-mock.js
export const mockDeptTree = [
  {
    id: '1',
    name: 'ç§‘æŠ€æœ‰é™å…¬å¸',
    code: 'COMPANY',
    type: 'company',
    level: 0,
    employeeCount: 1500,
    children: [
      {
        id: '2',
        name: 'æŠ€æœ¯éƒ¨',
        code: 'TECH',
        type: 'dept',
        level: 1,
        employeeCount: 500,
        managerId: 'emp001',
        managerName: 'å¼ ä¸‰',
        phone: '13800138000',
        children: [
          {
            id: '5',
            name: 'å‰ç«¯ç»„',
            code: 'FRONTEND',
            type: 'team',
            level: 2,
            employeeCount: 50,
          },
          {
            id: '6',
            name: 'åç«¯ç»„',
            code: 'BACKEND',
            type: 'team',
            level: 2,
            employeeCount: 80,
          }
        ]
      },
      {
        id: '3',
        name: 'äººäº‹éƒ¨',
        code: 'HR',
        type: 'dept',
        level: 1,
        employeeCount: 50,
        managerId: 'emp002',
        managerName: 'æå››',
        phone: '13800138001',
      },
      {
        id: '4',
        name: 'è´¢åŠ¡éƒ¨',
        code: 'FINANCE',
        type: 'dept',
        level: 1,
        employeeCount: 30,
        managerId: 'emp003',
        managerName: 'ç‹äº”',
        phone: '13800138002',
      }
    ]
  }
];

export const mockEmployeeList = {
  records: [
    {
      id: 'emp001',
      name: 'å¼ ä¸‰',
      employeeNo: 'EMP001',
      deptId: '2',
      deptName: 'æŠ€æœ¯éƒ¨',
      position: 'æŠ€æœ¯æ€»ç›‘',
      phone: '13800138000',
      email: 'zhangsan@company.com',
      status: 'active',
      hireDate: '2020-01-15',
      avatar: 'https://picsum.photos/seed/emp001/100/100'
    },
    {
      id: 'emp002',
      name: 'æå››',
      employeeNo: 'EMP002',
      deptId: '3',
      deptName: 'äººäº‹éƒ¨',
      position: 'äººäº‹ç»ç†',
      phone: '13800138001',
      email: 'lisi@company.com',
      status: 'active',
      hireDate: '2019-03-20',
      avatar: 'https://picsum.photos/seed/emp002/100/100'
    }
  ],
  total: 1500,
  current: 1,
  pageSize: 20
};

export const mockPositionList = [
  { id: 'pos001', name: 'æŠ€æœ¯æ€»ç›‘', level: 1, description: 'è´Ÿè´£æŠ€æœ¯å›¢é˜Ÿç®¡ç†' },
  { id: 'pos002', name: 'é«˜çº§å·¥ç¨‹å¸ˆ', level: 2, description: 'è´Ÿè´£æ ¸å¿ƒå¼€å‘å·¥ä½œ' },
  { id: 'pos003', name: 'å·¥ç¨‹å¸ˆ', level: 3, description: 'è´Ÿè´£å…·ä½“å¼€å‘ä»»åŠ¡' }
];

export const mockLevelList = [
  { id: 'lvl001', name: 'P1', level: 1, description: 'åˆçº§èŒçº§' },
  { id: 'lvl002', name: 'P2', level: 2, description: 'ä¸­çº§èŒçº§' },
  { id: 'lvl003', name: 'P3', level: 3, description: 'é«˜çº§èŒçº§' }
];

export default {
  mockDeptTree,
  mockEmployeeList,
  mockPositionList,
  mockLevelList
};
```

## è·¯ç”±é…ç½®

```javascript
// src/router/business/attendance.js
export const attendanceRouters = [
  {
    path: '/business/attendance/basic-info',
    name: 'BasicInfo',
    redirect: '/business/attendance/basic-info/organization',
    component: () => import('/@/views/business/attendance/basic-info/index.vue'),
    meta: {
      title: 'è€ƒå‹¤ç®¡ç† - åŸºç¡€ä¿¡æ¯',
      menuType: MENU_TYPE_ENUM.MENU.value,
      icon: 'UserOutlined',
      hideInMenu: false,
      requireAuth: true
    },
    children: [
      {
        path: '/business/attendance/basic-info/organization',
        name: 'Organization',
        component: () => import('/@/views/business/attendance/basic-info/organization/index.vue'),
        meta: {
          title: 'ç»„ç»‡æ¶æ„',
          menuType: MENU_TYPE_ENUM.MENU.value,
          hideInMenu: false,
          requireAuth: true
        }
      },
      {
        path: '/business/attendance/basic-info/employee',
        name: 'Employee',
        component: () => import('/@/views/business/attendance/basic-info/employee/index.vue'),
        meta: {
          title: 'å‘˜å·¥ç®¡ç†',
          menuType: MENU_TYPE_ENUM.MENU.value,
          hideInMenu: false,
          requireAuth: true
        }
      },
      {
        path: '/business/attendance/basic-info/user',
        name: 'User',
        component: () => import('/@/views/business/attendance/basic-info/user/index.vue'),
        meta: {
          title: 'ç”¨æˆ·ç®¡ç†',
          menuType: MENU_TYPE_ENUM.MENU.value,
          hideInMenu: false,
          requireAuth: true,
          roles: ['admin'] // ä»…ç³»ç»Ÿç®¡ç†å‘˜å¯è§
        }
      }
    ]
  }
];
```

## å¼€å‘æ³¨æ„äº‹é¡¹æ€»ç»“

### æ ¸å¿ƒåŠŸèƒ½è¦ç‚¹
1. **ç»„ç»‡æ¶æ„æ ‘ç®¡ç†** - æ”¯æŒæ— é™çº§ç»„ç»‡ç»“æ„
2. **å‘˜å·¥å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†** - ä»å…¥èŒåˆ°ç¦»èŒçš„å®Œæ•´ç®¡ç†
3. **æ‰¹é‡å¯¼å…¥å¯¼å‡º** - Excelæ¨¡æ¿åŒ–æ•°æ®æ“ä½œ
4. **æƒé™ç²¾ç»†åŒ–æ§åˆ¶** - åŸºäºè§’è‰²çš„æƒé™åˆ†é…
5. **æ•°æ®å…³è”æ€§ç»´æŠ¤** - ç»„ç»‡ä¸å‘˜å·¥çš„å…³ç³»ç®¡ç†
6. **çŠ¶æ€æµç¨‹ç®¡ç†** - å‘˜å·¥çŠ¶æ€å˜æ›´æµç¨‹

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. ç»„ç»‡æ ‘é‡‡ç”¨è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§é‡æ•°æ®
2. å‘˜å·¥åˆ—è¡¨åˆ†é¡µåŠ è½½ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šæ•°æ®
3. æ‰¹é‡æ“ä½œé‡‡ç”¨å¼‚æ­¥å¤„ç†ï¼Œæä¾›è¿›åº¦åé¦ˆ
4. åˆç†ä½¿ç”¨ç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–
1. æä¾›ä¸°å¯Œçš„æœç´¢å’Œç­›é€‰åŠŸèƒ½
2. æ”¯æŒæ‹–æ‹½æ“ä½œè°ƒæ•´ç»„ç»‡ç»“æ„
3. æ‰¹é‡å¯¼å…¥æä¾›æ•°æ®é¢„è§ˆå’ŒéªŒè¯
4. æ“ä½œåé¦ˆåŠæ—¶å‡†ç¡®

## æ€»ç»“

åŸºç¡€ä¿¡æ¯æ¨¡å—ä½œä¸ºè€ƒå‹¤ç³»ç»Ÿçš„æ•°æ®åŸºç¡€ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨ï¼š

- æ•°æ®ç»“æ„çš„åˆç†æ€§å’Œæ‰©å±•æ€§
- ç»„ç»‡å…³ç³»çš„æ¸…æ™°è¡¨è¾¾
- å‘˜å·¥ä¿¡æ¯çš„å®Œæ•´æ€§ç®¡ç†
- æƒé™æ§åˆ¶çš„ç²¾ç¡®æ€§
- æ‰¹é‡æ“ä½œçš„ä¾¿æ·æ€§

é€šè¿‡éµå¾ªæœ¬æ–‡æ¡£çš„æŠ€æœ¯è§„èŒƒï¼Œå¯ä»¥æ„å»ºå‡ºåŠŸèƒ½å®Œå–„ã€æ€§èƒ½ä¼˜è‰¯çš„åŸºç¡€ä¿¡æ¯ç®¡ç†æ¨¡å—ã€‚