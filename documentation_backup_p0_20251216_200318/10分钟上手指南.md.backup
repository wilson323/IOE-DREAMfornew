# IOE-DREAM 10分钟快速上手指南

**目标**: 让新开发者在10分钟内快速上手IOE-DREAM项目开发
**适用人群**: 新加入项目的开发人员
**预计时间**: 10-15分钟

---

## ⏱️ 快速开始路线图

```
📖 了解项目 (2分钟) → 🛠️ 环境准备 (3分钟) → 💻 运行项目 (3分钟) → ✅ 快速验证 (2分钟)
```

---

## 📖 第1步: 了解项目 (2分钟)
## ⚠️ IOE-DREAM零容忍规则（强制执行）

**必须遵守的架构规则**:
- ✅ **必须使用 @Resource 注入依赖**
- ✅ **必须使用 @Mapper 注解** (禁止@Repository)
- ✅ **必须使用 Dao 后缀** (禁止Repository)
- ✅ **必须使用 @RestController 注解**
- ✅ **必须使用 @Valid 参数校验**
- ✅ **必须返回统一ResponseDTO格式**
- ✅ **必须遵循四层架构边界**

**严格禁止事项**:
- ❌ **禁止使用 @Autowired 注入**
- ❌ **禁止使用 @Repository 注解**
- ❌ **禁止使用 Repository 后缀命名**
- ❌ **禁止跨层访问**
- ❌ **禁止在Controller中包含业务逻辑**
- ❌ **禁止直接访问数据库**

**违规后果**: P0级问题，立即修复，禁止合并！
 
## 🏗️ 四层架构规范

**标准架构模式**:
```
Controller (接口控制层)
    ↓
Service (核心业务层)
    ↓
Manager (流程管理层)
    ↓
DAO (数据访问层)
```

**层级职责**:
- **Controller层**: HTTP请求处理、参数验证、权限控制
- **Service层**: 核心业务逻辑、事务管理、业务规则验证
- **Manager层**: 复杂流程编排、多数据组装、第三方服务集成
- **DAO层**: 数据库CRUD操作、SQL查询实现、数据访问边界

**严格禁止跨层访问**: Controller不能直接调用Manager/DAO！
 
## 📋 IOE-DREAM七微服务架构

**核心架构组成**:
- **Gateway Service (8080)**: API网关
- **Common Service (8088)**: 公共模块微服务
- **DeviceComm Service (8087)**: 设备通讯微服务
- **OA Service (8089)**: OA微服务
- **Access Service (8090)**: 门禁服务
- **Attendance Service (8091)**: 考勤服务
- **Video Service (8092)**: 视频服务
- **Consume Service (8094)**: 消费服务
- **Visitor Service (8095)**: 访客服务

**架构特点**:
- 基于Spring Boot 3.5.8 + Java 17
- 严格遵循企业级微服务规范
- 支持高并发、高可用、水平扩展

### 🎯 项目定位
IOE-DREAM是一个**智慧园区一卡通管理平台**，为园区提供门禁、考勤、消费、视频监控等智能化服务。

### 🏗️ 核心架构
```
七微服务架构:
├── ioedream-gateway-service (8080)     # API网关
├── ioedream-common-service (8088)     # 公共服务
├── ioedream-device-comm-service (8087) # 设备通讯
├── ioedream-oa-service (8089)         # OA服务
├── ioedream-access-service (8090)     # 门禁服务
├── ioedream-attendance-service (8091) # 考勤服务
├── ioedream-video-service (8092)      # 视频服务
└── ioedream-consume-service (8094)    # 消费服务
```

### 📋 四层架构 (必须掌握)
```
Controller → Service → Manager → DAO
```
- **Controller层**: HTTP接口，参数验证
- **Service层**: 核心业务逻辑，事务管理
- **Manager层**: 复杂流程，数据组装，缓存
- **DAO层**: 数据库CRUD，SQL查询

### ⚡ 核心规范 (零容忍)
- ✅ **必须使用 @Resource** 注入依赖
- ❌ **禁止使用 @Autowired**
- ✅ **必须使用 Dao 后缀**
- ❌ **禁止使用 Repository**
- ✅ **必须遵循四层架构**
- ❌ **禁止跨层访问**

---

## 🛠️ 第2步: 环境准备 (3分钟)

### 📋 必需软件检查清单
```bash
# 检查Java版本 (必须17+)
java -version
# 应该显示: openjdk version "17.x.x"

# 检查Maven版本 (必须3.8+)
mvn -version
# 应该显示: Apache Maven 3.8.x

# 检查MySQL版本 (必须8.0+)
mysql --version
# 应该显示: mysql 8.x.x

# 检查Redis版本 (必须6.0+)
redis-server --version
# 应该显示: Redis server 6.x.x
```

### 🚀 快速环境配置
```bash
# 1. 克隆项目
git clone https://github.com/your-org/ioe-dream.git
cd ioe-dream

# 2. 配置数据库
mysql -u root -p
CREATE DATABASE ioe_dream DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
# 导入基础数据
mysql -u root -p ioe_dream < database/init.sql

# 3. 配置Redis
redis-server
# 或者使用 systemd 启动
sudo systemctl start redis

# 4. 配置项目参数
cp application-example.yml application-dev.yml
# 编辑 application-dev.yml 修改数据库连接信息
```

### ⚙️ IDE配置 (IntelliJ IDEA)
1. **设置JDK**: File → Settings → Build Tools → Maven → JDK选择17
2. **导入项目**: File → Open → 选择项目根目录
3. **配置Maven**: 自动导入依赖，等待下载完成
4. **安装插件**: Lombok、MyBatis、Spring Boot

---

## 💻 第3步: 运行项目 (3分钟)

### 🚀 启动项目
```bash
# 方式1: 使用Maven命令
mvn clean package -DskipTests
java -jar target/ioedream-common-service-1.0.0.jar

# 方式2: 使用IDE
# 找到启动类: CommonServiceApplication.java
# 右键 → Run 'CommonServiceApplication.main()'

# 方式3: 使用脚本
./scripts/start.sh
```

### 🔍 验证启动成功
```bash
# 检查服务状态
curl http://localhost:8088/actuator/health

# 应该返回:
{
  "status": "UP",
  "components": {
    "db": {"status": "UP"},
    "diskSpace": {"status": "UP"}
  }
}
```

### 📱 访问API文档
```bash
# Swagger文档地址
http://localhost:8088/doc.html

# 或访问新版本文档
http://localhost:8088/swagger-ui/
```

---

## ✅ 第4步: 快速验证 (2分钟)

### 🧪 验证核心功能

#### 1. 测试API接口
```bash
# 测试用户查询
curl -X GET "http://localhost:8088/api/v1/user/list" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token"

# 测试新增用户
curl -X POST "http://localhost:8088/api/v1/user/add" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token" \
  -d '{"userName":"test","realName":"测试用户","email":"test@example.com"}'
```

#### 2. 验证数据库连接
```bash
# 连接MySQL
mysql -u root -p ioe_dream

# 查看数据表
SHOW TABLES;

# 查看用户数据
SELECT * FROM t_user LIMIT 5;
```

#### 3. 验证Redis缓存
```bash
# 连接Redis
redis-cli

# 查看缓存
KEYS *
```

### 🎯 编写第一个Controller

#### 创建示例Controller
```java
package net.lab1024.sa.example.controller;

import lombok.RequiredArgsConstructor;
import net.lab1024.sa.common.common.domain.ResponseDTO;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/v1/example")
@RequiredArgsConstructor
public class ExampleController {

    @GetMapping("/hello")
    public ResponseDTO<String> hello() {
        return ResponseDTO.ok("Hello IOE-DREAM!");
    }

    @PostMapping("/echo")
    public ResponseDTO<String> echo(@RequestBody String message) {
        return ResponseDTO.ok("Echo: " + message);
    }
}
```

#### 测试自定义接口
```bash
# 测试hello接口
curl http://localhost:8088/api/v1/example/hello

# 测试echo接口
curl -X POST http://localhost:8088/api/v1/example/echo \
  -H "Content-Type: text/plain" \
  -d "Hello World"
```

---

## 🎓 学习路径指引

### 🔰 第1周: 基础入门
- [ ] 阅读项目介绍文档
- [ ] 完成环境搭建
- [ ] 运行示例项目
- [ ] 学习核心规范

### 📚 第2周: 深入学习
- [ ] 学习四层架构规范
- [ ] 掌握权限控制
- [ ] 了解缓存机制
- [ ] 熟悉数据库设计

### 💡 第3周: 实践提升
- [ ] 完成一个完整功能开发
- [ ] 编写单元测试
- [ ] 学习性能优化
- [ ] 参与代码审查

---

## 🚨 常见问题解决

### ❌ 问题1: 端口8080被占用
```bash
# 查找占用端口的进程
netstat -tulpn | grep 8080  # Linux
netstat -ano | findstr 8080  # Windows

# 杀死进程
kill -9 <PID>  # Linux
taskkill /PID <PID> /F  # Windows

# 或者修改端口配置
server.port=8081
```

### ❌ 问题2: 数据库连接失败
```bash
# 检查MySQL服务
systemctl status mysql  # Linux
mysqladmin ping        # 通用

# 检查连接配置
# application.yml中的数据库URL、用户名、密码

# 检查网络连通性
telnet localhost 3306
```

### ❌ 问题3: 依赖下载缓慢
```xml
<!-- 配置Maven镜像 -->
<settings>
  <mirrors>
    <mirror>
      <id>aliyun-central</id>
      <name>Aliyun Central</name>
      <url>https://maven.aliyun.com/repository/central</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
</settings>
```

### ❌ 问题4: 权限认证失败
```bash
# 检查Token是否正确
# 1. 确认用户已登录
# 2. 检查Token格式
# 3. 验证Token未过期

# 测试Token
curl -H "Authorization: Bearer your-token" \
     http://localhost:8088/api/v1/user/info
```

---

## 📞 获取帮助

### 💬 技术支持
- **团队群**: {团队群号}
- **技术文档**: [文档中心](../../README.md)
- **问题反馈**: [Issue地址](https://github.com/your-org/ioe-dream/issues)

### 📚 学习资源
- **架构规范**: [全局架构规范](../../01-核心规范/架构规范/全局架构规范.md)
- **编码规范**: [Java编码规范](../../01-核心规范/开发规范/Java编码规范.md)
- **API文档**: [API设计规范](../../01-核心规范/开发规范/API设计规范.md)

### 🛠️ 开发工具
- **在线调试**: [API测试工具](http://localhost:8088/doc.html)
- **代码模板**: [模板工具](../../06-模板工具/)
- **代码示例**: [示例代码](../examples/)

---

## 🎯 成功标准

### ✅ 完成标志
- [x] 项目成功启动无错误
- [x] 数据库连接正常
- [x] Redis缓存工作
- [x] API接口响应正常
- [x] 自定义接口测试通过

### 🎉 下一步
1. **选择业务模块**: 选择一个业务模块深入学习
2. **阅读相关文档**: 阅读模块的设计文档和API文档
3. **参与实际开发**: 开始实际的开发工作
4. **团队协作**: 加入团队的开发流程

---

## 📝 快速检查清单

### 🔧 环境检查
- [ ] Java 17+ 已安装
- [ ] Maven 3.8+ 已安装
- [ ] MySQL 8.0+ 已安装
- [ ] Redis 6.0+ 已安装
- [ ] IDE 已配置完成

### 🚀 运行检查
- [ ] 项目代码克隆完成
- [ ] 数据库初始化完成
- [ ] 配置文件修改完成
- [ ] 服务启动无错误
- [ ] 健康检查通过

### 📖 功能检查
- [ ] API接口可访问
- [ ] 数据库操作正常
- [ ] 缓存机制工作
- [ ] 日志输出正常
- [ ] 权限控制有效

---

## 🎊 恭喜！快速上手完成

**完成时间**: {当前用时}
**掌握技能**: IOE-DREAM项目基础开发
**下一步**: 深入学习具体业务模块

**🚀 您现在已经可以开始IOE-DREAM项目的开发了！**

---

**文档版本**: v2.0.0
**最后更新**: 2025-12-02
**维护团队**: IOE-DREAM开发团队

**🎯 祝您开发愉快！如有问题，随时寻求帮助！**