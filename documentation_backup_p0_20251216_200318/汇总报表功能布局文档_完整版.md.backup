# æ±‡æ€»æŠ¥è¡¨åŠŸèƒ½å¸ƒå±€æ–‡æ¡£ - å®Œæ•´ç‰ˆ

## åŠŸèƒ½æ¦‚è¿°

æ±‡æ€»æŠ¥è¡¨æ¨¡å—æ˜¯è€ƒå‹¤ç³»ç»Ÿçš„æ•°æ®åˆ†æå’ŒæŠ¥è¡¨ä¸­å¿ƒï¼ŒåŒ…å«ä¸ªäººæ±‡æ€»ã€éƒ¨é—¨ç»Ÿè®¡ã€è€ƒå‹¤ç»“æœè¡¨ã€æŠ¥è¡¨æ¨¡æ¿ç­‰åŠŸèƒ½ã€‚è¯¥æ¨¡å—æä¾›ä¸°å¯Œçš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ã€çµæ´»çš„æŠ¥è¡¨å®šåˆ¶åŠŸèƒ½ã€å¤šç»´åº¦æ•°æ®åˆ†æèƒ½åŠ›ï¼Œæ”¯æŒæŠ¥è¡¨å¯¼å‡ºã€æ‰“å°ã€å®šæ—¶ç”Ÿæˆç­‰ï¼Œä¸ºä¼ä¸šå†³ç­–æä¾›å…¨é¢çš„æ•°æ®æ”¯æ’‘ã€‚

## æŠ€æœ¯æ¶æ„è§„èŒƒ

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ ¸å¿ƒæ¡†æ¶**: Vue 3.4.27 (Composition API)
- **UIç»„ä»¶åº“**: Ant Design Vue 4.2.5
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.7
- **è·¯ç”±ç®¡ç†**: Vue Router 4.3.2
- **HTTPå®¢æˆ·ç«¯**: Axios 1.6.8
- **å›¾è¡¨ç»„ä»¶**: ECharts 5.x / D3.js
- **æŠ¥è¡¨ç»„ä»¶**: VxeTable + Print.js
- **æ‹–æ‹½ç»„ä»¶**: Vue.Draggable
- **æ ·å¼é¢„å¤„ç†å™¨**: Less 4.2.0
- **å›¾æ ‡åº“**: @ant-design/icons-vue

### é¡¹ç›®æ–‡ä»¶ç»„ç»‡ç»“æ„
```
src/views/business/attendance/reports/
â”œâ”€â”€ index.vue                        # æ±‡æ€»æŠ¥è¡¨ä¸»é¡µé¢
â”œâ”€â”€ personal/
â”‚   â”œâ”€â”€ index.vue                   # ä¸ªäººæ±‡æ€»é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ PersonalSummary.vue     # ä¸ªäººæ±‡æ€»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MonthlyReport.vue       # æœˆåº¦æŠ¥å‘Šç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AnnualReport.vue        # å¹´åº¦æŠ¥å‘Šç»„ä»¶
â”‚   â”‚   â””â”€â”€ TrendAnalysis.vue       # è¶‹åŠ¿åˆ†æç»„ä»¶
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ personal-api.js         # ä¸ªäººæ±‡æ€»API
â”œâ”€â”€ department/
â”‚   â”œâ”€â”€ index.vue                   # éƒ¨é—¨ç»Ÿè®¡é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ DeptStatistics.vue      # éƒ¨é—¨ç»Ÿè®¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ComparisonAnalysis.vue  # å¯¹æ¯”åˆ†æç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TrendChart.vue          # è¶‹åŠ¿å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ PerformanceMetrics.vue  # ç»©æ•ˆæŒ‡æ ‡ç»„ä»¶
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ department-api.js       # éƒ¨é—¨ç»Ÿè®¡API
â”œâ”€â”€ results-table/
â”‚   â”œâ”€â”€ index.vue                   # è€ƒå‹¤ç»“æœè¡¨é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ TableDesigner.vue       # è¡¨æ ¼è®¾è®¡å™¨
â”‚   â”‚   â”œâ”€â”€ CustomColumns.vue       # è‡ªå®šä¹‰åˆ—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DataExport.vue          # æ•°æ®å¯¼å‡ºç»„ä»¶
â”‚   â”‚   â””â”€â”€ PrintPreview.vue        # æ‰“å°é¢„è§ˆç»„ä»¶
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ results-table-api.js    # è€ƒå‹¤ç»“æœè¡¨API
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.vue                   # æŠ¥è¡¨æ¨¡æ¿é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ TemplateDesigner.vue    # æ¨¡æ¿è®¾è®¡å™¨
â”‚   â”‚   â”œâ”€â”€ TemplateLibrary.vue     # æ¨¡æ¿åº“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ CustomReport.vue        # è‡ªå®šä¹‰æŠ¥è¡¨
â”‚   â”‚   â””â”€â”€ ReportGenerator.vue     # æŠ¥è¡¨ç”Ÿæˆå™¨
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ templates-api.js        # æ¨¡æ¿API
â”œâ”€â”€ mock/
â”‚   â””â”€â”€ reports-mock.js             # æ¨¡æ‹Ÿæ•°æ®
â”œâ”€â”€ api/
â”‚   â””â”€â”€ reports-api.js              # ç»Ÿä¸€APIæ¥å£
â””â”€â”€ utils/
    â”œâ”€â”€ chart-utils.js              # å›¾è¡¨å·¥å…·å‡½æ•°
    â”œâ”€â”€ export-utils.js             # å¯¼å‡ºå·¥å…·å‡½æ•°
    â””â”€â”€ report-generator.js         # æŠ¥è¡¨ç”Ÿæˆå·¥å…·
```

### APIæ¥å£è®¾è®¡
```javascript
// src/api/business/attendance/reports/personal-api.js
import { postRequest, getRequest, putRequest, deleteRequest } from '/@/lib/axios';

export const personalApi = {
  // ä¸ªäººæ±‡æ€»
  getPersonalSummary: (params) => getRequest('/attendance/reports/personal/summary', params),
  getMonthlyReport: (employeeId, params) => getRequest(`/attendance/reports/personal/monthly/${employeeId}`, params),
  getAnnualReport: (employeeId, params) => getRequest(`/attendance/reports/personal/annual/${employeeId}`, params),
  getTrendAnalysis: (employeeId, params) => getRequest(`/attendance/reports/personal/trend/${employeeId}`, params),

  // ä¸ªäººç»Ÿè®¡
  getAttendanceStatistics: (employeeId, params) => getRequest(`/attendance/reports/personal/statistics/${employeeId}`, params),
  getExceptionHistory: (employeeId, params) => getRequest(`/attendance/reports/personal/exceptions/${employeeId}`, params),

  // å¯¼å‡º
  exportPersonalReport: (params) => postRequest('/attendance/reports/personal/export', params),
};

// src/api/business/attendance/reports/department-api.js
export const departmentApi = {
  // éƒ¨é—¨ç»Ÿè®¡
  getDepartmentStatistics: (params) => getRequest('/attendance/reports/department/statistics', params),
  getComparisonAnalysis: (params) => getRequest('/attendance/reports/department/comparison', params),
  getTrendChart: (params) => getRequest('/attendance/reports/department/trend', params),
  getPerformanceMetrics: (params) => getRequest('/attendance/reports/department/performance', params),

  // éƒ¨é—¨å¯¹æ¯”
  getDepartmentComparison: (params) => getRequest('/attendance/reports/department/comparison', params),
  getRankingReport: (params) => getRequest('/attendance/reports/department/ranking', params),

  // å¯¼å‡º
  exportDepartmentReport: (params) => postRequest('/attendance/reports/department/export', params),
};

// src/api/business/attendance/reports/results-table-api.js
export const resultsTableApi = {
  // ç»“æœè¡¨é…ç½®
  getTableConfigs: () => getRequest('/attendance/reports/results-table/configs'),
  saveTableConfig: (params) => postRequest('/attendance/reports/results-table/config/save', params),
  deleteTableConfig: (id) => deleteRequest(`/attendance/reports/results-table/config/${id}`),

  // æ•°æ®æŸ¥è¯¢
  getTableData: (configId, params) => getRequest(`/attendance/reports/results-table/data/${configId}`, params),

  // åˆ—é…ç½®
  getCustomColumns: (tableId) => getRequest(`/attendance/reports/results-table/columns/${tableId}`),
  saveCustomColumns: (tableId, params) => postRequest(`/attendance/reports/results-table/columns/${tableId}`, params),

  // å¯¼å‡ºæ‰“å°
  exportTableData: (params) => postRequest('/attendance/reports/results-table/export', params),
  printTableData: (params) => postRequest('/attendance/reports/results-table/print', params),
};
```

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
## ğŸ“‹ IOE-DREAMä¸ƒå¾®æœåŠ¡æ¶æ„

**æ ¸å¿ƒæ¶æ„ç»„æˆ**:
- **Gateway Service (8080)**: APIç½‘å…³
- **Common Service (8088)**: å…¬å…±æ¨¡å—å¾®æœåŠ¡
- **DeviceComm Service (8087)**: è®¾å¤‡é€šè®¯å¾®æœåŠ¡
- **OA Service (8089)**: OAå¾®æœåŠ¡
- **Access Service (8090)**: é—¨ç¦æœåŠ¡
- **Attendance Service (8091)**: è€ƒå‹¤æœåŠ¡
- **Video Service (8092)**: è§†é¢‘æœåŠ¡
- **Consume Service (8094)**: æ¶ˆè´¹æœåŠ¡
- **Visitor Service (8095)**: è®¿å®¢æœåŠ¡

**æ¶æ„ç‰¹ç‚¹**:
- åŸºäºSpring Boot 3.5.8 + Java 17
- ä¸¥æ ¼éµå¾ªä¼ä¸šçº§å¾®æœåŠ¡è§„èŒƒ
- æ”¯æŒé«˜å¹¶å‘ã€é«˜å¯ç”¨ã€æ°´å¹³æ‰©å±•

**æŠ€æœ¯æ ˆæ ‡å‡†**:
- **æ•°æ®åº“**: MySQL 8.0 + Druidè¿æ¥æ± 
- **ç¼“å­˜**: Redis + Caffeineå¤šçº§ç¼“å­˜
- **æ³¨å†Œä¸­å¿ƒ**: Nacos
- **é…ç½®ä¸­å¿ƒ**: Nacos Config
- **è®¤è¯æˆæƒ**: Sa-Token

## ğŸ—ï¸ å››å±‚æ¶æ„è§„èŒƒ

**æ ‡å‡†æ¶æ„æ¨¡å¼**:
```
Controller (æ¥å£æ§åˆ¶å±‚)
    â†“
Service (æ ¸å¿ƒä¸šåŠ¡å±‚)
    â†“
Manager (æµç¨‹ç®¡ç†å±‚)
    â†“
DAO (æ•°æ®è®¿é—®å±‚)
```

**å±‚çº§èŒè´£**:
- **Controllerå±‚**: HTTPè¯·æ±‚å¤„ç†ã€å‚æ•°éªŒè¯ã€æƒé™æ§åˆ¶
- **Serviceå±‚**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†ã€ä¸šåŠ¡è§„åˆ™éªŒè¯
- **Managerå±‚**: å¤æ‚æµç¨‹ç¼–æ’ã€å¤šæ•°æ®ç»„è£…ã€ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- **DAOå±‚**: æ•°æ®åº“CRUDæ“ä½œã€SQLæŸ¥è¯¢å®ç°ã€æ•°æ®è®¿é—®è¾¹ç•Œ

**ä¸¥æ ¼ç¦æ­¢è·¨å±‚è®¿é—®**: Controllerä¸èƒ½ç›´æ¥è°ƒç”¨Manager/DAOï¼
### 1. æŠ¥è¡¨è®¾è®¡å™¨
## âš ï¸ IOE-DREAMé›¶å®¹å¿è§„åˆ™ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¿…é¡»éµå®ˆçš„æ¶æ„è§„åˆ™**:
- âœ… **å¿…é¡»ä½¿ç”¨ @Resource æ³¨å…¥ä¾èµ–**
- âœ… **å¿…é¡»ä½¿ç”¨ @Mapper æ³¨è§£** (ç¦æ­¢@Repository)
- âœ… **å¿…é¡»ä½¿ç”¨ Dao åç¼€** (ç¦æ­¢Repository)
- âœ… **å¿…é¡»ä½¿ç”¨ @RestController æ³¨è§£**
- âœ… **å¿…é¡»ä½¿ç”¨ @Valid å‚æ•°æ ¡éªŒ**
- âœ… **å¿…é¡»è¿”å›ç»Ÿä¸€ResponseDTOæ ¼å¼**
- âœ… **å¿…é¡»éµå¾ªå››å±‚æ¶æ„è¾¹ç•Œ**

**ä¸¥æ ¼ç¦æ­¢äº‹é¡¹**:
- âŒ **ç¦æ­¢ä½¿ç”¨ @Autowired æ³¨å…¥**
- âŒ **ç¦æ­¢ä½¿ç”¨ @Repository æ³¨è§£**
- âŒ **ç¦æ­¢ä½¿ç”¨ Repository åç¼€å‘½å**
- âŒ **ç¦æ­¢è·¨å±‚è®¿é—®**
- âŒ **ç¦æ­¢åœ¨Controllerä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘**
- âŒ **ç¦æ­¢ç›´æ¥è®¿é—®æ•°æ®åº“**

**è¿è§„åæœ**: P0çº§é—®é¢˜ï¼Œç«‹å³ä¿®å¤ï¼Œç¦æ­¢åˆå¹¶ï¼

```vue
<!-- src/views/business/attendance/reports/templates/components/TemplateDesigner.vue -->
<template>
  <div class="template-designer">
    <div class="designer-header">
      <h3>æŠ¥è¡¨æ¨¡æ¿è®¾è®¡å™¨</h3>
      <div class="designer-actions">
        <a-button @click="saveTemplate" :loading="saving">
          <template #icon><SaveOutlined /></template>
          ä¿å­˜æ¨¡æ¿
        </a-button>
        <a-button @click="previewTemplate">
          <template #icon><EyeOutlined /></template>
          é¢„è§ˆ
        </a-button>
        <a-button type="primary" @click="generateReport">
          <template #icon><FileTextOutlined /></template>
          ç”ŸæˆæŠ¥è¡¨
        </a-button>
      </div>
    </div>

    <!-- è®¾è®¡å™¨ä¸»ä½“ -->
    <div class="designer-body">
      <!-- å·¦ä¾§ç»„ä»¶é¢æ¿ -->
      <div class="component-panel">
        <a-card title="ç»„ä»¶åº“" :bordered="false" size="small">
          <a-collapse v-model:activeKey="activeComponentKeys" size="small">
            <a-collapse-panel key="charts" header="å›¾è¡¨ç»„ä»¶">
              <div class="component-list">
                <div
                  v-for="component in chartComponents"
                  :key="component.type"
                  class="component-item"
                  draggable="true"
                  @dragstart="handleDragStart($event, component)"
                >
                  <component :is="component.icon" />
                  <span>{{ component.name }}</span>
                </div>
              </div>
            </a-collapse-panel>
            <a-collapse-panel key="tables" header="è¡¨æ ¼ç»„ä»¶">
              <div class="component-list">
                <div
                  v-for="component in tableComponents"
                  :key="component.type"
                  class="component-item"
                  draggable="true"
                  @dragstart="handleDragStart($event, component)"
                >
                  <component :is="component.icon" />
                  <span>{{ component.name }}</span>
                </div>
              </div>
            </a-collapse-panel>
            <a-collapse-panel key="basic" header="åŸºç¡€ç»„ä»¶">
              <div class="component-list">
                <div
                  v-for="component in basicComponents"
                  :key="component.type"
                  class="component-item"
                  draggable="true"
                  @dragstart="handleDragStart($event, component)"
                >
                  <component :is="component.icon" />
                  <span>{{ component.name }}</span>
                </div>
              </div>
            </a-collapse-panel>
          </a-collapse>
        </a-card>
      </div>

      <!-- ä¸­é—´è®¾è®¡ç”»å¸ƒ -->
      <div class="design-canvas">
        <div class="canvas-toolbar">
          <a-space>
            <a-button size="small" @click="undo">
              <template #icon><UndoOutlined /></template>
              æ’¤é”€
            </a-button>
            <a-button size="small" @click="redo">
              <template #icon><RedoOutlined /></template>
              é‡åš
            </a-button>
            <a-divider type="vertical" />
            <a-button size="small" @click="clearCanvas">
              <template #icon><ClearOutlined /></template>
              æ¸…ç©º
            </a-button>
            <a-button size="small" @click="toggleGrid">
              <template #icon><BorderOutlined /></template>
              ç½‘æ ¼
            </a-button>
          </a-space>
        </div>

        <div
          ref="canvasRef"
          class="canvas-area"
          :class="{ 'show-grid': showGrid }"
          @drop="handleDrop"
          @dragover.prevent
          @click="clearSelection"
        >
          <div
            v-for="(component, index) in canvasComponents"
            :key="component.id"
            class="canvas-component"
            :class="{ selected: selectedComponentId === component.id }"
            :style="getComponentStyle(component)"
            @click.stop="selectComponent(component)"
            @mousedown="handleComponentMouseDown($event, component)"
          >
            <!-- æ¸²æŸ“ç»„ä»¶ -->
            <component
              :is="getComponentRenderer(component.type)"
              :config="component.config"
              :data="component.data"
              @config-change="handleComponentConfigChange"
            />

            <!-- ç»„ä»¶æ“ä½œæŒ‰é’® -->
            <div class="component-actions" v-if="selectedComponentId === component.id">
              <a-button-group size="small">
                <a-button @click.stop="editComponent(component)">
                  <template #icon><EditOutlined /></template>
                </a-button>
                <a-button @click.stop="copyComponent(component)">
                  <template #icon><CopyOutlined /></template>
                </a-button>
                <a-button @click.stop="deleteComponent(component)">
                  <template #icon><DeleteOutlined /></template>
                </a-button>
              </a-button-group>
            </div>

            <!-- è°ƒæ•´å¤§å°æ‰‹æŸ„ -->
            <div
              v-if="selectedComponentId === component.id && component.resizable"
              class="resize-handles"
            >
              <div class="handle handle-nw" @mousedown.stop="startResize($event, component, 'nw')"></div>
              <div class="handle handle-ne" @mousedown.stop="startResize($event, component, 'ne')"></div>
              <div class="handle handle-sw" @mousedown.stop="startResize($event, component, 'sw')"></div>
              <div class="handle handle-se" @mousedown.stop="startResize($event, component, 'se')"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- å³ä¾§å±æ€§é¢æ¿ -->
      <div class="properties-panel">
        <a-card title="å±æ€§è®¾ç½®" :bordered="false" size="small">
          <div v-if="selectedComponent">
            <component
              :is="getPropertiesEditor(selectedComponent.type)"
              :config="selectedComponent.config"
              @change="handlePropertyChange"
            />
          </div>
          <div v-else class="no-selection">
            <a-empty description="è¯·é€‰æ‹©ä¸€ä¸ªç»„ä»¶" />
          </div>
        </a-card>

        <!-- æ¨¡æ¿å±æ€§ -->
        <a-card title="æ¨¡æ¿å±æ€§" :bordered="false" size="small" style="margin-top: 8px;">
          <a-form layout="vertical" size="small">
            <a-form-item label="æ¨¡æ¿åç§°">
              <a-input v-model:value="templateInfo.name" placeholder="è¯·è¾“å…¥æ¨¡æ¿åç§°" />
            </a-form-item>
            <a-form-item label="æ¨¡æ¿æè¿°">
              <a-textarea v-model:value="templateInfo.description" :rows="3" placeholder="è¯·è¾“å…¥æ¨¡æ¿æè¿°" />
            </a-form-item>
            <a-form-item label="é¡µé¢è®¾ç½®">
              <a-checkbox-group v-model:value="templateInfo.pageSettings">
                <a-checkbox value="landscape">æ¨ªå‘</a-checkbox>
                <a-checkbox value="showHeader">æ˜¾ç¤ºé¡µçœ‰</a-checkbox>
                <a-checkbox value="showFooter">æ˜¾ç¤ºé¡µè„š</a-checkbox>
              </a-checkbox-group>
            </a-form-item>
          </a-form>
        </a-card>
      </div>
    </div>

    <!-- ç»„ä»¶ç¼–è¾‘å¼¹çª— -->
    <a-modal
      v-model:open="editModalVisible"
      title="ç¼–è¾‘ç»„ä»¶"
      @ok="handleEditConfirm"
      @cancel="editModalVisible = false"
      width="800px"
    >
      <component
        :is="getComponentEditor(editingComponent?.type)"
        v-if="editingComponent"
        :config="editingComponent.config"
        @change="handleEditorChange"
      />
    </a-modal>

    <!-- é¢„è§ˆå¼¹çª— -->
    <a-modal
      v-model:open="previewVisible"
      title="æŠ¥è¡¨é¢„è§ˆ"
      :footer="null"
      width="1200px"
    >
      <ReportPreview
        :template="currentTemplate"
        :data="previewData"
      />
    </a-modal>
  </div>
</template>

<script setup>
import { ref, reactive, computed } from 'vue';
import { message } from 'ant-design-vue';
import {
  SaveOutlined,
  EyeOutlined,
  FileTextOutlined,
  UndoOutlined,
  RedoOutlined,
  ClearOutlined,
  BorderOutlined,
  EditOutlined,
  CopyOutlined,
  DeleteOutlined,
  BarChartOutlined,
  LineChartOutlined,
  PieChartOutlined,
  TableOutlined,
  TitleOutlined,
  TextOutlined
} from '@ant-design/icons-vue';

const emit = defineEmits(['save', 'generate']);

const canvasRef = ref();
const saving = ref(false);
const previewVisible = ref(false);
const editModalVisible = ref(false);
const showGrid = ref(true);

const activeComponentKeys = ref(['charts', 'tables', 'basic']);
const selectedComponentId = ref(null);
const editingComponent = ref(null);

const canvasComponents = ref([]);
const previewData = ref({});

const templateInfo = reactive({
  name: '',
  description: '',
  pageSettings: ['landscape', 'showHeader']
});

// ç»„ä»¶åº“å®šä¹‰
const chartComponents = [
  { type: 'bar-chart', name: 'æŸ±çŠ¶å›¾', icon: 'BarChartOutlined' },
  { type: 'line-chart', name: 'æŠ˜çº¿å›¾', icon: 'LineChartOutlined' },
  { type: 'pie-chart', name: 'é¥¼å›¾', icon: 'PieChartOutlined' },
  { type: 'gauge-chart', name: 'ä»ªè¡¨ç›˜', icon: 'DashboardOutlined' },
  { type: 'scatter-chart', name: 'æ•£ç‚¹å›¾', icon: 'DotChartOutlined' }
];

const tableComponents = [
  { type: 'data-table', name: 'æ•°æ®è¡¨æ ¼', icon: 'TableOutlined' },
  { type: 'summary-table', name: 'æ±‡æ€»è¡¨æ ¼', icon: 'TableOutlined' },
  { type: 'comparison-table', name: 'å¯¹æ¯”è¡¨æ ¼', icon: 'TableOutlined' }
];

const basicComponents = [
  { type: 'title', name: 'æ ‡é¢˜', icon: 'TitleOutlined' },
  { type: 'text', name: 'æ–‡æœ¬', icon: 'TextOutlined' },
  { type: 'divider', name: 'åˆ†å‰²çº¿', icon: 'MinusOutlined' },
  { type: 'image', name: 'å›¾ç‰‡', icon: 'PictureOutlined' },
  { type: 'spacer', name: 'å ä½ç¬¦', icon: 'BorderOutlined' }
];

// å½“å‰é€‰ä¸­çš„ç»„ä»¶
const selectedComponent = computed(() => {
  return canvasComponents.value.find(c => c.id === selectedComponentId.value);
});

// å½“å‰æ¨¡æ¿
const currentTemplate = computed(() => ({
  name: templateInfo.name,
  description: templateInfo.description,
  pageSettings: templateInfo.pageSettings,
  components: canvasComponents.value
}));

// æ‹–æ‹½å¼€å§‹
const handleDragStart = (event, component) => {
  event.dataTransfer.setData('component', JSON.stringify(component));
};

// æ”¾ç½®ç»„ä»¶
const handleDrop = (event) => {
  event.preventDefault();
  const componentData = JSON.parse(event.dataTransfer.getData('component'));

  const rect = canvasRef.value.getBoundingClientRect();
  const x = event.clientX - rect.left;
  const y = event.clientY - rect.top;

  const newComponent = {
    id: `component-${Date.now()}`,
    type: componentData.type,
    name: componentData.name,
    x: x,
    y: y,
    width: 200,
    height: 150,
    config: getDefaultConfig(componentData.type),
    data: null,
    resizable: true
  };

  canvasComponents.value.push(newComponent);
};

// è·å–é»˜è®¤é…ç½®
const getDefaultConfig = (type) => {
  const defaultConfigs = {
    'bar-chart': {
      title: 'æŸ±çŠ¶å›¾',
      xAxis: 'category',
      yAxis: 'value',
      colors: ['#1890ff', '#52c41a', '#faad14']
    },
    'line-chart': {
      title: 'æŠ˜çº¿å›¾',
      xAxis: 'time',
      yAxis: 'value',
      smooth: true
    },
    'data-table': {
      title: 'æ•°æ®è¡¨æ ¼',
      showPagination: true,
      pageSize: 10,
      columns: []
    },
    'title': {
      text: 'æ ‡é¢˜',
      fontSize: 24,
      fontWeight: 'bold',
      align: 'center'
    },
    'text': {
      text: 'æ–‡æœ¬å†…å®¹',
      fontSize: 14,
      color: '#000000'
    }
  };

  return defaultConfigs[type] || {};
};

// è·å–ç»„ä»¶æ ·å¼
const getComponentStyle = (component) => {
  return {
    position: 'absolute',
    left: `${component.x}px`,
    top: `${component.y}px`,
    width: `${component.width}px`,
    height: `${component.height}px`,
    border: selectedComponentId.value === component.id ? '2px solid #1890ff' : '1px solid #d9d9d9'
  };
};

// è·å–ç»„ä»¶æ¸²æŸ“å™¨
const getComponentRenderer = (type) => {
  // è¿™é‡Œè¿”å›å¯¹åº”çš„ç»„ä»¶æ¸²æŸ“å™¨
  return 'div'; // ç®€åŒ–ç¤ºä¾‹
};

// è·å–å±æ€§ç¼–è¾‘å™¨
const getPropertiesEditor = (type) => {
  // è¿™é‡Œè¿”å›å¯¹åº”çš„å±æ€§ç¼–è¾‘å™¨
  return 'div'; // ç®€åŒ–ç¤ºä¾‹
};

// è·å–ç»„ä»¶ç¼–è¾‘å™¨
const getComponentEditor = (type) => {
  // è¿™é‡Œè¿”å›å¯¹åº”çš„ç»„ä»¶ç¼–è¾‘å™¨
  return 'div'; // ç®€åŒ–ç¤ºä¾‹
};

// é€‰æ‹©ç»„ä»¶
const selectComponent = (component) => {
  selectedComponentId.value = component.id;
};

// æ¸…é™¤é€‰æ‹©
const clearSelection = () => {
  selectedComponentId.value = null;
};

// ç¼–è¾‘ç»„ä»¶
const editComponent = (component) => {
  editingComponent.value = { ...component };
  editModalVisible.value = true;
};

// å¤åˆ¶ç»„ä»¶
const copyComponent = (component) => {
  const newComponent = {
    ...component,
    id: `component-${Date.now()}`,
    x: component.x + 20,
    y: component.y + 20
  };
  canvasComponents.value.push(newComponent);
};

// åˆ é™¤ç»„ä»¶
const deleteComponent = (component) => {
  const index = canvasComponents.value.findIndex(c => c.id === component.id);
  if (index > -1) {
    canvasComponents.value.splice(index, 1);
    if (selectedComponentId.value === component.id) {
      selectedComponentId.value = null;
    }
  }
};

// ç»„ä»¶é…ç½®å˜åŒ–
const handleComponentConfigChange = (componentId, config) => {
  const component = canvasComponents.value.find(c => c.id === componentId);
  if (component) {
    component.config = { ...component.config, ...config };
  }
};

// å±æ€§å˜åŒ–
const handlePropertyChange = (config) => {
  if (selectedComponent.value) {
    selectedComponent.value.config = { ...selectedComponent.value.config, ...config };
  }
};

// ç¼–è¾‘å™¨å˜åŒ–
const handleEditorChange = (config) => {
  if (editingComponent.value) {
    editingComponent.value.config = config;
  }
};

// ç¼–è¾‘ç¡®è®¤
const handleEditConfirm = () => {
  if (editingComponent.value) {
    const component = canvasComponents.value.find(c => c.id === editingComponent.value.id);
    if (component) {
      component.config = editingComponent.value.config;
    }
  }
  editModalVisible.value = false;
};

// æ’¤é”€
const undo = () => {
  // å®ç°æ’¤é”€é€»è¾‘
};

// é‡åš
const redo = () => {
  // å®ç°é‡åšé€»è¾‘
};

// æ¸…ç©ºç”»å¸ƒ
const clearCanvas = () => {
  canvasComponents.value = [];
  selectedComponentId.value = null;
};

// åˆ‡æ¢ç½‘æ ¼
const toggleGrid = () => {
  showGrid.value = !showGrid.value;
};

// ä¿å­˜æ¨¡æ¿
const saveTemplate = async () => {
  if (!templateInfo.name) {
    message.warning('è¯·è¾“å…¥æ¨¡æ¿åç§°');
    return;
  }

  saving.value = true;
  try {
    const templateData = {
      ...templateInfo,
      components: canvasComponents.value
    };

    // è¿™é‡Œåº”è¯¥è°ƒç”¨ä¿å­˜API
    console.log('ä¿å­˜æ¨¡æ¿:', templateData);

    message.success('æ¨¡æ¿ä¿å­˜æˆåŠŸ');
    emit('save', templateData);
  } catch (error) {
    message.error('æ¨¡æ¿ä¿å­˜å¤±è´¥');
  } finally {
    saving.value = false;
  }
};

// é¢„è§ˆæ¨¡æ¿
const previewTemplate = async () => {
  try {
    // è·å–é¢„è§ˆæ•°æ®
    previewData.value = await getPreviewData();
    previewVisible.value = true;
  } catch (error) {
    message.error('è·å–é¢„è§ˆæ•°æ®å¤±è´¥');
  }
};

// ç”ŸæˆæŠ¥è¡¨
const generateReport = () => {
  emit('generate', currentTemplate.value);
};

// è·å–é¢„è§ˆæ•°æ®
const getPreviewData = async () => {
  // æ¨¡æ‹Ÿè·å–é¢„è§ˆæ•°æ®
  return {
    charts: [
      { type: 'bar', data: [120, 200, 150, 80, 70, 110, 130] },
      { type: 'line', data: [820, 932, 901, 934, 1290, 1330, 1320] }
    ],
    tables: [
      {
        headers: ['å§“å', 'éƒ¨é—¨', 'å‡ºå‹¤å¤©æ•°', 'è¿Ÿåˆ°æ¬¡æ•°', 'æ—©é€€æ¬¡æ•°'],
        rows: [
          ['å¼ ä¸‰', 'æŠ€æœ¯éƒ¨', 22, 2, 1],
          ['æå››', 'äººäº‹éƒ¨', 23, 0, 0]
        ]
      }
    ]
  };
};

// ç»„ä»¶é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ï¼ˆç”¨äºæ‹–æ‹½ç§»åŠ¨ï¼‰
const handleComponentMouseDown = (event, component) => {
  const startX = event.clientX;
  const startY = event.clientY;
  const originalX = component.x;
  const originalY = component.y;

  const handleMouseMove = (e) => {
    const deltaX = e.clientX - startX;
    const deltaY = e.clientY - startY;
    component.x = originalX + deltaX;
    component.y = originalY + deltaY;
  };

  const handleMouseUp = () => {
    document.removeEventListener('mousemove', handleMouseMove);
    document.removeEventListener('mouseup', handleMouseUp);
  };

  document.addEventListener('mousemove', handleMouseMove);
  document.addEventListener('mouseup', handleMouseUp);
};

// å¼€å§‹è°ƒæ•´å¤§å°
const startResize = (event, component, handle) => {
  event.preventDefault();
  event.stopPropagation();

  const startX = event.clientX;
  const startY = event.clientY;
  const originalWidth = component.width;
  const originalHeight = component.height;

  const handleMouseMove = (e) => {
    const deltaX = e.clientX - startX;
    const deltaY = e.clientY - startY;

    switch (handle) {
      case 'se':
        component.width = Math.max(100, originalWidth + deltaX);
        component.height = Math.max(80, originalHeight + deltaY);
        break;
      case 'sw':
        component.width = Math.max(100, originalWidth - deltaX);
        component.height = Math.max(80, originalHeight + deltaY);
        component.x = component.x + deltaX;
        break;
      // å…¶ä»–æ–¹å‘çš„è°ƒæ•´é€»è¾‘
    }
  };

  const handleMouseUp = () => {
    document.removeEventListener('mousemove', handleMouseMove);
    document.removeEventListener('mouseup', handleMouseUp);
  };

  document.addEventListener('mousemove', handleMouseMove);
  document.addEventListener('mouseup', handleMouseUp);
};
</script>

<style scoped lang="less">
.template-designer {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: #f5f5f5;

  .designer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 24px;
    background: #fff;
    border-bottom: 1px solid #f0f0f0;

    h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
    }
  }

  .designer-body {
    flex: 1;
    display: flex;
    overflow: hidden;
  }

  .component-panel {
    width: 280px;
    background: #fff;
    border-right: 1px solid #f0f0f0;
    overflow-y: auto;

    .component-list {
      .component-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        margin: 4px;
        border: 1px solid #f0f0f0;
        border-radius: 4px;
        cursor: move;
        transition: all 0.3s;

        &:hover {
          border-color: #1890ff;
          background: #f0f8ff;
        }
      }
    }
  }

  .design-canvas {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #fff;

    .canvas-toolbar {
      padding: 8px 16px;
      border-bottom: 1px solid #f0f0f0;
    }

    .canvas-area {
      flex: 1;
      position: relative;
      overflow: auto;
      margin: 16px;
      background: #fff;
      border: 1px solid #f0f0f0;

      &.show-grid {
        background-image:
          linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
          linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
      }

      .canvas-component {
        cursor: move;

        &.selected {
          box-shadow: 0 0 0 2px #1890ff;
        }

        &:hover {
          box-shadow: 0 0 0 1px #40a9ff;
        }

        .component-actions {
          position: absolute;
          top: -35px;
          right: 0;
          background: #fff;
          border: 1px solid #d9d9d9;
          border-radius: 4px;
          padding: 2px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .resize-handles {
          position: absolute;
          width: 100%;
          height: 100%;

          .handle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #1890ff;
            border: 1px solid #fff;

            &.handle-nw { top: -4px; left: -4px; cursor: nw-resize; }
            &.handle-ne { top: -4px; right: -4px; cursor: ne-resize; }
            &.handle-sw { bottom: -4px; left: -4px; cursor: sw-resize; }
            &.handle-se { bottom: -4px; right: -4px; cursor: se-resize; }
          }
        }
      }
    }
  }

  .properties-panel {
    width: 320px;
    background: #fff;
    border-left: 1px solid #f0f0f0;
    overflow-y: auto;

    .no-selection {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 200px;
    }
  }
}
</style>
```

### 2. éƒ¨é—¨å¯¹æ¯”åˆ†æ

```vue
<!-- src/views/business/attendance/reports/department/components/ComparisonAnalysis.vue -->
<template>
  <div class="comparison-analysis">
    <!-- åˆ†æé…ç½® -->
    <div class="analysis-config">
      <a-card title="å¯¹æ¯”åˆ†æé…ç½®" :bordered="false">
        <a-form layout="inline" :model="configForm">
          <a-form-item label="å¯¹æ¯”ç»´åº¦">
            <a-select
              v-model:value="configForm.dimension"
              placeholder="é€‰æ‹©å¯¹æ¯”ç»´åº¦"
              style="width: 150px"
              @change="handleDimensionChange"
            >
              <a-select-option value="department">éƒ¨é—¨å¯¹æ¯”</a-select-option>
              <a-select-option value="time">æ—¶é—´å¯¹æ¯”</a-select-option>
              <a-select-option value="type">ç±»å‹å¯¹æ¯”</a-select-option>
            </a-select>
          </a-form-item>

          <a-form-item label="å¯¹æ¯”æŒ‡æ ‡">
            <a-select
              v-model:value="configForm.metrics"
              mode="multiple"
              placeholder="é€‰æ‹©æŒ‡æ ‡"
              style="width: 200px"
            >
              <a-select-option value="attendance_rate">å‡ºå‹¤ç‡</a-select-option>
              <a-select-option value="late_rate">è¿Ÿåˆ°ç‡</a-select-option>
              <a-select-option value="overtime_hours">åŠ ç­æ—¶é•¿</a-select-option>
              <a-select-option value="leave_days">è¯·å‡å¤©æ•°</a-select-option>
            </a-select>
          </a-form-item>

          <a-form-item label="æ—¶é—´èŒƒå›´">
            <a-range-picker
              v-model:value="configForm.dateRange"
              :shortcuts="dateShortcuts"
              style="width: 240px"
            />
          </a-form-item>

          <a-form-item>
            <a-button type="primary" @click="executeAnalysis" :loading="analyzing">
              <template #icon><BarChartOutlined /></template>
              å¼€å§‹åˆ†æ
            </a-button>
          </a-form-item>
        </a-form>
      </a-card>
    </div>

    <!-- åˆ†æç»“æœ -->
    <div class="analysis-results" v-if="analysisResults">
      <!-- æ€»è§ˆç»Ÿè®¡ -->
      <div class="overview-stats">
        <a-row :gutter="16">
          <a-col :span="6" v-for="(stat, index) in overviewStats" :key="index">
            <a-card :bordered="false">
              <a-statistic
                :title="stat.title"
                :value="stat.value"
                :suffix="stat.suffix"
                :value-style="{ color: stat.color }"
                :prefix="stat.prefix"
              />
              <div class="stat-trend" v-if="stat.trend">
                <component :is="stat.trend > 0 ? 'ArrowUpOutlined' : 'ArrowDownOutlined'"
                          :style="{ color: stat.trend > 0 ? '#52c41a' : '#ff4d4f' }" />
                <span>{{ Math.abs(stat.trend) }}%</span>
                <span class="trend-text">è¾ƒä¸ŠæœŸ</span>
              </div>
            </a-card>
          </a-col>
        </a-row>
      </div>

      <!-- å›¾è¡¨å±•ç¤º -->
      <div class="charts-container">
        <a-row :gutter="16">
          <a-col :span="12">
            <a-card title="å¯¹æ¯”å›¾è¡¨" :bordered="false">
              <ComparisonChart
                :data="analysisResults.chartData"
                :type="configForm.dimension"
                :metrics="configForm.metrics"
              />
            </a-card>
          </a-col>
          <a-col :span="12">
            <a-card title="æ’ååˆ†æ" :bordered="false">
              <RankingChart
                :data="analysisResults.rankingData"
                :metric="configForm.metrics[0]"
              />
            </a-card>
          </a-col>
        </a-row>

        <a-row :gutter="16" style="margin-top: 16px;">
          <a-col :span="24">
            <a-card title="è¯¦ç»†å¯¹æ¯”è¡¨" :bordered="false">
              <ComparisonTable
                :data="analysisResults.tableData"
                :metrics="configForm.metrics"
                :dimension="configForm.dimension"
              />
            </a-card>
          </a-col>
        </a-row>
      </div>

      <!-- åˆ†æç»“è®º -->
      <div class="analysis-conclusions">
        <a-card title="åˆ†æç»“è®º" :bordered="false">
          <div class="conclusions-content">
            <div v-for="(conclusion, index) in analysisResults.conclusions" :key="index" class="conclusion-item">
              <div class="conclusion-header">
                <a-tag :color="getConclusionColor(conclusion.type)">
                  {{ getConclusionTypeText(conclusion.type) }}
                </a-tag>
                <h4>{{ conclusion.title }}</h4>
              </div>
              <div class="conclusion-content">
                <p>{{ conclusion.description }}</p>
                <div v-if="conclusion.suggestions" class="suggestions">
                  <h5>æ”¹è¿›å»ºè®®ï¼š</h5>
                  <ul>
                    <li v-for="(suggestion, idx) in conclusion.suggestions" :key="idx">
                      {{ suggestion }}
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </a-card>
      </div>
    </div>

    <!-- å¯¼å‡ºé…ç½® -->
    <div class="export-actions" v-if="analysisResults">
      <a-space>
        <a-button @click="exportReport">
          <template #icon><ExportOutlined /></template>
          å¯¼å‡ºæŠ¥å‘Š
        </a-button>
        <a-button @click="saveAnalysis">
          <template #icon><SaveOutlined /></template>
          ä¿å­˜åˆ†æ
        </a-button>
        <a-button @click="shareAnalysis">
          <template #icon><ShareAltOutlined /></template>
          åˆ†äº«åˆ†æ
        </a-button>
      </a-space>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive, computed, onMounted } from 'vue';
import { message } from 'ant-design-vue';
import {
  BarChartOutlined,
  ArrowUpOutlined,
  ArrowDownOutlined,
  ExportOutlined,
  SaveOutlined,
  ShareAltOutlined
} from '@ant-design/icons-vue';
import { departmentApi } from '/@/api/business/attendance/reports/department-api';
import dayjs from 'dayjs';
import ComparisonChart from './ComparisonChart.vue';
import RankingChart from './RankingChart.vue';
import ComparisonTable from './ComparisonTable.vue';

const emit = defineEmits(['export', 'save', 'share']);

const analyzing = ref(false);
const analysisResults = ref(null);

const configForm = reactive({
  dimension: 'department',
  metrics: ['attendance_rate'],
  dateRange: [
    dayjs().subtract(30, 'day'),
    dayjs()
  ]
});

const dateShortcuts = [
  {
    text: 'æœ€è¿‘7å¤©',
    value: () => [dayjs().subtract(7, 'day'), dayjs()],
  },
  {
    text: 'æœ€è¿‘30å¤©',
    value: () => [dayjs().subtract(30, 'day'), dayjs()],
  },
  {
    text: 'æœ¬æœˆ',
    value: () => [dayjs().startOf('month'), dayjs().endOf('month')],
  }
];

// æ€»è§ˆç»Ÿè®¡æ•°æ®
const overviewStats = computed(() => {
  if (!analysisResults.value) return [];

  const data = analysisResults.value.overview;
  return [
    {
      title: 'å¹³å‡å‡ºå‹¤ç‡',
      value: data.avgAttendanceRate,
      suffix: '%',
      color: '#52c41a',
      trend: data.attendanceRateTrend
    },
    {
      title: 'å¹³å‡è¿Ÿåˆ°ç‡',
      value: data.avgLateRate,
      suffix: '%',
      color: '#faad14',
      trend: data.lateRateTrend
    },
    {
      title: 'æ€»åŠ ç­æ—¶é•¿',
      value: data.totalOvertimeHours,
      suffix: 'å°æ—¶',
      color: '#1890ff',
      trend: data.overtimeTrend
    },
    {
      title: 'å¼‚å¸¸æ€»æ•°',
      value: data.totalExceptions,
      color: '#ff4d4f',
      trend: data.exceptionTrend
    }
  ];
});

// æ‰§è¡Œåˆ†æ
const executeAnalysis = async () => {
  if (!validateConfig()) {
    return;
  }

  analyzing.value = true;
  try {
    const params = {
      ...configForm,
      startDate: configForm.dateRange[0].format('YYYY-MM-DD'),
      endDate: configForm.dateRange[1].format('YYYY-MM-DD')
    };

    const response = await departmentApi.getComparisonAnalysis(params);
    analysisResults.value = response.data;

    message.success('å¯¹æ¯”åˆ†æå®Œæˆ');
  } catch (error) {
    console.error('åˆ†æå¤±è´¥:', error);
    message.error('åˆ†æå¤±è´¥');
  } finally {
    analyzing.value = false;
  }
};

// éªŒè¯é…ç½®
const validateConfig = () => {
  if (!configForm.metrics || configForm.metrics.length === 0) {
    message.warning('è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªå¯¹æ¯”æŒ‡æ ‡');
    return false;
  }

  if (!configForm.dateRange || configForm.dateRange.length !== 2) {
    message.warning('è¯·é€‰æ‹©æ—¶é—´èŒƒå›´');
    return false;
  }

  return true;
};

// ç»´åº¦å˜åŒ–
const handleDimensionChange = () => {
  // æ ¹æ®ç»´åº¦è°ƒæ•´å¯ç”¨æŒ‡æ ‡
  console.log('ç»´åº¦å˜åŒ–:', configForm.dimension);
};

// è·å–ç»“è®ºé¢œè‰²
const getConclusionColor = (type) => {
  const colorMap = {
    positive: 'green',
    warning: 'orange',
    negative: 'red',
    info: 'blue'
  };
  return colorMap[type] || 'default';
};

// è·å–ç»“è®ºç±»å‹æ–‡æœ¬
const getConclusionTypeText = (type) => {
  const textMap = {
    positive: 'ä¼˜åŠ¿',
    warning: 'è­¦å‘Š',
    negative: 'é—®é¢˜',
    info: 'ä¿¡æ¯'
  };
  return textMap[type] || 'æœªçŸ¥';
};

// å¯¼å‡ºæŠ¥å‘Š
const exportReport = () => {
  emit('export', {
    type: 'comparison',
    data: analysisResults.value,
    config: configForm
  });
};

// ä¿å­˜åˆ†æ
const saveAnalysis = () => {
  emit('save', {
    type: 'comparison',
    data: analysisResults.value,
    config: configForm
  });
};

// åˆ†äº«åˆ†æ
const shareAnalysis = () => {
  emit('share', {
    type: 'comparison',
    data: analysisResults.value,
    config: configForm
  });
};

onMounted(() => {
  // åˆå§‹åŒ–
});
</script>

<style scoped lang="less">
.comparison-analysis {
  .analysis-config {
    margin-bottom: 24px;
  }

  .overview-stats {
    margin-bottom: 24px;

    .stat-trend {
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 12px;

      .trend-text {
        color: #999;
        margin-left: 4px;
      }
    }
  }

  .charts-container {
    margin-bottom: 24px;
  }

  .analysis-conclusions {
    margin-bottom: 24px;

    .conclusions-content {
      .conclusion-item {
        margin-bottom: 24px;
        padding: 16px;
        background: #fafafa;
        border-radius: 8px;

        .conclusion-header {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 12px;

          h4 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
          }
        }

        .conclusion-content {
          p {
            margin-bottom: 12px;
            line-height: 1.6;
          }

          .suggestions {
            h5 {
              margin-bottom: 8px;
              font-weight: 600;
            }

            ul {
              margin: 0;
              padding-left: 20px;

              li {
                margin-bottom: 4px;
              }
            }
          }
        }
      }
    }
  }

  .export-actions {
    text-align: center;
    padding: 16px 0;
    border-top: 1px solid #f0f0f0;
  }
}
</style>
```

## Mockæ•°æ®ç¤ºä¾‹

```javascript
// src/mock/reports-mock.js
export const mockPersonalSummary = {
  employeeId: 'emp001',
  employeeName: 'å¼ ä¸‰',
  department: 'æŠ€æœ¯éƒ¨',
  position: 'é«˜çº§å·¥ç¨‹å¸ˆ',
  monthSummary: {
    totalDays: 22,
    workDays: 20,
    leaveDays: 2,
    attendanceRate: 95.5,
    lateCount: 3,
    earlyCount: 1,
    overtimeHours: 12.5
  },
  trendData: [
    { month: '2024-01', attendanceRate: 95.5, overtimeHours: 12.5 },
    { month: '2024-02', attendanceRate: 98.2, overtimeHours: 8.0 }
  ]
};

export const mockDepartmentStatistics = {
  totalDepartments: 10,
  totalEmployees: 500,
  avgAttendanceRate: 96.2,
  avgOvertimeHours: 15.3,
  comparisonData: [
    { department: 'æŠ€æœ¯éƒ¨', attendanceRate: 95.5, overtimeHours: 18.2 },
    { department: 'äººäº‹éƒ¨', attendanceRate: 98.2, overtimeHours: 8.5 }
  ]
};

export const mockReportTemplates = [
  {
    id: 'tpl001',
    name: 'æœˆåº¦è€ƒå‹¤æ±‡æ€»æŠ¥è¡¨',
    description: 'æœˆåº¦å‘˜å·¥è€ƒå‹¤æƒ…å†µæ±‡æ€»',
    type: 'monthly',
    category: 'summary',
    components: [
      {
        id: 'comp001',
        type: 'title',
        config: { text: 'æœˆåº¦è€ƒå‹¤æ±‡æ€»', fontSize: 24, align: 'center' }
      }
    ]
  }
];

export default {
  mockPersonalSummary,
  mockDepartmentStatistics,
  mockReportTemplates
};
```

## å¼€å‘æ³¨æ„äº‹é¡¹æ€»ç»“

### æ ¸å¿ƒåŠŸèƒ½è¦ç‚¹
1. **å¯è§†åŒ–è®¾è®¡** - ç›´è§‚çš„æŠ¥è¡¨è®¾è®¡å™¨ç•Œé¢
2. **æ‹–æ‹½æ“ä½œ** - ç»„ä»¶åŒ–çš„æ‹–æ‹½å¼è®¾è®¡
3. **å¤šç»´åˆ†æ** - å¤šç»´åº¦çš„æ•°æ®åˆ†æèƒ½åŠ›
4. **æ¨¡æ¿ç³»ç»Ÿ** - å¯å¤ç”¨çš„æŠ¥è¡¨æ¨¡æ¿
5. **å®æ—¶é¢„è§ˆ** - è®¾è®¡è¿‡ç¨‹ä¸­çš„å®æ—¶é¢„è§ˆ
6. **çµæ´»å¯¼å‡º** - å¤šç§æ ¼å¼çš„å¯¼å‡ºæ”¯æŒ

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. å¤§æ•°æ®é‡çš„è™šæ‹Ÿæ»šåŠ¨
2. å›¾è¡¨æ¸²æŸ“çš„æ€§èƒ½ä¼˜åŒ–
3. æ¨¡æ¿æ•°æ®çš„ç¼“å­˜æœºåˆ¶
4. å¼‚æ­¥çš„æ•°æ®åŠ è½½

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–
1. ç›´è§‚çš„è®¾è®¡ç•Œé¢
2. ä¸°å¯Œçš„ç»„ä»¶åº“
3. å®æ—¶çš„é¢„è§ˆåé¦ˆ
4. ä¾¿æ·çš„æ“ä½œæ–¹å¼

## æ€»ç»“

æ±‡æ€»æŠ¥è¡¨æ¨¡å—ä½œä¸ºè€ƒå‹¤ç³»ç»Ÿçš„æ•°æ®åˆ†æä¸­å¿ƒï¼Œéœ€è¦é‡ç‚¹å…³æ³¨ï¼š

- æŠ¥è¡¨è®¾è®¡çš„çµæ´»æ€§å’Œæ˜“ç”¨æ€§
- æ•°æ®å¯è§†åŒ–çš„ç›´è§‚æ€§å’Œç¾è§‚æ€§
- åˆ†æåŠŸèƒ½çš„æ·±åº¦å’Œå‡†ç¡®æ€§
- å¯¼å‡ºåŠŸèƒ½çš„å®Œæ•´æ€§å’Œå¤šæ ·æ€§
- æ¨¡æ¿ç³»ç»Ÿçš„å¯æ‰©å±•æ€§

é€šè¿‡éµå¾ªæœ¬æ–‡æ¡£çš„æŠ€æœ¯è§„èŒƒï¼Œå¯ä»¥æ„å»ºå‡ºåŠŸèƒ½å®Œå–„ã€ç”¨æˆ·å‹å¥½çš„æ±‡æ€»æŠ¥è¡¨æ¨¡å—ã€‚