# ZKBioSecurity-ACC门禁系统 - 系统配置模块流程图

## 系统配置模块流程图

```mermaid
graph TB
    subgraph 系统配置模块
        ConfigStart(系统配置开始) --> ConfigChoose{选择配置类型}

        ConfigChoose -->|系统参数| SysParams
        ConfigChoose -->|用户权限| UserAuth
        ConfigChoose -->|许可证管理| LicenseManage
        ConfigChoose -->|备份恢复| BackupRecover

        subgraph 系统参数配置流程
            SysParams --> BasicSet[基础设置]
            BasicSet --> RuntimeParams[运行参数]
            RuntimeParams --> PerformanceParams[性能参数]
            PerformanceParams --> SecurityParams[安全参数]
            SecurityParams --> ParamsEnd[参数配置完成]
        end

        subgraph 用户权限管理流程
            UserAuth --> UserCreate[用户创建]
            UserCreate --> RoleAssign[角色分配]
            RoleAssign --> AuthConfig[权限配置]
            AuthConfig --> UserAudit[用户审计]
            UserAudit --> AuthEnd[权限管理完成]
        end

        subgraph 许可证管理流程
            LicenseManage --> LicenseActivate[许可证激活]
            LicenseActivate --> LicenseVerify[许可证验证]
            LicenseVerify --> LicenseMonitor[许可证监控]
            LicenseMonitor --> LicenseRenew[许可证续期]
            LicenseRenew --> LicenseEnd[许可证管理完成]
        end

        subgraph 备份恢复流程
            BackupRecover --> BackupConfig[备份配置]
            BackupConfig --> BackupExec[备份执行]
            BackupExec --> BackupVerify[备份验证]
            BackupVerify --> RecoverTest[恢复测试]
            RecoverTest --> BackupEnd[备份恢复完成]
        end
    end
```

## 流程说明

### 系统参数配置流程
1. **基础设置**：配置系统基本信息、语言、时区等
2. **运行参数**：设置系统运行相关参数
3. **性能参数**：配置系统性能优化参数
4. **安全参数**：设置安全策略、密码策略等
5. **参数配置完成**：保存配置并重启相关服务

### 用户权限管理流程
1. **用户创建**：创建新用户账号
2. **角色分配**：为用户分配相应的角色
3. **权限配置**：配置用户的具体权限
4. **用户审计**：定期审计用户权限和操作记录

### 许可证管理流程
1. **许可证激活**：激活系统许可证
2. **许可证验证**：验证许可证的有效性
3. **许可证监控**：监控许可证使用情况
4. **许可证续期**：在许可证到期前进行续期

### 备份恢复流程
1. **备份配置**：配置备份策略和计划
2. **备份执行**：按计划执行数据备份
3. **备份验证**：验证备份数据的完整性
4. **恢复测试**：定期进行恢复测试

## 系统参数详细说明
## 📋 IOE-DREAM七微服务架构

**核心架构组成**:
- **Gateway Service (8080)**: API网关
- **Common Service (8088)**: 公共模块微服务
- **DeviceComm Service (8087)**: 设备通讯微服务
- **OA Service (8089)**: OA微服务
- **Access Service (8090)**: 门禁服务
- **Attendance Service (8091)**: 考勤服务
- **Video Service (8092)**: 视频服务
- **Consume Service (8094)**: 消费服务
- **Visitor Service (8095)**: 访客服务

**架构特点**:
- 基于Spring Boot 3.5.8 + Java 17
- 严格遵循企业级微服务规范
- 支持高并发、高可用、水平扩展

**技术栈标准**:
- **数据库**: MySQL 8.0 + Druid连接池
- **缓存**: Redis + Caffeine多级缓存
- **注册中心**: Nacos
- **配置中心**: Nacos Config
- **认证授权**: Sa-Token

## 🏗️ 四层架构规范

**标准架构模式**:
```
Controller (接口控制层)
    ↓
Service (核心业务层)
    ↓
Manager (流程管理层)
    ↓
DAO (数据访问层)
```

**层级职责**:
- **Controller层**: HTTP请求处理、参数验证、权限控制
- **Service层**: 核心业务逻辑、事务管理、业务规则验证
- **Manager层**: 复杂流程编排、多数据组装、第三方服务集成
- **DAO层**: 数据库CRUD操作、SQL查询实现、数据访问边界

**严格禁止跨层访问**: Controller不能直接调用Manager/DAO！
### 基础设置
## ⚠️ IOE-DREAM零容忍规则（强制执行）

**必须遵守的架构规则**:
- ✅ **必须使用 @Resource 注入依赖**
- ✅ **必须使用 @Mapper 注解** (禁止@Repository)
- ✅ **必须使用 Dao 后缀** (禁止Repository)
- ✅ **必须使用 @RestController 注解**
- ✅ **必须使用 @Valid 参数校验**
- ✅ **必须返回统一ResponseDTO格式**
- ✅ **必须遵循四层架构边界**

**严格禁止事项**:
- ❌ **禁止使用 @Autowired 注入**
- ❌ **禁止使用 @Repository 注解**
- ❌ **禁止使用 Repository 后缀命名**
- ❌ **禁止跨层访问**
- ❌ **禁止在Controller中包含业务逻辑**
- ❌ **禁止直接访问数据库**

**违规后果**: P0级问题，立即修复，禁止合并！
- **系统名称**：系统显示名称
- **系统语言**：中文、英文等
- **时区设置**：系统时区和时间格式
- **字符编码**：UTF-8等字符编码
- **日志级别**：系统日志记录级别

### 运行参数
- **服务端口**：系统服务监听端口
- **数据库连接池**：数据库连接池配置
- **缓存配置**：系统缓存相关配置
- **文件存储路径**：文件上传和存储路径
- **临时文件清理**：临时文件清理策略

### 性能参数
- **并发连接数**：最大并发连接数
- **查询超时时间**：数据库查询超时时间
- **缓存过期时间**：缓存数据过期时间
- **批量处理大小**：批量操作的数据量
- **内存使用限制**：系统内存使用限制

### 安全参数
- **密码策略**：密码复杂度要求
- **会话超时**：用户会话超时时间
- **登录失败锁定**：登录失败锁定策略
- **SSL/TLS配置**：安全传输协议配置
- **访问控制**：IP地址访问控制

## 用户权限类型
1. **系统管理员**：系统最高权限，可管理所有功能
2. **设备管理员**：设备相关管理权限
3. **区域管理员**：区域和权限管理权限
4. **监控员**：实时监控和事件查看权限
5. **普通用户**：基础使用权限

## 备份策略
1. **全量备份**：定期完整备份所有数据
2. **增量备份**：备份变更的数据
3. **差异备份**：备份自上次全量备份后的变更
4. **实时备份**：关键数据实时备份

## 关键控制点
- 系统配置变更需要管理员权限
- 重要参数变更需要备份当前配置
- 许可证到期前30天开始提醒
- 备份数据必须异地存储
- 恢复操作需要经过严格授权

## 注意事项
- 系统配置变更需要谨慎操作，可能影响系统稳定性
- 用户权限管理需要遵循最小权限原则
- 许可证管理需要确保系统合规使用
- 备份恢复需要定期测试，确保数据安全
- 所有配置变更都需要记录审计日志