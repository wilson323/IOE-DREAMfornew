# IOE-DREAM æ™ºæ…§å›­åŒºç§»åŠ¨ç«¯ - ä¼˜åŒ–è·¯çº¿å›¾

## ğŸ“… é¡¹ç›®æ¦‚è¿°

**å½“å‰çŠ¶æ€**: âœ… åŠŸèƒ½å¼€å‘å®Œæˆï¼ˆ48ä¸ªé¡µé¢ï¼Œ~52,000è¡Œä»£ç ï¼‰
**ä¼˜åŒ–å‘¨æœŸ**: çŸ­æœŸ1-2å‘¨ + ä¸­æœŸ1-2æœˆ
**ä¼˜åŒ–ç›®æ ‡**: ä¼ä¸šçº§è´¨é‡æ ‡å‡†ï¼Œç”Ÿäº§ç¯å¢ƒå°±ç»ª

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡è®¾å®š

### è´¨é‡ç›®æ ‡

| æŒ‡æ ‡ | å½“å‰æ°´å¹³ | ç›®æ ‡æ°´å¹³ | æå‡å¹…åº¦ |
|------|---------|---------|---------|
| **é¦–å±åŠ è½½æ—¶é—´** | 3-4ç§’ | < 2ç§’ | -50% |
| **é¡µé¢åˆ‡æ¢æµç•…åº¦** | è‰¯å¥½ | ä¼˜ç§€ | +30% |
| **å†…å­˜å ç”¨** | 80-120MB | < 80MB | -33% |
| **æµ‹è¯•è¦†ç›–ç‡** | 0% | 80%+ | +80% |
| **Bugå¯†åº¦** | æœªçŸ¥ | < 5/KLOC | ä¼ä¸šçº§ |
| **å…¼å®¹æ€§** | æœªæµ‹è¯• | 95%+ | å…¨é¢è¦†ç›– |

---

## ğŸ“‹ Phase 1: çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

### ä»»åŠ¡1.1: é›†æˆæµ‹è¯•ï¼ˆ3å¤©ï¼‰

#### 1.1.1 åŠŸèƒ½è”è°ƒæµ‹è¯•æ¸…å•

**æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•**ï¼ˆP0çº§ï¼‰:

```
è®¾å¤‡ç®¡ç†æ¨¡å— (device/):
  âœ… è®¾å¤‡åˆ—è¡¨ - æœç´¢ã€ç­›é€‰ã€åˆ†é¡µ
  âœ… è®¾å¤‡è¯¦æƒ… - ä¿¡æ¯å±•ç¤ºã€å®æ—¶çŠ¶æ€
  âœ… è®¾å¤‡æ·»åŠ  - è¡¨å•éªŒè¯ã€æ•°æ®æäº¤
  âœ… è®¾å¤‡ç¼–è¾‘ - ä¿¡æ¯ä¿®æ”¹ã€å›¾ç‰‡ä¸Šä¼ 
  âœ… è®¾å¤‡æ§åˆ¶ - è¿œç¨‹å¼€é—¨ã€å¸¸å¼€ã€é”å®š
  âœ… è®¾å¤‡ç›‘æ§ - çŠ¶æ€æ›²çº¿å›¾ã€æ€§èƒ½æŒ‡æ ‡
  âœ… è®¾å¤‡äº‹ä»¶ - äº‹ä»¶åˆ—è¡¨ã€æ—¶é—´è½´
  âœ… è®¾å¤‡ç»´æŠ¤ - ç»´æŠ¤è®¡åˆ’ã€è®°å½•ç®¡ç†

åŒºåŸŸç®¡ç†æ¨¡å— (area/):
  âœ… åŒºåŸŸåˆ—è¡¨ - å±‚çº§å±•ç¤ºã€æœç´¢
  âœ… åŒºåŸŸè¯¦æƒ… - åŸºæœ¬ä¿¡æ¯ã€å…³è”è®¾å¤‡
  âœ… åŒºåŸŸæ·»åŠ  - è¡¨å•éªŒè¯ã€çˆ¶çº§é€‰æ‹©
  âœ… åŒºåŸŸè®¾å¤‡ - è®¾å¤‡å…³è”ç®¡ç†
  âœ… åŒºåŸŸç”¨æˆ· - ç”¨æˆ·æƒé™ç®¡ç†

å®¡æ‰¹æµç¨‹æ¨¡å— (approval/):
  âœ… å®¡æ‰¹åˆ—è¡¨ - çŠ¶æ€ç­›é€‰ã€æ‰¹é‡æ“ä½œ
  âœ… å®¡æ‰¹è¯¦æƒ… - æµç¨‹æ—¶é—´çº¿ã€å®¡æ‰¹å†å²
  âœ… å®¡æ‰¹ç”³è¯· - è¡¨å•éªŒè¯ã€é™„ä»¶ä¸Šä¼ 
  âœ… å®¡æ‰¹å†å² - æ—¥æœŸåˆ†ç»„ã€ç»Ÿè®¡æ¦‚è§ˆ
  âœ… å®¡æ‰¹ç»Ÿè®¡ - æ•°æ®å›¾è¡¨ã€è¶‹åŠ¿åˆ†æ
  âœ… å®¡æ‰¹é…ç½® - æµç¨‹è§„åˆ™ã€å®¡æ‰¹äººç®¡ç†

é«˜çº§åŠŸèƒ½æ¨¡å— (system/):
  âœ… åæ½œå›é…ç½® - æ¨¡å¼é€‰æ‹©ã€ç™½åå•ç®¡ç†
  âœ… å¤šå› å­è®¤è¯ - è®¤è¯æ–¹å¼ã€ç­–ç•¥é…ç½®
  âœ… è”åŠ¨è§„åˆ™ - è§„åˆ™é…ç½®ã€æµ‹è¯•éªŒè¯
  âœ… å›ºä»¶å‡çº§ - æ‰¹é‡å‡çº§ã€ç‰ˆæœ¬ç®¡ç†
  âœ… æ•°æ®å¤‡ä»½ - å¤‡ä»½æ¢å¤ã€è‡ªåŠ¨å¤‡ä»½
  âœ… ç³»ç»Ÿæ—¥å¿— - æ—¥å¿—ç­›é€‰ã€å…³é”®è¯æœç´¢
  âœ… å¸®åŠ©ä¸­å¿ƒ - æœç´¢ã€åˆ†ç±»æµè§ˆ
  âœ… å…³äºç³»ç»Ÿ - ç‰ˆæœ¬æ£€æŸ¥ã€ä¿¡æ¯å±•ç¤º
```

**è·¨æ¨¡å—æµ‹è¯•**ï¼ˆP1çº§ï¼‰:

```
æ•°æ®æµè½¬æµ‹è¯•:
  âœ… è®¾å¤‡ -> åŒºåŸŸå…³è”
  âœ… åŒºåŸŸ -> æƒé™ç»§æ‰¿
  âœ… å®¡æ‰¹ -> çŠ¶æ€åŒæ­¥
  âœ… æ—¥å¿— -> å…¨å±€è®°å½•

å¯¼èˆªæµ‹è¯•:
  âœ… é¡µé¢è·³è½¬é“¾è·¯å®Œæ•´æ€§
  âœ… è¿”å›å¯¼èˆªæ­£ç¡®æ€§
  âœ… Tabåˆ‡æ¢æ— å¼‚å¸¸
  âœ… æ·±åº¦é“¾æ¥è·³è½¬
```

#### 1.1.2 æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿

```yaml
æµ‹è¯•ç”¨ä¾‹ç¼–å·: TC-DEVICE-001
æµ‹è¯•é¡¹ç›®: è®¾å¤‡åˆ—è¡¨æœç´¢åŠŸèƒ½
å‰ç½®æ¡ä»¶: å·²ç™»å½•ç³»ç»Ÿï¼Œæœ‰è®¾å¤‡æ•°æ®
æµ‹è¯•æ­¥éª¤:
  1. è¿›å…¥è®¾å¤‡åˆ—è¡¨é¡µé¢
  2. ç‚¹å‡»æœç´¢æ¡†
  3. è¾“å…¥è®¾å¤‡åç§°å…³é”®è¯
  4. ç‚¹å‡»æœç´¢æŒ‰é’®
é¢„æœŸç»“æœ: æ˜¾ç¤ºåŒ¹é…çš„è®¾å¤‡åˆ—è¡¨
ä¼˜å…ˆçº§: P0
æµ‹è¯•çŠ¶æ€: â¬œ å¾…æµ‹è¯•
```

#### 1.1.3 æµ‹è¯•æ‰§è¡Œè®¡åˆ’

```powershell
# æµ‹è¯•ç¯å¢ƒå‡†å¤‡
1. å‡†å¤‡æµ‹è¯•æ•°æ®ï¼ˆ100+è®¾å¤‡ã€20+åŒºåŸŸã€50+å®¡æ‰¹è®°å½•ï¼‰
2. é…ç½®æµ‹è¯•è´¦å·ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·/è®¿å®¢ï¼‰
3. æ­å»ºæµ‹è¯•ç¯å¢ƒï¼ˆH5/å¾®ä¿¡å°ç¨‹åº/å®‰å“/iOSï¼‰

# æµ‹è¯•æ‰§è¡Œ
Day 1: è®¾å¤‡ç®¡ç†æ¨¡å— + åŒºåŸŸç®¡ç†æ¨¡å—
Day 2: å®¡æ‰¹æµç¨‹æ¨¡å— + é«˜çº§åŠŸèƒ½æ¨¡å—
Day 3: è·¨æ¨¡å—æµ‹è¯• + å›å½’æµ‹è¯•

# ç¼ºé™·è·Ÿè¸ª
- ä½¿ç”¨Bugè·Ÿè¸ªç³»ç»Ÿè®°å½•æ‰€æœ‰é—®é¢˜
- ä¼˜å…ˆçº§åˆ†ç±»ï¼šP0ï¼ˆé˜»å¡ï¼‰/P1ï¼ˆä¸¥é‡ï¼‰/P2ï¼ˆä¸€èˆ¬ï¼‰/P3ï¼ˆè½»å¾®ï¼‰
- æ¯æ—¥ç¼ºé™·æ€»ç»“ä¼šè®®
```

---

### ä»»åŠ¡1.2: æ€§èƒ½ä¼˜åŒ–ï¼ˆ4å¤©ï¼‰

#### 1.2.1 é¦–å±åŠ è½½ä¼˜åŒ–

**ç›®æ ‡**: é¦–å±åŠ è½½æ—¶é—´ä»3-4ç§’é™è‡³<2ç§’

**ä¼˜åŒ–ç­–ç•¥**:

```javascript
// 1. è·¯ç”±æ‡’åŠ è½½ä¼˜åŒ–
const routes = [
  {
    path: '/pages/access/device-list',
    component: () => import('@/pages/access/device-list.vue')
  }
]

// 2. å›¾ç‰‡æ‡’åŠ è½½
<image :lazy-load="true" :src="imageSrc"></image>

// 3. éª¨æ¶å±å ä½
<template>
  <view v-if="loading" class="skeleton-screen">
    <skeleton-box width="100%" height="200rpx"></skeleton-box>
    <skeleton-box width="80%" height="100rpx"></skeleton-box>
  </view>
  <view v-else class="content">
    <!-- å®é™…å†…å®¹ -->
  </view>
</template>

// 4. é¢„åŠ è½½å…³é”®èµ„æº
onMounted(() => {
  // é¢„åŠ è½½ä¸‹ä¸€é¡µèµ„æº
  uni.preloadPage({
    url: '/pages/access/device-detail'
  })
})
```

**å…·ä½“ä¼˜åŒ–é¡¹**:

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | ä¼˜åŒ–æ–¹æ¡ˆ | é¢„æœŸæ•ˆæœ |
|--------|---------|---------|---------|
| **JS bundleå¤§å°** | ~800KB | ä»£ç åˆ†å‰²ã€Tree Shaking | -40% |
| **å›¾ç‰‡èµ„æº** | æœªä¼˜åŒ– | WebPæ ¼å¼ã€å‹ç¼© | -60% |
| **APIè¯·æ±‚** | ä¸²è¡Œè¯·æ±‚ | å¹¶è¡Œè¯·æ±‚ã€æ‰¹é‡æ¥å£ | -50% |
| **æ¸²æŸ“é˜»å¡** | å­˜åœ¨ | å¼‚æ­¥ç»„ä»¶ã€è™šæ‹Ÿåˆ—è¡¨ | +30% |

#### 1.2.2 é¡µé¢åˆ‡æ¢ä¼˜åŒ–

```javascript
// é¡µé¢è¿‡æ¸¡åŠ¨ç”»ä¼˜åŒ–
// pages.jsoné…ç½®
{
  "pages": [
    {
      "path": "pages/access/device-list",
      "style": {
        "navigationStyle": "custom",
        "app-plus": {
          "animationType": "slide-in-right",
          "animationDuration": 200
        }
      }
    }
  ]
}

// keep-aliveç¼“å­˜é¡µé¢çŠ¶æ€
<template>
  <keep-alive :include="cachedPages">
    <router-view></router-view>
  </keep-alive>
</template>
```

#### 1.2.3 å†…å­˜ä¼˜åŒ–

```javascript
// 1. ç»„ä»¶é”€æ¯æ—¶æ¸…ç†èµ„æº
onUnmounted(() => {
  // æ¸…ç†å®šæ—¶å™¨
  if (timer) {
    clearInterval(timer)
    timer = null
  }

  // æ¸…ç†äº‹ä»¶ç›‘å¬
  uni.offWindowResize()

  // æ¸…ç†å¤§å¯¹è±¡
  dataList.value = []
})

// 2. å›¾ç‰‡ç¼“å­˜ç®¡ç†
const imageCache = {
  maxCache: 50,
  cached: new Map(),

  get(url) {
    return this.cached.get(url)
  },

  set(url, data) {
    if (this.cached.size >= this.maxCache) {
      const firstKey = this.cached.keys().next().value
      this.cached.delete(firstKey)
    }
    this.cached.set(url, data)
  }
}

// 3. è™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿åˆ—è¡¨ä¼˜åŒ–ï¼‰
<template>
  <virtual-list
    :data-source="largeList"
    :item-height="100"
    :visible-height="600"
  >
    <template #default="{ item }">
      <device-card :device="item"></device-card>
    </template>
  </virtual-list>
</template>
```

#### 1.2.4 æ€§èƒ½ç›‘æ§

```javascript
// æ€§èƒ½æ•°æ®é‡‡é›†
const performance = {
  // é¡µé¢åŠ è½½æ—¶é—´
  measurePageLoad() {
    const startTime = Date.now()

    onMounted(() => {
      const loadTime = Date.now() - startTime
      uni.reportAnalytics('page_load', {
        page: getCurrentPages().pop().route,
        loadTime
      })
    })
  },

  // APIè¯·æ±‚æ—¶é—´
  measureApiCall(apiName) {
    const start = Date.now()
    return () => {
      const duration = Date.now() - start
      uni.reportAnalytics('api_call', {
        api: apiName,
        duration
      })
    }
  },

  // å†…å­˜ä½¿ç”¨
  measureMemory() {
    if (uni.getPerformance) {
      const memory = uni.getPerformance().getMemory()
      uni.reportAnalytics('memory_usage', {
        used: memory.usedJSHeapSize,
        total: memory.totalJSHeapSize
      })
    }
  }
}
```

---

### ä»»åŠ¡1.3: å…¼å®¹æ€§æµ‹è¯•ï¼ˆ3å¤©ï¼‰

#### 1.3.1 æµ‹è¯•çŸ©é˜µ

| å¹³å° | ç‰ˆæœ¬ | æµ‹è¯•è®¾å¤‡ | æµ‹è¯•é‡ç‚¹ |
|------|------|---------|---------|
| **H5** | Chrome 120+, Safari 17+ | Windows/Mac | å“åº”å¼å¸ƒå±€ã€APIå…¼å®¹ |
| **å¾®ä¿¡å°ç¨‹åº** | åŸºç¡€åº“ 2.40+ | iOS/Android | å°ç¨‹åºAPIã€æˆæƒæµç¨‹ |
| **æ”¯ä»˜å®å°ç¨‹åº** | åŸºç¡€åº“ 2.0+ | iOS/Android | æ”¯ä»˜èƒ½åŠ›ã€ç”¨æˆ·è®¤è¯ |
| **iOS App** | iOS 14+ | iPhone 12/13/14 | åŸç”Ÿèƒ½åŠ›ã€æ€§èƒ½è¡¨ç° |
| **Android App** | Android 8+ | åä¸º/å°ç±³/OPPO | ç¢ç‰‡é€‚é…ã€æƒé™ç®¡ç† |

#### 1.3.2 å…¼å®¹æ€§æ£€æŸ¥æ¸…å•

```yaml
æ ·å¼å…¼å®¹æ€§:
  âœ… flexå¸ƒå±€å…¼å®¹
  âœ… CSS Gridé™çº§æ–¹æ¡ˆ
  âœ… å®‰å…¨åŒºåŸŸé€‚é…ï¼ˆåˆ˜æµ·å±ï¼‰
  âœ… æ·±è‰²æ¨¡å¼æ”¯æŒ
  âœ… å­—ä½“æ¸²æŸ“ä¸€è‡´æ€§

APIå…¼å®¹æ€§:
  âœ… uni-app APIæ¡ä»¶ç¼–è¯‘
  âœ… å¹³å°ç‰¹å®šåŠŸèƒ½é™çº§
  âœ… ç½‘ç»œè¯·æ±‚å°è£…
  âœ… æœ¬åœ°å­˜å‚¨å…¼å®¹
  âœ… å®šä½/ç›¸æœº/ç›¸å†Œæƒé™

æ€§èƒ½å…¼å®¹æ€§:
  âœ… ä½ç«¯è®¾å¤‡æ€§èƒ½æµ‹è¯•
  âœ… å†…å­˜æ³„æ¼æ£€æµ‹
  âœ… ç”µé‡æ¶ˆè€—æµ‹è¯•
  âœ… æµé‡æ¶ˆè€—æµ‹è¯•
```

#### 1.3.3 æ¡ä»¶ç¼–è¯‘ç¤ºä¾‹

```javascript
// #ifdef H5
// H5å¹³å°ç‰¹æœ‰ä»£ç 
const isH5 = true
window.addEventListener('scroll', handleScroll)
// #endif

// #ifdef MP-WEIXIN
// å¾®ä¿¡å°ç¨‹åºç‰¹æœ‰ä»£ç 
wx.updateShareMenu({
  withShareTicket: true
})
// #endif

// #ifdef APP-PLUS
// Appç‰¹æœ‰ä»£ç 
plus.push.createMessage(message)
// #endif

// #ifndef H5
// éH5å¹³å°ä»£ç 
const nativeApi = uni.requireNativePlugin('NativePlugin')
// #endif
```

---

### ä»»åŠ¡1.4: Bugä¿®å¤ï¼ˆ4å¤©ï¼‰

#### 1.4.1 Bugåˆ†ç±»å’Œä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | æè¿° | ä¿®å¤æ—¶é™ | ç¤ºä¾‹ |
|--------|------|---------|------|
| **P0** | é˜»å¡æ€§é—®é¢˜ï¼Œæ— æ³•ä½¿ç”¨åŠŸèƒ½ | 2å°æ—¶ | é¡µé¢ç™½å±ã€å´©æºƒã€æ•°æ®ä¸¢å¤± |
| **P1** | ä¸¥é‡é—®é¢˜ï¼Œå½±å“æ ¸å¿ƒåŠŸèƒ½ | 1å¤© | APIè°ƒç”¨å¤±è´¥ã€å¯¼èˆªé”™è¯¯ |
| **P2** | ä¸€èˆ¬é—®é¢˜ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ | 2å¤© | æ ·å¼é”™ä¹±ã€æ–‡æ¡ˆé”™è¯¯ |
| **P3** | è½»å¾®é—®é¢˜ï¼Œä¸å½±å“ä½¿ç”¨ | 1å‘¨ | å»ºè®®æ€§æ”¹è¿›ã€ä¼˜åŒ–é¡¹ |

#### 1.4.2 Bugä¿®å¤æµç¨‹

```yaml
1. Bugå‘ç°å’Œè®°å½•:
   - æµ‹è¯•äººå‘˜æäº¤BugæŠ¥å‘Š
   - åŒ…å«ï¼šå¤ç°æ­¥éª¤ã€é¢„æœŸç»“æœã€å®é™…ç»“æœã€æˆªå›¾/å½•å±
   - åˆ†é…ä¼˜å…ˆçº§å’Œè´Ÿè´£äºº

2. Bugåˆ†æå’Œå®šä½:
   - å¼€å‘äººå‘˜åˆ†æé—®é¢˜æ ¹å› 
   - ç¡®å®šå½±å“èŒƒå›´
   - è¯„ä¼°ä¿®å¤éš¾åº¦å’Œæ—¶é—´

3. Bugä¿®å¤å®æ–½:
   - ç¼–å†™ä¿®å¤ä»£ç 
   - æ·»åŠ å•å…ƒæµ‹è¯•
   - ä»£ç å®¡æŸ¥

4. BugéªŒè¯å’Œå…³é—­:
   - æµ‹è¯•äººå‘˜éªŒè¯ä¿®å¤
   - å›å½’æµ‹è¯•
   - å…³é—­BugæŠ¥å‘Š
```

#### 1.4.3 å¸¸è§é—®é¢˜é¢„åˆ¤

```javascript
// é—®é¢˜1: iOSåˆ˜æµ·å±é€‚é…
// è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨CSSå®‰å…¨åŒºåŸŸ
.page-container {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

// é—®é¢˜2: Androidè¿”å›é”®è¯¯æ“ä½œ
// è§£å†³æ–¹æ¡ˆ: ç›‘å¬è¿”å›é”®ï¼Œæ·»åŠ ç¡®è®¤æç¤º
onBackPress() {
  if (hasUnsavedChanges) {
    uni.showModal({
      title: 'æç¤º',
      content: 'æœ‰æœªä¿å­˜çš„ä¿®æ”¹ï¼Œç¡®è®¤ç¦»å¼€å—ï¼Ÿ',
      success: (res) => {
        if (res.confirm) {
          uni.navigateBack()
        }
      }
    })
    return true // é˜»æ­¢é»˜è®¤è¿”å›
  }
}

// é—®é¢˜3: å¾®ä¿¡å°ç¨‹åºç½‘ç»œè¯·æ±‚åŸŸåé™åˆ¶
// è§£å†³æ–¹æ¡ˆ: é…ç½®åˆæ³•åŸŸåï¼Œå¼€å‘ç¯å¢ƒå¯è·³è¿‡
// manifest.json -> mp-weixin -> requestLegalDomain

// é—®é¢˜4: å›¾ç‰‡ä¸Šä¼ å¤§å°é™åˆ¶
// è§£å†³æ–¹æ¡ˆ: å‰ç«¯å‹ç¼©å’ŒéªŒè¯
const compressImage = (filePath) => {
  return new Promise((resolve) => {
    uni.compressImage({
      src: filePath,
      quality: 80,
      success: (res) => resolve(res.tempFilePath),
      fail: () => resolve(filePath)
    })
  })
}
```

---

## ğŸ“‹ Phase 2: ä¸­æœŸè§„åˆ’ï¼ˆ1-2æœˆï¼‰

### ä»»åŠ¡2.1: APIå¯¹æ¥ï¼ˆ2å‘¨ï¼‰

#### 2.1.1 APIæ¶æ„è®¾è®¡

```typescript
// APIç»Ÿä¸€ç®¡ç†
// src/api/index.ts

interface ApiResponse<T> {
  code: number
  message: string
  data: T
  timestamp: number
}

class ApiClient {
  private baseURL: string
  private token: string

  constructor(baseURL: string) {
    this.baseURL = baseURL
    this.token = uni.getStorageSync('token') || ''
  }

  // é€šç”¨è¯·æ±‚æ–¹æ³•
  async request<T>(
    url: string,
    method: 'GET' | 'POST' | 'PUT' | 'DELETE',
    data?: any
  ): Promise<ApiResponse<T>> {
    return new Promise((resolve, reject) => {
      uni.request({
        url: this.baseURL + url,
        method,
        data,
        header: {
          'Authorization': `Bearer ${this.token}`,
          'Content-Type': 'application/json'
        },
        success: (res: any) => {
          if (res.statusCode === 200) {
            if (res.data.code === 200) {
              resolve(res.data)
            } else {
              uni.showToast({
                title: res.data.message,
                icon: 'none'
              })
              reject(res.data)
            }
          } else {
            this.handleError(res)
            reject(res)
          }
        },
        fail: (err) => {
          this.handleError(err)
          reject(err)
        }
      })
    })
  }

  // ä¾¿æ·æ–¹æ³•
  get<T>(url: string, data?: any) {
    return this.request<T>(url, 'GET', data)
  }

  post<T>(url: string, data?: any) {
    return this.request<T>(url, 'POST', data)
  }

  // é”™è¯¯å¤„ç†
  handleError(error: any) {
    console.error('API Error:', error)
    uni.showToast({
      title: 'ç½‘ç»œè¯·æ±‚å¤±è´¥',
      icon: 'none'
    })
  }
}

// å¯¼å‡ºå•ä¾‹
export const apiClient = new ApiClient('https://api.ioedream.com')
```

#### 2.1.2 æ¨¡å—åŒ–APIå®šä¹‰

```typescript
// src/api/device.ts
import { apiClient } from './index'

export interface Device {
  deviceId: string
  deviceName: string
  deviceType: number
  status: number
  // ...å…¶ä»–å­—æ®µ
}

export interface DeviceListQuery {
  pageNum: number
  pageSize: number
  deviceName?: string
  deviceType?: number
  status?: number
}

export const deviceApi = {
  // è·å–è®¾å¤‡åˆ—è¡¨
  getDeviceList(query: DeviceListQuery) {
    return apiClient.get<PageResult<Device>>('/api/v1/device/list', query)
  },

  // è·å–è®¾å¤‡è¯¦æƒ…
  getDeviceDetail(deviceId: string) {
    return apiClient.get<Device>(`/api/v1/device/${deviceId}`)
  },

  // æ·»åŠ è®¾å¤‡
  addDevice(device: Partial<Device>) {
    return apiClient.post<string>('/api/v1/device', device)
  },

  // æ›´æ–°è®¾å¤‡
  updateDevice(deviceId: string, device: Partial<Device>) {
    return apiClient.put<void>(`/api/v1/device/${deviceId}`, device)
  },

  // åˆ é™¤è®¾å¤‡
  deleteDevice(deviceId: string) {
    return apiClient.delete<void>(`/api/v1/device/${deviceId}`)
  },

  // æ§åˆ¶è®¾å¤‡
  controlDevice(deviceId: string, action: string) {
    return apiClient.post<void>(`/api/v1/device/${deviceId}/control`, { action })
  }
}
```

#### 2.1.3 APIå¯¹æ¥æ¸…å•

```yaml
è®¾å¤‡ç®¡ç†API:
  âœ… GET /api/v1/device/list - è®¾å¤‡åˆ—è¡¨
  âœ… GET /api/v1/device/{id} - è®¾å¤‡è¯¦æƒ…
  âœ… POST /api/v1/device - æ·»åŠ è®¾å¤‡
  âœ… PUT /api/v1/device/{id} - æ›´æ–°è®¾å¤‡
  âœ… DELETE /api/v1/device/{id} - åˆ é™¤è®¾å¤‡
  âœ… POST /api/v1/device/{id}/control - æ§åˆ¶è®¾å¤‡
  âœ… GET /api/v1/device/{id}/events - è®¾å¤‡äº‹ä»¶
  âœ… GET /api/v1/device/{id}/monitor - è®¾å¤‡ç›‘æ§

åŒºåŸŸç®¡ç†API:
  âœ… GET /api/v1/area/list - åŒºåŸŸåˆ—è¡¨
  âœ… GET /api/v1/area/{id} - åŒºåŸŸè¯¦æƒ…
  âœ… POST /api/v1/area - æ·»åŠ åŒºåŸŸ
  âœ… PUT /api/v1/area/{id} - æ›´æ–°åŒºåŸŸ
  âœ… DELETE /api/v1/area/{id} - åˆ é™¤åŒºåŸŸ
  âœ… GET /api/v1/area/{id}/devices - åŒºåŸŸè®¾å¤‡
  âœ… GET /api/v1/area/{id}/users - åŒºåŸŸç”¨æˆ·

å®¡æ‰¹æµç¨‹API:
  âœ… GET /api/v1/approval/list - å®¡æ‰¹åˆ—è¡¨
  âœ… GET /api/v1/approval/{id} - å®¡æ‰¹è¯¦æƒ…
  âœ… POST /api/v1/approval - æäº¤ç”³è¯·
  âœ… PUT /api/v1/approval/{id}/approve - å®¡æ‰¹æ“ä½œ
  âœ… GET /api/v1/approval/history - å®¡æ‰¹å†å²
  âœ… GET /api/v1/approval/statistics - å®¡æ‰¹ç»Ÿè®¡

é«˜çº§åŠŸèƒ½API:
  âœ… GET/POST /api/v1/system/anti-passback - åæ½œå›é…ç½®
  âœ… GET/POST /api/v1/system/multi-factor - å¤šå› å­è®¤è¯
  âœ… GET/POST /api/v1/system/linkage - è”åŠ¨è§„åˆ™
  âœ… GET/POST /api/v1/system/firmware - å›ºä»¶å‡çº§
  âœ… GET/POST /api/v1/system/backup - æ•°æ®å¤‡ä»½
  âœ… GET /api/v1/system/logs - ç³»ç»Ÿæ—¥å¿—
```

#### 2.1.4 API MockæœåŠ¡

```javascript
// å¼€å‘ç¯å¢ƒMockæ•°æ®
// src/mock/index.js

import Mock from 'mockjs'

// è®¾å¤‡åˆ—è¡¨Mock
Mock.mock('/api/v1/device/list', 'get', (options) => {
  const { pageNum = 1, pageSize = 20 } = parseQuery(options.url)

  return {
    code: 200,
    message: 'success',
    data: {
      list: Mock.mock({
        [`list|${pageSize}`]: [{
          'deviceId|+1': 1000,
          deviceName: '@ctitle(5, 10)',
          deviceType: '@pick([1, 2, 3, 4, 5])',
          status: '@pick([1, 2, 3])',
          areaName: '@ctitle(3, 6)',
          createTime: '@datetime'
        }]
      }).list,
      total: 100,
      pageNum,
      pageSize,
      pages: 5
    }
  }
})

// è®¾å¤‡è¯¦æƒ…Mock
Mock.mock(/\/api\/v1\/device\/\d+/, 'get', () => {
  return {
    code: 200,
    message: 'success',
    data: Mock.mock({
      deviceId: '@natural(1000, 9999)',
      deviceName: '@ctitle(5, 10)',
      deviceType: 1,
      status: 1,
      areaName: '@ctitle(3, 6)',
      ip: '@ip',
      port: '@natural(1000, 9999)',
      firmwareVersion: '@float(1.0, 5.0, 1, 2)',
      createTime: '@datetime',
      updateTime: '@datetime'
    })
  }
})
```

---

### ä»»åŠ¡2.2: æ•°æ®Mockå®Œå–„ï¼ˆ1å‘¨ï¼‰

#### 2.2.1 Mockæ•°æ®ç”Ÿæˆå™¨

```javascript
// src/mock/generators.js

export const mockGenerators = {
  // è®¾å¤‡æ•°æ®ç”Ÿæˆå™¨
  device(count = 100) {
    return Mock.mock({
      [`list|${count}`]: [{
        'deviceId|+1': 1000,
        deviceName() {
          const types = ['é—¨ç¦', 'è€ƒå‹¤', 'æ¶ˆè´¹', 'è§†é¢‘', 'æŠ¥è­¦']
          const type = Mock.Random.pick(types)
          const num = Mock.Random.string('number', 3)
          return `${type}è®¾å¤‡${num}`
        },
        'deviceType|1-5': 1,
        'status|1-3': 1,
        areaName: '@ctitle(3, 6)',
        'ip': '@ip',
        'port|8000-9999': 1,
        firmwareVersion: '@float(1.0, 5.0, 1, 2)',
        online: '@boolean',
        createTime: '@datetime'
      }]
    }).list
  },

  // åŒºåŸŸæ•°æ®ç”Ÿæˆå™¨
  area(count = 20) {
    return Mock.mock({
      [`list|${count}`]: [{
        'areaId|+1': 100,
        areaName: '@ctitle(3, 6)',
        'areaType|1-3': 1,
        parentId: '@natural(0, 50)',
        'level|1-3': 1,
        deviceCount: '@natural(0, 50)',
        userCount: '@natural(0, 100)',
        createTime: '@datetime'
      }]
    }).list
  },

  // å®¡æ‰¹æ•°æ®ç”Ÿæˆå™¨
  approval(count = 50) {
    return Mock.mock({
      [`list|${count}`]: [{
        'approvalId|+1': 10000,
        'approvalType|1': ['access', 'visitor', 'overtime', 'leave'],
        title: '@ctitle(10, 20)',
        applicantName: '@cname',
        applicantDept: '@ctitle(3, 6)',
        'status|1': ['pending', 'approved', 'rejected', 'cancelled'],
        currentTime: '@datetime',
        approvers: '@cname',
        createTime: '@datetime',
        updateTime: '@datetime'
      }]
    }).list
  }
}
```

#### 2.2.2 çœŸå®åœºæ™¯æ•°æ®æ¨¡æ‹Ÿ

```javascript
// src/mock/scenarios.js

export const mockScenarios = {
  // è®¾å¤‡ç›‘æ§åœºæ™¯
  deviceMonitor: {
    onlineCount: 85,
    offlineCount: 15,
    normalCount: 78,
    warningCount: 5,
    errorCount: 2,

    performanceData: {
      cpuUsage: Mock.Random.float(20, 80, 0, 2),
      memoryUsage: Mock.Random.float(30, 70, 0, 2),
      diskUsage: Mock.Random.float(40, 60, 0, 2),
      networkSpeed: Mock.Random.natural(100, 1000)
    },

    eventTimeline: Mock.mock({
      'list|20': [{
        eventId: '@id',
        eventName: '@ctitle(5, 15)',
        eventType: '@pick(["info", "warning", "error"])',
        deviceName: '@ctitle(3, 6)',
        occurTime: '@datetime'
      }]
    }).list
  },

  // å®¡æ‰¹ç»Ÿè®¡åœºæ™¯
  approvalStats: {
    totalApplications: 1250,
    approvalRate: 0.87,
    avgProcessTime: 2.3,
    pendingCount: 35,

    comparison: {
      totalCount: 0.12, // åŒæ¯”å¢é•¿12%
      approvalRate: -0.03, // åŒæ¯”ä¸‹é™3%
      avgTime: -0.18 // åŒæ¯”ä¸‹é™18%
    },

    typeDistribution: [
      { type: 'access', count: 450, percent: 36 },
      { type: 'visitor', count: 300, percent: 24 },
      { type: 'overtime', count: 280, percent: 22 },
      { type: 'leave', count: 220, percent: 18 }
    ],

    statusDistribution: [
      { status: 'approved', count: 1087, percent: 87 },
      { status: 'pending', count: 35, percent: 3 },
      { status: 'rejected', count: 88, percent: 7 },
      { status: 'cancelled', count: 40, percent: 3 }
    ]
  }
}
```

---

### ä»»åŠ¡2.3: å•å…ƒæµ‹è¯•ï¼ˆ2å‘¨ï¼‰

#### 2.3.1 æµ‹è¯•æ¡†æ¶é€‰æ‹©

```javascript
// ä½¿ç”¨ Vitest + Vue Test Utils
// vitest.config.ts

import { defineConfig } from 'vitest/config'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  test: {
    environment: 'jsdom',
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      lines: 80,
      functions: 80,
      branches: 80,
      statements: 80
    }
  }
})
```

#### 2.3.2 å·¥å…·å‡½æ•°å•å…ƒæµ‹è¯•

```javascript
// tests/utils/format.test.ts

import { describe, it, expect } from 'vitest'
import { formatDate, formatFileSize, formatDeviceStatus } from '@/utils/format'

describe('formatDate', () => {
  it('åº”è¯¥æ­£ç¡®æ ¼å¼åŒ–æ—¥æœŸ', () => {
    const date = new Date('2024-12-24T10:30:00')
    expect(formatDate(date, 'YYYY-MM-DD')).toBe('2024-12-24')
    expect(formatDate(date, 'YYYY-MM-DD HH:mm')).toBe('2024-12-24 10:30')
  })

  it('åº”è¯¥å¤„ç†æ— æ•ˆæ—¥æœŸ', () => {
    expect(formatDate(null)).toBe('-')
    expect(formatDate(undefined)).toBe('-')
  })
})

describe('formatFileSize', () => {
  it('åº”è¯¥æ­£ç¡®æ ¼å¼åŒ–æ–‡ä»¶å¤§å°', () => {
    expect(formatFileSize(1024)).toBe('1.00 KB')
    expect(formatFileSize(1024 * 1024)).toBe('1.00 MB')
    expect(formatFileSize(1024 * 1024 * 1024)).toBe('1.00 GB')
  })
})

describe('formatDeviceStatus', () => {
  it('åº”è¯¥è¿”å›æ­£ç¡®çš„çŠ¶æ€æ–‡æœ¬', () => {
    expect(formatDeviceStatus(1)).toBe('åœ¨çº¿')
    expect(formatDeviceStatus(2)).toBe('ç¦»çº¿')
    expect(formatDeviceStatus(3)).toBe('æ•…éšœ')
  })
})
```

#### 2.3.3 ç»„ä»¶å•å…ƒæµ‹è¯•

```javascript
// tests/components/DeviceCard.test.ts

import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import DeviceCard from '@/components/DeviceCard.vue'

describe('DeviceCard', () => {
  const mockDevice = {
    deviceId: '1001',
    deviceName: 'æµ‹è¯•è®¾å¤‡',
    deviceType: 1,
    status: 1,
    areaName: 'æµ‹è¯•åŒºåŸŸ'
  }

  it('åº”è¯¥æ­£ç¡®æ¸²æŸ“è®¾å¤‡ä¿¡æ¯', () => {
    const wrapper = mount(DeviceCard, {
      props: { device: mockDevice }
    })

    expect(wrapper.text()).toContain('æµ‹è¯•è®¾å¤‡')
    expect(wrapper.text()).toContain('æµ‹è¯•åŒºåŸŸ')
  })

  it('åº”è¯¥è§¦å‘ç‚¹å‡»äº‹ä»¶', async () => {
    const wrapper = mount(DeviceCard, {
      props: { device: mockDevice }
    })

    await wrapper.trigger('click')
    expect(wrapper.emitted('click')).toBeTruthy()
    expect(wrapper.emitted('click')![0]).toEqual([mockDevice])
  })

  it('åº”è¯¥æ˜¾ç¤ºæ­£ç¡®çš„çŠ¶æ€æ ·å¼', () => {
    const wrapper = mount(DeviceCard, {
      props: { device: mockDevice }
    })

    const statusBadge = wrapper.find('.status-badge')
    expect(statusBadge.classes()).toContain('status-online')
  })
})
```

#### 2.3.4 APIæµ‹è¯•

```javascript
// tests/api/deviceApi.test.ts

import { describe, it, expect, vi, beforeEach } from 'vitest'
import { deviceApi } from '@/api/device'
import { apiClient } from '@/api/index'

vi.mock('@/api/index')

describe('deviceApi', () => {
  beforeEach(() => {
    vi.clearAllMocks()
  })

  it('åº”è¯¥è·å–è®¾å¤‡åˆ—è¡¨', async () => {
    const mockData = {
      list: [
        { deviceId: '1001', deviceName: 'è®¾å¤‡1' },
        { deviceId: '1002', deviceName: 'è®¾å¤‡2' }
      ],
      total: 2
    }

    vi.mocked(apiClient.get).mockResolvedValue(mockData)

    const result = await deviceApi.getDeviceList({ pageNum: 1, pageSize: 20 })

    expect(apiClient.get).toHaveBeenCalledWith('/api/v1/device/list', {
      pageNum: 1,
      pageSize: 20
    })
    expect(result.list).toHaveLength(2)
  })

  it('åº”è¯¥è·å–è®¾å¤‡è¯¦æƒ…', async () => {
    const mockDevice = { deviceId: '1001', deviceName: 'è®¾å¤‡1' }

    vi.mocked(apiClient.get).mockResolvedValue(mockDevice)

    const result = await deviceApi.getDeviceDetail('1001')

    expect(apiClient.get).toHaveBeenCalledWith('/api/v1/device/1001')
    expect(result.deviceName).toBe('è®¾å¤‡1')
  })
})
```

#### 2.3.5 æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

| æ¨¡å—ç±»å‹ | ç›®æ ‡è¦†ç›–ç‡ | ä¼˜å…ˆçº§ |
|---------|-----------|--------|
| **å·¥å…·å‡½æ•°** | 95%+ | P0 |
| **APIå±‚** | 90%+ | P0 |
| **å…¬å…±ç»„ä»¶** | 85%+ | P1 |
| **é¡µé¢ç»„ä»¶** | 75%+ | P1 |
| **Store/çŠ¶æ€ç®¡ç†** | 80%+ | P1 |

---

### ä»»åŠ¡2.4: E2Eæµ‹è¯•ï¼ˆ2å‘¨ï¼‰

#### 2.4.1 E2Eæµ‹è¯•æ¡†æ¶

```javascript
// ä½¿ç”¨ Playwright è¿›è¡ŒE2Eæµ‹è¯•
// e2e/playwright.config.ts

import { defineConfig } from '@playwright/test'

export default defineConfig({
  testDir: './e2e/tests',
  timeout: 30000,
  retries: 1,
  use: {
    baseURL: 'http://localhost:3000',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure'
  },

  projects: [
    {
      name: 'chromium',
      use: { browserName: 'chromium' }
    },
    {
      name: 'firefox',
      use: { browserName: 'firefox' }
    },
    {
      name: 'webkit',
      use: { browserName: 'webkit' }
    }
  ]
})
```

#### 2.4.2 E2Eæµ‹è¯•ç”¨ä¾‹

```typescript
// e2e/tests/device-list.spec.ts

import { test, expect } from '@playwright/test'

test.describe('è®¾å¤‡åˆ—è¡¨é¡µé¢', () => {
  test.beforeEach(async ({ page }) => {
    // ç™»å½•
    await page.goto('/login')
    await page.fill('input[name="username"]', 'admin')
    await page.fill('input[name="password"]', 'admin123')
    await page.click('button[type="submit"]')

    // ç­‰å¾…è·³è½¬åˆ°é¦–é¡µ
    await page.waitForURL('/')

    // è¿›å…¥è®¾å¤‡åˆ—è¡¨
    await page.click('text=è®¾å¤‡ç®¡ç†')
    await page.waitForURL('/pages/access/device-list')
  })

  test('åº”è¯¥æ˜¾ç¤ºè®¾å¤‡åˆ—è¡¨', async ({ page }) => {
    // éªŒè¯é¡µé¢æ ‡é¢˜
    await expect(page.locator('text=è®¾å¤‡åˆ—è¡¨')).toBeVisible()

    // éªŒè¯åˆ—è¡¨å­˜åœ¨
    const deviceCards = page.locator('.device-card')
    await expect(deviceCards.first()).toBeVisible()
  })

  test('åº”è¯¥æ”¯æŒæœç´¢åŠŸèƒ½', async ({ page }) => {
    // ç‚¹å‡»æœç´¢æ¡†
    await page.click('.search-input')

    // è¾“å…¥æœç´¢å…³é”®è¯
    await page.fill('.search-input', 'é—¨ç¦')

    // ç­‰å¾…æœç´¢ç»“æœ
    await page.waitForTimeout(500)

    // éªŒè¯æœç´¢ç»“æœ
    const searchResults = page.locator('.device-card')
    const count = await searchResults.count()
    expect(count).toBeGreaterThan(0)

    // éªŒè¯æœç´¢ç»“æœåŒ…å«å…³é”®è¯
    for (let i = 0; i < Math.min(count, 5); i++) {
      const card = searchResults.nth(i)
      const text = await card.textContent()
      expect(text).toContain('é—¨ç¦')
    }
  })

  test('åº”è¯¥æ”¯æŒç­›é€‰åŠŸèƒ½', async ({ page }) => {
    // ç‚¹å‡»ç­›é€‰æŒ‰é’®
    await page.click('.filter-button')

    // é€‰æ‹©è®¾å¤‡ç±»å‹
    await page.click('text=é—¨ç¦è®¾å¤‡')

    // ç‚¹å‡»ç¡®è®¤
    await page.click('text=ç¡®å®š')

    // ç­‰å¾…ç­›é€‰ç»“æœ
    await page.waitForTimeout(500)

    // éªŒè¯ç­›é€‰ç»“æœ
    const deviceCards = page.locator('.device-card')
    const count = await deviceCards.count()
    expect(count).toBeGreaterThan(0)
  })

  test('åº”è¯¥æ”¯æŒåˆ†é¡µåŠ è½½', async ({ page }) => {
    const initialCount = await page.locator('.device-card').count()

    // æ»šåŠ¨åˆ°åº•éƒ¨
    await page.evaluate(() => window.scrollTo(0, document.body.scrollHeight))

    // ç­‰å¾…åŠ è½½æ›´å¤š
    await page.waitForTimeout(1000)

    // éªŒè¯æ•°æ®å¢åŠ 
    const newCount = await page.locator('.device-card').count()
    expect(newCount).toBeGreaterThan(initialCount)
  })
})
```

```typescript
// e2e/tests/approval-flow.spec.ts

import { test, expect } from '@playwright/test'

test.describe('å®¡æ‰¹æµç¨‹æµ‹è¯•', () => {
  test('å®Œæ•´çš„å®¡æ‰¹æµç¨‹', async ({ page }) => {
    // 1. ç™»å½•
    await page.goto('/login')
    await page.fill('input[name="username"]', 'testuser')
    await page.fill('input[name="password"]', 'password123')
    await page.click('button[type="submit"]')

    // 2. è¿›å…¥å®¡æ‰¹ç”³è¯·é¡µé¢
    await page.click('text=å®¡æ‰¹æµç¨‹')
    await page.click('text=ç”³è¯·å®¡æ‰¹')
    await page.waitForURL('/pages/access/approval-apply')

    // 3. å¡«å†™ç”³è¯·è¡¨å•
    await page.selectOption('select[name="type"]', 'access')
    await page.fill('input[name="title"]', 'é—¨ç¦æƒé™ç”³è¯·')
    await page.fill('textarea[name="reason"]', 'éœ€è¦å¼€é€šAåŒºé—¨ç¦æƒé™')
    await page.fill('input[name="area"]', 'AåŒº')

    // 4. æäº¤ç”³è¯·
    await page.click('button:has-text("æäº¤ç”³è¯·")')

    // 5. éªŒè¯æäº¤æˆåŠŸ
    await expect(page.locator('text=ç”³è¯·å·²æäº¤')).toBeVisible()

    // 6. æŸ¥çœ‹å®¡æ‰¹è¯¦æƒ…
    await page.click('button:has-text("æŸ¥çœ‹è¯¦æƒ…")')
    await page.waitForURL(/\/pages\/access\/approval-detail/)

    // 7. éªŒè¯å®¡æ‰¹çŠ¶æ€
    await expect(page.locator('text=å¾…å®¡æ‰¹')).toBeVisible()

    // 8. å®¡æ‰¹äººæ“ä½œï¼ˆåˆ‡æ¢è´¦å·ï¼‰
    await page.click('button:has-text("é€€å‡ºç™»å½•")')
    await page.fill('input[name="username"]', 'approver')
    await page.fill('input[name="password"]', 'password123')
    await page.click('button[type="submit"]')

    // 9. è¿›å…¥å®¡æ‰¹åˆ—è¡¨
    await page.click('text=å®¡æ‰¹æµç¨‹')
    await page.click('text=å¾…å®¡æ‰¹')
    await page.waitForURL('/pages/access/approval-list')

    // 10. å®¡æ‰¹æ“ä½œ
    await page.click('.approval-item:first-child')
    await page.click('button:has-text("é€šè¿‡")')
    await page.fill('textarea[name="comment"]', 'åŒæ„')
    await page.click('button:has-text("ç¡®è®¤")')

    // 11. éªŒè¯å®¡æ‰¹ç»“æœ
    await expect(page.locator('text=å®¡æ‰¹é€šè¿‡')).toBeVisible()
  })
})
```

#### 2.4.3 E2Eæµ‹è¯•è¦†ç›–åœºæ™¯

```yaml
æ ¸å¿ƒä¸šåŠ¡æµç¨‹:
  âœ… ç”¨æˆ·ç™»å½•/ç™»å‡º
  âœ… è®¾å¤‡ç®¡ç†CRUD
  âœ… è®¾å¤‡æ§åˆ¶æ“ä½œ
  âœ… å®¡æ‰¹ç”³è¯·å’Œå®¡æ‰¹
  âœ… åŒºåŸŸç®¡ç†
  âœ… é«˜çº§åŠŸèƒ½é…ç½®

å¼‚å¸¸åœºæ™¯:
  âœ… ç½‘ç»œé”™è¯¯å¤„ç†
  âœ… è¡¨å•éªŒè¯
  âœ… æƒé™æ§åˆ¶
  âœ… æ•°æ®ä¸ºç©ºçŠ¶æ€
  âœ… åŠ è½½å¤±è´¥å¤„ç†

æ€§èƒ½æµ‹è¯•:
  âœ… å¤§æ•°æ®é‡åˆ—è¡¨æ¸²æŸ“
  âœ… é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§
  âœ… å†…å­˜æ³„æ¼æ£€æµ‹
  âœ… é¡µé¢åŠ è½½æ€§èƒ½
```

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœè¯„ä¼°

### æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ç›®æ ‡ | é¢„æœŸæå‡ |
|------|--------|------|---------|
| **é¦–å±åŠ è½½æ—¶é—´** | 3.5s | < 2s | -43% |
| **é¡µé¢åˆ‡æ¢æ—¶é—´** | 500ms | < 200ms | -60% |
| **å†…å­˜å ç”¨** | 100MB | < 80MB | -20% |
| **Bundleå¤§å°** | 800KB | < 500KB | -38% |
| **APIå“åº”æ—¶é—´** | 800ms | < 300ms | -63% |

### è´¨é‡æŒ‡æ ‡å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ç›®æ ‡ | é¢„æœŸæå‡ |
|------|--------|------|---------|
| **æµ‹è¯•è¦†ç›–ç‡** | 0% | 80%+ | +80% |
| **Bugå¯†åº¦** | æœªçŸ¥ | < 5/KLOC | ä¼ä¸šçº§ |
| **å…¼å®¹æ€§é€šè¿‡ç‡** | æœªæµ‹è¯• | 95%+ | å…¨é¢è¦†ç›– |
| **ä»£ç è§„èŒƒç¬¦åˆç‡** | 70% | 95%+ | +25% |

---

## ğŸ› ï¸ å·¥å…·å’Œèµ„æº

### å¼€å‘å·¥å…·

```yaml
ä»£ç ç¼–è¾‘å™¨:
  - VS Code + Volaræ’ä»¶
  - WebStormï¼ˆå¯é€‰ï¼‰

ç‰ˆæœ¬æ§åˆ¶:
  - Git
  - GitHub/GitLab

è°ƒè¯•å·¥å…·:
  - Chrome DevTools
  - å¾®ä¿¡å¼€å‘è€…å·¥å…·
  - uni-appè°ƒè¯•å™¨
```

### æµ‹è¯•å·¥å…·

```yaml
å•å…ƒæµ‹è¯•:
  - Vitest
  - Vue Test Utils
  - @vue/test-utils

E2Eæµ‹è¯•:
  - Playwright
  - @playwright/test

æ€§èƒ½åˆ†æ:
  - Chrome DevTools Performance
  - Lighthouse
  - WebPageTest

ä»£ç è´¨é‡:
  - ESLint
  - Prettier
  - Stylelint
```

### CI/CDå·¥å…·

```yaml
æŒç»­é›†æˆ:
  - GitHub Actions
  - GitLab CI/CD
  - Jenkinsï¼ˆå¯é€‰ï¼‰

è‡ªåŠ¨åŒ–éƒ¨ç½²:
  - Docker
  - Kubernetesï¼ˆå¯é€‰ï¼‰

ç›‘æ§å‘Šè­¦:
  - Sentryï¼ˆé”™è¯¯è¿½è¸ªï¼‰
  - Google Analyticsï¼ˆç”¨æˆ·åˆ†æï¼‰
```

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### æŠ€æœ¯æ–‡æ¡£

- **uni-appå®˜æ–¹æ–‡æ¡£**: https://uniapp.dcloud.net.cn/
- **Vue 3å®˜æ–¹æ–‡æ¡£**: https://cn.vuejs.org/
- **Vitestæ–‡æ¡£**: https://cn.vitest.dev/
- **Playwrightæ–‡æ¡£**: https://playwright.dev/

### é¡¹ç›®æ–‡æ¡£

- **é¡¹ç›®å®ŒæˆæŠ¥å‘Š**: [MOBILE_APP_COMPLETION_REPORT.md](./MOBILE_APP_COMPLETION_REPORT.md)
- **ç¼–ç è§„èŒƒ**: [CLAUDE.md](../CLAUDE.md)
- **APIæ–‡æ¡£**: [APIæ–‡æ¡£.md](../docs/APIæ–‡æ¡£.md)

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸è¿è¡Œ
- âœ… æ— P0/P1çº§åˆ«Bug
- âœ… è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•é€šè¿‡
- âœ… APIå¯¹æ¥å®Œæˆï¼ŒMockæ•°æ®å®Œå–„

### æ€§èƒ½éªŒæ”¶

- âœ… é¦–å±åŠ è½½æ—¶é—´ < 2ç§’
- âœ… é¡µé¢åˆ‡æ¢æµç•…ï¼Œæ— å¡é¡¿
- âœ… å†…å­˜å ç”¨ < 80MB
- âœ… Bundleå¤§å° < 500KB

### è´¨é‡éªŒæ”¶

- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- âœ… E2Eæµ‹è¯•è¦†ç›–æ ¸å¿ƒæµç¨‹
- âœ… ä»£ç è§„èŒƒç¬¦åˆç‡ â‰¥ 95%
- âœ… æ€§èƒ½æµ‹è¯•é€šè¿‡

### äº¤ä»˜ç‰©éªŒæ”¶

- âœ… æµ‹è¯•æŠ¥å‘Šï¼ˆå«æµ‹è¯•ç”¨ä¾‹å’Œç»“æœï¼‰
- âœ… æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
- âœ… APIå¯¹æ¥æ–‡æ¡£
- âœ… å•å…ƒæµ‹è¯•ä»£ç 
- âœ… E2Eæµ‹è¯•ä»£ç 
- âœ… ä¼˜åŒ–æ€»ç»“æŠ¥å‘Š

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- **æŠ€æœ¯æ”¯æŒ**: support@ioedream.com
- **å®¢æœçƒ­çº¿**: 400-123-4567
- **å®˜æ–¹ç½‘ç«™**: www.ioedream.com

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºæ—¶é—´**: 2024-12-24
**æ›´æ–°æ—¶é—´**: 2024-12-24
**æ–‡æ¡£ä½œè€…**: Claude Code AI åŠ©æ‰‹

---

*æœ¬ä¼˜åŒ–è·¯çº¿å›¾å°†æ ¹æ®å®é™…æ‰§è¡Œæƒ…å†µæŒç»­æ›´æ–°*
