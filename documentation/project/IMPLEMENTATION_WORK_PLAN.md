# IOE-DREAM æ¶æ„é‡æ„å®æ–½å·¥ä½œè®¡åˆ’

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºæ—¶é—´**: 2025-11-25
**è®¡åˆ’å‘¨æœŸ**: 8-10å‘¨
**é¡¹ç›®è´Ÿè´£äºº**: SmartAdmin AI Assistant

## ğŸ“‹ æ‰§è¡Œæ¦‚è§ˆ

åŸºäºã€ŠIOE-DREAMæ¶æ„é‡æ„åˆ†ææŠ¥å‘Šã€‹ï¼Œæœ¬æ–‡æ¡£åˆ¶å®šäº†è¯¦ç»†çš„å®æ–½å·¥ä½œè®¡åˆ’ï¼ŒåŒ…å«4ä¸ªä¸»è¦é˜¶æ®µï¼Œæ€»è®¡150+ä¸ªå…·ä½“ä»»åŠ¡ï¼Œç¡®ä¿æ¶æ„é‡æ„æœ‰åºã€é«˜æ•ˆã€ä½é£é™©åœ°è¿›è¡Œã€‚

### æ ¸å¿ƒç›®æ ‡
- âœ… è§£å†³æ‰€æœ‰ç¼–è¯‘é—®é¢˜ï¼Œå®ç°0ç¼–è¯‘é”™è¯¯
- âœ… å»ºç«‹æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œï¼Œbase=é€šç”¨ï¼Œadmin=ä¸šåŠ¡
- âœ… ç»Ÿä¸€è®¾å¤‡ç®¡ç†å’Œç”Ÿç‰©ç‰¹å¾ç®¡ç†
- âœ… æå‡ä»£ç è´¨é‡ï¼Œè¾¾åˆ°ä¼ä¸šçº§æ ‡å‡†

### å®æ–½ç­–ç•¥
- **æ¸è¿›å¼é‡æ„**: åˆ†é˜¶æ®µå®æ–½ï¼Œé™ä½é£é™©
- **å‘åå…¼å®¹**: ä¿è¯ç°æœ‰åŠŸèƒ½ä¸å—å½±å“
- **è´¨é‡ä¼˜å…ˆ**: æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„è´¨é‡é—¨ç¦
- **æ–‡æ¡£åŒæ­¥**: å®æ—¶æ›´æ–°ç›¸å…³æŠ€æœ¯æ–‡æ¡£

---

## ğŸ¯ æ€»ä½“æ—¶é—´è§„åˆ’

```mermaid
gantt
    title IOE-DREAMæ¶æ„é‡æ„å®æ–½è®¡åˆ’
    dateFormat  YYYY-MM-DD
    section é˜¶æ®µ1: åŸºç¡€é‡æ„
    æ¸…ç†baseæ¨¡å—           :a1, 2025-11-25, 1w
    è®¾å¤‡åŸºç¡€ç»„ä»¶ç»Ÿä¸€        :a2, after a1, 1w
    ä¿®å¤ç¼–è¯‘é—®é¢˜           :a3, after a2, 3d

    section é˜¶æ®µ2: ä¸šåŠ¡é€‚é…
    é—¨ç¦æ¨¡å—é€‚é…           :b1, after a3, 1w
    æ¶ˆè´¹æ¨¡å—é€‚é…           :b2, after b1, 1w
    è€ƒå‹¤æ¨¡å—é€‚é…           :b3, after b2, 1w
    ç”Ÿç‰©ç‰¹å¾ç»Ÿä¸€           :b4, after b3, 1w

    section é˜¶æ®µ3: é«˜çº§åŠŸèƒ½
    ç¼“å­˜ç­–ç•¥å®ç°           :c1, after b4, 1w
    å¼‚æ­¥å¤„ç†ä¼˜åŒ–           :c2, after c1, 1w
    æ™ºèƒ½ä¸‹å‘ç­–ç•¥           :c3, after c2, 1w
    ç›‘æ§å‘Šè­¦ç³»ç»Ÿ           :c4, after c3, 3d

    section é˜¶æ®µ4: æµ‹è¯•ä¼˜åŒ–
    å•å…ƒæµ‹è¯•å®Œå–„           :d1, after c4, 1w
    é›†æˆæµ‹è¯•éªŒè¯           :d2, after d1, 1w
    æ€§èƒ½æµ‹è¯•ä¼˜åŒ–           :d3, after d2, 1w
    æ–‡æ¡£æ›´æ–°å®Œå–„           :d4, after d3, 3d
```

---

## ğŸ“… é˜¶æ®µ1: åŸºç¡€ç»„ä»¶é‡æ„ (ç¬¬1-2å‘¨)

### é˜¶æ®µç›®æ ‡
- å»ºç«‹æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œ
- è§£å†³æ‰€æœ‰ç¼–è¯‘é—®é¢˜
- ç»Ÿä¸€è®¾å¤‡åŸºç¡€ç»„ä»¶

### é˜¶æ®µ1è¯¦ç»†ä»»åŠ¡æ¸…å•

#### 1.1 æ¸…ç†baseæ¨¡å—ä¸šåŠ¡ç‰¹å®šç»„ä»¶ (1-3å¤©)

**ä»»åŠ¡1.1.1**: ç§»é™¤ä¸šåŠ¡ç‰¹å®šé€‚é…å™¨
- [ ] åˆ é™¤ `sa-base/module/area/adapter/` ç›®å½•
- [ ] ç§»é™¤ `AccessAreaAdapter.java`
- [ ] ç§»é™¤ `AttendanceAreaAdapter.java`
- [ ] ç§»é™¤ `ConsumeAreaAdapter.java`
- [ ] ç§»é™¤ `VideoAreaAdapter.java`
- [ ] ç§»é™¤ `HttpPersonDispatchAdapter.java`

**ä»»åŠ¡1.1.2**: ç§»é™¤ä¸šåŠ¡ç‰¹å®šå¼•æ“
- [ ] åˆ é™¤ `sa-base/module/area/engine/` ç›®å½•
- [ ] ç§»é™¤ `DeviceDispatchEngine.java`
- [ ] ç§»é™¤ç›¸å…³ä¸šåŠ¡ç‰¹å®šç»„ä»¶

**ä»»åŠ¡1.1.3**: æš‚æ—¶ç¦ç”¨å¤æ‚ç®¡ç†å™¨
- [ ] ç¦ç”¨ `PersonAreaCacheManager.java` (ä¾èµ–ä¸šåŠ¡é€»è¾‘)
- [ ] ç¦ç”¨ `BiometricCacheManager.java` (éœ€è¦é‡æ„)
- [ ] åˆ›å»ºåŸºç¡€ç‰ˆæœ¬çš„ç¼“å­˜ç®¡ç†å™¨

**éªŒæ”¶æ ‡å‡†**:
- âœ… baseæ¨¡å—æ— ä¸šåŠ¡ç‰¹å®šç»„ä»¶
- âœ… ç¼–è¯‘é”™è¯¯å‡å°‘50%ä»¥ä¸Š

#### 1.2 è®¾å¤‡åŸºç¡€ç»„ä»¶ç»Ÿä¸€åŒ– (3-4å¤©)

**ä»»åŠ¡1.2.1**: ç»Ÿä¸€SmartDeviceEntity
- [ ] ç¡®è®¤ `SmartDeviceEntity` åœ¨ `sa-base/common/device/entity/`
- [ ] éªŒè¯å­—æ®µå®Œæ•´æ€§ï¼ŒåŒ…å«è®¾å¤‡åŸºç¡€ä¿¡æ¯
- [ ] å®ç°è®¾å¤‡ç±»å‹æšä¸¾
- [ ] å®ç°è®¾å¤‡çŠ¶æ€æšä¸¾

**ä»»åŠ¡1.2.2**: ç»Ÿä¸€è®¾å¤‡æ¥å£å®šä¹‰
- [ ] å®Œå–„ `DeviceAdapterInterface.java`
- [ ] å®šä¹‰ `DeviceDispatchResult.java`
- [ ] å®šä¹‰ `DeviceProtocolException.java`
- [ ] å®šä¹‰ `DeviceConnectionTest.java`

**ä»»åŠ¡1.2.3**: ç»Ÿä¸€è®¾å¤‡DAO
- [ ] åˆ›å»º `SmartDeviceDao.java`
- [ ] å®ç°åŸºç¡€CRUDæ–¹æ³•
- [ ] å®ç°è®¾å¤‡æŸ¥è¯¢æ–¹æ³•
- [ ] æ·»åŠ ç´¢å¼•ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- âœ… è®¾å¤‡åŸºç¡€ç»„ä»¶åœ¨baseæ¨¡å—å®Œæ•´å¯ç”¨
- âœ… å„ä¸šåŠ¡æ¨¡å—å¯æ­£å¸¸å¼•ç”¨è®¾å¤‡ç»„ä»¶

#### 1.3 ä¿®å¤ç¼–è¯‘é—®é¢˜ (2-3å¤©)

**ä»»åŠ¡1.3.1**: ä¿®å¤å¯¼å…¥è·¯å¾„é”™è¯¯
- [ ] æ‰¹é‡ä¿®å¤ `SmartDeviceEntity` å¯¼å…¥è·¯å¾„
- [ ] ä¿®å¤ `DeviceDispatchResult` å¯¼å…¥è·¯å¾„
- [ ] ä¿®å¤ `DeviceProtocolException` å¯¼å…¥è·¯å¾„
- [ ] éªŒè¯æ‰€æœ‰å¯¼å…¥è·¯å¾„æ­£ç¡®æ€§

**ä»»åŠ¡1.3.2**: è§£å†³ä¾èµ–å†²çª
- [ ] ç§»é™¤Spring Retryä¾èµ– (å¦‚æœä¸éœ€è¦)
- [ ] ä¿®å¤Caffeineç¼“å­˜ä¾èµ–é—®é¢˜
- [ ] è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜
- [ ] ç»Ÿä¸€Jacksonç‰ˆæœ¬

**ä»»åŠ¡1.3.3**: ä¿®å¤ç¼ºå¤±ç±»å’Œæ–¹æ³•
- [ ] åˆ›å»ºç¼ºå¤±çš„VOç±»
- [ ] å®ç°ç¼ºå¤±çš„Formç±»
- [ ] è¡¥å…¨ç¼ºå¤±çš„ä¸šåŠ¡æ–¹æ³•
- [ ] æ·»åŠ ç¼ºå¤±çš„æ³¨è§£

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç¼–è¯‘é”™è¯¯ä¸º0
- âœ… æ‰€æœ‰æµ‹è¯•ç±»å¯ä»¥æ­£å¸¸ç¼–è¯‘
- âœ… é¡¹ç›®å¯ä»¥æ­£å¸¸å¯åŠ¨

### é˜¶æ®µ1è´¨é‡é—¨ç¦

**ç¼–è¯‘æ£€æŸ¥**:
```bash
mvn clean compile -q
# æœŸæœ›: 0é”™è¯¯

find . -name "*.java" -exec grep -l "javax\." {} \; | wc -l
# æœŸæœ›: 0ä¸ªjavax EEåŒ…å¼•ç”¨

find . -name "*.java" -exec grep -l "@Autowired" {} \; | wc -l
# æœŸæœ›: 0ä¸ª@Autowiredä½¿ç”¨
```

---

## ğŸ“… é˜¶æ®µ2: ä¸šåŠ¡æ¨¡å—é€‚é… (ç¬¬3-6å‘¨)

### é˜¶æ®µç›®æ ‡
- å„ä¸šåŠ¡æ¨¡å—é€‚é…æ–°æ¶æ„
- å®ç°è®¾å¤‡é€‚é…å™¨æ¨¡å¼
- ç»Ÿä¸€ç”Ÿç‰©ç‰¹å¾ç®¡ç†

### é˜¶æ®µ2è¯¦ç»†ä»»åŠ¡æ¸…å•

#### 2.1 é—¨ç¦æ¨¡å—é€‚é… (1å‘¨)

**ä»»åŠ¡2.1.1**: é—¨ç¦è®¾å¤‡é€‚é…å™¨å®ç°
```java
// sa-admin/module/access/adapter/AccessDeviceAdapter.java
@Component
public class AccessDeviceAdapter implements DeviceAdapterInterface {

    @Resource
    private Map<String, AccessProtocolInterface> protocolAdapters;

    @Override
    public DeviceConnectionTest testConnection(SmartDeviceEntity device) {
        AccessProtocolInterface adapter = getProtocolAdapter(device);
        return adapter.testConnection(device);
    }

    @Override
    public DeviceDispatchResult dispatchBiometricData(SmartDeviceEntity device, Map<String, Object> biometricData) {
        AccessProtocolInterface adapter = getProtocolAdapter(device);
        Map<String, Object> accessBiometricData = convertToAccessBiometricData(biometricData);
        return adapter.dispatchBiometricData(device, accessBiometricData);
    }

    private AccessProtocolInterface getProtocolAdapter(SmartDeviceEntity device) {
        String manufacturer = device.getManufacturer();
        return protocolAdapters.get(manufacturer);
    }

    private Map<String, Object> convertToAccessBiometricData(Map<String, Object> biometricData) {
        // è½¬æ¢ä¸ºé—¨ç¦ä¸“ç”¨æ ¼å¼
    }
}
```

**ä»»åŠ¡2.1.2**: åè®®é€‚é…å™¨å®ç°
- [ ] å®ç° `ZKTecoAdapter.java`
- [ ] å®ç° `HikvisionAdapter.java`
- [ ] å®ç° `DahuaAdapter.java`
- [ ] å®ç°åè®®æ³¨å†Œå™¨

**ä»»åŠ¡2.1.3**: é—¨ç¦ä¸šåŠ¡é€‚é…
- [ ] æ›´æ–° `AccessDeviceEntity` ç»§æ‰¿ `SmartDeviceEntity`
- [ ] ä¿®å¤é—¨ç¦ç›¸å…³Service
- [ ] æ›´æ–°é—¨ç¦Controller
- [ ] æ·»åŠ é—¨ç¦ä¸“ç”¨å­—æ®µå’Œæ–¹æ³•

**éªŒæ”¶æ ‡å‡†**:
- âœ… é—¨ç¦æ¨¡å—ç¼–è¯‘é€šè¿‡
- âœ… é—¨ç¦è®¾å¤‡é€‚é…å™¨æ­£å¸¸å·¥ä½œ
- âœ… ç°æœ‰é—¨ç¦åŠŸèƒ½ä¸å—å½±å“

#### 2.2 æ¶ˆè´¹æ¨¡å—é€‚é… (1å‘¨)

**ä»»åŠ¡2.2.1**: æ¶ˆè´¹è®¾å¤‡é€‚é…å™¨å®ç°
```java
// sa-admin/module/consume/adapter/ConsumeDeviceAdapter.java
@Component
public class ConsumeDeviceAdapter implements DeviceAdapterInterface {

    @Resource
    private ConsumeProtocolManager protocolManager;

    @Override
    public DeviceDispatchResult dispatchPersonData(SmartDeviceEntity device, Map<String, Object> personData) {
        // è½¬æ¢ä¸ºæ¶ˆè´¹è®¾å¤‡äººå‘˜æ•°æ®æ ¼å¼
        Map<String, Object> consumePersonData = convertToConsumePersonData(personData);

        // ä¸‹å‘åˆ°æ¶ˆè´¹è®¾å¤‡
        return protocolManager.dispatchPersonData(device, consumePersonData);
    }

    private Map<String, Object> convertToConsumePersonData(Map<String, Object> personData) {
        Map<String, Object> consumeData = new HashMap<>();
        consumeData.put("personId", personData.get("personId"));
        consumeData.put("personCode", personData.get("personCode"));
        consumeData.put("personName", personData.get("personName"));
        consumeData.put("balance", personData.get("balance") != null ? personData.get("balance") : 0);
        consumeData.put("cardNumber", personData.get("cardNumber"));
        consumeData.put("fingerprint", personData.get("fingerprint"));
        consumeData.put("face", personData.get("face"));
        return consumeData;
    }
}
```

**ä»»åŠ¡2.2.2**: æ¶ˆè´¹åè®®ç®¡ç†å™¨
- [ ] å®ç° `ConsumeProtocolManager.java`
- [ ] æ”¯æŒå¤šç§æ¶ˆè´¹æœºåè®®
- [ ] å®ç°æ•°æ®æ ¼å¼è½¬æ¢
- [ ] æ·»åŠ é”™è¯¯å¤„ç†æœºåˆ¶

**ä»»åŠ¡2.2.3**: æ¶ˆè´¹ä¸šåŠ¡é€‚é…
- [ ] æ›´æ–°æ¶ˆè´¹ç›¸å…³Entity
- [ ] ä¿®å¤æ¶ˆè´¹Service
- [ ] æ›´æ–°æ¶ˆè´¹Controller
- [ ] æ·»åŠ æ¶ˆè´¹ä¸“ç”¨åŠŸèƒ½

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ¶ˆè´¹æ¨¡å—ç¼–è¯‘é€šè¿‡
- âœ… æ¶ˆè´¹è®¾å¤‡é€‚é…å™¨æ­£å¸¸å·¥ä½œ
- âœ… æ¶ˆè´¹æ•°æ®ä¸‹å‘åŠŸèƒ½æ­£å¸¸

#### 2.3 è€ƒå‹¤æ¨¡å—é€‚é… (1å‘¨)

**ä»»åŠ¡2.3.1**: è€ƒå‹¤è®¾å¤‡é€‚é…å™¨å®ç°
```java
// sa-admin/module/attendance/adapter/AttendanceDeviceAdapter.java
@Component
public class AttendanceDeviceAdapter implements DeviceAdapterInterface {

    @Override
    public DeviceDispatchResult dispatchPersonData(SmartDeviceEntity device, Map<String, Object> personData) {
        // è½¬æ¢ä¸ºè€ƒå‹¤è®¾å¤‡äººå‘˜æ•°æ®æ ¼å¼
        Map<String, Object> attendancePersonData = convertToAttendancePersonData(personData);

        // ä¸‹å‘åˆ°è€ƒå‹¤è®¾å¤‡
        return dispatchToDevice(device, attendancePersonData);
    }

    private Map<String, Object> convertToAttendancePersonData(Map<String, Object> personData) {
        Map<String, Object> attendanceData = new HashMap<>();
        attendanceData.put("employeeId", personData.get("personId"));
        attendanceData.put("employeeCode", personData.get("personCode"));
        attendanceData.put("employeeName", personData.get("personName"));
        attendanceData.put("department", personData.get("department"));
        attendanceData.put("position", personData.get("position"));
        attendanceData.put("workSchedule", personData.get("workSchedule"));
        attendanceData.put("biometricData", personData.get("biometricData"));
        return attendanceData;
    }
}
```

**ä»»åŠ¡2.3.2**: è€ƒå‹¤ä¸šåŠ¡é€‚é…
- [ ] æ›´æ–°è€ƒå‹¤ç›¸å…³Entity
- [ ] ä¿®å¤è€ƒå‹¤Service
- [ ] æ›´æ–°è€ƒå‹¤Controller
- [ ] å®ç°è€ƒå‹¤è§„åˆ™å¼•æ“

**éªŒæ”¶æ ‡å‡†**:
- âœ… è€ƒå‹¤æ¨¡å—ç¼–è¯‘é€šè¿‡
- âœ… è€ƒå‹¤è®¾å¤‡é€‚é…å™¨æ­£å¸¸å·¥ä½œ
- âœ… è€ƒå‹¤æ•°æ®ä¸‹å‘åŠŸèƒ½æ­£å¸¸

#### 2.4 ç”Ÿç‰©ç‰¹å¾ç»Ÿä¸€ç®¡ç† (1å‘¨)

**ä»»åŠ¡2.4.1**: äººå‘˜ç”Ÿç‰©ç‰¹å¾æœåŠ¡
```java
// sa-admin/module/biometric/service/PersonBiometricService.java
@Service
public class PersonBiometricService {

    @Resource
    private BiometricTemplateDao templateDao;

    @Resource
    private BiometricCacheManager cacheManager;

    /**
     * è·å–äººå‘˜å®Œæ•´ç”Ÿç‰©ç‰¹å¾æ•°æ®
     */
    public Map<String, Object> getUnifiedBiometricData(Long personId) {
        // 1. å°è¯•ä»ç¼“å­˜è·å–
        Map<String, Object> cachedData = cacheManager.getUnifiedBiometricData(personId);
        if (cachedData != null) {
            return cachedData;
        }

        // 2. ä»æ•°æ®åº“è·å–å¹¶ç»„è£…
        Map<String, Object> unifiedData = new HashMap<>();

        // è·å–äººå‘˜åŸºæœ¬ä¿¡æ¯
        PersonEntity person = getPersonInfo(personId);
        unifiedData.put("personId", personId);
        unifiedData.put("personCode", person.getPersonCode());
        unifiedData.put("personName", person.getPersonName());

        // è·å–ç”Ÿç‰©ç‰¹å¾æ•°æ®
        List<BiometricTemplateEntity> templates = templateDao.selectByPersonId(personId);
        Map<String, List<Map<String, Object>>> biometricData = new HashMap<>();

        for (BiometricTemplateEntity template : templates) {
            String type = template.getBiometricType();
            List<Map<String, Object>> typeData = biometricData.computeIfAbsent(type, k -> new ArrayList<>());

            Map<String, Object> templateData = new HashMap<>();
            templateData.put("biometricType", type);
            templateData.put("templateData", template.getTemplateData()); // SM4åŠ å¯†æ•°æ®
            templateData.put("qualityScore", template.getQualityScore());
            templateData.put("templateIndex", template.getTemplateIndex());
            templateData.put("isPrimary", template.isPrimary());

            typeData.add(templateData);
        }

        unifiedData.put("biometricData", biometricData);
        unifiedData.put("biometricCount", templates.size());

        // 3. ç¼“å­˜ç»“æœ
        cacheManager.cacheUnifiedBiometricData(personId, unifiedData);

        return unifiedData;
    }
}
```

**ä»»åŠ¡2.4.2**: ç”Ÿç‰©ç‰¹å¾ç¼“å­˜ç®¡ç†å™¨
```java
// sa-admin/module/biometric/manager/BiometricCacheManager.java
@Component
public class BiometricCacheManager {

    // L1ç¼“å­˜: Caffeineæœ¬åœ°ç¼“å­˜
    private final Cache<Long, Map<String, Object>> unifiedBiometricCache;
    private final Cache<String, BiometricTemplateEntity> templateCache;

    // L2ç¼“å­˜: Redisåˆ†å¸ƒå¼ç¼“å­˜
    @Resource
    private RedisTemplate<String, Object> redisTemplate;

    public BiometricCacheManager() {
        this.unifiedBiometricCache = Caffeine.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(60, TimeUnit.MINUTES)
            .build();

        this.templateCache = Caffeine.newBuilder()
            .maximumSize(5000)
            .expireAfterWrite(30, TimeUnit.MINUTES)
            .build();
    }

    public Map<String, Object> getUnifiedBiometricData(Long personId) {
        // å…ˆæŸ¥L1ç¼“å­˜
        Map<String, Object> data = unifiedBiometricCache.getIfPresent(personId);
        if (data != null) {
            return data;
        }

        // å†æŸ¥L2ç¼“å­˜
        String key = "biometric:unified:" + personId;
        try {
            data = (Map<String, Object>) redisTemplate.opsForValue().get(key);
            if (data != null) {
                // å›å†™L1ç¼“å­˜
                unifiedBiometricCache.put(personId, data);
                return data;
            }
        } catch (Exception e) {
            log.warn("Redisç¼“å­˜è·å–å¤±è´¥ï¼Œå¿½ç•¥é”™è¯¯", e);
        }

        return null;
    }
}
```

**ä»»åŠ¡2.4.3**: ç»Ÿä¸€ç”Ÿç‰©ç‰¹å¾ä¸‹å‘å¼•æ“
```java
// sa-admin/module/biometric/engine/UnifiedBiometricDispatchEngine.java
@Component
public class UnifiedBiometricDispatchEngine {

    @Resource
    private PersonBiometricService personBiometricService;

    @Resource
    private ApplicationContext applicationContext;

    @Resource
    private ThreadPoolExecutor dispatchExecutor;

    /**
     * åŒæ­¥ä¸‹å‘ç”Ÿç‰©ç‰¹å¾æ•°æ®
     */
    public BiometricDispatchResult dispatchBiometricData(BiometricDispatchRequest request) {
        List<SmartDeviceEntity> devices = request.getTargetDevices();
        List<BiometricDispatchDeviceResult> deviceResults = new ArrayList<>();

        for (SmartDeviceEntity device : devices) {
            try {
                // è·å–å¯¹åº”çš„è®¾å¤‡é€‚é…å™¨
                DeviceAdapterInterface adapter = getDeviceAdapter(device);

                // è½¬æ¢ç”Ÿç‰©ç‰¹å¾æ•°æ®æ ¼å¼
                Map<String, Object> biometricData = convertBiometricData(
                    request.getBiometricData(),
                    device.getDeviceType()
                );

                // ä¸‹å‘æ•°æ®
                DeviceDispatchResult result = adapter.dispatchBiometricData(device, biometricData);

                BiometricDispatchDeviceResult deviceResult = new BiometricDispatchDeviceResult();
                deviceResult.setDeviceId(device.getDeviceId());
                deviceResult.setDeviceName(device.getDeviceName());
                deviceResult.setSuccess(result.isSuccess());
                deviceResult.setMessage(result.getMessage());
                deviceResult.setDispatchTime(LocalDateTime.now());

                deviceResults.add(deviceResult);

            } catch (Exception e) {
                log.error("è®¾å¤‡{}ç”Ÿç‰©ç‰¹å¾ä¸‹å‘å¤±è´¥", device.getDeviceName(), e);

                BiometricDispatchDeviceResult deviceResult = new BiometricDispatchDeviceResult();
                deviceResult.setDeviceId(device.getDeviceId());
                deviceResult.setDeviceName(device.getDeviceName());
                deviceResult.setSuccess(false);
                deviceResult.setMessage("ä¸‹å‘å¼‚å¸¸: " + e.getMessage());
                deviceResult.setDispatchTime(LocalDateTime.now());

                deviceResults.add(deviceResult);
            }
        }

        return new BiometricDispatchResult(deviceResults);
    }

    /**
     * å¼‚æ­¥ä¸‹å‘ç”Ÿç‰©ç‰¹å¾æ•°æ®
     */
    @Async("dispatchExecutor")
    public CompletableFuture<BiometricDispatchResult> dispatchBiometricDataAsync(BiometricDispatchRequest request) {
        return CompletableFuture.supplyAsync(() -> dispatchBiometricData(request), dispatchExecutor)
                .exceptionally(throwable -> {
                    log.error("å¼‚æ­¥ç”Ÿç‰©ç‰¹å¾ä¸‹å‘å¼‚å¸¸", throwable);
                    return createFailureResult(request, throwable);
                });
    }

    /**
     * æ‰¹é‡ä¸‹å‘ç”Ÿç‰©ç‰¹å¾æ•°æ®
     */
    public List<BiometricDispatchResult> batchDispatchBiometricData(List<BiometricDispatchRequest> requests) {
        return requests.parallelStream()
                .map(this::dispatchBiometricData)
                .collect(Collectors.toList());
    }

    private DeviceAdapterInterface getDeviceAdapter(SmartDeviceEntity device) {
        String businessType = device.getDeviceType();

        switch (businessType) {
            case "ACCESS":
                return applicationContext.getBean("accessDeviceAdapter", DeviceAdapterInterface.class);
            case "CONSUME":
                return applicationContext.getBean("consumeDeviceAdapter", DeviceAdapterInterface.class);
            case "ATTENDANCE":
                return applicationContext.getBean("attendanceDeviceAdapter", DeviceAdapterInterface.class);
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„è®¾å¤‡ç±»å‹: " + businessType);
        }
    }

    private Map<String, Object> convertBiometricData(Map<String, Object> unifiedData, String deviceType) {
        // æ ¹æ®è®¾å¤‡ç±»å‹è½¬æ¢ç”Ÿç‰©ç‰¹å¾æ•°æ®æ ¼å¼
        Map<String, Object> biometricData = new HashMap<>();
        biometricData.put("personId", unifiedData.get("personId"));
        biometricData.put("personCode", unifiedData.get("personCode"));
        biometricData.put("personName", unifiedData.get("personName"));
        biometricData.put("biometricData", unifiedData.get("biometricData"));

        return biometricData;
    }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç”Ÿç‰©ç‰¹å¾æ•°æ®ç»Ÿä¸€ç®¡ç†
- âœ… æ”¯æŒå¤šç§ç”Ÿç‰©ç‰¹å¾ç±»å‹
- âœ… ç¼“å­˜æœºåˆ¶æ­£å¸¸å·¥ä½œ
- âœ… å„ä¸šåŠ¡æ¨¡å—å¯æ­£å¸¸è°ƒç”¨

### é˜¶æ®µ2è´¨é‡é—¨ç¦

**åŠŸèƒ½æµ‹è¯•**:
```bash
# æµ‹è¯•é—¨ç¦é€‚é…å™¨
curl -X POST http://localhost:1024/api/access/device/test \
  -H "Content-Type: application/json" \
  -d '{"deviceId": 1}'

# æµ‹è¯•ç”Ÿç‰©ç‰¹å¾ä¸‹å‘
curl -X POST http://localhost:1024/api/biometric/dispatch \
  -H "Content-Type: application/json" \
  -d '{"personId": 12345, "deviceIds": [1, 2, 3]}'
```

---

## ğŸ“… é˜¶æ®µ3: é«˜çº§åŠŸèƒ½å®ç° (ç¬¬7-9å‘¨)

### é˜¶æ®µç›®æ ‡
- å®ç°é«˜æ€§èƒ½ç¼“å­˜ç­–ç•¥
- å®ç°å¼‚æ­¥å¤„ç†æœºåˆ¶
- å®ç°æ™ºèƒ½è®¾å¤‡ä¸‹å‘ç­–ç•¥
- å»ºç«‹ç›‘æ§å‘Šè­¦ä½“ç³»

### é˜¶æ®µ3è¯¦ç»†ä»»åŠ¡æ¸…å•

#### 3.1 ç¼“å­˜ç­–ç•¥å®ç° (1å‘¨)

**ä»»åŠ¡3.1.1**: å¤šçº§ç¼“å­˜æ¶æ„
```java
// sa-base/common/cache/BaseCacheManager.java
@Component
public class BaseCacheManager {

    // L1: Caffeineæœ¬åœ°ç¼“å­˜
    private final Cache<String, Object> localCache;

    // L2: Redisåˆ†å¸ƒå¼ç¼“å­˜
    @Resource
    private RedisTemplate<String, Object> redisTemplate;

    public BaseCacheManager() {
        this.localCache = Caffeine.newBuilder()
            .maximumSize(10000)
            .expireAfterWrite(30, TimeUnit.MINUTES)
            .recordStats()
            .build();
    }

    public <T> T get(String key, Class<T> type) {
        // 1. å…ˆæŸ¥L1ç¼“å­˜
        T value = (T) localCache.getIfPresent(key);
        if (value != null) {
            return value;
        }

        // 2. å†æŸ¥L2ç¼“å­˜
        try {
            value = (T) redisTemplate.opsForValue().get(key);
            if (value != null) {
                // å›å†™L1ç¼“å­˜
                localCache.put(key, value);
                return value;
            }
        } catch (Exception e) {
            log.warn("Redisç¼“å­˜è®¿é—®å¤±è´¥", e);
        }

        return null;
    }

    public void put(String key, Object value, long ttl, TimeUnit unit) {
        // å†™å…¥L1ç¼“å­˜
        localCache.put(key, value);

        // å†™å…¥L2ç¼“å­˜
        try {
            redisTemplate.opsForValue().set(key, value, ttl, unit);
        } catch (Exception e) {
            log.warn("Redisç¼“å­˜å†™å…¥å¤±è´¥", e);
        }
    }

    public void evict(String key) {
        // æ¸…é™¤L1ç¼“å­˜
        localCache.invalidate(key);

        // æ¸…é™¤L2ç¼“å­˜
        try {
            redisTemplate.delete(key);
        } catch (Exception e) {
            log.warn("Redisç¼“å­˜åˆ é™¤å¤±è´¥", e);
        }
    }

    /**
     * è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯
     */
    public CacheStats getStats() {
        return localCache.stats();
    }
}
```

**ä»»åŠ¡3.1.2**: ç¼“å­˜ç­–ç•¥é…ç½®
```java
// sa-base/config/CacheConfig.java
@Configuration
@EnableCaching
public class CacheConfig {

    @Bean
    @Primary
    public CacheManager cacheManager() {
        CaffeineCacheManager cacheManager = new CaffeineCacheManager();
        cacheManager.setCaffeine(Caffeine.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(10, TimeUnit.MINUTES)
            .recordStats());
        return cacheManager;
    }

    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(factory);

        // ä½¿ç”¨Jackson2JsonRedisSerializer
        Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer<>(Object.class);
        ObjectMapper mapper = new ObjectMapper();
        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        mapper.activateDefaultTyping(LazyLoadingAwareJavaTimeModule.INSTANCE, ObjectMapper.DefaultTyping.NON_FINAL);
        serializer.setObjectMapper(mapper);

        template.setValueSerializer(serializer);
        template.setKeySerializer(new StringRedisSerializer());
        template.setHashKeySerializer(new StringRedisSerializer());
        template.setHashValueSerializer(serializer);

        return template;
    }

    @Bean
    public ThreadPoolExecutor cacheExecutor() {
        return new ThreadPoolExecutor(
            5, 20, 60L, TimeUnit.SECONDS,
            new LinkedBlockingQueue<>(1000),
            new ThreadFactoryBuilder().setNameFormat("cache-pool-%d").build(),
            new ThreadPoolExecutor.CallerRunsPolicy()
        );
    }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… L1ç¼“å­˜å‘½ä¸­ç‡â‰¥80%
- âœ… L2ç¼“å­˜å‘½ä¸­ç‡â‰¥90%
- âœ… ç¼“å­˜å“åº”æ—¶é—´P95â‰¤10ms

#### 3.2 å¼‚æ­¥å¤„ç†ä¼˜åŒ– (1å‘¨)

**ä»»åŠ¡3.2.1**: å¼‚æ­¥è®¾å¤‡ä¸‹å‘
```java
// sa-admin/module/device/service/AsyncDeviceDispatchService.java
@Service
public class AsyncDeviceDispatchService {

    @Resource
    private ThreadPoolExecutor dispatchExecutor;

    @Resource
    private ThreadPoolExecutor notificationExecutor;

    /**
     * å¼‚æ­¥æ‰¹é‡ä¸‹å‘è®¾å¤‡æ•°æ®
     */
    @Async("dispatchExecutor")
    public CompletableFuture<BatchDispatchResult> batchDispatchAsync(BatchDispatchRequest request) {
        return CompletableFuture.supplyAsync(() -> {
            BatchDispatchResult result = new BatchDispatchResult();
            List<CompletableFuture<DeviceDispatchResult>> futures = new ArrayList<>();

            // å¹¶è¡Œå¤„ç†æ¯ä¸ªè®¾å¤‡
            for (SmartDeviceEntity device : request.getDevices()) {
                CompletableFuture<DeviceDispatchResult> future = CompletableFuture
                    .supplyAsync(() -> dispatchToDevice(device, request.getData()), dispatchExecutor)
                    .exceptionally(throwable -> {
                        log.error("è®¾å¤‡{}ä¸‹å‘å¤±è´¥", device.getDeviceName(), throwable);
                        return DeviceDispatchResult.failure(device.getDeviceId(), throwable.getMessage());
                    });
                futures.add(future);
            }

            // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
            CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).join();

            // æ”¶é›†ç»“æœ
            List<DeviceDispatchResult> results = futures.stream()
                .map(CompletableFuture::join)
                .collect(Collectors.toList());

            result.setResults(results);
            result.setTotalCount(results.size());
            result.setSuccessCount((int) results.stream().mapToInt(r -> r.isSuccess() ? 1 : 0).sum());
            result.setFailureCount(result.getTotalCount() - result.getSuccessCount());

            // å¼‚æ­¥å‘é€é€šçŸ¥
            if (request.isEnableNotification()) {
                sendDispatchNotificationAsync(result);
            }

            return result;
        }, dispatchExecutor);
    }

    /**
     * å¼‚æ­¥å‘é€ä¸‹å‘é€šçŸ¥
     */
    @Async("notificationExecutor")
    public void sendDispatchNotificationAsync(BatchDispatchResult result) {
        try {
            // æ„å»ºé€šçŸ¥å†…å®¹
            NotificationMessage message = NotificationMessage.builder()
                .title("è®¾å¤‡ä¸‹å‘å®Œæˆ")
                .content(String.format("å…±ä¸‹å‘%dä¸ªè®¾å¤‡ï¼ŒæˆåŠŸ%dä¸ªï¼Œå¤±è´¥%dä¸ª",
                    result.getTotalCount(), result.getSuccessCount(), result.getFailureCount()))
                .timestamp(LocalDateTime.now())
                .build();

            // å‘é€é€šçŸ¥
            notificationService.sendNotification(message);

        } catch (Exception e) {
            log.error("ä¸‹å‘é€šçŸ¥å‘é€å¤±è´¥", e);
        }
    }
}
```

**ä»»åŠ¡3.2.2**: å¼‚æ­¥äº‹ä»¶å¤„ç†
```java
// sa-base/common/event/AsyncEventPublisher.java
@Component
public class AsyncEventPublisher {

    @Resource
    private ApplicationEventPublisher eventPublisher;

    /**
     * å‘å¸ƒå¼‚æ­¥äº‹ä»¶
     */
    public void publishAsync(Object event) {
        eventPublisher.publishEvent(event);
    }

    /**
     * å‘å¸ƒè®¾å¤‡äº‹ä»¶
     */
    public void publishDeviceEvent(SmartDeviceEntity device, String eventType, Map<String, Object> data) {
        DeviceEvent event = DeviceEvent.builder()
            .deviceId(device.getDeviceId())
            .deviceName(device.getDeviceName())
            .deviceType(device.getDeviceType())
            .eventType(eventType)
            .data(data)
            .timestamp(LocalDateTime.now())
            .build();

        publishAsync(event);
    }
}

// äº‹ä»¶ç›‘å¬å™¨
@Component
public class DeviceEventListener {

    @EventListener
    @Async("deviceEventExecutor")
    public void handleDeviceConnectedEvent(DeviceEvent event) {
        if ("DEVICE_CONNECTED".equals(event.getEventType())) {
            // å¤„ç†è®¾å¤‡è¿æ¥äº‹ä»¶
            log.info("è®¾å¤‡{}å·²è¿æ¥", event.getDeviceName());

            // æ›´æ–°è®¾å¤‡çŠ¶æ€
            updateDeviceStatus(event.getDeviceId(), "ONLINE");

            // è§¦å‘è®¾å¤‡æ£€æŸ¥
            scheduleDeviceHealthCheck(event.getDeviceId());
        }
    }

    @EventListener
    @Async("deviceEventExecutor")
    public void handleDeviceDisconnectedEvent(DeviceEvent event) {
        if ("DEVICE_DISCONNECTED".equals(event.getEventType())) {
            // å¤„ç†è®¾å¤‡æ–­å¼€äº‹ä»¶
            log.warn("è®¾å¤‡{}å·²æ–­å¼€è¿æ¥", event.getDeviceName());

            // æ›´æ–°è®¾å¤‡çŠ¶æ€
            updateDeviceStatus(event.getDeviceId(), "OFFLINE");

            // å‘é€å‘Šè­¦
            sendDeviceOfflineAlert(event.getDeviceId());
        }
    }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¼‚æ­¥å¤„ç†æˆåŠŸç‡â‰¥95%
- âœ… å¹¶å‘å¤„ç†èƒ½åŠ›æå‡50%
- âœ… äº‹ä»¶å¤„ç†å»¶è¿Ÿâ‰¤100ms

#### 3.3 æ™ºèƒ½è®¾å¤‡ä¸‹å‘ç­–ç•¥ (1å‘¨)

**ä»»åŠ¡3.3.1**: è®¾å¤‡ä¸‹å‘ç­–ç•¥å¼•æ“
```java
// sa-admin/module/device/strategy/DeviceDispatchStrategyEngine.java
@Component
public class DeviceDispatchStrategyEngine {

    @Resource
    private PersonAreaService personAreaService;

    @Resource
    private SmartDeviceService deviceService;

    /**
     * åŸºäºäººå‘˜åŒºåŸŸå…³ç³»ç¡®å®šç›®æ ‡è®¾å¤‡
     */
    public List<SmartDeviceEntity> determineTargetDevices(Long personId, String businessType) {
        // 1. è·å–äººå‘˜æœ‰æ•ˆåŒºåŸŸ
        List<AreaEntity> validAreas = personAreaService.getPersonValidAreas(personId);

        // 2. è·å–åŒºåŸŸå†…è®¾å¤‡
        List<SmartDeviceEntity> areaDevices = getAreaDevices(validAreas, businessType);

        // 3. åº”ç”¨è®¾å¤‡è¿‡æ»¤ç­–ç•¥
        return applyDeviceFilterStrategy(areaDevices, personId, businessType);
    }

    /**
     * æ™ºèƒ½è®¾å¤‡é€‰æ‹©ç­–ç•¥
     */
    public List<SmartDeviceEntity> selectOptimalDevices(List<SmartDeviceEntity> devices,
                                                        Map<String, Object> criteria) {
        // 1. è®¾å¤‡å¥åº·çŠ¶æ€è¿‡æ»¤
        List<SmartDeviceEntity> healthyDevices = devices.stream()
            .filter(device -> isDeviceHealthy(device))
            .collect(Collectors.toList());

        // 2. è®¾å¤‡è´Ÿè½½å‡è¡¡
        List<SmartDeviceEntity> balancedDevices = applyLoadBalance(healthyDevices);

        // 3. åœ°ç†ä½ç½®ä¼˜åŒ–
        List<SmartDeviceEntity> optimizedDevices = applyLocationOptimization(balancedDevices, criteria);

        // 4. è®¾å¤‡ç±»å‹åŒ¹é…
        return applyDeviceTypeMatching(optimizedDevices, criteria);
    }

    private List<SmartDeviceEntity> applyLoadBalance(List<SmartDeviceEntity> devices) {
        // æ ¹æ®è®¾å¤‡å½“å‰è´Ÿè½½æ’åº
        return devices.stream()
            .sorted(Comparator.comparing(this::getDeviceLoad))
            .collect(Collectors.toList());
    }

    private List<SmartDeviceEntity> applyLocationOptimization(List<SmartDeviceEntity> devices,
                                                              Map<String, Object> criteria) {
        // æ ¹æ®äººå‘˜ä½ç½®ä¼˜åŒ–è®¾å¤‡é€‰æ‹©
        String userLocation = (String) criteria.get("userLocation");
        if (userLocation != null) {
            return devices.stream()
                .sorted(Comparator.comparing(device -> calculateDistance(device, userLocation)))
                .collect(Collectors.toList());
        }
        return devices;
    }
}
```

**ä»»åŠ¡3.3.2**: è®¾å¤‡å¥åº·ç›‘æ§
```java
// sa-admin/module/device/monitor/DeviceHealthMonitor.java
@Component
public class DeviceHealthMonitor {

    @Resource
    private DeviceHealthCheckService healthCheckService;

    @Scheduled(fixedRate = 300000) // æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
    public void performHealthCheck() {
        List<SmartDeviceEntity> allDevices = deviceService.getAllActiveDevices();

        allDevices.parallelStream().forEach(device -> {
            try {
                DeviceHealthStatus status = checkDeviceHealth(device);
                updateDeviceHealthStatus(device.getDeviceId(), status);

                // å‘é€å‘Šè­¦ï¼ˆå¦‚æœéœ€è¦ï¼‰
                if (status.getHealthLevel() == HealthLevel.CRITICAL) {
                    sendHealthAlert(device, status);
                }
            } catch (Exception e) {
                log.error("è®¾å¤‡{}å¥åº·æ£€æŸ¥å¤±è´¥", device.getDeviceName(), e);
            }
        });
    }

    private DeviceHealthStatus checkDeviceHealth(SmartDeviceEntity device) {
        DeviceHealthStatus status = new DeviceHealthStatus();
        status.setDeviceId(device.getDeviceId());
        status.setCheckTime(LocalDateTime.now());

        // 1. è¿æ¥çŠ¶æ€æ£€æŸ¥
        boolean isConnected = testDeviceConnection(device);
        status.setConnected(isConnected);

        // 2. å“åº”æ—¶é—´æ£€æŸ¥
        long responseTime = measureResponseTime(device);
        status.setResponseTime(responseTime);

        // 3. èµ„æºä½¿ç”¨æƒ…å†µæ£€æŸ¥
        DeviceResourceUsage resourceUsage = getResourceUsage(device);
        status.setCpuUsage(resourceUsage.getCpuUsage());
        status.setMemoryUsage(resourceUsage.getMemoryUsage());
        status.setDiskUsage(resourceUsage.getDiskUsage());

        // 4. è®¡ç®—å¥åº·ç­‰çº§
        status.setHealthLevel(calculateHealthLevel(status));

        return status;
    }

    private HealthLevel calculateHealthLevel(DeviceHealthStatus status) {
        if (!status.isConnected()) {
            return HealthLevel.CRITICAL;
        }

        if (status.getResponseTime() > 5000) { // 5ç§’
            return HealthLevel.WARNING;
        }

        if (status.getCpuUsage() > 80 || status.getMemoryUsage() > 85) {
            return HealthLevel.WARNING;
        }

        return HealthLevel.HEALTHY;
    }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ™ºèƒ½è®¾å¤‡é€‰æ‹©å‡†ç¡®ç‡â‰¥90%
- âœ… è®¾å¤‡å¥åº·ç›‘æ§è¦†ç›–ç‡100%
- âœ… å‘Šè­¦å“åº”æ—¶é—´â‰¤30ç§’

#### 3.4 ç›‘æ§å‘Šè­¦ç³»ç»Ÿ (3å¤©)

**ä»»åŠ¡3.4.1**: ç³»ç»Ÿç›‘æ§é…ç½®
```java
// sa-base/config/MonitoringConfig.java
@Configuration
@EnableScheduling
public class MonitoringConfig {

    @Bean
    public MeterRegistryCustomizer<MeterRegistry> metricsCommonTags() {
        return registry -> registry.config().commonTags(
            "application", "ioe-dream",
            "version", "3.0.0"
        );
    }

    @Bean
    public TimedAspect timedAspect(MeterRegistry registry) {
        return new TimedAspect(registry);
    }

    @Bean
    public CountedAspect countedAspect(MeterRegistry registry) {
        return new CountedAspect(registry);
    }
}

// ç›‘æ§æŒ‡æ ‡æ”¶é›†
@Component
public class DeviceMetricsCollector {

    private final Counter deviceDispatchCounter;
    private final Timer deviceDispatchTimer;
    private final Gauge activeDevicesGauge;

    public DeviceMetricsCollector(MeterRegistry registry) {
        deviceDispatchCounter = Counter.builder("device.dispatch.count")
            .description("è®¾å¤‡ä¸‹å‘æ¬¡æ•°")
            .register(registry);

        deviceDispatchTimer = Timer.builder("device.dispatch.duration")
            .description("è®¾å¤‡ä¸‹å‘è€—æ—¶")
            .register(registry);

        activeDevicesGauge = Gauge.builder("device.active.count")
            .description("æ´»è·ƒè®¾å¤‡æ•°é‡")
            .register(registry, this, DeviceMetricsCollector::getActiveDeviceCount);
    }

    public void recordDeviceDispatch(String deviceType, String result) {
        deviceDispatchCounter.increment(
            Tags.of("device_type", deviceType, "result", result)
        );
    }

    public Timer.Sample startDispatchTimer() {
        return Timer.start();
    }

    public void recordDispatchTime(Timer.Sample sample, String deviceType) {
        sample.stop(deviceDispatchTimer.tag("device_type", deviceType));
    }

    private double getActiveDeviceCount() {
        return deviceService.getActiveDeviceCount();
    }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç›‘æ§æŒ‡æ ‡è¦†ç›–ç‡â‰¥90%
- âœ… å‘Šè­¦å‡†ç¡®ç‡â‰¥95%
- âœ… ç›‘æ§æ•°æ®å»¶è¿Ÿâ‰¤10ç§’

### é˜¶æ®µ3è´¨é‡é—¨ç¦

**æ€§èƒ½æµ‹è¯•**:
```bash
# å¹¶å‘æµ‹è¯•
ab -n 1000 -c 100 http://localhost:1024/api/biometric/dispatch

# ç¼“å­˜æµ‹è¯•
redis-cli --latency-history -i 1
```

---

## ğŸ“… é˜¶æ®µ4: æµ‹è¯•ä¸ä¼˜åŒ– (ç¬¬10-11å‘¨)

### é˜¶æ®µç›®æ ‡
- å®Œå–„æµ‹è¯•è¦†ç›–ç‡
- æ€§èƒ½ä¼˜åŒ–
- æ–‡æ¡£å®Œå–„

### é˜¶æ®µ4è¯¦ç»†ä»»åŠ¡æ¸…å•

#### 4.1 å•å…ƒæµ‹è¯•å®Œå–„ (1å‘¨)

**ä»»åŠ¡4.1.1**: è®¾å¤‡é€‚é…å™¨æµ‹è¯•
```java
// sa-admin/src/test/java/net/lab1024/sa/admin/module/access/adapter/AccessDeviceAdapterTest.java
@ExtendWith(MockitoExtension.class)
class AccessDeviceAdapterTest {

    @Mock
    private ZKTecoAdapter zktecoAdapter;

    @Mock
    private HikvisionAdapter hikvisionAdapter;

    @InjectMocks
    private AccessDeviceAdapter accessDeviceAdapter;

    @Test
    @DisplayName("æµ‹è¯•ZKTecoè®¾å¤‡è¿æ¥")
    void testZKTecoConnection() {
        // Given
        SmartDeviceEntity device = createZKTecoDevice();
        DeviceConnectionTest expected = DeviceConnectionTest.success();
        when(zktecoAdapter.testConnection(device)).thenReturn(expected);

        // When
        DeviceConnectionTest result = accessDeviceAdapter.testConnection(device);

        // Then
        assertThat(result.isSuccess()).isTrue();
        verify(zktecoAdapter).testConnection(device);
    }

    @Test
    @DisplayName("æµ‹è¯•ç”Ÿç‰©ç‰¹å¾æ•°æ®ä¸‹å‘")
    void testBiometricDataDispatch() {
        // Given
        SmartDeviceEntity device = createZKTecoDevice();
        Map<String, Object> biometricData = createBiometricData();
        DeviceDispatchResult expected = DeviceDispatchResult.success();
        when(zktecoAdapter.dispatchBiometricData(device, any())).thenReturn(expected);

        // When
        DeviceDispatchResult result = accessDeviceAdapter.dispatchBiometricData(device, biometricData);

        // Then
        assertThat(result.isSuccess()).isTrue();
        verify(zktecoAdapter).dispatchBiometricData(eq(device), any(Map.class));
    }

    @Test
    @DisplayName("æµ‹è¯•è®¾å¤‡ç±»å‹ä¸åŒ¹é…")
    void testUnsupportedDeviceType() {
        // Given
        SmartDeviceEntity device = createUnsupportedDevice();

        // When & Then
        assertThatThrownBy(() -> accessDeviceAdapter.testConnection(device))
            .isInstanceOf(IllegalArgumentException.class)
            .hasMessageContaining("ä¸æ”¯æŒçš„è®¾å¤‡åˆ¶é€ å•†");
    }

    private SmartDeviceEntity createZKTecoDevice() {
        SmartDeviceEntity device = new SmartDeviceEntity();
        device.setDeviceId(1L);
        device.setDeviceName("ZKè®¾å¤‡1");
        device.setDeviceType("ACCESS");
        device.setManufacturer("ZKTeco");
        device.setIpAddress("192.168.1.100");
        device.setPort(4370);
        return device;
    }

    private Map<String, Object> createBiometricData() {
        Map<String, Object> data = new HashMap<>();
        data.put("personId", 12345L);
        data.put("personCode", "EMP001");
        data.put("personName", "å¼ ä¸‰");

        Map<String, Object> bioData = new HashMap<>();
        bioData.put("FACE", Arrays.asList(
            Map.of("templateData", "base64-data", "qualityScore", 0.95)
        ));
        data.put("biometricData", bioData);

        return data;
    }
}
```

**ä»»åŠ¡4.1.2**: ç”Ÿç‰©ç‰¹å¾æœåŠ¡æµ‹è¯•
```java
// sa-admin/src/test/java/net/lab1024/sa/admin/module/biometric/service/PersonBiometricServiceTest.java
@ExtendWith(MockitoExtension.class)
@SpringBootTest
class PersonBiometricServiceTest {

    @MockBean
    private BiometricTemplateDao templateDao;

    @MockBean
    private BiometricCacheManager cacheManager;

    @Autowired
    private PersonBiometricService personBiometricService;

    @Test
    @DisplayName("æµ‹è¯•è·å–ç»Ÿä¸€ç”Ÿç‰©ç‰¹å¾æ•°æ® - ç¼“å­˜å‘½ä¸­")
    void testGetUnifiedBiometricData_CacheHit() {
        // Given
        Long personId = 12345L;
        Map<String, Object> expectedData = createExpectedBiometricData();
        when(cacheManager.getUnifiedBiometricData(personId)).thenReturn(expectedData);

        // When
        Map<String, Object> result = personBiometricService.getUnifiedBiometricData(personId);

        // Then
        assertThat(result).isEqualTo(expectedData);
        verify(cacheManager).getUnifiedBiometricData(personId);
        verifyNoMoreInteractions(templateDao);
    }

    @Test
    @DisplayName("æµ‹è¯•è·å–ç»Ÿä¸€ç”Ÿç‰©ç‰¹å¾æ•°æ® - æ•°æ®åº“æŸ¥è¯¢")
    void testGetUnifiedBiometricData_DatabaseQuery() {
        // Given
        Long personId = 12345L;
        when(cacheManager.getUnifiedBiometricData(personId)).thenReturn(null);

        List<BiometricTemplateEntity> templates = Arrays.asList(
            createTemplate(1L, personId, "FACE", 0.95),
            createTemplate(2L, personId, "FINGERPRINT", 0.88)
        );
        when(templateDao.selectByPersonId(personId)).thenReturn(templates);

        // When
        Map<String, Object> result = personBiometricService.getUnifiedBiometricData(personId);

        // Then
        assertThat(result).isNotNull();
        assertThat(result.get("personId")).isEqualTo(personId);
        assertThat(result.get("biometricCount")).isEqualTo(2);

        Map<String, Object> biometricData = (Map<String, Object>) result.get("biometricData");
        assertThat(biometricData).containsKeys("FACE", "FINGERPRINT");

        verify(cacheManager).cacheUnifiedBiometricData(personId, result);
    }

    private BiometricTemplateEntity createTemplate(Long id, Long personId, String type, double quality) {
        BiometricTemplateEntity template = new BiometricTemplateEntity();
        template.setId(id);
        template.setPersonId(personId);
        template.setBiometricType(type);
        template.setQualityScore(quality);
        template.setTemplateData("encrypted-data");
        return template;
    }
}
```

**ä»»åŠ¡4.1.3**: ç¼“å­˜ç®¡ç†å™¨æµ‹è¯•
```java
// sa-admin/src/test/java/net/lab1024/sa/admin/module/biometric/manager/BiometricCacheManagerTest.java
@ExtendWith(MockitoExtension.class)
class BiometricCacheManagerTest {

    @Mock
    private RedisTemplate<String, Object> redisTemplate;

    @InjectMocks
    private BiometricCacheManager cacheManager;

    @Test
    @DisplayName("æµ‹è¯•ç¼“å­˜putå’Œget")
    void testCachePutAndGet() {
        // Given
        Long personId = 12345L;
        Map<String, Object> data = createTestData();

        // When
        cacheManager.cacheUnifiedBiometricData(personId, data);
        Map<String, Object> result = cacheManager.getUnifiedBiometricData(personId);

        // Then
        assertThat(result).isEqualTo(data);
    }

    @Test
    @DisplayName("æµ‹è¯•ç¼“å­˜æœªå‘½ä¸­")
    void testCacheMiss() {
        // Given
        Long personId = 12345L;
        when(redisTemplate.opsForValue().get(anyString())).thenReturn(null);

        // When
        Map<String, Object> result = cacheManager.getUnifiedBiometricData(personId);

        // Then
        assertThat(result).isNull();
    }

    @Test
    @DisplayName("æµ‹è¯•ç¼“å­˜å¤±æ•ˆ")
    void testCacheEvict() {
        // Given
        Long personId = 12345L;
        Map<String, Object> data = createTestData();
        cacheManager.cacheUnifiedBiometricData(personId, data);

        // When
        cacheManager.evictUnifiedBiometricData(personId);
        Map<String, Object> result = cacheManager.getUnifiedBiometricData(personId);

        // Then
        assertThat(result).isNull();
        verify(redisTemplate).delete(contains("biometric:unified:"));
    }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡â‰¥80%
- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æœ‰æµ‹è¯•è¦†ç›–
- âœ… æ‰€æœ‰è¾¹ç•Œæƒ…å†µæœ‰æµ‹è¯•è¦†ç›–

#### 4.2 é›†æˆæµ‹è¯•éªŒè¯ (1å‘¨)

**ä»»åŠ¡4.2.1**: ç«¯åˆ°ç«¯æµ‹è¯•
```java
// sa-admin/src/test/java/net/lab1024/sa/admin/integration/DeviceDispatchIntegrationTest.java
@SpringBootTest
@TestPropertySource(properties = {
    "spring.datasource.url=jdbc:h2:mem:testdb",
    "spring.jpa.hibernate.ddl-auto=create-drop"
})
class DeviceDispatchIntegrationTest {

    @Autowired
    private TestRestTemplate restTemplate;

    @Autowired
    private SmartDeviceService deviceService;

    @Autowired
    private PersonBiometricService personBiometricService;

    @Test
    @DisplayName("å®Œæ•´çš„ç”Ÿç‰©ç‰¹å¾ä¸‹å‘æµç¨‹æµ‹è¯•")
    void testCompleteBiometricDispatchFlow() {
        // 1. å‡†å¤‡æµ‹è¯•æ•°æ®
        SmartDeviceEntity device = createTestDevice();
        deviceService.save(device);

        Long personId = createTestPerson();
        Map<String, Object> biometricData = createTestBiometricData();

        // 2. è°ƒç”¨APIä¸‹å‘ç”Ÿç‰©ç‰¹å¾
        BiometricDispatchRequest request = new BiometricDispatchRequest(
            personId, Arrays.asList(device.getDeviceId())
        );

        ResponseEntity<ApiResult> response = restTemplate.postForEntity(
            "/api/biometric/dispatch",
            request,
            ApiResult.class
        );

        // 3. éªŒè¯ç»“æœ
        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(response.getBody().isSuccess()).isTrue();

        // 4. éªŒè¯æ•°æ®ä¸€è‡´æ€§
        Map<String, Object> storedBiometricData = personBiometricService.getUnifiedBiometricData(personId);
        assertThat(storedBiometricData).isNotNull();
        assertThat(storedBiometricData.get("biometricData")).isEqualTo(biometricData.get("biometricData"));
    }

    @Test
    @DisplayName("è®¾å¤‡å¥åº·æ£€æŸ¥é›†æˆæµ‹è¯•")
    void testDeviceHealthCheckIntegration() {
        // 1. åˆ›å»ºæµ‹è¯•è®¾å¤‡
        SmartDeviceEntity device = createTestDevice();
        deviceService.save(device);

        // 2. è°ƒç”¨å¥åº·æ£€æŸ¥API
        ResponseEntity<ApiResult> response = restTemplate.getForEntity(
            "/api/device/health/" + device.getDeviceId(),
            ApiResult.class
        );

        // 3. éªŒè¯ç»“æœ
        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);

        DeviceHealthStatus healthStatus = (DeviceHealthStatus) response.getBody().getData();
        assertThat(healthStatus).isNotNull();
        assertThat(healthStatus.getDeviceId()).isEqualTo(device.getDeviceId());
    }

    @Test
    @DisplayName("ç¼“å­˜æ€§èƒ½é›†æˆæµ‹è¯•")
    void testCachePerformanceIntegration() {
        Long personId = 12345L;
        Map<String, Object> biometricData = createLargeBiometricData();

        // 1. ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ˆç¼“å­˜æœªå‘½ä¸­ï¼‰
        long startTime = System.currentTimeMillis();
        Map<String, Object> result1 = personBiometricService.getUnifiedBiometricData(personId);
        long firstCallTime = System.currentTimeMillis() - startTime;

        // 2. ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰
        startTime = System.currentTimeMillis();
        Map<String, Object> result2 = personBiometricService.getUnifiedBiometricData(personId);
        long secondCallTime = System.currentTimeMillis() - startTime;

        // 3. éªŒè¯æ€§èƒ½æå‡
        assertThat(result1).isEqualTo(result2);
        assertThat(secondCallTime).isLessThan(firstCallTime / 10); // ç¼“å­˜åº”è¯¥è‡³å°‘å¿«10å€
    }
}
```

**ä»»åŠ¡4.2.2**: å‹åŠ›æµ‹è¯•
```java
// sa-admin/src/test/java/net/lab1024/sa/admin/performance/DeviceDispatchPerformanceTest.java
@SpringBootTest
class DeviceDispatchPerformanceTest {

    @Autowired
    private UnifiedBiometricDispatchEngine dispatchEngine;

    @Test
    @DisplayName("å¹¶å‘è®¾å¤‡ä¸‹å‘å‹åŠ›æµ‹è¯•")
    void testConcurrentDeviceDispatch() {
        int threadCount = 50;
        int requestsPerThread = 20;
        CountDownLatch latch = new CountDownLatch(threadCount);
        AtomicInteger successCount = new AtomicInteger(0);
        AtomicInteger failureCount = new AtomicInteger(0);

        // åˆ›å»ºçº¿ç¨‹æ± 
        ExecutorService executor = Executors.newFixedThreadPool(threadCount);

        // å¹¶å‘æ‰§è¡Œä¸‹å‘è¯·æ±‚
        for (int i = 0; i < threadCount; i++) {
            final int threadIndex = i;
            executor.submit(() -> {
                try {
                    for (int j = 0; j < requestsPerThread; j++) {
                        BiometricDispatchRequest request = createTestRequest(threadIndex, j);
                        BiometricDispatchResult result = dispatchEngine.dispatchBiometricData(request);

                        if (result.isSuccess()) {
                            successCount.incrementAndGet();
                        } else {
                            failureCount.incrementAndGet();
                        }
                    }
                } catch (Exception e) {
                    failureCount.incrementAndGet();
                    log.error("çº¿ç¨‹{}æ‰§è¡Œå¤±è´¥", threadIndex, e);
                } finally {
                    latch.countDown();
                }
            });
        }

        try {
            // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ
            boolean completed = latch.await(60, TimeUnit.SECONDS);
            assertThat(completed).isTrue();
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            fail("æµ‹è¯•è¢«ä¸­æ–­");
        }

        // éªŒè¯ç»“æœ
        int totalRequests = threadCount * requestsPerThread;
        double successRate = (double) successCount.get() / totalRequests * 100;

        log.info("å‹åŠ›æµ‹è¯•ç»“æœ: æ€»è¯·æ±‚={}, æˆåŠŸ={}, å¤±è´¥={}, æˆåŠŸç‡={:.2f}%",
                totalRequests, successCount.get(), failureCount.get(), successRate);

        assertThat(successRate).isGreaterThan(95.0); // æˆåŠŸç‡åº”è¯¥â‰¥95%

        executor.shutdown();
    }

    @Test
    @DisplayName("ç¼“å­˜æ€§èƒ½åŸºå‡†æµ‹è¯•")
    void testCachePerformanceBenchmark() {
        Map<String, Object> testData = createLargeTestData();
        int iterations = 10000;

        // é¢„çƒ­
        for (int i = 0; i < 100; i++) {
            cacheManager.put("benchmark:" + i, testData);
            cacheManager.get("benchmark:" + i);
        }

        // æµ‹è¯•å†™å…¥æ€§èƒ½
        long startTime = System.nanoTime();
        for (int i = 0; i < iterations; i++) {
            cacheManager.put("benchmark:" + i, testData);
        }
        long writeTime = System.nanoTime() - startTime;

        // æµ‹è¯•è¯»å–æ€§èƒ½
        startTime = System.nanoTime();
        for (int i = 0; i < iterations; i++) {
            cacheManager.get("benchmark:" + i);
        }
        long readTime = System.nanoTime() - startTime;

        double writeOpsPerSec = (double) iterations / (writeTime / 1_000_000_000.0);
        double readOpsPerSec = (double) iterations / (readTime / 1_000_000_000.0);

        log.info("ç¼“å­˜æ€§èƒ½åŸºå‡†æµ‹è¯•: å†™å…¥={:.0f} ops/sec, è¯»å–={:.0f} ops/sec",
                writeOpsPerSec, readOpsPerSec);

        assertThat(writeOpsPerSec).isGreaterThan(10000); // å†™å…¥â‰¥10k ops/sec
        assertThat(readOpsPerSec).isGreaterThan(50000);   // è¯»å–â‰¥50k ops/sec
    }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¹¶å‘å¤„ç†èƒ½åŠ›è¾¾æ ‡
- âœ… ç³»ç»Ÿç¨³å®šæ€§è‰¯å¥½
- âœ… æ€§èƒ½æŒ‡æ ‡æ»¡è¶³è¦æ±‚

#### 4.3 æ€§èƒ½æµ‹è¯•ä¼˜åŒ– (1å‘¨)

**ä»»åŠ¡4.3.1**: æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–
```sql
-- åˆ›å»ºå¿…è¦çš„ç´¢å¼•
CREATE INDEX idx_device_type_status ON t_smart_device(device_type, deleted_flag);
CREATE INDEX idx_person_area_person_id ON t_person_area_relation(person_id, deleted_flag);
CREATE INDEX idx_biometric_person_type ON t_biometric_template(person_id, biometric_type, deleted_flag);

-- åˆ†ææŸ¥è¯¢æ€§èƒ½
EXPLAIN SELECT * FROM t_smart_device WHERE device_type = 'ACCESS' AND deleted_flag = 0;
EXPLAIN SELECT * FROM t_person_area_relation WHERE person_id = 12345 AND deleted_flag = 0;
EXPLAIN SELECT * FROM t_biometric_template WHERE person_id = 12345 AND biometric_type = 'FACE' AND deleted_flag = 0;
```

**ä»»åŠ¡4.3.2**: JVMæ€§èƒ½è°ƒä¼˜
```java
// JVMå‚æ•°å»ºè®®
/*
-Xms2g -Xmx4g
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=16m
-XX:+UnlockExperimentalVMOptions
-XX:+UseStringDeduplication
-Djava.awt.headless=true
-Dfile.encoding=UTF-8
-Duser.timezone=Asia/Shanghai
*/
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ•°æ®åº“æŸ¥è¯¢å“åº”æ—¶é—´P95â‰¤100ms
- âœ… APIå“åº”æ—¶é—´P95â‰¤200ms
- âœ… å†…å­˜ä½¿ç”¨ç‡â‰¤80%

#### 4.4 æ–‡æ¡£æ›´æ–°å®Œå–„ (3å¤©)

**ä»»åŠ¡4.4.1**: APIæ–‡æ¡£æ›´æ–°
- [ ] æ›´æ–°Swagger APIæ–‡æ¡£
- [ ] æ·»åŠ è®¾å¤‡é€‚é…å™¨APIæ–‡æ¡£
- [ ] æ·»åŠ ç”Ÿç‰©ç‰¹å¾ç®¡ç†APIæ–‡æ¡£
- [ ] æ›´æ–°ç¼“å­˜ç›¸å…³APIæ–‡æ¡£

**ä»»åŠ¡4.4.2**: æŠ€æœ¯æ–‡æ¡£æ›´æ–°
- [ ] æ›´æ–°æ¶æ„è®¾è®¡æ–‡æ¡£
- [ ] æ›´æ–°æ•°æ®åº“è®¾è®¡æ–‡æ¡£
- [ ] æ›´æ–°éƒ¨ç½²æ–‡æ¡£
- [ ] æ›´æ–°å¼€å‘æŒ‡å—

**ä»»åŠ¡4.4.3**: ç”¨æˆ·æ‰‹å†Œæ›´æ–°
- [ ] æ›´æ–°è®¾å¤‡æ¥å…¥æŒ‡å—
- [ ] æ›´æ–°ç”Ÿç‰©ç‰¹å¾ç®¡ç†æ‰‹å†Œ
- [ ] æ›´æ–°æ•…éšœæ’é™¤æŒ‡å—
- [ ] æ›´æ–°æœ€ä½³å®è·µæŒ‡å—

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ–‡æ¡£å®Œæ•´æ€§100%
- âœ… æ–‡æ¡£å‡†ç¡®æ€§100%
- âœ… ç”¨æˆ·åé¦ˆæ»¡æ„åº¦â‰¥90%

### é˜¶æ®µ4è´¨é‡é—¨ç¦

**ç»¼åˆæµ‹è¯•**:
```bash
# å®Œæ•´é¡¹ç›®æµ‹è¯•
mvn clean test
# æœŸæœ›: æµ‹è¯•é€šè¿‡ç‡â‰¥95%

# ä»£ç è¦†ç›–ç‡æ£€æŸ¥
mvn jacoco:report
# æœŸæœ›: è¦†ç›–ç‡â‰¥80%

# æ€§èƒ½åŸºå‡†æµ‹è¯•
./scripts/performance-benchmark.sh
# æœŸæœ›: æ‰€æœ‰æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
```

---

## ğŸ“Š é£é™©ç®¡ç†è®¡åˆ’

### é£é™©çŸ©é˜µ

| é£é™©ç­‰çº§ | æ¦‚ç‡ | å½±å“ | é£é™©æè¿° | åº”å¯¹ç­–ç•¥ |
|---------|------|------|----------|----------|
| ğŸ”´ é«˜ | é«˜ | é«˜ | ç¼–è¯‘é”™è¯¯å¯¼è‡´æ— æ³•æ„å»º | åˆ†é˜¶æ®µä¿®å¤ï¼Œä¿ç•™å¤‡ä»½ |
| ğŸŸ¡ ä¸­ | ä¸­ | é«˜ | ä¸šåŠ¡åŠŸèƒ½å›å½’ | å®Œæ•´æµ‹è¯•ï¼Œç°åº¦å‘å¸ƒ |
| ğŸŸ¡ ä¸­ | ä½ | ä¸­ | æ€§èƒ½ä¸‹é™ | åŸºå‡†æµ‹è¯•ï¼Œæ€§èƒ½ç›‘æ§ |
| ğŸŸ¢ ä½ | ä½ | ä½ | å›¢é˜Ÿé€‚åº”é—®é¢˜ | åŸ¹è®­ï¼Œæ–‡æ¡£æ”¯æŒ |

### åº”æ€¥é¢„æ¡ˆ

#### 1. ç¼–è¯‘é”™è¯¯åº”æ€¥é¢„æ¡ˆ
```bash
# å¿«é€Ÿå›æ»šè„šæœ¬
#!/bin/bash
echo "æ‰§è¡Œå¿«é€Ÿå›æ»š..."
git checkout --backup-before-refactor
mvn clean compile
echo "å›æ»šå®Œæˆ"
```

#### 2. ä¸šåŠ¡ä¸­æ–­åº”æ€¥é¢„æ¡ˆ
```bash
# æœåŠ¡é™çº§è„šæœ¬
#!/bin/bash
echo "å¯ç”¨æœåŠ¡é™çº§æ¨¡å¼..."
# ç¦ç”¨æ–°åŠŸèƒ½
# å¯ç”¨ç¼“å­˜é™çº§
# å‘é€å‘Šè­¦é€šçŸ¥
echo "æœåŠ¡é™çº§å®Œæˆ"
```

#### 3. æ•°æ®ä¸¢å¤±åº”æ€¥é¢„æ¡ˆ
```bash
# æ•°æ®å¤‡ä»½æ¢å¤è„šæœ¬
#!/bin/bash
echo "æ‰§è¡Œæ•°æ®æ¢å¤..."
# åœæ­¢æœåŠ¡
# æ¢å¤æ•°æ®åº“å¤‡ä»½
# éªŒè¯æ•°æ®å®Œæ•´æ€§
echo "æ•°æ®æ¢å¤å®Œæˆ"
```

---

## ğŸ“ˆ æˆåŠŸæ ‡å‡†ä¸éªŒæ”¶

### æŠ€æœ¯æŒ‡æ ‡éªŒæ”¶

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹è¯•æ–¹æ³• | è´£ä»»äºº |
|------|--------|----------|--------|
| ç¼–è¯‘æˆåŠŸç‡ | 100% | è‡ªåŠ¨åŒ–æ„å»º | DevOps |
| æµ‹è¯•è¦†ç›–ç‡ | â‰¥80% | JaCoCoæŠ¥å‘Š | QAå›¢é˜Ÿ |
| ä»£ç å¤ç”¨ç‡ | â‰¥85% | SonarQubeåˆ†æ | æ¶æ„å¸ˆ |
| APIå“åº”æ—¶é—´ | P95â‰¤200ms | æ€§èƒ½æµ‹è¯• | æ€§èƒ½å·¥ç¨‹å¸ˆ |
| ç¼“å­˜å‘½ä¸­ç‡ | â‰¥80% | ç›‘æ§ç³»ç»Ÿ | è¿ç»´å›¢é˜Ÿ |

### ä¸šåŠ¡åŠŸèƒ½éªŒæ”¶

| åŠŸèƒ½æ¨¡å— | éªŒæ”¶æ ‡å‡† | æµ‹è¯•æ–¹æ³• | è´£ä»»äºº |
|----------|----------|----------|--------|
| è®¾å¤‡ç®¡ç† | æ‰€æœ‰è®¾å¤‡æ­£å¸¸æ¥å…¥ | é›†æˆæµ‹è¯• | æµ‹è¯•å›¢é˜Ÿ |
| ç”Ÿç‰©ç‰¹å¾ç®¡ç† | ç»Ÿä¸€ç®¡ç†åŠŸèƒ½æ­£å¸¸ | ç«¯åˆ°ç«¯æµ‹è¯• | äº§å“ç»ç† |
| ç¼“å­˜ç³»ç»Ÿ | æ€§èƒ½æå‡â‰¥50% | å‹åŠ›æµ‹è¯• | æ€§èƒ½å·¥ç¨‹å¸ˆ |
| ç›‘æ§å‘Šè­¦ | å‡†ç¡®ç‡â‰¥95% | æ•…éšœæ³¨å…¥æµ‹è¯• | è¿ç»´å›¢é˜Ÿ |

### æ–‡æ¡£å®Œæ•´æ€§éªŒæ”¶

| æ–‡æ¡£ç±»å‹ | å®Œæ•´æ€§è¦æ±‚ | éªŒæ”¶æ–¹æ³• | è´£ä»»äºº |
|----------|------------|----------|--------|
| APIæ–‡æ¡£ | 100%è¦†ç›– | æ–‡æ¡£å®¡æŸ¥ | æŠ€æœ¯å†™ä½œ |
| è®¾è®¡æ–‡æ¡£ | è¯¦ç»†å®Œæ•´ | ä¸“å®¶è¯„å®¡ | æ¶æ„å¸ˆ |
| ç”¨æˆ·æ‰‹å†Œ | æ˜“æ‡‚æ˜“ç”¨ | ç”¨æˆ·åé¦ˆ | äº§å“ç»ç† |
| è¿ç»´æ–‡æ¡£ | å¯æ“ä½œæ€§å¼º | å®é™…æ¼”ç»ƒ | è¿ç»´å›¢é˜Ÿ |

---

## ğŸ“š é™„å½•

### A. è´¨é‡æ£€æŸ¥æ¸…å•

#### ç¼–è¯‘è´¨é‡æ£€æŸ¥
- [ ] æ‰€æœ‰javaæ–‡ä»¶ç¼–è¯‘é€šè¿‡
- [ ] æ— è­¦å‘Šä¿¡æ¯
- [ ] ä¾èµ–ç‰ˆæœ¬æ­£ç¡®
- [ ] é…ç½®æ–‡ä»¶å®Œæ•´

#### ä»£ç è´¨é‡æ£€æŸ¥
- [ ] æ— ä»£ç å¼‚å‘³
- [ ] éµå¾ªç¼–ç è§„èŒƒ
- [ ] æ³¨é‡Šå®Œæ•´å‡†ç¡®
- [ ] å¼‚å¸¸å¤„ç†å®Œå–„

#### æ€§èƒ½è´¨é‡æ£€æŸ¥
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- [ ] ç¼“å­˜ç­–ç•¥æœ‰æ•ˆ
- [ ] å†…å­˜ä½¿ç”¨åˆç†
- [ ] å¹¶å‘å¤„ç†å®‰å…¨

#### å®‰å…¨è´¨é‡æ£€æŸ¥
- [ ] è¾“å…¥éªŒè¯å®Œæ•´
- [ ] æ•æ„Ÿæ•°æ®åŠ å¯†
- [ ] æƒé™æ§åˆ¶åˆ°ä½
- [ ] æ—¥å¿—è®°å½•åˆè§„

### B. å·¥å…·å’Œè„šæœ¬æ¸…å•

#### å¼€å‘å·¥å…·
- IDE: IntelliJ IDEA 2023.2+
- æ„å»ºå·¥å…·: Maven 3.8+
- ç‰ˆæœ¬æ§åˆ¶: Git 2.30+
- ä»£ç è´¨é‡: SonarQube 8.0+

#### æµ‹è¯•å·¥å…·
- å•å…ƒæµ‹è¯•: JUnit 5.8+
- é›†æˆæµ‹è¯•: Spring Boot Test
- æ€§èƒ½æµ‹è¯•: JMeter 5.5+
- å‹åŠ›æµ‹è¯•: Gatling 3.8+

#### ç›‘æ§å·¥å…·
- APM: SkyWalking 8.0+
- æ—¥å¿—: ELK Stack 7.10+
- æŒ‡æ ‡: Prometheus + Grafana
- å‘Šè­¦: AlertManager

#### è¿ç»´å·¥å…·
- å®¹å™¨åŒ–: Docker 20.10+
- ç¼–æ’: Kubernetes 1.24+
- CI/CD: Jenkins 2.400+
- é…ç½®ç®¡ç†: Ansible 2.10+

### C. è”ç³»æ–¹å¼

| è§’è‰² | å§“å | è”ç³»æ–¹å¼ | èŒè´£ |
|------|------|----------|------|
| é¡¹ç›®è´Ÿè´£äºº | SmartAdmin | development@smartadmin.vip | æ•´ä½“åè°ƒ |
| æ¶æ„å¸ˆ | AI Assistant | architect@smartadmin.vip | æ¶æ„è®¾è®¡ |
| DevOpså·¥ç¨‹å¸ˆ | DevOps Team | devops@smartadmin.vip | éƒ¨ç½²è¿ç»´ |
| æµ‹è¯•è´Ÿè´£äºº | QA Team | qa@smartadmin.vip | è´¨é‡ä¿è¯ |

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
**å®æ–½å¼€å§‹**: 2025-11-25
**é¢„è®¡å®Œæˆ**: 2026-02-05
**ç‰ˆæœ¬å†å²**: v1.0.0 (2025-11-25 åˆå§‹ç‰ˆæœ¬)