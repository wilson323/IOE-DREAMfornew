# 执行协议 - 开发规范强制执行机制

## 🚨 协议目的

本协议建立了多层次的开发规范强制执行机制，确保所有开发工作严格遵循项目标准，防止质量问题的发生。

## 🔒 执行层次结构

### 第一层：预防机制（工作前）
**目标**: 在问题发生前进行预防
**触发时机**: 每次开始开发工作前

#### 强制检查项目
1. **开发规范文档完整性检查**
   - CLAUDE.md 存在性验证
   - FORCED_EXECUTION_CONTRACT.md 签署状态检查
   - ENFORCEMENT_PROTOCOL.md 协议确认
   - DEV_STANDARDS.md 开发标准完整性
   - ARCHITECTURE_STANDARDS.md 架构规范完整性

2. **上次工作验证状态检查**
   - 验证报告存在性验证
   - 验证结果状态检查（必须为PASSED）
   - 验证时间有效性确认

3. **强制执行合同状态检查**
   - 合同签署状态验证
   - 违规后果明确性检查

4. **脚本完整性验证**
   - 所有验证脚本存在性检查
   - 脚本可执行权限确认

5. **项目状态分析**
   - Git分支状态检查
   - 未提交变更识别
   - 工作类型智能分析

6. **任务特定注意事项生成**
   - 基于文件变更类型的注意事项
   - 项目特定开发规范提醒
   - 模块化开发标准指引

### 第二层：过程监控（工作中）
**目标**: 实时监控开发过程，及时发现违规
**触发时机**: 代码编写和修改过程中

#### 实时检查机制
1. **包名规范实时检查**
   - 禁止使用 javax 包
   - 强制使用 jakarta 包
   - IDE实时提示和警告

2. **依赖注入规范检查**
   - 禁止使用 @Autowired
   - 强制使用 @Resource
   - 代码保存时自动验证

3. **架构规范监控**
   - Controller层禁止直接访问DAO
   - Service层事务管理检查
   - 跨层调用违规检测

## 🛡️ 承诺机制

### **我的承诺**
1. **每个任务完成后必须执行强制验证脚本**
2. **只有验证通过才能标记任务为完成**
3. **任何验证失败必须立即修复**
4. **不得跳过任何验证步骤**

### **强制执行步骤**
1. 运行: `bash scripts/task-completion-verify.sh <task_id>`
2. 等待所有检查通过
3. 保存验证证明文件
4. 只有验证通过后才更新tasks.md

### **违规后果**
- 如果发现跳过验证，所有任务状态必须重置为[ ]
- 如果发现虚假报告，必须重新进行所有验证
- 用户有权质疑任何未提供验证证明的任务完成状态

### **验证证明要求**
每个完成的任务必须提供:
- ✅ 编译通过证明 (mandatory-verification.sh输出)
- ✅ 测试通过证明
- ✅ 代码质量检查证明
- ✅ 应用启动成功证明
- ✅ 任务特定功能证明

### **可验证性**
所有验证都是可重复和可验证的:
```bash
# 任何人都可以运行相同验证
bash scripts/mandatory-verification.sh
```

## 📋 执行记录模板

每次任务完成后必须记录:
```
任务ID: task-2.x
执行时间: 2025-11-15 HH:MM:SS
验证脚本: mandatory-verification.sh
验证结果: PASSED/FAILED
验证证明: [证明文件路径]
修复记录: [如有失败，记录修复过程]
```

## 🚨 质量门禁

以下任何一项失败都禁止标记任务为完成:
- ❌ 编译失败
- ❌ 测试失败
- ❌ 启动失败
- ❌ 代码质量检查失败
- ❌ 任务特定功能验证失败

---

**签名**: Claude Code
**承诺**: 我将严格遵守此协议，确保所有任务完成都经过强制性验证
**日期**: 2025-11-15