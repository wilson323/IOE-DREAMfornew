# 区域管理模块

> **版本**: v2.0.0  
> **更新日期**: 2025-12-17

---

## 1. 功能说明

将原有"食堂"概念统一为"区域"，支持多级层级结构和多种经营模式。

### 核心功能
- 多级区域层级管理（园区→楼栋→楼层→区域）
- 经营模式配置（餐别制/超市制/混合）
- 定值金额配置
- 餐别分类关联

---

## 2. 用户故事

| 角色 | 故事 |
|------|------|
| 管理员 | 创建区域层级结构，配置经营模式 |
| 管理员 | 为区域配置可用餐别和定值金额 |
| 消费者 | 在有权限的区域进行消费 |

---

## 3. 数据结构

### POSID_AREA 表

| 字段 | 类型 | 说明 |
|------|------|------|
| id | VARCHAR(50) | 区域ID |
| code | VARCHAR(50) | 区域编号 |
| name | VARCHAR(100) | 区域名称 |
| parent_id | VARCHAR(50) | 父区域ID |
| level | INT | 层级 |
| manage_mode | INT | 经营模式 |
| fixed_value_config | TEXT | 定值配置JSON |

---

## 4. 业务流程

```
创建区域 --> 配置层级 --> 设置经营模式 --> 配置定值 --> 关联餐别 --> 启用
```

---

## 5. 缓存策略

- 区域树结构: Redis缓存，TTL 30分钟
- 区域详情: 本地+Redis二级缓存
- 更新时延迟双删

---

*本文档持续更新中*

