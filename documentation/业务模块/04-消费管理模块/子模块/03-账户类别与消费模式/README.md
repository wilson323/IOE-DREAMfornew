# 账户类别与消费模式模块

> **版本**: v2.0.0  
> **更新日期**: 2025-12-17

---

## 1. 功能说明

将9种旧消费模式合并为6种核心模式，通过账户类别统一配置。

### 6种核心消费模式

| 模式 | 编码 | 说明 |
|------|------|------|
| 定值 | FIXED_AMOUNT | 按配置定值扣款 |
| 自由金额 | FREE_AMOUNT | 输入金额扣款 |
| 计量 | METERED | 按计量值扣款 |
| 商品 | PRODUCT | 扫码商品扣款 |
| 订餐 | ORDER | 按订单扣款 |
| 智能 | INTELLIGENCE | 智能识别扣款 |

---

## 2. 用户故事

| 角色 | 故事 |
|------|------|
| 管理员 | 创建账户类别，配置支持的消费模式 |
| 管理员 | 为账户类别配置定值金额和区域权限 |
| 消费者 | 根据账户类别享受对应消费模式 |

---

## 3. 数据结构

### mode_config JSON结构

```json
{
  "FIXED_AMOUNT": {
    "enabled": true,
    "subType": "SECTION",
    "values": [
      {"key": "breakfast", "amount": 8.00}
    ]
  },
  "FREE_AMOUNT": {
    "enabled": true,
    "minAmount": 1,
    "maxAmount": 100000
  }
}
```

---

## 4. 定值计算优先级

1. 账户类别配置 (最高)
2. 区域配置
3. 系统默认值 (最低)

---

*本文档持续更新中*

