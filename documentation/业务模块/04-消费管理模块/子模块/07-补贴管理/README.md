# 补贴管理模块

> **版本**: v2.0.0  
> **更新日期**: 2025-12-17

---

## 1. 功能说明

独立补贴账户体系，支持灵活的发放和使用规则。

### 核心功能
- 补贴类型管理
- 补贴发放（定期/临时）
- 消费扣款优先级
- 补贴清零策略
- 补贴转换与退回

---

## 2. 用户故事

| 角色 | 故事 |
|------|------|
| 管理员 | 创建补贴类型，配置使用规则 |
| 管理员 | 批量发放补贴 |
| 消费者 | 消费时自动使用补贴 |
| 系统 | 按策略清零过期补贴 |

---

## 3. 数据结构

### POSID_SUBSIDY_TYPE 表

| 字段 | 类型 | 说明 |
|------|------|------|
| id | VARCHAR(50) | 类型ID |
| code | VARCHAR(50) | 类型编码 |
| name | VARCHAR(100) | 类型名称 |
| priority | INT | 使用优先级 |
| clear_strategy | VARCHAR(20) | 清零策略 |
| validity_days | INT | 有效期天数 |

### POSID_SUBSIDY_ACCOUNT 表

| 字段 | 类型 | 说明 |
|------|------|------|
| id | VARCHAR(50) | 账户ID |
| account_id | VARCHAR(50) | 关联账户 |
| subsidy_type_id | VARCHAR(50) | 补贴类型 |
| balance | INT | 余额(分) |
| expire_date | DATE | 过期日期 |

---

## 4. 消费扣款顺序

1. 按优先级使用补贴
2. 补贴不足时使用现金
3. 记录各账户扣款明细

---

## 5. 清零策略

| 策略 | 说明 |
|------|------|
| MONTHLY | 每月清零 |
| QUARTERLY | 每季度清零 |
| YEARLY | 每年清零 |
| EXPIRE | 按有效期清零 |

---

*本文档持续更新中*

