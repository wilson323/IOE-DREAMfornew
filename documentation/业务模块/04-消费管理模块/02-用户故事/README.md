# 消费管理模块 - 用户故事

> **版本**: v2.0.0  
> **更新日期**: 2025-12-17

---

## 1. 区域管理

### US-CONSUME-001: 创建区域
**作为** 系统管理员  
**我希望** 能够创建和管理消费区域  
**以便** 建立统一的空间管理模型

**验收标准**:
- [ ] 支持创建多级区域（园区→楼栋→楼层→区域）
- [ ] 支持配置区域类型（餐饮/商店/办公/医疗）
- [ ] 支持配置经营模式（餐别制/超市制/混合）
- [ ] 支持配置区域餐别分类

### US-CONSUME-002: 区域层级管理
**作为** 系统管理员  
**我希望** 能够管理区域的层级结构  
**以便** 支持层级权限继承

**验收标准**:
- [ ] 支持无限层级结构
- [ ] 支持层级路径自动计算
- [ ] 支持子区域权限继承

---

## 2. 餐别分类管理

### US-CONSUME-003: 餐别分类管理
**作为** 系统管理员  
**我希望** 能够管理餐别分类  
**以便** 实现分类级别的权限控制

**验收标准**:
- [ ] 支持创建餐别分类（早餐/午餐/晚餐等）
- [ ] 支持分类排序
- [ ] 支持分类启用/禁用

### US-CONSUME-004: 餐别管理
**作为** 系统管理员  
**我希望** 能够管理具体餐别  
**以便** 配置不同的消费规则

**验收标准**:
- [ ] 支持创建餐别并关联分类
- [ ] 支持配置时间窗口
- [ ] 支持配置基础价格
- [ ] 支持配置价格规则JSON

---

## 3. 账户类别管理

### US-CONSUME-005: 账户类别配置
**作为** 系统管理员  
**我希望** 能够配置账户类别  
**以便** 定义不同用户群体的消费规则

**验收标准**:
- [ ] 支持配置消费模式（mode_config）
- [ ] 支持配置区域权限（area_config）
- [ ] 支持配置折扣规则
- [ ] 支持配置限额控制

### US-CONSUME-006: 区域权限配置
**作为** 系统管理员  
**我希望** 能够为账户类别配置区域权限  
**以便** 控制用户在哪些区域可以消费

**验收标准**:
- [ ] 支持配置多个可用区域
- [ ] 支持层级继承（includeSubAreas）
- [ ] 支持权限验证

---

## 4. 消费处理

### US-CONSUME-007: 刷卡消费
**作为** 员工  
**我希望** 能够通过刷卡进行消费  
**以便** 快速完成支付

**验收标准**:
- [ ] 支持刷卡识别身份
- [ ] 支持自动判断消费模式
- [ ] 支持自动扣款
- [ ] 支持打印小票

### US-CONSUME-008: 定值消费
**作为** 员工  
**我希望** 能够按定值金额消费  
**以便** 在食堂快速就餐

**验收标准**:
- [ ] 支持按餐别定值消费
- [ ] 支持分段定值（早午晚不同金额）
- [ ] 支持账户类别覆盖区域默认定值

### US-CONSUME-009: 商品消费
**作为** 员工  
**我希望** 能够扫码购买商品  
**以便** 在超市购物

**验收标准**:
- [ ] 支持商品条码扫描
- [ ] 支持多件商品累加
- [ ] 支持应用折扣
- [ ] 支持扣减库存

---

## 5. 订餐管理

### US-CONSUME-010: 在线订餐
**作为** 员工  
**我希望** 能够提前在线订餐  
**以便** 节省排队时间

**验收标准**:
- [ ] 支持查看菜单
- [ ] 支持选择菜品
- [ ] 支持在线支付
- [ ] 支持生成取餐码

### US-CONSUME-011: 取餐核销
**作为** 员工  
**我希望** 能够刷卡取餐  
**以便** 快速获取餐品

**验收标准**:
- [ ] 支持刷卡验证订餐
- [ ] 支持核销订餐记录
- [ ] 支持超时处理

---

## 6. 充值退款

### US-CONSUME-012: 在线充值
**作为** 员工  
**我希望** 能够在线充值  
**以便** 随时补充余额

**验收标准**:
- [ ] 支持微信支付
- [ ] 支持支付宝支付
- [ ] 支持秒级到账
- [ ] 支持充值赠送

### US-CONSUME-013: 申请退款
**作为** 员工  
**我希望** 能够申请退款  
**以便** 取回不需要的余额

**验收标准**:
- [ ] 支持提交退款申请
- [ ] 支持审核流程
- [ ] 支持原路退回
- [ ] 支持退款通知

---

## 7. 补贴管理

### US-CONSUME-014: 补贴发放
**作为** 财务人员  
**我希望** 能够批量发放补贴  
**以便** 高效完成补贴发放

**验收标准**:
- [ ] 支持按人员发放
- [ ] 支持按部门发放
- [ ] 支持按账户类别发放
- [ ] 支持批量导入发放

### US-CONSUME-015: 补贴使用
**作为** 员工  
**我希望** 消费时自动使用补贴  
**以便** 享受福利

**验收标准**:
- [ ] 支持补贴优先扣款
- [ ] 支持多补贴按优先级扣款
- [ ] 支持补贴+现金混合支付

---

## 8. 离线消费

### US-CONSUME-016: 离线消费
**作为** 员工  
**我希望** 在网络中断时也能消费  
**以便** 不影响正常就餐

**验收标准**:
- [ ] 支持离线名单下发
- [ ] 支持离线余额扣款
- [ ] 支持数据自动同步

---

## 9. 报表统计

### US-CONSUME-017: 消费报表
**作为** 管理员  
**我希望** 能够查看消费报表  
**以便** 了解消费情况

**验收标准**:
- [ ] 支持按日/周/月统计
- [ ] 支持按区域统计
- [ ] 支持按账户类别统计
- [ ] 支持导出Excel

---

*本文档持续更新中*

