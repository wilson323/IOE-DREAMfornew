# 视频管理模块 - 移动端设计

## 1. 设计概述

移动端聚焦**移动巡检场景**，实现适合移动端的核心视频监控能力。

### 1.1 设计原则

| 原则 | 说明 |
|------|------|
| 场景驱动 | 聚焦巡检、应急响应、远程查看场景 |
| 轻量化 | 减少操作步骤，适配移动交互 |
| 实时性 | 告警推送、状态实时更新 |
| 省流量 | 自适应码流，WiFi/4G智能切换 |

### 1.2 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Vue 3.x | 3.4+ | 核心框架 |
| uni-app | 3.0+ | 跨平台开发 |
| Pinia | 2.x | 状态管理 |
| Socket.IO | 4.x | 实时通信 |

## 2. 功能范围

### 2.1 移动端实现功能

| 功能 | 优先级 | 状态 | 说明 |
|------|--------|------|------|
| 实时预览 | P0 | ✅ | 单/四画面切换 |
| 告警接收 | P0 | ✅ | 推送通知 |
| 告警处理 | P0 | ✅ | 确认/转发 |
| 设备状态 | P1 | ✅ | 在线状态查看 |
| 云台控制 | P1 | ✅ | 8方向+变焦 |
| 视频回放 | P1 | ✅ | 简化版 |
| 截图分享 | P2 | ⏳ | 快速分享 |

### 2.2 仅PC端功能

| 功能 | 原因 |
|------|------|
| 电视墙上墙 | 屏幕尺寸限制 |
| 解码器配置 | 复杂配置操作 |
| 分析规则配置 | 需要绘制区域 |
| 人脸库管理 | 批量导入操作 |
| 系统配置 | 管理员功能 |

## 3. 页面设计

### 3.1 视频首页

```
┌─────────────────────────────────┐
│         视频监控                 │
├─────────────────────────────────┤
│  ┌─────────────────────────┐   │
│  │     设备统计卡片         │   │
│  │  在线: 128  离线: 12     │   │
│  └─────────────────────────┘   │
├─────────────────────────────────┤
│  快捷操作                        │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐  │
│  │监控 │ │告警 │ │回放 │ │设备 │  │
│  └────┘ └────┘ └────┘ └────┘  │
├─────────────────────────────────┤
│  告警概览                        │
│  ┌─────────────────────────┐   │
│  │ 🔴 高危: 2  🟡 中危: 5   │   │
│  └─────────────────────────┘   │
├─────────────────────────────────┤
│  最近告警                        │
│  ┌─────────────────────────┐   │
│  │ ⚠️ 围墙越界告警          │   │
│  │   10:30  摄像机: 1号楼   │   │
│  └─────────────────────────┘   │
└─────────────────────────────────┘
```

### 3.2 实时监控页面

```
┌─────────────────────────────────┐
│  返回    实时监控    分屏切换    │
├─────────────────────────────────┤
│  ┌─────────────────────────┐   │
│  │                         │   │
│  │      视频播放区域       │   │
│  │                         │   │
│  └─────────────────────────┘   │
├─────────────────────────────────┤
│  设备名称: 1号楼大门            │
│  状态: 🟢 在线                   │
├─────────────────────────────────┤
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐  │
│  │截图 │ │录像 │ │云台 │ │对讲 │  │
│  └────┘ └────┘ └────┘ └────┘  │
├─────────────────────────────────┤
│  云台控制面板 (可折叠)           │
│       [↑]                       │
│   [←] [●] [→]                  │
│       [↓]                       │
│  变焦: [-] ━━━●━━━ [+]         │
└─────────────────────────────────┘
```

### 3.3 告警管理页面

```
┌─────────────────────────────────┐
│  返回    告警管理    筛选        │
├─────────────────────────────────┤
│  告警统计                        │
│  ┌────┬────┬────┐              │
│  │待处理│已处理│已忽略│              │
│  │ 12  │ 45  │ 8   │              │
│  └────┴────┴────┘              │
├─────────────────────────────────┤
│  告警列表                        │
│  ┌─────────────────────────┐   │
│  │ 🔴 越界检测              │   │
│  │   围墙摄像机 | 10:30     │   │
│  │   [查看] [处理] [忽略]   │   │
│  └─────────────────────────┘   │
│  ┌─────────────────────────┐   │
│  │ 🟡 人员徘徊              │   │
│  │   大门摄像机 | 10:25     │   │
│  │   [查看] [处理] [忽略]   │   │
│  └─────────────────────────┘   │
└─────────────────────────────────┘
```

## 4. API接口

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 设备列表 | GET | /ivs/v1/mobile/devices | 移动端设备列表 |
| 视频流 | GET | /ivs/v1/mobile/monitor/{deviceId} | 获取视频流 |
| 云台控制 | POST | /ivs/v1/mobile/ptz/control | PTZ控制 |
| 告警概览 | GET | /ivs/v1/mobile/alarm/overview | 告警统计 |
| 告警列表 | GET | /ivs/v1/mobile/alarm/active | 活跃告警 |
| 处理告警 | POST | /ivs/v1/mobile/alarm/process | 处理告警 |
| 快捷操作 | POST | /ivs/v1/mobile/action | 截图/录像 |

## 5. 性能指标

| 指标 | 要求 |
|------|------|
| 首屏加载 | < 2秒 |
| 视频起播 | < 3秒(WiFi) / < 5秒(4G) |
| 告警推送延迟 | < 1秒 |
| 云台响应 | < 500ms |
| 内存占用 | < 200MB |

## 6. 权限要求

| 权限 | 用途 |
|------|------|
| 网络访问 | 视频流加载 |
| 通知权限 | 告警推送 |
| 震动权限 | 告警提醒 |
| 存储权限 | 截图保存 |
| 后台运行 | 告警推送接收 |
