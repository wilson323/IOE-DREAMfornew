# 实时监控模块 - 功能说明

## 模块概述

实时监控模块提供视频实时预览、云台控制、视频截图和录制等核心功能，是视频监控系统的核心交互入口。

## 功能清单

### 1. 视频预览

| 功能点 | 说明 | 权限要求 |
|--------|------|----------|
| 单画面预览 | 单个设备视频流播放 | Level 2+ |
| 多画面分屏 | 1/4/9/16画面布局 | Level 2+ |
| 全屏播放 | 视频全屏展示 | Level 2+ |
| 画面轮巡 | 定时切换预览设备 | Level 3+ |
| 协议切换 | RTSP/RTMP/HLS/WebRTC | Level 3+ |

### 2. 云台控制 (PTZ)

| 功能点 | 说明 | 权限要求 |
|--------|------|----------|
| 方向控制 | 上/下/左/右/左上/右上/左下/右下 | Level 3+ |
| 变焦控制 | 放大/缩小 | Level 3+ |
| 聚焦控制 | 近焦/远焦 | Level 3+ |
| 光圈控制 | 大/小光圈 | Level 4+ |
| 预置位 | 设置/调用/删除预置位 | Level 3+ |
| 巡航轨迹 | 配置和执行巡航 | Level 4+ |

### 3. 视频截图

| 功能点 | 说明 | 权限要求 |
|--------|------|----------|
| 手动截图 | 单帧图像抓拍 | Level 2+ |
| 定时截图 | 按时间间隔自动抓拍 | Level 3+ |
| 事件触发截图 | 告警触发自动抓拍 | Level 3+ |
| 截图下载 | 本地保存截图 | Level 2+ |

### 4. 视频录制

| 功能点 | 说明 | 权限要求 |
|--------|------|----------|
| 手动录制 | 手动开始/停止录制 | Level 3+ |
| 定时录制 | 按计划自动录制 | Level 4+ |
| 事件触发录制 | 告警触发自动录制 | Level 4+ |
| 录制状态显示 | 显示当前录制状态 | Level 2+ |

## 流媒体协议支持

```java
public enum VideoStreamProtocol {
    RTSP("rtsp", "RTSP协议"),      // 实时流传输
    RTMP("rtmp", "RTMP协议"),      // Adobe流媒体
    HLS("http", "HLS协议"),        // HTTP Live Streaming
    WEBRTC("webrtc", "WebRTC协议"), // 实时通信
    HTTP_FLV("http", "HTTP-FLV协议"); // HTTP-FLV流
}
```

## 界面布局

```
┌─────────────────────────────────────────────────────────────┐
│ 🔴 实时监控  📹 录像回放  ⚠️ 告警管理  📊 数据分析  ⚙️ 系统设置 │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────────────────────────────────────────┐ │
│ │ 设备树   │ │              视频预览区域                    │ │
│ │ ├─区域1  │ │  ┌──────────┐ ┌──────────┐                 │ │
│ │ │ ├─摄像机1│ │  │ 通道1    │ │ 通道2    │                 │ │
│ │ │ └─摄像机2│ │  └──────────┘ └──────────┘                 │ │
│ │ └─区域2  │ │  ┌──────────┐ ┌──────────┐                 │ │
│ │   └─摄像机3│ │  │ 通道3    │ │ 通道4    │                 │ │
│ └─────────┘ │  └──────────┘ └──────────┘                 │ │
│             └─────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 云台控制: [↑][↓][←][→] 变焦:[+][-] 📷截图 🔴录制      │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```
