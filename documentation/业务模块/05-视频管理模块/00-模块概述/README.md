# 智能视频管理模块

## 模块定位

**智能视频模块**是IOE-DREAM安防系统的核心业务模块，作为`ioedream-video-service`(端口8092)独立微服务运行，通过**事件订阅中心**与其他模块协同工作。

## 技术栈

| 类别 | 技术选型 |
|------|----------|
| 框架 | Spring Boot 3.5.8 + Spring Cloud 2025.0.0 |
| 语言 | Java 17 |
| 数据库 | PostgreSQL (分库分表+读写分离) |
| 缓存 | Redis + Caffeine (多级缓存) |
| 消息队列 | RabbitMQ |
| 流媒体协议 | RTSP, RTMP, HLS, WebRTC, HTTP-FLV |
| AI框架 | OpenCV, TensorFlow Lite |

## 安全体系

采用**五级安全体系**：
- **Level 5 (绝密级)**: 系统管理员
- **Level 4 (机密级)**: 安保主管
- **Level 3 (秘密级)**: 安保人员
- **Level 2 (内部级)**: 普通员工
- **Level 1 (公开级)**: 访客

## 子模块清单

| 序号 | 模块名称 | 说明 |
|------|----------|------|
| 01 | 实时监控 | 视频预览、云台控制、截图录制 |
| 02 | 设备管理交互 | 设备信息订阅、状态同步 |
| 03 | 视频回放 | 录像检索、播放、下载 |
| 04 | 行为分析 | 人脸识别、行为检测、规则配置 |
| 05 | 告警管理 | 告警接收、处理、统计 |
| 06 | 解码上墙 | 解码器管理、电视墙布局 |
| 07 | 消息中心 | 事件订阅、消息推送 |
| 08 | 地图展示 | GIS地图、设备定位 |

## 四层架构

```
Controller (接口控制层)
    ↓
Service (核心业务层)
    ↓
Manager (流程管理层)
    ↓
DAO (数据访问层)
```

**禁止跨层访问**: Controller不能直接调用Manager/DAO

## 编码规范

- ✅ 必须使用 `@Resource` 注入依赖
- ✅ 必须使用 `@Mapper` 注解 (禁止@Repository)
- ✅ 必须使用 `Dao` 后缀 (禁止Repository)
- ✅ 必须返回统一 `ResponseDTO` 格式
- ✅ 必须使用 `@Valid` 参数校验
