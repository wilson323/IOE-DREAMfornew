# è§†é¢‘ç®¡ç†æ¨¡å— - å‰ç«¯è®¾è®¡

## 1. PCç«¯è®¾è®¡æ¦‚è¿°

è§†é¢‘ç®¡ç†æ¨¡å—PCç«¯é‡‡ç”¨Vue 3 + TypeScript + Ant Design Vueï¼Œå®ç°ä¸“ä¸šçº§è§†é¢‘ç›‘æ§ç®¡ç†åŠŸèƒ½ã€‚

### 1.1 è®¾è®¡åŸåˆ™

- **ä¸“ä¸šæ€§**: ç¬¦åˆå®‰é˜²è¡Œä¸šæ ‡å‡†UIè§„èŒƒ
- **é«˜æ€§èƒ½**: å¤šç”»é¢æ¸²æŸ“ã€å¤§æ•°æ®é‡å¤„ç†ä¼˜åŒ–
- **å¯æ‰©å±•**: æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒè‡ªå®šä¹‰åŠŸèƒ½æ‰©å±•
- **å“åº”å¼**: é€‚é…ä¸åŒåˆ†è¾¨ç‡æ˜¾ç¤ºå™¨

## 2. æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue 3.x | 3.4+ | æ ¸å¿ƒæ¡†æ¶ |
| TypeScript | 5.0+ | ç±»å‹å®‰å…¨ |
| Ant Design Vue | 4.x | UIç»„ä»¶åº“ |
| Pinia | 2.x | çŠ¶æ€ç®¡ç† |
| flv.js | 1.6+ | FLVè§†é¢‘æ’­æ”¾ |
| hls.js | 1.4+ | HLSè§†é¢‘æ’­æ”¾ |
| WebRTC | - | å®æ—¶è§†é¢‘æµ |
| ECharts | 5.x | å›¾è¡¨å±•ç¤º |

## 3. é¡µé¢ç»“æ„

### 3.1 å®æ—¶ç›‘æ§é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  èœå•æ ï¼šæ–‡ä»¶ | è§†å›¾ | å·¥å…· | å¸®åŠ©                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚                                                  â”‚
â”‚  è®¾å¤‡æ ‘       â”‚     è§†é¢‘ç”»é¢åŒºåŸŸï¼ˆæ”¯æŒ1/4/9/16/25åˆ†å±ï¼‰          â”‚
â”‚  â”œâ”€åŒºåŸŸ1      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â”œâ”€æ‘„åƒæœº1  â”‚  â”‚ ç”»é¢1  â”‚ ç”»é¢2  â”‚ ç”»é¢3  â”‚ ç”»é¢4  â”‚         â”‚
â”‚  â”‚ â”œâ”€æ‘„åƒæœº2  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ â””â”€æ‘„åƒæœº3  â”‚  â”‚ ç”»é¢5  â”‚ ç”»é¢6  â”‚ ç”»é¢7  â”‚ ç”»é¢8  â”‚         â”‚
â”‚  â”œâ”€åŒºåŸŸ2      â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ â””â”€...      â”‚  â”‚ ç”»é¢9  â”‚ ç”»é¢10 â”‚ ç”»é¢11 â”‚ ç”»é¢12 â”‚         â”‚
â”‚  â””â”€åŒºåŸŸ3      â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚               â”‚  â”‚ ç”»é¢13 â”‚ ç”»é¢14 â”‚ ç”»é¢15 â”‚ ç”»é¢16 â”‚         â”‚
â”‚  æœç´¢è®¾å¤‡     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  [________]   â”‚                                                  â”‚
â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åœ¨çº¿: 128    â”‚  å·¥å…·æ ï¼šåˆ†å± | æˆªå›¾ | å½•åƒ | å¯¹è®² | äº‘å° | ä¸Šå¢™  â”‚
â”‚  ç¦»çº¿: 12     â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 äº‘å°æ§åˆ¶ç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       äº‘å°æ§åˆ¶é¢æ¿           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â†‘                   â”‚
â”‚       [ä¸Š]                  â”‚
â”‚    â†°  [â†] [â—] [â†’]  â†±       â”‚
â”‚       [ä¸‹]                  â”‚
â”‚         â†“                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å˜ç„¦: [-] â”â”â”â”â—â”â”â” [+]    â”‚
â”‚  èšç„¦: [-] â”â”â”â—â”â”â”â” [+]    â”‚
â”‚  å…‰åœˆ: [-] â”â”â—â”â”â”â”â” [+]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¢„ç½®ä½: [1] [2] [3] [+]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 è§†é¢‘å›æ”¾é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¼èˆªï¼šè§†é¢‘å›æ”¾                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  è®¾å¤‡é€‰æ‹©     â”‚  â”‚                                         â”‚   â”‚
â”‚  [é€‰æ‹©è®¾å¤‡â–¼]  â”‚  â”‚           å›æ”¾è§†é¢‘ç”»é¢                   â”‚   â”‚
â”‚               â”‚  â”‚                                         â”‚   â”‚
â”‚  æ—¶é—´èŒƒå›´     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  å¼€å§‹:        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  [2024-01-15] â”‚  â”‚ â–¶ â¸ â¹ â”‚ 00:30:25 / 02:15:40 â”‚ 1x â–¼â”‚   â”‚
â”‚  ç»“æŸ:        â”‚  â”‚â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚   â”‚
â”‚  [2024-01-16] â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ” æœç´¢]    â”‚  å½•åƒæ—¶é—´è½´ï¼ˆ24å°æ—¶ï¼‰                           â”‚
â”‚               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  å½•åƒåˆ—è¡¨     â”‚  â”‚00 02 04 06 08 10 12 14 16 18 20 22 24  â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚â– â– â– â– â– â– â– â– â– â–     â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  â”‚   â”‚
â”‚  â”‚10:00-12:00â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚14:00-18:00â”‚ â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  [ä¸‹è½½é€‰ä¸­] [å‰ªè¾‘] [æˆªå›¾]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 ç”µè§†å¢™ç®¡ç†é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¼èˆªï¼šç”µè§†å¢™ç®¡ç†                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”µè§†å¢™é€‰æ‹©: [1å·ç›‘æ§å¤§å… â–¼]    é¢„æ¡ˆ: [æ—¥å¸¸ç›‘æ§ â–¼] [åº”ç”¨] [ç¼–è¾‘]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚  ç”µè§†å¢™å¸ƒå±€é¢„è§ˆ                                  â”‚
â”‚  å¯ç”¨è®¾å¤‡     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”œâ”€åŒºåŸŸ1      â”‚  â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”                 â”‚    â”‚
â”‚  â”‚ â”œâ”€æ‘„åƒæœº1  â”‚  â”‚ â”‚ 1  â”‚ 2  â”‚ 3  â”‚ 4  â”‚ â† ç¬¬ä¸€è¡Œå±å¹•   â”‚    â”‚
â”‚  â”‚ â””â”€æ‘„åƒæœº2  â”‚  â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤                 â”‚    â”‚
â”‚  â”œâ”€åŒºåŸŸ2      â”‚  â”‚ â”‚ 5  â”‚ 6  â”‚ 7  â”‚ 8  â”‚ â† ç¬¬äºŒè¡Œå±å¹•   â”‚    â”‚
â”‚  â”‚ â””â”€...      â”‚  â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜                 â”‚    â”‚
â”‚               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  æ‹–æ‹½è®¾å¤‡åˆ°   â”‚                                                  â”‚
â”‚  å¯¹åº”çª—å£     â”‚  å±å¹•é…ç½®ï¼š[4è¡ŒÃ—4åˆ—] åˆ†å±æ¨¡å¼ï¼š[1åˆ†å± â–¼]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. æ ¸å¿ƒç»„ä»¶è®¾è®¡

### 4.1 è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶

```typescript
// components/VideoPlayer.vue
interface VideoPlayerProps {
  deviceId: string;
  streamUrl?: string;
  protocol: 'ws-flv' | 'hls' | 'webrtc';
  autoPlay: boolean;
  controls: boolean;
  ptzEnabled: boolean;
}

// æ”¯æŒçš„åŠŸèƒ½
- å¤šåè®®æ”¯æŒ (FLV/HLS/WebRTC)
- ç”»é¢ç¼©æ”¾ (fit/fill/original)
- æˆªå›¾åŠŸèƒ½
- å½•åƒåŠŸèƒ½
- å…¨å±æ’­æ”¾
- ç”»è´¨åˆ‡æ¢
- éŸ³é¢‘æ§åˆ¶
```

### 4.2 è®¾å¤‡æ ‘ç»„ä»¶

```typescript
// components/DeviceTree.vue
interface DeviceTreeProps {
  data: DeviceNode[];
  checkable: boolean;
  draggable: boolean;
  showStatus: boolean;
  searchable: boolean;
}

interface DeviceNode {
  id: string;
  name: string;
  type: 'region' | 'device';
  status?: 'online' | 'offline';
  children?: DeviceNode[];
}
```

### 4.3 æ—¶é—´è½´ç»„ä»¶

```typescript
// components/Timeline.vue
interface TimelineProps {
  date: string;
  records: TimeSegment[];
  currentTime: number;
}

interface TimeSegment {
  startTime: number;  // ç§’
  endTime: number;
  type: 'normal' | 'alarm' | 'manual';
}
```

## 5. ç§»åŠ¨ç«¯è®¾è®¡

åŸºäº `smart-app/src/pages/video/` ç°æœ‰ä»£ç ï¼Œç§»åŠ¨ç«¯èšç„¦å·¡æ£€åœºæ™¯ã€‚

### 5.1 ç§»åŠ¨ç«¯åŠŸèƒ½èŒƒå›´

| åŠŸèƒ½ | ç§»åŠ¨ç«¯ | PCç«¯ | è¯´æ˜ |
|------|--------|------|------|
| å®æ—¶é¢„è§ˆ | âœ… | âœ… | å•/å››ç”»é¢ |
| äº‘å°æ§åˆ¶ | âœ… | âœ… | æ–¹å‘+å˜ç„¦ |
| å‘Šè­¦æ¥æ”¶ | âœ… | âœ… | æ¨é€é€šçŸ¥ |
| å‘Šè­¦å¤„ç† | âœ… | âœ… | ç¡®è®¤/è½¬å‘ |
| è§†é¢‘å›æ”¾ | âœ… | âœ… | ç®€åŒ–ç‰ˆ |
| æˆªå›¾åˆ†äº« | âœ… | âœ… | å¿«é€Ÿåˆ†äº« |
| ç”µè§†å¢™ | âŒ | âœ… | PCä¸“å± |
| è¡Œä¸ºåˆ†æé…ç½® | âŒ | âœ… | PCä¸“å± |
| è®¾å¤‡ç®¡ç† | âŒ | âœ… | PCä¸“å± |

### 5.2 ç§»åŠ¨ç«¯é¡µé¢

```
pages/video/
â”œâ”€â”€ index.vue          # è§†é¢‘é¦–é¡µ
â”œâ”€â”€ monitor.vue        # å®æ—¶ç›‘æ§
â”œâ”€â”€ device.vue         # è®¾å¤‡åˆ—è¡¨
â”œâ”€â”€ playback.vue       # è§†é¢‘å›æ”¾
â”œâ”€â”€ alert.vue          # å‘Šè­¦ç®¡ç†
â””â”€â”€ ptz.vue            # äº‘å°æ§åˆ¶
```

## 6. APIæ¥å£è®¾è®¡

### 6.1 è§†é¢‘æµæ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/ivs/v1/monitor/stream/{deviceId}` | GET | è·å–è§†é¢‘æµåœ°å€ |
| `/ivs/v1/monitor/multi-stream` | POST | æ‰¹é‡è·å–æµåœ°å€ |
| `/ivs/v1/monitor/snapshot/{deviceId}` | POST | è§†é¢‘æˆªå›¾ |
| `/ivs/v1/monitor/record/start` | POST | å¼€å§‹å½•åƒ |
| `/ivs/v1/monitor/record/stop` | POST | åœæ­¢å½•åƒ |

### 6.2 äº‘å°æ§åˆ¶æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/ivs/v1/ptz/control` | POST | äº‘å°æ–¹å‘æ§åˆ¶ |
| `/ivs/v1/ptz/preset` | POST | è®¾ç½®é¢„ç½®ä½ |
| `/ivs/v1/ptz/preset/call/{id}` | POST | è°ƒç”¨é¢„ç½®ä½ |
| `/ivs/v1/ptz/preset/list/{deviceId}` | GET | é¢„ç½®ä½åˆ—è¡¨ |

### 6.3 å›æ”¾æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/ivs/v1/playback/records` | GET | æŸ¥è¯¢å½•åƒåˆ—è¡¨ |
| `/ivs/v1/playback/timeline/{deviceId}` | GET | å½•åƒæ—¶é—´è½´ |
| `/ivs/v1/playback/stream/{recordId}` | GET | å›æ”¾æµåœ°å€ |
| `/ivs/v1/playback/download` | POST | ä¸‹è½½å½•åƒ |

## 7. çŠ¶æ€ç®¡ç†

```typescript
// store/modules/video.ts
export const useVideoStore = defineStore('video', {
  state: () => ({
    // è®¾å¤‡ç›¸å…³
    devices: [] as Device[],
    deviceTree: [] as DeviceNode[],
    onlineCount: 0,
    offlineCount: 0,
    
    // æ’­æ”¾ç›¸å…³
    activeWindows: [] as VideoWindow[],
    splitMode: 4,
    currentDevice: null as Device | null,
    
    // å‘Šè­¦ç›¸å…³
    alerts: [] as Alert[],
    unreadAlertCount: 0,
    
    // å›æ”¾ç›¸å…³
    playbackDevice: null,
    playbackRange: { start: '', end: '' },
    records: [] as Record[]
  }),
  
  actions: {
    async loadDevices() { ... },
    async getStreamUrl(deviceId: string) { ... },
    async ptzControl(deviceId: string, command: string) { ... },
    async loadAlerts() { ... },
    async processAlert(alertId: string, action: string) { ... }
  }
})
```

## 8. WebSocketäº‹ä»¶

```typescript
// è§†é¢‘æ¨¡å—WebSocketäº‹ä»¶
interface VideoWSEvents {
  // è®¾å¤‡çŠ¶æ€
  'device_online': { deviceId: string };
  'device_offline': { deviceId: string };
  
  // å‘Šè­¦äº‹ä»¶
  'alarm': {
    id: string;
    deviceId: string;
    type: string;
    level: number;
    message: string;
    snapshot?: string;
  };
  
  // å½•åƒäº‹ä»¶
  'record_start': { deviceId: string; recordId: string };
  'record_stop': { recordId: string };
}
```

## 9. æ€§èƒ½ä¼˜åŒ–

### 9.1 è§†é¢‘æ¸²æŸ“ä¼˜åŒ–

```typescript
// å¤šç”»é¢æ¸²æŸ“ä¼˜åŒ–ç­–ç•¥
const optimizeMultiView = {
  // 1. å¯è§†åŒºåŸŸæ¸²æŸ“
  lazyLoadOffscreen: true,
  
  // 2. ç”»è´¨è‡ªé€‚åº”
  qualityLevels: ['1080p', '720p', '480p', '360p'],
  autoQuality: true,
  
  // 3. å¸§ç‡æ§åˆ¶
  maxFps: 25,
  reduceFpsWhenInactive: true,
  
  // 4. å†…å­˜ç®¡ç†
  maxCachedStreams: 16,
  releaseInactiveStreams: true
}
```

### 9.2 æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | PCç«¯ | ç§»åŠ¨ç«¯ |
|------|------|--------|
| é¦–å±åŠ è½½ | < 3ç§’ | < 2ç§’ |
| è§†é¢‘èµ·æ’­ | < 2ç§’ | < 3ç§’ |
| äº‘å°å“åº” | < 500ms | < 500ms |
| 16ç”»é¢æµç•… | 25fps | - |
| 4ç”»é¢æµç•… | - | 25fps |

## 10. æ–‡æ¡£ç‰ˆæœ¬

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| v1.0.0 | 2025-12-17 | åˆå§‹ç‰ˆæœ¬ |
