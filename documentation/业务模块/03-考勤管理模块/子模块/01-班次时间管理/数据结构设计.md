# ç­æ¬¡æ—¶é—´ç®¡ç† - æ•°æ®ç»“æ„è®¾è®¡

> **ç‰ˆæœ¬**: v1.0.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-17

---

## ğŸ“Š ERå›¾

```mermaid
erDiagram
    t_attendance_shift {
        bigint id PK "ç­æ¬¡ID"
        varchar shift_name "ç­æ¬¡åç§°"
        varchar shift_code "ç­æ¬¡ä»£ç "
        varchar shift_type "ç­æ¬¡ç±»å‹"
        time work_start_time "ä¸Šç­æ—¶é—´"
        time work_end_time "ä¸‹ç­æ—¶é—´"
        time break_start_time "ä¼‘æ¯å¼€å§‹"
        time break_end_time "ä¼‘æ¯ç»“æŸ"
        int early_clock_minutes "æå‰æ‰“å¡åˆ†é’Ÿ"
        int late_clock_minutes "å»¶åæ‰“å¡åˆ†é’Ÿ"
        time flex_start_time "å¼¹æ€§å¼€å§‹"
        time flex_end_time "å¼¹æ€§ç»“æŸ"
        decimal min_work_hours "æœ€ä½å·¥æ—¶"
        tinyint is_cross_day "æ˜¯å¦è·¨å¤©"
        tinyint status "çŠ¶æ€"
        datetime create_time "åˆ›å»ºæ—¶é—´"
        datetime update_time "æ›´æ–°æ—¶é—´"
        tinyint deleted_flag "åˆ é™¤æ ‡è®°"
    }
    
    t_attendance_shift_break {
        bigint id PK "ä¼‘æ¯æ®µID"
        bigint shift_id FK "ç­æ¬¡ID"
        time break_start "å¼€å§‹æ—¶é—´"
        time break_end "ç»“æŸæ—¶é—´"
        int break_minutes "ä¼‘æ¯åˆ†é’Ÿ"
        int sort_order "æ’åº"
    }
    
    t_attendance_shift ||--o{ t_attendance_shift_break : "ä¼‘æ¯æ—¶æ®µ"
```

---

## ğŸ“‹ è¡¨ç»“æ„è¯¦ç»†è®¾è®¡

### t_attendance_shift (ç­æ¬¡å®šä¹‰è¡¨)

```sql
CREATE TABLE t_attendance_shift (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ç­æ¬¡ID',
    shift_name VARCHAR(50) NOT NULL COMMENT 'ç­æ¬¡åç§°',
    shift_code VARCHAR(20) NOT NULL COMMENT 'ç­æ¬¡ä»£ç ',
    shift_type VARCHAR(20) NOT NULL COMMENT 'ç­æ¬¡ç±»å‹:STANDARD/EARLY/MIDDLE/NIGHT/FLEX/OVERNIGHT',
    work_start_time TIME NOT NULL COMMENT 'ä¸Šç­æ—¶é—´',
    work_end_time TIME NOT NULL COMMENT 'ä¸‹ç­æ—¶é—´',
    break_start_time TIME COMMENT 'ä¼‘æ¯å¼€å§‹æ—¶é—´',
    break_end_time TIME COMMENT 'ä¼‘æ¯ç»“æŸæ—¶é—´',
    early_clock_minutes INT DEFAULT 30 COMMENT 'å…è®¸æå‰æ‰“å¡åˆ†é’Ÿæ•°',
    late_clock_minutes INT DEFAULT 30 COMMENT 'å…è®¸å»¶åæ‰“å¡åˆ†é’Ÿæ•°',
    flex_start_time TIME COMMENT 'å¼¹æ€§å¼€å§‹æ—¶é—´',
    flex_end_time TIME COMMENT 'å¼¹æ€§ç»“æŸæ—¶é—´',
    min_work_hours DECIMAL(4,2) DEFAULT 8.00 COMMENT 'æœ€ä½å·¥ä½œæ—¶é•¿(å°æ—¶)',
    is_cross_day TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦è·¨å¤©ç­æ¬¡:0å¦1æ˜¯',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€:0ç¦ç”¨1å¯ç”¨',
    remark VARCHAR(200) COMMENT 'å¤‡æ³¨',
    create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    deleted_flag TINYINT DEFAULT 0 COMMENT 'åˆ é™¤æ ‡è®°:0æœªåˆ é™¤1å·²åˆ é™¤',
    UNIQUE KEY uk_shift_code (shift_code),
    INDEX idx_shift_type (shift_type),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç­æ¬¡å®šä¹‰è¡¨';
```

### t_attendance_shift_break (ç­æ¬¡ä¼‘æ¯æ—¶æ®µè¡¨)

```sql
CREATE TABLE t_attendance_shift_break (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ä¼‘æ¯æ®µID',
    shift_id BIGINT NOT NULL COMMENT 'ç­æ¬¡ID',
    break_start TIME NOT NULL COMMENT 'ä¼‘æ¯å¼€å§‹æ—¶é—´',
    break_end TIME NOT NULL COMMENT 'ä¼‘æ¯ç»“æŸæ—¶é—´',
    break_minutes INT NOT NULL COMMENT 'ä¼‘æ¯åˆ†é’Ÿæ•°',
    sort_order INT DEFAULT 0 COMMENT 'æ’åº',
    create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    INDEX idx_shift_id (shift_id),
    FOREIGN KEY (shift_id) REFERENCES t_attendance_shift(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç­æ¬¡ä¼‘æ¯æ—¶æ®µè¡¨';
```

---

## ğŸ”§ å­—æ®µè¯´æ˜

### ç­æ¬¡ç±»å‹æšä¸¾

| å€¼ | è¯´æ˜ |
|------|------|
| STANDARD | æ ‡å‡†ç­ |
| EARLY | æ—©ç­ |
| MIDDLE | ä¸­ç­ |
| NIGHT | æ™šç­ |
| FLEX | å¼¹æ€§ç­ |
| OVERNIGHT | é€šå®µç­ |

---

**ğŸ“ æ–‡æ¡£ç»´æŠ¤**: IOE-DREAMæ¶æ„å›¢é˜Ÿ | 2025-12-17
