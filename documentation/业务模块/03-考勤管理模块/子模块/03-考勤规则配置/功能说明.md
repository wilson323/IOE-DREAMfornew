# 考勤规则配置 - 功能说明

> **版本**: v1.0.0  
> **微服务**: ioedream-attendance-service (8091)  
> **创建日期**: 2025-12-17

---

## 📋 功能概述

考勤规则配置模块负责管理考勤系统的各种规则配置，包括考勤基础规则、预警规则、通知规则、移动端规则等，为考勤计算、异常检测和通知提醒提供规则支撑。

---

## 🎯 核心功能

### 1. 考勤基础规则

- **迟到早退规则**: 定义迟到早退的判断标准和容忍时间
- **旷工规则**: 定义旷工的判断条件和处理方式
- **加班规则**: 定义加班的认定标准和计算方式
- **出勤统计规则**: 定义出勤率、工时计算等统计规则

### 2. 预警规则

- **异常检测**: 检测考勤异常模式（如频繁迟到、连续缺勤）
- **阈值设置**: 设置各类预警的触发阈值
- **预警级别**: 定义预警的严重程度和优先级
- **设备联动**: 支持多设备联动验证（如摄像头+门禁）

### 3. 通知规则

- **提醒通知**: 定时发送打卡提醒、未打卡通知
- **异常通知**: 考勤异常时的实时通知
- **频率控制**: 控制通知频率，避免过度打扰
- **升级机制**: 通知未响应时的升级处理

### 4. 移动端规则

- **位置验证**: GPS定位精度和范围要求
- **时间限制**: 移动端打卡的时间窗口限制
- **设备绑定**: 移动设备绑定和验证规则
- **安全控制**: 防作弊、防代打卡的安全规则

### 5. 考勤点管理

- **地理围栏**: 基于GPS的虚拟考勤点
- **有效范围**: 考勤点的有效打卡半径
- **设备关联**: 考勤点与物理设备的关联
- **多点考勤**: 支持多点考勤和路径验证

---

## 📊 规则类型

| 规则类型 | 说明 | 适用范围 |
|----------|------|----------|
| 考勤规则 | 基础考勤计算规则 | 全员 |
| 预警规则 | 异常预警触发规则 | 管理员 |
| 通知规则 | 消息通知发送规则 | 员工/管理员 |
| 移动端规则 | 移动打卡限制规则 | 移动端用户 |

---

## 🔧 配置参数

### 考勤规则配置

| 参数 | 类型 | 说明 |
|------|------|------|
| late_tolerance_minutes | Integer | 迟到容忍分钟数 |
| early_tolerance_minutes | Integer | 早退容忍分钟数 |
| absent_threshold_hours | Integer | 旷工阈值小时数 |
| min_work_hours | Decimal | 最小工作时长 |
| overtime_multiplier | Decimal | 加班工资倍数 |

### 预警规则配置

| 参数 | 类型 | 说明 |
|------|------|------|
| warning_type | String | 预警类型 |
| threshold | Integer | 触发阈值 |
| level | String | 预警级别 |
| auto_actions | List | 自动执行动作 |

---

## 📈 性能指标

| 指标项 | 要求 |
|--------|------|
| 规则查询响应 | ≤ 100ms |
| 规则匹配计算 | ≤ 50ms |
| 预警检测延迟 | ≤ 1秒 |
| 通知发送延迟 | ≤ 3秒 |

---

**📝 文档维护**: IOE-DREAM架构团队 | 2025-12-17
