# å®æ—¶ç›‘æ§ç®¡ç† - è¯¦ç»†è®¾è®¡è¯´æ˜ä¹¦

> **ç‰ˆæœ¬**: v1.0.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-17

---

## ğŸ“ ç±»ç»“æ„è®¾è®¡

```
net.lab1024.sa.access/
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ MonitorAlertService.java
â”‚   â”œâ”€â”€ VideoLinkageMonitorService.java
â”‚   â””â”€â”€ impl/
â”‚       â”œâ”€â”€ MonitorAlertServiceImpl.java
â”‚       â””â”€â”€ VideoLinkageMonitorServiceImpl.java
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ vo/
â”‚       â”œâ”€â”€ AccessRecordVO.java
â”‚       â””â”€â”€ RiskAssessmentVO.java
```

---

## ğŸ”Œ æ¥å£è¯¦ç»†è®¾è®¡

### GET /api/access/v1/monitoring/realtime

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "data": {
    "summary": {
      "totalDevices": 156,
      "onlineDevices": 142,
      "offlineDevices": 14,
      "alertCount": 3
    },
    "devices": [{
      "deviceId": 1001,
      "deviceName": "ä¸»æ¥¼å‰é—¨",
      "status": "ONLINE",
      "lastHeartbeat": "2025-12-17T10:30:00Z"
    }]
  }
}
```

### WebSocketæ¶ˆæ¯æ ¼å¼

**å‘Šè­¦æ¨é€**:
```json
{
  "type": "ALERT",
  "data": {
    "alertId": 1001,
    "deviceId": 2001,
    "severity": "HIGH",
    "message": "è®¾å¤‡ç¦»çº¿è¶…è¿‡5åˆ†é’Ÿ",
    "timestamp": "2025-12-17T10:30:00Z"
  }
}
```

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### t_monitor_alert

```sql
CREATE TABLE t_monitor_alert (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  device_id BIGINT NOT NULL,
  alert_type VARCHAR(50) NOT NULL,
  severity VARCHAR(20) NOT NULL,
  message VARCHAR(500),
  trigger_time DATETIME NOT NULL,
  status TINYINT DEFAULT 0,
  handler_id BIGINT,
  handle_time DATETIME,
  resolution VARCHAR(500),
  create_time DATETIME NOT NULL,
  update_time DATETIME NOT NULL,
  INDEX idx_device(device_id),
  INDEX idx_time(trigger_time),
  INDEX idx_status(status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

---

**ğŸ“ æ–‡æ¡£ç»´æŠ¤**: IOE-DREAMæ¶æ„å›¢é˜Ÿ | 2025-12-17
