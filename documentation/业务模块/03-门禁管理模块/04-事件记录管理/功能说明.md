# 门禁事件记录管理 - 功能说明

> **版本**: v1.0.0  
> **创建日期**: 2025-12-17  
> **适用范围**: IOE-DREAM智慧园区门禁事件记录管理模块

---

## 📋 模块概述

门禁事件记录管理模块是门禁系统的专属事件记录中心，专注于处理门禁核心业务事件：
- **门禁打卡事件记录**：刷卡、人脸识别、指纹等所有通行验证事件
- **报警异常记录**：非法通行、设备异常、安全告警等异常事件
- 门禁事件报表生成和分析
- 事件数据的照片、视频预览、导出、打印
- 门禁系统事件审计和追踪

---

## 🎯 核心功能

### 1. 门禁打卡事件查询

**功能描述**: 查询所有门禁设备的通行验证记录

**关键字段筛选**:
- 验证方式（刷卡、人脸、指纹、密码、二维码）
- 通行结果（成功、失败、异常）
- 人员信息（姓名、工号、部门）
- 设备位置（区域、门点、设备名称）
- 时间范围（日期、时间段）

**功能操作**:
- 通行详情查看
- 照片预览（通行时的抓拍照片）
- 视频预览（监控视频片段）
- 数据导出（Excel、PDF、CSV）
- 报表打印

### 2. 报警异常事件查询

**功能描述**: 查询门禁系统产生的所有报警和异常记录

**事件分类**:

| 类型 | 说明 | 示例 |
|------|------|------|
| 非法通行 | 无权限通行、尾随、胁迫等 | 尾随告警、胁迫开门 |
| 设备异常 | 设备离线、故障、通讯异常 | 设备离线、通讯超时 |
| 安全告警 | 防拆报警、门磁异常、强制开门 | 门磁异常、防拆告警 |
| 系统异常 | 验证超时、数据异常、系统错误 | 验证超时、数据同步失败 |

**关键字段筛选**:
- 报警类型（非法通行、设备异常、安全告警、系统异常）
- 严重程度（低、中、高、紧急）
- 处理状态（未处理、处理中、已处理）
- 设备区域（设备编号、所属区域）
- 时间范围（报警时间、处理时间）

### 3. 综合统计分析报表

**功能描述**: 门禁打卡事件和报警异常事件的汇总统计

**统计维度**:
- **时间维度**：按日/周/月/年统计通行量和报警数
- **区域维度**：各区域通行统计、报警分布
- **人员维度**：人员通行频次、异常行为统计
- **设备维度**：设备使用率、故障率统计
- **事件类型维度**：各类事件占比分析

**输出功能**:
- 统计图表生成（柱状图、折线图、饼图）
- 数据导出（多格式支持）
- 报表打印（支持模板自定义）

---

## 📊 数据来源

### 门禁打卡事件数据来源

| 数据源 | 说明 |
|--------|------|
| 门禁设备实时上传 | 所有门禁控制器的通行验证记录 |
| 验证方式记录 | 刷卡、人脸识别、指纹验证、密码输入、二维码扫描 |
| 通行结果记录 | 验证成功、失败、异常等结果状态 |
| 人员信息关联 | 验证人员的基本信息和权限信息 |
| 设备位置信息 | 验证设备所在的区域和具体位置 |
| 时间戳记录 | 精确的验证时间和处理时长 |

### 报警异常事件数据来源

| 数据源 | 说明 |
|--------|------|
| 非法通行报警 | 无权限验证、尾随、胁迫、防拆等安全事件 |
| 设备异常报警 | 设备离线、通讯故障、硬件损坏等设备事件 |
| 系统异常报警 | 验证超时、数据错误、系统故障等系统事件 |
| 安全告警事件 | 门磁异常、强制开门、重复验证等安全事件 |
| 处理状态跟踪 | 报警事件的发现、处理、解决状态记录 |

---

## 🔧 统一功能特性

### 关键字段筛选功能

- **多条件组合筛选**：支持多字段组合查询
- **模糊搜索**：支持关键字模糊匹配
- **时间范围筛选**：灵活的时间范围选择
- **快速筛选**：常用条件快捷筛选

### 照片视频预览功能

- **照片预览**：支持人员照片、通行照片预览
- **视频预览**：支持监控视频片段在线预览
- **媒体管理**：支持媒体文件下载、保存
- **缩略图展示**：列表形式展示缩略图

### 数据导出功能

- **多格式导出**：支持Excel、PDF、CSV格式
- **自定义字段**：支持选择导出字段
- **批量导出**：支持大量数据分批导出
- **导出权限**：基于用户权限控制导出范围

### 报表打印功能

- **报表模板**：提供标准报表模板
- **自定义排版**：支持自定义报表排版
- **批量打印**：支持批量打印报表
- **打印权限**：基于用户权限控制打印范围

---

## 🔐 权限验证机制

- **数据权限**：基于用户角色控制数据访问范围
- **操作权限**：基于用户权限控制操作功能
- **字段权限**：控制敏感字段的访问权限
- **审计日志**：记录所有报表访问和操作日志

---

## 📈 性能指标

| 指标项 | 要求 |
|--------|------|
| 事件查询响应时间 | ≤ 3秒 |
| 报表生成时间 | ≤ 10秒 |
| 数据导出速度 | ≥ 10000条/分钟 |
| 并发查询支持 | ≥ 500个/秒 |
| 历史数据保存 | ≥ 3年 |

---

## 📚 相关文档

- [业务流程图](./业务流程图.md)
- [数据结构设计](./数据结构设计.md)
- [用户故事](./用户故事.md)
- [非功能需求](./非功能需求.md)
- [验收标准](./验收标准.md)

---

**📝 文档维护**
- **创建人**: IOE-DREAM架构团队
- **最后更新**: 2025-12-17
