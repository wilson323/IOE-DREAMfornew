# 门禁事件记录管理 - 业务流程图

> **版本**: v1.0.0  
> **创建日期**: 2025-12-17  

---

## 📊 门禁事件数据流

```mermaid
graph TB
    subgraph 门禁事件数据流
        AccessEvents[门禁设备] --> AccessRecords[通行事件记录]
        AlarmEvents[报警系统] --> AlarmRecords[报警异常记录]

        AccessRecords --> EventDatabase[门禁事件数据库]
        AlarmRecords --> EventDatabase

        EventDatabase --> EventQueryModule[事件记录查询模块]

        DeviceModule[设备管理模块] -.->|产生设备事件| EventDatabase
        AreaModule[区域管理模块] -.->|产生区域事件| EventDatabase
        PersonModule[人员管理模块] -.->|产生人员事件| EventDatabase
    end
```

---

## 🔄 门禁事件记录查询模块流程图

```mermaid
graph TB
    subgraph 门禁事件记录查询模块
        EventStart(门禁事件查询开始) --> EventType{选择事件类型}

        EventType -->|门禁打卡事件| AccessEvent
        EventType -->|报警异常事件| AlarmEvent
        EventType -->|综合统计分析报表| StatReport

        subgraph 门禁打卡事件查询流程
            AccessEvent --> AccessFilter[门禁事件筛选]
            AccessFilter --> AccessQuery{查询条件}
            AccessQuery -->|验证方式| VerifyTypeFilter[验证方式筛选]
            AccessQuery -->|通行结果| AccessResultFilter[通行结果筛选]
            AccessQuery -->|人员信息| PersonFilter[人员信息筛选]
            AccessQuery -->|设备位置| DeviceLocationFilter[设备位置筛选]
            AccessQuery -->|时间范围| AccessTimeFilter[时间范围筛选]
            VerifyTypeFilter --> AccessEventResult[门禁事件结果]
            AccessResultFilter --> AccessEventResult
            PersonFilter --> AccessEventResult
            DeviceLocationFilter --> AccessEventResult
            AccessTimeFilter --> AccessEventResult
            AccessEventResult --> AccessOperation{操作类型}
            AccessOperation -->|详情查看| AccessDetail[门禁事件详情]
            AccessOperation -->|照片预览| AccessPhotoPreview[通行照片预览]
            AccessOperation -->|视频预览| AccessVideoPreview[监控视频预览]
            AccessOperation -->|导出| AccessExport[导出门禁事件]
            AccessOperation -->|打印| AccessPrint[打印门禁报表]
            AccessDetail --> EventEnd[事件操作完成]
            AccessPhotoPreview --> EventEnd
            AccessVideoPreview --> EventEnd
            AccessExport --> EventEnd
            AccessPrint --> EventEnd
        end

        subgraph 报警异常事件查询流程
            AlarmEvent --> AlarmFilter[报警事件筛选]
            AlarmFilter --> AlarmQuery{查询条件}
            AlarmQuery -->|报警类型| AlarmTypeFilter[报警类型筛选]
            AlarmQuery -->|严重程度| SeverityFilter[严重程度筛选]
            AlarmQuery -->|处理状态| StatusFilter[处理状态筛选]
            AlarmQuery -->|设备区域| AlarmDeviceFilter[设备区域筛选]
            AlarmQuery -->|时间范围| AlarmTimeFilter[时间范围筛选]
            AlarmTypeFilter --> AlarmEventResult[报警事件结果]
            SeverityFilter --> AlarmEventResult
            StatusFilter --> AlarmEventResult
            AlarmDeviceFilter --> AlarmEventResult
            AlarmTimeFilter --> AlarmEventResult
            AlarmEventResult --> AlarmOperation{操作类型}
            AlarmOperation -->|详情查看| AlarmDetail[报警事件详情]
            AlarmOperation -->|现场照片| AlarmPhotoPreview[现场照片预览]
            AlarmOperation -->|处理记录| AlarmHandleRecord[处理记录查看]
            AlarmOperation -->|导出| AlarmExport[导出报警事件]
            AlarmOperation -->|打印| AlarmPrint[打印报警报表]
            AlarmDetail --> EventEnd
            AlarmPhotoPreview --> EventEnd
            AlarmHandleRecord --> EventEnd
            AlarmExport --> EventEnd
            AlarmPrint --> EventEnd
        end

        subgraph 综合统计分析报表流程
            StatReport --> StatConfig[统计配置]
            StatConfig --> StatDimension{统计维度}
            StatDimension -->|时间维度| TimeDim[时间维度统计]
            StatDimension -->|区域维度| AreaDim[区域维度统计]
            StatDimension -->|人员维度| PersonDim[人员维度统计]
            StatDimension -->|设备维度| DeviceDim[设备维度统计]
            StatDimension -->|事件类型| EventTypeDim[事件类型统计]
            TimeDim --> StatCalculate[数据统计计算]
            AreaDim --> StatCalculate
            PersonDim --> StatCalculate
            DeviceDim --> StatCalculate
            EventTypeDim --> StatCalculate
            StatCalculate --> ChartGenerate[图表生成]
            ChartGenerate --> StatOperation{统计操作}
            StatOperation -->|图表预览| ChartPreview[统计图表预览]
            StatOperation -->|数据导出| StatExport[统计数据导出]
            StatOperation -->|报表打印| StatPrint[统计报表打印]
            ChartPreview --> ReportEnd[报表完成]
            StatExport --> ReportEnd
            StatPrint --> ReportEnd
        end
    end

    subgraph 统一功能特性
        CommonFeatures[通用功能] --> KeywordFilter[关键字段筛选]
        CommonFeatures --> MediaPreview[照片视频预览]
        CommonFeatures --> DataExport[数据导出]
        CommonFeatures --> ReportPrint[报表打印]
        CommonFeatures --> PermissionCheck[权限验证]
        KeywordFilter --> FeatureEnd[功能完成]
        MediaPreview --> FeatureEnd
        DataExport --> FeatureEnd
        ReportPrint --> FeatureEnd
        PermissionCheck --> FeatureEnd
    end
```

---

## 📝 流程说明

### 门禁打卡事件查询流程

1. **门禁事件筛选**: 根据条件筛选门禁通行记录
2. **多条件组合查询**: 支持验证方式、通行结果、人员、设备、时间等多维度筛选
3. **结果操作**: 详情查看、照片预览、视频预览、导出、打印

### 报警异常事件查询流程

1. **报警事件筛选**: 根据条件筛选报警异常记录
2. **多条件组合查询**: 支持报警类型、严重程度、处理状态、设备区域、时间等筛选
3. **结果操作**: 详情查看、现场照片预览、处理记录、导出、打印

### 综合统计分析报表流程

1. **统计配置**: 配置统计参数和范围
2. **多维度统计**: 时间、区域、人员、设备、事件类型等维度
3. **结果输出**: 图表预览、数据导出、报表打印

---

**📝 文档维护**
- **创建人**: IOE-DREAM架构团队
- **最后更新**: 2025-12-17
