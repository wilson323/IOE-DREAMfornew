# å¤šå› å­è®¤è¯ç®¡ç† - æ•°æ®ç»“æ„è®¾è®¡

> **ç‰ˆæœ¬**: v1.0.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-17

---

## ğŸ“Š ERå›¾

```mermaid
erDiagram
    USER ||--o{ BIOMETRIC_TEMPLATE : has
    USER ||--o{ BIOMETRIC_AUTH_RECORD : generates
    BIOMETRIC_TEMPLATE ||--o| DEVICE : synced_to
    
    BIOMETRIC_TEMPLATE {
        bigint id PK
        bigint user_id FK
        string template_type
        blob template_data
        int quality_score
        int status
        datetime create_time
        datetime update_time
    }
    
    BIOMETRIC_AUTH_RECORD {
        bigint id PK
        bigint user_id FK
        bigint device_id FK
        string auth_type
        string auth_factors
        decimal match_score
        int result
        datetime auth_time
    }
    
    BIOMETRIC_CONFIG {
        bigint id PK
        bigint area_id FK
        string required_factors
        decimal threshold
        int enabled
    }
```

---

## ğŸ“‹ è¡¨ç»“æ„è®¾è®¡

### t_biometric_template (ç”Ÿç‰©æ¨¡æ¿è¡¨)

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|------|------|------|------|
| id | BIGINT | PK | ä¸»é”® |
| user_id | BIGINT | FK, NOT NULL | ç”¨æˆ·ID |
| template_type | VARCHAR(20) | NOT NULL | ç±»å‹(FACE/FINGERPRINT) |
| template_data | BLOB | NOT NULL | æ¨¡æ¿æ•°æ®(åŠ å¯†) |
| quality_score | INT | - | è´¨é‡åˆ†æ•° |
| status | TINYINT | DEFAULT 1 | çŠ¶æ€ |
| create_time | DATETIME | NOT NULL | åˆ›å»ºæ—¶é—´ |
| update_time | DATETIME | NOT NULL | æ›´æ–°æ—¶é—´ |

### t_biometric_auth_record (è®¤è¯è®°å½•è¡¨)

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|------|------|------|------|
| id | BIGINT | PK | ä¸»é”® |
| user_id | BIGINT | FK | ç”¨æˆ·ID |
| device_id | BIGINT | FK, NOT NULL | è®¾å¤‡ID |
| auth_type | VARCHAR(30) | NOT NULL | è®¤è¯ç±»å‹ |
| auth_factors | VARCHAR(100) | - | ä½¿ç”¨çš„å› å­ |
| match_score | DECIMAL(5,2) | - | åŒ¹é…åˆ†æ•° |
| result | TINYINT | NOT NULL | ç»“æœ |
| auth_time | DATETIME | NOT NULL | è®¤è¯æ—¶é—´ |

---

## ğŸ” å®‰å…¨è®¾è®¡

- æ¨¡æ¿æ•°æ®AES-256åŠ å¯†å­˜å‚¨
- ä¼ è¾“ä½¿ç”¨TLSåŠ å¯†
- æ´»ä½“æ£€æµ‹é˜²ä¼ª

---

**ğŸ“ æ–‡æ¡£ç»´æŠ¤**: IOE-DREAMæ¶æ„å›¢é˜Ÿ | 2025-12-17
