# å¤šå› å­è®¤è¯ç®¡ç† - è¯¦ç»†è®¾è®¡è¯´æ˜ä¹¦

> **ç‰ˆæœ¬**: v1.0.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-17

---

## ğŸ“ ç±»ç»“æ„è®¾è®¡

```
net.lab1024.sa.access/
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ BiometricAuthService.java
â”‚   â”œâ”€â”€ BluetoothAccessService.java
â”‚   â””â”€â”€ impl/
â”‚       â”œâ”€â”€ BiometricAuthServiceImpl.java
â”‚       â””â”€â”€ BluetoothAccessServiceImpl.java
â”œâ”€â”€ manager/
â”‚   â””â”€â”€ BiometricTemplateManager.java
â”œâ”€â”€ dao/
â”‚   â””â”€â”€ BiometricTemplateDao.java
â””â”€â”€ domain/
    â”œâ”€â”€ entity/
    â”‚   â”œâ”€â”€ BiometricConfigEntity.java
    â”‚   â””â”€â”€ BiometricAuthRecordEntity.java
    â””â”€â”€ vo/
        â”œâ”€â”€ BiometricAuthResultVO.java
        â”œâ”€â”€ BiometricTemplateVO.java
        â””â”€â”€ BiometricAntiSpoofResultVO.java
```

---

## ğŸ”Œ æ¥å£è¯¦ç»†è®¾è®¡

### POST /api/access/v1/biometric/verify

**è¯·æ±‚å‚æ•°**:
```json
{
  "deviceId": 1001,
  "userId": 2001,
  "biometricType": "FACE",
  "biometricData": "base64-encoded-data",
  "livenessData": "base64-encoded-liveness"
}
```

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "data": {
    "result": "SUCCESS",
    "matchScore": 0.9876,
    "livenessResult": "PASS",
    "authTime": "2025-12-17T10:30:00Z",
    "factors": ["FACE"]
  }
}
```

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

```sql
CREATE TABLE t_biometric_template (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL,
  template_type VARCHAR(20) NOT NULL,
  template_data BLOB NOT NULL,
  quality_score INT,
  status TINYINT DEFAULT 1,
  create_time DATETIME NOT NULL,
  update_time DATETIME NOT NULL,
  UNIQUE KEY uk_user_type (user_id, template_type),
  INDEX idx_user(user_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE t_biometric_config (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  area_id BIGINT NOT NULL UNIQUE,
  required_factors VARCHAR(100) NOT NULL,
  face_threshold DECIMAL(5,4) DEFAULT 0.8000,
  fp_threshold DECIMAL(5,4) DEFAULT 0.8500,
  liveness_enabled TINYINT DEFAULT 1,
  enabled TINYINT DEFAULT 1,
  create_time DATETIME NOT NULL,
  update_time DATETIME NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

---

**ğŸ“ æ–‡æ¡£ç»´æŠ¤**: IOE-DREAMæ¶æ„å›¢é˜Ÿ | 2025-12-17
