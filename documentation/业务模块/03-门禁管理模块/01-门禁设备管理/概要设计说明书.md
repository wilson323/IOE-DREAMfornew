# é—¨ç¦è®¾å¤‡ç®¡ç† - æ¦‚è¦è®¾è®¡è¯´æ˜ä¹¦

> **ç‰ˆæœ¬**: v1.0.0  
> **å¾®æœåŠ¡**: ioedream-access-service (8090)  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-17

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ¶æ„é£æ ¼
- **å¾®æœåŠ¡æ¶æ„**: ç‹¬ç«‹éƒ¨ç½²çš„é—¨ç¦æœåŠ¡
- **å››å±‚æ¶æ„**: Controller â†’ Service â†’ Manager â†’ DAO

### æ¶æ„å›¾

```mermaid
graph TB
    subgraph å‰ç«¯å±‚
        PC[PCç®¡ç†ç«¯]
        Mobile[ç§»åŠ¨ç«¯]
    end
    
    subgraph ç½‘å…³å±‚
        GW[Gateway Service:8080]
    end
    
    subgraph ä¸šåŠ¡å±‚
        AC[Access Service:8090]
    end
    
    subgraph é€šè®¯å±‚
        DC[DeviceComm Service:8087]
    end
    
    subgraph è®¾å¤‡å±‚
        DEV[é—¨ç¦è®¾å¤‡]
    end
    
    PC --> GW
    Mobile --> GW
    GW --> AC
    AC --> DC
    DC --> DEV
```

---

## ğŸ“¦ æ¨¡å—è®¾è®¡

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | èŒè´£ | å…³é”®ç±» |
|------|------|--------|
| è®¾å¤‡ç®¡ç† | è®¾å¤‡CRUDã€é…ç½®ç®¡ç† | AccessDeviceService |
| è¿œç¨‹æ§åˆ¶ | è®¾å¤‡æŒ‡ä»¤ä¸‹å‘ | AccessDeviceController |
| çŠ¶æ€ç›‘æ§ | è®¾å¤‡å¥åº·ç›‘æ§ | DeviceHealthService |
| AIåˆ†æ | è®¾å¤‡çŠ¶æ€é¢„æµ‹ | AIAnalysisService |

### æ¨¡å—äº¤äº’

```mermaid
sequenceDiagram
    participant C as Controller
    participant S as Service
    participant M as Manager
    participant D as DAO
    participant DC as DeviceComm
    
    C->>S: è¿œç¨‹å¼€é—¨è¯·æ±‚
    S->>M: ç»„è£…æ§åˆ¶æŒ‡ä»¤
    M->>DC: ä¸‹å‘è®¾å¤‡æŒ‡ä»¤
    DC-->>M: æ‰§è¡Œç»“æœ
    M->>D: è®°å½•æ“ä½œæ—¥å¿—
    S-->>C: è¿”å›æ‰§è¡Œç»“æœ
```

---

## ğŸ“Š æ•°æ®åº“æ¦‚å¿µæ¨¡å‹

```mermaid
erDiagram
    ACCESS_DEVICE ||--o{ ACCESS_RECORD : generates
    ACCESS_DEVICE ||--o{ DEVICE_HEALTH : has
    ACCESS_DEVICE }o--|| ACCESS_AREA : belongs_to
    
    ACCESS_DEVICE {
        bigint id PK
        string device_name
        string device_sn
        string ip_address
        int port
        string status
        bigint area_id FK
    }
    
    DEVICE_HEALTH {
        bigint id PK
        bigint device_id FK
        int health_score
        datetime check_time
    }
```

---

## ğŸ”§ æŠ€æœ¯é€‰å‹

| æŠ€æœ¯ | é€‰å‹ | ç†ç”± |
|------|------|------|
| æ¡†æ¶ | Spring Boot 3.5.8 | ä¼ä¸šçº§å¾®æœåŠ¡æ ‡å‡† |
| æ•°æ®åº“ | MySQL 8.0 | å…³ç³»å‹æ•°æ®å­˜å‚¨ |
| ç¼“å­˜ | Redis + Caffeine | å¤šçº§ç¼“å­˜æå‡æ€§èƒ½ |
| é€šè®¯ | MQTT/TCP | è®¾å¤‡åè®®é€‚é… |

---

**ğŸ“ æ–‡æ¡£ç»´æŠ¤**: IOE-DREAMæ¶æ„å›¢é˜Ÿ | 2025-12-17
