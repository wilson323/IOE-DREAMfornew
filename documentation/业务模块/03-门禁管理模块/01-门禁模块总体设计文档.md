# IOE-DREAMé—¨ç¦ç®¡ç†æ¨¡å— - æ€»ä½“è®¾è®¡æ–‡æ¡£

> **æ¨¡å—ç‰ˆæœ¬**: v2.0.0
> **åˆ›å»ºæ—¶é—´**: 2025-12-16
> **æœ€åæ›´æ–°**: 2025-12-16
> **æ¨¡å—è´Ÿè´£äºº**: IOE-DREAMæ¶æ„å›¢é˜Ÿ
> **æœåŠ¡ç«¯å£**: 8090

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

### æ¨¡å—å®šä½

é—¨ç¦ç®¡ç†æ¨¡å—æ˜¯IOE-DREAMæ™ºæ…§å›­åŒºå®‰é˜²ç»¼åˆç®¡ç†å¹³å°çš„æ ¸å¿ƒå®‰å…¨æ¨¡å—ï¼Œæä¾›å¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ«ã€æ™ºèƒ½æƒé™æ§åˆ¶ã€å®æ—¶ç›‘æ§å‘Šè­¦ã€åŒºåŸŸç©ºé—´ç®¡ç†ç­‰å®Œæ•´é—¨ç¦è§£å†³æ–¹æ¡ˆã€‚åŸºäºZKBioSecurity-ACCé—¨ç¦ç³»ç»Ÿè®¾è®¡è§„èŒƒï¼Œç»“åˆSpring Boot 3.5.8å¾®æœåŠ¡æ¶æ„ï¼Œå®ç°ä»è®¾å¤‡ç®¡ç†åˆ°æƒé™æ§åˆ¶ã€å®æ—¶ç›‘æ§çš„å®Œæ•´ä¸šåŠ¡é—­ç¯ã€‚

### æ ¸å¿ƒä¸šåŠ¡ä»·å€¼

- **å¤šæ¨¡æ€ç»Ÿä¸€è®¤è¯**: é›†æˆäººè„¸è¯†åˆ«ã€æŒ‡çº¹ã€ICå¡ã€å¯†ç ã€è™¹è†œã€å£°çº¹ç­‰å¤šç§è®¤è¯æ–¹å¼
- **æ™ºèƒ½æƒé™ç®¡æ§**: åŸºäºåŒºåŸŸã€æ—¶é—´ã€è§’è‰²çš„åŠ¨æ€æƒé™ç®¡ç†å’Œç­–ç•¥é…ç½®
- **å®æ—¶ç›‘æ§é¢„è­¦**: è®¾å¤‡çŠ¶æ€å®æ—¶ç›‘æ§ã€å¼‚å¸¸è¡Œä¸ºæ£€æµ‹ã€å¤šçº§å‘Šè­¦å¤„ç†
- **è¿œç¨‹è®¾å¤‡æ§åˆ¶**: æ”¯æŒè¿œç¨‹å¼€é—¨ã€è®¾å¤‡é…ç½®ã€çŠ¶æ€ç›‘æ§ã€æ•…éšœè¯Šæ–­
- **å®Œæ•´å®¡è®¡è¿½æº¯**: é€šè¡Œè®°å½•å…¨é“¾è·¯è¿½è¸ªã€æ“ä½œæ—¥å¿—å®¡è®¡ã€æ•°æ®ç»Ÿè®¡åˆ†æ

### ä¸šåŠ¡åœºæ™¯è¦†ç›–

1. **æ—¥å¸¸é€šè¡Œç®¡ç†**: å‘˜å·¥æ­£å¸¸ä¸Šä¸‹ç­é€šè¡Œã€è®¿å®¢é¢„çº¦è®¿é—®ã€ä¸´æ—¶äººå‘˜ç®¡ç†
2. **å®‰å…¨é˜²æŠ¤ç®¡ç†**: é«˜é£é™©åŒºåŸŸæƒé™æ§åˆ¶ã€å¼‚å¸¸è¡Œä¸ºæ£€æµ‹ã€ç´§æ€¥äº‹ä»¶å¤„ç†
3. **è®¾å¤‡è¿ç»´ç®¡ç†**: é—¨ç¦è®¾å¤‡ç›‘æ§ã€æ•…éšœè¯Šæ–­ã€è¿œç¨‹ç»´æŠ¤ã€é…ç½®ç®¡ç†
4. **æ•°æ®åˆ†æç®¡ç†**: é€šè¡Œæ•°æ®ç»Ÿè®¡ã€è®¾å¤‡ä½¿ç”¨åˆ†æã€å®‰å…¨é£é™©è¯„ä¼°

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### å¾®æœåŠ¡æ¶æ„

**æœåŠ¡ä¿¡æ¯**:
- **æœåŠ¡åç§°**: ioedream-access-service
- **æœåŠ¡ç«¯å£**: 8090
- **æŠ€æœ¯æ ˆ**: Spring Boot 3.5.8 + Java 17 + MyBatis-Plus 3.5.15
- **æ³¨å†Œä¸­å¿ƒ**: Nacos
- **é…ç½®ä¸­å¿ƒ**: Nacos Config
- **æ•°æ®åº“**: MySQL 8.0 + Druidè¿æ¥æ± 
- **ç¼“å­˜**: Redis + Caffeineå¤šçº§ç¼“å­˜

### å››å±‚æ¶æ„è§„èŒƒ

ä¸¥æ ¼éµå¾ªIOE-DREAMå››å±‚æ¶æ„æ ‡å‡†ï¼š

```mermaid
graph TD
    A[Controllerå±‚ - æ¥å£æ§åˆ¶] --> B[Serviceå±‚ - æ ¸å¿ƒä¸šåŠ¡]
    B --> C[Managerå±‚ - æµç¨‹ç®¡ç†]
    C --> D[DAOå±‚ - æ•°æ®è®¿é—®]

    A1[AccessController] --> A
    A2[AccessDeviceController] --> A
    A3[AccessMonitorController] --> A
    A4[AccessApprovalController] --> A

    B1[AccessService] --> B
    B2[AccessDeviceService] --> B
    B3[AccessMonitorService] --> B

    C1[AccessManager] --> C
    C2[DeviceManager] --> C
    C3[PermissionManager] --> C
    C4[BiometricManager] --> C

    D1[AccessRecordDao] --> D
    D2[AccessDeviceDao] --> D
    D3[AccessPermissionDao] --> D
```

**å±‚çº§èŒè´£**:
- **Controllerå±‚**: HTTPè¯·æ±‚å¤„ç†ã€å‚æ•°éªŒè¯ã€æƒé™æ§åˆ¶ã€æ¥å£æš´éœ²
- **Serviceå±‚**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†ã€ä¸šåŠ¡è§„åˆ™éªŒè¯
- **Managerå±‚**: å¤æ‚æµç¨‹ç¼–æ’ã€å¤šæ•°æ®ç»„è£…ã€ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- **DAOå±‚**: æ•°æ®åº“CRUDæ“ä½œã€SQLæŸ¥è¯¢å®ç°ã€æ•°æ®è®¿é—®è¾¹ç•Œ

### æ ¸å¿ƒæŠ€æœ¯ç»„ä»¶

#### 1. ç”Ÿç‰©è¯†åˆ«å¼•æ“
- **äººè„¸è¯†åˆ«**: æ”¯æŒå•†æ±¤ã€æ—·è§†ã€è™¹è½¯ç­‰å¤šç§AIç®—æ³•
- **æŒ‡çº¹è¯†åˆ«**: ä¸­æ§æ™ºæ…§æŒ‡çº¹ç®—æ³•ï¼Œæ”¯æŒ1:1å’Œ1:NåŒ¹é…
- **è™¹è†œè¯†åˆ«**: é«˜ç²¾åº¦è™¹è†œè¯†åˆ«ç®—æ³•ï¼Œè¯¯è¯†ç‡<0.001%
- **å£°çº¹è¯†åˆ«**: æ”¯æŒæ–‡æœ¬ç›¸å…³å’Œæ–‡æœ¬æ— å…³å£°çº¹éªŒè¯

#### 2. è®¾å¤‡é€šä¿¡åè®®
- **TCP/IPåè®®**: æ ‡å‡†TCP Socketé€šä¿¡ï¼Œæ”¯æŒé•¿è¿æ¥å’Œå¿ƒè·³æœºåˆ¶
- **HTTP/HTTPSåè®®**: RESTful APIæ¥å£ï¼Œæ”¯æŒWebhookå›è°ƒ
- **WebSocketåè®®**: å®æ—¶åŒå‘é€šä¿¡ï¼Œæ”¯æŒäº‹ä»¶æ¨é€
- **SDKé›†æˆ**: ä¸­æ§æ™ºæ…§é—¨ç¦SDKï¼Œæ”¯æŒå¤šç§è®¾å¤‡å‹å·

#### 3. æƒé™æ§åˆ¶å¼•æ“
- **RBACæ¨¡å‹**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **ABACæ¨¡å‹**: åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶
- **ç­–ç•¥å¼•æ“**: çµæ´»çš„æƒé™ç­–ç•¥é…ç½®å’Œè§„åˆ™å¼•æ“
- **æ—¶é—´çª—å£**: æ”¯æŒå¤æ‚çš„æ—¶é—´æƒé™é…ç½®

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨è®¾è®¡

#### 1. é—¨ç¦è®¾å¤‡è¡¨ (access_device)

```sql
CREATE TABLE `access_device` (
    `device_id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'è®¾å¤‡ID',
    `device_no` VARCHAR(50) NOT NULL COMMENT 'è®¾å¤‡ç¼–å·',
    `device_name` VARCHAR(100) NOT NULL COMMENT 'è®¾å¤‡åç§°',
    `device_type` TINYINT(2) NOT NULL COMMENT 'è®¾å¤‡ç±»å‹:1-é—¨ç¦,2-é—¸æœº,3-è½¬é—¸,4-é“é—¸,5-ç”µæ¢¯',
    `device_model` VARCHAR(50) COMMENT 'è®¾å¤‡å‹å·',
    `manufacturer` VARCHAR(50) COMMENT 'åˆ¶é€ å•†',
    `serial_number` VARCHAR(100) COMMENT 'åºåˆ—å·',
    `area_id` BIGINT(20) NOT NULL COMMENT 'æ‰€å±åŒºåŸŸID',
    `location_desc` VARCHAR(200) COMMENT 'ä½ç½®æè¿°',
    `ip_address` VARCHAR(15) COMMENT 'IPåœ°å€',
    `port` INT COMMENT 'ç«¯å£å·',
    `protocol_type` VARCHAR(20) NOT NULL DEFAULT 'TCP' COMMENT 'åè®®ç±»å‹',
    `device_status` TINYINT(2) NOT NULL DEFAULT 0 COMMENT 'è®¾å¤‡çŠ¶æ€:0-ç¦»çº¿,1-åœ¨çº¿,2-æ•…éšœ,3-ç»´æŠ¤',
    `last_heartbeat` DATETIME COMMENT 'æœ€åå¿ƒè·³æ—¶é—´',
    `config_data` TEXT COMMENT 'è®¾å¤‡é…ç½®JSON',
    `security_level` TINYINT(2) DEFAULT 1 COMMENT 'å®‰å…¨ç­‰çº§:1-ä½,2-ä¸­,3-é«˜,4-æé«˜',
    `anti_passback` TINYINT(1) DEFAULT 0 COMMENT 'åæ½œå›åŠŸèƒ½:0-å…³é—­,1-å¼€å¯',
    `biometric_support` VARCHAR(50) COMMENT 'ç”Ÿç‰©è¯†åˆ«æ”¯æŒ:face,fingerprint,iris,voice',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    `create_user_id` BIGINT(20) COMMENT 'åˆ›å»ºäººID',
    `deleted_flag` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'åˆ é™¤æ ‡å¿—',
    PRIMARY KEY (`device_id`),
    UNIQUE KEY `uk_device_no` (`device_no`, `deleted_flag`),
    KEY `idx_device_type` (`device_type`),
    KEY `idx_area_id` (`area_id`),
    KEY `idx_device_status` (`device_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='é—¨ç¦è®¾å¤‡è¡¨';
```

#### 2. é—¨ç¦æƒé™è¡¨ (access_permission)

```sql
CREATE TABLE `access_permission` (
    `permission_id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'æƒé™ID',
    `user_id` BIGINT(20) NOT NULL COMMENT 'ç”¨æˆ·ID',
    `user_type` TINYINT(2) NOT NULL DEFAULT 1 COMMENT 'ç”¨æˆ·ç±»å‹:1-å‘˜å·¥,2-è®¿å®¢,3-ä¸´æ—¶äººå‘˜',
    `device_id` BIGINT(20) NOT NULL COMMENT 'è®¾å¤‡ID',
    `area_id` BIGINT(20) NOT NULL COMMENT 'åŒºåŸŸID',
    `permission_type` TINYINT(2) NOT NULL DEFAULT 1 COMMENT 'æƒé™ç±»å‹:1-æ°¸ä¹…,2-ä¸´æ—¶,3-å•æ¬¡',
    `access_method` VARCHAR(50) NOT NULL COMMENT 'è®¿é—®æ–¹å¼:card,face,fingerprint,password,multi',
    `valid_start_time` DATETIME NOT NULL COMMENT 'æœ‰æ•ˆå¼€å§‹æ—¶é—´',
    `valid_end_time` DATETIME NOT NULL COMMENT 'æœ‰æ•ˆç»“æŸæ—¶é—´',
    `time_restrictions` JSON COMMENT 'æ—¶é—´é™åˆ¶é…ç½®',
    `permission_status` TINYINT(2) NOT NULL DEFAULT 1 COMMENT 'æƒé™çŠ¶æ€:0-ç¦ç”¨,1-å¯ç”¨,2-è¿‡æœŸ',
    `access_count` INT DEFAULT 0 COMMENT 'è®¿é—®æ¬¡æ•°é™åˆ¶',
    `used_count` INT DEFAULT 0 COMMENT 'å·²ä½¿ç”¨æ¬¡æ•°',
    `approval_status` TINYINT(2) DEFAULT 1 COMMENT 'å®¡æ‰¹çŠ¶æ€:0-å¾…å®¡æ‰¹,1-å·²é€šè¿‡,2-å·²æ‹’ç»',
    `approver_id` BIGINT(20) COMMENT 'å®¡æ‰¹äººID',
    `approval_time` DATETIME COMMENT 'å®¡æ‰¹æ—¶é—´',
    `approval_comment` VARCHAR(500) COMMENT 'å®¡æ‰¹æ„è§',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    `create_user_id` BIGINT(20) COMMENT 'åˆ›å»ºäººID',
    `deleted_flag` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'åˆ é™¤æ ‡å¿—',
    PRIMARY KEY (`permission_id`),
    UNIQUE KEY `uk_user_device` (`user_id`, `device_id`, `deleted_flag`),
    KEY `idx_user_id` (`user_id`),
    KEY `idx_device_id` (`device_id`),
    KEY `idx_permission_status` (`permission_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='é—¨ç¦æƒé™è¡¨';
```

#### 3. é—¨ç¦è®°å½•è¡¨ (access_record)

```sql
CREATE TABLE `access_record` (
    `record_id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'è®°å½•ID',
    `access_sn` VARCHAR(50) NOT NULL COMMENT 'è®¿é—®æµæ°´å·',
    `user_id` BIGINT(20) COMMENT 'ç”¨æˆ·ID',
    `user_type` TINYINT(2) COMMENT 'ç”¨æˆ·ç±»å‹',
    `user_name` VARCHAR(100) COMMENT 'ç”¨æˆ·å§“å',
    `device_id` BIGINT(20) NOT NULL COMMENT 'è®¾å¤‡ID',
    `area_id` BIGINT(20) NOT NULL COMMENT 'åŒºåŸŸID',
    `access_type` TINYINT(2) NOT NULL COMMENT 'é€šè¡Œç±»å‹:1-è¿›å…¥,2-é€€å‡º',
    `verify_method` VARCHAR(50) COMMENT 'éªŒè¯æ–¹å¼:card,face,fingerprint,password,multi',
    `access_result` TINYINT(2) NOT NULL COMMENT 'é€šè¡Œç»“æœ:0-æˆåŠŸ,1-å¤±è´¥,2-è¶…æ—¶,3-å–æ¶ˆ',
    `failure_reason` VARCHAR(200) COMMENT 'å¤±è´¥åŸå› ',
    `card_no` VARCHAR(50) COMMENT 'å¡å·',
    `biometric_data` JSON COMMENT 'ç”Ÿç‰©è¯†åˆ«æ•°æ®',
    `verify_score` DECIMAL(5,4) COMMENT 'éªŒè¯åˆ†æ•°',
    `access_time` DATETIME NOT NULL COMMENT 'é€šè¡Œæ—¶é—´',
    `process_duration` INT COMMENT 'å¤„ç†æ—¶é•¿(ms)',
    `photo_url` VARCHAR(500) COMMENT 'æŠ“æ‹ç…§ç‰‡URL',
    `video_url` VARCHAR(500) COMMENT 'å½•åƒURL',
    `device_snapshot` JSON COMMENT 'è®¾å¤‡å¿«ç…§æ•°æ®',
    `location_data` JSON COMMENT 'ä½ç½®æ•°æ®',
    `risk_score` DECIMAL(3,2) COMMENT 'é£é™©è¯„åˆ†',
    `alert_level` TINYINT(2) DEFAULT 0 COMMENT 'å‘Šè­¦çº§åˆ«:0-æ— ,1-ä½,2-ä¸­,3-é«˜,4-ç´§æ€¥',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    PRIMARY KEY (`record_id`),
    UNIQUE KEY `uk_access_sn` (`access_sn`),
    KEY `idx_user_access_time` (`user_id`, `access_time`),
    KEY `idx_device_access_time` (`device_id`, `access_time`),
    KEY `idx_access_result` (`access_result`),
    KEY `idx_alert_level` (`alert_level`),
    KEY `idx_access_time` (`access_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='é—¨ç¦é€šè¡Œè®°å½•è¡¨';
```

#### 4. å®¡æ‰¹æµç¨‹è¡¨ (access_approval_process)

```sql
CREATE TABLE `access_approval_process` (
    `process_id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'æµç¨‹ID',
    `process_no` VARCHAR(50) NOT NULL COMMENT 'æµç¨‹ç¼–å·',
    `process_type` TINYINT(2) NOT NULL COMMENT 'æµç¨‹ç±»å‹:1-ä¸´æ—¶æƒé™,2-è®¿å®¢æƒé™,3-åŒºåŸŸæƒé™',
    `applicant_id` BIGINT(20) NOT NULL COMMENT 'ç”³è¯·äººID',
    `applicant_name` VARCHAR(100) NOT NULL COMMENT 'ç”³è¯·äººå§“å',
    `applicant_dept` VARCHAR(100) COMMENT 'ç”³è¯·éƒ¨é—¨',
    `apply_content` JSON NOT NULL COMMENT 'ç”³è¯·å†…å®¹',
    `current_step` INT DEFAULT 1 COMMENT 'å½“å‰æ­¥éª¤',
    `total_steps` INT DEFAULT 1 COMMENT 'æ€»æ­¥éª¤æ•°',
    `process_status` VARCHAR(20) NOT NULL DEFAULT 'PENDING' COMMENT 'æµç¨‹çŠ¶æ€',
    `priority` TINYINT(2) DEFAULT 2 COMMENT 'ä¼˜å…ˆçº§:1-ç´§æ€¥,2-æ™®é€š,3-ä½',
    `approval_config` JSON COMMENT 'å®¡æ‰¹é…ç½®',
    `current_approver_id` BIGINT(20) COMMENT 'å½“å‰å®¡æ‰¹äººID',
    `current_approver_name` VARCHAR(100) COMMENT 'å½“å‰å®¡æ‰¹äººå§“å',
    `final_approver_id` BIGINT(20) COMMENT 'æœ€ç»ˆå®¡æ‰¹äººID',
    `final_approver_name` VARCHAR(100) COMMENT 'æœ€ç»ˆå®¡æ‰¹äººå§“å',
    `approval_comment` TEXT COMMENT 'å®¡æ‰¹æ„è§',
    `approval_time` DATETIME COMMENT 'å®¡æ‰¹æ—¶é—´',
    `effective_time` DATETIME COMMENT 'ç”Ÿæ•ˆæ—¶é—´',
    `expire_time` DATETIME COMMENT 'è¿‡æœŸæ—¶é—´',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    `create_user_id` BIGINT(20) COMMENT 'åˆ›å»ºäººID',
    `deleted_flag` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'åˆ é™¤æ ‡å¿—',
    PRIMARY KEY (`process_id`),
    UNIQUE KEY `uk_process_no` (`process_no`),
    KEY `idx_applicant_id` (`applicant_id`),
    KEY `idx_process_status` (`process_status`),
    KEY `idx_process_type` (`process_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='é—¨ç¦å®¡æ‰¹æµç¨‹è¡¨';
```

### æ•°æ®åº“è®¾è®¡åŸåˆ™

#### 1. å‘½åè§„èŒƒ
- **è¡¨å**: æ¨¡å—å‰ç¼€ `access_` + ä¸šåŠ¡å«ä¹‰ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”
- **å­—æ®µå**: å°å†™å­—æ¯+ä¸‹åˆ’çº¿ï¼Œé¿å…ç¼©å†™ï¼Œè¯­ä¹‰æ˜ç¡®
- **ç´¢å¼•å**: `idx_` + å­—æ®µåï¼Œå”¯ä¸€ç´¢å¼• `uk_` + å­—æ®µå

#### 2. å­—æ®µè§„èŒƒ
- **ä¸»é”®**: ç»Ÿä¸€ä½¿ç”¨ `BIGINT AUTO_INCREMENT`
- **æ—¶é—´å­—æ®µ**: ä½¿ç”¨ `DATETIME` ç±»å‹ï¼ŒåŒ…å«åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´
- **çŠ¶æ€å­—æ®µ**: ä½¿ç”¨ `TINYINT` ç±»å‹ï¼Œæ³¨é‡Šè¯´æ˜çŠ¶æ€å€¼å«ä¹‰
- **JSONå­—æ®µ**: ç”¨äºå­˜å‚¨å¤æ‚é…ç½®å’Œæ•°æ®ç»“æ„

#### 3. ç´¢å¼•ç­–ç•¥
- **æŸ¥è¯¢ä¼˜åŒ–**: ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µåˆ›å»ºç´¢å¼•
- **å¤åˆç´¢å¼•**: ä¸ºå¤šå­—æ®µæŸ¥è¯¢æ¡ä»¶åˆ›å»ºå¤åˆç´¢å¼•
- **å”¯ä¸€çº¦æŸ**: ä¸ºä¸šåŠ¡å”¯ä¸€æ€§å­—æ®µåˆ›å»ºå”¯ä¸€ç´¢å¼•

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. è®¾å¤‡ç®¡ç†æ¨¡å—

#### è®¾å¤‡ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **è®¾å¤‡æ³¨å†Œ**: è‡ªåŠ¨å‘ç°å’Œæ‰‹åŠ¨æ·»åŠ é—¨ç¦è®¾å¤‡
- **è®¾å¤‡é…ç½®**: è¿œç¨‹é…ç½®è®¾å¤‡å‚æ•°å’ŒåŠŸèƒ½è®¾ç½®
- **çŠ¶æ€ç›‘æ§**: å®æ—¶ç›‘æ§è®¾å¤‡åœ¨çº¿çŠ¶æ€å’Œè¿è¡ŒçŠ¶å†µ
- **æ•…éšœè¯Šæ–­**: è‡ªåŠ¨æ£€æµ‹è®¾å¤‡æ•…éšœå¹¶ç”Ÿæˆå‘Šè­¦

#### è®¾å¤‡ç±»å‹æ”¯æŒ
- **é—¨ç¦æ§åˆ¶å™¨**: æ”¯æŒå•é—¨ã€åŒé—¨ã€å››é—¨æ§åˆ¶å™¨
- **æ™ºèƒ½è¯»å¡å™¨**: ICå¡ã€CPUå¡ã€èº«ä»½è¯è¯»å¡å™¨
- **ç”Ÿç‰©è¯†åˆ«è®¾å¤‡**: äººè„¸è¯†åˆ«ç»ˆç«¯ã€æŒ‡çº¹è¯†åˆ«è®¾å¤‡
- **é—¨é”è®¾å¤‡**: ç”µæ§é”ã€ç”µç£é”ã€æ™ºèƒ½é—¨é”

### 2. æƒé™ç®¡ç†æ¨¡å—

#### æƒé™ç­–ç•¥é…ç½®
- **ç”¨æˆ·æƒé™**: åŸºäºç”¨æˆ·çš„ä¸ªæ€§åŒ–æƒé™é…ç½®
- **è§’è‰²æƒé™**: åŸºäºè§’è‰²çš„æ‰¹é‡æƒé™åˆ†é…
- **åŒºåŸŸæƒé™**: åŸºäºåŒºåŸŸçš„è®¿é—®æƒé™æ§åˆ¶
- **æ—¶é—´æƒé™**: åŸºäºæ—¶é—´çš„è®¿é—®æ—¶æ®µæ§åˆ¶

#### åŠ¨æ€æƒé™æ§åˆ¶
- **å®æ—¶ç”Ÿæ•ˆ**: æƒé™å˜æ›´å®æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯è®¾å¤‡
- **ä¸´æ—¶æƒé™**: æ”¯æŒä¸´æ—¶è®¿é—®æƒé™çš„å¿«é€Ÿç”³è¯·å’Œå®¡æ‰¹
- **ç´§æ€¥æƒé™**: ç´§æ€¥æƒ…å†µä¸‹çš„æƒé™å¼€æ”¾å’Œå›æ”¶
- **æƒé™å®¡è®¡**: å®Œæ•´çš„æƒé™å˜æ›´è®°å½•å’Œå®¡è®¡è·Ÿè¸ª

### 3. å®æ—¶ç›‘æ§æ¨¡å—

#### è®¾å¤‡çŠ¶æ€ç›‘æ§
- **åœ¨çº¿ç›‘æ§**: å®æ—¶ç›‘æ§è®¾å¤‡åœ¨çº¿çŠ¶æ€
- **æ€§èƒ½ç›‘æ§**: è®¾å¤‡å“åº”æ—¶é—´ã€æˆåŠŸç‡ç­‰æ€§èƒ½æŒ‡æ ‡
- **å¼‚å¸¸æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹è®¾å¤‡å¼‚å¸¸å’Œæ•…éšœæƒ…å†µ
- **æŠ¥è¡¨ç»Ÿè®¡**: è®¾å¤‡ä½¿ç”¨ç‡ã€æ•…éšœç‡ç­‰ç»Ÿè®¡æŠ¥è¡¨

#### å®‰å…¨äº‹ä»¶ç›‘æ§
- **é€šè¡Œäº‹ä»¶**: å®æ—¶ç›‘æ§äººå‘˜é€šè¡Œäº‹ä»¶
- **å¼‚å¸¸è¡Œä¸º**: å¤šæ¬¡å¤±è´¥ã€å¼ºè¡Œé—¯å…¥ç­‰å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
- **é£é™©è¯„ä¼°**: åŸºäºå†å²æ•°æ®çš„é£é™©è¯„ä¼°å’Œé¢„è­¦
- **è§†é¢‘è”åŠ¨**: ä¸è§†é¢‘ç›‘æ§ç³»ç»Ÿçš„è”åŠ¨å’Œäº‹ä»¶å…³è”

### 4. ç”Ÿç‰©è¯†åˆ«æ¨¡å—

#### å¤šæ¨¡æ€è¯†åˆ«
- **äººè„¸è¯†åˆ«**: 1:Näººè„¸è¯†åˆ«å’Œ1:1èº«ä»½éªŒè¯
- **æŒ‡çº¹è¯†åˆ«**: æŒ‡çº¹é‡‡é›†ã€æ¨¡æ¿å­˜å‚¨å’ŒåŒ¹é…éªŒè¯
- **è™¹è†œè¯†åˆ«**: é«˜ç²¾åº¦è™¹è†œè¯†åˆ«å’Œæ´»ä½“æ£€æµ‹
- **å£°çº¹è¯†åˆ«**: å£°çº¹ç‰¹å¾æå–å’Œè¯´è¯äººè¯†åˆ«

#### æ´»ä½“æ£€æµ‹
- **äººè„¸æ´»ä½“**: é˜²ç…§ç‰‡ã€è§†é¢‘ã€é¢å…·æ”»å‡»æ£€æµ‹
- **æŒ‡çº¹æ´»ä½“**: é˜²å‡æŒ‡çº¹ã€ç¡…èƒ¶æŒ‡çº¹æ£€æµ‹
- **å¤šå› å­èåˆ**: å¤šç§ç”Ÿç‰©è¯†åˆ«ç‰¹å¾çš„èåˆéªŒè¯

### 5. å®¡æ‰¹æµç¨‹æ¨¡å—

#### æµç¨‹ç±»å‹
- **ä¸´æ—¶æƒé™ç”³è¯·**: ä¸´æ—¶è®¿é—®æƒé™çš„ç”³è¯·å’Œå®¡æ‰¹
- **è®¿å®¢æƒé™ç”³è¯·**: è®¿å®¢è®¿é—®æƒé™çš„ç”³è¯·å’Œå®¡æ‰¹
- **ç‰¹æ®ŠåŒºåŸŸæƒé™**: é«˜å®‰å…¨çº§åˆ«åŒºåŸŸçš„æƒé™ç”³è¯·
- **ç´§æ€¥æƒé™ç”³è¯·**: ç´§æ€¥æƒ…å†µä¸‹çš„æƒé™ç”³è¯·å’Œå¿«é€Ÿå®¡æ‰¹

#### å®¡æ‰¹é…ç½®
- **å®¡æ‰¹æµç¨‹**: å¯é…ç½®çš„å¤šçº§å®¡æ‰¹æµç¨‹
- **å®¡æ‰¹è§„åˆ™**: åŸºäºæ¡ä»¶è‡ªåŠ¨è·¯ç”±çš„å®¡æ‰¹è§„åˆ™
- **å®¡æ‰¹æƒé™**: ä¸åŒå®¡æ‰¹äººçš„æƒé™å’ŒèŒè´£é…ç½®
- **å®¡æ‰¹æ—¶æ•ˆ**: å®¡æ‰¹æ—¶æ•ˆæ§åˆ¶å’Œè¶…æ—¶å¤„ç†

---

## ğŸ” å®‰å…¨è®¾è®¡

### 1. æ•°æ®å®‰å…¨

#### æ•æ„Ÿæ•°æ®åŠ å¯†
- **ç”Ÿç‰©è¯†åˆ«æ•°æ®**: æŒ‡çº¹ã€äººè„¸ã€è™¹è†œç­‰ç”Ÿç‰©ç‰¹å¾æ•°æ®åŠ å¯†å­˜å‚¨
- **é€šè¡Œè®°å½•**: é€šè¡Œè®°å½•æ•æ„Ÿä¿¡æ¯è„±æ•å¤„ç†
- **æƒé™ä¿¡æ¯**: æƒé™é…ç½®æ•°æ®åŠ å¯†ä¼ è¾“å’Œå­˜å‚¨
- **é€šä¿¡æ•°æ®**: è®¾å¤‡é€šä¿¡æ•°æ®ç«¯åˆ°ç«¯åŠ å¯†

#### æ•°æ®è„±æ•è§„åˆ™
- **èº«ä»½è¯å·**: åªæ˜¾ç¤ºå‰6ä½å’Œå4ä½
- **æ‰‹æœºå·ç **: åªæ˜¾ç¤ºå‰3ä½å’Œå4ä½
- **å¡å·**: åªæ˜¾ç¤ºå‰4ä½å’Œå4ä½
- **å§“å**: æ ¹æ®æƒé™çº§åˆ«æ˜¾ç¤ºå®Œæ•´æˆ–éƒ¨åˆ†å§“å

### 2. è®¿é—®æ§åˆ¶

#### å¤šçº§æƒé™æ§åˆ¶
- **åŠŸèƒ½æƒé™**: åŸºäºè§’è‰²çš„åŠŸèƒ½æ“ä½œæƒé™
- **æ•°æ®æƒé™**: åŸºäºåŒºåŸŸå’Œæ•°æ®èŒƒå›´çš„æ•°æ®è®¿é—®æƒé™
- **æ¥å£æƒé™**: APIæ¥å£çš„è®¿é—®æƒé™å’Œè°ƒç”¨é¢‘ç‡é™åˆ¶
- **æ“ä½œæƒé™**: ç‰¹å®šæ“ä½œçš„é¢å¤–æƒé™éªŒè¯è¦æ±‚

#### å®‰å…¨å®¡è®¡
- **æ“ä½œæ—¥å¿—**: å®Œæ•´è®°å½•ç”¨æˆ·æ“ä½œè¡Œä¸º
- **è®¿é—®æ—¥å¿—**: è®°å½•ç³»ç»Ÿè®¿é—®å’Œæ¥å£è°ƒç”¨æ—¥å¿—
- **å®‰å…¨äº‹ä»¶**: è®°å½•å®‰å…¨ç›¸å…³äº‹ä»¶å’Œå¼‚å¸¸æƒ…å†µ
- **å®¡è®¡æŠ¥å‘Š**: å®šæœŸç”Ÿæˆå®‰å…¨å®¡è®¡æŠ¥å‘Š

### 3. ç³»ç»Ÿå®‰å…¨

#### é˜²æŠ¤æªæ–½
- **SQLæ³¨å…¥é˜²æŠ¤**: å‚æ•°åŒ–æŸ¥è¯¢å’Œè¾“å…¥éªŒè¯
- **XSSæ”»å‡»é˜²æŠ¤**: è¾“å…¥è¾“å‡ºç¼–ç å’Œå†…å®¹å®‰å…¨ç­–ç•¥
- **CSRFæ”»å‡»é˜²æŠ¤**: CSRFä»¤ç‰Œå’Œæ¥æºéªŒè¯
- **æš´åŠ›ç ´è§£é˜²æŠ¤**: ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶å’Œè´¦æˆ·é”å®š

#### å®‰å…¨ç›‘æ§
- **å¼‚å¸¸è®¿é—®**: å¼‚å¸¸IPè®¿é—®å’Œå¼‚å¸¸è¡Œä¸ºæ£€æµ‹
- **æƒé™æ»¥ç”¨**: æƒé™æ»¥ç”¨æ£€æµ‹å’Œé¢„è­¦
- **ç³»ç»Ÿå…¥ä¾µ**: å…¥ä¾µæ£€æµ‹å’Œå®‰å…¨äº‹ä»¶å“åº”
- **æ¼æ´æ‰«æ**: å®šæœŸå®‰å…¨æ¼æ´æ‰«æå’Œä¿®å¤

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥

#### å¤šçº§ç¼“å­˜æ¶æ„
```java
// L1æœ¬åœ°ç¼“å­˜ - Caffeine
@Cacheable(value = "access:permission", key = "#userId + ':' + #deviceId")
public AccessPermissionVO getPermission(Long userId, Long deviceId) {
    // ç¼“å­˜ç”¨æˆ·æƒé™ä¿¡æ¯ï¼Œè¿‡æœŸæ—¶é—´5åˆ†é’Ÿ
}

// L2 Redisç¼“å­˜ - åˆ†å¸ƒå¼ç¼“å­˜
@Cacheable(value = "access:device", key = "#deviceId")
public AccessDeviceVO getDeviceInfo(Long deviceId) {
    // ç¼“å­˜è®¾å¤‡ä¿¡æ¯ï¼Œè¿‡æœŸæ—¶é—´10åˆ†é’Ÿ
}

// L3 æ•°æ®åº“ - æŒä¹…åŒ–å­˜å‚¨
public AccessPermissionEntity loadPermissionFromDB(Long userId, Long deviceId) {
    // ä»æ•°æ®åº“åŠ è½½æƒé™ä¿¡æ¯
}
```

#### ç¼“å­˜é…ç½®
- **æƒé™ç¼“å­˜**: ç”¨æˆ·æƒé™ä¿¡æ¯ç¼“å­˜ï¼Œè¿‡æœŸæ—¶é—´5åˆ†é’Ÿ
- **è®¾å¤‡ç¼“å­˜**: è®¾å¤‡é…ç½®ä¿¡æ¯ç¼“å­˜ï¼Œè¿‡æœŸæ—¶é—´10åˆ†é’Ÿ
- **ç”Ÿç‰©è¯†åˆ«ç¼“å­˜**: ç”Ÿç‰©ç‰¹å¾æ¨¡æ¿ç¼“å­˜ï¼Œè¿‡æœŸæ—¶é—´30åˆ†é’Ÿ
- **é…ç½®ç¼“å­˜**: ç³»ç»Ÿé…ç½®ä¿¡æ¯ç¼“å­˜ï¼Œè¿‡æœŸæ—¶é—´1å°æ—¶

### 2. æ•°æ®åº“ä¼˜åŒ–

#### ç´¢å¼•ä¼˜åŒ–
```sql
-- é€šè¡Œè®°å½•æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_record_user_time ON access_record(user_id, access_time DESC);
CREATE INDEX idx_record_device_time ON access_record(device_id, access_time DESC);
CREATE INDEX idx_record_result_alert ON access_record(access_result, alert_level);

-- æƒé™æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_permission_user_device ON access_permission(user_id, device_id, permission_status);
CREATE INDEX idx_permission_area_time ON access_permission(area_id, valid_start_time, valid_end_time);

-- è®¾å¤‡æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_device_area_status ON access_device(area_id, device_status);
```

#### åˆ†åŒºç­–ç•¥
```sql
-- é€šè¡Œè®°å½•è¡¨æŒ‰æœˆåˆ†åŒº
ALTER TABLE access_record PARTITION BY RANGE (TO_DAYS(access_time)) (
    PARTITION p202512 VALUES LESS THAN (TO_DAYS('2026-01-01')),
    PARTITION p202501 VALUES LESS THAN (TO_DAYS('2026-02-01')),
    PARTITION p202502 VALUES LESS THAN (TO_DAYS('2026-03-01'))
);
```

### 3. å¹¶å‘æ§åˆ¶

#### çº¿ç¨‹æ± é…ç½®
```yaml
spring:
  task:
    execution:
      pool:
        core-size: 10
        max-size: 50
        queue-capacity: 1000
        keep-alive: 60s
```

#### è¿æ¥æ± ä¼˜åŒ–
```yaml
spring:
  datasource:
    druid:
      initial-size: 10
      min-idle: 10
      max-active: 50
      max-wait: 60000
      validation-query: SELECT 1
      test-while-idle: true
      test-on-borrow: false
      test-on-return: false
```

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### 1. å¾®æœåŠ¡éƒ¨ç½²

#### Dockerå®¹å™¨åŒ–
```dockerfile
FROM openjdk:17-jre-slim

# åº”ç”¨é…ç½®
ENV JAVA_OPTS="-Xms2g -Xmx4g -XX:+UseG1GC"
ENV SPRING_PROFILES_ACTIVE=prod

# åº”ç”¨éƒ¨ç½²
COPY target/ioedream-access-service-1.0.0.jar /app.jar

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
  CMD curl -f http://localhost:8090/actuator/health || exit 1

EXPOSE 8090
ENTRYPOINT ["sh", "-c", "java $JAVA_OPTS -jar /app.jar"]
```

#### Kuberneteséƒ¨ç½²
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ioedream-access-service
spec:
  replicas: 3
  selector:
    matchLabels:
      app: ioedream-access-service
  template:
    metadata:
      labels:
        app: ioedream-access-service
    spec:
      containers:
      - name: access-service
        image: ioedream/access-service:1.0.0
        ports:
        - containerPort: 8090
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "prod"
        - name: NACOS_SERVER_ADDR
          value: "nacos-server:8848"
        resources:
          requests:
            memory: "2Gi"
            cpu: "1"
          limits:
            memory: "4Gi"
            cpu: "2"
        livenessProbe:
          httpGet:
            path: /actuator/health
            port: 8090
          initialDelaySeconds: 60
          periodSeconds: 30
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8090
          initialDelaySeconds: 30
          periodSeconds: 10
```

### 2. æ•°æ®åº“éƒ¨ç½²

#### MySQLä¸»ä»å¤åˆ¶
```yaml
# ä¸»åº“é…ç½®
mysql-master:
  image: mysql:8.0
  environment:
    MYSQL_ROOT_PASSWORD: ${DB_PASSWORD}
    MYSQL_DATABASE: ioedream_access
  command: --server-id=1 --log-bin=mysql-bin --binlog-format=ROW

# ä»åº“é…ç½®
mysql-slave:
  image: mysql:8.0
  environment:
    MYSQL_ROOT_PASSWORD: ${DB_PASSWORD}
  command: --server-id=2 --relay-log=mysql-relay --read-only=1
```

#### Redisé›†ç¾¤
```yaml
redis-cluster:
  image: redis:7.0
  command: redis-server --cluster-enabled yes --cluster-config-file nodes.conf
  environment:
    REDIS_PASSWORD: ${REDIS_PASSWORD}
```

### 3. ç›‘æ§éƒ¨ç½²

#### Prometheusç›‘æ§
```yaml
prometheus:
  image: prom/prometheus:latest
  ports:
    - "9090:9090"
  volumes:
    - ./prometheus.yml:/etc/prometheus/prometheus.yml
    - prometheus-data:/prometheus
```

#### Grafanaä»ªè¡¨æ¿
```yaml
grafana:
  image: grafana/grafana:latest
  ports:
    - "3000:3000"
  environment:
    GF_SECURITY_ADMIN_PASSWORD: ${GRAFANA_PASSWORD}
  volumes:
    - grafana-data:/var/lib/grafana
```

---

## ğŸ“Š ç›‘æ§å‘Šè­¦

### 1. å…³é”®æŒ‡æ ‡ç›‘æ§

#### ä¸šåŠ¡æŒ‡æ ‡
- **é€šè¡ŒæˆåŠŸç‡**: æˆåŠŸé€šè¡Œæ¬¡æ•° / æ€»é€šè¡Œæ¬¡æ•°
- **è®¾å¤‡åœ¨çº¿ç‡**: åœ¨çº¿è®¾å¤‡æ•° / æ€»è®¾å¤‡æ•°
- **æƒé™éªŒè¯å“åº”æ—¶é—´**: æƒé™éªŒè¯çš„å¹³å‡å“åº”æ—¶é—´
- **ç”Ÿç‰©è¯†åˆ«å‡†ç¡®ç‡**: ç”Ÿç‰©è¯†åˆ«éªŒè¯çš„æˆåŠŸç‡

#### ç³»ç»ŸæŒ‡æ ‡
- **APIå“åº”æ—¶é—´**: æ¥å£å“åº”æ—¶é—´ç›‘æ§
- **æ•°æ®åº“è¿æ¥æ± **: è¿æ¥æ± ä½¿ç”¨ç‡ç›‘æ§
- **JVMå†…å­˜ä½¿ç”¨**: å †å†…å­˜å’Œéå †å†…å­˜ä½¿ç”¨æƒ…å†µ
- **CPUä½¿ç”¨ç‡**: åº”ç”¨CPUä½¿ç”¨ç‡ç›‘æ§

#### å®‰å…¨æŒ‡æ ‡
- **å¼‚å¸¸è®¿é—®æ¬¡æ•°**: æƒé™éªŒè¯å¤±è´¥æ¬¡æ•°
- **å¯ç–‘è¡Œä¸ºæ£€æµ‹**: å¼‚å¸¸è¡Œä¸ºæ¨¡å¼æ£€æµ‹æ¬¡æ•°
- **æƒé™å˜æ›´é¢‘ç‡**: æƒé™é…ç½®å˜æ›´é¢‘ç‡
- **å®‰å…¨äº‹ä»¶æ•°é‡**: å®‰å…¨ç›¸å…³äº‹ä»¶æ•°é‡

### 2. å‘Šè­¦è§„åˆ™

#### ä¸šåŠ¡å‘Šè­¦
```yaml
groups:
- name: access-business-alerts
  rules:
  - alert: AccessSuccessRateLow
    expr: access_success_rate < 0.95
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "é—¨ç¦é€šè¡ŒæˆåŠŸç‡è¿‡ä½"
      description: "é—¨ç¦é€šè¡ŒæˆåŠŸç‡ä½äº95%ï¼Œå½“å‰å€¼: {{ $value }}"

  - alert: DeviceOfflineHigh
    expr: device_offline_rate > 0.1
    for: 2m
    labels:
      severity: critical
    annotations:
      summary: "è®¾å¤‡ç¦»çº¿ç‡è¿‡é«˜"
      description: "è®¾å¤‡ç¦»çº¿ç‡è¶…è¿‡10%ï¼Œå½“å‰å€¼: {{ $value }}"
```

#### ç³»ç»Ÿå‘Šè­¦
```yaml
- name: access-system-alerts
  rules:
  - alert: HighResponseTime
    expr: http_request_duration_seconds{quantile="0.95"} > 2
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "æ¥å£å“åº”æ—¶é—´è¿‡é«˜"
      description: "95%åˆ†ä½çš„æ¥å£å“åº”æ—¶é—´è¶…è¿‡2ç§’"

  - alert: HighCPUUsage
    expr: cpu_usage > 0.8
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "CPUä½¿ç”¨ç‡è¿‡é«˜"
      description: "CPUä½¿ç”¨ç‡è¶…è¿‡80%ï¼Œå½“å‰å€¼: {{ $value }}"
```

---

## ğŸ”„ é›†æˆè®¾è®¡

### 1. æ¨¡å—é—´é›†æˆ

#### ä¸å…¬å…±æ¨¡å—é›†æˆ
- **ç”¨æˆ·è®¤è¯**: ä½¿ç”¨å…¬å…±æ¨¡å—çš„ç»Ÿä¸€ç”¨æˆ·è®¤è¯ä½“ç³»
- **æƒé™ç®¡ç†**: é›†æˆå…¬å…±æ¨¡å—çš„RBACæƒé™æ¨¡å‹
- **é€šçŸ¥æœåŠ¡**: ä½¿ç”¨å…¬å…±æ¨¡å—çš„é€šçŸ¥æ¨é€æœåŠ¡
- **å®¡è®¡æ—¥å¿—**: é›†æˆå…¬å…±æ¨¡å—çš„å®¡è®¡æ—¥å¿—æœåŠ¡

#### ä¸å…¶ä»–ä¸šåŠ¡æ¨¡å—é›†æˆ
- **è€ƒå‹¤æ¨¡å—**: é—¨ç¦é€šè¡Œè®°å½•ä½œä¸ºè€ƒå‹¤æ•°æ®æº
- **è®¿å®¢æ¨¡å—**: è®¿å®¢æƒé™å®¡æ‰¹å’Œé—¨ç¦é€šè¡Œæ§åˆ¶
- **è§†é¢‘æ¨¡å—**: é—¨ç¦äº‹ä»¶è§¦å‘è§†é¢‘å½•åˆ¶å’Œè”åŠ¨
- **è®¾å¤‡é€šè®¯**: é€šè¿‡è®¾å¤‡é€šè®¯æ¨¡å—ç®¡ç†ç¡¬ä»¶è®¾å¤‡

### 2. ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ

#### é—¨ç¦å‚å•†é›†æˆ
- **ä¸­æ§æ™ºæ…§**: ZKBioSecurity-ACCç³»ç»Ÿé›†æˆ
- **æµ·åº·å¨è§†**: é—¨ç¦äº§å“å’Œè§†é¢‘ç›‘æ§é›†æˆ
- **å¤§åè‚¡ä»½**: é—¨ç¦è®¾å¤‡å’Œå®‰é˜²ç³»ç»Ÿé›†æˆ
- **äºšç•¥ç‰¹**: ç”Ÿç‰©è¯†åˆ«é—¨ç¦äº§å“é›†æˆ

#### ç”Ÿç‰©è¯†åˆ«ç®—æ³•é›†æˆ
- **å•†æ±¤ç§‘æŠ€**: SenseTimeäººè„¸è¯†åˆ«ç®—æ³•
- **æ—·è§†ç§‘æŠ€**: Face++äººè„¸è¯†åˆ«ç®—æ³•
- **è™¹è½¯ç§‘æŠ€**: ArcSoftäººè„¸è¯†åˆ«ç®—æ³•
- **ä¸­ç§‘é™¢è‡ªåŠ¨åŒ–æ‰€**: ç”Ÿç‰©è¯†åˆ«ç®—æ³•é›†æˆ

### 3. æ ‡å‡†æ¥å£

#### RESTful APIæ¥å£
- **ç»Ÿä¸€æ ¼å¼**: ç»Ÿä¸€çš„è¯·æ±‚å“åº”æ ¼å¼
- **ç‰ˆæœ¬æ§åˆ¶**: APIç‰ˆæœ¬ç®¡ç†å’Œå…¼å®¹æ€§
- **å®‰å…¨è®¤è¯**: Tokenè®¤è¯å’Œæƒé™éªŒè¯
- **æ¥å£æ–‡æ¡£**: OpenAPI/Swaggeræ¥å£æ–‡æ¡£

#### WebSocketæ¥å£
- **å®æ—¶é€šä¿¡**: å®æ—¶äº‹ä»¶æ¨é€å’ŒçŠ¶æ€æ›´æ–°
- **è¿æ¥ç®¡ç†**: è¿æ¥çŠ¶æ€ç›‘æ§å’Œè‡ªåŠ¨é‡è¿
- **æ¶ˆæ¯æ ¼å¼**: ç»Ÿä¸€çš„æ¶ˆæ¯æ ¼å¼å’Œåè®®
- **è®¢é˜…æœºåˆ¶**: çµæ´»çš„æ¶ˆæ¯è®¢é˜…å’Œå–æ¶ˆæœºåˆ¶

---

## ğŸ¯ è´¨é‡ä¿éšœ

### 1. æµ‹è¯•ç­–ç•¥

#### å•å…ƒæµ‹è¯•
```java
@SpringBootTest
@TestMethodOrder(OrderAnnotation.class)
class AccessServiceTest {

    @Resource
    private AccessService accessService;

    @Test
    @Order(1)
    void testVerifyAccess_Success() {
        // æµ‹è¯•æƒé™éªŒè¯æˆåŠŸåœºæ™¯
        AccessVerifyRequest request = new AccessVerifyRequest();
        request.setUserId(1001L);
        request.setDeviceId(1001L);
        request.setVerifyMethod("face");

        AccessVerifyResponse response = accessService.verifyAccess(request);
        assertThat(response.getResult()).isEqualTo("SUCCESS");
        assertThat(response.getScore()).isGreaterThan(0.8);
    }

    @Test
    @Order(2)
    void testVerifyAccess_NoPermission() {
        // æµ‹è¯•æ— æƒé™åœºæ™¯
        AccessVerifyRequest request = new AccessVerifyRequest();
        request.setUserId(9999L); // æ— æƒé™ç”¨æˆ·
        request.setDeviceId(1001L);
        request.setVerifyMethod("card");

        AccessVerifyResponse response = accessService.verifyAccess(request);
        assertThat(response.getResult()).isEqualTo("FAILED");
        assertThat(response.getReason()).isEqualTo("NO_PERMISSION");
    }
}
```

#### é›†æˆæµ‹è¯•
```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@TestPropertySource(locations = "classpath:application-test.properties")
class AccessControllerIntegrationTest {

    @Autowired
    private TestRestTemplate restTemplate;

    @Test
    void testAccessVerifyApi() {
        // æµ‹è¯•æƒé™éªŒè¯API
        String url = "/api/access/v1/verify";
        AccessVerifyRequest request = new AccessVerifyRequest();
        request.setUserId(1001L);
        request.setDeviceId(1001L);
        request.setVerifyMethod("face");

        ResponseEntity<ResponseDTO> response = restTemplate.postForEntity(url, request, ResponseDTO.class);
        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(response.getBody().getCode()).isEqualTo(200);
    }
}
```

### 2. æ€§èƒ½æµ‹è¯•

#### å‹åŠ›æµ‹è¯•
```java
@Test
void testConcurrentAccessVerify() {
    // å¹¶å‘æƒé™éªŒè¯æµ‹è¯•
    int threadCount = 100;
    int requestCount = 1000;

    ExecutorService executor = Executors.newFixedThreadPool(threadCount);
    CountDownLatch latch = new CountDownLatch(requestCount);

    for (int i = 0; i < requestCount; i++) {
        executor.submit(() -> {
            try {
                AccessVerifyRequest request = new AccessVerifyRequest();
                request.setUserId(ThreadLocalRandom.current().nextLong(1, 10000));
                request.setDeviceId(1001L);
                request.setVerifyMethod("card");

                AccessVerifyResponse response = accessService.verifyAccess(request);
                assertNotNull(response);
            } finally {
                latch.countDown();
            }
        });
    }

    try {
        latch.await(30, TimeUnit.SECONDS);
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
}
```

#### æ€§èƒ½æŒ‡æ ‡
- **å“åº”æ—¶é—´**: 95%çš„è¯·æ±‚å“åº”æ—¶é—´ < 500ms
- **ååé‡**: æ”¯æŒ 1000+ QPS çš„å¹¶å‘è¯·æ±‚
- **å¹¶å‘ç”¨æˆ·**: æ”¯æŒ 1000+ å¹¶å‘ç”¨æˆ·åŒæ—¶è®¿é—®
- **ç³»ç»Ÿèµ„æº**: CPUä½¿ç”¨ç‡ < 80%ï¼Œå†…å­˜ä½¿ç”¨ç‡ < 85%

### 3. å®‰å…¨æµ‹è¯•

#### æ¸—é€æµ‹è¯•
- **SQLæ³¨å…¥æµ‹è¯•**: éªŒè¯SQLæ³¨å…¥é˜²æŠ¤æªæ–½
- **XSSæ”»å‡»æµ‹è¯•**: éªŒè¯XSSæ”»å‡»é˜²æŠ¤æªæ–½
- **CSRFæ”»å‡»æµ‹è¯•**: éªŒè¯CSRFæ”»å‡»é˜²æŠ¤æªæ–½
- **æƒé™ç»•è¿‡æµ‹è¯•**: éªŒè¯æƒé™æ§åˆ¶æªæ–½

#### å®‰å…¨æ‰«æ
- **ä»£ç å®‰å…¨æ‰«æ**: ä½¿ç”¨SonarQubeè¿›è¡Œä»£ç å®‰å…¨æ‰«æ
- **ä¾èµ–æ¼æ´æ‰«æ**: ä½¿ç”¨OWASP Dependency Checkæ‰«æä¾èµ–æ¼æ´
- **é…ç½®å®‰å…¨æ£€æŸ¥**: æ£€æŸ¥ç³»ç»Ÿé…ç½®çš„å®‰å…¨æ€§
- **ç½‘ç»œå®‰å…¨æµ‹è¯•**: ç½‘ç»œå±‚é¢çš„å®‰å…¨æµ‹è¯•

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### è®¾è®¡æ–‡æ¡£
- [02-é—¨ç¦æ¨¡å—ä¸šåŠ¡æµç¨‹è®¾è®¡.md](./02-é—¨ç¦æ¨¡å—ä¸šåŠ¡æµç¨‹è®¾è®¡.md)
- [03-é—¨ç¦æ¨¡å—æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md](./03-é—¨ç¦æ¨¡å—æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md)
- [04-é—¨ç¦æ¨¡å—å‰ç«¯ç•Œé¢è®¾è®¡æ–‡æ¡£.md](./04-é—¨ç¦æ¨¡å—å‰ç«¯ç•Œé¢è®¾è®¡æ–‡æ¡£.md)
- [05-é—¨ç¦æ¨¡å—APIæ¥å£è®¾è®¡æ–‡æ¡£.md](./05-é—¨ç¦æ¨¡å—APIæ¥å£è®¾è®¡æ–‡æ¡£.md)

### æŠ€æœ¯æ–‡æ¡£
- [06-é—¨ç¦æ¨¡å—ç§»åŠ¨ç«¯è®¾è®¡æ–‡æ¡£.md](./06-é—¨ç¦æ¨¡å—ç§»åŠ¨ç«¯è®¾è®¡æ–‡æ¡£.md)
- [07-é—¨ç¦æ¨¡å—å®‰å…¨è®¾è®¡æ–‡æ¡£.md](./07-é—¨ç¦æ¨¡å—å®‰å…¨è®¾è®¡æ–‡æ¡£.md)
- [08-é—¨ç¦æ¨¡å—æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£.md](./08-é—¨ç¦æ¨¡å—æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£.md)
- [09-é—¨ç¦æ¨¡å—éƒ¨ç½²è¿ç»´æ–‡æ¡£.md](./09-é—¨ç¦æ¨¡å—éƒ¨ç½²è¿ç»´æ–‡æ¡£.md)

### è§„èŒƒæ–‡æ¡£
- [10-é—¨ç¦æ¨¡å—å¼€å‘è§„èŒƒ.md](./10-é—¨ç¦æ¨¡å—å¼€å‘è§„èŒƒ.md)
- [11-é—¨ç¦æ¨¡å—æµ‹è¯•è§„èŒƒ.md](./11-é—¨ç¦æ¨¡å—æµ‹è¯•è§„èŒƒ.md)
- [12-é—¨ç¦æ¨¡å—è¿ç»´æ‰‹å†Œ.md](./12-é—¨ç¦æ¨¡å—è¿ç»´æ‰‹å†Œ.md)

---

## ğŸš€ ç‰ˆæœ¬è§„åˆ’

### v2.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… å®Œæˆå¾®æœåŠ¡æ¶æ„é‡æ„
- âœ… å®ç°å¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ«
- âœ… æ”¯æŒå®æ—¶ç›‘æ§å‘Šè­¦
- âœ… å®Œå–„æƒé™ç®¡ç†ä½“ç³»
- âœ… ä¼˜åŒ–æ€§èƒ½å’Œç¨³å®šæ€§

### v2.1.0 (è®¡åˆ’ä¸­)
- ğŸ¯ AIæ™ºèƒ½åˆ†æèƒ½åŠ›å¢å¼º
- ğŸ¯ ç§»åŠ¨ç«¯åŠŸèƒ½å®Œå–„
- ğŸ¯ ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆæ‰©å±•
- ğŸ¯ é«˜çº§å®‰å…¨åŠŸèƒ½å¼€å‘
- ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### v2.2.0 (è§„åˆ’ä¸­)
- ğŸ¯ è¾¹ç¼˜è®¡ç®—æ”¯æŒ
- ğŸ¯ 5Gç½‘ç»œé€‚é…
- ğŸ¯ äº‘åŸç”Ÿæ¶æ„å‡çº§
- ğŸ¯ å›½é™…åŒ–æ”¯æŒ
- ğŸ¯ æ’ä»¶åŒ–æ¶æ„

---

**ğŸ“ æŠ€æœ¯æ”¯æŒ**: å¦‚æœ‰æŠ€æœ¯é—®é¢˜ï¼Œè¯·è”ç³»IOE-DREAMæ¶æ„å›¢é˜Ÿæˆ–æŸ¥é˜…ç›¸å…³æŠ€æœ¯æ–‡æ¡£ã€‚

---

*æœ¬æ–‡æ¡£éµå¾ªIOE-DREAMé¡¹ç›®è§„èŒƒï¼Œç¡®ä¿æ¶æ„è®¾è®¡çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚*