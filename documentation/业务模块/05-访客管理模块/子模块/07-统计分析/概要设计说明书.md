# 统计分析子模块 - 概要设计说明书

> **版本**: v1.0.0  
> **更新日期**: 2025-01-30

## 1. 系统架构

### 1.1 模块定位

统计分析模块提供访客数据的多维度分析和报表生成能力。

### 1.2 架构图

```
┌─────────────────────────────────────────────────┐
│                  统计分析模块                     │
├─────────────────────────────────────────────────┤
│  Controller层                                    │
│  └── StatisticsController                       │
├─────────────────────────────────────────────────┤
│  Service层                                       │
│  └── StatisticsService                          │
├─────────────────────────────────────────────────┤
│  Manager层                                       │
│  ├── StatisticsManager                          │
│  ├── ReportGenerator                            │
│  └── DataAggregator                             │
├─────────────────────────────────────────────────┤
│  DAO层                                          │
│  └── StatisticsDao                              │
└─────────────────────────────────────────────────┘
```

## 2. 模块设计

### 2.1 核心模块

| 模块 | 职责 |
|------|------|
| 数据聚合 | 定时聚合原始数据 |
| 统计查询 | 多维度统计查询 |
| 报表生成 | 多格式报表导出 |
| 趋势分析 | 访客趋势分析 |

### 2.2 模块依赖

- 预约管理：预约数据
- 登记管理：登记数据
- 通行记录：通行数据

## 3. 技术选型

| 技术 | 选型 | 说明 |
|------|------|------|
| 报表引擎 | EasyExcel | Excel导出 |
| 图表 | ECharts | 前端图表 |
| 定时任务 | XXL-JOB | 数据聚合 |

## 4. 接口概览

| 接口 | 方法 | 说明 |
|------|------|------|
| /stats/daily | GET | 日统计 |
| /stats/monthly | GET | 月统计 |
| /stats/trend | GET | 趋势数据 |
| /stats/export | POST | 导出报表 |
| /stats/dashboard | GET | 仪表盘数据 |

