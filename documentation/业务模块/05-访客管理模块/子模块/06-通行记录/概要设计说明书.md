# 通行记录子模块 - 概要设计说明书

> **版本**: v1.0.0  
> **更新日期**: 2025-01-30

## 1. 系统架构

### 1.1 模块定位

通行记录模块与门禁系统联动，记录访客在园区内的完整通行轨迹。

### 1.2 架构图

```
┌─────────────────────────────────────────────────┐
│                  通行记录模块                     │
├─────────────────────────────────────────────────┤
│  Controller层                                    │
│  └── AccessRecordController                     │
├─────────────────────────────────────────────────┤
│  Service层                                       │
│  └── AccessRecordService                        │
├─────────────────────────────────────────────────┤
│  Manager层                                       │
│  ├── AccessRecordManager                        │
│  ├── PermissionCheckManager                     │
│  └── TrackAnalyzeManager                        │
├─────────────────────────────────────────────────┤
│  DAO层                                          │
│  └── AccessRecordDao                            │
└─────────────────────────────────────────────────┘
```

## 2. 模块设计

### 2.1 核心模块

| 模块 | 职责 |
|------|------|
| 通行记录 | 记录每次通行事件 |
| 权限验证 | 验证区域通行权限 |
| 轨迹分析 | 访客轨迹追踪 |
| 异常告警 | 越权通行告警 |

### 2.2 模块依赖

- 门禁系统：接收通行事件
- 登记管理：获取访客权限
- 区域管理：区域权限配置

## 3. 接口概览

| 接口 | 方法 | 说明 |
|------|------|------|
| /access/record | POST | 记录通行 |
| /access/track | GET | 访客轨迹 |
| /access/stats | GET | 通行统计 |
| /access/abnormal | GET | 异常记录 |

