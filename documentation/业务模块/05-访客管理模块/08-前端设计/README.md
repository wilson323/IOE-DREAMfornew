# è®¿å®¢ç®¡ç†æ¨¡å— - ç§»åŠ¨ç«¯å‰ç«¯è®¾è®¡

> **ç‰ˆæœ¬**: v2.0.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-01-30  
> **é€‚ç”¨èŒƒå›´**: IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å° - è®¿å®¢å¾®æœåŠ¡ç§»åŠ¨ç«¯

---

## 1. ç§»åŠ¨ç«¯è®¾è®¡æ¦‚è¿°

### 1.1 è®¾è®¡å®šä½

åŸºäºç°æœ‰ç§»åŠ¨ç«¯ä»£ç åˆ†æï¼ˆ`smart-app/src/pages/visitor/`ï¼‰ï¼Œè®¿å®¢ç®¡ç†æ¨¡å—çš„ç§»åŠ¨ç«¯è®¾è®¡éµå¾ª IOE-DREAM æ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°çš„ç»Ÿä¸€è§„èŒƒï¼Œé¢å‘è®¿å®¢å’Œä¼ä¸šå‘˜å·¥æä¾›ä¾¿æ·çš„è®¿å®¢é¢„çº¦ä¸ç­¾åˆ°æœåŠ¡ã€‚

### 1.2 è®¾è®¡åŸåˆ™

| åŸåˆ™ | è¯´æ˜ | å®ç°æ–¹å¼ |
|------|------|---------|
| **åœºæ™¯é©±åŠ¨** | ç§»åŠ¨ç«¯èšç„¦è®¿å®¢é«˜é¢‘ä½¿ç”¨åœºæ™¯ | é¢„çº¦ã€ç­¾åˆ°ã€äºŒç»´ç ä¸ºæ ¸å¿ƒåŠŸèƒ½ |
| **ç®€æ´é«˜æ•ˆ** | ç•Œé¢ç®€æ´ï¼Œæ“ä½œæµç¨‹æœ€çŸ­åŒ– | 3æ­¥å®Œæˆé¢„çº¦ |
| **ç¦»çº¿æ”¯æŒ** | å…³é”®åŠŸèƒ½æ”¯æŒç¦»çº¿æ“ä½œ | äºŒç»´ç æœ¬åœ°ç¼“å­˜ |
| **å®‰å…¨ä¼˜å…ˆ** | æ•æ„Ÿæ“ä½œéœ€äºŒæ¬¡ç¡®è®¤ | èº«ä»½éªŒè¯+æƒé™æ§åˆ¶ |
| **åŒç«¯ä½“éªŒ** | è®¿å®¢ç«¯+å‘˜å·¥ç«¯å·®å¼‚åŒ–è®¾è®¡ | è§’è‰²åŒºåˆ†åŠŸèƒ½å…¥å£ |

### 1.3 ç”¨æˆ·è§’è‰²

| è§’è‰² | åŠŸèƒ½èŒƒå›´ | ä½¿ç”¨åœºæ™¯ |
|------|---------|---------|
| å¤–éƒ¨è®¿å®¢ | é¢„çº¦ç”³è¯·ã€äºŒç»´ç å±•ç¤ºã€ç­¾åˆ°ç­¾é€€ | æ¥è®¿æ—¶ä½¿ç”¨ |
| ä¼ä¸šå‘˜å·¥ | é‚€è¯·è®¿å®¢ã€å®¡æ‰¹é¢„çº¦ã€æŸ¥çœ‹æ¥è®¿è®°å½• | æ¥å¾…è®¿å®¢ |
| å‰å°äººå‘˜ | æ‰«ç ç­¾åˆ°ã€è®¿å®¢ç™»è®°ã€ä¸´æ—¶é€šè¡Œè¯ | å‰å°æ¥å¾… |
| å®‰ä¿äººå‘˜ | æ‰«ç éªŒè¯ã€é€šè¡Œè®°å½•æŸ¥è¯¢ | é—¨ç¦ç®¡æ§ |

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | é€‰å‹ç†ç”± |
|------|------|------|---------|
| Vue 3.x | 3.4+ | æ ¸å¿ƒæ¡†æ¶ | Composition APIï¼Œæ€§èƒ½ä¼˜å¼‚ |
| Uni-app | 3.0+ | è·¨å¹³å°å¼€å‘ | ä¸€å¥—ä»£ç å¤šç«¯è¿è¡Œ |
| Pinia | 2.x | çŠ¶æ€ç®¡ç† | Vue3å®˜æ–¹æ¨èï¼Œè½»é‡é«˜æ•ˆ |
| uni-ui | 1.5+ | UIç»„ä»¶åº“ | è·¨å¹³å°å…¼å®¹ï¼Œç»„ä»¶ä¸°å¯Œ |
| dayjs | 1.11+ | æ—¥æœŸå¤„ç† | è½»é‡çº§ï¼ŒAPIå‹å¥½ |

### 2.2 æ¶æ„åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è§†å›¾å±‚ (Views)              â”‚
â”‚  pages/visitor/*.vue                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 ç»„ä»¶å±‚ (Components)           â”‚
â”‚  components/visitor/*.vue                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                çŠ¶æ€ç®¡ç†å±‚ (Store)             â”‚
â”‚  store/modules/visitor.js                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 æœåŠ¡å±‚ (API)                  â”‚
â”‚  api/business/visitor/visitor-api.js         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                å·¥å…·å±‚ (Utils)                 â”‚
â”‚  utils/qrcode.js, utils/ocr.js               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. ç§»åŠ¨ç«¯åŠŸèƒ½èŒƒå›´

### 3.1 ç§»åŠ¨ç«¯å®ç°åŠŸèƒ½ï¼ˆåŸºäºä¸šåŠ¡åœºæ™¯ï¼‰

| åŠŸèƒ½æ¨¡å— | ä¼˜å…ˆçº§ | ä¸šåŠ¡åœºæ™¯è¯´æ˜ | æŠ€æœ¯è¦ç‚¹ |
|---------|-------|-------------|---------|
| è®¿å®¢é¦–é¡µ | P0 | è®¿å®¢å…¥å£ï¼Œç»Ÿè®¡æ¦‚è§ˆ | è§’è‰²åŒºåˆ†å±•ç¤º |
| æˆ‘çš„é¢„çº¦ | P0 | æŸ¥çœ‹/å–æ¶ˆé¢„çº¦è®°å½• | åˆ—è¡¨+ç­›é€‰ |
| åˆ›å»ºé¢„çº¦ | P0 | è®¿å®¢è‡ªåŠ©é¢„çº¦ | è¡¨å•éªŒè¯+OCR |
| æ‰«ç ç­¾åˆ° | P0 | å‰å°å¿«é€Ÿç­¾åˆ° | ç›¸æœºæ‰«ç  |
| è®¿å®¢äºŒç»´ç  | P0 | é€šè¡Œå‡­è¯å±•ç¤º | åŠ¨æ€ç +ç¦»çº¿ç¼“å­˜ |
| è®¿é—®è®°å½• | P1 | å†å²è®¿é—®æŸ¥è¯¢ | åˆ†é¡µåŠ è½½ |
| èº«ä»½éªŒè¯ | P0 | èº«ä»½è¯+æ‰‹æœºå·éªŒè¯ | OCRè¯†åˆ« |
| é¢„çº¦è¯¦æƒ… | P1 | é¢„çº¦ä¿¡æ¯æŸ¥çœ‹ | çŠ¶æ€æµè½¬å±•ç¤º |
| é‚€è¯·è®¿å®¢ | P1 | å‘˜å·¥é‚€è¯·å¤–éƒ¨è®¿å®¢ | åˆ†äº«é“¾æ¥/äºŒç»´ç  |
| å®¡æ‰¹æé†’ | P2 | å¾…å®¡æ‰¹é¢„çº¦æé†’ | æ¶ˆæ¯æ¨é€ |

### 3.2 ä»…PCç«¯å®ç°åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | åŸå› è¯´æ˜ | æ›¿ä»£æ–¹æ¡ˆ |
|---------|---------|---------|
| è®¿å®¢å®¡æ‰¹ | éœ€è¦å¤æ‚å®¡æ‰¹æµç¨‹ï¼Œé€‚åˆPCæ“ä½œ | ç§»åŠ¨ç«¯æé†’+è·³è½¬ |
| é»‘åå•ç®¡ç† | ç®¡ç†ç±»åŠŸèƒ½ï¼Œæ“ä½œé¢‘æ¬¡ä½ | æ—  |
| ç»Ÿè®¡æŠ¥è¡¨ | å›¾è¡¨å±•ç¤ºï¼ŒPCä½“éªŒæ›´ä½³ | ç§»åŠ¨ç«¯ç®€åŒ–ç»Ÿè®¡ |
| ç³»ç»Ÿé…ç½® | ç®¡ç†å‘˜ä¸“ç”¨ï¼Œå®‰å…¨è€ƒè™‘ | æ—  |
| æ‰¹é‡å¯¼å…¥ | æ–‡ä»¶æ“ä½œï¼ŒPCæ›´ä¾¿æ· | æ—  |
| ç‰©æµç®¡ç† | æ¶‰åŠå¤šè¡¨å•ï¼ŒPCæ•ˆç‡é«˜ | ç§»åŠ¨ç«¯æŸ¥çœ‹çŠ¶æ€ |

## 4. æ ¸å¿ƒé¡µé¢è®¾è®¡

### 4.1 è®¿å®¢é¦–é¡µ (`visitor/index.vue`)

**é¡µé¢ç»“æ„ï¼ˆè®¿å®¢è§†è§’ï¼‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         çŠ¶æ€æ  + å¯¼èˆªæ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     è®¿å®¢ç»Ÿè®¡å¡ç‰‡         â”‚   â”‚
â”‚  â”‚  ä»Šæ—¥é¢„çº¦ | å¾…ç­¾åˆ° | å·²å®Œæˆâ”‚   â”‚
â”‚  â”‚    3    |   1    |   2   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¿«æ·æ“ä½œåŒºåŸŸ                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”  â”‚
â”‚  â”‚æˆ‘çš„ â”‚ â”‚æ‰«ç  â”‚ â”‚è®¿å®¢ â”‚ â”‚è®¿é—® â”‚  â”‚
â”‚  â”‚é¢„çº¦ â”‚ â”‚ç­¾åˆ° â”‚ â”‚äºŒç»´ç â”‚ â”‚è®°å½• â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿‘æœŸé¢„çº¦åˆ—è¡¨                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¼ ä¸‰    [å¾…å®¡æ‰¹]         â”‚   â”‚
â”‚  â”‚ æ‹œè®¿å¯¹è±¡: æå››           â”‚   â”‚
â”‚  â”‚ é¢„çº¦æ—¶é—´: 01-30 14:00    â”‚   â”‚
â”‚  â”‚ æ¥è®¿äº‹ç”±: å•†åŠ¡æ´½è°ˆ        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç‹äº”    [å·²æ‰¹å‡†]         â”‚   â”‚
â”‚  â”‚ æ‹œè®¿å¯¹è±¡: èµµå…­           â”‚   â”‚
â”‚  â”‚ é¢„çº¦æ—¶é—´: 01-31 10:00    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [+ åˆ›å»ºæ–°é¢„çº¦]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¡µé¢ç»“æ„ï¼ˆå‘˜å·¥è§†è§’ï¼‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         çŠ¶æ€æ  + å¯¼èˆªæ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     æ¥è®¿ç»Ÿè®¡å¡ç‰‡         â”‚   â”‚
â”‚  â”‚  ä»Šæ—¥æ¥è®¿ | å¾…å®¡æ‰¹ | å·²æ¥å¾…â”‚   â”‚
â”‚  â”‚    5    |   2    |   3   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¿«æ·æ“ä½œåŒºåŸŸ                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”  â”‚
â”‚  â”‚é‚€è¯· â”‚ â”‚å¾…å®¡æ‰¹â”‚ â”‚æ‰«ç  â”‚ â”‚æ¥è®¿ â”‚  â”‚
â”‚  â”‚è®¿å®¢ â”‚ â”‚    â”‚ â”‚éªŒè¯ â”‚ â”‚è®°å½• â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä»Šæ—¥æ¥è®¿åˆ—è¡¨                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¼ ä¸‰    [å·²ç­¾åˆ°]         â”‚   â”‚
â”‚  â”‚ é¢„çº¦æ—¶é—´: 14:00-16:00    â”‚   â”‚
â”‚  â”‚ æ¥è®¿äº‹ç”±: å•†åŠ¡æ´½è°ˆ        â”‚   â”‚
â”‚  â”‚ [æŸ¥çœ‹è¯¦æƒ…]  [ç¡®è®¤æ¥å¾…]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½è¯¦è¿°**:

| åŠŸèƒ½åŒºåŸŸ | åŠŸèƒ½ç‚¹ | äº¤äº’è¯´æ˜ |
|---------|-------|---------|
| ç»Ÿè®¡å¡ç‰‡ | ä»Šæ—¥é¢„çº¦/æ¥è®¿ç»Ÿè®¡ | å®æ—¶åˆ·æ–°ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… |
| å¿«æ·æ“ä½œ | 4ä¸ªæ ¸å¿ƒåŠŸèƒ½å…¥å£ | æ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒå…¥å£ |
| é¢„çº¦åˆ—è¡¨ | è¿‘æœŸé¢„çº¦/æ¥è®¿è®°å½• | ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼Œæ”¯æŒæ“ä½œ |
| åˆ›å»ºé¢„çº¦ | åº•éƒ¨æ‚¬æµ®æŒ‰é’® | è®¿å®¢è§’è‰²æ˜¾ç¤º |

### 4.2 æˆ‘çš„é¢„çº¦é¡µé¢ (`visitor/appointment.vue`)

**é¡µé¢ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å¯¼èˆªæ ï¼šæˆ‘çš„é¢„çº¦         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ‡ç­¾é¡µï¼šå…¨éƒ¨ | å¾…å®¡æ‰¹ | å·²æ‰¹å‡†   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¢„çº¦åˆ—è¡¨                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è®¿å®¢å§“å: å¼ ä¸‰   [å¾…å®¡æ‰¹]  â”‚   â”‚
â”‚  â”‚ è¢«è®¿äººï¼šæå››               â”‚   â”‚
â”‚  â”‚ é¢„çº¦æ—¶é—´ï¼š01-30 14:00     â”‚   â”‚
â”‚  â”‚ æ¥è®¿äº‹ç”±ï¼šå•†åŠ¡æ´½è°ˆ          â”‚   â”‚
â”‚  â”‚ éšè¡Œäººæ•°ï¼š2äºº              â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ [å–æ¶ˆé¢„çº¦]   [æŸ¥çœ‹è¯¦æƒ…]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç©ºçŠ¶æ€æç¤ºï¼ˆæ— æ•°æ®æ—¶ï¼‰          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      ğŸ“‹                 â”‚   â”‚
â”‚  â”‚   æš‚æ— é¢„çº¦è®°å½•            â”‚   â”‚
â”‚  â”‚   [ç«‹å³é¢„çº¦]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            [+] åˆ›å»ºé¢„çº¦          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€æ ‡ç­¾è®¾è®¡**:

| çŠ¶æ€ | é¢œè‰² | è¯´æ˜ |
|------|------|------|
| å¾…å®¡æ‰¹ | æ©™è‰² #faad14 | ç­‰å¾…è¢«è®¿äººå®¡æ‰¹ |
| å·²æ‰¹å‡† | ç»¿è‰² #52c41a | å®¡æ‰¹é€šè¿‡ï¼Œå¯æ¥è®¿ |
| å·²æ‹’ç» | çº¢è‰² #ff4d4f | å®¡æ‰¹æ‹’ç» |
| å·²ç­¾åˆ° | è“è‰² #1890ff | å·²å®Œæˆç­¾åˆ° |
| å·²ç­¾é€€ | ç°è‰² #8c8c8c | å·²å®Œæˆç­¾é€€ |
| å·²å–æ¶ˆ | ç°è‰² #bfbfbf | é¢„çº¦å·²å–æ¶ˆ |
| å·²è¿‡æœŸ | ç°è‰² #d9d9d9 | é¢„çº¦å·²è¿‡æœŸ |

### 4.3 åˆ›å»ºé¢„çº¦é¡µé¢ (`visitor/create-appointment.vue`)

**è¡¨å•å­—æ®µè®¾è®¡**:

| å­—æ®µ | ç±»å‹ | å¿…å¡« | éªŒè¯è§„åˆ™ |
|------|------|------|---------|
| è®¿å®¢å§“å | æ–‡æœ¬è¾“å…¥ | âœ… | 2-20å­—ç¬¦ï¼Œä¸­è‹±æ–‡ |
| èº«ä»½è¯å· | æ–‡æœ¬è¾“å…¥ | âœ… | 18ä½èº«ä»½è¯å·éªŒè¯ |
| æ‰‹æœºå·ç  | æ–‡æœ¬è¾“å…¥ | âœ… | 11ä½æ‰‹æœºå·éªŒè¯ |
| æ‰€å±å…¬å¸ | æ–‡æœ¬è¾“å…¥ | âŒ | æœ€é•¿50å­—ç¬¦ |
| è¢«è®¿äºº | æœç´¢é€‰æ‹© | âœ… | ä»å‘˜å·¥åˆ—è¡¨é€‰æ‹© |
| æ¥è®¿äº‹ç”± | ä¸‹æ‹‰é€‰æ‹© | âœ… | å•†åŠ¡æ´½è°ˆ/é¢è¯•/å‚è§‚ç­‰ |
| é¢„çº¦æ—¶é—´ | æ—¥æœŸæ—¶é—´é€‰æ‹© | âœ… | ä¸æ—©äºå½“å‰æ—¶é—´ |
| é¢„è®¡ç¦»å¼€æ—¶é—´ | æ—¥æœŸæ—¶é—´é€‰æ‹© | âœ… | ä¸æ—©äºé¢„çº¦æ—¶é—´ |
| éšè¡Œäººæ•° | æ•°å­—è¾“å…¥ | âŒ | 0-10äºº |
| æ˜¯å¦æºå¸¦è½¦è¾† | å¼€å…³ | âŒ | æ˜¯/å¦ |
| è½¦ç‰Œå·ç  | æ–‡æœ¬è¾“å…¥ | æºå¸¦è½¦è¾†æ—¶å¿…å¡« | è½¦ç‰Œæ ¼å¼éªŒè¯ |
| å¤‡æ³¨è¯´æ˜ | æ–‡æœ¬åŸŸ | âŒ | æœ€é•¿200å­—ç¬¦ |

**OCRèº«ä»½è¯è¯†åˆ«**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  èº«ä»½è¯è¯†åˆ«                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    [æ‹ç…§è¯†åˆ«èº«ä»½è¯]       â”‚   â”‚
â”‚  â”‚    æˆ–æ‰‹åŠ¨è¾“å…¥ä¿¡æ¯         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  è¯†åˆ«ç»“æœ:                      â”‚
â”‚  å§“å: å¼ ä¸‰                     â”‚
â”‚  èº«ä»½è¯å·: 110***********1234   â”‚
â”‚  [ç¡®è®¤ä½¿ç”¨]  [é‡æ–°è¯†åˆ«]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 æ‰«ç ç­¾åˆ°é¡µé¢ (`visitor/checkin.vue`)

**é¡µé¢ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å¯¼èˆªæ ï¼šè®¿å®¢ç­¾åˆ°         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‰«ç åŒºåŸŸ                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         ğŸ“±              â”‚   â”‚
â”‚  â”‚   è¯·æ‰«æè®¿å®¢äºŒç»´ç         â”‚   â”‚
â”‚  â”‚      [å¼€å§‹æ‰«ç ]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”€â”€â”€ æˆ– â”€â”€â”€           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [äºŒç»´ç å†…å®¹è¾“å…¥æ¡†] [éªŒè¯] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  èº«ä»½è¯éªŒè¯åŒºåŸŸ                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ èº«ä»½è¯å·ï¼š[____________] â”‚   â”‚
â”‚  â”‚ æ‰‹æœºå·ï¼š  [____________] â”‚   â”‚
â”‚  â”‚ [èº«ä»½è¯éªŒè¯]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  éªŒè¯ç»“æœå±•ç¤º                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… éªŒè¯é€šè¿‡               â”‚   â”‚
â”‚  â”‚ è®¿å®¢: å¼ ä¸‰                â”‚   â”‚
â”‚  â”‚ è¢«è®¿äºº: æå››              â”‚   â”‚
â”‚  â”‚ é¢„çº¦æ—¶é—´: 14:00-16:00     â”‚   â”‚
â”‚  â”‚ [ç¡®è®¤ç­¾åˆ°]                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç­¾åˆ°æµç¨‹**:
```
æ‰«ç /è¾“å…¥ â†’ éªŒè¯é¢„çº¦ä¿¡æ¯ â†’ èº«ä»½æ ¸éªŒ â†’ ç¡®è®¤ç­¾åˆ° â†’ ç”Ÿæˆé€šè¡Œè¯
```

### 4.5 è®¿å®¢äºŒç»´ç é¡µé¢ (`visitor/qrcode.vue`)

**é¡µé¢ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å¯¼èˆªæ ï¼šè®¿å®¢äºŒç»´ç        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  äºŒç»´ç å±•ç¤ºåŒºåŸŸ                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          â”‚   â”‚
â”‚  â”‚      [è®¿å®¢äºŒç»´ç ]         â”‚   â”‚
â”‚  â”‚                          â”‚   â”‚
â”‚  â”‚   æœ‰æ•ˆæœŸ: 01-30 16:00    â”‚   â”‚
â”‚  â”‚   å‰©ä½™: 02:30:00         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¢„çº¦ä¿¡æ¯                        â”‚
â”‚  è®¿å®¢å§“å: å¼ ä¸‰                  â”‚
â”‚  è¢«è®¿äºº: æå››                    â”‚
â”‚  æ¥è®¿äº‹ç”±: å•†åŠ¡æ´½è°ˆ              â”‚
â”‚  é¢„çº¦æ—¶é—´: 01-30 14:00-16:00    â”‚
â”‚  è®¿é—®åŒºåŸŸ: Aæ ‹3æ¥¼                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¸©é¦¨æç¤º                        â”‚
â”‚  1. è¯·åœ¨æœ‰æ•ˆæœŸå†…å®Œæˆç­¾åˆ°         â”‚
â”‚  2. ç­¾åˆ°æ—¶è¯·å‡ºç¤ºæ­¤äºŒç»´ç          â”‚
â”‚  3. å¦‚éœ€å»¶æœŸè¯·è”ç³»è¢«è®¿äºº         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [åˆ·æ–°äºŒç»´ç ]  [ä¿å­˜åˆ°ç›¸å†Œ]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äºŒç»´ç ç‰¹æ€§**:

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| åŠ¨æ€ç  | æ¯5åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–° |
| ç¦»çº¿ç¼“å­˜ | æ”¯æŒæ— ç½‘ç»œå±•ç¤º |
| æœ‰æ•ˆæœŸ | é¢„çº¦æ—¶é—´å‰åå„1å°æ—¶ |
| é˜²ä¼ªè®¾è®¡ | åŒ…å«æ—¶é—´æˆ³+ç­¾å |

## 5. APIæ¥å£è®¾è®¡

### 5.1 æ¥å£è§„èŒƒ

```
åŸºç¡€è·¯å¾„: /api/v1/mobile/visitor/
è®¤è¯æ–¹å¼: Bearer Token (Sa-Token)
æ•°æ®æ ¼å¼: application/json
å­—ç¬¦ç¼–ç : UTF-8
```

### 5.2 æ ¸å¿ƒæ¥å£åˆ—è¡¨

| æ¨¡å— | æ¥å£ | æ–¹æ³• | è¯´æ˜ | è¯·æ±‚å‚æ•° |
|------|------|------|------|---------|
| **é¢„çº¦ç®¡ç†** | `/appointment` | POST | åˆ›å»ºé¢„çº¦ | visitorName, idCard, phone, visiteeId, visitTime, reason |
| | `/appointment/{id}/cancel` | PUT | å–æ¶ˆé¢„çº¦ | - |
| | `/my-appointments` | GET | æˆ‘çš„é¢„çº¦åˆ—è¡¨ | status, pageNum, pageSize |
| | `/appointment/{id}` | GET | é¢„çº¦è¯¦æƒ… | - |
| | `/appointment/{id}/extend` | PUT | å»¶é•¿é¢„çº¦ | newEndTime |
| **ç­¾åˆ°ç­¾é€€** | `/checkin/qrcode` | POST | äºŒç»´ç ç­¾åˆ° | qrCode |
| | `/checkin/idcard` | POST | èº«ä»½è¯ç­¾åˆ° | idCard, phone |
| | `/checkout/{id}` | POST | è®¿å®¢ç­¾é€€ | - |
| | `/checkin/status/{id}` | GET | ç­¾åˆ°çŠ¶æ€ | - |
| **äºŒç»´ç ** | `/qrcode/generate/{appointmentId}` | GET | ç”ŸæˆäºŒç»´ç  | - |
| | `/qrcode/refresh/{appointmentId}` | POST | åˆ·æ–°äºŒç»´ç  | - |
| | `/qrcode/validate` | POST | éªŒè¯äºŒç»´ç  | qrCode |
| **ä½ç½®è¿½è¸ª** | `/location/{id}` | GET | è®¿å®¢ä½ç½® | - |
| | `/location/{id}` | PUT | æ›´æ–°ä½ç½® | latitude, longitude |
| **è½¦è¯ç®¡ç†** | `/vehicle-permit/{id}` | GET | è·å–è½¦è¯ | - |
| | `/vehicle-permit/{id}` | POST | ç”Ÿæˆè½¦è¯ | plateNumber, vehicleType |
| **è®°å½•æŸ¥è¯¢** | `/access-records/{id}` | GET | é€šè¡Œè®°å½• | - |
| | `/history/{visitorId}` | GET | è®¿é—®å†å² | pageNum, pageSize |
| **å·¥å…·æ¥å£** | `/validate` | POST | èº«ä»½éªŒè¯ | idCard, phone |
| | `/visitee/{userId}` | GET | è¢«è®¿äººä¿¡æ¯ | - |
| | `/visitee/search` | GET | æœç´¢è¢«è®¿äºº | keyword |
| | `/areas` | GET | è®¿é—®åŒºåŸŸåˆ—è¡¨ | - |
| | `/appointment-types` | GET | é¢„çº¦ç±»å‹ | - |
| **OCRè¯†åˆ«** | `/ocr/idcard` | POST | èº«ä»½è¯OCR | FormData(image) |
| **ç»Ÿè®¡** | `/statistics/{userId}` | GET | ä¸ªäººç»Ÿè®¡ | - |
| | `/statistics/today` | GET | ä»Šæ—¥ç»Ÿè®¡ | - |
| **é‚€è¯·** | `/invite/generate` | POST | ç”Ÿæˆé‚€è¯·é“¾æ¥ | visitorPhone, visitTime |
| | `/invite/validate` | GET | éªŒè¯é‚€è¯·é“¾æ¥ | inviteCode |

### 5.3 æ¥å£å“åº”æ ¼å¼

```json
{
  "code": 200,
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "appointmentId": "AP20250130001",
    "status": "APPROVED",
    "qrCode": "data:image/png;base64,..."
  },
  "timestamp": 1706601600000
}
```

### 5.4 é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ | å¤„ç†æ–¹å¼ |
|-------|------|---------|
| 4001 | é¢„çº¦ä¸å­˜åœ¨ | æç¤ºé¢„çº¦ä¿¡æ¯ |
| 4002 | é¢„çº¦å·²è¿‡æœŸ | æç¤ºé‡æ–°é¢„çº¦ |
| 4003 | é¢„çº¦æœªå®¡æ‰¹ | æç¤ºç­‰å¾…å®¡æ‰¹ |
| 4004 | è®¿å®¢å·²åœ¨é»‘åå• | æç¤ºè”ç³»ç®¡ç†å‘˜ |
| 4005 | è¢«è®¿äººä¸å­˜åœ¨ | æç¤ºé‡æ–°é€‰æ‹© |
| 4006 | é¢„çº¦æ—¶é—´å†²çª | æç¤ºå·²æœ‰é¢„çº¦ |
| 4007 | äºŒç»´ç å·²å¤±æ•ˆ | æç¤ºåˆ·æ–°äºŒç»´ç  |
| 5001 | OCRè¯†åˆ«å¤±è´¥ | æç¤ºæ‰‹åŠ¨è¾“å…¥ |

## 6. çŠ¶æ€ç®¡ç†

### 6.1 Pinia Store ç»“æ„

```javascript
// store/modules/visitor.js
import { defineStore } from 'pinia'
import visitorApi from '@/api/business/visitor/visitor-api'

export const useVisitorStore = defineStore('visitor', {
  state: () => ({
    // ç”¨æˆ·è§’è‰²
    userRole: 'visitor',  // visitor/employee/receptionist/security
    
    // é¢„çº¦åˆ—è¡¨
    appointments: [],
    
    // å½“å‰é¢„çº¦
    currentAppointment: null,
    
    // ç»Ÿè®¡æ•°æ®
    statistics: {
      todayCount: 0,
      pendingCount: 0,
      completedCount: 0,
      cancelledCount: 0
    },
    
    // è®¿å®¢ä¿¡æ¯
    visitorInfo: {
      name: '',
      idCard: '',
      phone: '',
      company: ''
    },
    
    // äºŒç»´ç æ•°æ®
    qrCodeData: {
      code: '',
      expireTime: null,
      isValid: true
    },
    
    // åŠ è½½çŠ¶æ€
    loading: {
      appointments: false,
      statistics: false,
      qrcode: false
    }
  }),
  
  getters: {
    // æ˜¯å¦æ˜¯è®¿å®¢
    isVisitor: (state) => state.userRole === 'visitor',
    
    // æ˜¯å¦æ˜¯å‘˜å·¥
    isEmployee: (state) => state.userRole === 'employee',
    
    // å¾…å®¡æ‰¹æ•°é‡
    pendingCount: (state) => 
      state.appointments.filter(a => a.status === 'PENDING').length,
    
    // äºŒç»´ç æ˜¯å¦æœ‰æ•ˆ
    isQrCodeValid: (state) => 
      state.qrCodeData.isValid && 
      state.qrCodeData.expireTime > Date.now()
  },
  
  actions: {
    // åŠ è½½é¢„çº¦åˆ—è¡¨
    async loadAppointments(params = {}) {
      this.loading.appointments = true
      try {
        const res = await visitorApi.appointmentApi.getMyAppointments(params)
        if (res.success) {
          this.appointments = res.data.list || res.data
        }
      } catch (error) {
        console.error('åŠ è½½é¢„çº¦åˆ—è¡¨å¤±è´¥:', error)
      } finally {
        this.loading.appointments = false
      }
    },
    
    // åˆ›å»ºé¢„çº¦
    async createAppointment(data) {
      try {
        const res = await visitorApi.appointmentApi.createAppointment(data)
        if (res.success) {
          await this.loadAppointments()
          return { success: true, data: res.data }
        }
        return { success: false, message: res.message }
      } catch (error) {
        return { success: false, message: 'åˆ›å»ºé¢„çº¦å¤±è´¥' }
      }
    },
    
    // å–æ¶ˆé¢„çº¦
    async cancelAppointment(id) {
      try {
        const res = await visitorApi.appointmentApi.cancelAppointment(id)
        if (res.success) {
          await this.loadAppointments()
          return { success: true }
        }
        return { success: false, message: res.message }
      } catch (error) {
        return { success: false, message: 'å–æ¶ˆé¢„çº¦å¤±è´¥' }
      }
    },
    
    // äºŒç»´ç ç­¾åˆ°
    async checkInByQrCode(qrCode) {
      try {
        const res = await visitorApi.checkinApi.qrcodeCheckin({ qrCode })
        if (res.success) {
          return { success: true, data: res.data }
        }
        return { success: false, message: res.message }
      } catch (error) {
        return { success: false, message: 'ç­¾åˆ°å¤±è´¥' }
      }
    },
    
    // ç”ŸæˆäºŒç»´ç 
    async generateQrCode(appointmentId) {
      this.loading.qrcode = true
      try {
        const res = await visitorApi.qrcodeApi.generate(appointmentId)
        if (res.success) {
          this.qrCodeData = {
            code: res.data.qrCode,
            expireTime: res.data.expireTime,
            isValid: true
          }
          // ç¼“å­˜åˆ°æœ¬åœ°
          uni.setStorageSync('VISITOR_QRCODE', this.qrCodeData)
          return { success: true }
        }
        return { success: false, message: res.message }
      } catch (error) {
        // å°è¯•ä½¿ç”¨ç¼“å­˜
        const cached = uni.getStorageSync('VISITOR_QRCODE')
        if (cached && cached.expireTime > Date.now()) {
          this.qrCodeData = cached
          return { success: true, cached: true }
        }
        return { success: false, message: 'ç”ŸæˆäºŒç»´ç å¤±è´¥' }
      } finally {
        this.loading.qrcode = false
      }
    },
    
    // åŠ è½½ç»Ÿè®¡æ•°æ®
    async loadStatistics() {
      this.loading.statistics = true
      try {
        const res = await visitorApi.statisticsApi.getTodayStatistics()
        if (res.success) {
          this.statistics = res.data
        }
      } catch (error) {
        console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error)
      } finally {
        this.loading.statistics = false
      }
    }
  }
})
```

## 7. äº¤äº’è§„èŒƒ

### 7.1 è¡¨å•æ“ä½œ

| åœºæ™¯ | äº¤äº’è®¾è®¡ | åé¦ˆæ–¹å¼ |
|------|---------|---------|
| è¡¨å•éªŒè¯ | å®æ—¶éªŒè¯+æäº¤éªŒè¯ | è¾“å…¥æ¡†ä¸‹æ–¹çº¢è‰²æç¤º |
| OCRè¯†åˆ« | æ‹ç…§â†’è¯†åˆ«â†’ç¡®è®¤ | Loading+ç»“æœé¢„è§ˆ |
| æäº¤é¢„çº¦ | æŒ‰é’®ç¦ç”¨+Loading | æ–‡å­—"æäº¤ä¸­..." |
| æäº¤æˆåŠŸ | Toastæç¤º+è·³è½¬ | æ˜¾ç¤º"é¢„çº¦æˆåŠŸ" |
| æäº¤å¤±è´¥ | Modalå¼¹çª— | æ˜¾ç¤ºå¤±è´¥åŸå›  |

### 7.2 åŠ è½½çŠ¶æ€

| åœºæ™¯ | åŠ è½½æ–¹å¼ | è¯´æ˜ |
|------|---------|------|
| åˆ—è¡¨é¦–æ¬¡åŠ è½½ | éª¨æ¶å± | å ä½æ˜¾ç¤º |
| åˆ—è¡¨åˆ·æ–° | ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”» | é¡¶éƒ¨æ˜¾ç¤º |
| äºŒç»´ç ç”Ÿæˆ | å ä½å›¾+Loading | å±…ä¸­æ˜¾ç¤º |
| æ‰«ç éªŒè¯ | å…¨å±Loading | é˜²æ­¢è¯¯æ“ä½œ |

### 7.3 é”™è¯¯å¤„ç†

| é”™è¯¯ç±»å‹ | å¤„ç†æ–¹å¼ | ç”¨æˆ·æç¤º |
|---------|---------|---------|
| ç½‘ç»œé”™è¯¯ | Toastæç¤º+é‡è¯• | æ˜¾ç¤º"ç½‘ç»œå¼‚å¸¸" |
| ä¸šåŠ¡é”™è¯¯ | Modalå¼¹çª— | æ˜¾ç¤ºå…·ä½“åŸå›  |
| è¡¨å•é”™è¯¯ | è¾“å…¥æ¡†æ ‡çº¢ | æ˜¾ç¤ºéªŒè¯é”™è¯¯ |
| æ‰«ç å¤±è´¥ | Toastæç¤º | æ˜¾ç¤º"äºŒç»´ç æ— æ•ˆ" |
| OCRå¤±è´¥ | Modalå¼¹çª— | æç¤ºæ‰‹åŠ¨è¾“å…¥ |

### 7.4 æˆåŠŸåé¦ˆ

| æ“ä½œ | åé¦ˆæ–¹å¼ | åç»­åŠ¨ä½œ |
|------|---------|---------|
| åˆ›å»ºé¢„çº¦ | Toast+è·³è½¬åˆ—è¡¨ | æ˜¾ç¤ºé¢„çº¦è¯¦æƒ… |
| å–æ¶ˆé¢„çº¦ | Toast+åˆ·æ–°åˆ—è¡¨ | çŠ¶æ€æ›´æ–° |
| ç­¾åˆ°æˆåŠŸ | Modal+é€šè¡Œè¯ | å±•ç¤ºé€šè¡Œä¿¡æ¯ |
| ç­¾é€€æˆåŠŸ | Toast | æ›´æ–°çŠ¶æ€ |

## 8. æ ·å¼è§„èŒƒ

### 8.1 é¢œè‰²ä½“ç³»

```scss
// ==================== è®¿å®¢æ¨¡å—ä¸“ç”¨é¢œè‰² ====================

// ä¸»é¢˜æ¸å˜è‰²
$visitor-gradient: linear-gradient(135deg, #1890ff 0%, #096dd9 100%);
$visitor-gradient-light: linear-gradient(135deg, #40a9ff 0%, #1890ff 100%);

// çŠ¶æ€é¢œè‰²
$status-pending: #faad14;     // å¾…å®¡æ‰¹
$status-approved: #52c41a;    // å·²æ‰¹å‡†
$status-rejected: #ff4d4f;    // å·²æ‹’ç»
$status-checkedin: #1890ff;   // å·²ç­¾åˆ°
$status-checkedout: #8c8c8c;  // å·²ç­¾é€€
$status-cancelled: #bfbfbf;   // å·²å–æ¶ˆ
$status-expired: #d9d9d9;     // å·²è¿‡æœŸ

// åŠŸèƒ½å›¾æ ‡è‰²
$icon-appointment: #1890ff;   // é¢„çº¦
$icon-checkin: #52c41a;       // ç­¾åˆ°
$icon-qrcode: #722ed1;        // äºŒç»´ç 
$icon-record: #fa8c16;        // è®°å½•
$icon-invite: #13c2c2;        // é‚€è¯·
$icon-approve: #eb2f96;       // å®¡æ‰¹

// æ–‡å­—é¢œè‰²
$text-primary: rgba(0, 0, 0, 0.85);
$text-secondary: rgba(0, 0, 0, 0.65);
$text-disabled: rgba(0, 0, 0, 0.25);
$text-white: #ffffff;
```

### 8.2 ç»„ä»¶æ ·å¼

```scss
// ç»Ÿè®¡å¡ç‰‡
.statistics-card {
  background: $visitor-gradient;
  border-radius: 24rpx;
  padding: 40rpx 30rpx;
  color: white;
  box-shadow: 0 8rpx 32rpx rgba(24, 144, 255, 0.4);
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20rpx;
    
    .stat-item {
      text-align: center;
      
      .stat-value {
        font-size: 48rpx;
        font-weight: bold;
        margin-bottom: 8rpx;
      }
      
      .stat-label {
        font-size: 24rpx;
        opacity: 0.9;
      }
    }
  }
}

// å¿«æ·æ“ä½œ
.quick-actions {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20rpx;
  
  .action-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 24rpx 12rpx;
    background-color: #fff;
    border-radius: 16rpx;
    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    
    &:active {
      transform: scale(0.95);
    }
    
    .action-icon {
      width: 80rpx;
      height: 80rpx;
      border-radius: 20rpx;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 12rpx;
      font-size: 36rpx;
      color: #fff;
      
      &.appointment { background: linear-gradient(135deg, #1890ff 0%, #096dd9 100%); }
      &.checkin { background: linear-gradient(135deg, #52c41a 0%, #389e0d 100%); }
      &.qrcode { background: linear-gradient(135deg, #722ed1 0%, #531dab 100%); }
      &.record { background: linear-gradient(135deg, #fa8c16 0%, #d46b08 100%); }
    }
    
    .action-text {
      font-size: 24rpx;
      color: #333;
      font-weight: 500;
    }
  }
}

// é¢„çº¦å¡ç‰‡
.appointment-card {
  background-color: #fff;
  border-radius: 16rpx;
  padding: 24rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
  
  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20rpx;
    
    .visitor-name {
      font-size: 32rpx;
      font-weight: 600;
      color: #333;
    }
    
    .status-tag {
      padding: 6rpx 16rpx;
      border-radius: 20rpx;
      font-size: 22rpx;
      font-weight: 500;
      
      &.pending { background-color: #fff7e6; color: #fa8c16; }
      &.approved { background-color: #f6ffed; color: #52c41a; }
      &.rejected { background-color: #fff1f0; color: #ff4d4f; }
      &.checkedin { background-color: #e6f7ff; color: #1890ff; }
    }
  }
  
  .card-body {
    .info-row {
      display: flex;
      margin-bottom: 12rpx;
      font-size: 26rpx;
      
      .info-label {
        color: #999;
        width: 160rpx;
      }
      
      .info-value {
        color: #333;
        flex: 1;
      }
    }
  }
  
  .card-footer {
    display: flex;
    justify-content: flex-end;
    gap: 20rpx;
    margin-top: 20rpx;
    padding-top: 20rpx;
    border-top: 1rpx solid #f0f0f0;
    
    .action-btn {
      padding: 12rpx 24rpx;
      border-radius: 8rpx;
      font-size: 26rpx;
      
      &.cancel {
        color: #999;
        background-color: #f5f5f5;
      }
      
      &.detail {
        color: #1890ff;
        background-color: #e6f7ff;
      }
    }
  }
}

// äºŒç»´ç å±•ç¤º
.qrcode-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40rpx;
  background-color: #fff;
  border-radius: 24rpx;
  box-shadow: 0 4rpx 24rpx rgba(0, 0, 0, 0.1);
  
  .qrcode-image {
    width: 400rpx;
    height: 400rpx;
    border-radius: 16rpx;
    border: 4rpx solid #f0f0f0;
  }
  
  .qrcode-info {
    margin-top: 30rpx;
    text-align: center;
    
    .expire-time {
      font-size: 26rpx;
      color: #999;
      margin-bottom: 8rpx;
    }
    
    .countdown {
      font-size: 32rpx;
      color: #1890ff;
      font-weight: 600;
    }
  }
}
```

## 9. é¡µé¢è·¯ç”±é…ç½®

```json
// pages.json
{
  "pages": [
    {
      "path": "pages/visitor/index",
      "style": {
        "navigationBarTitleText": "è®¿å®¢ç®¡ç†",
        "navigationBarBackgroundColor": "#1890ff",
        "navigationBarTextStyle": "white",
        "enablePullDownRefresh": true
      }
    },
    {
      "path": "pages/visitor/appointment",
      "style": {
        "navigationBarTitleText": "æˆ‘çš„é¢„çº¦",
        "enablePullDownRefresh": true
      }
    },
    {
      "path": "pages/visitor/create-appointment",
      "style": {
        "navigationBarTitleText": "åˆ›å»ºé¢„çº¦"
      }
    },
    {
      "path": "pages/visitor/appointment-detail",
      "style": {
        "navigationBarTitleText": "é¢„çº¦è¯¦æƒ…"
      }
    },
    {
      "path": "pages/visitor/checkin",
      "style": {
        "navigationBarTitleText": "è®¿å®¢ç­¾åˆ°"
      }
    },
    {
      "path": "pages/visitor/qrcode",
      "style": {
        "navigationBarTitleText": "è®¿å®¢äºŒç»´ç ",
        "navigationBarBackgroundColor": "#1890ff",
        "navigationBarTextStyle": "white"
      }
    },
    {
      "path": "pages/visitor/records",
      "style": {
        "navigationBarTitleText": "è®¿é—®è®°å½•",
        "enablePullDownRefresh": true
      }
    },
    {
      "path": "pages/visitor/invite",
      "style": {
        "navigationBarTitleText": "é‚€è¯·è®¿å®¢"
      }
    },
    {
      "path": "pages/visitor/pass",
      "style": {
        "navigationBarTitleText": "é€šè¡Œè¯",
        "navigationBarBackgroundColor": "#52c41a",
        "navigationBarTextStyle": "white"
      }
    }
  ]
}
```

## 10. æƒé™æ§åˆ¶

### 10.1 åŠŸèƒ½æƒé™

| åŠŸèƒ½ | æƒé™æ ‡è¯† | è§’è‰² | è¯´æ˜ |
|------|---------|------|------|
| åˆ›å»ºé¢„çº¦ | `visitor:appointment:create` | è®¿å®¢/å‘˜å·¥ | æäº¤é¢„çº¦ç”³è¯· |
| å–æ¶ˆé¢„çº¦ | `visitor:appointment:cancel` | è®¿å®¢/å‘˜å·¥ | å–æ¶ˆè‡ªå·±çš„é¢„çº¦ |
| æŸ¥çœ‹é¢„çº¦ | `visitor:appointment:view` | æ‰€æœ‰è§’è‰² | æŸ¥çœ‹é¢„çº¦è¯¦æƒ… |
| æ‰«ç ç­¾åˆ° | `visitor:checkin:scan` | å‰å°/å®‰ä¿ | æ‰«ç éªŒè¯ç­¾åˆ° |
| è®¿å®¢äºŒç»´ç  | `visitor:qrcode:view` | è®¿å®¢ | å±•ç¤ºè®¿å®¢äºŒç»´ç  |
| é‚€è¯·è®¿å®¢ | `visitor:invite` | å‘˜å·¥ | é‚€è¯·å¤–éƒ¨è®¿å®¢ |
| å®¡æ‰¹é¢„çº¦ | `visitor:appointment:approve` | å‘˜å·¥ | å®¡æ‰¹è®¿å®¢é¢„çº¦ |
| æŸ¥çœ‹è®°å½• | `visitor:record:view` | æ‰€æœ‰è§’è‰² | æŸ¥çœ‹è®¿é—®è®°å½• |

### 10.2 æ•°æ®æƒé™

| æ•°æ®ç±»å‹ | æƒé™èŒƒå›´ | è¯´æ˜ |
|---------|---------|------|
| é¢„çº¦è®°å½• | æœ¬äººç›¸å…³ | è®¿å®¢çœ‹è‡ªå·±é¢„çº¦ï¼Œå‘˜å·¥çœ‹è¢«è®¿é¢„çº¦ |
| è®¿é—®è®°å½• | æœ¬äººç›¸å…³ | åŒä¸Š |
| ç»Ÿè®¡æ•°æ® | æœ¬äººç›¸å…³ | ä¸ªäººç»Ÿè®¡æ•°æ® |
| é€šè¡Œè¯ | æœ¬äººé¢„çº¦ | ä»…æœ¬äººé¢„çº¦å¯ç”Ÿæˆ |

## 11. å®‰å…¨è®¾è®¡

### 11.1 èº«ä»½éªŒè¯

| éªŒè¯æ–¹å¼ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|---------|------|---------|
| èº«ä»½è¯+æ‰‹æœºå· | åŒå› ç´ éªŒè¯ | ç­¾åˆ°éªŒè¯ |
| äºŒç»´ç  | åŠ¨æ€ç éªŒè¯ | å¿«é€Ÿç­¾åˆ° |
| äººè„¸è¯†åˆ« | ç”Ÿç‰©ç‰¹å¾éªŒè¯ | é«˜å®‰å…¨åœºæ™¯ |
| OCRè¯†åˆ« | è¯ä»¶è¯†åˆ« | ä¿¡æ¯å½•å…¥ |

### 11.2 æ•°æ®å®‰å…¨

| å®‰å…¨æªæ–½ | è¯´æ˜ |
|---------|------|
| HTTPSä¼ è¾“ | æ‰€æœ‰æ¥å£å¼ºåˆ¶HTTPS |
| Tokenè®¤è¯ | Sa-Tokenä¼šè¯ç®¡ç† |
| æ•°æ®è„±æ• | èº«ä»½è¯/æ‰‹æœºå·è„±æ•å±•ç¤º |
| äºŒç»´ç åŠ å¯† | åŒ…å«ç­¾åé˜²ä¼ªé€  |
| è®¿é—®æ—¥å¿— | æ‰€æœ‰æ“ä½œè®°å½•å®¡è®¡ |

### 11.3 é˜²æŠ¤æœºåˆ¶

| æœºåˆ¶ | è¯´æ˜ |
|------|------|
| é»‘åå• | æ‹’ç»é»‘åå•è®¿å®¢é¢„çº¦ |
| é¢‘ç‡é™åˆ¶ | åŒä¸€æ‰‹æœºå·æ¯æ—¥é¢„çº¦é™åˆ¶ |
| æœ‰æ•ˆæœŸæ§åˆ¶ | äºŒç»´ç /é€šè¡Œè¯æœ‰æ•ˆæœŸ |
| å¼‚å¸¸å‘Šè­¦ | å¼‚å¸¸è¡Œä¸ºå®æ—¶å‘Šè­¦ |

## 12. æ€§èƒ½ä¼˜åŒ–

### 12.1 ä¼˜åŒ–ç­–ç•¥

| ä¼˜åŒ–é¡¹ | ç­–ç•¥ | æ•ˆæœ |
|-------|------|------|
| é¦–å±åŠ è½½ | éª¨æ¶å±+å»¶è¿ŸåŠ è½½ | é¦–å±æ—¶é—´<1s |
| åˆ—è¡¨æ¸²æŸ“ | è™šæ‹Ÿåˆ—è¡¨ | å¤§æ•°æ®é‡æµç•… |
| äºŒç»´ç ç”Ÿæˆ | æœ¬åœ°ç”Ÿæˆ+ç¼“å­˜ | ç¦»çº¿å¯ç”¨ |
| OCRè¯†åˆ« | å›¾ç‰‡å‹ç¼© | è¯†åˆ«é€Ÿåº¦æå‡ |
| æ¥å£è¯·æ±‚ | è¯·æ±‚åˆå¹¶+ç¼“å­˜ | å‡å°‘è¯·æ±‚æ¬¡æ•° |

### 12.2 ç¼“å­˜ç­–ç•¥

| æ•°æ®ç±»å‹ | ç¼“å­˜æ–¹å¼ | æœ‰æ•ˆæœŸ | æ›´æ–°ç­–ç•¥ |
|---------|---------|-------|---------|
| ç”¨æˆ·ä¿¡æ¯ | Pinia + Storage | ç™»å½•æœŸé—´ | ç™»å½•æ—¶æ›´æ–° |
| é¢„çº¦åˆ—è¡¨ | Pinia | é¡µé¢ç”Ÿå‘½å‘¨æœŸ | ä¸‹æ‹‰åˆ·æ–° |
| äºŒç»´ç  | Storage | è¿‡æœŸå‰ | è‡ªåŠ¨åˆ·æ–° |
| è¢«è®¿äººåˆ—è¡¨ | Storage | 1å¤© | æœç´¢æ—¶æ›´æ–° |
| é¢„çº¦ç±»å‹ | Storage | 7å¤© | æ‰‹åŠ¨åˆ·æ–° |

## 13. æµ‹è¯•è§„èŒƒ

### 13.1 æµ‹è¯•ç”¨ä¾‹

| æµ‹è¯•åœºæ™¯ | æµ‹è¯•ç‚¹ | é¢„æœŸç»“æœ |
|---------|-------|---------|
| åˆ›å»ºé¢„çº¦ | å¡«å†™å®Œæ•´ä¿¡æ¯æäº¤ | é¢„çº¦æˆåŠŸï¼ŒçŠ¶æ€å¾…å®¡æ‰¹ |
| è¡¨å•éªŒè¯ | å¿…å¡«é¡¹ä¸ºç©º | æ˜¾ç¤ºéªŒè¯é”™è¯¯ |
| å–æ¶ˆé¢„çº¦ | å–æ¶ˆå¾…å®¡æ‰¹é¢„çº¦ | çŠ¶æ€å˜ä¸ºå·²å–æ¶ˆ |
| äºŒç»´ç ç­¾åˆ° | æ‰«ææœ‰æ•ˆäºŒç»´ç  | ç­¾åˆ°æˆåŠŸ |
| è¿‡æœŸäºŒç»´ç  | æ‰«æè¿‡æœŸäºŒç»´ç  | æç¤ºäºŒç»´ç å·²å¤±æ•ˆ |
| èº«ä»½éªŒè¯ | èº«ä»½è¯+æ‰‹æœºå·éªŒè¯ | éªŒè¯é€šè¿‡ |
| OCRè¯†åˆ« | æ‹ç…§è¯†åˆ«èº«ä»½è¯ | è‡ªåŠ¨å¡«å……ä¿¡æ¯ |

### 13.2 å…¼å®¹æ€§æµ‹è¯•

| å¹³å° | æœ€ä½ç‰ˆæœ¬ | æµ‹è¯•æœºå‹ |
|------|---------|---------|
| iOS | 12.0+ | iPhone 8/X/12/14 |
| Android | 7.0+ | å°ç±³/åä¸º/OPPO/vivo |
| å¾®ä¿¡å°ç¨‹åº | åŸºç¡€åº“2.20+ | å„ä¸»æµæœºå‹ |

## 14. æ–‡æ¡£ç‰ˆæœ¬

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ | ä½œè€… |
|------|------|---------|------|
| v1.0.0 | 2025-12-17 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºäºç°æœ‰ä»£ç åˆ†æ | IOE-DREAM Team |
| v2.0.0 | 2025-01-30 | å®Œå–„ä¼ä¸šçº§æ ‡å‡†å†…å®¹ | IOE-DREAM Team |
