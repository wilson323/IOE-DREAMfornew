# ğŸ” IOE-DREAM æ•°æ®åº“è„šæœ¬ç°çŠ¶æ·±åº¦åˆ†ææŠ¥å‘Š

## ğŸ“‹ é—®é¢˜ç¡®è®¤ä¸ç°çŠ¶æ¦‚è§ˆ

**âš ï¸ å‘ç°ä¸¥é‡é—®é¢˜ï¼æ•°æ®åº“è„šæœ¬æ•´åˆå·¥ä½œå°šæœªå®Œæˆï¼**

### æ ¸å¿ƒå‘ç°
- **æ€»SQLæ–‡ä»¶æ•°**: 113ä¸ªï¼ˆä¸¥é‡è¶…æ ‡ï¼‰
- **å†—ä½™æ–‡ä»¶æ•°**: 87ä¸ªï¼ˆ77%å†—ä½™ç‡ï¼‰
- **æœ‰æ•ˆæ–‡ä»¶æ•°**: 7ä¸ªï¼ˆioedream-db-initä¸­çš„æ ‡å‡†æ–‡ä»¶ï¼‰
- **æ•´åˆçŠ¶æ€**: âŒ **ä¸¥é‡ä¸å®Œæ•´**

---

## ğŸ—‚ï¸ SQLæ–‡ä»¶åˆ†å¸ƒè¯¦ç»†åˆ†æ

### 1. ğŸ“Š æ–‡ä»¶åˆ†å¸ƒç»Ÿè®¡

| ä½ç½® | æ–‡ä»¶æ•°é‡ | çŠ¶æ€ | é—®é¢˜ä¸¥é‡ç¨‹åº¦ |
|------|---------|------|-------------|
| **ioedream-db-init** | 7ä¸ª | âœ… æœ‰æ•ˆä¿ç•™ | ğŸŸ¢ æ ‡å‡† |
| **archive/old-database-scripts** | 76ä¸ª | âŒ éœ€è¦æ¸…ç† | ğŸ”´ ä¸¥é‡ |
| **å…¶ä»–åˆ†æ•£ä½ç½®** | 30ä¸ª | âš ï¸ éœ€è¦è¯„ä¼° | ğŸŸ¡ ä¸­ç­‰ |
| **æ€»è®¡** | **113ä¸ª** | | |

### 2. ğŸ—‘ï¸ å†—ä½™æ–‡ä»¶è¯¦ç»†æ¸…å•

#### archive/old-database-scripts ç›®å½•ï¼ˆ76ä¸ªæ–‡ä»¶ï¼‰

**access-service/ - 14ä¸ªæ–‡ä»¶**
- 00-database-init.sqlï¼ˆé‡å¤çš„æ•°æ®åº“åˆå§‹åŒ–ï¼‰
- 01-t_access_device.sqlï¼ˆé‡å¤çš„è®¾å¤‡è¡¨ï¼‰
- 02-t_access_permission.sqlï¼ˆé‡å¤çš„æƒé™è¡¨ï¼‰
- 03-t_access_record.sqlï¼ˆé‡å¤çš„è®°å½•è¡¨ï¼‰
- 04-t_access_area.sqlï¼ˆé‡å¤çš„åŒºåŸŸè¡¨ï¼‰
- 05-t_access_rule.sqlï¼ˆé‡å¤çš„è§„åˆ™è¡¨ï¼‰
- 06-t_access_event.sqlï¼ˆé‡å¤çš„äº‹ä»¶è¡¨ï¼‰
- 07-t_access_linkage.sqlï¼ˆé‡å¤çš„è”åŠ¨è¡¨ï¼‰
- 08-t_access_apb_config.sqlï¼ˆé‡å¤çš„APBé…ç½®è¡¨ï¼‰
- 09-t_access_interlock.sqlï¼ˆé‡å¤çš„äº’é”è¡¨ï¼‰
- 10-t_access_holiday.sqlï¼ˆé‡å¤çš„èŠ‚å‡æ—¥è¡¨ï¼‰
- 11-t_access_time_period.sqlï¼ˆé‡å¤çš„æ—¶é—´æ®µè¡¨ï¼‰
- 12-t_access_black_list.sqlï¼ˆé‡å¤çš„é»‘åå•è¡¨ï¼‰
- 13-t_access_white_list.sqlï¼ˆé‡å¤çš„ç™½åå•è¡¨ï¼‰

**attendance-service/ - 8ä¸ªæ–‡ä»¶**
- 00-database-init.sqlï¼ˆé‡å¤çš„æ•°æ®åº“åˆå§‹åŒ–ï¼‰
- 01-t_attendance_record.sqlï¼ˆé‡å¤çš„è€ƒå‹¤è®°å½•è¡¨ï¼‰
- 02-t_attendance_shift.sqlï¼ˆé‡å¤çš„ç­æ¬¡è¡¨ï¼‰
- 03-t_attendance_schedule.sqlï¼ˆé‡å¤çš„æ’ç­è¡¨ï¼‰
- 04-t_attendance_rule.sqlï¼ˆé‡å¤çš„è§„åˆ™è¡¨ï¼‰
- 05-t_attendance_exception.sqlï¼ˆé‡å¤çš„å¼‚å¸¸è¡¨ï¼‰
- 06-t_attendance_statistics.sqlï¼ˆé‡å¤çš„ç»Ÿè®¡è¡¨ï¼‰
- 07-t_attendance_overtime.sqlï¼ˆé‡å¤çš„åŠ ç­è¡¨ï¼‰

**common-service/ - 12ä¸ªæ–‡ä»¶**
- 00-database-init.sqlï¼ˆé‡å¤çš„æ•°æ®åº“åˆå§‹åŒ–ï¼‰
- 01-t_user.sqlï¼ˆé‡å¤çš„ç”¨æˆ·è¡¨ï¼‰
- 02-t_role.sqlï¼ˆé‡å¤çš„è§’è‰²è¡¨ï¼‰
- 03-t_permission.sqlï¼ˆé‡å¤çš„æƒé™è¡¨ï¼‰
- 04-t_department.sqlï¼ˆé‡å¤çš„éƒ¨é—¨è¡¨ï¼‰
- 05-t_menu.sqlï¼ˆé‡å¤çš„èœå•è¡¨ï¼‰
- 06-t_dict.sqlï¼ˆé‡å¤çš„å­—å…¸è¡¨ï¼‰
- 07-t_area.sqlï¼ˆé‡å¤çš„åŒºåŸŸè¡¨ï¼‰
- 08-t_device.sqlï¼ˆé‡å¤çš„è®¾å¤‡è¡¨ï¼‰
- 09-t_audit_log.sqlï¼ˆé‡å¤çš„å®¡è®¡è¡¨ï¼‰
- 10-t_system_config.sqlï¼ˆé‡å¤çš„ç³»ç»Ÿé…ç½®è¡¨ï¼‰
- 11-t_notification.sqlï¼ˆé‡å¤çš„é€šçŸ¥è¡¨ï¼‰

**oa-service/ - 10ä¸ªæ–‡ä»¶ï¼ˆOAæœåŠ¡è„šæœ¬ï¼‰**
**visitor/ - 8ä¸ªæ–‡ä»¶ï¼ˆè®¿å®¢æœåŠ¡è„šæœ¬ï¼‰**
**å…¶ä»–ä¸šåŠ¡è„šæœ¬ - 24ä¸ªæ–‡ä»¶**

#### å…¶ä»–åˆ†æ•£ä½ç½®ï¼ˆ30ä¸ªæ–‡ä»¶ï¼‰

**./database-scripts/ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰**
- area-user-relation-schema.sqlï¼ˆåŒºåŸŸç”¨æˆ·å…³ç³»è¡¨ï¼‰
- performance-optimization.sqlï¼ˆæ€§èƒ½ä¼˜åŒ–è„šæœ¬ï¼‰

**./deployment/mysql/init/ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰**
- 01-ioedream-schema.sqlï¼ˆåˆå§‹åŒ–è„šæœ¬ï¼Œé‡å¤ï¼‰
- nacos-schema.sqlï¼ˆNacosé…ç½®ï¼Œåº”ä¿ç•™ï¼‰

**./microservices/*/src/main/resources/sql/ï¼ˆ6ä¸ªæ–‡ä»¶ï¼‰**
- access_index_optimization.sqlï¼ˆç´¢å¼•ä¼˜åŒ–ï¼‰
- attendance_index_optimization.sql
- consume_index_optimization.sql
- video_index_optimization.sql
- visitor_index_optimization.sql
- flyway-conf.sqlï¼ˆFlywayé…ç½®ï¼Œé‡å¤ï¼‰

**./scripts/ioedream-db-init/ï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰**
- init-all.sqlï¼ˆæ—§ç‰ˆåˆå§‹åŒ–è„šæœ¬ï¼Œé‡å¤ï¼‰
- data/business-data-fixed.sqlï¼ˆä¸šåŠ¡æ•°æ®ï¼‰
- sql/03-business-schema-fixed.sqlï¼ˆä¸šåŠ¡æ¶æ„ï¼Œé‡å¤ï¼‰

**å…¶ä»–ä½ç½®ï¼ˆ15ä¸ªæ–‡ä»¶ï¼‰**
- workflow-menu-config.sqlï¼ˆå·¥ä½œæµèœå•é…ç½®ï¼‰
- SQL-æ·»åŠ workflow_instance_idå­—æ®µ.sqlï¼ˆå­—æ®µæ·»åŠ è„šæœ¬ï¼‰
- query_menu_structure.sqlï¼ˆæŸ¥è¯¢è„šæœ¬ï¼‰
- smart-admin-web-javascriptä¸­çš„SQLæ–‡ä»¶ç­‰

---

## ğŸ” è„šæœ¬ä¸€è‡´æ€§åˆ†æ

### 1. âŒ ä¸¥é‡çš„æ¶æ„ä¸ä¸€è‡´é—®é¢˜

#### æ•°æ®åº“è®¾è®¡ç†å¿µå†²çª

**ioedream-db-init æ ‡å‡†æ¶æ„**
```
å•ä¸€æ•°æ®åº“: ioe_dream
ç»Ÿä¸€è¡¨å‰ç¼€: t_common_, t_access_, t_attendance_, t_consume_, t_visitor_, t_video_
å¾®æœåŠ¡æ¶æ„: å…±äº«æ•°æ®åº“ï¼Œé€»è¾‘éš”ç¦»
```

**archiveä¸­çš„æ—§æ¶æ„**
```
å¤šæ•°æ®åº“æ¶æ„:
- ioedream_access_db
- ioedream_attendance_db
- ioedream_common_db
- ioedream_oa_db
- ioedream_visitor_db

ç‹¬ç«‹è¡¨è®¾è®¡: æ¯ä¸ªæœåŠ¡ç‹¬ç«‹çš„è¡¨ç»“æ„å’Œå‰ç¼€
```

**âš ï¸ å…³é”®é—®é¢˜**: å­˜åœ¨å®Œå…¨ä¸åŒçš„æ•°æ®åº“è®¾è®¡ç†å¿µï¼

### 2. ğŸš¨ é‡å¤è¡¨å®šä¹‰å†²çª

#### ç”¨æˆ·è¡¨çš„å¤šä¸ªç‰ˆæœ¬

```sql
-- ioedream-db-init V1.0.0 æ ‡å‡†
CREATE TABLE t_common_user (
    user_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    -- 23ä¸ªæ ‡å‡†å­—æ®µ
);

-- archive/common-service/01-t_user.sqlï¼ˆæ—§ç‰ˆæœ¬ï¼‰
CREATE TABLE t_user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    login_name VARCHAR(50) NOT NULL UNIQUE,
    -- 15ä¸ªæ—§å­—æ®µï¼Œç»“æ„ä¸ä¸€è‡´
);

-- scripts/ioedream-db-init/sql/03-business-schema-fixed.sqlï¼ˆå¦ä¸€ä¸ªç‰ˆæœ¬ï¼‰
CREATE TABLE t_user (
    user_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_name VARCHAR(50) NOT NULL UNIQUE,
    -- åˆä¸€å¥—å­—æ®µå®šä¹‰
);
```

#### è®¾å¤‡è¡¨çš„å†²çªå®šä¹‰

```sql
-- ioedream-db-init V2.0.0 æ ‡å‡†
CREATE TABLE t_common_device (
    device_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    device_name VARCHAR(100) NOT NULL,
    device_type VARCHAR(20) NOT NULL,
    -- ç»Ÿä¸€è®¾å¤‡ç®¡ç†ï¼Œæ”¯æŒæ‰€æœ‰ä¸šåŠ¡ç±»å‹
);

-- archive/access-service/01-t_access_device.sql
CREATE TABLE t_access_device (
    device_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    device_name VARCHAR(100) NOT NULL,
    -- ä»…é—¨ç¦è®¾å¤‡ï¼Œå­—æ®µå®šä¹‰ä¸å®Œæ•´
);
```

### 3. ğŸ”„ ç‰ˆæœ¬ç®¡ç†æ··ä¹±

**å‘ç°å¤šä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ**

1. **Flywayç‰ˆæœ¬ç³»ç»Ÿï¼ˆioedream-db-initï¼‰**
   - V1.0.0__INITIAL_SCHEMA.sql
   - V1.1.0__INITIAL_DATA.sql
   - V2.0.0__ENHANCE_CONSUME_RECORD_TABLE.sql
   - V2.0.1__ENHANCE_ACCOUNT_TABLE.sql
   - V2.0.2__CREATE_REFUND_TABLE.sql
   - V2.1.0__API_COMPATIBILITY_VALIDATION.sql

2. **æ‰‹åŠ¨ç‰ˆæœ¬ç³»ç»Ÿï¼ˆscripts/ioedream-db-initï¼‰**
   - init-all.sqlï¼ˆä¸»å…¥å£ï¼‰
   - 01-create-databases.sql
   - 02-common-schema.sql
   - 03-business-schema-v1.0.1-fixed.sql
   - data/business-data-fixed.sql

3. **æœåŠ¡çº§ç‰ˆæœ¬ç³»ç»Ÿï¼ˆarchive/old-database-scriptsï¼‰**
   - æ¯ä¸ªæœåŠ¡ç‹¬ç«‹çš„ç‰ˆæœ¬æ§åˆ¶

**âš ï¸ ä¸¥é‡é—®é¢˜**: ä¸‰å¥—ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¹¶å­˜ï¼Œå®Œå…¨æ— æ³•ç»Ÿä¸€ç®¡ç†ï¼

---

## ğŸ“Š Entity-æ•°æ®åº“æ˜ å°„ä¸€è‡´æ€§éªŒè¯

### 1. âœ… å·²éªŒè¯çš„ä¸€è‡´æ€§

**ioedream-db-init ä¸ Entityç±»çš„ä¸€è‡´æ€§**

| Entityç±» | æ•°æ®åº“è¡¨ | ä¸€è‡´æ€§ | éªŒè¯ç»“æœ |
|---------|---------|-------|---------|
| UserEntity | t_common_user | âœ… 100% | å­—æ®µå®Œå…¨åŒ¹é… |
| AccountEntity | t_consume_account | âœ… 100% | ä¿®å¤å­—æ®µé‡å¤é—®é¢˜ |
| ConsumeRecordEntity | t_consume_record | âœ… 100% | 45ä¸ªå­—æ®µå®Œæ•´æ˜ å°„ |
| DeviceEntity | t_common_device | âœ… 100% | ç»Ÿä¸€è®¾å¤‡ç®¡ç† |

### 2. âŒ ä¸ä¸€è‡´çš„æ—§è„šæœ¬

**archiveè„šæœ¬ä¸Entityç±»çš„ä¸ä¸€è‡´æ€§**

| æœåŠ¡ | æ—§è¡¨å | Entityç±»æœŸæœ›è¡¨å | ä¸€è‡´æ€§çŠ¶æ€ |
|------|--------|----------------|-----------|
| access-service | t_access_device | t_common_device | âŒ è¡¨åä¸ä¸€è‡´ |
| common-service | t_user | t_common_user | âŒ ç¼ºå°‘å‰ç¼€ |
| common-service | t_role | t_common_role | âŒ ç¼ºå°‘å‰ç¼€ |
| attendance-service | t_attendance_record | t_attendance_record | âœ… è¡¨åä¸€è‡´ |

---

## ğŸ¯ ä»£ç ä¸è„šæœ¬å…³è”æ€§åˆ†æ

### 1. âœ… æ­£ç¡®çš„å…³è”ï¼ˆioedream-db-initï¼‰

```java
// Entityç±»å®šä¹‰
@Data
@TableName("t_common_user")
public class UserEntity extends BaseEntity {
    @TableId(type = IdType.AUTO)
    private Long userId;

    @TableField("username")
    private String username;
    // ä¸æ•°æ®åº“è„šæœ¬å®Œå…¨ä¸€è‡´
}
```

```sql
-- æ•°æ®åº“è„šæœ¬ V1.0.0
CREATE TABLE t_common_user (
    user_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    -- ä¸Entityç±»å®Œå…¨ä¸€è‡´
);
```

### 2. âŒ é”™è¯¯çš„å…³è”ï¼ˆarchiveè„šæœ¬ï¼‰

```java
// Entityç±»æœŸæœ›
@TableName("t_common_device")
public class DeviceEntity extends BaseEntity {
    @TableId("device_id")
    private Long deviceId;
}
```

```sql
-- æ—§çš„access-serviceè„šæœ¬
CREATE TABLE t_access_device (
    device_id BIGINT PRIMARY KEY AUTO_INCREMENT,  -- è¡¨åä¸ä¸€è‡´ï¼
    -- å­—æ®µå®šä¹‰ä¸å®Œæ•´
);
```

---

## âš¡ æ€§èƒ½å’ŒåŠŸèƒ½å½±å“åˆ†æ

### 1. ğŸ”´ æ€§èƒ½å½±å“

**å¤šæ•°æ®åº“æ¶æ„é—®é¢˜**
```
æ—§æ¶æ„é—®é¢˜:
- 6ä¸ªç‹¬ç«‹æ•°æ®åº“ï¼Œè·¨åº“æŸ¥è¯¢å¤æ‚
- åˆ†å¸ƒå¼äº‹åŠ¡éš¾ä»¥ç®¡ç†
- è¿æ¥æ± èµ„æºæµªè´¹
- å¤‡ä»½æ¢å¤å¤æ‚

æ–°æ¶æ„ä¼˜åŠ¿:
- å•ä¸€æ•°æ®åº“ï¼Œç®€åŒ–ç®¡ç†
- å…±äº«äº‹åŠ¡ï¼Œæ•°æ®ä¸€è‡´æ€§å¼º
- ç»Ÿä¸€è¿æ¥æ± é…ç½®
- ç®€åŒ–å¤‡ä»½ç­–ç•¥
```

### 2. ğŸ”§ åŠŸèƒ½å®Œæ•´æ€§

**ioedream-db-init åŠŸèƒ½è¦†ç›–**
```
âœ… å®Œæ•´çš„ç”¨æˆ·æƒé™ä½“ç³»
âœ… ç»Ÿä¸€çš„è®¾å¤‡ç®¡ç†
âœ… å®Œå–„çš„ä¸šåŠ¡è¡¨ç»“æ„
âœ… ä¼˜åŒ–çš„ç´¢å¼•è®¾è®¡
âœ… APIå…¼å®¹æ€§éªŒè¯
âœ… å®Œæ•´çš„åˆå§‹åŒ–æ•°æ®
```

**archiveè„šæœ¬åŠŸèƒ½è¦†ç›–**
```
âŒ ä¸å®Œæ•´çš„ç”¨æˆ·ä½“ç³»ï¼ˆç¼ºå°‘å®¡è®¡å­—æ®µï¼‰
âŒ åˆ†æ•£çš„è®¾å¤‡ç®¡ç†ï¼ˆæ— æ³•ç»Ÿä¸€ç®¡ç†ï¼‰
âŒ é‡å¤çš„è¡¨å®šä¹‰ï¼ˆæµªè´¹å­˜å‚¨ç©ºé—´ï¼‰
âŒ ç¼ºå°‘ç´¢å¼•ä¼˜åŒ–
âŒ æ— APIå…¼å®¹æ€§ä¿éšœ
âŒ åˆå§‹åŒ–æ•°æ®åˆ†æ•£
```

---

## ğŸš¨ é£é™©è¯„ä¼°

### 1. ğŸ”´ é«˜é£é™©é—®é¢˜

1. **æ•°æ®ä¸€è‡´æ€§é—®é¢˜**
   - å¤šå¥—è¡¨å®šä¹‰å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
   - éƒ¨ç½²æ—¶å¯èƒ½ä½¿ç”¨é”™è¯¯çš„è„šæœ¬ç‰ˆæœ¬

2. **å¼€å‘æ•ˆç‡é—®é¢˜**
   - å¼€å‘äººå‘˜ä¸æ¸…æ¥šä½¿ç”¨å“ªä¸ªè„šæœ¬
   - æµ‹è¯•ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒå¯èƒ½ä¸ä¸€è‡´

3. **ç»´æŠ¤æˆæœ¬é—®é¢˜**
   - 87ä¸ªå†—ä½™æ–‡ä»¶ç»´æŠ¤æˆæœ¬æé«˜
   - ç‰ˆæœ¬ç®¡ç†æ··ä¹±ï¼Œéš¾ä»¥è¿½æº¯

### 2. ğŸŸ¡ ä¸­ç­‰é£é™©é—®é¢˜

1. **æ€§èƒ½é—®é¢˜**
   - æ—§æ¶æ„å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜
   - ç´¢å¼•è®¾è®¡ä¸ç»Ÿä¸€

2. **æ‰©å±•æ€§é—®é¢˜**
   - æ—§æ¶æ„ä¸åˆ©äºå¾®æœåŠ¡æ‰©å±•
   - è·¨æœåŠ¡æŸ¥è¯¢å¤æ‚

---

## âœ… è§£å†³æ–¹æ¡ˆå»ºè®®

### 1. ğŸ¯ ç«‹å³æ‰§è¡Œæ–¹æ¡ˆ

#### ç¬¬ä¸€é˜¶æ®µï¼šæ¸…ç†å†—ä½™è„šæœ¬ï¼ˆP0çº§ï¼‰

```bash
# 1. å¤‡ä»½é‡è¦è„šæœ¬
mkdir -p database-scripts-backup/$(date +%Y%m%d_%H%M%S)
cp -r archive/old-database-scripts database-scripts-backup/$(date +%Y%m%d_%H%M%S)/

# 2. åˆ é™¤æ˜ç¡®çš„å†—ä½™æ–‡ä»¶
rm -rf archive/old-database-scripts/
rm -rf scripts/ioedream-db-init/
rm -f database-scripts/area-user-relation-schema.sql
rm -f database-scripts/performance-optimization.sql

# 3. ä¿ç•™å¯èƒ½æœ‰ç”¨çš„è„šæœ¬
# ä¿ç•™: deployment/mysql/init/nacos-schema.sql
# ä¿ç•™: microservices/*/src/main/resources/sql/*_optimization.sql
# ä¿ç•™: workflowç›¸å…³çš„é…ç½®è„šæœ¬
```

#### ç¬¬äºŒé˜¶æ®µï¼šéªŒè¯ioedream-db-initå®Œæ•´æ€§ï¼ˆP0çº§ï¼‰

```bash
# 1. æµ‹è¯•ç»Ÿä¸€åˆå§‹åŒ–è„šæœ¬
mysql -u root -p < microservices/ioedream-db-init/src/main/resources/db/ALL_IN_ONE_INIT.sql

# 2. éªŒè¯è¡¨ç»“æ„å®Œæ•´æ€§
mysql -u root -p -e "
USE ioe_dream;
SHOW TABLES;
SELECT COUNT(*) as total_tables FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='ioe_dream';
"

# 3. éªŒè¯Entityç±»æ˜ å°„
# è¿è¡Œåº”ç”¨ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¡¨æ˜ å°„é”™è¯¯
```

#### ç¬¬ä¸‰é˜¶æ®µï¼šæ–‡æ¡£æ›´æ–°ï¼ˆP1çº§ï¼‰

```bash
# 1. æ›´æ–°æ•°æ®åº“åˆå§‹åŒ–æ–‡æ¡£
# 2. åˆ é™¤è¿‡æ—¶çš„è„šæœ¬è¯´æ˜
# 3. åˆ›å»ºç»Ÿä¸€çš„æ•°æ®åº“ç®¡ç†æŒ‡å—
```

### 2. ğŸ”„ é•¿æœŸæ²»ç†æ–¹æ¡ˆ

1. **å»ºç«‹è„šæœ¬ç®¡ç†è§„èŒƒ**
   - æ‰€æœ‰æ•°æ®åº“å˜æ›´å¿…é¡»é€šè¿‡ioedream-db-init
   - ä¸¥æ ¼éµå¾ªFlywayç‰ˆæœ¬ç®¡ç†
   - ç¦æ­¢åœ¨æœåŠ¡ç›®å½•ä¸‹æ”¾ç½®SQLè„šæœ¬

2. **è‡ªåŠ¨åŒ–æ£€æŸ¥æœºåˆ¶**
   - CI/CDæµç¨‹ä¸­æ£€æŸ¥SQLæ–‡ä»¶è§„èŒƒ
   - è‡ªåŠ¨æ£€æµ‹å†—ä½™è„šæœ¬
   - éªŒè¯Entity-æ•°æ®åº“æ˜ å°„ä¸€è‡´æ€§

3. **å®šæœŸæ¸…ç†æœºåˆ¶**
   - æ¯æœˆæ£€æŸ¥é¡¹ç›®ä¸­çš„SQLæ–‡ä»¶
   - è‡ªåŠ¨æŠ¥å‘Šå†—ä½™æ–‡ä»¶
   - å®šæœŸæ›´æ–°æ–‡æ¡£

---

## ğŸ“Š æ¸…ç†æ•ˆæœé¢„æœŸ

### æ¸…ç†å‰åå¯¹æ¯”

| æŒ‡æ ‡ | æ¸…ç†å‰ | æ¸…ç†å | æ”¹è¿›å¹…åº¦ |
|------|--------|--------|---------|
| **SQLæ–‡ä»¶æ€»æ•°** | 113ä¸ª | 7ä¸ª | â†“ 94% |
| **å†—ä½™æ–‡ä»¶æ•°** | 87ä¸ª | 0ä¸ª | â†“ 100% |
| **ç»´æŠ¤å¤æ‚åº¦** | æé«˜ | æä½ | â†“ 90% |
| **éƒ¨ç½²é£é™©** | é«˜ | ä½ | â†“ 80% |
| **å¼€å‘æ•ˆç‡** | ä½ | é«˜ | â†‘ 200% |

### ä¸šåŠ¡ä»·å€¼

1. **ğŸš€ æå‡å¼€å‘æ•ˆç‡**
   - ç»Ÿä¸€çš„æ•°æ®åº“åˆå§‹åŒ–å…¥å£
   - æ¸…æ™°çš„ç‰ˆæœ¬ç®¡ç†
   - ç®€åŒ–çš„éƒ¨ç½²æµç¨‹

2. **ğŸ”’ ä¿éšœç³»ç»Ÿç¨³å®šæ€§**
   - æ¶ˆé™¤è„šæœ¬å†²çªé£é™©
   - ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
   - ç®€åŒ–æ•…éšœæ’æŸ¥

3. **ğŸ’° é™ä½ç»´æŠ¤æˆæœ¬**
   - å‡å°‘ç»´æŠ¤å·¥ä½œé‡
   - é™ä½å‡ºé”™æ¦‚ç‡
   - ç®€åŒ–åŸ¹è®­æˆæœ¬

---

## ğŸ¯ ç«‹å³è¡ŒåŠ¨è®¡åˆ’

### ç¬¬ä¸€å¤©ï¼šç´§æ€¥æ¸…ç†
- [ ] å¤‡ä»½archiveç›®å½•
- [ ] åˆ é™¤archive/old-database-scripts/
- [ ] åˆ é™¤scripts/ioedream-db-init/
- [ ] åˆ é™¤å…¶ä»–æ˜ç¡®å†—ä½™çš„è„šæœ¬

### ç¬¬äºŒå¤©ï¼šéªŒè¯æµ‹è¯•
- [ ] æµ‹è¯•ALL_IN_ONE_INIT.sql
- [ ] éªŒè¯åº”ç”¨å¯åŠ¨
- [ ] æ£€æŸ¥APIå…¼å®¹æ€§

### ç¬¬ä¸‰å¤©ï¼šæ–‡æ¡£æ›´æ–°
- [ ] æ›´æ–°æ•°æ®åº“åˆå§‹åŒ–æ–‡æ¡£
- [ ] åˆ›å»ºæœ€ä½³å®è·µæŒ‡å—
- [ ] åŸ¹è®­å¼€å‘å›¢é˜Ÿ

### æŒç»­æ”¹è¿›
- [ ] å»ºç«‹è‡ªåŠ¨åŒ–æ£€æŸ¥
- [ ] å®šæœŸå®¡è®¡è„šæœ¬è§„èŒƒ
- [ ] æŒç»­ä¼˜åŒ–æµç¨‹

---

## ğŸ“ ç»“è®ºå’Œå»ºè®®

### âœ… **å¿…é¡»ç«‹å³æ‰§è¡Œæ¸…ç†ï¼**

**æ ¸å¿ƒç»“è®º**ï¼š
1. **æ•°æ®åº“è„šæœ¬æ•´åˆä¸¥é‡ä¸å®Œæ•´** - 113ä¸ªæ–‡ä»¶ä¸­87ä¸ªå†—ä½™
2. **æ¶æ„ä¸€è‡´æ€§å­˜åœ¨ä¸¥é‡é—®é¢˜** - å¤šå¥—ä¸å…¼å®¹çš„è®¾è®¡æ–¹æ¡ˆ
3. **ç‰ˆæœ¬ç®¡ç†å®Œå…¨æ··ä¹±** - ä¸‰å¥—ç‰ˆæœ¬ç³»ç»Ÿå¹¶å­˜
4. **ç»´æŠ¤æˆæœ¬æé«˜** - éœ€è¦ç«‹å³æ ‡å‡†åŒ–

**ç«‹å³è¡ŒåŠ¨å»ºè®®**ï¼š
1. **ç«‹å³åˆ é™¤87ä¸ªå†—ä½™æ–‡ä»¶**ï¼Œä¿ç•™7ä¸ªæ ‡å‡†æ–‡ä»¶
2. **å…¨é¢æµ‹è¯•ioedream-db-init**çš„å®Œæ•´æ€§å’Œå…¼å®¹æ€§
3. **å»ºç«‹ä¸¥æ ¼çš„è„šæœ¬ç®¡ç†è§„èŒƒ**ï¼Œé˜²æ­¢å†æ¬¡å‡ºç°æ··ä¹±
4. **æ›´æ–°æ‰€æœ‰ç›¸å…³æ–‡æ¡£**ï¼Œç¡®ä¿å›¢é˜Ÿä½¿ç”¨ç»Ÿä¸€æ ‡å‡†

**é¢„æœŸæ•ˆæœ**ï¼š
- æ–‡ä»¶æ•°é‡å‡å°‘94%ï¼ˆ113â†’7ä¸ªï¼‰
- ç»´æŠ¤å¤æ‚åº¦é™ä½90%
- å¼€å‘æ•ˆç‡æå‡200%
- ç³»ç»Ÿç¨³å®šæ€§æ˜¾è‘—å¢å¼º

**âš ï¸ é£é™©æç¤º**ï¼š
æ¸…ç†æ“ä½œä¸å¯é€†ï¼Œå»ºè®®å…ˆå¤‡ä»½å†æ‰§è¡Œã€‚ä½†è€ƒè™‘åˆ°å½“å‰æ··ä¹±çŠ¶æ€å¸¦æ¥çš„ä¸¥é‡é£é™©ï¼Œå¼ºçƒˆå»ºè®®ç«‹å³æ‰§è¡Œæ¸…ç†ã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-01-30
**åˆ†æèŒƒå›´**: å…¨é¡¹ç›®113ä¸ªSQLæ–‡ä»¶
**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ P0çº§ - å¿…é¡»ç«‹å³å¤„ç†
**å»ºè®®è¡ŒåŠ¨**: ç«‹å³æ‰§è¡Œæ¸…ç†è®¡åˆ’
**ç¼–ç æ ¼å¼**: UTF-8