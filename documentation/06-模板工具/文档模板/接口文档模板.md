# RESTful APIæ¥å£æ–‡æ¡£æ¨¡æ¿

**ç”¨é€”**: æ ‡å‡†çš„RESTful APIæ¥å£æ–‡æ¡£ç¼–å†™æ¨¡æ¿
**é€‚ç”¨åœºæ™¯**: APIæ¥å£è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•å’Œç»´æŠ¤
**ç‰ˆæœ¬**: v2.0.0 (åŸºäºIOE-DREAMæ¶æ„è§„èŒƒ)

---

## ğŸ“‹ APIæ¦‚è¿°

### åŸºæœ¬ä¿¡æ¯
- **APIåç§°**: {APIåç§°}
- **APIç‰ˆæœ¬**: v1.0
- **åŸºç¡€URL**: {åŸºç¡€URL}
- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
- **æœ€åæ›´æ–°**: {æ›´æ–°æ—¥æœŸ}
- **ç»´æŠ¤å›¢é˜Ÿ**: {å›¢é˜Ÿåç§°}

### APIæè¿°
{è¯¦ç»†æè¿°APIçš„åŠŸèƒ½ã€ç”¨é€”å’Œé€‚ç”¨åœºæ™¯}

### æŠ€æœ¯è§„èŒƒ
- **åè®®**: HTTPS
- **æ•°æ®æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **è®¤è¯æ–¹å¼**: Sa-Token Bearer Token
- **APIé£æ ¼**: RESTful

---

## ğŸ” è®¤è¯ä¸æˆæƒ

### è®¤è¯æ–¹å¼
```http
Authorization: Bearer {token}
```

### æƒé™è¦æ±‚
- **ç”¨æˆ·è®¤è¯**: æ‰€æœ‰æ¥å£éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶(RBAC)
- **æ¥å£æƒé™**: æ¯ä¸ªæ¥å£éœ€è¦ç‰¹å®šçš„æƒé™æ ‡è¯†

### æƒé™æ ‡è¯†
| æƒé™æ ‡è¯† | æƒé™æè¿° | é€‚ç”¨èŒƒå›´ |
|---------|---------|----------|
| {module}:query | æŸ¥è¯¢æƒé™ | æ‰€æœ‰æŸ¥è¯¢æ¥å£ |
| {module}:add | æ–°å¢æƒé™ | æ–°å¢æ¥å£ |
| {module}:update | æ›´æ–°æƒé™ | æ›´æ–°æ¥å£ |
| {module}:delete | åˆ é™¤æƒé™ | åˆ é™¤æ¥å£ |

---

## ğŸ“‹ é€šç”¨è§„èŒƒ

### è¯·æ±‚æ ¼å¼
```http
GET {baseURL}/api/v1/{resource}?{å‚æ•°}
POST {baseURL}/api/v1/{resource}
PUT {baseURL}/api/v1/{resource}/{id}
DELETE {baseURL}/api/v1/{resource}/{id}
```

### å“åº”æ ¼å¼
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": "2025-12-02T10:00:00"
}
```

### çŠ¶æ€ç è§„èŒƒ
| çŠ¶æ€ç  | è¯´æ˜ | å«ä¹‰ |
|--------|------|------|
| 200 | OK | è¯·æ±‚æˆåŠŸ |
| 400 | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | Unauthorized | æœªæˆæƒè®¿é—® |
| 403 | Forbidden | æƒé™ä¸è¶³ |
| 404 | Not Found | èµ„æºä¸å­˜åœ¨ |
| 500 | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### é”™è¯¯å“åº”æ ¼å¼
```json
{
  "code": 400,
  "message": "è¯·æ±‚å‚æ•°é”™è¯¯: nameä¸èƒ½ä¸ºç©º",
  "data": null,
  "timestamp": "2025-12-02T10:00:00",
  "details": {
    "field": "name",
    "error": "ä¸èƒ½ä¸ºç©º"
  }
}
```

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### é€šç”¨å“åº”å¯¹è±¡
```java
public class ResponseDTO<T> {
    private Integer code;      // å“åº”ç 
    private String message;    // å“åº”æ¶ˆæ¯
    private T data;           // å“åº”æ•°æ®
    private String timestamp;  // æ—¶é—´æˆ³
}
```

### åˆ†é¡µå“åº”å¯¹è±¡
```java
public class PageResult<T> {
    private Long total;        // æ€»è®°å½•æ•°
    private List<T> rows;      // å½“å‰é¡µæ•°æ®
    private Integer pageNum;   // å½“å‰é¡µç 
    private Integer pageSize;  // æ¯é¡µå¤§å°
    private Integer pages;     // æ€»é¡µæ•°
}
```

### ä¸šåŠ¡å®ä½“å¯¹è±¡
```java
public class {Entity}VO {
    private Long id;           // ä¸»é”®ID
    private String name;       // åç§°
    private String code;       // ç¼–ç 
    private Integer status;     // çŠ¶æ€
    private String description; // æè¿°
    private LocalDateTime createTime; // åˆ›å»ºæ—¶é—´
    private LocalDateTime updateTime; // æ›´æ–°æ—¶é—´
}
```

---

## ğŸ”Œ æ¥å£åˆ—è¡¨

### æŸ¥è¯¢æ¥å£

#### 1. åˆ†é¡µæŸ¥è¯¢{å®ä½“åç§°}
- **æ¥å£è·¯å¾„**: `GET /api/v1/{module}/page`
- **æ¥å£æè¿°**: åˆ†é¡µæŸ¥è¯¢{å®ä½“åç§°}åˆ—è¡¨
- **æƒé™è¦æ±‚**: {module}:query

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| pageNum | Integer | å¦ | é¡µç ï¼Œä»1å¼€å§‹ | 1 |
| pageSize | Integer | å¦ | æ¯é¡µå¤§å°ï¼Œé»˜è®¤10 | 10 |
| name | String | å¦ | {å®ä½“åç§°}ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ | æµ‹è¯•åç§° |
| status | Integer | å¦ | çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-ç¦ç”¨ | 1 |
| startTime | String | å¦ | åˆ›å»ºæ—¶é—´å¼€å§‹ | 2025-12-01 |
| endTime | String | å¦ | åˆ›å»ºæ—¶é—´ç»“æŸ | 2025-12-31 |

**è¯·æ±‚ç¤ºä¾‹**:
```http
GET /api/v1/{module}/page?pageNum=1&pageSize=10&name=æµ‹è¯•&status=1
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 100,
    "rows": [
      {
        "id": 1,
        "name": "æµ‹è¯•{å®ä½“åç§°}",
        "code": "TEST001",
        "status": 1,
        "description": "æµ‹è¯•æè¿°",
        "createTime": "2025-12-02T10:00:00",
        "updateTime": "2025-12-02T10:00:00"
      }
    ],
    "pageNum": 1,
    "pageSize": 10,
    "pages": 10
  },
  "timestamp": "2025-12-02T10:00:00"
}
```

#### 2. æ ¹æ®IDæŸ¥è¯¢{å®ä½“åç§°}
- **æ¥å£è·¯å¾„**: `GET /api/v1/{module}/{id}`
- **æ¥å£æè¿°**: æ ¹æ®IDæŸ¥è¯¢{å®ä½“åç§°}è¯¦æƒ…
- **æƒé™è¦æ±‚**: {module}:query

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | Long | æ˜¯ | {å®ä½“åç§°}ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**:
```http
GET /api/v1/{module}/1
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 1,
    "name": "æµ‹è¯•{å®ä½“åç§°}",
    "code": "TEST001",
    "status": 1,
    "description": "æµ‹è¯•æè¿°",
    "createTime": "2025-12-02T10:00:00",
    "updateTime": "2025-12-02T10:00:00"
  },
  "timestamp": "2025-12-02T10:00:00"
}
```

### æ–°å¢æ¥å£

#### 3. æ–°å¢{å®ä½“åç§°}
- **æ¥å£è·¯å¾„**: `POST /api/v1/{module}/add`
- **æ¥å£æè¿°**: æ–°å¢{å®ä½“åç§°}
- **æƒé™è¦æ±‚**: {module}:add

**è¯·æ±‚ä½“**:
```json
{
  "name": "æµ‹è¯•{å®ä½“åç§°}",
  "code": "TEST001",
  "status": 1,
  "description": "æµ‹è¯•æè¿°"
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:
| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | çº¦æŸ |
|--------|------|------|------|------|
| name | String | æ˜¯ | {å®ä½“åç§°} | é•¿åº¦1-50ï¼Œå”¯ä¸€ |
| code | String | æ˜¯ | ç¼–ç  | é•¿åº¦1-20ï¼Œå”¯ä¸€ |
| status | Integer | æ˜¯ | çŠ¶æ€ | 1-æ­£å¸¸ï¼Œ2-ç¦ç”¨ |
| description | String | å¦ | æè¿° | é•¿åº¦0-200 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ–°å¢æˆåŠŸ",
  "data": "æ“ä½œæˆåŠŸ",
  "timestamp": "2025-12-02T10:00:00"
}
```

### æ›´æ–°æ¥å£

#### 4. æ›´æ–°{å®ä½“åç§°}
- **æ¥å£è·¯å¾„**: `POST /api/v1/{module}/update`
- **æ¥å£æè¿°**: æ›´æ–°{å®ä½“åç§°}
- **æƒé™è¦æ±‚**: {module}:update

**è¯·æ±‚ä½“**:
```json
{
  "id": 1,
  "name": "æ›´æ–°{å®ä½“åç§°}",
  "code": "TEST002",
  "status": 1,
  "description": "æ›´æ–°æè¿°"
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:
| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | çº¦æŸ |
|--------|------|------|------|------|
| id | Long | æ˜¯ | {å®ä½“åç§°}ID | å¿…é¡»å­˜åœ¨ |
| name | String | æ˜¯ | {å®ä½“åç§°} | é•¿åº¦1-50ï¼Œå”¯ä¸€ |
| code | String | æ˜¯ | ç¼–ç  | é•¿åº¦1-20ï¼Œå”¯ä¸€ |
| status | Integer | æ˜¯ | çŠ¶æ€ | 1-æ­£å¸¸ï¼Œ2-ç¦ç”¨ |
| description | String | å¦ | æè¿° | é•¿åº¦0-200 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": "æ“ä½œæˆåŠŸ",
  "timestamp": "2025-12-02T10:00:00"
}
```

### åˆ é™¤æ¥å£

#### 5. åˆ é™¤{å®ä½“åç§°}
- **æ¥å£è·¯å¾„**: `POST /api/v1/{module}/delete`
- **æ¥å£æè¿°**: åˆ é™¤{å®ä½“åç§°}(è½¯åˆ é™¤)
- **æƒé™è¦æ±‚**: {module}:delete

**è¯·æ±‚ä½“**:
```json
{
  "id": 1
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:
| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | çº¦æŸ |
|--------|------|------|------|------|
| id | Long | æ˜¯ | {å®ä½“åç§°}ID | å¿…é¡»å­˜åœ¨ |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": "æ“ä½œæˆåŠŸ",
  "timestamp": "2025-12-02T10:00:00"
}
```

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æ¥å£æµ‹è¯•
```http
### åˆ†é¡µæŸ¥è¯¢æµ‹è¯•
GET /api/v1/{module}/page?pageNum=1&pageSize=10

### è¯¦æƒ…æŸ¥è¯¢æµ‹è¯•
GET /api/v1/{module}/1

### æ–°å¢æµ‹è¯•
POST /api/v1/{module}/add
Content-Type: application/json

{
  "name": "æµ‹è¯•{å®ä½“åç§°}",
  "code": "TEST001",
  "status": 1,
  "description": "æµ‹è¯•æè¿°"
}

### æ›´æ–°æµ‹è¯•
POST /api/v1/{module}/update
Content-Type: application/json

{
  "id": 1,
  "name": "æ›´æ–°{å®ä½“åç§°}",
  "code": "TEST002",
  "status": 1,
  "description": "æ›´æ–°æè¿°"
}

### åˆ é™¤æµ‹è¯•
POST /api/v1/{module}/delete
Content-Type: application/json

{
  "id": 1
}
```

### å¼‚å¸¸æµ‹è¯•
```http
### å‚æ•°éªŒè¯æµ‹è¯•
POST /api/v1/{module}/add
Content-Type: application/json

{}

### æƒé™éªŒè¯æµ‹è¯•
GET /api/v1/{module}/page
Authorization: Bearer invalid_token

### èµ„æºä¸å­˜åœ¨æµ‹è¯•
GET /api/v1/{module}/99999
```

---

## ğŸ” é”™è¯¯ç è¯´æ˜

### ä¸šåŠ¡é”™è¯¯ç 
| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 1001 | {å®ä½“åç§°}åç§°ä¸èƒ½ä¸ºç©º | æä¾›æœ‰æ•ˆçš„åç§° |
| 1002 | {å®ä½“åç§°}åç§°å·²å­˜åœ¨ | ä½¿ç”¨ä¸åŒçš„åç§° |
| 1003 | {å®ä½“åç§°}ç¼–ç å·²å­˜åœ¨ | ä½¿ç”¨ä¸åŒçš„ç¼–ç  |
| 1004 | {å®ä½“åç§°}ä¸å­˜åœ¨ | æ£€æŸ¥IDæ˜¯å¦æ­£ç¡® |
| 1005 | {å®ä½“åç§°}çŠ¶æ€æ— æ•ˆ | ä½¿ç”¨æœ‰æ•ˆçš„çŠ¶æ€å€¼ |

### ç³»ç»Ÿé”™è¯¯ç 
| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 5001 | æ•°æ®åº“è¿æ¥å¤±è´¥ | æ£€æŸ¥æ•°æ®åº“é…ç½® |
| 5002 | å‚æ•°è§£æå¤±è´¥ | æ£€æŸ¥è¯·æ±‚æ ¼å¼ |
| 5003 | æƒé™éªŒè¯å¤±è´¥ | æ£€æŸ¥ç”¨æˆ·æƒé™ |
| 5004 | ç³»ç»Ÿå†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´
| æ¥å£ | ç›®æ ‡å“åº”æ—¶é—´ | æµ‹è¯•æ¡ä»¶ | å®é™…å“åº”æ—¶é—´ |
|------|-------------|----------|-------------|
| åˆ†é¡µæŸ¥è¯¢ | â‰¤ 200ms | 10æ¡è®°å½• | {å®é™…æ—¶é—´} |
| è¯¦æƒ…æŸ¥è¯¢ | â‰¤ 100ms | å•æ¡è®°å½• | {å®é™…æ—¶é—´} |
| æ–°å¢æ“ä½œ | â‰¤ 300ms | å•æ¡è®°å½• | {å®é™…æ—¶é—´} |
| æ›´æ–°æ“ä½œ | â‰¤ 300ms | å•æ¡è®°å½• | {å®é™…æ—¶é—´} |
| åˆ é™¤æ“ä½œ | â‰¤ 200ms | å•æ¡è®°å½• | {actualTime} |

### å¹¶å‘èƒ½åŠ›
| æ¥å£ | ç›®æ ‡TPS | æµ‹è¯•æ¡ä»¶ | å®é™…TPS |
|------|---------|----------|---------|
| åˆ†é¡µæŸ¥è¯¢ | â‰¥ 1000 | 10å¹¶å‘ç”¨æˆ· | {å®é™…TPS} |
| è¯¦æƒ…æŸ¥è¯¢ | â‰¥ 1500 | 10å¹¶å‘ç”¨æˆ· | {å®é™…TPS} |
| æ–°å¢æ“ä½œ | â‰¥ 500 | 5å¹¶å‘ç”¨æˆ· | {å®é™…TPS} |
| æ›´æ–°æ“ä½œ | â‰¥ 500 | 5å¹¶å‘ç”¨æˆ· | {actualTPS} |
| åˆ é™¤æ“ä½œ | â‰¥ 1000 | 10å¹¶å‘ç”¨æˆ· | {actualTPS} |

---

## ğŸ”§ å¼€å‘æŒ‡å—

### ç¯å¢ƒé…ç½®
```yaml
# å¼€å‘ç¯å¢ƒé…ç½®
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ioe_dream
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:password}
    driver-class-name: com.mysql.cj.jdbc.Driver

# æ—¥å¿—é…ç½®
logging:
  level:
    net.lab1024.sa.{module}.controller: DEBUG
    net.lab1024.sa.{module}.service: INFO
    net.lab1024.sa.{module}.dao: DEBUG

# APIæ–‡æ¡£é…ç½®
springdoc:
  api-docs:
    {module}:
      title: {æ¨¡å—åç§°}APIæ–‡æ¡£
      description: {æ¨¡å—æè¿°}
      version: 1.0.0
```

### ä»£ç ç¤ºä¾‹
```java
@RestController
@RequestMapping("/api/v1/{module}")
@RequiredArgsConstructor
public class {Entity}Controller {

    private final {Entity}Service {entity}Service;

    @PostMapping("/add")
    public ResponseDTO<String> add(@RequestBody @Valid {Entity}Form form) {
        return ResponseDTO.ok({entity}Service.add(form));
    }

    @GetMapping("/{id}")
    public ResponseDTO<{Entity}VO> getById(@PathVariable Long id) {
        {Entity}Entity entity = {entity}Service.getById(id);
        {Entity}VO vo = SmartBeanUtil.copy(entity, {Entity}VO.class);
        return ResponseDTO.ok(vo);
    }
}
```

---

## ğŸ“ æ”¯æŒä¸è”ç³»

### æŠ€æœ¯æ”¯æŒ
- **APIæ–‡æ¡£**: {æ–‡æ¡£åœ°å€}
- **å¼€å‘æŒ‡å—**: {å¼€å‘æŒ‡å—åœ°å€}
- **é—®é¢˜åé¦ˆ**: {åé¦ˆæ¸ é“}
- **æŠ€æœ¯æ”¯æŒ**: {æ”¯æŒé‚®ç®±}

### è”ç³»æ–¹å¼
- **å¼€å‘å›¢é˜Ÿ**: {å›¢é˜Ÿé‚®ç®±}
- **äº§å“å›¢é˜Ÿ**: {äº§å“é‚®ç®±}
- **è¿ç»´å›¢é˜Ÿ**: {è¿ç»´é‚®ç®±}

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ›´æ–°æ—¥æœŸ | æ›´æ–°å†…å®¹ | æ›´æ–°äºº |
|------|---------|----------|--------|
| v1.0.0 | {åˆ›å»ºæ—¥æœŸ} | åˆå§‹ç‰ˆæœ¬ | {æ›´æ–°äºº} |

---

## ğŸ“‹ å®¡æ‰¹è®°å½•

| å®¡æ‰¹ç¯èŠ‚ | å®¡æ‰¹äºº | å®¡æ‰¹æ—¶é—´ | å®¡æ‰¹æ„è§ | çŠ¶æ€ |
|---------|--------|----------|----------|------|
| è®¾è®¡è¯„å®¡ | {å®¡æ‰¹äºº} | {å®¡æ‰¹æ—¶é—´} | {æ„è§} | {çŠ¶æ€} |
| æŠ€æœ¯è¯„å®¡ | {å®¡æ‰¹äºº} | {å®¡æ‰¹æ—¶é—´} | {æ„è§} | {çŠ¶æ€} |
| äº§å“è¯„å®¡ | {å®¡æ‰¹äºº} | {å®¡æ‰¹æ—¶é—´} | {æ„è§} | {çŠ¶æ€} |

---

**æ¨¡æ¿ç‰ˆæœ¬**: v2.0.0
**æœ€åæ›´æ–°**: 2025-12-02
**ç»´æŠ¤å›¢é˜Ÿ**: IOE-DREAMæ¶æ„å§”å‘˜ä¼š

**ğŸ¯ ä½¿ç”¨æ­¤æ¨¡æ¿å¯ä»¥ç¡®ä¿APIæ¥å£æ–‡æ¡£çš„å®Œæ•´æ€§å’Œè§„èŒƒæ€§ï¼**