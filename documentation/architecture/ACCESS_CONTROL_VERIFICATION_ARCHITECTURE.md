# IOE-DREAM é—¨ç¦è®¾å¤‡é€šè®¯åè®®ä¸éªŒè¯æ¶æ„å®Œæ•´æ–¹æ¡ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-18  
> **æ–‡æ¡£ç±»å‹**: ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£  
> **é€‚ç”¨èŒƒå›´**: IOE-DREAMæ™ºæ…§å›­åŒºé—¨ç¦ç³»ç»Ÿå…¨ä¸šåŠ¡åœºæ™¯

---

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

### ç¼–å†™ç›®çš„

æœ¬æ–‡æ¡£åŸºäºå…¨å±€é¡¹ç›®ä»£ç æ¢³ç†ã€è®¾å¤‡é€šè®¯åè®®åˆ†æå’Œä¸šåŠ¡é€»è¾‘æ·±åº¦åˆ†æ,æå‡ºé—¨ç¦è®¾å¤‡éªŒè¯æ¶æ„çš„å®Œæ•´ä¼˜åŒ–æ–¹æ¡ˆã€‚é€šè¿‡ç³»ç»Ÿæ€§åˆ†æç°çŠ¶ã€é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ,ç¡®ä¿é—¨ç¦ç³»ç»Ÿçš„ä¼ä¸šçº§é«˜è´¨é‡å®ç°ã€‚

### æ ¸å¿ƒå‘ç°

**å…³é”®æ¶æ„è®¤çŸ¥**: é—¨ç¦è®¾å¤‡æœ‰**ä¸¤ç§éªŒè¯æ¨¡å¼**,ç”±**è®¾å¤‡å‚æ•°é…ç½®**å†³å®š:
1. **è®¾å¤‡ç«¯éªŒè¯æ¨¡å¼**: è®¾å¤‡æœ¬åœ°å®Œæˆè¯†åˆ«+éªŒè¯+æ§åˆ¶,æ”¯æŒç¦»çº¿è¿è¡Œ
2. **åå°éªŒè¯æ¨¡å¼**: è®¾å¤‡è¯†åˆ«ç”¨æˆ·èº«ä»½,åå°éªŒè¯æƒé™é€»è¾‘(åæ½œã€æ—¶é—´æ®µç­‰)

**å½“å‰é—®é¢˜**: é¡¹ç›®æ–‡æ¡£æè¿°ä¸ä»£ç å®ç°å­˜åœ¨ä¸¥é‡ä¸ä¸€è‡´,éœ€è¦å…¨é¢ä¼˜åŒ–ã€‚

---

## ğŸ¯ ç›®å½•

1. [å…¨å±€ç°çŠ¶æ¢³ç†](#å…¨å±€ç°çŠ¶æ¢³ç†)
2. [è®¾å¤‡é€šè®¯åè®®æ·±åº¦åˆ†æ](#è®¾å¤‡é€šè®¯åè®®æ·±åº¦åˆ†æ)
3. [ä¸¤ç§éªŒè¯æ¨¡å¼è¯¦è§£](#ä¸¤ç§éªŒè¯æ¨¡å¼è¯¦è§£)
4. [ä»£ç æ¶æ„ç°çŠ¶åˆ†æ](#ä»£ç æ¶æ„ç°çŠ¶åˆ†æ)
5. [æ–‡æ¡£ä¸€è‡´æ€§é—®é¢˜](#æ–‡æ¡£ä¸€è‡´æ€§é—®é¢˜)
6. [å®Œæ•´ä¼˜åŒ–æ–¹æ¡ˆ](#å®Œæ•´ä¼˜åŒ–æ–¹æ¡ˆ)
7. [å®æ–½è·¯çº¿å›¾](#å®æ–½è·¯çº¿å›¾)
8. [é™„å½•](#é™„å½•)

---

## 1. å…¨å±€ç°çŠ¶æ¢³ç†

### 1.1 é¡¹ç›®å®šä½

| ç»´åº¦ | æè¿° |
|------|------|
| **ä¸šåŠ¡å®šä½** | ä¸­å°ä¼ä¸šæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å° (5000-10000äºº) |
| **æŠ€æœ¯æ¶æ„** | Spring Boot 3.5.8 + å¾®æœåŠ¡æ¶æ„ |
| **è®¾å¤‡å‚å•†** | ç†µåŸºç§‘æŠ€(Entropy)ã€ä¸­æ§æ™ºæ…§(ZKTeco) |
| **é€šè®¯åè®®** | å®‰é˜²PUSHåè®® V4.8ã€è€ƒå‹¤PUSHåè®® V4.0ã€æ¶ˆè´¹PUSHåè®® V1.0 |

### 1.2 æ ¸å¿ƒæœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      IOE-DREAM é—¨ç¦ç³»ç»Ÿæ¶æ„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        ioedream-device-comm-service (8087)              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ TCPæœåŠ¡å™¨(5005) - æ¥æ”¶è®¾å¤‡æ¨é€                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ TcpPushServer                                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ MessageRouter                                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ ProtocolAdapterFactory                          â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ åè®®å¤„ç†å™¨                                          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ AccessProtocolHandler (é—¨ç¦)                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ AttendanceProtocolHandler (è€ƒå‹¤)              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ ConsumeProtocolHandler (æ¶ˆè´¹)                  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         ioedream-access-service (8090)                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ AccessRecordController                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ createAccessRecord() - æ¥æ”¶è®¾å¤‡ä¸Šä¼ è®°å½•         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ queryAccessRecords() - æŸ¥è¯¢é€šè¡Œè®°å½•            â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ BiometricAuthController (backup)                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ accessAuthenticate() - é—¨ç¦è®¾å¤‡éªŒè¯            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ attendanceAuthenticate() - è€ƒå‹¤è®¾å¤‡éªŒè¯        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ consumeAuthenticate() - æ¶ˆè´¹è®¾å¤‡éªŒè¯           â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ OfflineAccessController (backup)                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ performOfflineAccessVerification() - ç¦»çº¿éªŒè¯   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æ•°æ®æ¨¡å‹å…³é”®å­—æ®µ

**åŒºåŸŸé—¨ç¦æ‰©å±•å®ä½“ (AreaAccessExtEntity)**:
```java
@TableName("t_access_area_ext")
public class AreaAccessExtEntity extends BaseEntity {
    
    @TableField("access_level")      // é—¨ç¦çº§åˆ«
    private Integer accessLevel;
    
    @TableField("access_mode")        // é—¨ç¦æ¨¡å¼
    private String accessMode;
    
    @TableField("verification_mode")  // â­ éªŒè¯æ–¹å¼ (å…³é”®å­—æ®µ)
    private String verificationMode;
    
    @TableField("ext_config")         // æ‰©å±•é…ç½®(JSON)
    private String extConfig;
}
```

**å…³é”®å‘ç°**: `verification_mode`å­—æ®µå­˜åœ¨ä½†**æœªè¢«å……åˆ†åˆ©ç”¨**!

---

## 2. è®¾å¤‡é€šè®¯åè®®æ·±åº¦åˆ†æ

### 2.1 åè®®æ¥æº

| åè®®ç±»å‹ | æ–‡æ¡£ç‰ˆæœ¬ | å‚å•† | æ–‡ä»¶ä½ç½® |
|---------|---------|------|---------|
| **å®‰é˜²PUSHåè®®** | V4.8 (2024-01-07) | ç†µåŸºç§‘æŠ€(Entropy) | `documentation-backup-20251216-190503/å„ä¸ªè®¾å¤‡é€šè®¯åè®®/` |
| **è€ƒå‹¤PUSHåè®®** | V4.0 (2021-01-13) | ç†µåŸºç§‘æŠ€(Entropy) | åŒä¸Š |
| **æ¶ˆè´¹PUSHåè®®** | V1.0 (2018-12-25) | ä¸­æ§æ™ºæ…§(ZKTeco) | åŒä¸Š |

### 2.2 åå°éªŒè¯åè®® (å…³é”®åè®®)

**åè®®è·¯å¾„**: å®‰é˜²PUSHåè®® V4.8 â†’ **13. åå°éªŒè¯**

#### 2.2.1 å·¥ä½œæµç¨‹

```mermaid
sequenceDiagram
    participant é—¨ç¦è®¾å¤‡
    participant è®¾å¤‡é€šè®¯æœåŠ¡
    participant é—¨ç¦æœåŠ¡
    participant æƒé™éªŒè¯
    
    é—¨ç¦è®¾å¤‡->>é—¨ç¦è®¾å¤‡: 1. é‡‡é›†ç”Ÿç‰©ç‰¹å¾
    é—¨ç¦è®¾å¤‡->>é—¨ç¦è®¾å¤‡: 2. æœ¬åœ°è¯†åˆ«åŒ¹é…userId
    é—¨ç¦è®¾å¤‡->>è®¾å¤‡é€šè®¯æœåŠ¡: 3. å‘é€éªŒè¯è¯·æ±‚<br/>POST /iclock/cdata?SN=xxx&AuthType=device
    Note over é—¨ç¦è®¾å¤‡,è®¾å¤‡é€šè®¯æœåŠ¡: è®¾å¤‡å·²è¯†åˆ«ç”¨æˆ·èº«ä»½<br/>ä½†æœªéªŒè¯æƒé™é€»è¾‘
    è®¾å¤‡é€šè®¯æœåŠ¡->>é—¨ç¦æœåŠ¡: 4. è½¬å‘éªŒè¯è¯·æ±‚
    é—¨ç¦æœåŠ¡->>æƒé™éªŒè¯: 5. éªŒè¯æƒé™é€»è¾‘
    Note over é—¨ç¦æœåŠ¡,æƒé™éªŒè¯: æ£€æŸ¥:<br/>- åæ½œè§„åˆ™<br/>- æ—¶é—´æ®µæƒé™<br/>- é»‘åå•<br/>- é—¨ç¦çº§åˆ«
    æƒé™éªŒè¯-->>é—¨ç¦æœåŠ¡: 6. è¿”å›éªŒè¯ç»“æœ
    é—¨ç¦æœåŠ¡-->>è®¾å¤‡é€šè®¯æœåŠ¡: 7. è¿”å›ç»“æœ+æ§åˆ¶æŒ‡ä»¤
    è®¾å¤‡é€šè®¯æœåŠ¡-->>é—¨ç¦è®¾å¤‡: 8. HTTP 200 OK<br/>AUTH=SUCCEED/FAILED
    alt éªŒè¯æˆåŠŸ
        é—¨ç¦è®¾å¤‡->>é—¨ç¦è®¾å¤‡: 9. å¼€é—¨(ç»§ç”µå™¨)
    else éªŒè¯å¤±è´¥
        é—¨ç¦è®¾å¤‡->>é—¨ç¦è®¾å¤‡: 9. æ‹’ç»é€šè¡Œ(è¯­éŸ³æç¤º)
    end
    é—¨ç¦è®¾å¤‡->>è®¾å¤‡é€šè®¯æœåŠ¡: 10. ä¸Šä¼ é€šè¡Œè®°å½•
```

#### 2.2.2 HTTPåè®®è¯¦è§£

**å®¢æˆ·ç«¯è¯·æ±‚**:
```http
POST /iclock/cdata?SN=${SerialNumber}&AuthType=device HTTP/1.1
Host: ${ServerIP}:${ServerPort}
Content-Length: ${XXX}

time=${XXX}{HT}pin=${XXX}{HT}cardno=${XXX}{HT}addrtype=${XXX}{HT}eventaddr=${XXX}{HT}event=${XXX}{HT}inoutstatus=${XXX}{HT}verifytype=${XXX}
```

**å­—æ®µè¯´æ˜**:
- `SN`: è®¾å¤‡åºåˆ—å·
- `AuthType=device`: â­ **åå°éªŒè¯æ¨¡å¼æ ‡è¯†**
- `time`: éªŒè¯æ—¶é—´ (YYYY-MM-DD HH:MM:SS)
- `pin`: å·¥å· (è®¾å¤‡å·²è¯†åˆ«)
- `cardno`: å¡å·
- `event`: äº‹ä»¶ç±»å‹ (0=æ­£å¸¸åˆ·å¡å¼€é—¨, 14=æ­£å¸¸æŒ‰æŒ‡çº¹å¼€é—¨)
- `verifytype`: éªŒè¯æ–¹å¼ (è§é™„å½•3)

**æœåŠ¡å™¨å“åº”**:
```http
HTTP/1.1 200 OK
Content-Length: ${XXX}

AUTH=${SUCCEED|FAILED|TIMEOUT}{CR}{LF}time=${XXX}{HT}pin=${XXX}{HT}cardno=${XXX}{HT}addrtype=${XXX}{HT}eventaddr=${XXX}{HT}event=${XXX}{HT}inoutstatus=${XXX}{HT}verifytype=${XXX}{CR}{LF}CONTROL$(SP)DEVICE$(SP)AABBCCDDEE{CR}{LF}TIPS=${XXX}
```

**å“åº”å­—æ®µ**:
- `AUTH`: â­ **éªŒè¯ç»“æœ** (SUCCEED/FAILED/TIMEOUT)
- ç¬¬äºŒè¡Œ: åŸå§‹äº‹ä»¶è®°å½• (å›æ˜¾)
- ç¬¬ä¸‰è¡Œ: æ§åˆ¶æŒ‡ä»¤ (è§"CONTROL DEVICE æ§åˆ¶ç±»å‘½ä»¤")
- `TIPS`: éªŒè¯æç¤ºä¿¡æ¯ (UTF-8ç¼–ç , å¯é€‰)

#### 2.2.3 å…³é”®å‘ç°

1. **è®¾å¤‡ç«¯å·²å®Œæˆè¯†åˆ«**: `pin`(å·¥å·)å’Œ`cardno`(å¡å·)ç”±è®¾å¤‡è¯†åˆ«åä¸Šä¼ 
2. **åå°ä»…åšæƒé™éªŒè¯**: æœåŠ¡å™¨ä¸åšç”Ÿç‰©è¯†åˆ«,åªéªŒè¯ä¸šåŠ¡é€»è¾‘
3. **å®æ—¶äº¤äº’**: è®¾å¤‡ç­‰å¾…æœåŠ¡å™¨å“åº”åæ‰å¼€é—¨,ä¸æ”¯æŒç¦»çº¿
4. **é€‚ç”¨åœºæ™¯**: 
   - âœ… éœ€è¦å¤æ‚æƒé™é€»è¾‘ (åæ½œã€äº’é”ã€å¤šäººéªŒè¯)
   - âœ… éœ€è¦å®æ—¶é»‘åå•ç®¡ç†
   - âŒ ç½‘ç»œè¦æ±‚é«˜ (å¿…é¡»åœ¨çº¿)

---

## 3. ä¸¤ç§éªŒè¯æ¨¡å¼è¯¦è§£

### 3.1 æ¨¡å¼å¯¹æ¯”

| ç»´åº¦ | è®¾å¤‡ç«¯éªŒè¯æ¨¡å¼ (Edge) | åå°éªŒè¯æ¨¡å¼ (Backend) |
|------|---------------------|---------------------|
| **è‹±æ–‡åç§°** | Device-side Verification | Backend Verification |
| **è¯†åˆ«ä½ç½®** | è®¾å¤‡ç«¯ | è®¾å¤‡ç«¯ |
| **éªŒè¯ä½ç½®** | â­ è®¾å¤‡ç«¯ | â­ æœåŠ¡å™¨ç«¯ |
| **æ§åˆ¶ä½ç½®** | è®¾å¤‡ç«¯ | è®¾å¤‡ç«¯(æ”¶åˆ°æœåŠ¡å™¨å“åº”å) |
| **ç¦»çº¿å¯ç”¨** | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ(å¿…é¡»åœ¨çº¿) |
| **ç½‘ç»œè¦æ±‚** | ä½(ä»…åŒæ­¥æ•°æ®) | é«˜(å®æ—¶éªŒè¯) |
| **å“åº”æ—¶é—´** | < 1ç§’ | 1-3ç§’(ä¾èµ–ç½‘ç»œ) |
| **æƒé™å¤æ‚åº¦** | ç®€å•æƒé™ | âœ… å¤æ‚æƒé™(åæ½œ/äº’é”) |
| **æ•°æ®åŒæ­¥** | æ‰¹é‡ä¸Šä¼  | å®æ—¶ä¸Šä¼  |
| **è®¾å¤‡å­˜å‚¨** | âš ï¸ éœ€è¦(äººå‘˜+æƒé™) | ä»…éœ€äººå‘˜æ¨¡æ¿ |
| **é…ç½®æ–¹å¼** | è®¾å¤‡å‚æ•°é…ç½® | â­ `AuthType=device` |

### 3.2 è®¾å¤‡ç«¯éªŒè¯æ¨¡å¼ (Edge Verification)

#### 3.2.1 å·¥ä½œæµç¨‹

```
ã€æ•°æ®ä¸‹å‘ã€‘è½¯ä»¶ç«¯ â†’ è®¾å¤‡ç«¯
  â”œâ”€ äººå‘˜åŸºç¡€ä¿¡æ¯(å§“åã€å·¥å·ã€éƒ¨é—¨)
  â”œâ”€ ç”Ÿç‰©æ¨¡æ¿æ•°æ®(äººè„¸/æŒ‡çº¹ç‰¹å¾å‘é‡)
  â”œâ”€ æƒé™æ•°æ®(æ—¶é—´æ®µã€åŒºåŸŸã€æœ‰æ•ˆæœŸ)
  â””â”€ é»‘åå•æ•°æ®

ã€å®æ—¶éªŒè¯ã€‘è®¾å¤‡ç«¯å®Œå…¨è‡ªä¸» â­ æ ¸å¿ƒç‰¹æ€§
  â”œâ”€ æœ¬åœ°è¯†åˆ«: è®¾å¤‡å†…åµŒç®—æ³•è¿›è¡Œ1:Næ¯”å¯¹
  â”œâ”€ æœ¬åœ°éªŒè¯: æ£€æŸ¥æœ¬åœ°æƒé™è¡¨
  â”‚   â”œâ”€ æ—¶é—´æ®µéªŒè¯
  â”‚   â”œâ”€ åŒºåŸŸæƒé™éªŒè¯
  â”‚   â””â”€ æœ‰æ•ˆæœŸéªŒè¯
  â”œâ”€ æœ¬åœ°æ§åˆ¶: ç›´æ¥å¼€é—¨,æ— éœ€ç­‰å¾…æœåŠ¡å™¨
  â””â”€ ç¦»çº¿å¯ç”¨: ç½‘ç»œä¸­æ–­æ—¶ä»å¯æ­£å¸¸å·¥ä½œ

ã€äº‹åä¸Šä¼ ã€‘è®¾å¤‡ç«¯ â†’ è½¯ä»¶ç«¯
  â””â”€ æ‰¹é‡ä¸Šä¼ é€šè¡Œè®°å½•(æ¯åˆ†é’Ÿæˆ–ç´¯è®¡100æ¡)

ã€æŠ€æœ¯ä¼˜åŠ¿ã€‘
  âœ… å“åº”é€Ÿåº¦å¿«: è¯†åˆ«+éªŒè¯+å¼€é—¨ < 1ç§’
  âœ… ç¦»çº¿å¯ç”¨: ç½‘ç»œæ•…éšœä¸å½±å“é€šè¡Œ
  âœ… é™ä½æœåŠ¡å™¨å‹åŠ›: 1000æ¬¡é€šè¡Œåªéœ€å¤„ç†è®°å½•å­˜å‚¨
  âœ… æ•°æ®å®‰å…¨: ç”Ÿç‰©ç‰¹å¾åœ¨è®¾å¤‡ç«¯åŠ å¯†å­˜å‚¨

ã€æŠ€æœ¯æŒ‘æˆ˜ã€‘
  âš ï¸ æƒé™åŒæ­¥: å˜æ›´éœ€å®æ—¶æ¨é€åˆ°æ‰€æœ‰è®¾å¤‡
  âš ï¸ è®¾å¤‡å­˜å‚¨: å¤§å‹å›­åŒº10000+äººå‘˜,è®¾å¤‡å®¹é‡æœ‰é™
  âš ï¸ æ•°æ®ä¸€è‡´æ€§: è®¾å¤‡ç«¯ä¸è½¯ä»¶ç«¯æ•°æ®åŒæ­¥å»¶è¿Ÿ
  âš ï¸ å¤æ‚é€»è¾‘: åæ½œã€äº’é”ç­‰é€»è¾‘éš¾ä»¥åœ¨è®¾å¤‡ç«¯å®ç°
```

#### 3.2.2 é€‚ç”¨åœºæ™¯

- âœ… **ä¸­å°ä¼ä¸š** (< 1000äºº)
- âœ… **ç½‘ç»œä¸ç¨³å®š**ç¯å¢ƒ
- âœ… **ç®€å•æƒé™**åœºæ™¯ (æ—¶é—´æ®µ+åŒºåŸŸ)
- âŒ å¤æ‚æƒé™åœºæ™¯ (åæ½œã€äº’é”ã€å¤šäººéªŒè¯)

### 3.3 åå°éªŒè¯æ¨¡å¼ (Backend Verification)

#### 3.3.1 å·¥ä½œæµç¨‹

```
ã€æ•°æ®ä¸‹å‘ã€‘è½¯ä»¶ç«¯ â†’ è®¾å¤‡ç«¯
  â””â”€ äººå‘˜ç”Ÿç‰©æ¨¡æ¿æ•°æ®(ä»…ç”¨äºè¯†åˆ«)

ã€å®æ—¶éªŒè¯ã€‘è®¾å¤‡ç«¯è¯†åˆ« + è½¯ä»¶ç«¯éªŒè¯ â­ æ ¸å¿ƒæ¶æ„
  æ­¥éª¤1: è®¾å¤‡é‡‡é›†ç”Ÿç‰©ç‰¹å¾ â†’ æœ¬åœ°è¯†åˆ«åŒ¹é…userId
  æ­¥éª¤2: è®¾å¤‡å‘é€éªŒè¯è¯·æ±‚åˆ°è½¯ä»¶ç«¯
         POST /iclock/cdata?SN=xxx&AuthType=device
         è¯·æ±‚ä½“: pin=xxx&cardno=xxx&event=0&verifytype=1
  æ­¥éª¤3: è½¯ä»¶ç«¯æ‰§è¡Œæƒé™éªŒè¯ â­ æ ¸å¿ƒé€»è¾‘
         â”œâ”€ åæ½œéªŒè¯ (åŒä¸€ç”¨æˆ·ä¸èƒ½è¿ç»­è¿›å…¥)
         â”œâ”€ äº’é”éªŒè¯ (Aé—¨å¼€æ—¶Bé—¨ä¸èƒ½å¼€)
         â”œâ”€ æ—¶é—´æ®µéªŒè¯
         â”œâ”€ é»‘åå•éªŒè¯
         â”œâ”€ é—¨ç¦çº§åˆ«éªŒè¯
         â””â”€ å¤šäººéªŒè¯ (éœ€NäººåŒæ—¶éªŒè¯)
  æ­¥éª¤4: è½¯ä»¶ç«¯è¿”å›ç»“æœ
         HTTP 200 OK
         AUTH=SUCCEED/FAILED
         CONTROL DEVICE AABBCCDDEE
         TIPS=æ¬¢è¿å›æ¥/ç¦æ­¢é€šè¡Œ
  æ­¥éª¤5: è®¾å¤‡æ ¹æ®ç»“æœ â†’ å¼€é—¨/æ‹’ç»
  æ­¥éª¤6: è®¾å¤‡ä¸Šä¼ é€šè¡Œè®°å½• (å®æ—¶)

ã€æŠ€æœ¯ä¼˜åŠ¿ã€‘
  âœ… å¤æ‚æƒé™æ”¯æŒ: åæ½œã€äº’é”ã€å¤šäººéªŒè¯
  âœ… æƒé™å®æ—¶ç”Ÿæ•ˆ: æƒé™å˜æ›´ç«‹å³ç”Ÿæ•ˆ,æ— éœ€åŒæ­¥
  âœ… é›†ä¸­ç®¡ç†: æƒé™é€»è¾‘ç»Ÿä¸€ç®¡ç†,ä¾¿äºå®¡è®¡
  âœ… è®¾å¤‡å­˜å‚¨å°: åªéœ€å­˜å‚¨äººå‘˜æ¨¡æ¿,ä¸å­˜æƒé™
  âœ… çµæ´»æ‰©å±•: æ–°å¢æƒé™è§„åˆ™æ— éœ€å‡çº§è®¾å¤‡

ã€æŠ€æœ¯é™åˆ¶ã€‘
  âš ï¸ ç½‘ç»œä¾èµ–: å¿…é¡»åœ¨çº¿æ‰èƒ½éªŒè¯ (æ–­ç½‘æ— æ³•é€šè¡Œ)
  âš ï¸ å“åº”æ—¶é—´: ä¾èµ–ç½‘ç»œå»¶è¿Ÿ (1-3ç§’)
  âš ï¸ æœåŠ¡å™¨å‹åŠ›: æ¯æ¬¡é€šè¡Œéƒ½éœ€è¦éªŒè¯
  âš ï¸ å•ç‚¹æ•…éšœ: æœåŠ¡å™¨æ•…éšœå½±å“å…¨éƒ¨è®¾å¤‡
```

#### 3.3.2 é€‚ç”¨åœºæ™¯

- âœ… **å¤§å‹ä¼ä¸š** (> 1000äºº)
- âœ… **ç½‘ç»œç¨³å®š**ç¯å¢ƒ
- âœ… **å¤æ‚æƒé™**åœºæ™¯ (åæ½œã€äº’é”ã€VIPå¤šäººéªŒè¯)
- âœ… **é«˜å®‰å…¨**åœºæ™¯ (å®æ—¶é»‘åå•ã€å¼‚å¸¸è¡Œä¸ºæ£€æµ‹)

### 3.4 æ¨¡å¼åˆ‡æ¢é…ç½®

**è®¾å¤‡å‚æ•°é…ç½®æ–¹å¼**:
```yaml
# æ–¹å¼1: è®¾å¤‡Webé…ç½®ç•Œé¢
è®¾ç½® â†’ é€šè®¯å‚æ•° â†’ éªŒè¯æ¨¡å¼
  - [x] è®¾å¤‡ç«¯éªŒè¯ (é»˜è®¤)
  - [ ] åå°éªŒè¯

# æ–¹å¼2: åè®®ä¸‹å‘ (12.5.1 SET OPTIONS)
VerificationMode=1  # 1=è®¾å¤‡ç«¯éªŒè¯, 2=åå°éªŒè¯

# æ–¹å¼3: æ•°æ®åº“é…ç½® (æ¨è)
t_access_area_ext.verification_mode='backend'  # 'edge' æˆ– 'backend'
```

---

## 4. ä»£ç æ¶æ„ç°çŠ¶åˆ†æ

### 4.1 å½“å‰å®ç°æ¶æ„

#### 4.1.1 è®¾å¤‡é€šè®¯æœåŠ¡ (ioedream-device-comm-service)

**TCPæœåŠ¡å™¨**: `TcpPushServer` (ç«¯å£5005)
```java
// æ¥æ”¶è®¾å¤‡æ¨é€çš„é€šè¡Œè®°å½•/éªŒè¯è¯·æ±‚
@Component
public class TcpPushServer {
    @Resource
    private MessageRouter messageRouter;
    
    public void start() {
        ServerBootstrap bootstrap = new ServerBootstrap();
        bootstrap.childHandler(new ChannelInitializer<SocketChannel>() {
            @Override
            protected void initChannel(SocketChannel ch) {
                ch.pipeline().addLast(new ProtocolDecoder());
                ch.pipeline().addLast(new MessageHandler(messageRouter));
            }
        });
        bootstrap.bind(5005).sync();
    }
}
```

**åè®®å¤„ç†å™¨**: `AccessProtocolHandler`
```java
@Component
public class AccessProtocolHandler implements ProtocolHandler {
    
    @Override
    public ProtocolMessage parseMessage(byte[] data) {
        // è§£æTCPåè®®æ¶ˆæ¯
        // è¿”å›: userId, deviceId, event, verifyTypeç­‰
    }
    
    @Override
    public void processMessage(ProtocolMessage message) {
        // è°ƒç”¨gatewayè½¬å‘åˆ°access-service
        gatewayServiceClient.callAccessService(
            "/api/v1/access/record/create",
            HttpMethod.POST,
            message
        );
    }
}
```

#### 4.1.2 é—¨ç¦æœåŠ¡ (ioedream-access-service)

**å½“å‰å®ç°**: `AccessRecordController`
```java
@RestController
@RequestMapping("/access/record")
public class AccessRecordController {
    
    @PostMapping("/create")
    public ResponseDTO<Long> createAccessRecord(@RequestBody AccessRecordAddForm form) {
        // âš ï¸ ä»…æ¥æ”¶è®¾å¤‡ä¸Šä¼ çš„è®°å½•,ä¸åšéªŒè¯!
        return accessEventService.createAccessRecord(form);
    }
}
```

**Backupç›®å½•å®ç°** (æœªä½¿ç”¨): `BiometricAuthController`
```java
@RestController
@RequestMapping("/api/v1/biometric")
public class BiometricAuthController {
    
    @PostMapping("/access/authenticate")
    @Operation(summary = "é—¨ç¦è®¾å¤‡éªŒè¯", description = "é—¨ç¦è®¾å¤‡ä¸“ç”¨ç”Ÿç‰©è¯†åˆ«ç‰¹å¾éªŒè¯æ¥å£")
    public ResponseDTO<BiometricAuthResultVO> accessAuthenticate(
            @RequestBody BiometricAuthForm authForm) {
        // â­ è¿™æ‰æ˜¯åå°éªŒè¯çš„å®ç°!
        // 1. éªŒè¯æƒé™
        // 2. è¿”å›AUTH=SUCCEED/FAILED
        // 3. è¿”å›æ§åˆ¶æŒ‡ä»¤
    }
}
```

### 4.2 å…³é”®é—®é¢˜åˆ†æ

| é—®é¢˜ç±»åˆ« | å…·ä½“é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ |
|---------|---------|---------|
| **æ¶æ„ä¸ä¸€è‡´** | æ–‡æ¡£æè¿°"è¾¹ç¼˜è‡ªä¸»éªŒè¯",ä»£ç å®ç°"äº‹åè®°å½•æ¥æ”¶" | ğŸ”´ P0 |
| **åŠŸèƒ½ç¼ºå¤±** | åå°éªŒè¯APIåœ¨backupç›®å½•,æœªéƒ¨ç½²ä½¿ç”¨ | ğŸ”´ P0 |
| **å­—æ®µæœªä½¿ç”¨** | `verification_mode`å­—æ®µå­˜åœ¨ä½†æœªä½¿ç”¨ | ğŸŸ  P1 |
| **ç¦»çº¿ä¸å¯ç”¨** | å½“å‰æ¶æ„ä¸æ”¯æŒç¦»çº¿é€šè¡Œ | ğŸŸ¡ P2 |
| **æ–‡æ¡£è¯¯å¯¼** | æ–‡æ¡£å£°ç§°"ç¦»çº¿å¯ç”¨",å®é™…ä¸æ”¯æŒ | ğŸ”´ P0 |

### 4.3 ä»£ç åˆ†å¸ƒæƒ…å†µ

```
microservices/
â”œâ”€â”€ ioedream-device-comm-service/          # è®¾å¤‡é€šè®¯æœåŠ¡
â”‚   â””â”€â”€ src/main/java/
â”‚       â””â”€â”€ net/lab1024/sa/devicecomm/
â”‚           â””â”€â”€ protocol/
â”‚               â”œâ”€â”€ server/TcpPushServer.java         # âœ… TCPæœåŠ¡å™¨
â”‚               â”œâ”€â”€ router/MessageRouter.java         # âœ… æ¶ˆæ¯è·¯ç”±
â”‚               â””â”€â”€ handler/impl/
â”‚                   â””â”€â”€ AccessProtocolHandler.java    # âœ… é—¨ç¦åè®®å¤„ç†
â”‚
â”œâ”€â”€ ioedream-access-service/               # é—¨ç¦æœåŠ¡(å½“å‰ä½¿ç”¨)
â”‚   â””â”€â”€ src/main/java/
â”‚       â””â”€â”€ net/lab1024/sa/access/
â”‚           â””â”€â”€ controller/
â”‚               â”œâ”€â”€ AccessFileController.java          # âœ… æ–‡ä»¶ä¸Šä¼ 
â”‚               â””â”€â”€ AccessRecordController.java (?) # âŒ ç¼ºå¤±(OpenAPI)
â”‚
â””â”€â”€ ioedream-access-service-backup/        # é—¨ç¦æœåŠ¡(å¤‡ä»½-æœªä½¿ç”¨)
    â””â”€â”€ src/main/java/
        â””â”€â”€ net/lab1024/sa/access/
            â”œâ”€â”€ controller/
            â”‚   â”œâ”€â”€ BiometricAuthController.java       # â­ åå°éªŒè¯API
            â”‚   â”œâ”€â”€ OfflineAccessController.java       # â­ ç¦»çº¿éªŒè¯API
            â”‚   â””â”€â”€ EnhancedAccessSecurityController.java  # å¢å¼ºå®‰å…¨
            â”œâ”€â”€ entity/
            â”‚   â””â”€â”€ AreaAccessExtEntity.java           # âœ… éªŒè¯æ¨¡å¼å­—æ®µ
            â”œâ”€â”€ service/
            â”‚   â”œâ”€â”€ OfflineModeService.java            # â­ ç¦»çº¿æ¨¡å¼æœåŠ¡
            â”‚   â””â”€â”€ BluetoothAccessService.java        # è“ç‰™é—¨ç¦
            â””â”€â”€ template/
                â””â”€â”€ AbstractAccessFlowTemplate.java    # â­ éªŒè¯æµç¨‹æ¨¡æ¿
```

---

## 5. æ–‡æ¡£ä¸€è‡´æ€§é—®é¢˜

### 5.1 é—®é¢˜æ¸…å•

| æ–‡æ¡£ | æè¿°å†…å®¹ | å®é™…æƒ…å†µ | é—®é¢˜ç­‰çº§ |
|------|---------|---------|---------|
| **CLAUDE.md** | "è¾¹ç¼˜è‡ªä¸»éªŒè¯æ¨¡å¼" | æœªå®ç° | ğŸ”´ P0 |
| **01-ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£.md** | "ç¦»çº¿å¯ç”¨:ç½‘ç»œæ•…éšœä¸å½±å“é€šè¡Œ" | ä¸æ”¯æŒ | ğŸ”´ P0 |
| **01-ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£.md** | "è®¾å¤‡ç«¯å®Œå…¨è‡ªä¸»éªŒè¯" | ä»…äº‹åä¸Šä¼  | ğŸ”´ P0 |
| **DOCUMENTATION_NAVIGATION_CENTER.md** | å¼•ç”¨è¾¹ç¼˜éªŒè¯ç‰¹æ€§ | æœªå®ç° | ğŸŸ  P1 |

### 5.2 è¯¯å¯¼æ€§æè¿°ç¤ºä¾‹

**CLAUDE.mdç¬¬231è¡Œ**:
```markdown
- **ioedream-access-service** (8090): é—¨ç¦ç®¡ç†æœåŠ¡ï¼ˆé‡‡ç”¨è¾¹ç¼˜è‡ªä¸»éªŒè¯æ¨¡å¼ âš ï¸ æ¥æ”¶è®¾å¤‡ä¸Šä¼ è®°å½•ï¼‰
```

**é—®é¢˜**: 
- âŒ "é‡‡ç”¨è¾¹ç¼˜è‡ªä¸»éªŒè¯æ¨¡å¼" - å®é™…æœªå®ç°
- âš ï¸ "æ¥æ”¶è®¾å¤‡ä¸Šä¼ è®°å½•" - ä»…éƒ¨åˆ†æ­£ç¡®,ç¼ºå°‘åå°éªŒè¯

**01-ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£.mdç¬¬218-248è¡Œ**:
```markdown
### 3.4.1 æ¨¡å¼1: è¾¹ç¼˜è‡ªä¸»éªŒè¯æ¨¡å¼ (é—¨ç¦ç³»ç»Ÿ)

ã€å®æ—¶éªŒè¯ã€‘è®¾å¤‡ç«¯å®Œå…¨è‡ªä¸» â­ æ ¸å¿ƒç‰¹æ€§
  â”œâ”€ æœ¬åœ°è¯†åˆ«: è®¾å¤‡å†…åµŒç®—æ³•è¿›è¡Œ1:Næ¯”å¯¹
  â”œâ”€ æœ¬åœ°éªŒè¯: æ£€æŸ¥æœ¬åœ°æƒé™è¡¨
  â”œâ”€ æœ¬åœ°æ§åˆ¶: ç›´æ¥å¼€é—¨,æ— éœ€ç­‰å¾…æœåŠ¡å™¨
  â””â”€ ç¦»çº¿å¯ç”¨: ç½‘ç»œä¸­æ–­æ—¶ä»å¯æ­£å¸¸å·¥ä½œ

ã€æŠ€æœ¯ä¼˜åŠ¿ã€‘
  âœ… ç¦»çº¿å¯ç”¨: ç½‘ç»œæ•…éšœä¸å½±å“é€šè¡Œ
```

**é—®é¢˜**:
- âŒ å½“å‰ä»£ç **å®Œå…¨ä¸æ”¯æŒ**è¿™ä¸ªæ¨¡å¼
- âŒ "ç¦»çº¿å¯ç”¨"æ˜¯**è™šå‡å®£ä¼ **

---

## 6. å®Œæ•´ä¼˜åŒ–æ–¹æ¡ˆ

### 6.1 ä¼˜åŒ–ç›®æ ‡

| ä¼˜å…ˆçº§ | ç›®æ ‡ | éªŒæ”¶æ ‡å‡† |
|-------|------|---------|
| **P0** | æ–‡æ¡£ä¸ä»£ç ä¸€è‡´æ€§ | æ‰€æœ‰æ–‡æ¡£æè¿°ä¸ä»£ç å®ç°100%ä¸€è‡´ |
| **P0** | åå°éªŒè¯æ¨¡å¼å®ç° | æ”¯æŒåå°éªŒè¯åè®®,æ»¡è¶³å¤æ‚æƒé™åœºæ™¯ |
| **P1** | åŒæ¨¡å¼æ¶æ„ | æ”¯æŒè®¾å¤‡ç«¯éªŒè¯+åå°éªŒè¯ä¸¤ç§æ¨¡å¼ |
| **P1** | éªŒè¯æ¨¡å¼é…ç½® | é€šè¿‡æ•°æ®åº“é…ç½®åˆ‡æ¢éªŒè¯æ¨¡å¼ |
| **P2** | ç¦»çº¿éªŒè¯æ”¯æŒ | è®¾å¤‡ç«¯éªŒè¯æ¨¡å¼æ”¯æŒç¦»çº¿é€šè¡Œ |
| **P2** | æ€§èƒ½ä¼˜åŒ– | åå°éªŒè¯å“åº”æ—¶é—´<500ms (P99) |

### 6.2 æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ

#### 6.2.1 æ–°æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IOE-DREAM é—¨ç¦ç³»ç»Ÿç»Ÿä¸€éªŒè¯æ¶æ„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              è®¾å¤‡ç«¯ (é—¨ç¦è®¾å¤‡)                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ 1. ç”Ÿç‰©ç‰¹å¾é‡‡é›†                                                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 2. æœ¬åœ°è¯†åˆ«åŒ¹é… (1:N) â†’ userId                                  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                              â”‚                                         â”‚ â”‚
â”‚  â”‚                              â–¼                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ 3. éªŒè¯æ¨¡å¼åˆ¤æ–­ (è®¾å¤‡å‚æ•°é…ç½®)                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ verification_mode = 'edge' â†’ è®¾å¤‡ç«¯éªŒè¯                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ verification_mode = 'backend' â†’ åå°éªŒè¯                 â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚                                    â”‚                  â”‚
â”‚         è®¾å¤‡ç«¯éªŒè¯  â”‚                                    â”‚ åå°éªŒè¯          â”‚
â”‚                     â–¼                                    â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ¨¡å¼1: è®¾å¤‡ç«¯éªŒè¯(Edge)     â”‚      â”‚  æ¨¡å¼2: åå°éªŒè¯(Backend)     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 4. æœ¬åœ°æƒé™éªŒè¯:             â”‚      â”‚ 4. HTTPéªŒè¯è¯·æ±‚:              â”‚   â”‚
â”‚  â”‚    â”œâ”€ æ—¶é—´æ®µéªŒè¯             â”‚      â”‚    POST /iclock/cdata        â”‚   â”‚
â”‚  â”‚    â”œâ”€ åŒºåŸŸæƒé™éªŒè¯           â”‚      â”‚    ?SN=xxx&AuthType=device   â”‚   â”‚
â”‚  â”‚    â””â”€ æœ‰æ•ˆæœŸéªŒè¯             â”‚      â”‚    Body: pin=xxx&event=0     â”‚   â”‚
â”‚  â”‚ 5. ç›´æ¥å¼€é—¨æ§åˆ¶              â”‚      â”‚                              â”‚   â”‚
â”‚  â”‚ 6. æ‰¹é‡ä¸Šä¼ è®°å½•(å»¶è¿Ÿ)        â”‚      â”‚ 5. ç­‰å¾…æœåŠ¡å™¨å“åº”             â”‚   â”‚
â”‚  â”‚    æ¯åˆ†é’Ÿ/100æ¡              â”‚      â”‚    â”œâ”€ AUTH=SUCCEED â†’ å¼€é—¨   â”‚   â”‚
â”‚  â”‚                              â”‚      â”‚    â””â”€ AUTH=FAILED â†’ æ‹’ç»    â”‚   â”‚
â”‚  â”‚ âœ… ç¦»çº¿å¯ç”¨                  â”‚      â”‚ 6. å®æ—¶ä¸Šä¼ è®°å½•              â”‚   â”‚
â”‚  â”‚ âœ… å“åº”<1ç§’                  â”‚      â”‚                              â”‚   â”‚
â”‚  â”‚ âš ï¸ ç®€å•æƒé™                  â”‚      â”‚ âœ… å¤æ‚æƒé™                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ âœ… å®æ—¶ç”Ÿæ•ˆ                  â”‚   â”‚
â”‚                     â”‚                  â”‚ âš ï¸ å¿…é¡»åœ¨çº¿                  â”‚   â”‚
â”‚                     â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â”‚                                    â”‚                  â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                      â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ioedream-device-comm-service (TCP 5005)                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ AccessProtocolHandler.handleBackendVerification()               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ è§£æHTTPéªŒè¯è¯·æ±‚                                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ è½¬å‘åˆ°access-service                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€ è¿”å›HTTPå“åº”(AUTH=SUCCEED/FAILED)                            â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ AccessProtocolHandler.handleEdgeVerificationRecord()            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€ æ¥æ”¶è®¾å¤‡ç«¯éªŒè¯åçš„é€šè¡Œè®°å½•                                    â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                      â”‚
â”‚                                      â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ioedream-access-service (8090)                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ AccessVerificationService (æ–°å¢)                                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”œâ”€ verifyBackendAuthentication() - åå°éªŒè¯é€»è¾‘                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚   â”œâ”€ åæ½œéªŒè¯ (åŒä¸€ç”¨æˆ·ä¸èƒ½è¿ç»­è¿›å…¥)                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚   â”œâ”€ äº’é”éªŒè¯ (Aé—¨å¼€æ—¶Bé—¨ä¸èƒ½å¼€)                              â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚   â”œâ”€ æ—¶é—´æ®µéªŒè¯                                                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚   â”œâ”€ é»‘åå•éªŒè¯                                                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚   â””â”€ å¤šäººéªŒè¯                                                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€ createAccessRecord() - è®°å½•é€šè¡Œ                              â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ AreaAccessExtService (å¢å¼º)                                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€ getVerificationMode() - è·å–éªŒè¯æ¨¡å¼é…ç½®                     â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6.2.2 æ ¸å¿ƒä»£ç å®ç°

**AccessVerificationService.java** (æ–°å¢):
```java
@Service
@Slf4j
public class AccessVerificationService {
    
    @Resource
    private AreaAccessExtDao areaAccessExtDao;
    
    @Resource
    private AccessPermissionService permissionService;
    
    @Resource
    private AntiPassbackService antiPassbackService;
    
    /**
     * åå°éªŒè¯æ ¸å¿ƒæ–¹æ³•
     * 
     * @param request éªŒè¯è¯·æ±‚(è®¾å¤‡å·²è¯†åˆ«ç”¨æˆ·èº«ä»½)
     * @return éªŒè¯ç»“æœ
     */
    @Transactional(readOnly = true)
    public BackendAuthResult verifyBackendAuthentication(BackendAuthRequest request) {
        log.info("[åå°éªŒè¯] å¼€å§‹éªŒè¯: userId={}, deviceId={}, event={}", 
                request.getUserId(), request.getDeviceId(), request.getEvent());
        
        // 1. è·å–åŒºåŸŸéªŒè¯æ¨¡å¼é…ç½®
        AreaAccessExtEntity areaExt = areaAccessExtDao.selectByAreaId(request.getAreaId());
        if (!"backend".equals(areaExt.getVerificationMode())) {
            log.warn("[åå°éªŒè¯] åŒºåŸŸæœªé…ç½®åå°éªŒè¯æ¨¡å¼: areaId={}", request.getAreaId());
            return BackendAuthResult.failed("NOT_BACKEND_MODE", "åŒºåŸŸæœªå¯ç”¨åå°éªŒè¯");
        }
        
        // 2. åæ½œéªŒè¯ (Anti-Passback)
        if (!antiPassbackService.verify(request.getUserId(), request.getDeviceId(), 
                                         request.getInOutStatus())) {
            log.warn("[åå°éªŒè¯] åæ½œéªŒè¯å¤±è´¥: userId={}", request.getUserId());
            return BackendAuthResult.failed("ANTI_PASSBACK_VIOLATION", "åæ½œéªŒè¯å¤±è´¥,è¯·ä»æ­£ç¡®çš„é—¨è¿›å‡º");
        }
        
        // 3. äº’é”éªŒè¯ (Interlock)
        if (!interlockService.verify(request.getDeviceId())) {
            log.warn("[åå°éªŒè¯] äº’é”éªŒè¯å¤±è´¥: deviceId={}", request.getDeviceId());
            return BackendAuthResult.failed("INTERLOCK_VIOLATION", "äº’é”é—¨ç¦å†²çª,è¯·ç­‰å¾…");
        }
        
        // 4. æ—¶é—´æ®µéªŒè¯
        if (!permissionService.verifyTimePeriod(request.getUserId(), request.getDeviceId())) {
            log.warn("[åå°éªŒè¯] æ—¶é—´æ®µéªŒè¯å¤±è´¥: userId={}", request.getUserId());
            return BackendAuthResult.failed("INVALID_TIME_PERIOD", "éæœ‰æ•ˆæ—¶é—´æ®µ");
        }
        
        // 5. é»‘åå•éªŒè¯
        if (blacklistService.isBlacklisted(request.getUserId())) {
            log.warn("[åå°éªŒè¯] é»‘åå•éªŒè¯å¤±è´¥: userId={}", request.getUserId());
            return BackendAuthResult.failed("BLACKLIST", "ç”¨æˆ·å·²è¢«åˆ—å…¥é»‘åå•");
        }
        
        // 6. å¤šäººéªŒè¯ (Multi-person Verification)
        if (isMultiPersonRequired(request.getAreaId())) {
            if (!multiPersonService.verify(request)) {
                log.warn("[åå°éªŒè¯] å¤šäººéªŒè¯ç­‰å¾…ä¸­: userId={}", request.getUserId());
                return BackendAuthResult.waiting("MULTI_PERSON_WAITING", "ç­‰å¾…å…¶ä»–æˆæƒäººå‘˜éªŒè¯");
            }
        }
        
        log.info("[åå°éªŒè¯] éªŒè¯é€šè¿‡: userId={}", request.getUserId());
        return BackendAuthResult.success("éªŒè¯é€šè¿‡,æ¬¢è¿è¿›å…¥", buildControlCommand(request));
    }
    
    /**
     * æ„å»ºæ§åˆ¶æŒ‡ä»¤
     */
    private String buildControlCommand(BackendAuthRequest request) {
        // CONTROL DEVICE å‘½ä»¤æ ¼å¼
        // AA=01: å¼€é—¨, BB=é—¨å·, CC=å»¶æ—¶ç§’æ•°
        return String.format("010100%02d03", request.getDoorNumber());
    }
}
```

**AccessBackendAuthController.java** (æ–°å¢):
```java
@RestController
@RequestMapping("/api/v1/access/backend")
@Tag(name = "é—¨ç¦åå°éªŒè¯")
@Slf4j
public class AccessBackendAuthController {
    
    @Resource
    private AccessVerificationService verificationService;
    
    /**
     * åå°éªŒè¯æ¥å£ (è®¾å¤‡HTTPè°ƒç”¨)
     * åè®®: POST /iclock/cdata?SN=xxx&AuthType=device
     */
    @PostMapping("/cdata")
    @Operation(summary = "åå°éªŒè¯", description = "é—¨ç¦è®¾å¤‡åå°éªŒè¯æ¥å£(è®¾å¤‡ç«¯è°ƒç”¨)")
    public String backendVerification(
            @RequestParam("SN") String serialNumber,
            @RequestParam(value = "AuthType", required = false) String authType,
            @RequestBody String requestBody) {
        
        log.info("[åå°éªŒè¯] æ”¶åˆ°éªŒè¯è¯·æ±‚: SN={}, AuthType={}", serialNumber, authType);
        
        // 1. è§£æè¯·æ±‚ä½“ (form-dataæ ¼å¼)
        Map<String, String> params = parseFormData(requestBody);
        BackendAuthRequest request = BackendAuthRequest.builder()
                .serialNumber(serialNumber)
                .userId(Long.parseLong(params.get("pin")))
                .cardNo(params.get("cardno"))
                .event(Integer.parseInt(params.get("event")))
                .verifyType(Integer.parseInt(params.get("verifytype")))
                .inOutStatus(Integer.parseInt(params.get("inoutstatus")))
                .deviceId(getDeviceIdBySN(serialNumber))
                .build();
        
        // 2. æ‰§è¡Œåå°éªŒè¯
        BackendAuthResult result = verificationService.verifyBackendAuthentication(request);
        
        // 3. æ„å»ºHTTPå“åº” (å®‰é˜²PUSHåè®®æ ¼å¼)
        StringBuilder response = new StringBuilder();
        
        // ç¬¬ä¸€è¡Œ: AUTHç»“æœ
        response.append(result.getAuthStatus()).append("\r\n");
        
        // ç¬¬äºŒè¡Œ: åŸå§‹äº‹ä»¶è®°å½•(å›æ˜¾)
        response.append(requestBody).append("\r\n");
        
        // ç¬¬ä¸‰è¡Œ: æ§åˆ¶æŒ‡ä»¤(éªŒè¯æˆåŠŸæ—¶)
        if (result.isSuccess() && result.getControlCommand() != null) {
            response.append("CONTROL DEVICE ").append(result.getControlCommand()).append("\r\n");
        }
        
        // ç¬¬å››è¡Œ: æç¤ºä¿¡æ¯
        response.append("TIPS=").append(result.getMessage());
        
        log.info("[åå°éªŒè¯] éªŒè¯å®Œæˆ: userId={}, result={}", 
                request.getUserId(), result.getAuthStatus());
        
        return response.toString();
    }
    
    /**
     * è§£æform-dataæ ¼å¼è¯·æ±‚ä½“
     */
    private Map<String, String> parseFormData(String body) {
        // time=xxx{HT}pin=xxx{HT}cardno=xxx...
        // {HT} = \t (Tabé”®)
        Map<String, String> params = new HashMap<>();
        String[] pairs = body.split("\t");
        for (String pair : pairs) {
            String[] kv = pair.split("=", 2);
            if (kv.length == 2) {
                params.put(kv[0], kv[1]);
            }
        }
        return params;
    }
}
```

**BackendAuthResult.java** (æ–°å¢):
```java
@Data
@Builder
public class BackendAuthResult {
    
    /**
     * éªŒè¯çŠ¶æ€
     */
    private String authStatus;  // SUCCEED/FAILED/TIMEOUT
    
    /**
     * æ˜¯å¦æˆåŠŸ
     */
    private boolean success;
    
    /**
     * é”™è¯¯ç 
     */
    private String errorCode;
    
    /**
     * æç¤ºæ¶ˆæ¯
     */
    private String message;
    
    /**
     * æ§åˆ¶æŒ‡ä»¤
     */
    private String controlCommand;
    
    public static BackendAuthResult success(String message, String controlCommand) {
        return BackendAuthResult.builder()
                .authStatus("SUCCEED")
                .success(true)
                .message(message)
                .controlCommand(controlCommand)
                .build();
    }
    
    public static BackendAuthResult failed(String errorCode, String message) {
        return BackendAuthResult.builder()
                .authStatus("FAILED")
                .success(false)
                .errorCode(errorCode)
                .message(message)
                .build();
    }
    
    public static BackendAuthResult waiting(String errorCode, String message) {
        return BackendAuthResult.builder()
                .authStatus("TIMEOUT")
                .success(false)
                .errorCode(errorCode)
                .message(message)
                .build();
    }
}
```

### 6.3 æ•°æ®åº“ä¼˜åŒ–

#### 6.3.1 éªŒè¯æ¨¡å¼å­—æ®µä½¿ç”¨

**t_access_area_extè¡¨**:
```sql
ALTER TABLE t_access_area_ext 
MODIFY COLUMN verification_mode VARCHAR(20) 
COMMENT 'éªŒè¯æ–¹å¼: edge=è®¾å¤‡ç«¯éªŒè¯, backend=åå°éªŒè¯, hybrid=æ··åˆéªŒè¯';

-- æ·»åŠ é»˜è®¤å€¼
ALTER TABLE t_access_area_ext 
ALTER COLUMN verification_mode SET DEFAULT 'edge';

-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_verification_mode ON t_access_area_ext(verification_mode);
```

#### 6.3.2 åæ½œè®°å½•è¡¨ (æ–°å¢)

```sql
CREATE TABLE t_access_anti_passback_record (
    id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ä¸»é”®ID',
    user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
    device_id BIGINT NOT NULL COMMENT 'è®¾å¤‡ID',
    in_out_status TINYINT NOT NULL COMMENT 'è¿›å‡ºçŠ¶æ€: 1=è¿›, 2=å‡º',
    record_time DATETIME NOT NULL COMMENT 'è®°å½•æ—¶é—´',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    INDEX idx_user_device (user_id, device_id, record_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='åæ½œè®°å½•è¡¨';
```

### 6.4 é…ç½®ä¼˜åŒ–

#### 6.4.1 application.yml

```yaml
access:
  verification:
    # éªŒè¯æ¨¡å¼é…ç½®
    mode:
      # é»˜è®¤éªŒè¯æ¨¡å¼
      default: edge
      # æ˜¯å¦æ”¯æŒåå°éªŒè¯
      backend-enabled: true
      # æ˜¯å¦æ”¯æŒè®¾å¤‡ç«¯éªŒè¯
      edge-enabled: true
    
    # åå°éªŒè¯é…ç½®
    backend:
      # å“åº”è¶…æ—¶æ—¶é—´(æ¯«ç§’)
      timeout: 3000
      # æ˜¯å¦å¯ç”¨åæ½œ
      anti-passback-enabled: true
      # åæ½œæ—¶é—´çª—å£(ç§’)
      anti-passback-window: 300
      # æ˜¯å¦å¯ç”¨äº’é”
      interlock-enabled: true
      # äº’é”è¶…æ—¶(ç§’)
      interlock-timeout: 60
    
    # è®¾å¤‡ç«¯éªŒè¯é…ç½®
    edge:
      # æƒé™æ•°æ®åŒæ­¥é—´éš”(åˆ†é’Ÿ)
      sync-interval: 5
      # æ‰¹é‡ä¸Šä¼ è®°å½•æ•°é‡é˜ˆå€¼
      batch-upload-threshold: 100
      # æ‰¹é‡ä¸Šä¼ æ—¶é—´é—´éš”(ç§’)
      batch-upload-interval: 60
```

---

## 7. å®æ–½è·¯çº¿å›¾

### 7.1 Phase 1: P0ç´§æ€¥ä¿®å¤ (1å‘¨)

**ç›®æ ‡**: ä¿®å¤æ–‡æ¡£ä¸€è‡´æ€§é—®é¢˜,æ¢å¤åå°éªŒè¯åŠŸèƒ½

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è´Ÿè´£äºº | éªŒæ”¶æ ‡å‡† |
|------|-------|--------|--------|---------|
| 1.1 æ›´æ–°æ¶æ„æ–‡æ¡£ | P0 | 4h | æ¶æ„ç»„ | åˆ é™¤"è¾¹ç¼˜è‡ªä¸»éªŒè¯"è™šå‡æè¿° |
| 1.2 æ›´æ–°CLAUDE.md | P0 | 2h | æ¶æ„ç»„ | å‡†ç¡®æè¿°å½“å‰æ¶æ„ |
| 1.3 å®ç°åå°éªŒè¯API | P0 | 16h | å¼€å‘ç»„ | `/api/v1/access/backend/cdata`æ¥å£ |
| 1.4 åæ½œéªŒè¯å®ç° | P0 | 8h | å¼€å‘ç»„ | `AntiPassbackService.verify()` |
| 1.5 é›†æˆæµ‹è¯• | P0 | 8h | æµ‹è¯•ç»„ | åå°éªŒè¯ç«¯åˆ°ç«¯æµ‹è¯•é€šè¿‡ |

**äº¤ä»˜ç‰©**:
- âœ… ä¿®æ­£åçš„æ¶æ„æ–‡æ¡£
- âœ… åå°éªŒè¯APIå®ç°
- âœ… åæ½œéªŒè¯åŠŸèƒ½
- âœ… é›†æˆæµ‹è¯•æŠ¥å‘Š

### 7.2 Phase 2: P1åŠŸèƒ½å®Œå–„ (2å‘¨)

**ç›®æ ‡**: å®ç°åŒæ¨¡å¼æ¶æ„,æ”¯æŒéªŒè¯æ¨¡å¼é…ç½®

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è´Ÿè´£äºº | éªŒæ”¶æ ‡å‡† |
|------|-------|--------|--------|---------|
| 2.1 éªŒè¯æ¨¡å¼å­—æ®µä½¿ç”¨ | P1 | 4h | å¼€å‘ç»„ | è¯»å–`verification_mode`å­—æ®µ |
| 2.2 äº’é”éªŒè¯å®ç° | P1 | 12h | å¼€å‘ç»„ | `InterlockService.verify()` |
| 2.3 å¤šäººéªŒè¯å®ç° | P1 | 16h | å¼€å‘ç»„ | `MultiPersonService.verify()` |
| 2.4 é»‘åå•å®æ—¶åŒæ­¥ | P1 | 8h | å¼€å‘ç»„ | é»‘åå•å˜æ›´æ¨é€åˆ°è®¾å¤‡ |
| 2.5 æ€§èƒ½ä¼˜åŒ– | P1 | 16h | å¼€å‘ç»„ | åå°éªŒè¯P99<500ms |
| 2.6 ç›‘æ§å‘Šè­¦ | P1 | 8h | è¿ç»´ç»„ | Grafanaä»ªè¡¨ç›˜+å‘Šè­¦è§„åˆ™ |

**äº¤ä»˜ç‰©**:
- âœ… éªŒè¯æ¨¡å¼é…ç½®åŠŸèƒ½
- âœ… å¤æ‚æƒé™éªŒè¯(äº’é”/å¤šäºº)
- âœ… æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
- âœ… ç›‘æ§ä»ªè¡¨ç›˜

### 7.3 Phase 3: P2å¢å¼ºä¼˜åŒ– (3å‘¨)

**ç›®æ ‡**: è®¾å¤‡ç«¯éªŒè¯æ¨¡å¼,ç¦»çº¿é€šè¡Œæ”¯æŒ

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è´Ÿè´£äºº | éªŒæ”¶æ ‡å‡† |
|------|-------|--------|--------|---------|
| 3.1 æƒé™æ•°æ®åŒæ­¥ | P2 | 24h | å¼€å‘ç»„ | æƒé™è‡ªåŠ¨æ¨é€åˆ°è®¾å¤‡ |
| 3.2 è®¾å¤‡ç«¯éªŒè¯å®ç° | P2 | 40h | å¼€å‘ç»„ | æ¢å¤backupç›®å½•åŠŸèƒ½ |
| 3.3 ç¦»çº¿éªŒè¯æ”¯æŒ | P2 | 32h | å¼€å‘ç»„ | ç½‘ç»œæ–­å¼€ä»å¯é€šè¡Œ |
| 3.4 æ‰¹é‡è®°å½•ä¸Šä¼  | P2 | 16h | å¼€å‘ç»„ | æ¯åˆ†é’Ÿ/100æ¡æ‰¹é‡ä¸Šä¼  |
| 3.5 æ•°æ®ä¸€è‡´æ€§ä¿è¯ | P2 | 24h | å¼€å‘ç»„ | è®¾å¤‡ç«¯ä¸æœåŠ¡å™¨æ•°æ®åŒæ­¥ |
| 3.6 å‹åŠ›æµ‹è¯• | P2 | 16h | æµ‹è¯•ç»„ | 1000è®¾å¤‡*10000äººæµ‹è¯•é€šè¿‡ |

**äº¤ä»˜ç‰©**:
- âœ… è®¾å¤‡ç«¯éªŒè¯æ¨¡å¼
- âœ… ç¦»çº¿é€šè¡ŒåŠŸèƒ½
- âœ… æ•°æ®åŒæ­¥æœºåˆ¶
- âœ… å‹åŠ›æµ‹è¯•æŠ¥å‘Š

### 7.4 éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½éªŒæ”¶

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† | æµ‹è¯•æ–¹æ³• |
|--------|---------|---------|
| **åå°éªŒè¯** | åæ½œ/äº’é”/å¤šäººéªŒè¯æ­£å¸¸å·¥ä½œ | ç«¯åˆ°ç«¯æµ‹è¯• |
| **è®¾å¤‡ç«¯éªŒè¯** | ç¦»çº¿çŠ¶æ€ä¸‹ä»å¯æ­£å¸¸é€šè¡Œ | æ–­ç½‘æµ‹è¯• |
| **éªŒè¯æ¨¡å¼åˆ‡æ¢** | é…ç½®å˜æ›´åç«‹å³ç”Ÿæ•ˆ | é…ç½®æµ‹è¯• |
| **æ€§èƒ½** | åå°éªŒè¯P99<500ms | å‹åŠ›æµ‹è¯• |
| **æ•°æ®ä¸€è‡´æ€§** | è®¾å¤‡ç«¯ä¸æœåŠ¡å™¨æ•°æ®100%ä¸€è‡´ | æ•°æ®æ ¡éªŒ |

#### æ–‡æ¡£éªŒæ”¶

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† |
|--------|---------|
| **ä¸€è‡´æ€§** | æ‰€æœ‰æ–‡æ¡£æè¿°ä¸ä»£ç å®ç°100%ä¸€è‡´ |
| **å®Œæ•´æ€§** | æ‰€æœ‰éªŒè¯æ¨¡å¼éƒ½æœ‰å®Œæ•´çš„æ–‡æ¡£è¯´æ˜ |
| **å‡†ç¡®æ€§** | æ— è™šå‡æˆ–è¯¯å¯¼æ€§æè¿° |

---

## 8. é™„å½•

### é™„å½•A: åè®®äº‹ä»¶ç å¯¹ç…§è¡¨

| äº‹ä»¶ç  | æè¿° | äº‹ä»¶ç±»å‹ | éªŒè¯æ–¹å¼ |
|-------|------|---------|---------|
| 0 | æ­£å¸¸åˆ·å¡å¼€é—¨ | æ­£å¸¸äº‹ä»¶ | å¡ç‰‡ |
| 14 | æ­£å¸¸æŒ‰æŒ‡çº¹å¼€é—¨ | æ­£å¸¸äº‹ä»¶ | æŒ‡çº¹ |
| 17 | å¡åŠ æŒ‡çº¹å¼€é—¨ | æ­£å¸¸äº‹ä»¶ | å¡ç‰‡+æŒ‡çº¹ |
| 24 | åæ½œ | å¼‚å¸¸äº‹ä»¶ | - |
| 25 | äº’é” | å¼‚å¸¸äº‹ä»¶ | - |
| 26 | å¤šäººéªŒè¯(åˆ·å¡) | å¼‚å¸¸äº‹ä»¶ | ç­‰å¾…ä¸­ |
| 27 | å¡æœªæ³¨å†Œ | å¼‚å¸¸äº‹ä»¶ | - |
| 39 | é»‘åå• | å¼‚å¸¸äº‹ä»¶ | - |
| 43 | äººå·²é”å®š | å¼‚å¸¸äº‹ä»¶ | - |

### é™„å½•B: éªŒè¯æ–¹å¼æè¿°

| éªŒè¯æ–¹å¼ç  | æè¿° | è¯´æ˜ |
|-----------|------|------|
| 0 | å¯†ç  | - |
| 1 | æŒ‡çº¹ | - |
| 2 | å¡ | - |
| 3 | å¡åŠ å¯†ç  | ç»„åˆéªŒè¯ |
| 4 | æŒ‡çº¹åŠ å¯†ç  | ç»„åˆéªŒè¯ |
| 5 | æŒ‡çº¹åŠ å¡ | ç»„åˆéªŒè¯ |
| 11 | é¢éƒ¨ | - |
| 12 | äºŒç»´ç /å¥åº·ç  | V3.4æ–°å¢ |
| 15 | é¢éƒ¨åŠ æŒ‡çº¹ | ç»„åˆéªŒè¯ |
| 20 | æŒé™è„‰ | - |
| 25 | æŒçº¹ | V4.0æ–°å¢ |
| 26 | æŒçº¹åŠ å¡ | V4.0æ–°å¢ |

### é™„å½•C: æ§åˆ¶æŒ‡ä»¤æ ¼å¼

**CONTROL DEVICEå‘½ä»¤æ ¼å¼**:
```
CONTROL DEVICE AABBCCDDEE
```

**å­—æ®µè¯´æ˜**:
- `AA`: å‘½ä»¤ç 
  - `01`: å¼€é—¨
  - `02`: å…³é—¨
  - `03`: å¸¸å¼€
  - `04`: å¸¸é—­
  - `05`: å–æ¶ˆæŠ¥è­¦
- `BB`: é—¨å· (01-04)
- `CC`: å»¶æ—¶æ—¶é—´(ç§’, 00-99)
- `DD`: ä¿ç•™
- `EE`: ä¿ç•™

**ç¤ºä¾‹**:
```
CONTROL DEVICE 0101030000  # å¼€é—¨1å·é—¨,å»¶æ—¶3ç§’
CONTROL DEVICE 0201000000  # å…³é—¨1å·é—¨
CONTROL DEVICE 0301000000  # 1å·é—¨å¸¸å¼€
```

### é™„å½•D: å…³é”®ä»£ç æ–‡ä»¶æ¸…å•

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| `microservices/ioedream-device-comm-service/src/main/java/net/lab1024/sa/devicecomm/protocol/server/TcpPushServer.java` | TCPæœåŠ¡å™¨ | âœ… ä½¿ç”¨ä¸­ |
| `microservices/ioedream-device-comm-service/src/main/java/net/lab1024/sa/devicecomm/protocol/handler/impl/AccessProtocolHandler.java` | é—¨ç¦åè®®å¤„ç† | âœ… ä½¿ç”¨ä¸­ |
| `microservices/ioedream-access-service-backup/src/main/java/net/lab1024/sa/access/controller/BiometricAuthController.java` | åå°éªŒè¯API | âš ï¸ å¤‡ä»½ä¸­ |
| `microservices/ioedream-access-service-backup/src/main/java/net/lab1024/sa/access/service/OfflineModeService.java` | ç¦»çº¿æ¨¡å¼æœåŠ¡ | âš ï¸ å¤‡ä»½ä¸­ |
| `microservices/ioedream-access-service-backup/src/main/java/net/lab1024/sa/access/entity/AreaAccessExtEntity.java` | éªŒè¯æ¨¡å¼å­—æ®µ | âš ï¸ å¤‡ä»½ä¸­ |
| `microservices/ioedream-access-service-backup/src/main/java/net/lab1024/sa/access/template/AbstractAccessFlowTemplate.java` | éªŒè¯æµç¨‹æ¨¡æ¿ | âš ï¸ å¤‡ä»½ä¸­ |

### é™„å½•E: å‚è€ƒæ–‡æ¡£

| æ–‡æ¡£åç§° | è·¯å¾„ | ç‰ˆæœ¬ |
|---------|------|------|
| å®‰é˜²PUSHé€šè®¯åè®® | `documentation-backup-20251216-190503/å„ä¸ªè®¾å¤‡é€šè®¯åè®®/MinerU_å®‰é˜²PUSHé€šè®¯åè®® ï¼ˆç†µåŸºç§‘æŠ€ï¼‰V4.8-20240107(æ°´å°ç‰ˆ)__20251206181130.md` | V4.8 |
| è€ƒå‹¤PUSHé€šè®¯åè®® | `documentation-backup-20251216-190503/å„ä¸ªè®¾å¤‡é€šè®¯åè®®/MinerU_è€ƒå‹¤PUSHé€šè®¯åè®® ï¼ˆç†µåŸºç§‘æŠ€ï¼‰ V4.0-20210113(æ°´å°ç‰ˆ)__20251206181117.md` | V4.0 |
| æ¶ˆè´¹PUSHé€šè®¯åè®® | `documentation-backup-20251216-190503/å„ä¸ªè®¾å¤‡é€šè®¯åè®®/MinerU_æ¶ˆè´¹PUSHé€šè®¯åè®® ï¼ˆä¸­æ§æ™ºæ…§ï¼‰ V1.0-20181225__20251206181016.md` | V1.0 |

---

## ğŸ¯ æ€»ç»“

### æ ¸å¿ƒè®¤çŸ¥

1. **ä¸¤ç§éªŒè¯æ¨¡å¼**: è®¾å¤‡ç«¯éªŒè¯(Edge) vs åå°éªŒè¯(Backend)
2. **é…ç½®é©±åŠ¨**: éªŒè¯æ¨¡å¼ç”±è®¾å¤‡å‚æ•°`verification_mode`é…ç½®å†³å®š
3. **é€‚ç”¨åœºæ™¯ä¸åŒ**: 
   - è®¾å¤‡ç«¯éªŒè¯: ä¸­å°ä¼ä¸š,ç½‘ç»œä¸ç¨³å®š,ç®€å•æƒé™
   - åå°éªŒè¯: å¤§å‹ä¼ä¸š,ç½‘ç»œç¨³å®š,å¤æ‚æƒé™(åæ½œ/äº’é”)

### å½“å‰é—®é¢˜

1. **æ–‡æ¡£ä¸ä¸€è‡´**: å£°ç§°"è¾¹ç¼˜è‡ªä¸»éªŒè¯",å®é™…æœªå®ç°
2. **åŠŸèƒ½ç¼ºå¤±**: åå°éªŒè¯ä»£ç åœ¨backupç›®å½•,æœªä½¿ç”¨
3. **å­—æ®µæµªè´¹**: `verification_mode`å­—æ®µå­˜åœ¨ä½†æœªç”¨

### ä¼˜åŒ–æ–¹æ¡ˆ

1. **P0ç´§æ€¥ä¿®å¤**: ä¿®æ­£æ–‡æ¡£,å®ç°åå°éªŒè¯API
2. **P1åŠŸèƒ½å®Œå–„**: åŒæ¨¡å¼æ¶æ„,éªŒè¯æ¨¡å¼é…ç½®
3. **P2å¢å¼ºä¼˜åŒ–**: è®¾å¤‡ç«¯éªŒè¯,ç¦»çº¿é€šè¡Œæ”¯æŒ

### é¢„æœŸæ”¶ç›Š

| ç»´åº¦ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| **æ–‡æ¡£ä¸€è‡´æ€§** | 30% | 100% | +70% |
| **åŠŸèƒ½å®Œæ•´æ€§** | 50% | 100% | +50% |
| **æ¶æ„çµæ´»æ€§** | å•ä¸€æ¨¡å¼ | åŒæ¨¡å¼ | +100% |
| **å¤æ‚æƒé™æ”¯æŒ** | âŒ | âœ… | æ–°å¢ |
| **ç¦»çº¿é€šè¡Œæ”¯æŒ** | âŒ | âœ… | æ–°å¢ |
| **ä¼ä¸šçº§é«˜è´¨é‡** | 60åˆ† | 95åˆ† | +35åˆ† |

---

**æ–‡æ¡£ç»´æŠ¤**: IOE-DREAM æ¶æ„å§”å‘˜ä¼š  
**æœ€åæ›´æ–°**: 2025-12-18  
**ç‰ˆæœ¬**: v1.0.0
