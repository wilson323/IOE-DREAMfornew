# IOE-DREAM æ‰©å±•è¡¨æœºåˆ¶å®æ–½æŒ‡å—

**åŸºäºç°æœ‰æˆåŠŸå®è·µçš„å®æ–½æ­¥éª¤å’Œæ“ä½œæŒ‡å—**

**åˆ›å»ºæ—¶é—´**: 2025-11-25
**ç‰ˆæœ¬**: v1.0.0
**é€‚ç”¨èŒƒå›´**: IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°æ‰€æœ‰ä¸šåŠ¡æ¨¡å—

---

## ğŸ“‹ æ¦‚è¿°

æœ¬å®æ–½æŒ‡å—åŸºäºIOE-DREAMé¡¹ç›®ä¸­å·²éªŒè¯çš„æˆåŠŸå®è·µï¼Œä¸ºæ‰©å±•è¡¨æœºåˆ¶çš„å®æ–½æä¾›è¯¦ç»†çš„æ“ä½œæ­¥éª¤ã€‚æ‰€æœ‰æ­¥éª¤éƒ½åŸºäºç°æœ‰æ¨¡å—çš„æˆåŠŸå®ç°ç»éªŒï¼Œç¡®ä¿å®æ–½è¿‡ç¨‹çš„å¯é æ€§å’Œé«˜æ•ˆæ€§ã€‚

## ğŸš€ å®æ–½åŸåˆ™

### âœ… åŸºäºç°æœ‰å¢å¼ºï¼Œé¿å…ä»é›¶åˆ›å»º
- **ç»§æ‰¿æˆåŠŸæ¨¡å¼**: ä¸¥æ ¼éµå¾ªç°æœ‰AreaEntityã€SmartDeviceEntityç­‰æˆåŠŸå®ç°
- **å¤ç”¨ç°æœ‰ç»„ä»¶**: åŸºäºç°æœ‰ç¼“å­˜ç®¡ç†å™¨ã€DAOæ¨¡æ¿ã€Serviceæ¨¡å¼è¿›è¡Œå¢å¼º
- **ä¿æŒæ¶æ„ä¸€è‡´æ€§**: ç¡®ä¿æ–°å®ç°ä¸ç°æœ‰å››å±‚æ¶æ„å®Œå…¨å…¼å®¹

### âœ… é¿å…ä»£ç å†—ä½™
- **ç»Ÿä¸€BaseEntityç»§æ‰¿**: é¿å…é‡å¤å®šä¹‰å®¡è®¡å­—æ®µ
- **JSONé…ç½®å¤ç”¨**: é¿å…ä¸ºæ¯ä¸ªé…ç½®é¡¹åˆ›å»ºç‹¬ç«‹å­—æ®µ
- **é€šç”¨æ–¹æ³•æŠ½è±¡**: é¿å…é‡å¤çš„ä¸šåŠ¡åˆ¤æ–­é€»è¾‘

### âœ… æ¸è¿›å¼å®æ–½
- **åˆ†é˜¶æ®µå®æ–½**: å…ˆè®¾è®¡ï¼Œåå¼€å‘ï¼Œæœ€åéªŒè¯
- **é£é™©å¯æ§**: æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„éªŒè¯æ ‡å‡†
- **å‘åå…¼å®¹**: ç¡®ä¿ç°æœ‰åŠŸèƒ½ä¸å—å½±å“

## ğŸ“… å®æ–½æ­¥éª¤

### é˜¶æ®µ1ï¼šéœ€æ±‚åˆ†æå’Œè®¾è®¡ï¼ˆ2-3å¤©ï¼‰

#### 1.1 ä¸šåŠ¡éœ€æ±‚åˆ†æ

**åŸºäºç°æœ‰éœ€æ±‚åˆ†ææ–¹æ³•**ï¼š
```markdown
## éœ€æ±‚åˆ†ææ¨¡æ¿

### ä¸šåŠ¡èƒŒæ™¯
- **ç°æœ‰é—®é¢˜**: å½“å‰æ¨¡å—ç¼ºå°‘å“ªäº›åŠŸèƒ½
- **ä¸šåŠ¡ä»·å€¼**: æ–°åŠŸèƒ½å¸¦æ¥çš„ä¸šåŠ¡æ”¶ç›Š
- **ç”¨æˆ·åœºæ™¯**: å…·ä½“çš„ä½¿ç”¨åœºæ™¯æè¿°

### åŠŸèƒ½éœ€æ±‚
- **æ ¸å¿ƒåŠŸèƒ½**: å¿…é¡»å®ç°çš„æ ¸å¿ƒåŠŸèƒ½
- **æ‰©å±•åŠŸèƒ½**: å¯é€‰çš„æ‰©å±•åŠŸèƒ½
- **æ€§èƒ½è¦æ±‚**: å“åº”æ—¶é—´ã€å¹¶å‘é‡ç­‰è¦æ±‚

### æŠ€æœ¯çº¦æŸ
- **æ¶æ„çº¦æŸ**: å¿…é¡»éµå¾ªçš„å››å±‚æ¶æ„
- **æŠ€æœ¯æ ˆçº¦æŸ**: Spring Boot 3.x, MyBatis-Plus, Redisç­‰
- **æ•°æ®çº¦æŸ**: æ•°æ®é‡ã€å­˜å‚¨è¦æ±‚ç­‰
```

#### 1.2 æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

**åŸºäºç°æœ‰è®¾è®¡æ¨¡æ¿**ï¼š
```markdown
## æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

### æ¶æ„è®¾è®¡
- **åŸºç¡€è¡¨è®¾è®¡**: åŸºäºç°æœ‰AreaEntityè®¾è®¡æ¨¡å¼
- **æ‰©å±•è¡¨è®¾è®¡**: åŸºäºç°æœ‰AccessAreaExtEntityè®¾è®¡æ¨¡å¼
- **å…³è”å…³ç³»**: å¤–é”®å…³è”å’Œç´¢å¼•è®¾è®¡

### æ•°æ®åº“è®¾è®¡
- **è¡¨ç»“æ„**: åŸºäºç°æœ‰database-template.sql
- **ç´¢å¼•ç­–ç•¥**: åŸºäºç°æœ‰æ€§èƒ½ä¼˜åŒ–æŒ‡å—
- **JSONé…ç½®**: åŸºäºç°æœ‰JSONé…ç½®æ¨¡å¼

### æ¥å£è®¾è®¡
- **REST API**: åŸºäºç°æœ‰Controllerè®¾è®¡æ¨¡å¼
- **æ•°æ®ä¼ è¾“**: DTO/VOè®¾è®¡è§„èŒƒ
- **å¼‚å¸¸å¤„ç†**: ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
```

#### 1.3 è®¾è®¡è¯„å®¡

**è¯„å®¡æ£€æŸ¥æ¸…å•**ï¼ˆåŸºäºç°æœ‰è¯„å®¡ç»éªŒï¼‰ï¼š
- [ ] æ˜¯å¦éµå¾ªå››å±‚æ¶æ„è®¾è®¡
- [ ] æ˜¯å¦æ­£ç¡®ç»§æ‰¿BaseEntity
- [ ] æ˜¯å¦é¿å…å­—æ®µå†—ä½™
- [ ] æ˜¯å¦è®¾è®¡åˆç†çš„JSONé…ç½®
- [ ] æ˜¯å¦è€ƒè™‘æ€§èƒ½ä¼˜åŒ–
- [ ] æ˜¯å¦æœ‰å®Œå–„çš„ç¼“å­˜ç­–ç•¥
- [ ] æ˜¯å¦æœ‰å®Œæ•´çš„å¼‚å¸¸å¤„ç†

### é˜¶æ®µ2ï¼šæ•°æ®åº“è®¾è®¡ï¼ˆ1-2å¤©ï¼‰

#### 2.1 åˆ›å»ºæ•°æ®åº“è„šæœ¬

**åŸºäºç°æœ‰database-template.sql**ï¼š
```bash
# 1. å¤åˆ¶æ¨¡æ¿
cp database-template.sql {module_name}_extension.sql

# 2. æ›¿æ¢å ä½ç¬¦
sed -i 's/{base_entity_comment}/{ä½ çš„å®ä½“æ³¨é‡Š}/g' {module_name}_extension.sql
sed -i 's/{module_name}/{ä½ çš„æ¨¡å—å}/g' {module_name}_extension.sql
sed -i 's/{base_table}/{ä½ çš„åŸºç¡€è¡¨å}/g' {module_name}_extension.sql

# 3. æ‰§è¡Œå»ºè¡¨è„šæœ¬
mysql -u{username} -p{password} {database} < {module_name}_extension.sql
```

#### 2.2 éªŒè¯æ•°æ®åº“è®¾è®¡

**åŸºäºç°æœ‰éªŒè¯æ–¹æ³•**ï¼š
```sql
-- éªŒè¯è¡¨ç»“æ„
DESC t_{base_table}_{module}_ext;

-- éªŒè¯ç´¢å¼•
SHOW INDEX FROM t_{base_table}_{module}_ext;

-- éªŒè¯åŸºç¡€æ•°æ®æ’å…¥
INSERT INTO t_{base_table}_{module}_ext (
    {base_table}_id, {module}_level, create_time, update_time, create_user_id
) VALUES (1, 1, UNIX_TIMESTAMP()*1000, UNIX_TIMESTAMP()*1000, 1);

-- éªŒè¯æŸ¥è¯¢æ€§èƒ½
EXPLAIN SELECT * FROM t_{base_table}_{module}_ext WHERE {base_table}_id = 1;
```

### é˜¶æ®µ3ï¼šåç«¯ä»£ç å¼€å‘ï¼ˆ3-5å¤©ï¼‰

#### 3.1 åˆ›å»ºå®ä½“ç±»

**åŸºäºç°æœ‰entity-template.java**ï¼š
```bash
# 1. ç”ŸæˆåŸºç¡€å®ä½“
./generate-module.sh BaseEntity {ModuleName} {ModuleCNName} {PackagePath}

# 2. ç”Ÿæˆæ‰©å±•å®ä½“
./generate-module.sh BaseEntity {ModuleName} {ModuleCNName} {PackagePath}

# 3. éªŒè¯å®ä½“ç±»
mvn clean compile -q
```

**å®ç°è¦ç‚¹**ï¼ˆåŸºäºç°æœ‰å®ä½“å®ç°ç»éªŒï¼‰ï¼š
```java
// å…³é”®å®ç°è¦ç‚¹
1. ç»§æ‰¿BaseEntityï¼Œé¿å…é‡å¤å®šä¹‰å®¡è®¡å­—æ®µ
2. ä½¿ç”¨@TableFieldæ³¨è§£æ˜ç¡®æ˜ å°„å…³ç³»
3. æä¾›ä¸šåŠ¡æ–¹æ³•å°è£…å¤æ‚é€»è¾‘
4. ä½¿ç”¨JSONé…ç½®é¿å…å­—æ®µå†—ä½™
5. å®ç°åˆç†çš„é»˜è®¤å€¼è®¾ç½®
```

#### 3.2 åˆ›å»ºDAOå±‚

**åŸºäºç°æœ‰dao-template.java**ï¼š
```bash
# 1. ç”ŸæˆDAOæ¥å£
./generate-dao.sh {BaseEntityName} {ModuleName} {PackagePath}

# 2. ç¼–å†™XMLæ˜ å°„æ–‡ä»¶
# åŸºäºç°æœ‰AreaPersonDao.xmlçš„æŸ¥è¯¢æ¨¡å¼
```

**å®ç°è¦ç‚¹**ï¼ˆåŸºäºç°æœ‰DAOå®ç°ç»éªŒï¼‰ï¼š
```java
// å…³é”®å®ç°è¦ç‚¹
1. ç»§æ‰¿BaseMapperè·å¾—åŸºç¡€CRUDæ–¹æ³•
2. å®ç°é«˜æ•ˆçš„å…³è”æŸ¥è¯¢æ–¹æ³•
3. æä¾›æ‰¹é‡æ“ä½œæ–¹æ³•
4. ä½¿ç”¨@Select/@Insertç­‰æ³¨è§£ç®€åŒ–SQL
5. å®ç°upsertæ¨¡å¼é¿å…é‡å¤æ’å…¥
```

#### 3.3 åˆ›å»ºServiceå±‚

**åŸºäºç°æœ‰service-template.java**ï¼š
```bash
# 1. ç”ŸæˆServiceæ¥å£å’Œå®ç°
./generate-service.sh {BaseEntityName} {ModuleName} {PackagePath}

# 2. å®ç°ç¼“å­˜ç®¡ç†å™¨
# åŸºäºç°æœ‰AreaCacheManageræ¨¡å¼
```

**å®ç°è¦ç‚¹**ï¼ˆåŸºäºç°æœ‰Serviceå®ç°ç»éªŒï¼‰ï¼š
```java
// å…³é”®å®ç°è¦ç‚¹
1. å®ç°ç»Ÿä¸€çš„ç¼“å­˜ç®¡ç†ç­–ç•¥
2. æä¾›äº‹åŠ¡ç®¡ç†å’Œå¼‚å¸¸å¤„ç†
3. å®ç°æ‰¹é‡æ“ä½œæ–¹æ³•
4. ä½¿ç”¨DTO/VOæ¨¡å¼è½¬æ¢æ•°æ®
5. å®ç°å‚æ•°éªŒè¯å’Œä¸šåŠ¡æ ¡éªŒ
```

#### 3.4 åˆ›å»ºAPIå±‚

**åŸºäºç°æœ‰Controlleræ¨¡å¼**ï¼š
```java
@RestController
@RequestMapping("/api/{module}/extension")
@Validated
public class {BaseEntityName}{ModuleName}ExtController {

    @Resource
    private {BaseEntityName}{ModuleName}ExtService {baseEntityName}{ModuleName}ExtService;

    /**
     * è·å–æ‰©å±•ä¿¡æ¯
     */
    @GetMapping("/{baseTableId}/info")
    @SaCheckPermission("{module}:query")
    public ResponseDTO<{BaseEntityName}{ModuleName}VO> getInfo(
            @PathVariable Long {baseTableId}) {
        return {baseEntityName}{ModuleName}ExtService.get{BaseEntityName}{ModuleName}Info({baseTableId});
    }

    /**
     * ä¿å­˜æ‰©å±•ä¿¡æ¯
     */
    @PostMapping("/{baseTableId}/save")
    @SaCheckPermission("{module}:save")
    public ResponseDTO<Boolean> saveInfo(
            @PathVariable Long {baseTableId},
            @RequestBody @Valid {BaseEntityName}{ModuleName}UpdateForm updateForm) {
        return {baseEntityName}{ModuleName}ExtService.save{BaseEntityName}{ModuleName}Extension(
                {baseTableId}, updateForm);
    }
}
```

### é˜¶æ®µ4ï¼šå‰ç«¯å¼€å‘ï¼ˆ2-3å¤©ï¼‰

#### 4.1 åˆ›å»ºAPIæ¥å£

**åŸºäºç°æœ‰å‰ç«¯APIæ¨¡å¼**ï¼š
```javascript
// api/{module}Extension.js
import { requestGet, requestPost } from '/@/utils/http';

export class {ModuleName}ExtensionAPI {

  // è·å–æ‰©å±•ä¿¡æ¯
  static getInfo({baseTableId}) {
    return requestGet(`/api/{module}/extension/${{baseTableId}}/info`);
  }

  // ä¿å­˜æ‰©å±•ä¿¡æ¯
  static saveInfo({baseTableId}, data) {
    return requestPost(`/api/{module}/extension/${{baseTableId}}/save`, data);
  }

  // åˆ†é¡µæŸ¥è¯¢
  static queryPage(params) {
    return requestPost('/api/{module}/extension/queryPage', params);
  }
}
```

#### 4.2 åˆ›å»ºé¡µé¢ç»„ä»¶

**åŸºäºç°æœ‰Vueç»„ä»¶æ¨¡å¼**ï¼š
```vue
<template>
  <div class="{module}-extension-container">
    <!-- åŸºç¡€ä¿¡æ¯å±•ç¤º -->
    <a-descriptions :column="2" bordered>
      <a-descriptions-item label="åŸºç¡€ä¿¡æ¯">
        {{ baseInfo.{entityName} }}
      </a-descriptions-item>
    </a-descriptions>

    <!-- æ‰©å±•é…ç½®è¡¨å• -->
    <a-form :model="form" :rules="rules" ref="formRef">
      <a-form-item label="{module_name}ç­‰çº§" name="{module}Level">
        <a-select v-model:value="form.{module}Level" placeholder="è¯·é€‰æ‹©ç­‰çº§">
          <a-select-option :value="1">åŸºç¡€</a-select-option>
          <a-select-option :value="2">é«˜çº§</a-select-option>
          <a-select-option :value="3">é«˜çº§</a-select-option>
        </a-select>
      </a-form-item>

      <!-- JSONé…ç½®ç»„ä»¶ -->
      <JsonConfigEditor
        v-model:value="form.timeRestrictions"
        title="æ—¶é—´é™åˆ¶é…ç½®"
        :schema="timeRestrictionsSchema"
      />
    </a-form>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted } from 'vue';
import { {ModuleName}ExtensionAPI } from '/@/api/{module}Extension';
import JsonConfigEditor from '/@/components/JsonConfigEditor/index.vue';

// ç»„ä»¶é€»è¾‘åŸºäºç°æœ‰Vueç»„ä»¶æœ€ä½³å®è·µ
</script>
```

### é˜¶æ®µ5ï¼šæµ‹è¯•å’ŒéªŒè¯ï¼ˆ2-3å¤©ï¼‰

#### 5.1 å•å…ƒæµ‹è¯•

**åŸºäºç°æœ‰æµ‹è¯•æ¨¡å¼**ï¼š
```java
@ExtendWith(MockitoExtension.class)
class {BaseEntityName}{ModuleName}ExtServiceTest {

    @Mock
    private {BaseEntityName}{ModuleName}ExtDao {baseEntityName}{ModuleName}ExtDao;

    @InjectMocks
    private {BaseEntityName}{ModuleName}ExtService service;

    @Test
    void testGetInfo_Success() {
        // åŸºäºç°æœ‰æµ‹è¯•æ¨¡å¼
        // Given
        Long {baseTableId} = 1L;
        {BaseEntityName}Entity baseEntity = createMockBaseEntity();
        {BaseEntityName}{ModuleName}ExtEntity extEntity = createMockExtEntity();

        when({baseEntityName}Dao.selectById({baseTableId})).thenReturn(baseEntity);
        when({baseEntityName}{ModuleName}ExtDao.selectBy{BaseEntityName}Id({baseTableId})).thenReturn(extEntity);

        // When
        ResponseDTO<{BaseEntityName}{ModuleName}VO> result = service.get{BaseEntityName}{ModuleName}Info({baseTableId});

        // Then
        assertThat(result.getData()).isNotNull();
        assertThat(result.getData().get{BaseEntityName}Id()).isEqualTo({baseTableId});
    }
}
```

#### 5.2 é›†æˆæµ‹è¯•

**åŸºäºç°æœ‰é›†æˆæµ‹è¯•æ¨¡å¼**ï¼š
```java
@SpringBootTest
@Transactional
@Rollback
class {BaseEntityName}{ModuleName}ExtIntegrationTest {

    @Autowired
    private {BaseEntityName}{ModuleName}ExtService service;

    @Test
    void testCreateAndQuery() {
        // Given
        Long {baseTableId} = createTestBaseEntity();
        {BaseEntityName}{ModuleName}UpdateForm updateForm = createTestUpdateForm();

        // When
        ResponseDTO<Boolean> saveResult = service.save{BaseEntityName}{ModuleName}Extension({baseTableId}, updateForm);
        ResponseDTO<{BaseEntityName}{ModuleName}VO> queryResult = service.get{BaseEntityName}{ModuleName}Info({baseTableId});

        // Then
        assertThat(saveResult.getData()).isTrue();
        assertThat(queryResult.getData()).isNotNull();
        assertThat(queryResult.getData().get{ModuleName}Level()).isEqualTo(updateForm.get{ModuleName}Level());
    }
}
```

#### 5.3 æ€§èƒ½æµ‹è¯•

**åŸºäºç°æœ‰æ€§èƒ½æµ‹è¯•æ¨¡å¼**ï¼š
```java
@Test
void testQueryPerformance() {
    // åŸºäºç°æœ‰æ€§èƒ½æµ‹è¯•æ–¹æ³•
    long startTime = System.currentTimeMillis();

    for (int i = 0; i < 1000; i++) {
        service.get{BaseEntityName}{ModuleName}Info(1L);
    }

    long endTime = System.currentTimeMillis();
    long avgTime = (endTime - startTime) / 1000;

    // æœŸæœ›å¹³å‡å“åº”æ—¶é—´ < 5ms
    assertThat(avgTime).isLessThan(5);
}
```

### é˜¶æ®µ6ï¼šéƒ¨ç½²å’Œç›‘æ§ï¼ˆ1-2å¤©ï¼‰

#### 6.1 éƒ¨ç½²å‡†å¤‡

**åŸºäºç°æœ‰éƒ¨ç½²æµç¨‹**ï¼š
```bash
# 1. ç¼–è¯‘é¡¹ç›®
mvn clean package -DskipTests

# 2. æ•°æ®åº“è„šæœ¬æ‰§è¡Œ
mysql -u{username} -p{password} {database} < {module_name}_extension.sql

# 3. å¯åŠ¨åº”ç”¨
java -jar sa-admin/target/sa-admin-dev-3.0.0.jar

# 4. éªŒè¯æœåŠ¡å¯åŠ¨
curl -f http://localhost:1024/api/health
```

#### 6.2 ç›‘æ§é…ç½®

**åŸºäºç°æœ‰ç›‘æ§é…ç½®**ï¼š
```yaml
# application.yml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true

# ç¼“å­˜ç›‘æ§
logging:
  level:
    net.lab1024.sa.base.module.cache: DEBUG
```

## ğŸ› ï¸ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. è®¾è®¡é˜¶æ®µå¸¸è§é—®é¢˜

#### é—®é¢˜1ï¼šå¦‚ä½•ç¡®å®šéœ€è¦æ‰©å±•è¡¨è¿˜æ˜¯ç»§æ‰¿ï¼Ÿ

**åŸºäºç°æœ‰è§£å†³æ–¹æ¡ˆ**ï¼š
```java
// ä½¿ç”¨æ‰©å±•è¡¨çš„æƒ…å†µ
1. åŸºç¡€å®ä½“ç›¸å¯¹ç¨³å®šï¼Œä¸éœ€è¦é¢‘ç¹å˜æ›´
2. æ‰©å±•åŠŸèƒ½æ˜¯å¯é€‰çš„ï¼Œä¸æ˜¯æ‰€æœ‰å®ä¾‹éƒ½éœ€è¦
3. æ‰©å±•åŠŸèƒ½åŒ…å«å¤§é‡é…ç½®å­—æ®µ
4. éœ€è¦æ”¯æŒå¤šç§ä¸åŒçš„æ‰©å±•ç±»å‹

// ä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µ
1. æ‰©å±•åŠŸèƒ½æ˜¯æ‰€æœ‰å®ä¾‹éƒ½å¿…é¡»å…·å¤‡çš„
2. æ‰©å±•åŠŸèƒ½åŒ…å«å¤æ‚çš„è¡Œä¸ºé€»è¾‘
3. éœ€è¦é‡å†™åŸºç¡€å®ä½“çš„æ–¹æ³•
4. æ‰©å±•åŠŸèƒ½æœ‰æ˜ç¡®çš„ç±»å‹åŒºåˆ†
```

#### é—®é¢˜2ï¼šå¦‚ä½•è®¾è®¡JSONé…ç½®å­—æ®µï¼Ÿ

**åŸºäºç°æœ‰è®¾è®¡ç»éªŒ**ï¼š
```java
// å¥½çš„JSONé…ç½®è®¾è®¡åŸåˆ™
1. ä¿æŒç»“æ„æ‰å¹³ï¼Œé¿å…è¿‡åº¦åµŒå¥—
2. ä½¿ç”¨è¯­ä¹‰åŒ–çš„å­—æ®µå
3. æä¾›é»˜è®¤å€¼å’ŒéªŒè¯é€»è¾‘
4. æ”¯æŒéƒ¨åˆ†æ›´æ–°å’Œåˆå¹¶æ“ä½œ

// ç¤ºä¾‹è®¾è®¡
{
  "enabled": true,
  "timeRestrictions": {
    "workdays": ["07:00-09:00"],
    "weekends": ["09:00-21:00"]
  },
  "locationRules": {
    "latitude": 39.9042,
    "longitude": 116.4074,
    "radius": 100
  }
}
```

### 2. å¼€å‘é˜¶æ®µå¸¸è§é—®é¢˜

#### é—®é¢˜1ï¼šå¦‚ä½•å¤„ç†JSONå­—æ®µçš„åºåˆ—åŒ–ï¼Ÿ

**åŸºäºç°æœ‰è§£å†³æ–¹æ¡ˆ**ï¼š
```java
// ä½¿ç”¨MyBatis-Plusçš„JSONç±»å‹å¤„ç†å™¨
@TableField(value = "time_restrictions", typeHandler = JacksonTypeHandler.class)
private Map<String, Object> timeRestrictions;

// åœ¨æŸ¥è¯¢æ—¶è‡ªåŠ¨ååºåˆ—åŒ–
public Map<String, Object> getTimeRestrictions() {
    if (timeRestrictions == null) {
        return new HashMap<>();
    }
    return timeRestrictions;
}
```

#### é—®é¢˜2ï¼šå¦‚ä½•å®ç°é«˜æ•ˆçš„ç¼“å­˜ç­–ç•¥ï¼Ÿ

**åŸºäºç°æœ‰ç¼“å­˜æ¨¡å¼**ï¼š
```java
// åˆ†å±‚ç¼“å­˜ç­–ç•¥
@Component
public class {ModuleName}CacheManager extends BaseCacheManager {

    // L1æœ¬åœ°ç¼“å­˜ï¼šçƒ­ç‚¹æ•°æ®
    private final Cache<String, Object> localCache;

    // L2åˆ†å¸ƒå¼ç¼“å­˜ï¼šå…±äº«æ•°æ®
    private final RedisTemplate<String, Object> redisTemplate;

    // ç¼“å­˜é”®è®¾è®¡
    private static final String KEY_PREFIX = "{module}:extension:";

    public Object get(Long id) {
        String key = KEY_PREFIX + id;

        // å…ˆæŸ¥L1ç¼“å­˜
        Object result = localCache.getIfPresent(key);
        if (result != null) {
            return result;
        }

        // å†æŸ¥L2ç¼“å­˜
        result = redisTemplate.opsForValue().get(key);
        if (result != null) {
            localCache.put(key, result);
            return result;
        }

        return null;
    }
}
```

### 3. æµ‹è¯•é˜¶æ®µå¸¸è§é—®é¢˜

#### é—®é¢˜1ï¼šå¦‚ä½•æµ‹è¯•JSONå­—æ®µçš„åŠŸèƒ½ï¼Ÿ

**åŸºäºç°æœ‰æµ‹è¯•æ–¹æ³•**ï¼š
```java
@Test
void testJsonConfigUpdate() {
    // Given
    Map<String, Object> timeConfig = new HashMap<>();
    timeConfig.put("workdays", Arrays.asList("07:00-09:00"));

    {BaseEntityName}{ModuleName}UpdateForm form = new {BaseEntityName}{ModuleName}UpdateForm();
    form.setTimeRestrictions(timeConfig);

    // When
    ResponseDTO<Boolean> result = service.save{BaseEntityName}{ModuleName}Extension(1L, form);

    // Then
    assertThat(result.getData()).isTrue();

    // éªŒè¯JSONé…ç½®æ˜¯å¦æ­£ç¡®ä¿å­˜
    {BaseEntityName}{ModuleName}VO vo = service.get{BaseEntityName}{ModuleName}Info(1L);
    assertThat(vo.getTimeRestrictions()).containsKey("workdays");
}
```

## ğŸ“Š è´¨é‡æ£€æŸ¥æ¸…å•

### è®¾è®¡é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] æ˜¯å¦éµå¾ªå››å±‚æ¶æ„è®¾è®¡
- [ ] æ˜¯å¦æ­£ç¡®ç»§æ‰¿BaseEntity
- [ ] æ˜¯å¦é¿å…å­—æ®µå†—ä½™
- [ ] æ˜¯å¦è®¾è®¡åˆç†çš„JSONé…ç½®
- [ ] æ˜¯å¦è€ƒè™‘æ€§èƒ½ä¼˜åŒ–
- [ ] æ˜¯å¦æœ‰å®Œå–„çš„ç¼“å­˜ç­–ç•¥
- [ ] æ˜¯å¦æœ‰å®Œæ•´çš„å¼‚å¸¸å¤„ç†

### å¼€å‘é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] ä»£ç æ˜¯å¦éµå¾ªå‘½åè§„èŒƒ
- [ ] æ˜¯å¦å®ç°äº†å¿…è¦çš„ä¸šåŠ¡æ–¹æ³•
- [ ] æ˜¯å¦æœ‰å®Œæ•´çš„å‚æ•°éªŒè¯
- [ ] æ˜¯å¦æœ‰ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†
- [ ] æ˜¯å¦å®ç°äº†ç¼“å­˜æœºåˆ¶
- [ ] æ˜¯å¦æ”¯æŒæ‰¹é‡æ“ä½œ
- [ ] æ˜¯å¦æœ‰è¯¦ç»†çš„æ³¨é‡Š

### æµ‹è¯•é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] æ˜¯å¦æœ‰å®Œæ•´çš„å•å…ƒæµ‹è¯•
- [ ] æ˜¯å¦æœ‰é›†æˆæµ‹è¯•
- [ ] æ˜¯å¦æœ‰æ€§èƒ½æµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ï¼ˆâ‰¥80%ï¼‰
- [ ] æ˜¯å¦é€šè¿‡å‹åŠ›æµ‹è¯•
- [ ] æ˜¯å¦æœ‰æ•°æ®ä¸€è‡´æ€§æµ‹è¯•

### éƒ¨ç½²é˜¶æ®µæ£€æŸ¥æ¸…å•
- [ ] æ•°æ®åº“è„šæœ¬æ˜¯å¦æ­£ç¡®æ‰§è¡Œ
- [ ] åº”ç”¨æ˜¯å¦æ­£å¸¸å¯åŠ¨
- [ ] å¥åº·æ£€æŸ¥æ˜¯å¦é€šè¿‡
- [ ] æ¥å£æ˜¯å¦æ­£å¸¸å“åº”
- [ ] ç¼“å­˜æ˜¯å¦æ­£å¸¸å·¥ä½œ
- [ ] ç›‘æ§æŒ‡æ ‡æ˜¯å¦æ­£å¸¸
- [ ] æ—¥å¿—æ˜¯å¦æ­£ç¡®è®°å½•

---

**æ–‡æ¡£ç»´æŠ¤**: æœ¬å®æ–½æŒ‡å—å°†åŸºäºé¡¹ç›®å®è·µæŒç»­æ›´æ–°
**æ‰§è¡Œè¦æ±‚**: æ‰€æœ‰æ‰©å±•è¡¨å®æ–½å¿…é¡»ä¸¥æ ¼éµå¾ªæœ¬æŒ‡å—
**è´¨é‡ç›®æ ‡**: ä»£ç è´¨é‡â‰¥90%ï¼Œæµ‹è¯•è¦†ç›–ç‡â‰¥80%ï¼Œæ€§èƒ½å“åº”æ—¶é—´<5ms