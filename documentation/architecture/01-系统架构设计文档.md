# IOE-DREAM ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£

> **ç‰ˆæœ¬**: v4.0.0-ACTUAL-STATE
> **æ›´æ–°æ—¥æœŸ**: 2025-12-22
> **æ–‡æ¡£ç±»å‹**: ç³»ç»Ÿæ¶æ„è®¾è®¡è¯´æ˜ä¹¦ï¼ˆåæ˜ å®é™…é¡¹ç›®çŠ¶æ€ï¼‰
> **é€‚ç”¨èŒƒå›´**: IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°å…¨ç³»ç»Ÿï¼ˆéœ€è¦æ¶æ„ä¿®å¤ï¼‰
> **ğŸš¨ çŠ¶æ€**: å­˜åœ¨ä¸¥é‡æ¶æ„è¿è§„å’Œç¼–è¯‘é”™è¯¯ï¼Œéœ€è¦ç«‹å³ä¿®å¤

---

## 1. æ–‡æ¡£æ¦‚è¿°

### 1.1 ç¼–å†™ç›®çš„

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°çš„ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æ•´ä½“æ¶æ„ã€æŠ€æœ¯é€‰å‹ã€åˆ†å±‚è®¾è®¡ã€éƒ¨ç½²æ¶æ„ç­‰ï¼Œä¸ºç ”å‘äººå‘˜æä¾›æ¶æ„è®¾è®¡æŒ‡å¯¼å’Œå¼€å‘è§„èŒƒå‚è€ƒã€‚

### 1.2 é€‚ç”¨å¯¹è±¡

| è§’è‰² | ç”¨é€” |
|------|------|
| æ¶æ„å¸ˆ | æ¶æ„å†³ç­–ã€æŠ€æœ¯é€‰å‹å‚è€ƒ |
| åç«¯å¼€å‘ | å¾®æœåŠ¡å¼€å‘ã€æ¥å£å®ç° |
| å‰ç«¯å¼€å‘ | æ¥å£å¯¹æ¥ã€çŠ¶æ€ç®¡ç† |
| è¿ç»´å·¥ç¨‹å¸ˆ | éƒ¨ç½²é…ç½®ã€ç›‘æ§è¿ç»´ |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | æµ‹è¯•ç­–ç•¥ã€æ€§èƒ½æµ‹è¯• |

---

## 2. ç³»ç»Ÿæ¦‚è¿°

### 2.1 ç³»ç»Ÿå®šä½

**IOE-DREAM**ï¼ˆIntelligent Operations & Enterprise - Digital Resource & Enterprise Application Managementï¼‰æ˜¯æ–°ä¸€ä»£**æ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°**ï¼Œé›†æˆå¤šæ¨¡æ€ç”Ÿç‰©è¯†åˆ«ã€æ™ºèƒ½é—¨ç¦ã€æ— æ„Ÿæ¶ˆè´¹ã€è‡ªåŠ¨è€ƒå‹¤ã€æ™ºèƒ½è®¿å®¢ã€è§†é¢‘ç›‘æ§ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### 2.2 æ ¸å¿ƒä»·å€¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IOE-DREAM æ ¸å¿ƒä»·å€¼                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” èº«ä»½ç»Ÿä¸€ç®¡ç†    ä¸€å¼ è„¸/ä¸€å¼ å¡é€šè¡Œå…¨å›­åŒº                    â”‚
â”‚  âš¡ æ— æ„Ÿé€šè¡Œä½“éªŒ    ç§’çº§è¯†åˆ«ï¼Œæ— éœ€ç­‰å¾…                        â”‚
â”‚  ğŸ›¡ï¸ æ™ºèƒ½å®‰å…¨ä¿éšœ    AIåˆ†æ+å¤šç³»ç»Ÿè”åŠ¨                        â”‚
â”‚  ğŸ“Š æ•°æ®é©±åŠ¨å†³ç­–    åŸºäºå¤§æ•°æ®çš„è¿è¥åˆ†æ                      â”‚
â”‚  ğŸš€ è¿è¥æ•ˆç‡æå‡    è‡ªåŠ¨åŒ–å¤„ç†ï¼Œé™ä½äººå·¥æˆæœ¬                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ç³»ç»Ÿè¾¹ç•Œ

```mermaid
graph TB
    subgraph å¤–éƒ¨ç³»ç»Ÿ
        A[Webç®¡ç†åå°]
        B[ç§»åŠ¨ç«¯APP]
        C[å°ç¨‹åº]
        D[ç¬¬ä¸‰æ–¹ç³»ç»Ÿ]
        E[IoTè®¾å¤‡]
    end
    
    subgraph IOE-DREAMå¹³å°
        F[APIç½‘å…³]
        G[ä¸šåŠ¡å¾®æœåŠ¡é›†ç¾¤]
        H[æ•°æ®å­˜å‚¨å±‚]
    end
    
    A --> F
    B --> F
    C --> F
    D --> F
    E --> G
    F --> G
    G --> H
```

---

## 3. æ•´ä½“æ¶æ„è®¾è®¡

### 3.1 æ¶æ„å…¨æ™¯å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ã€æ¥å…¥å±‚ - Access Layerã€‘                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Webç®¡ç†å°â”‚  â”‚ç§»åŠ¨ç«¯APPâ”‚  â”‚å¾®ä¿¡å°ç¨‹åºâ”‚  â”‚ç¬¬ä¸‰æ–¹ç³»ç»Ÿâ”‚  â”‚ IoTè®¾å¤‡(é—¨ç¦/è€ƒå‹¤) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚            â”‚            â”‚                   â”‚
        â–¼            â–¼            â–¼            â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ã€ç½‘å…³å±‚ - Gateway Layerã€‘                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    ioedream-gateway-service (8080)                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚è·¯ç”±è½¬å‘ â”‚  â”‚è´Ÿè½½å‡è¡¡ â”‚  â”‚é™æµç†”æ–­ â”‚  â”‚èº«ä»½è®¤è¯ â”‚  â”‚æ—¥å¿—è¿½è¸ª â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ã€ä¸šåŠ¡æœåŠ¡å±‚ - Service Layerã€‘                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         æ ¸å¿ƒä¸šåŠ¡å¾®æœåŠ¡é›†ç¾¤                              â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ common-service   â”‚  â”‚ device-comm      â”‚  â”‚ oa-service       â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ (8088)           â”‚  â”‚ (8087)           â”‚  â”‚ (8089)           â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ å…¬å…±ä¸šåŠ¡æœåŠ¡     â”‚  â”‚ è®¾å¤‡é€šè®¯æœåŠ¡     â”‚  â”‚ OAåŠå…¬æœåŠ¡       â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ access-service   â”‚  â”‚ attendance-svc   â”‚  â”‚ video-service    â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ (8090)           â”‚  â”‚ (8091)           â”‚  â”‚ (8092)           â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ é—¨ç¦ç®¡ç†æœåŠ¡     â”‚  â”‚ è€ƒå‹¤ç®¡ç†æœåŠ¡     â”‚  â”‚ è§†é¢‘ç›‘æ§æœåŠ¡     â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚  â”‚
â”‚  â”‚  â”‚ consume-service  â”‚  â”‚ visitor-service  â”‚                           â”‚  â”‚
â”‚  â”‚  â”‚ (8094)           â”‚  â”‚ (8095)           â”‚                           â”‚  â”‚
â”‚  â”‚  â”‚ æ¶ˆè´¹ç®¡ç†æœåŠ¡     â”‚  â”‚ è®¿å®¢ç®¡ç†æœåŠ¡     â”‚                           â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ã€åŸºç¡€è®¾æ–½å±‚ - Infrastructure Layerã€‘                 â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Nacos     â”‚  â”‚   Redis     â”‚  â”‚  RabbitMQ   â”‚  â”‚   Seata     â”‚         â”‚
â”‚  â”‚ é…ç½®/æ³¨å†Œ   â”‚  â”‚ ç¼“å­˜/ä¼šè¯   â”‚  â”‚  æ¶ˆæ¯é˜Ÿåˆ—   â”‚  â”‚ åˆ†å¸ƒå¼äº‹åŠ¡  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   MySQL     â”‚  â”‚  Zipkin     â”‚  â”‚ Prometheus  â”‚  â”‚  Grafana    â”‚         â”‚
â”‚  â”‚  æ•°æ®å­˜å‚¨   â”‚  â”‚ é“¾è·¯è¿½è¸ª   â”‚  â”‚  æŒ‡æ ‡é‡‡é›†   â”‚  â”‚  å¯è§†åŒ–     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å¾®æœåŠ¡æ¶æ„å›¾

```mermaid
graph TB
    subgraph Gateway["ç½‘å…³å±‚"]
        GW[ioedream-gateway-service<br/>8080]
    end
    
    subgraph Core["æ ¸å¿ƒæœåŠ¡"]
        CS[common-service<br/>8088]
        DC[device-comm-service<br/>8087]
        OA[oa-service<br/>8089]
        BM[biometric-service<br/>8096]
    end
    
    subgraph Business["ä¸šåŠ¡æœåŠ¡"]
        AC[access-service<br/>8090]
        AT[attendance-service<br/>8091]
        VI[video-service<br/>8092]
        CO[consume-service<br/>8094]
        VS[visitor-service<br/>8095]
        DB[database-service<br/>8093]
    end
    
    subgraph Infra["åŸºç¡€è®¾æ–½"]
        NA[Nacos]
        RD[Redis]
        MQ[RabbitMQ]
        SE[Seata]
        DB[(MySQL)]
    end
    
    GW --> CS
    GW --> DC
    GW --> OA
    GW --> BM
    GW --> AC
    GW --> AT
    GW --> VI
    GW --> CO
    GW --> VS
    GW --> DB
    
    CS --> NA
    CS --> RD
    CS --> DB
    
    AC --> MQ
    AT --> MQ
    CO --> SE
```

### 3.3 æœåŠ¡èŒè´£åˆ’åˆ†

| æœåŠ¡åç§° | ç«¯å£ | èŒè´£èŒƒå›´ | æ ¸å¿ƒåŠŸèƒ½ | å¤‡æ³¨ |
|---------|------|---------|---------|------|
| **gateway-service** | 8080 | APIç½‘å…³ | è·¯ç”±ã€é™æµã€è®¤è¯ã€æ—¥å¿— | |
| **common-service** | 8088 | å…¬å…±ä¸šåŠ¡ | ç”¨æˆ·ã€ç»„ç»‡ã€æƒé™ã€å­—å…¸ã€é€šçŸ¥ | |
| **device-comm-service** | 8087 | è®¾å¤‡é€šè®¯ | åè®®é€‚é…ã€æ¨¡æ¿ä¸‹å‘ã€æŒ‡ä»¤ä¸‹å‘ âš ï¸ ä¸åšè¯†åˆ« | |
| **oa-service** | 8089 | OAåŠå…¬ | å·¥ä½œæµã€å®¡æ‰¹ã€è¡¨å•ã€é€šçŸ¥ | |
| **access-service** | 8090 | é—¨ç¦ç®¡ç† | é€šè¡Œè®°å½•ã€æƒé™æ§åˆ¶ã€é˜²åæ½œ âš ï¸ æ¥æ”¶è®¾å¤‡ä¸Šä¼ è®°å½• | |
| **attendance-service** | 8091 | è€ƒå‹¤ç®¡ç† | æ‰“å¡è®°å½•ã€æ’ç­ç®¡ç†ã€ç»Ÿè®¡æŠ¥è¡¨ã€å·¥æ—¶è®¡ç®— | |
| **video-service** | 8092 | è§†é¢‘ç›‘æ§ | å®æ—¶ç›‘æ§ã€å½•åƒå›æ”¾ã€AIåˆ†æã€è”åŠ¨å½•åƒ | |
| **database-service** | 8093 | æ•°æ®åº“ç®¡ç† | å¤‡ä»½æ¢å¤ã€æ€§èƒ½ç›‘æ§ã€æ•°æ®è¿ç§» | ğŸ†• |
| **consume-service** | 8094 | æ¶ˆè´¹ç®¡ç† | è´¦æˆ·ç®¡ç†ã€æ¶ˆè´¹è®°å½•ã€ç¦»çº¿åŒæ­¥ã€å¯¹è´¦è¡¥è´´ | |
| **visitor-service** | 8095 | è®¿å®¢ç®¡ç† | è®¿å®¢é¢„çº¦ã€ç™»è®°å®¡æ‰¹ã€ç­¾åˆ°ç­¾å‡ºã€è½¨è¿¹è¿½è¸ª | |
| **biometric-service** | 8096 | **ç”Ÿç‰©æ¨¡æ¿ç®¡ç†** â­ | **æ¨¡æ¿å­˜å‚¨ã€ç‰¹å¾æå–ã€è®¾å¤‡ä¸‹å‘ã€æƒé™è”åŠ¨** âš ï¸ ä»…ç®¡ç†æ•°æ®ï¼Œä¸åšè¯†åˆ« | ğŸ†• |

---

## 3.4 è®¾å¤‡äº¤äº’æ¨¡å¼æ¶æ„ â­ æ ¸å¿ƒè®¾è®¡ç†å¿µ

åŸºäº**çœŸå®è®¾å¤‡äº¤äº’åœºæ™¯**çš„5ç§è®¾å¤‡äº¤äº’æ¨¡å¼,ç¡®ä¿æ¶æ„è®¾è®¡ç¬¦åˆå®é™…ä¸šåŠ¡éœ€æ±‚:

### 3.4.1 æ¨¡å¼1: é—¨ç¦ç³»ç»ŸåŒæ¨¡å¼éªŒè¯æ¶æ„

**é€‚ç”¨åœºæ™¯**: é—¨ç¦è®¾å¤‡ã€é—¸æœºã€ç”µå­é”

**æ ¸å¿ƒè®¾è®¡**: æ”¯æŒä¸¤ç§éªŒè¯æ¨¡å¼ï¼Œæ ¹æ®åŒºåŸŸé…ç½®è‡ªåŠ¨åˆ‡æ¢

#### æ¨¡å¼1A: è®¾å¤‡ç«¯éªŒè¯æ¨¡å¼ (Edge Verification)

**é€‚ç”¨åœºæ™¯**: ä¸­å°ä¼ä¸š(<1000äºº)ã€ç½‘ç»œä¸ç¨³å®šã€ç®€å•æƒé™

```
ã€æ•°æ®ä¸‹å‘ã€‘è½¯ä»¶ç«¯ â†’ è®¾å¤‡ç«¯
  â”œâ”€ äººå‘˜åŸºç¡€ä¿¡æ¯(å§“åã€å·¥å·ã€éƒ¨é—¨)
  â”œâ”€ ç”Ÿç‰©æ¨¡æ¿æ•°æ®(äººè„¸/æŒ‡çº¹ç‰¹å¾å‘é‡)
  â”œâ”€ æƒé™æ•°æ®(æ—¶é—´æ®µã€åŒºåŸŸã€æœ‰æ•ˆæœŸ)
  â””â”€ é»‘åå•æ•°æ®

ã€å®æ—¶éªŒè¯ã€‘è®¾å¤‡ç«¯å®Œå…¨è‡ªä¸» â­ æ ¸å¿ƒç‰¹æ€§
  â”œâ”€ æœ¬åœ°è¯†åˆ«: è®¾å¤‡å†…åµŒç®—æ³•è¿›è¡Œ1:Næ¯”å¯¹
  â”œâ”€ æœ¬åœ°éªŒè¯: æ£€æŸ¥æœ¬åœ°æƒé™è¡¨
  â”œâ”€ æœ¬åœ°æ§åˆ¶: ç›´æ¥å¼€é—¨,æ— éœ€ç­‰å¾…æœåŠ¡å™¨
  â””â”€ ç¦»çº¿å¯ç”¨: ç½‘ç»œä¸­æ–­æ—¶ä»å¯æ­£å¸¸å·¥ä½œ

ã€äº‹åä¸Šä¼ ã€‘è®¾å¤‡ç«¯ â†’ è½¯ä»¶ç«¯
  â””â”€ æ‰¹é‡ä¸Šä¼ é€šè¡Œè®°å½•(æ¯åˆ†é’Ÿæˆ–ç´¯è®¡100æ¡)

ã€æŠ€æœ¯ä¼˜åŠ¿ã€‘
  âœ… å“åº”é€Ÿåº¦å¿«: è¯†åˆ«+éªŒè¯+å¼€é—¨ < 1ç§’
  âœ… ç¦»çº¿å¯ç”¨: ç½‘ç»œæ•…éšœä¸å½±å“é€šè¡Œ
  âœ… é™ä½æœåŠ¡å™¨å‹åŠ›: 1000æ¬¡é€šè¡Œåªéœ€å¤„ç†è®°å½•å­˜å‚¨
  âœ… æ•°æ®å®‰å…¨: ç”Ÿç‰©ç‰¹å¾åœ¨è®¾å¤‡ç«¯åŠ å¯†å­˜å‚¨

ã€æŠ€æœ¯é™åˆ¶ã€‘
  âš ï¸ æƒé™åŒæ­¥: å˜æ›´éœ€å®æ—¶æ¨é€åˆ°æ‰€æœ‰è®¾å¤‡
  âš ï¸ è®¾å¤‡å­˜å‚¨: å¤§å‹å›­åŒº10000+äººå‘˜,è®¾å¤‡å®¹é‡æœ‰é™
  âš ï¸ æ•°æ®ä¸€è‡´æ€§: è®¾å¤‡ç«¯ä¸è½¯ä»¶ç«¯æ•°æ®åŒæ­¥å»¶è¿Ÿ
  âš ï¸ å¤æ‚é€»è¾‘: åæ½œã€äº’é”ç­‰é€»è¾‘éš¾ä»¥åœ¨è®¾å¤‡ç«¯å®ç°
```

#### æ¨¡å¼1B: åå°éªŒè¯æ¨¡å¼ (Backend Verification)

**é€‚ç”¨åœºæ™¯**: å¤§å‹ä¼ä¸š(>1000äºº)ã€ç½‘ç»œç¨³å®šã€å¤æ‚æƒé™(åæ½œ/äº’é”/å¤šäººéªŒè¯)

```
ã€æ•°æ®ä¸‹å‘ã€‘è½¯ä»¶ç«¯ â†’ è®¾å¤‡ç«¯
  â””â”€ äººå‘˜ç”Ÿç‰©æ¨¡æ¿æ•°æ®(ä»…ç”¨äºè¯†åˆ«)

ã€å®æ—¶éªŒè¯ã€‘è®¾å¤‡ç«¯è¯†åˆ« + è½¯ä»¶ç«¯éªŒè¯ â­ æ ¸å¿ƒæ¶æ„
  æ­¥éª¤1: è®¾å¤‡é‡‡é›†ç”Ÿç‰©ç‰¹å¾ â†’ æœ¬åœ°è¯†åˆ«åŒ¹é…userId
  æ­¥éª¤2: è®¾å¤‡å‘é€éªŒè¯è¯·æ±‚åˆ°è½¯ä»¶ç«¯
         POST /iclock/cdata?SN=xxx&AuthType=device
  æ­¥éª¤3: è½¯ä»¶ç«¯æ‰§è¡Œæƒé™éªŒè¯ â­ æ ¸å¿ƒé€»è¾‘
         â”œâ”€ åæ½œéªŒè¯ (åŒä¸€ç”¨æˆ·ä¸èƒ½è¿ç»­è¿›å…¥)
         â”œâ”€ äº’é”éªŒè¯ (Aé—¨å¼€æ—¶Bé—¨ä¸èƒ½å¼€)
         â”œâ”€ æ—¶é—´æ®µéªŒè¯
         â”œâ”€ é»‘åå•éªŒè¯
         â””â”€ å¤šäººéªŒè¯ (éœ€NäººåŒæ—¶éªŒè¯)
  æ­¥éª¤4: è½¯ä»¶ç«¯è¿”å›ç»“æœ
         HTTP 200 OK
         AUTH=SUCCEED/FAILED
         CONTROL DEVICE AABBCCDDEE
  æ­¥éª¤5: è®¾å¤‡æ ¹æ®ç»“æœ â†’ å¼€é—¨/æ‹’ç»
  æ­¥éª¤6: è®¾å¤‡ä¸Šä¼ é€šè¡Œè®°å½• (å®æ—¶)

ã€æŠ€æœ¯ä¼˜åŠ¿ã€‘
  âœ… å¤æ‚æƒé™æ”¯æŒ: åæ½œã€äº’é”ã€å¤šäººéªŒè¯
  âœ… æƒé™å®æ—¶ç”Ÿæ•ˆ: æƒé™å˜æ›´ç«‹å³ç”Ÿæ•ˆ,æ— éœ€åŒæ­¥
  âœ… é›†ä¸­ç®¡ç†: æƒé™é€»è¾‘ç»Ÿä¸€ç®¡ç†,ä¾¿äºå®¡è®¡
  âœ… è®¾å¤‡å­˜å‚¨å°: åªéœ€å­˜å‚¨äººå‘˜æ¨¡æ¿,ä¸å­˜æƒé™
  âœ… çµæ´»æ‰©å±•: æ–°å¢æƒé™è§„åˆ™æ— éœ€å‡çº§è®¾å¤‡

ã€æŠ€æœ¯é™åˆ¶ã€‘
  âš ï¸ ç½‘ç»œä¾èµ–: å¿…é¡»åœ¨çº¿æ‰èƒ½éªŒè¯ (æ–­ç½‘æ— æ³•é€šè¡Œ)
  âš ï¸ å“åº”æ—¶é—´: ä¾èµ–ç½‘ç»œå»¶è¿Ÿ (1-3ç§’)
  âš ï¸ æœåŠ¡å™¨å‹åŠ›: æ¯æ¬¡é€šè¡Œéƒ½éœ€è¦éªŒè¯
```

**æ¨¡å¼åˆ‡æ¢**: é€šè¿‡`t_access_area_ext.verification_mode`å­—æ®µé…ç½®ï¼ˆedge/backend/hybridï¼‰

### 3.4.2 æ¨¡å¼2: ä¸­å¿ƒå®æ—¶éªŒè¯æ¨¡å¼ (æ¶ˆè´¹ç³»ç»Ÿ)

**é€‚ç”¨åœºæ™¯**: é£Ÿå ‚æ¶ˆè´¹ã€è¶…å¸‚è´­ç‰©ã€è‡ªåŠ¨å”®è´§æœº

```
ã€æ•°æ®ä¸‹å‘ã€‘è½¯ä»¶ç«¯ â†’ è®¾å¤‡ç«¯
  â”œâ”€ äººå‘˜åŸºç¡€ä¿¡æ¯
  â”œâ”€ ç”Ÿç‰©æ¨¡æ¿æ•°æ®(ä»…ç”¨äºè¯†åˆ«,ä¸å«ä½™é¢)
  â””â”€ âš ï¸ ä¸ä¸‹å‘è´¦æˆ·ä½™é¢(é˜²æ­¢è®¾å¤‡ç¯¡æ”¹)

ã€å®æ—¶æ¶ˆè´¹ã€‘è®¾å¤‡ç«¯è¯†åˆ« + è½¯ä»¶ç«¯éªŒè¯ â­ æ ¸å¿ƒæµç¨‹
  æ­¥éª¤1: è®¾å¤‡é‡‡é›†ç”Ÿç‰©ç‰¹å¾ â†’ æœ¬åœ°è¯†åˆ«åŒ¹é…userId
  æ­¥éª¤2: è®¾å¤‡å‘é€æ¶ˆè´¹è¯·æ±‚åˆ°è½¯ä»¶ç«¯ â†’ {userId, amount, deviceId}
  æ­¥éª¤3: è½¯ä»¶ç«¯æŸ¥è¯¢è´¦æˆ·ä½™é¢ â†’ éªŒè¯æ˜¯å¦è¶³å¤Ÿ
  æ­¥éª¤4: è½¯ä»¶ç«¯æ‰£æ¬¾ â†’ è¿”å›æˆåŠŸ/å¤±è´¥
  æ­¥éª¤5: è®¾å¤‡æ ¹æ®ç»“æœ â†’ å‡ºè´§/æç¤ºä½™é¢ä¸è¶³

ã€æ•°æ®å®‰å…¨ã€‘
  âœ… ä½™é¢åœ¨è½¯ä»¶ç«¯: è®¾å¤‡æ— æ³•ç¯¡æ”¹
  âœ… å®æ—¶éªŒè¯: æ¯ç¬”æ¶ˆè´¹éƒ½ç»è¿‡æœåŠ¡å™¨éªŒè¯
  âœ… äº‹åŠ¡ä¿è¯: Seataåˆ†å¸ƒå¼äº‹åŠ¡ç¡®ä¿ä¸€è‡´æ€§

ã€æŠ€æœ¯è¦æ±‚ã€‘
  âš ï¸ ç½‘ç»œè¦æ±‚é«˜: å¿…é¡»åœ¨çº¿æ‰èƒ½æ¶ˆè´¹
  âš ï¸ å¹¶å‘èƒ½åŠ›: åˆé«˜å³°500äººåŒæ—¶æ¶ˆè´¹
  âš ï¸ å“åº”æ—¶é—´: P99 < 300ms
```

### 3.4.3 æ¨¡å¼3: è¾¹ç¼˜è¯†åˆ«+ä¸­å¿ƒè®¡ç®—+æ’ç­è”åŠ¨ (è€ƒå‹¤ç³»ç»Ÿ)

**é€‚ç”¨åœºæ™¯**: è€ƒå‹¤æ‰“å¡æœºã€ç§»åŠ¨ç«¯æ‰“å¡

```
ã€æ•°æ®ä¸‹å‘ã€‘è½¯ä»¶ç«¯ â†’ è®¾å¤‡ç«¯
  â”œâ”€ äººå‘˜åŸºç¡€ä¿¡æ¯
  â”œâ”€ ç”Ÿç‰©æ¨¡æ¿æ•°æ®
  â””â”€ âš ï¸ ä¸ä¸‹å‘æ’ç­è®¡åˆ’å’Œè€ƒå‹¤è§„åˆ™

ã€å®æ—¶æ‰“å¡ã€‘è®¾å¤‡ç«¯è½»é‡è¯†åˆ«
  â”œâ”€ é‡‡é›†ç”Ÿç‰©ç‰¹å¾
  â”œâ”€ æœ¬åœ°è¯†åˆ«åŒ¹é…userId
  â”œâ”€ ç”Ÿæˆæ‰“å¡è®°å½•: userId + æ—¶é—´ + è®¾å¤‡ID
  â””â”€ ç«‹å³ä¸Šä¼ åˆ°è½¯ä»¶ç«¯

ã€äº‹åè®¡ç®—ã€‘è½¯ä»¶ç«¯ç»¼åˆè®¡ç®— â­ æ ¸å¿ƒé€»è¾‘
  æ¯æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œè€ƒå‹¤è®¡ç®—:
  
  æ­¥éª¤1: æŸ¥è¯¢æ’ç­è®¡åˆ’
    â†’ ç­æ¬¡ç±»å‹ã€å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€ä¼‘æ¯æ—¶æ®µ
  
  æ­¥éª¤2: æŸ¥è¯¢æ‰“å¡è®°å½•
    â†’ ä¸Šç­æ‰“å¡æ—¶é—´ã€ä¸‹ç­æ‰“å¡æ—¶é—´
  
  æ­¥éª¤3: æŸ¥è¯¢è€ƒå‹¤è§„åˆ™
    â†’ è¿Ÿåˆ°å®½é™ã€æ—©é€€å®½é™ã€åŠ ç­èµ·ç®—æ—¶é•¿
  
  æ­¥éª¤4: ä¸‰è¦ç´ ç»“åˆè®¡ç®— â­
    æ‰“å¡è®°å½• + æ’ç­è®¡åˆ’ + è€ƒå‹¤è§„åˆ™ = è€ƒå‹¤ç»“æœ
    
    a) è®¡ç®—å®é™…å·¥æ—¶:
       (ä¸‹ç­æ—¶é—´ - ä¸Šç­æ—¶é—´) - ä¼‘æ¯æ—¶é•¿
    
    b) åˆ¤æ–­è¿Ÿåˆ°:
       ä¸Šç­æ‰“å¡æ—¶é—´ > (æ’ç­å¼€å§‹æ—¶é—´ + å®½é™)
    
    c) åˆ¤æ–­æ—©é€€:
       ä¸‹ç­æ‰“å¡æ—¶é—´ < (æ’ç­ç»“æŸæ—¶é—´ - å®½é™)
    
    d) åˆ¤æ–­åŠ ç­:
       (ä¸‹ç­æ‰“å¡ - æ’ç­ç»“æŸ) > åŠ ç­èµ·ç®—æ—¶é•¿

ã€æŠ€æœ¯ä¼˜åŠ¿ã€‘
  âœ… è®¾å¤‡è½»é‡: åªè´Ÿè´£è¯†åˆ«,ä¸å­˜å‚¨å¤æ‚è§„åˆ™
  âœ… è§„åˆ™çµæ´»: è€ƒå‹¤è§„åˆ™å˜æ›´æ— éœ€æ›´æ–°è®¾å¤‡
  âœ… æ”¯æŒå¤šç§å·¥æ—¶åˆ¶: æ ‡å‡†/å¼¹æ€§/è½®ç­/å¤–å‹¤
  âœ… äº‹åå¯å®¡è®¡: å¯é‡æ–°è®¡ç®—å†å²æ•°æ®
```

### 3.4.4 æ¨¡å¼4: æ··åˆéªŒè¯æ¨¡å¼ (è®¿å®¢ç³»ç»Ÿ)

**é€‚ç”¨åœºæ™¯**: è®¿å®¢é€šè¡Œã€ä¸´æ—¶æƒé™

```
ã€è®¿å®¢é¢„çº¦ã€‘è½¯ä»¶ç«¯å¤„ç†
  â”œâ”€ è®¿å®¢ä¿¡æ¯ç™»è®°
  â”œâ”€ å®¡æ‰¹æµç¨‹(OAå·¥ä½œæµ)
  â”œâ”€ ç”Ÿæˆè®¿å®¢äºŒç»´ç /ä¸´æ—¶å¡
  â””â”€ ä¸‹å‘è®¿å®¢æƒé™åˆ°æŒ‡å®šé—¨ç¦è®¾å¤‡

ã€è®¿å®¢é€šè¡Œã€‘è®¾å¤‡ç«¯+è½¯ä»¶ç«¯æ··åˆéªŒè¯
  æ¨¡å¼A: äºŒç»´ç éªŒè¯(åœ¨çº¿)
    è®¾å¤‡æ‰«ç  â†’ ä¸Šä¼ è½¯ä»¶ç«¯éªŒè¯ â†’ è¿”å›ç»“æœ â†’ å¼€é—¨
  
  æ¨¡å¼B: ä¸´æ—¶å¡éªŒè¯(ç¦»çº¿)
    è®¾å¤‡è¯»å¡ â†’ æœ¬åœ°éªŒè¯ â†’ ç›´æ¥å¼€é—¨

ã€è®¿å®¢ç¦»åœºã€‘
  â”œâ”€ è®°å½•ç­¾å‡ºæ—¶é—´
  â”œâ”€ è‡ªåŠ¨å¤±æ•ˆè®¿å®¢æƒé™
  â””â”€ ä»è®¾å¤‡ç«¯åˆ é™¤ä¸´æ—¶æƒé™
```

### 3.4.5 æ¨¡å¼5: è¾¹ç¼˜AIè®¡ç®—æ¨¡å¼ (è§†é¢‘ç›‘æ§)

**é€‚ç”¨åœºæ™¯**: è§†é¢‘ç›‘æ§ã€AIè¯†åˆ«ã€è¡Œä¸ºåˆ†æ

```
ã€è§†é¢‘é‡‡é›†ã€‘è®¾å¤‡ç«¯è¾¹ç¼˜AIå¤„ç†
  â”œâ”€ å®æ—¶è§†é¢‘æµé‡‡é›†
  â”œâ”€ è¾¹ç¼˜AIèŠ¯ç‰‡è¿›è¡Œæœ¬åœ°è¯†åˆ«
  â”‚   â”œâ”€ äººè„¸æ£€æµ‹ä¸è¯†åˆ«
  â”‚   â”œâ”€ è¡Œä¸ºåˆ†æ(å¾˜å¾Šã€å¥”è·‘ã€è·Œå€’)
  â”‚   â””â”€ å¼‚å¸¸æ£€æµ‹(äººç¾¤èšé›†ã€é—¯å…¥)
  â””â”€ åªä¸Šä¼ è¯†åˆ«ç»“æœå’Œå…³é”®å¸§,ä¸ä¸Šä¼ å®Œæ•´è§†é¢‘

ã€è”åŠ¨å½•åƒã€‘äº‹ä»¶é©±åŠ¨
  â”œâ”€ é—¨ç¦é€šè¡Œäº‹ä»¶ â†’ è§¦å‘è§†é¢‘å½•åƒ5åˆ†é’Ÿ
  â”œâ”€ å¼‚å¸¸è¡Œä¸ºäº‹ä»¶ â†’ è§¦å‘å‘Šè­¦+å½•åƒ
  â””â”€ è§†é¢‘å­˜å‚¨åœ¨æœ¬åœ°NVR,æŒ‰éœ€å›æ”¾

ã€æŠ€æœ¯ä¼˜åŠ¿ã€‘
  âœ… é™ä½å¸¦å®½: åªä¼ ç»“æœä¸ä¼ è§†é¢‘æµ
  âœ… å®æ—¶å“åº”: è¾¹ç¼˜AIæ¯«ç§’çº§è¯†åˆ«
  âœ… éšç§ä¿æŠ¤: æ•æ„Ÿè§†é¢‘ä¸ä¸Šäº‘
```

### 3.4.6 è®¾å¤‡äº¤äº’æ¨¡å¼é€‰æ‹©å†³ç­–è¡¨

| ä¸šåŠ¡åœºæ™¯ | äº¤äº’æ¨¡å¼ | è®¾å¤‡èŒè´£ | è½¯ä»¶èŒè´£ | ç½‘ç»œè¦æ±‚ |
|---------|---------|---------|---------|----------|
| **é—¨ç¦é€šè¡Œ** | åŒæ¨¡å¼éªŒè¯(edge/backend) | è¯†åˆ«+éªŒè¯+æ§åˆ¶(edge) æˆ– è¯†åˆ«(backend) | æ•°æ®ä¸‹å‘+è®°å½•å­˜å‚¨(edge) æˆ– å®æ—¶éªŒè¯(backend) | edgeå¯ç¦»çº¿,backendéœ€åœ¨çº¿ |
| **é£Ÿå ‚æ¶ˆè´¹** | ä¸­å¿ƒå®æ—¶éªŒè¯ | è¯†åˆ« | éªŒè¯+æ‰£æ¬¾ | å¿…é¡»åœ¨çº¿ |
| **è€ƒå‹¤æ‰“å¡** | è¾¹ç¼˜è¯†åˆ«+ä¸­å¿ƒè®¡ç®— | è¯†åˆ« | æ’ç­+è§„åˆ™+è®¡ç®— | å¯ç¦»çº¿ |
| **è®¿å®¢é€šè¡Œ** | æ··åˆéªŒè¯ | è¯†åˆ«+éªŒè¯ | å®¡æ‰¹+æƒé™ä¸‹å‘ | åœ¨çº¿ä¸ºä¸» |
| **è§†é¢‘ç›‘æ§** | è¾¹ç¼˜AIè®¡ç®— | AIè¯†åˆ«+å½•åƒ | äº‹ä»¶å¤„ç†+è”åŠ¨ | ä½å¸¦å®½ |

---

## 4. æŠ€æœ¯é€‰å‹

### 4.1 æŠ€æœ¯æ ˆæ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        IOE-DREAM æŠ€æœ¯æ ˆçŸ©é˜µ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å±‚æ¬¡      â”‚                      æŠ€æœ¯é€‰å‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å‰ç«¯      â”‚ Vue 3.4 + Vite 5 + Ant Design Vue 4 + Pinia          â”‚
â”‚   ç§»åŠ¨ç«¯    â”‚ uni-app 3.0 + Vue 3 + uni-ui                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç½‘å…³      â”‚ Spring Cloud Gateway 4.1                              â”‚
â”‚   å¾®æœåŠ¡    â”‚ Spring Boot 3.5.8 + Spring Cloud 2025.0.0            â”‚
â”‚   æ³¨å†Œé…ç½®  â”‚ Nacos 2.x (Spring Cloud Alibaba 2025.0.0.0)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æŒä¹…å±‚    â”‚ MyBatis-Plus 3.5.15 + Druid 1.2.25                   â”‚
â”‚   æ•°æ®åº“    â”‚ MySQL 8.0.35                                          â”‚
â”‚   ç¼“å­˜      â”‚ Redis 7.x + Caffeine 3.1.8                            â”‚
â”‚   æ¶ˆæ¯é˜Ÿåˆ—  â”‚ RabbitMQ 3.x                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   åˆ†å¸ƒå¼äº‹åŠ¡â”‚ Seata 2.0.0                                           â”‚
â”‚   å®¹é”™      â”‚ Resilience4j 2.1.0                                    â”‚
â”‚   é“¾è·¯è¿½è¸ª  â”‚ Micrometer Tracing + Zipkin                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å®‰å…¨è®¤è¯  â”‚ Sa-Token + JWT (JJWT 0.12.6)                          â”‚
â”‚   APIæ–‡æ¡£   â”‚ Springdoc OpenAPI 2.6.0                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç›‘æ§      â”‚ Prometheus + Grafana + Micrometer                     â”‚
â”‚   æ—¥å¿—      â”‚ Logback + ELK                                         â”‚
â”‚   å®¹å™¨åŒ–    â”‚ Docker + Kubernetes                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ ¸å¿ƒæ¡†æ¶ç‰ˆæœ¬

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Java** | 17 LTS | é•¿æœŸæ”¯æŒç‰ˆæœ¬ |
| **Spring Boot** | 3.5.8 | æœ€æ–°ç¨³å®šç‰ˆ |
| **Spring Cloud** | 2025.0.0 | æœ€æ–°å‘å¸ƒç‰ˆ |
| **Spring Cloud Alibaba** | 2025.0.0.0 | å®Œå…¨å…¼å®¹ |
| **MyBatis-Plus** | 3.5.15 | ORMæ¡†æ¶ |
| **MySQL** | 8.0.35 | å…³ç³»æ•°æ®åº“ |
| **Redis** | 7.x | ç¼“å­˜æ•°æ®åº“ |

### 4.3 æŠ€æœ¯é€‰å‹å†³ç­–

#### 4.3.1 ä¸ºä»€ä¹ˆé€‰æ‹©Spring Cloud 2025.0.0

| ç‰¹æ€§ | ä¼˜åŠ¿ |
|------|------|
| **å®Œå…¨å…¼å®¹Spring Boot 3.5.x** | äº«å—æœ€æ–°ç‰¹æ€§ï¼Œè™šæ‹Ÿçº¿ç¨‹æ”¯æŒ |
| **Native Imageæ”¯æŒ** | GraalVMåŸç”Ÿé•œåƒï¼Œå¯åŠ¨æ—¶é—´msçº§ |
| **å¯è§‚æµ‹æ€§å¢å¼º** | Micrometer Tracingå†…ç½®æ”¯æŒ |
| **å£°æ˜å¼HTTPå®¢æˆ·ç«¯** | ç®€åŒ–æœåŠ¡é—´è°ƒç”¨ |

#### 4.3.2 ä¸ºä»€ä¹ˆé€‰æ‹©MyBatis-Plus + Druid

| ç‰¹æ€§ | ä¼˜åŠ¿ |
|------|------|
| **MyBatis-Plus** | LambdaæŸ¥è¯¢ã€è‡ªåŠ¨å¡«å……ã€é€»è¾‘åˆ é™¤ |
| **Druid** | SQLç›‘æ§ã€é˜²æ³¨å…¥ã€æ€§èƒ½åˆ†æ |
| **ç»Ÿä¸€è§„èŒƒ** | é¡¹ç›®å…¨å±€ç»Ÿä¸€ï¼Œç¦æ­¢HikariCP |

#### 4.3.3 ä¸ºä»€ä¹ˆé€‰æ‹©Seataåˆ†å¸ƒå¼äº‹åŠ¡

| ç‰¹æ€§ | ä¼˜åŠ¿ |
|------|------|
| **ATæ¨¡å¼** | æ— ä¾µå…¥ï¼Œè‡ªåŠ¨è¡¥å¿ |
| **å¯è§†åŒ–æ§åˆ¶å°** | äº‹åŠ¡çŠ¶æ€ç›‘æ§ |
| **é˜¿é‡ŒèƒŒä¹¦** | å¤§è§„æ¨¡ç”Ÿäº§éªŒè¯ |

---

## 5. åˆ†å±‚æ¶æ„è®¾è®¡

### 5.1 å››å±‚æ¶æ„è§„èŒƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Controller å±‚ - æ¥å£æ§åˆ¶å±‚                    â”‚
â”‚  èŒè´£ï¼šæ¥æ”¶HTTPè¯·æ±‚ã€å‚æ•°éªŒè¯ã€è°ƒç”¨Serviceã€å°è£…å“åº”             â”‚
â”‚  æ³¨è§£ï¼š@RestControllerã€@RequestMappingã€@Valid                  â”‚
â”‚  è§„èŒƒï¼šç¦æ­¢åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œç¦æ­¢ç›´æ¥è°ƒç”¨DAO                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Service å±‚ - æ ¸å¿ƒä¸šåŠ¡å±‚                       â”‚
â”‚  èŒè´£ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†ã€è°ƒç”¨Manager                       â”‚
â”‚  æ³¨è§£ï¼š@Serviceã€@Transactional                                  â”‚
â”‚  è§„èŒƒï¼šä¸šåŠ¡é€»è¾‘å…¥å£ï¼Œç®¡ç†äº‹åŠ¡è¾¹ç•Œ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Manager å±‚ - ä¸šåŠ¡ç¼–æ’å±‚                       â”‚
â”‚  èŒè´£ï¼šå¤æ‚æµç¨‹ç¼–æ’ã€å¤šDAOæ•°æ®ç»„è£…ã€ç¼“å­˜ç®¡ç†ã€ç¬¬ä¸‰æ–¹é›†æˆ         â”‚
â”‚  è§„èŒƒï¼šçº¯Javaç±»ï¼ˆcommonä¸­ï¼‰æˆ–@Componentï¼ˆå¾®æœåŠ¡ä¸­ï¼‰              â”‚
â”‚  ç‰¹ç‚¹ï¼šå¯è¢«å¤šä¸ªServiceå¤ç”¨                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DAO å±‚ - æ•°æ®è®¿é—®å±‚                           â”‚
â”‚  èŒè´£ï¼šæ•°æ®åº“CRUDã€å¤æ‚SQLæŸ¥è¯¢                                   â”‚
â”‚  æ³¨è§£ï¼š@Mapper (ç¦æ­¢@Repository)                                 â”‚
â”‚  è§„èŒƒï¼šç»§æ‰¿BaseMapper<Entity>ï¼Œä½¿ç”¨LambdaQueryWrapper            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å±‚é—´è°ƒç”¨è§„èŒƒ

```mermaid
graph TD
    A[Controller] -->|è°ƒç”¨| B[Service]
    B -->|è°ƒç”¨| C[Manager]
    C -->|è°ƒç”¨| D[DAO]
    B -->|ç›´æ¥è°ƒç”¨ç®€å•æŸ¥è¯¢| D
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#e8f5e9
```

### 5.3 ä»£ç æ¨¡æ¿ç¤ºä¾‹

#### Controllerå±‚

```java
@RestController
@RequestMapping("/api/v1/users")
@Tag(name = "ç”¨æˆ·ç®¡ç†")
public class UserController {

    @Resource
    private UserService userService;

    @GetMapping("/{id}")
    @Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…")
    public ResponseDTO<UserVO> getById(@PathVariable Long id) {
        return ResponseDTO.ok(userService.getById(id));
    }

    @PostMapping
    @Operation(summary = "åˆ›å»ºç”¨æˆ·")
    public ResponseDTO<Long> add(@Valid @RequestBody UserAddForm form) {
        return ResponseDTO.ok(userService.add(form));
    }
}
```

#### Serviceå±‚

```java
@Service
@Transactional(rollbackFor = Exception.class)
public class UserServiceImpl implements UserService {

    @Resource
    private UserDao userDao;
    
    @Resource
    private UserManager userManager;

    @Override
    public UserVO getById(Long id) {
        UserEntity entity = userDao.selectById(id);
        if (entity == null) {
            throw new BusinessException("USER_NOT_FOUND", "ç”¨æˆ·ä¸å­˜åœ¨");
        }
        return userManager.convertToVO(entity);
    }
}
```

#### Managerå±‚

```java
// microservices-commonä¸­çš„Managerï¼ˆçº¯Javaç±»ï¼‰
public class UserManager {
    
    private final UserDao userDao;
    private final DepartmentDao departmentDao;
    
    public UserManager(UserDao userDao, DepartmentDao departmentDao) {
        this.userDao = userDao;
        this.departmentDao = departmentDao;
    }
    
    public UserVO convertToVO(UserEntity entity) {
        UserVO vo = new UserVO();
        BeanUtils.copyProperties(entity, vo);
        // ç»„è£…éƒ¨é—¨ä¿¡æ¯
        if (entity.getDepartmentId() != null) {
            DepartmentEntity dept = departmentDao.selectById(entity.getDepartmentId());
            vo.setDepartmentName(dept != null ? dept.getName() : null);
        }
        return vo;
    }
}
```

#### DAOå±‚

```java
@Mapper
public interface UserDao extends BaseMapper<UserEntity> {

    @Transactional(readOnly = true)
    default List<UserEntity> selectByDepartmentId(Long departmentId) {
        return selectList(new LambdaQueryWrapper<UserEntity>()
                .eq(UserEntity::getDepartmentId, departmentId)
                .eq(UserEntity::getDeletedFlag, 0)
                .orderByDesc(UserEntity::getCreateTime));
    }
}
```

---

### 5.4 Entityç»Ÿä¸€ç®¡ç†è§„èŒƒ â­ v4.0.0æ›´æ–°

**æ›´æ–°æ—¥æœŸ**: 2025-12-26
**é‡å¤§å˜æ›´**: Entityç»Ÿä¸€ç®¡ç†ä¸ç»†ç²’åº¦æ¨¡å—æ¶æ„

#### 5.4.1 Entityç»Ÿä¸€ç®¡ç†åŸåˆ™

**æ ¸å¿ƒç†å¿µ**:

```
æ‰€æœ‰Entityç±»ç»Ÿä¸€ç®¡ç†åœ¨microservices-common-entityæ¨¡å—
ä¸šåŠ¡æœåŠ¡ä¸å†é‡å¤å®šä¹‰Entityï¼Œé¿å…ä»£ç å†—ä½™å’Œä¸ä¸€è‡´
```

**æ¶æ„ä¼˜åŠ¿**:

- âœ… **æ¶ˆé™¤é‡å¤**: é¿å…ä¸šåŠ¡æœåŠ¡é—´Entityé‡å¤å®šä¹‰
- âœ… **ä¿è¯ä¸€è‡´æ€§**: æ‰€æœ‰æœåŠ¡ä½¿ç”¨ç›¸åŒçš„Entityå®šä¹‰
- âœ… **ç®€åŒ–ç»´æŠ¤**: Entityå­—æ®µå˜æ›´åªéœ€ä¿®æ”¹ä¸€å¤„
- âœ… **ç±»å‹å®‰å…¨**: ç»Ÿä¸€çš„Entityç±»å‹å®šä¹‰

#### 5.4.2 Entityæ¨¡å—æ¶æ„

```
microservices-common-entity/
â””â”€â”€ src/main/java/net/lab1024/sa/common/entity/
    â”œâ”€â”€ auth/                              # è®¤è¯æˆæƒEntity
    â”œâ”€â”€ consume/                           # æ¶ˆè´¹ç®¡ç†Entity â­ v4.0.0ç»Ÿä¸€
    â”‚   â”œâ”€â”€ ConsumeAccountEntity.java         # æ¶ˆè´¹è´¦æˆ·
    â”‚   â”œâ”€â”€ ConsumeAccountKindEntity.java     # è´¦æˆ·ç±»åˆ« â­ æ–°å¢
    â”‚   â”œâ”€â”€ ConsumeSubsidyTypeEntity.java     # è¡¥è´´ç±»å‹ â­ æ–°å¢
    â”‚   â”œâ”€â”€ ConsumeSubsidyAccountEntity.java # è¡¥è´´è´¦æˆ· â­ æ–°å¢
    â”‚   â”œâ”€â”€ ConsumeTransactionEntity.java     # æ¶ˆè´¹äº¤æ˜“
    â”‚   â””â”€â”€ ConsumeDeviceEntity.java          # æ¶ˆè´¹è®¾å¤‡
    â”œâ”€â”€ access/                            # é—¨ç¦ç®¡ç†Entity
    â”œâ”€â”€ attendance/                        # è€ƒå‹¤ç®¡ç†Entity
    â”œâ”€â”€ video/                             # è§†é¢‘ç›‘æ§Entity
    â”œâ”€â”€ visitor/                           # è®¿å®¢ç®¡ç†Entity
    â””â”€â”€ organization/                      # ç»„ç»‡æ¶æ„Entity
        â”œâ”€â”€ UserEntity.java
        â”œâ”€â”€ DepartmentEntity.java
        â”œâ”€â”€ AreaEntity.java
        â””â”€â”€ DeviceEntity.java
```

**Entityè®¾è®¡è§„èŒƒ**:

| è®¾è®¡åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| **å•ä¸€èŒè´£** | ä¸€ä¸ªEntityå¯¹åº”ä¸€ä¸ªæ ¸å¿ƒä¸šåŠ¡æ¦‚å¿µ | ConsumeAccountEntityåªåŒ…å«è´¦æˆ·å­—æ®µ |
| **ç»Ÿä¸€å‘½å** | æ‰€æœ‰Entityä»¥Entityç»“å°¾ | ConsumeAccountEntity |
| **ç»§æ‰¿BaseEntity** | ç»Ÿä¸€å®¡è®¡å­—æ®µ | createTime, updateTime, deletedFlag |
| **Lombokæ³¨è§£** | ç®€åŒ–ä»£ç  | @Data, @Builder, @NoArgsConstructor |
| **å­—æ®µæ˜ å°„** | ç»Ÿä¸€ä½¿ç”¨é©¼å³°å‘½å | userId, accountId |

#### 5.4.3 ä¸šåŠ¡æœåŠ¡ä¾èµ–æ¨¡å¼

**ç»†ç²’åº¦æ¨¡å—ä¾èµ–**:

```xml
<!-- ä¸šåŠ¡æœåŠ¡åªä¾èµ–éœ€è¦çš„Entity -->
<dependency>
    <groupId>net.lab1024.sa</groupId>
    <artifactId>microservices-common-entity</artifactId>
</dependency>
```

**ç¦æ­¢äº‹é¡¹**:

- âŒ ä¸šåŠ¡æœåŠ¡å†…éƒ¨é‡å¤å®šä¹‰Entity
- âŒ ç›´æ¥å¤åˆ¶Entityåˆ°æœåŠ¡å†…éƒ¨
- âŒ ä¿®æ”¹ç»Ÿä¸€Entityçš„å­—æ®µç±»å‹

**æ­£ç¡®ç¤ºä¾‹**:

```java
// âœ… æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨ç»Ÿä¸€Entity
import net.lab1024.sa.common.entity.consume.ConsumeAccountEntity;

@Service
public class ConsumeAccountServiceImpl implements ConsumeAccountService {
    @Resource
    private ConsumeAccountDao consumeAccountDao;

    public ConsumeAccountEntity getById(Long accountId) {
        return consumeAccountDao.selectById(accountId);
    }
}

// âŒ é”™è¯¯ï¼šåœ¨æœåŠ¡å†…éƒ¨é‡å¤å®šä¹‰Entity
package net.lab1024.sa.consume.entity;
@Data
@TableName("t_consume_account")
public class ConsumeAccountEntity { ... }  // ç¦æ­¢ï¼
```

#### 5.4.4 å­—æ®µå‘½åæ ‡å‡†åŒ–

**v4.0.0é‡å¤§å˜æ›´**: ç»Ÿä¸€å­—æ®µå‘½åè§„èŒƒ

| Entityç±» | ä¸»é”®å­—æ®µ | è¯´æ˜ |
|----------|---------|------|
| ConsumeAccountEntity | `accountId` | è´¦æˆ·ID |
| ConsumeAccountKindEntity | `kindId` | è´¦æˆ·ç±»åˆ«ID â­ æ–°å‘½å |
| ConsumeSubsidyTypeEntity | `subsidyTypeId` | è¡¥è´´ç±»å‹ID â­ æ–°å‘½å |
| ConsumeSubsidyAccountEntity | `subsidyAccountId` | è¡¥è´´è´¦æˆ·ID â­ æ–°å‘½å |
| ConsumeTransactionEntity | `transactionId` | äº¤æ˜“ID â­ æ–°å‘½å |

**å­—æ®µå‘½åè§„èŒƒ**:

```java
// âœ… æ­£ç¡®çš„å‘½åæ¨¡å¼
@TableId(type = IdType.ASSIGN_ID)
private Long accountId;           // è¡¨å_ä¸»é”®

// âŒ é”™è¯¯çš„å‘½åæ¨¡å¼
private Long id;                   // ä¸æ˜ç¡®
private Long consumeAccountId;    // å†—ä½™å‰ç¼€
```

#### 5.4.5 DAOæ¨¡å—å¯¹åº”å…³ç³»

**DAOåœ¨å„ä¸šåŠ¡æœåŠ¡ä¸­å®ç°**:

```
ioedream-consume-service/
â””â”€â”€ src/main/java/net/lab1024/sa/consume/dao/
    â”œâ”€â”€ ConsumeAccountDao.java              # å¯¹åº”ConsumeAccountEntity
    â”œâ”€â”€ ConsumeAccountKindDao.java          # å¯¹åº”ConsumeAccountKindEntity â­ æ–°å¢
    â”œâ”€â”€ ConsumeSubsidyTypeDao.java          # å¯¹åº”ConsumeSubsidyTypeEntity â­ æ–°å¢
    â”œâ”€â”€ ConsumeSubsidyAccountDao.java       # å¯¹åº”ConsumeSubsidyAccountEntity â­ æ–°å¢
    â”œâ”€â”€ ConsumeTransactionDao.java          # å¯¹åº”ConsumeTransactionEntity
    â””â”€â”€ ConsumeDeviceDao.java               # å¯¹åº”ConsumeDeviceEntity
```

**DAOå‘½åè§„èŒƒ**:

```java
// âœ… æ­£ç¡®çš„DAOå®šä¹‰
@Mapper
public interface ConsumeAccountDao extends BaseMapper<ConsumeAccountEntity> {
    // MyBatis-Plusè‡ªåŠ¨ç”ŸæˆCRUDæ–¹æ³•
    // è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•ä½¿ç”¨LambdaQueryWrapper
}

// âŒ é”™è¯¯ï¼šä½¿ç”¨@Repositoryæ³¨è§£
@Repository  // ç¦æ­¢ï¼ä½¿ç”¨@Mapper
public interface ConsumeAccountDao { ... }
```

#### 5.4.6 ç‰ˆæœ¬å†å²ä¸è¿ç§»

**é‡å¤§ç‰ˆæœ¬**:

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | è¿ç§»è„šæœ¬ |
|------|------|---------|---------|
| v3.0.0 | 2025-12-26 | Entityç»Ÿä¸€ç®¡ç† | `V3.0.0__MIGATE_FROM_POSID.sql` |
| v2.0.0 | 2025-12-17 | ä¸šåŠ¡æ¨¡å—å®Œå–„ | - |
| v1.0.0 | 2025-12-01 | åˆå§‹ç‰ˆæœ¬ | - |

**v3.0.0å˜æ›´å†…å®¹**:

1. âœ… æ‰€æœ‰Entityç§»è‡³`microservices-common-entity`æ¨¡å—
2. âœ… è¡¨åæ ‡å‡†åŒ–ï¼šPOSID_* â†’ t_consume_*
3. âœ… å­—æ®µå‘½åç»Ÿä¸€ï¼šid â†’ å…·ä½“ä¸»é”®å
4. âœ… æ–°å¢3ä¸ªEntityï¼šConsumeAccountKind, ConsumeSubsidyType, ConsumeSubsidyAccount
5. âœ… å¤šè¡¥è´´è´¦æˆ·æ¨¡å‹æ”¯æŒ

---

## 6. æ•°æ®æ¶æ„è®¾è®¡

### 6.1 æ•°æ®åº“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MySQL æ•°æ®åº“æ¶æ„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ioedream_common â”‚  â”‚ ioedream_access â”‚  â”‚ioedream_attend â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  t_common_user  â”‚  â”‚  t_access_recordâ”‚  â”‚t_attend_record â”‚ â”‚
â”‚  â”‚  t_common_dept  â”‚  â”‚  t_access_deviceâ”‚  â”‚t_attend_shift  â”‚ â”‚
â”‚  â”‚  t_common_area  â”‚  â”‚  t_access_perm  â”‚  â”‚t_attend_rule   â”‚ â”‚
â”‚  â”‚  t_common_deviceâ”‚  â”‚                 â”‚  â”‚                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ioedream_consume â”‚  â”‚ioedream_visitor â”‚  â”‚ ioedream_video â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  t_consume_acct â”‚  â”‚  t_visitor_info â”‚  â”‚ t_video_device â”‚ â”‚
â”‚  â”‚  t_consume_rec  â”‚  â”‚  t_visitor_appt â”‚  â”‚ t_video_record â”‚ â”‚
â”‚  â”‚  t_consume_pay  â”‚  â”‚  t_visitor_reg  â”‚  â”‚ t_video_alarm  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ç¼“å­˜æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤šçº§ç¼“å­˜æ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚   L1 ç¼“å­˜   â”‚  Caffeine æœ¬åœ°ç¼“å­˜                           â”‚
â”‚    â”‚  (æ¯«ç§’çº§)   â”‚  TTL: 5åˆ†é’Ÿï¼Œå®¹é‡: 10000                     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚ æœªå‘½ä¸­                                              â”‚
â”‚           â–¼                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚   L2 ç¼“å­˜   â”‚  Redis åˆ†å¸ƒå¼ç¼“å­˜                            â”‚
â”‚    â”‚  (æ¯«ç§’çº§)   â”‚  TTL: 30åˆ†é’Ÿï¼Œé›†ç¾¤æ¨¡å¼                       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚ æœªå‘½ä¸­                                              â”‚
â”‚           â–¼                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚   æ•°æ®åº“    â”‚  MySQL 8.0                                   â”‚
â”‚    â”‚            â”‚  ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»                            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 æ¶ˆæ¯é˜Ÿåˆ—æ¶æ„

```mermaid
graph LR
    subgraph Producer["ç”Ÿäº§è€…"]
        P1[é—¨ç¦æœåŠ¡]
        P2[è€ƒå‹¤æœåŠ¡]
        P3[æ¶ˆè´¹æœåŠ¡]
    end
    
    subgraph RabbitMQ["RabbitMQ"]
        E1[access.exchange]
        E2[attendance.exchange]
        E3[notification.exchange]
        
        Q1[access.record.queue]
        Q2[attendance.record.queue]
        Q3[notification.queue]
    end
    
    subgraph Consumer["æ¶ˆè´¹è€…"]
        C1[è®°å½•å¤„ç†æœåŠ¡]
        C2[ç»Ÿè®¡åˆ†ææœåŠ¡]
        C3[é€šçŸ¥æ¨é€æœåŠ¡]
    end
    
    P1 --> E1 --> Q1 --> C1
    P2 --> E2 --> Q2 --> C2
    P3 --> E3 --> Q3 --> C3
```

---

## 7. éƒ¨ç½²æ¶æ„è®¾è®¡

### 7.1 Kuberneteséƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Kubernetes é›†ç¾¤éƒ¨ç½²æ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        Ingress Controller                     â”‚   â”‚
â”‚  â”‚                     (Nginx Ingress / Traefik)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                      â”‚
â”‚                              â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Service (ClusterIP)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚                         â”‚                         â”‚           â”‚
â”‚    â–¼                         â–¼                         â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Namespace   â”‚  â”‚   Namespace   â”‚  â”‚   Namespace   â”‚          â”‚
â”‚  â”‚   ioedream    â”‚  â”‚   middleware  â”‚  â”‚   monitoring  â”‚          â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚          â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚          â”‚
â”‚  â”‚ â”‚Deployment â”‚â”‚  â”‚ â”‚StatefulSetâ”‚â”‚  â”‚ â”‚Deployment â”‚â”‚          â”‚
â”‚  â”‚ â”‚ gateway   â”‚â”‚  â”‚ â”‚  mysql    â”‚â”‚  â”‚ â”‚prometheus â”‚â”‚          â”‚
â”‚  â”‚ â”‚ common    â”‚â”‚  â”‚ â”‚  redis    â”‚â”‚  â”‚ â”‚ grafana   â”‚â”‚          â”‚
â”‚  â”‚ â”‚ access    â”‚â”‚  â”‚ â”‚  rabbitmq â”‚â”‚  â”‚ â”‚  zipkin   â”‚â”‚          â”‚
â”‚  â”‚ â”‚ ...       â”‚â”‚  â”‚ â”‚  nacos    â”‚â”‚  â”‚ â”‚           â”‚â”‚          â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    PersistentVolume (NFS/Ceph)               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 æœåŠ¡å‰¯æœ¬é…ç½®

| æœåŠ¡ | æœ€å°å‰¯æœ¬ | æœ€å¤§å‰¯æœ¬ | CPUè¯·æ±‚ | å†…å­˜è¯·æ±‚ |
|------|---------|---------|---------|---------|
| gateway-service | 2 | 10 | 500m | 512Mi |
| common-service | 2 | 8 | 500m | 1Gi |
| access-service | 2 | 8 | 500m | 1Gi |
| attendance-service | 2 | 6 | 500m | 1Gi |
| consume-service | 2 | 8 | 500m | 1Gi |
| visitor-service | 2 | 4 | 500m | 512Mi |
| video-service | 2 | 6 | 1000m | 2Gi |

### 7.3 é«˜å¯ç”¨è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       é«˜å¯ç”¨æ¶æ„è®¾è®¡                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ã€è´Ÿè½½å‡è¡¡ã€‘                                                    â”‚
â”‚    â€¢ å…¥å£å±‚: Nginx/SLB å¤šå¯ç”¨åŒºéƒ¨ç½²                             â”‚
â”‚    â€¢ æœåŠ¡å±‚: Spring Cloud LoadBalancer                          â”‚
â”‚    â€¢ æ•°æ®å±‚: MySQLä¸»ä» + Redis Cluster                          â”‚
â”‚                                                                 â”‚
â”‚  ã€å®¹é”™æœºåˆ¶ã€‘                                                    â”‚
â”‚    â€¢ ç†”æ–­: Resilience4j CircuitBreaker                          â”‚
â”‚    â€¢ é™æµ: Gateway RateLimiter                                  â”‚
â”‚    â€¢ é™çº§: æœåŠ¡é™çº§ + å…œåº•æ•°æ®                                  â”‚
â”‚    â€¢ é‡è¯•: æ™ºèƒ½é‡è¯• + æŒ‡æ•°é€€é¿                                  â”‚
â”‚                                                                 â”‚
â”‚  ã€æ•°æ®ä¸€è‡´æ€§ã€‘                                                  â”‚
â”‚    â€¢ åˆ†å¸ƒå¼äº‹åŠ¡: Seata ATæ¨¡å¼                                   â”‚
â”‚    â€¢ æ¶ˆæ¯æœ€ç»ˆä¸€è‡´: RabbitMQ + è¡¥å¿æœºåˆ¶                          â”‚
â”‚    â€¢ ç¼“å­˜ä¸€è‡´æ€§: å»¶è¿ŸåŒåˆ  + æ¶ˆæ¯é€šçŸ¥                            â”‚
â”‚                                                                 â”‚
â”‚  ã€ç›‘æ§å‘Šè­¦ã€‘                                                    â”‚
â”‚    â€¢ æŒ‡æ ‡é‡‡é›†: Prometheus + Micrometer                          â”‚
â”‚    â€¢ é“¾è·¯è¿½è¸ª: Zipkin + Brave                                   â”‚
â”‚    â€¢ æ—¥å¿—èšåˆ: ELK Stack                                        â”‚
â”‚    â€¢ å‘Šè­¦é€šçŸ¥: AlertManager                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. å®‰å…¨æ¶æ„è®¾è®¡

### 8.1 å®‰å…¨é˜²æŠ¤ä½“ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å®‰å…¨é˜²æŠ¤ä½“ç³»æ¶æ„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç½‘ç»œå®‰å…¨å±‚                             â”‚   â”‚
â”‚  â”‚  â€¢ WAFé˜²æŠ¤  â€¢ DDoSé˜²æŠ¤  â€¢ SSL/TLSåŠ å¯†  â€¢ VPCéš”ç¦»        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ¥å…¥å®‰å…¨å±‚                             â”‚   â”‚
â”‚  â”‚  â€¢ APIé™æµ  â€¢ èº«ä»½è®¤è¯  â€¢ æƒé™æ ¡éªŒ  â€¢ æ—¥å¿—å®¡è®¡          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    åº”ç”¨å®‰å…¨å±‚                             â”‚   â”‚
â”‚  â”‚  â€¢ å‚æ•°æ ¡éªŒ  â€¢ SQLé˜²æ³¨å…¥  â€¢ XSSé˜²æŠ¤  â€¢ CSRFé˜²æŠ¤         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ•°æ®å®‰å…¨å±‚                             â”‚   â”‚
â”‚  â”‚  â€¢ æ•°æ®åŠ å¯†  â€¢ å­—æ®µè„±æ•  â€¢ è®¿é—®æ§åˆ¶  â€¢ å¤‡ä»½æ¢å¤         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 è®¤è¯æˆæƒæµç¨‹

```mermaid
sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant Gateway as APIç½‘å…³
    participant Auth as è®¤è¯æœåŠ¡
    participant Service as ä¸šåŠ¡æœåŠ¡
    participant Redis as Redis
    
    Client->>Gateway: 1. ç™»å½•è¯·æ±‚
    Gateway->>Auth: 2. è½¬å‘è®¤è¯
    Auth->>Auth: 3. éªŒè¯å‡­è¯
    Auth->>Redis: 4. å­˜å‚¨Token
    Auth-->>Gateway: 5. è¿”å›JWT
    Gateway-->>Client: 6. ç™»å½•æˆåŠŸ
    
    Client->>Gateway: 7. ä¸šåŠ¡è¯·æ±‚(æºå¸¦JWT)
    Gateway->>Redis: 8. éªŒè¯Token
    Redis-->>Gateway: 9. Tokenæœ‰æ•ˆ
    Gateway->>Service: 10. è½¬å‘è¯·æ±‚
    Service-->>Gateway: 11. ä¸šåŠ¡å“åº”
    Gateway-->>Client: 12. è¿”å›ç»“æœ
```

---

## 9. æ€§èƒ½è®¾è®¡

### 9.1 æ€§èƒ½æŒ‡æ ‡è¦æ±‚

| æŒ‡æ ‡ç±»å‹ | æŒ‡æ ‡é¡¹ | ç›®æ ‡å€¼ |
|---------|--------|--------|
| **å“åº”æ—¶é—´** | APIå¹³å‡å“åº” | < 200ms |
| | API P99å“åº” | < 500ms |
| | æ‰“å¡å“åº” | < 300ms |
| **ååé‡** | ç½‘å…³TPS | > 5000 |
| | æ‰“å¡TPS | > 1000 |
| | æ¶ˆè´¹TPS | > 500 |
| **å¯ç”¨æ€§** | ç³»ç»Ÿå¯ç”¨æ€§ | â‰¥ 99.9% |
| | æ•°æ®ä¸€è‡´æ€§ | å¼ºä¸€è‡´ |

### 9.2 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

| å±‚æ¬¡ | ä¼˜åŒ–ç­–ç•¥ |
|------|---------|
| **æ¥å£å±‚** | å¼‚æ­¥å¤„ç†ã€æ‰¹é‡æ¥å£ã€å“åº”å‹ç¼© |
| **æœåŠ¡å±‚** | å¹¶è¡Œè°ƒç”¨ã€ç¼“å­˜é¢„çƒ­ã€æ‡’åŠ è½½ |
| **æ•°æ®å±‚** | ç´¢å¼•ä¼˜åŒ–ã€SQLä¼˜åŒ–ã€åˆ†åº“åˆ†è¡¨ |
| **ç¼“å­˜å±‚** | å¤šçº§ç¼“å­˜ã€çƒ­ç‚¹æ•°æ®é¢„åŠ è½½ |
| **ç½‘ç»œå±‚** | è¿æ¥æ± å¤ç”¨ã€é•¿è¿æ¥ã€CDNåŠ é€Ÿ |

---

## 10. èµ„æºä¼˜åŒ–æ¶æ„è®¾è®¡

### 10.1 ç»Ÿä¸€çº¿ç¨‹æ± æ¶æ„

**è®¾è®¡åŸåˆ™**: å°†åˆ†æ•£çš„7+ä¸ªçº¿ç¨‹æ± æ•´åˆä¸º3ä¸ªç»Ÿä¸€çº¿ç¨‹æ± ï¼Œé™ä½èµ„æºæ¶ˆè€—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç»Ÿä¸€çº¿ç¨‹æ± æ¶æ„è®¾è®¡                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    coreExecutor (æ ¸å¿ƒä¸šåŠ¡æ± )             â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æ ¸å¿ƒçº¿ç¨‹: CPU + 1                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æœ€å¤§çº¿ç¨‹: CPU Ã— 2                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ é˜Ÿåˆ—å®¹é‡: 500                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ é€‚ç”¨åœºæ™¯: APIè¯·æ±‚ã€ä¸šåŠ¡è®¡ç®—ã€æ•°æ®å¤„ç†              â”‚   â”‚
â”‚  â”‚  â””â”€â”€ æ‹’ç»ç­–ç•¥: CallerRunsPolicy                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ioExecutor (IOå¯†é›†å‹æ± )               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æ ¸å¿ƒçº¿ç¨‹: CPU Ã— 2                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æœ€å¤§çº¿ç¨‹: CPU Ã— 4                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ é˜Ÿåˆ—å®¹é‡: 1000                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ é€‚ç”¨åœºæ™¯: æ•°æ®åº“æŸ¥è¯¢ã€å¤–éƒ¨APIã€æ–‡ä»¶IOã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½  â”‚   â”‚
â”‚  â”‚  â””â”€â”€ æ‹’ç»ç­–ç•¥: CallerRunsPolicy                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    scheduledExecutor (å®šæ—¶ä»»åŠ¡æ± )        â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æ ¸å¿ƒçº¿ç¨‹: 5                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æœ€å¤§çº¿ç¨‹: 20                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ é˜Ÿåˆ—å®¹é‡: 100                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ é€‚ç”¨åœºæ™¯: å®šæ—¶ä»»åŠ¡ã€è°ƒåº¦ä»»åŠ¡                       â”‚   â”‚
â”‚  â”‚  â””â”€â”€ æ‹’ç»ç­–ç•¥: CallerRunsPolicy                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  é¢„æœŸæ•ˆæœ: çº¿ç¨‹æ•°ä»~300å‡å°‘åˆ°~80ï¼Œå†…å­˜èŠ‚çœ200-500MB           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 å¤šçº§ç¼“å­˜ä¼˜åŒ–æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¼˜åŒ–åçš„å¤šçº§ç¼“å­˜æ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚                   L1 æœ¬åœ°ç¼“å­˜ (Caffeine)             â”‚     â”‚
â”‚    â”‚  â”œâ”€â”€ æœ€å¤§å®¹é‡: 5000 (ä»10000ä¼˜åŒ–)                   â”‚     â”‚
â”‚    â”‚  â”œâ”€â”€ å†™å…¥è¿‡æœŸ: 5åˆ†é’Ÿ                                â”‚     â”‚
â”‚    â”‚  â”œâ”€â”€ è®¿é—®ç»­æœŸ: 3åˆ†é’Ÿ                                â”‚     â”‚
â”‚    â”‚  â””â”€â”€ å†…å­˜å ç”¨: ~400MB (ä»~800MBä¼˜åŒ–)                â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â”‚ æœªå‘½ä¸­                                â”‚
â”‚                         â–¼                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚                   L2 åˆ†å¸ƒå¼ç¼“å­˜ (Redis)             â”‚     â”‚
â”‚    â”‚  â”œâ”€â”€ é»˜è®¤TTL: 30åˆ†é’Ÿ                                â”‚     â”‚
â”‚    â”‚  â”œâ”€â”€ Keyå‰ç¼€: ioedream:{service}:{domain}          â”‚     â”‚
â”‚    â”‚  â””â”€â”€ å†…å­˜å ç”¨: ~1.2GB (ä»~2GBä¼˜åŒ–)                  â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â”‚ æœªå‘½ä¸­                                â”‚
â”‚                         â–¼                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚                   MySQL æ•°æ®åº“                       â”‚     â”‚
â”‚    â”‚  â””â”€â”€ è¿æ¥æ± : Druid (æŒ‰æœåŠ¡åˆ†çº§é…ç½®)                 â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚  ç¼“å­˜åŸŸé…ç½®:                                                    â”‚
â”‚  â”œâ”€â”€ user: L1=1000, L2-TTL=1h                                  â”‚
â”‚  â”œâ”€â”€ permission: L1=2000, L2-TTL=30m                           â”‚
â”‚  â”œâ”€â”€ device: L1=500, L2-TTL=10m                                â”‚
â”‚  â””â”€â”€ config: L1=500, L2-TTL=24h                                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.3 JVMé…ç½®è§„èŒƒ

| æœåŠ¡çº§åˆ« | æœåŠ¡åˆ—è¡¨ | Xms | Xmx | Metaspace | GCç­–ç•¥ |
|---------|---------|-----|-----|-----------|--------|
| åŸºç¡€æœåŠ¡ | gateway, device-comm, visitor | 256m | 512m | 128m | G1 |
| æ ¸å¿ƒæœåŠ¡ | common, access, attendance, consume | 512m | 1g | 192m | G1 |
| é‡å‹æœåŠ¡ | video, oa | 1g | 2g | 256m | G1 |

**ç»Ÿä¸€JVMå‚æ•°æ¨¡æ¿**:

```bash
# åŸºç¡€æœåŠ¡é…ç½®
-Xms256m -Xmx512m -XX:MaxMetaspaceSize=128m
-XX:+UseG1GC -XX:MaxGCPauseMillis=150
-XX:+UseStringDeduplication -XX:+HeapDumpOnOutOfMemoryError

# æ ¸å¿ƒæœåŠ¡é…ç½®
-Xms512m -Xmx1g -XX:MaxMetaspaceSize=192m
-XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:G1HeapRegionSize=8m
-XX:+UseStringDeduplication -XX:+HeapDumpOnOutOfMemoryError

# é‡å‹æœåŠ¡é…ç½®
-Xms1g -Xmx2g -XX:MaxMetaspaceSize=256m
-XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:G1HeapRegionSize=16m
-XX:InitiatingHeapOccupancyPercent=45
-XX:+UseStringDeduplication -XX:+HeapDumpOnOutOfMemoryError
```

### 10.4 æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–é…ç½®

| æœåŠ¡ | max-active | min-idle | è¯´æ˜ |
|------|-----------|----------|------|
| gateway | 10 | 3 | æ— ç›´æ¥DBè®¿é—® |
| common | 30 | 10 | æ ¸å¿ƒæ•°æ®æœåŠ¡ |
| access | 25 | 8 | é«˜é¢‘å†™å…¥ |
| attendance | 25 | 8 | æ‰¹é‡æŸ¥è¯¢ |
| consume | 30 | 10 | äº‹åŠ¡å¯†é›† |
| visitor | 15 | 5 | ä¸­ç­‰è´Ÿè½½ |
| video | 15 | 5 | ä¸»è¦è¯»å– |
| oa | 20 | 5 | å·¥ä½œæµäº‹åŠ¡ |

### 10.5 èµ„æºä¼˜åŒ–é¢„æœŸæ•ˆæœ

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | é™å¹… |
|------|--------|--------|------|
| æ€»å†…å­˜å ç”¨ | 12-16GB | 6-9GB | 40-50% |
| çº¿ç¨‹æ€»æ•° | ~300 | ~80 | 73% |
| æ•°æ®åº“è¿æ¥ | ~200 | ~120 | 40% |
| GCæš‚åœæ—¶é—´ | 200-500ms | 100-200ms | 50% |
| Rediså†…å­˜ | ~2GB | ~1.2GB | 40% |

---

## 11. ç»Ÿä¸€æ–‡ä»¶å­˜å‚¨æ¶æ„è®¾è®¡

### 11.1 é¡¹ç›®å®šä½ä¸ç›®æ ‡

**é¡¹ç›®å®šä½**: ä¸­å°ä¼ä¸šæ™ºæ…§å›­åŒº (5000-10000äºº)  
**æ ¸å¿ƒç›®æ ‡**: ä½å†…å­˜å ç”¨ + é«˜å¯æ‰©å±•æ€§ + ä¼ä¸šçº§é«˜è´¨é‡

> **è¯¦ç»†æ–‡æ¡£**: [ç»Ÿä¸€æ–‡ä»¶å­˜å‚¨æ¶æ„](./FILE_STORAGE_ARCHITECTURE.md)

### 11.2 å­˜å‚¨æ¶æ„å¯¹æ¯”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å­˜å‚¨ç­–ç•¥å¯¹æ¯”                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ–¹æ¡ˆ         å†…å­˜å ç”¨  æˆæœ¬  æ‰©å±•æ€§  é€‚ç”¨åœºæ™¯             çŠ¶æ€      â”‚
â”‚  -------------------------------------------------------------- â”‚
â”‚  æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ  6.35GB   æœ€ä½   å•æœº   ä¸­å°ä¼ä¸š<10000äºº  âœ… é»˜è®¤   â”‚
â”‚  MinIOå¯¹è±¡å­˜å‚¨  15.35GB  ä¸­ç­‰  åˆ†å¸ƒå¼  å¤§å‹ä¼ä¸š>20000äºº  âœ… å¯é€‰   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.3 ä¸šåŠ¡åœºæ™¯å­˜å‚¨éœ€æ±‚

| ä¸šåŠ¡æ¨¡å— | æ—¥å¢é‡ | ä¿ç•™æœŸ | æ€»å­˜å‚¨ | APIç«¯ç‚¹ | çŠ¶æ€ |
|---------|--------|--------|--------|---------|-----|
| é—¨ç¦é€šè¡Œ | 22.7GB | 30å¤© | 693GB | /access/file/* | âœ… |
| è€ƒå‹¤æ‰“å¡ | 12GB | 180å¤© | 2.16TB | /attendance/file/* | âœ… |
| è§†é¢‘ç›‘æ§ | 19.6GB | 30-90å¤© | 678GB | /video/file/* | â³ |
| OAå®¡æ‰¹ | 1GB | 5å¹´ | 1.83TB | /oa/file/* | âœ… |
| äººå‘˜ç®¡ç† | 5MB | æ°¸ä¹… | 25GB | /user/file/* | âœ… |
| æ¶ˆè´¹æ”¯ä»˜ | 1.5GB | 30å¤© | 45GB | /consume/file/* | â³ |
| è®¿å®¢ç™»è®° | 75MB | 365å¤© | 27GB | /visitor/file/* | â³ |
| **æ€»è®¡** | **~60GB/å¤©** | - | **~5.5TB** | - | - |

### 11.4 æ ¸å¿ƒç‰¹æ€§

#### 11.4.1 æ™ºèƒ½è‡ªåŠ¨æ¸…ç† (ä¼ä¸šçº§åˆ›æ–°)

```java
@Scheduled(cron = "${file.storage.local.cleanup.schedule:0 3 * * *}")
public void cleanupExpiredFiles() {
    // å®šæ—¶ä»»åŠ¡: æ¯å¤©å‡Œæ™¨3ç‚¹æ‰§è¡Œ
    // å¤šè§„åˆ™é…ç½®: é—¨ç¦30å¤©,è€ƒå‹¤180å¤©,OA 5å¹´
    // è‡ªåŠ¨èŠ‚çœå­˜å‚¨ç©ºé—´
}
```

**é…ç½®ç¤ºä¾‹**:
```yaml
file:
  storage:
    local:
      cleanup:
        enabled: true
        schedule: "0 3 * * *"
        rules:
          - path: "access/snapshots"
            retention-days: 30
          - path: "attendance/photos"
            retention-days: 180
          - path: "oa/attachments"
            retention-days: 1825  # 5å¹´
```

#### 11.4.2 è®¾å¤‡ç›´ä¼ æ”¯æŒ (å‡è½»æœåŠ¡å™¨å‹åŠ›)

```java
/**
 * è·å–é¢„ç­¾åä¸Šä¼ URL (è®¾å¤‡ç›´ä¼ )
 */
@GetMapping("/presigned-url")
public ResponseDTO<Map<String, String>> getPresignedUrl(
        @RequestParam("fileName") String fileName,
        @RequestParam(value = "type", defaultValue = "snapshot") String type) {
    String folder = "snapshot".equals(type) ? "access/snapshots" : "access/alerts";
    Map<String, String> result = fileStorageStrategy.getPresignedUploadUrl(
        folder, fileName, 3600); // 1å°æ—¶æœ‰æ•ˆæœŸ
    return ResponseDTO.ok(result);
}
```

**æŠ€æœ¯ä¼˜åŠ¿**:
- âœ… èŠ‚çœå¸¦å®½: 50%+
- âœ… æ”¯æŒå¹¶å‘: 10000+è®¾å¤‡
- âœ… å‡è½»æœåŠ¡å™¨è´Ÿè½½

#### 11.4.3 ç­–ç•¥æ¨¡å¼ (é›¶ä»£ç åˆ‡æ¢)

```java
@ConditionalOnProperty(prefix = "file.storage", name = "type", 
                       havingValue = "local", matchIfMissing = true)
public class LocalFileStorageImpl implements FileStorageStrategy {
    // é»˜è®¤å®ç°
}

@ConditionalOnProperty(prefix = "file.storage", name = "type", 
                       havingValue = "minio")
public class MinIOStorageImpl implements FileStorageStrategy {
    // MinIOå®ç°
}
```

**åˆ‡æ¢æ–¹å¼**:
```yaml
# ä¸­å°ä¼ä¸šé»˜è®¤é…ç½® (6.35GBå†…å­˜)
file:
  storage:
    type: local  # é»˜è®¤æœ¬åœ°å­˜å‚¨

# å¤§å‹ä¼ä¸šå‡çº§é…ç½® (15.35GBå†…å­˜)
file:
  storage:
    type: minio  # ä¸€è¡Œé…ç½®åˆ‡æ¢
    minio:
      endpoint: http://minio-cluster:9000
      bucket-name: ioedream-prod
```

### 11.5 ä»£ç å®ç°ä½ç½®

| ç»„ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| **æ ¸å¿ƒç»„ä»¶** | `microservices-common-storage/` | ç»Ÿä¸€æ–‡ä»¶å­˜å‚¨ç»„ä»¶ |
| LocalFileStorageImpl | `impl/LocalFileStorageImpl.java` | æœ¬åœ°å­˜å‚¨å®ç° (228è¡Œ) |
| MinIOStorageImpl | `impl/MinIOStorageImpl.java` | MinIOå­˜å‚¨å®ç° (253è¡Œ) |
| FileCleanupProperties | `config/FileCleanupProperties.java` | è‡ªåŠ¨æ¸…ç†é…ç½® (50è¡Œ) |
| **ä¸šåŠ¡é›†æˆ** | å„æœåŠ¡`controller/` | æ–‡ä»¶ä¸Šä¼ API |
| AccessFileController | `ioedream-access-service` | é—¨ç¦æ–‡ä»¶ç®¡ç† (107è¡Œ) |
| AttendanceFileController | `ioedream-attendance-service` | è€ƒå‹¤æ–‡ä»¶ç®¡ç† (71è¡Œ) |
| OAFileController | `ioedream-oa-service` | OAæ–‡ä»¶ç®¡ç† (91è¡Œ) |
| UserFileController | `ioedream-common-service` | äººå‘˜æ–‡ä»¶ç®¡ç† (91è¡Œ) |

---

## 12. æ¶æ„ä¼˜åŒ–å»ºè®®

### 12.1 åŸºäºæœ€ä½³å®è·µçš„ä¼˜åŒ–å»ºè®®

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | å»ºè®®æ”¹è¿› | ä¼˜å…ˆçº§ |
|--------|---------|---------|--------|
| **æœåŠ¡å‘ç°** | Nacos | ç»´æŒç°çŠ¶ï¼Œå·²æ˜¯æœ€ä½³é€‰æ‹© | - |
| **é…ç½®ç®¡ç†** | Nacos | å¢åŠ é…ç½®åŠ å¯†å­˜å‚¨ | P1 |
| **APIç½‘å…³** | Spring Cloud Gateway | å¢åŠ å“åº”ç¼“å­˜ | P2 |
| **ç†”æ–­é™æµ** | Resilience4j | å®Œå–„é™çº§ç­–ç•¥ | P1 |
| **åˆ†å¸ƒå¼è¿½è¸ª** | Zipkin | è€ƒè™‘SkyWalkingï¼ˆæ›´å¼ºAPMèƒ½åŠ›ï¼‰ | P2 |
| **æ—¥å¿—èšåˆ** | Logback | å¢åŠ ELKé›†æˆ | P1 |

### 12.2 æ¶æ„æ¼”è¿›è·¯çº¿

```
Phase 1 (å½“å‰)          Phase 2 (3ä¸ªæœˆ)         Phase 3 (6ä¸ªæœˆ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ å¾®æœåŠ¡åŸºç¡€æ¶æ„        â–¡ æœåŠ¡ç½‘æ ¼(Istio)       â–¡ Serverlessç»„ä»¶
âœ“ å››å±‚æ¶æ„è§„èŒƒ          â–¡ å®Œå–„å¯è§‚æµ‹æ€§          â–¡ å¤šç§Ÿæˆ·æ¶æ„
âœ“ Nacosæ³¨å†Œé…ç½®         â–¡ æ··æ²Œå·¥ç¨‹å®è·µ          â–¡ è¾¹ç¼˜è®¡ç®—æ”¯æŒ
âœ“ åˆ†å¸ƒå¼äº‹åŠ¡            â–¡ è‡ªåŠ¨åŒ–è¿ç»´            â–¡ AIæ™ºèƒ½è°ƒåº¦
âœ“ èµ„æºä¼˜åŒ–æ¶æ„          â–¡ è™šæ‹Ÿçº¿ç¨‹æ”¯æŒ          â–¡ åŸç”Ÿé•œåƒ
```

---

## 13. é™„å½•

### 13.1 ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£åç§° | è·¯å¾„ | è¯´æ˜ |
|---------|------|------|
| è¯¦ç»†è®¾è®¡æ–‡æ¡£ | `documentation/architecture/02-è¯¦ç»†è®¾è®¡æ–‡æ¡£.md` | æ¨¡å—è®¾è®¡ã€ç±»å›¾ã€æ—¶åºå›¾ |
| APIæ¥å£æ–‡æ¡£ | `documentation/api/` | æ¥å£è§„èŒƒå®šä¹‰ |
| æ•°æ®åº“è®¾è®¡ | `documentation/database/` | è¡¨ç»“æ„è®¾è®¡ |
| éƒ¨ç½²æ‰‹å†Œ | `documentation/deployment/` | éƒ¨ç½²é…ç½®æŒ‡å— |

### 13.2 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|------|------|---------|--------|
| v1.0.0 | 2025-12-01 | åˆå§‹ç‰ˆæœ¬ | æ¶æ„ç»„ |
| v2.0.0 | 2025-12-17 | å…¨é¢å®Œå–„ï¼Œå¢åŠ æœ€ä½³å®è·µ | æ¶æ„ç»„ |
| v3.0.0 | 2025-12-18 | å¢åŠ ç»Ÿä¸€æ–‡ä»¶å­˜å‚¨æ¶æ„ | æ¶æ„ç»„ |
| **v4.0.0** | **2025-12-26** | **Entityç»Ÿä¸€ç®¡ç†ä¸å¤šè¡¥è´´è´¦æˆ·æ¶æ„** | **æ¶æ„ç»„** |

**v4.0.0æ›´æ–°è¯´æ˜**:
- âœ… æ–°å¢5.4èŠ‚ï¼šEntityç»Ÿä¸€ç®¡ç†è§„èŒƒ
- âœ… è®°å½•Entityæ¨¡å—æ¶æ„ä¸è®¾è®¡è§„èŒƒ
- âœ… æ–‡æ¡£åŒ–å­—æ®µå‘½åæ ‡å‡†åŒ–å˜æ›´
- âœ… è®°å½•DAOæ¨¡å—å¯¹åº”å…³ç³»
- âœ… ç‰ˆæœ¬å†å²ä¸è¿ç§»æŒ‡å—

---

**æ–‡æ¡£ç»´æŠ¤**: IOE-DREAM æ¶æ„å§”å‘˜ä¼š
**æœ€åæ›´æ–°**: 2025-12-26
