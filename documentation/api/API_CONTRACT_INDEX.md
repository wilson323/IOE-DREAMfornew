# APIæ¥å£å¥‘çº¦æ–‡æ¡£ç´¢å¼•

**ç”Ÿæˆæ—¶é—´**: 2025-01-30  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**çŠ¶æ€**: âœ… **å·²å®Œæˆ**

---

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ˜¯IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°æ‰€æœ‰ä¸šåŠ¡æ¨¡å—APIæ¥å£å¥‘çº¦æ–‡æ¡£çš„ç´¢å¼•ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜å¿«é€ŸæŸ¥æ‰¾å’Œä½¿ç”¨ã€‚

---

## ğŸ“š ä¸€ã€æ–‡æ¡£ç›®å½•

### 1.1 æ¶ˆè´¹æ¨¡å—

**æ–‡æ¡£è·¯å¾„**: `documentation/api/consume/consume-api-contract.md`

**æ¨¡å—**: æ¶ˆè´¹ç®¡ç†æ¨¡å— (ioedream-consume-service)

**åŒ…å«å†…å®¹**:
- âœ… ç§»åŠ¨ç«¯APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âš ï¸ PCç«¯APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âœ… æ”¯ä»˜ç›¸å…³APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âœ… å¯¹è´¦ç›¸å…³APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… é€€æ¬¾/æŠ¥é”€ç”³è¯·APIæ¥å£ï¼ˆå·²å®ç°ï¼‰

**APIåŸºç¡€è·¯å¾„**: `/api/v1/consume`

---

### 1.2 é—¨ç¦æ¨¡å—

**æ–‡æ¡£è·¯å¾„**: `documentation/api/access/access-api-contract.md`

**æ¨¡å—**: é—¨ç¦ç®¡ç†æ¨¡å— (ioedream-access-service)

**åŒ…å«å†…å®¹**:
- âœ… ç§»åŠ¨ç«¯APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âš ï¸ PCç«¯APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âœ… æƒé™ç”³è¯·APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… ç´§æ€¥æƒé™APIæ¥å£ï¼ˆå·²å®ç°ï¼‰

**APIåŸºç¡€è·¯å¾„**: `/api/v1/access` æˆ– `/api/v1/mobile/access`

---

### 1.3 è€ƒå‹¤æ¨¡å—

**æ–‡æ¡£è·¯å¾„**: `documentation/api/attendance/attendance-api-contract.md`

**æ¨¡å—**: è€ƒå‹¤ç®¡ç†æ¨¡å— (ioedream-attendance-service)

**åŒ…å«å†…å®¹**:
- âœ… ç§»åŠ¨ç«¯APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âš ï¸ PCç«¯APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âœ… è¯·å‡ç®¡ç†APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… åŠ ç­ç®¡ç†APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… å‡ºå·®ç®¡ç†APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… è¡¥å¡ç®¡ç†APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… ç­æ¬¡ç®¡ç†APIæ¥å£ï¼ˆå·²å®ç°ï¼‰

**APIåŸºç¡€è·¯å¾„**: `/api/attendance` æˆ– `/api/attendance/mobile`

---

### 1.4 è®¿å®¢æ¨¡å—

**æ–‡æ¡£è·¯å¾„**: `documentation/api/visitor/visitor-api-contract.md`

**æ¨¡å—**: è®¿å®¢ç®¡ç†æ¨¡å— (ioedream-visitor-service)

**åŒ…å«å†…å®¹**:
- âœ… ç§»åŠ¨ç«¯APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âš ï¸ PCç«¯APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âœ… é¢„çº¦ç®¡ç†APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… ç­¾åˆ°ç­¾é€€APIæ¥å£ï¼ˆå·²å®ç°ï¼‰
- âœ… è®¿å®¢æŸ¥è¯¢APIæ¥å£ï¼ˆå·²å®ç°ï¼‰

**APIåŸºç¡€è·¯å¾„**: `/api/v1/visitor` æˆ– `/api/v1/mobile/visitor`

---

### 1.5 è§†é¢‘æ¨¡å—

**æ–‡æ¡£è·¯å¾„**: `documentation/api/video/video-api-contract.md`

**æ¨¡å—**: è§†é¢‘ç›‘æ§æ¨¡å— (ioedream-video-service)

**åŒ…å«å†…å®¹**:
- âš ï¸ ç§»åŠ¨ç«¯APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âš ï¸ PCç«¯APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âš ï¸ è®¾å¤‡ç®¡ç†APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âš ï¸ è§†é¢‘æ’­æ”¾APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âš ï¸ å½•åƒå›æ”¾APIæ¥å£ï¼ˆè§„åˆ’ï¼‰
- âš ï¸ AIåˆ†æAPIæ¥å£ï¼ˆè§„åˆ’ï¼‰

**APIåŸºç¡€è·¯å¾„**: `/api/v1/video` æˆ– `/api/v1/mobile/video`

> âš ï¸ **æ³¨æ„**: è§†é¢‘æ¨¡å—Controllerå¾…åˆ›å»º

---

### 1.6 å…¨å±€ä»£ç åˆ†ææ¨¡å— ğŸ†•

**æ–‡æ¡£è·¯å¾„**: `documentation/api/global-code-analysis-api.md`

**æ¨¡å—**: å…¨å±€ä»£ç åˆ†æç³»ç»Ÿ (ioedream-code-analyzer)

**åŒ…å«å†…å®¹**:
- âœ… æ¶æ„åˆ†æAPIæ¥å£ï¼ˆå·²è®¾è®¡ï¼‰
- âœ… ç¼–è¯‘é”™è¯¯åˆ†æAPIæ¥å£ï¼ˆå·²è®¾è®¡ï¼‰
- âœ… ä»£ç è´¨é‡æ£€æµ‹APIæ¥å£ï¼ˆå·²è®¾è®¡ï¼‰
- âœ… è‡ªåŠ¨ä¿®å¤APIæ¥å£ï¼ˆå·²è®¾è®¡ï¼‰
- âœ… é…ç½®æ–‡ä»¶è§£æAPIæ¥å£ï¼ˆå·²è®¾è®¡ï¼‰
- âœ… ç›‘æ§æŠ¥å‘ŠAPIæ¥å£ï¼ˆå·²è®¾è®¡ï¼‰

**APIåŸºç¡€è·¯å¾„**: `/api/v1/code-analysis`

**CLIå·¥å…·**: `ioedream-analyzer`

**æŠ€æœ¯ç‰¹ç‚¹**:
- ç³»ç»Ÿæ€§ä»£ç è´¨é‡è¯Šæ–­ä¸ä¿®å¤
- æ”¯æŒæ¶æ„åˆ†æã€ç¼–è¯‘é”™è¯¯ä¿®å¤ã€ä»£ç è´¨é‡æ£€æµ‹ç­‰8å¤§æ ¸å¿ƒåŠŸèƒ½
- æä¾›RESTful APIæ¥å£ï¼Œæ”¯æŒJWT Bearer Tokenè®¤è¯
- é›†æˆGité’©å­å’ŒCI/CDæµæ°´çº¿
- ç‹¬ç«‹CLIå·¥å…·ï¼Œæ”¯æŒæœ¬åœ°å’ŒCI/CDç¯å¢ƒä½¿ç”¨
- åŸºäº15ä¸ªæ ¸å¿ƒæ­£ç¡®æ€§å±æ€§çš„å±æ€§æµ‹è¯•éªŒè¯

**å®‰è£…ä½¿ç”¨**:
```bash
# å®‰è£…
pip install ioedream-code-analyzer

# åŸºæœ¬ä½¿ç”¨
ioedream-analyzer analyze /path/to/IOE-DREAM
ioedream-analyzer fix /path/to/IOE-DREAM --auto-backup
ioedream-analyzer report /path/to/IOE-DREAM --format html
```

**é¡¹ç›®ç»“æ„**:
```
ioedream-code-analyzer/
â”œâ”€â”€ src/ioedream_analyzer/
â”‚   â”œâ”€â”€ cli/                 # å‘½ä»¤è¡Œç•Œé¢
â”‚   â”œâ”€â”€ analysis/            # åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ fix/                 # ä¿®å¤æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ common/              # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ reporting/           # æŠ¥å‘Šç”Ÿæˆ
â”‚   â””â”€â”€ monitoring/          # ç›‘æ§ç»„ä»¶
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/         # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ property/            # å±æ€§æµ‹è¯•
â”‚   â””â”€â”€ performance/         # æ€§èƒ½æµ‹è¯•
â””â”€â”€ README.md                # è¯¦ç»†ä½¿ç”¨æŒ‡å—
```

---

## ğŸ“Š äºŒã€APIæ¥å£ç»Ÿè®¡

### 2.1 æŒ‰æ¨¡å—ç»Ÿè®¡

| æ¨¡å— | ç§»åŠ¨ç«¯æ¥å£ | PCç«¯æ¥å£ | çŠ¶æ€ |
|------|-----------|---------|------|
| **æ¶ˆè´¹æ¨¡å—** | 15+ | 20+ | âœ… ç§»åŠ¨ç«¯å®Œæˆï¼ŒPCç«¯è§„åˆ’ |
| **é—¨ç¦æ¨¡å—** | 10+ | 15+ | âœ… ç§»åŠ¨ç«¯å®Œæˆï¼ŒPCç«¯è§„åˆ’ |
| **è€ƒå‹¤æ¨¡å—** | 8+ | 20+ | âœ… ç§»åŠ¨ç«¯å®Œæˆï¼ŒPCç«¯è§„åˆ’ |
| **è®¿å®¢æ¨¡å—** | 8+ | 15+ | âœ… ç§»åŠ¨ç«¯å®Œæˆï¼ŒPCç«¯è§„åˆ’ |
| **è§†é¢‘æ¨¡å—** | 15+ | 20+ | âš ï¸ å…¨éƒ¨è§„åˆ’ä¸­ |
| **æ€»è®¡** | **56+** | **90+** | **146+** |

### 2.2 æŒ‰çŠ¶æ€ç»Ÿè®¡

| çŠ¶æ€ | æ•°é‡ | å æ¯” |
|------|------|------|
| âœ… å·²å®ç° | 41+ | 28% |
| âš ï¸ è§„åˆ’ä¸­ | 105+ | 72% |
| **æ€»è®¡** | **146+** | **100%** |

---

## ğŸ” ä¸‰ã€å¿«é€ŸæŸ¥æ‰¾

### 3.1 æŒ‰åŠŸèƒ½æŸ¥æ‰¾

#### ç§»åŠ¨ç«¯æ¥å£
- **æ¶ˆè´¹äº¤æ˜“**: `consume-api-contract.md` â†’ 1.1 æ¶ˆè´¹äº¤æ˜“æ¥å£
- **é—¨ç¦æ£€æŸ¥**: `access-api-contract.md` â†’ 1.1 é—¨ç¦æ£€æŸ¥æ¥å£
- **GPSæ‰“å¡**: `attendance-api-contract.md` â†’ 1.1 GPSå®šä½æ‰“å¡æ¥å£
- **è®¿å®¢é¢„çº¦**: `visitor-api-contract.md` â†’ 1.1 é¢„çº¦ç®¡ç†æ¥å£
- **è§†é¢‘æ’­æ”¾**: `video-api-contract.md` â†’ 1.2 è§†é¢‘æ’­æ”¾æ¥å£

#### PCç«¯æ¥å£
- **æ¶ˆè´¹ç®¡ç†**: `consume-api-contract.md` â†’ 2.1 æ¶ˆè´¹ç®¡ç†æ¥å£
- **é—¨ç¦ç®¡ç†**: `access-api-contract.md` â†’ 2.1 é—¨ç¦ç®¡ç†æ¥å£
- **è€ƒå‹¤ç®¡ç†**: `attendance-api-contract.md` â†’ 2.1 è€ƒå‹¤ç®¡ç†æ¥å£
- **è®¿å®¢ç®¡ç†**: `visitor-api-contract.md` â†’ 2.1 è®¿å®¢ç®¡ç†æ¥å£
- **è§†é¢‘ç›‘æ§**: `video-api-contract.md` â†’ 2.1 è®¾å¤‡ç®¡ç†æ¥å£

---

## ğŸ“ å››ã€å‰ç«¯APIæ¥å£æ–‡ä»¶æ˜ å°„

### 4.1 ç§»åŠ¨ç«¯APIæ–‡ä»¶

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ |
|------|---------|------|
| **æ¶ˆè´¹** | `smart-app/src/api/business/consume/consume-api.js` | âœ… å·²å­˜åœ¨ï¼Œè¾ƒå®Œæ•´ |
| **é—¨ç¦** | `smart-app/src/api/business/access/access-api.js` | âš ï¸ å¾…åˆ›å»º |
| **è€ƒå‹¤** | `smart-app/src/api/business/attendance/attendance-api.js` | âš ï¸ å¾…åˆ›å»º |
| **è®¿å®¢** | `smart-app/src/api/business/visitor/visitor-api.js` | âœ… å·²å­˜åœ¨ï¼Œè¾ƒå®Œæ•´ |
| **è§†é¢‘** | `smart-app/src/api/business/video/video-api.js` | âœ… å·²å­˜åœ¨ï¼Œéœ€å®Œå–„ |

### 4.2 PCç«¯APIæ–‡ä»¶

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ |
|------|---------|------|
| **æ¶ˆè´¹** | `smart-admin-web-javascript/src/api/business/consumption/consumption-api.js` | âš ï¸ ä»…Dashboardï¼Œéœ€å®Œå–„ |
| **é—¨ç¦** | `smart-admin-web-javascript/src/api/business/access/access-api.js` | âš ï¸ ä»…å…¨å±€è”åŠ¨ï¼Œéœ€å®Œå–„ |
| **è€ƒå‹¤** | `smart-admin-web-javascript/src/api/business/attendance/attendance-api.js` | âš ï¸ å¾…åˆ›å»º |
| **è®¿å®¢** | `smart-admin-web-javascript/src/api/business/visitor/visitor-api.js` | âš ï¸ éœ€æ£€æŸ¥å’Œå®Œå–„ |
| **è§†é¢‘** | `smart-admin-web-javascript/src/api/business/smart-video/*-api.js` | âš ï¸ éœ€æ£€æŸ¥å’Œå®Œå–„ |

---

## ğŸ¯ äº”ã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### 5.1 ç«‹å³æ‰§è¡Œï¼ˆæœ¬å‘¨ï¼‰

1. ğŸ“‹ åˆ›å»ºPCç«¯Controllerï¼ˆæ¶ˆè´¹ã€é—¨ç¦ã€è€ƒå‹¤ã€è®¿å®¢ï¼‰
2. ğŸ“‹ åˆ›å»ºè§†é¢‘æ¨¡å—Controllerï¼ˆç§»åŠ¨ç«¯å’ŒPCç«¯ï¼‰
3. ğŸ“‹ å®Œå–„PCç«¯APIæ¥å£æ–‡ä»¶
4. ğŸ“‹ å®Œå–„ç§»åŠ¨ç«¯APIæ¥å£æ–‡ä»¶

### 5.2 æœ¬å‘¨å®Œæˆ

1. ğŸ“‹ å®ç°æ‰€æœ‰è§„åˆ’ä¸­çš„APIæ¥å£
2. ğŸ“‹ æ›´æ–°APIæ¥å£å¥‘çº¦æ–‡æ¡£
3. ğŸ“‹ æ£€æŸ¥å‰ç«¯å’Œç§»åŠ¨ç«¯APIæ¥å£æ–‡ä»¶å®Œæ•´æ€§
4. ğŸ“‹ è¡¥å……ç¼ºå¤±çš„APIæ¥å£å®ç°

---

## ğŸ“‹ å…­ã€APIæ¥å£è§„èŒƒ

### 6.1 ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰APIæ¥å£ç»Ÿä¸€ä½¿ç”¨`ResponseDTO<T>`æ ¼å¼ï¼š

```typescript
interface ResponseDTO<T> {
  code: number;        // ä¸šåŠ¡çŠ¶æ€ç ï¼ˆ200è¡¨ç¤ºæˆåŠŸï¼‰
  message: string;     // æç¤ºä¿¡æ¯
  data: T;            // å“åº”æ•°æ®
  timestamp: number;   // æ—¶é—´æˆ³
}
```

### 6.2 é”™è¯¯ç èŒƒå›´

| æ¨¡å— | é”™è¯¯ç èŒƒå›´ | è¯´æ˜ |
|------|-----------|------|
| **æ¶ˆè´¹æ¨¡å—** | 4000-4999 | æ¶ˆè´¹ç›¸å…³ä¸šåŠ¡é”™è¯¯ |
| **é—¨ç¦æ¨¡å—** | 5000-5999 | é—¨ç¦ç›¸å…³ä¸šåŠ¡é”™è¯¯ |
| **è€ƒå‹¤æ¨¡å—** | 6000-6999 | è€ƒå‹¤ç›¸å…³ä¸šåŠ¡é”™è¯¯ |
| **è®¿å®¢æ¨¡å—** | 7000-7999 | è®¿å®¢ç›¸å…³ä¸šåŠ¡é”™è¯¯ |
| **è§†é¢‘æ¨¡å—** | 8000-8999 | è§†é¢‘ç›¸å…³ä¸šåŠ¡é”™è¯¯ |

### 6.3 è®¤è¯æˆæƒ

- **ç§»åŠ¨ç«¯æ¥å£**: ä½¿ç”¨`@SaCheckLogin`æ³¨è§£ï¼Œéœ€è¦ç™»å½•è®¤è¯
- **PCç«¯æ¥å£**: ä½¿ç”¨`@PreAuthorize`æ³¨è§£ï¼Œéœ€è¦è§’è‰²æƒé™éªŒè¯

### 6.4 å‚æ•°éªŒè¯

- æ‰€æœ‰POST/PUTè¯·æ±‚ä½¿ç”¨`@Valid`æ³¨è§£è¿›è¡Œå‚æ•°éªŒè¯
- ä½¿ç”¨Jakarta Validationæ³¨è§£ï¼ˆ`@NotNull`, `@NotBlank`, `@Size`ç­‰ï¼‰

---

## ğŸ“š ä¸ƒã€ç›¸å…³æ–‡æ¡£

### 7.1 å¼€å‘ç¯å¢ƒå‡†å¤‡

**æ–‡æ¡£è·¯å¾„**: `documentation/technical/P1_FRONTEND_MOBILE_ENV_PREPARATION.md`

**å†…å®¹**: å‰ç«¯å’Œç§»åŠ¨ç«¯é¡¹ç›®å¼€å‘ç¯å¢ƒæ£€æŸ¥æŠ¥å‘Š

### 7.2 æŠ€æœ¯è§„èŒƒ

**æ–‡æ¡£è·¯å¾„**: `CLAUDE.md`

**å†…å®¹**: é¡¹ç›®æŠ€æœ¯è§„èŒƒå’Œå¼€å‘è§„èŒƒ

### 7.3 ä¸šåŠ¡æ–‡æ¡£

**æ–‡æ¡£è·¯å¾„**: `documentation/03-ä¸šåŠ¡æ¨¡å—/`

**å†…å®¹**: å„ä¸šåŠ¡æ¨¡å—çš„è¯¦ç»†ä¸šåŠ¡æ–‡æ¡£

---

**æ–‡æ¡£ç”Ÿæˆ**: IOE-DREAM æ¶æ„å§”å‘˜ä¼š  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸  
**æœ€åæ›´æ–°**: 2025-01-30

