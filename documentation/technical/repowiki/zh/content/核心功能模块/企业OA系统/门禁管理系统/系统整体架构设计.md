# é—¨ç¦ç®¡ç†ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡

> **ç‰ˆæœ¬**: v1.0
> **æ›´æ–°æ—¶é—´**: 2025-11-13
> **åˆ†ç±»**: æ ¸å¿ƒåŠŸèƒ½æ¨¡å— > ä¼ä¸šOAç³»ç»Ÿ > é—¨ç¦ç®¡ç†ç³»ç»Ÿ
> **æ ‡ç­¾**: ["é—¨ç¦ç³»ç»Ÿ", "ZKBioSecurity", "ç³»ç»Ÿæ¶æ„", "æ¨¡å—è®¾è®¡", "æƒé™ç®¡ç†"]
> **ä½œè€…**: SmartAdminè§„èŒƒæ²»ç†å§”å‘˜ä¼š
> **æè¿°**: IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°é—¨ç¦ç®¡ç†ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

### æ ¸å¿ƒå®šä½

**é—¨ç¦ç®¡ç†ç³»ç»Ÿ**æ˜¯IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼ŒåŸºäºZKBioSecurity-ACCæŠ€æœ¯æ¶æ„ï¼Œæä¾›ä¼ä¸šçº§çš„é—¨ç¦æ§åˆ¶å’Œå®‰å…¨è®¿é—®ç®¡ç†ã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼ï¼Œå®ç°å…¨æ–¹ä½çš„å›­åŒºå®‰å…¨ç®¡æ§ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **å¤šçº§æƒé™æ§åˆ¶**ï¼šæ”¯æŒäººå‘˜ã€åŒºåŸŸã€æ—¶é—´ã€å¤šçº§æƒé™ç®¡ç†
- âœ… **å®æ—¶ç›‘æ§**ï¼š7Ã—24å°æ—¶å®æ—¶ç›‘æ§ï¼Œå¼‚å¸¸äº‹ä»¶å³æ—¶å‘Šè­¦
- âœ… **ç”Ÿç‰©è¯†åˆ«é›†æˆ**ï¼šæ”¯æŒäººè„¸ã€æŒ‡çº¹ã€è™¹è†œã€æŒçº¹ç­‰å¤šç§ç”Ÿç‰©è¯†åˆ«
- âœ… **è§†é¢‘è”åŠ¨**ï¼šé—¨ç¦äº‹ä»¶ä¸è§†é¢‘ç›‘æ§æ— ç¼è”åŠ¨
- âœ… **è®¿å®¢ç®¡ç†**ï¼šå®Œæ•´çš„è®¿å®¢é¢„çº¦ã€å®¡æ‰¹ã€è®¿é—®æµç¨‹
- âœ… **æ™ºèƒ½åˆ†æ**ï¼šäººå‘˜è½¨è¿¹åˆ†æã€å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
- âœ… **åº”æ€¥å¤„ç†**ï¼šç´§æ€¥æƒé™ã€å…¨å±€è”åŠ¨ã€å¿«é€Ÿå“åº”

## ğŸ—ï¸ ç³»ç»Ÿæ ¸å¿ƒæ¨¡å—æ¶æ„

### æ¶æ„å±‚æ¬¡å›¾

```mermaid
graph TB
    subgraph "é—¨ç¦ç®¡ç†ç³»ç»Ÿæ¶æ„"
        subgraph "ç”¨æˆ·äº¤äº’å±‚"
            UE[ç”¨æˆ·ç•Œé¢]
            MA[ç§»åŠ¨åº”ç”¨]
            WE[Webç®¡ç†ç«¯]
        end

        subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
            subgraph "æ ¸å¿ƒä¸šåŠ¡æ¨¡å—"
                DM[è®¾å¤‡ç®¡ç†æ¨¡å—]
                AM[åŒºåŸŸç©ºé—´ç®¡ç†æ¨¡å—]
                RM[å®æ—¶ç›‘æ§æ¨¡å—]
                EM[äº‹ä»¶è®°å½•æŸ¥è¯¢æ¨¡å—]
            end

            subgraph "ä¸šåŠ¡æ”¯æŒæ¨¡å—"
                PM[å®¡æ‰¹æµç¨‹ç®¡ç†æ¨¡å—]
                SC[ç³»ç»Ÿé…ç½®æ¨¡å—]
                AF[é«˜çº§åŠŸèƒ½æ¨¡å—]
            end
        end

        subgraph "æ•°æ®è®¿é—®å±‚"
            DA[æ•°æ®è®¿é—®å±‚]
            CA[ç¼“å­˜å±‚]
        end

        subgraph "å¤–éƒ¨é›†æˆå±‚"
            HW[ç¡¬ä»¶è®¾å¤‡å±‚]
            BI[ç”Ÿç‰©è¯†åˆ«å¼•æ“]
            VS[è§†é¢‘ç›‘æ§ç³»ç»Ÿ]
            ES[å¤–éƒ¨ç³»ç»Ÿæ¥å£]
        end
    end

    UE --> DM
    MA --> RM
    WE --> PM
    DM --> DA
    AM --> DA
    RM --> CA
    EM --> DA
    PM --> SC
    SC --> DA
    AF --> DA

    DA --> HW
    RM --> BI
    RM --> VS
    EM --> ES
```

### æ ¸å¿ƒæ¨¡å—è¯¦ç»†è®¾è®¡

#### 1. è®¾å¤‡ç®¡ç†æ¨¡å—

**åŠŸèƒ½èŒè´£**ï¼š
- é—¨ç¦è®¾å¤‡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- è¯»å¤´è®¾å¤‡é…ç½®å’ŒçŠ¶æ€ç›‘æ§
- I/Oæ‰©å±•æ¿ç®¡ç†
- è®¾å¤‡å›ºä»¶å‡çº§å’Œç»´æŠ¤

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```markdown
ğŸ”§ è®¾å¤‡ç®¡ç†
- è®¾å¤‡æ³¨å†Œã€é…ç½®ã€çŠ¶æ€ç›‘æ§
- è®¾å¤‡åˆ†ç»„å’Œæ‰¹é‡æ“ä½œ
- è®¾å¤‡å¥åº·åº¦æ£€æµ‹

ğŸšª é—¨ç®¡ç†
- é—¨çŠ¶æ€å®æ—¶ç›‘æ§
- é—¨ç¦æ¨¡å¼é…ç½®ï¼ˆå¸¸å¼€/å¸¸é—­/è‡ªåŠ¨ï¼‰
- è¿œç¨‹é—¨æ§åˆ¶

ğŸ“Ÿ è¯»å¤´ç®¡ç†
- è¯»å¤´ç±»å‹ç®¡ç†ï¼ˆICå¡/æŒ‡çº¹/äººè„¸/è™¹è†œï¼‰
- è¯»å¤´å‚æ•°é…ç½®
- è¯»å¤´çŠ¶æ€ç›‘æ§å’Œæ•…éšœè¯Šæ–­

ğŸ”Œ I/Oæ‰©å±•æ¿ç®¡ç†
- æ‰©å±•æ¿ç±»å‹å’Œé…ç½®
- è¾“å…¥è¾“å‡ºç«¯å£ç®¡ç†
- æ‰©å±•åŠŸèƒ½å®šä¹‰
```

#### 2. åŒºåŸŸç©ºé—´ç®¡ç†æ¨¡å—

**åŠŸèƒ½èŒè´£**ï¼š
- å›­åŒºç©ºé—´å±‚çº§ç®¡ç†
- äººå‘˜æƒé™åˆ†é…
- è®¾å¤‡èµ„æºåˆ†é…
- ç©ºé—´å ç”¨ç›‘æ§

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```markdown
ğŸ¢ åŒºåŸŸåˆ›å»º
- å¤šçº§åŒºåŸŸæ¶æ„ï¼ˆå›­åŒºâ†’æ¥¼æ ‹â†’æ¥¼å±‚â†’æˆ¿é—´ï¼‰
- åŒºåŸŸç±»å‹å®šä¹‰ï¼ˆåŠå…¬åŒº/ç”Ÿäº§åŒº/å±é™©åŒºï¼‰
- åŒºåŸŸå±æ€§é…ç½®

ğŸ‘¥ äººå‘˜æƒé™åˆ†é…
- åŸºäºè§’è‰²çš„æƒé™åˆ†é…
- æ—¶é—´æ®µæƒé™æ§åˆ¶
- ä¸´æ—¶æƒé™ç”³è¯·å’Œç®¡ç†

ğŸ”§ è®¾å¤‡åˆ†é…
- è®¾å¤‡ä¸åŒºåŸŸå…³è”
- è®¾å¤‡èµ„æºå ç”¨ç›‘æ§
- è®¾å¤‡ä½¿ç”¨ç»Ÿè®¡åˆ†æ

ğŸ“Š å ç”¨ç›‘æ§
- å®æ—¶åŒºåŸŸå ç”¨æƒ…å†µ
- è®¾å¤‡åˆ©ç”¨ç‡ç»Ÿè®¡
- ç©ºé—´ä½¿ç”¨åˆ†æ
```

#### 3. å®æ—¶ç›‘æ§æ¨¡å—

**åŠŸèƒ½èŒè´£**ï¼š
- å®æ—¶çŠ¶æ€ç›‘æ§
- å¼‚å¸¸äº‹ä»¶å¤„ç†
- è§†é¢‘è”åŠ¨æ§åˆ¶
- äººå‘˜è½¨è¿¹è¿½è¸ª

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```markdown
ğŸ“¹ å®æ—¶çŠ¶æ€ç›‘æ§
- è®¾å¤‡åœ¨çº¿çŠ¶æ€ç›‘æ§
- é—¨çŠ¶æ€å®æ—¶æ˜¾ç¤º
- ç½‘ç»œè¿æ¥çŠ¶æ€æ£€æŸ¥
- ç³»ç»Ÿæ€§èƒ½ç›‘æ§

ğŸš¨ æŠ¥è­¦å¤„ç†
- å®æ—¶å‘Šè­¦æ¨é€
- å‘Šè­¦çº§åˆ«åˆ†ç±»
- å‘Šè­¦å¤„ç†æµç¨‹
- å‘Šè­¦ç»Ÿè®¡åˆ†æ

ğŸ“¹ è§†é¢‘è”åŠ¨
- é—¨ç¦äº‹ä»¶è§†é¢‘è”åŠ¨
- å®æ—¶ç”»é¢å¼¹å‡º
- å½•åƒç‰‡æ®µè‡ªåŠ¨ä¿å­˜
- è§†é¢‘å›æ”¾ç®¡ç†

ğŸ‘¤ äººå‘˜è¿½è¸ª
- å®æ—¶äººå‘˜ä½ç½®è¿½è¸ª
- è®¿é—®è½¨è¿¹è®°å½•
- å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
- äººå‘˜çƒ­åŠ›å›¾åˆ†æ
```

#### 4. äº‹ä»¶è®°å½•æŸ¥è¯¢æ¨¡å—

**åŠŸèƒ½èŒè´£**ï¼š
- é—¨ç¦äº‹ä»¶æŸ¥è¯¢å’Œåˆ†æ
- å¼‚å¸¸äº‹ä»¶å¤„ç†
- ç»Ÿè®¡æŠ¥è¡¨ç”Ÿæˆ
- æ•°æ®å½’æ¡£ç®¡ç†

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```markdown
ğŸ“‹ äº‹ä»¶æŸ¥è¯¢
- å¤šç»´åº¦äº‹ä»¶æŸ¥è¯¢
- äº‹ä»¶è¯¦æƒ…æŸ¥çœ‹
- äº‹ä»¶ç»Ÿè®¡åˆ†æ
- äº‹ä»¶å¯¼å‡ºåŠŸèƒ½

âš ï¸ å¼‚å¸¸äº‹ä»¶å¤„ç†
- å¼‚å¸¸äº‹ä»¶åˆ†ç±»
- å¤„ç†æµç¨‹è·Ÿè¸ª
- å¤„ç†ç»“æœè®°å½•
- å¼‚å¸¸è¶‹åŠ¿åˆ†æ

ğŸ“Š ç»Ÿè®¡æŠ¥è¡¨ç”Ÿæˆ
- é—¨ç¦ä½¿ç”¨ç»Ÿè®¡
- äººå‘˜è®¿é—®ç»Ÿè®¡
- è®¾å¤‡è¿è¡Œç»Ÿè®¡
- å¼‚å¸¸äº‹ä»¶ç»Ÿè®¡
- æ—¶æ®µè®¿é—®åˆ†æ

ğŸ“ æ•°æ®å½’æ¡£ç®¡ç†
- å†å²æ•°æ®å½’æ¡£
- æ•°æ®å¤‡ä»½ç­–ç•¥
- æ•°æ®æ¢å¤åŠŸèƒ½
- æ•°æ®æ¸…ç†è§„åˆ™
```

#### 5. å®¡æ‰¹æµç¨‹ç®¡ç†æ¨¡å—

**åŠŸèƒ½èŒè´£**ï¼š
- æƒé™ç”³è¯·å’Œå®¡æ‰¹
- è®¿å®¢é¢„çº¦ç®¡ç†
- ç´§æ€¥æƒé™å¤„ç†
- å®¡æ‰¹æµç¨‹é…ç½®

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```markdown
ğŸ“ æƒé™ç”³è¯·
- ä¸´æ—¶æƒé™ç”³è¯·
- è·¨åŒºåŸŸæƒé™ç”³è¯·
- æ—¶é—´æ®µæƒé™ç”³è¯·
- ç”³è¯·æµç¨‹è·Ÿè¸ª

ğŸ‘¥ è®¿å®¢é¢„çº¦
- è®¿å®¢ä¿¡æ¯ç™»è®°
- é¢„çº¦æ—¶é—´å®‰æ’
- è®¿å®¢æƒé™å‘æ”¾
- è®¿å®¢è½¨è¿¹ç›‘æ§

ğŸš¨ ç´§æ€¥æƒé™å¤„ç†
- ç´§æ€¥æƒ…å†µå®šä¹‰
- å¿«é€Ÿæƒé™æˆäºˆ
- ç´§æ€¥æƒé™æ’¤é”€
- ç´§æ€¥äº‹ä»¶è®°å½•

âš™ï¸ å®¡æ‰¹æµç¨‹é…ç½®
- å®¡æ‰¹æµç¨‹å®šä¹‰
- å®¡æ‰¹èŠ‚ç‚¹é…ç½®
- å®¡æ‰¹æ¡ä»¶è®¾ç½®
- æµç¨‹ç»Ÿè®¡åˆ†æ
```

#### 6. ç³»ç»Ÿé…ç½®æ¨¡å—

**åŠŸèƒ½èŒè´£**ï¼š
- ç³»ç»Ÿå‚æ•°é…ç½®
- ç”¨æˆ·æƒé™ç®¡ç†
- è®¸å¯è¯ç®¡ç†
- å¤‡ä»½æ¢å¤

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```markdown
âš™ï¸ ç³»ç»Ÿå‚æ•°é…ç½®
- ç³»ç»ŸåŸºæœ¬å‚æ•°
- å®‰å…¨ç­–ç•¥é…ç½®
- æ€§èƒ½å‚æ•°è°ƒä¼˜
- é›†æˆæ¥å£é…ç½®

ğŸ‘¤ ç”¨æˆ·æƒé™ç®¡ç†
- ç”¨æˆ·è´¦æˆ·ç®¡ç†
- è§’è‰²æƒé™åˆ†é…
- æ“ä½œæƒé™æ§åˆ¶
- å®¡è®¡æ—¥å¿—è®°å½•

ğŸ” è®¸å¯è¯ç®¡ç†
- è½¯ä»¶è®¸å¯è¯é…ç½®
- åŠŸèƒ½æ¨¡å—æˆæƒ
- è®¾å¤‡æ•°é‡é™åˆ¶
- è®¸å¯è¯çŠ¶æ€ç›‘æ§

ğŸ’¾ å¤‡ä»½æ¢å¤
- æ•°æ®å¤‡ä»½ç­–ç•¥
- ç³»ç»Ÿæ¢å¤åŠŸèƒ½
- ç¾éš¾æ¢å¤è®¡åˆ’
- å¤‡ä»½æ•°æ®éªŒè¯
```

#### 7. é«˜çº§åŠŸèƒ½æ¨¡å—

**åŠŸèƒ½èŒè´£**ï¼š
- å…¨å±€åæ½œåŠŸèƒ½
- å…¨å±€è”åŠ¨æ§åˆ¶
- å…¨å±€äº’é”ç®¡ç†
- ç–æ•£ç‚¹ç®¡ç†
- äººæ•°æ§åˆ¶å’Œé™åˆ¶

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```markdown
ğŸ” å…¨å±€åæ½œ
- åæ½œè§„åˆ™é…ç½®
- é»‘åå•ç®¡ç†
- åæ½œç­–ç•¥æ‰§è¡Œ
- åæ½œäº‹ä»¶è®°å½•

ğŸ”— å…¨å±€è”åŠ¨
- è”åŠ¨äº‹ä»¶å®šä¹‰
- è”åŠ¨è®¾å¤‡é…ç½®
- è”åŠ¨æ¡ä»¶è®¾ç½®
- è”åŠ¨çŠ¶æ€ç›‘æ§

ğŸ”’ å…¨å±€äº’é”
- äº’é”åŒºåŸŸå®šä¹‰
- äº’é”è§„åˆ™é…ç½®
- äº’é”çŠ¶æ€ç®¡ç†
- äº’é”å¼‚å¸¸å¤„ç†

ğŸ“ ç–æ•£ç‚¹ç®¡ç†
- ç–æ•£è·¯å¾„å®šä¹‰
- ç–æ•£æ—¶é—´é…ç½®
- ç–æ•£æ‰§è¡Œç›‘æ§
- ç–æ•£æ•ˆæœéªŒè¯

ğŸ‘¥ äººæ•°æ§åˆ¶
- åŒºåŸŸäººæ•°é™åˆ¶
- äººå‘˜è¶…é™å¤„ç†
- å®æ—¶äººæ•°ç»Ÿè®¡
- äººå‘˜å¯†åº¦åˆ†æ
```

## ğŸ”„ æ¨¡å—é—´äº¤äº’å…³ç³»

### æ•°æ®æµè®¾è®¡

```mermaid
flowchart TD
    A[ç”¨æˆ·ç™»å½•] --> B{é€‰æ‹©åŠŸèƒ½æ¨¡å—}

    B --> C[è®¾å¤‡ç®¡ç†æ¨¡å—]
    B --> D[åŒºåŸŸç©ºé—´ç®¡ç†æ¨¡å—]
    B --> E[å®æ—¶ç›‘æ§æ¨¡å—]
    B --> F[äº‹ä»¶è®°å½•æŸ¥è¯¢æ¨¡å—]
    B --> G[å®¡æ‰¹æµç¨‹ç®¡ç†æ¨¡å—]
    B --> H[ç³»ç»Ÿé…ç½®æ¨¡å—]
    B --> I[é«˜çº§åŠŸèƒ½æ¨¡å—]

    C --> C1[è®¾å¤‡æ“ä½œ]
    D --> D1[åŒºåŸŸæƒé™é…ç½®]
    E --> E1[ç›‘æ§äº‹ä»¶å¤„ç†]
    F --> F1[äº‹ä»¶æŸ¥è¯¢åˆ†æ]
    G --> G1[å®¡æ‰¹æµç¨‹å¤„ç†]
    H --> H1[ç³»ç»Ÿå‚æ•°é…ç½®]
    I --> I1[é«˜çº§åŠŸèƒ½æ‰§è¡Œ]

    C1 --> J[ç¡¬ä»¶è®¾å¤‡å±‚]
    D1 --> J
    E1 --> J
    F1 --> J
    G1 --> J
    H1 --> J
    I1 --> J

    J --> K[ç”Ÿç‰©è¯†åˆ«å¼•æ“]
    J --> L[è§†é¢‘ç›‘æ§ç³»ç»Ÿ]
    J --> M[å¤–éƒ¨ç³»ç»Ÿæ¥å£]

    C1 -.->|æ•°æ®å†™å…¥| N[æ•°æ®åº“]
    D1 -.->|æ•°æ®å†™å…¥| N
    E1 -.->|æ•°æ®å†™å…¥| N
    F1 -.->|æ•°æ®å†™å…¥| N
    G1 -.->|æ•°æ®å†™å…¥| N
    H1 -.->|æ•°æ®å†™å…¥| N
    I1 -.->|æ•°æ®å†™å…¥| N

    N --> O[æ•°æ®å­˜å‚¨]
```

### æ¨¡å—ä¾èµ–å…³ç³»

| æ¨¡å— | ä¾èµ–æ¨¡å— | æ•°æ®æµå‘ | è¯´æ˜ |
|------|----------|---------|------|
| è®¾å¤‡ç®¡ç† | ç³»ç»Ÿé…ç½® | â† | è·å–ç³»ç»Ÿé…ç½®å‚æ•° |
| åŒºåŸŸç©ºé—´ | è®¾å¤‡ç®¡ç† | â† | è·å–è®¾å¤‡ä¿¡æ¯ç”¨äºæƒé™é…ç½® |
| å®æ—¶ç›‘æ§ | è®¾å¤‡ç®¡ç†ã€åŒºåŸŸç©ºé—´ | â† | è·å–è®¾å¤‡çŠ¶æ€å’ŒåŒºåŸŸæƒé™ |
| å®æ—¶ç›‘æ§ | ç”Ÿç‰©è¯†åˆ«ã€è§†é¢‘ç³»ç»Ÿ | â† | é›†æˆç”Ÿç‰©è¯†åˆ«å’Œè§†é¢‘æ•°æ® |
| äº‹ä»¶è®°å½• | å®æ—¶ç›‘æ§ã€è®¾å¤‡ç®¡ç† | â† | æ¥æ”¶ç›‘æ§äº‹ä»¶å’Œè®¾å¤‡çŠ¶æ€ |
| å®¡æ‰¹æµç¨‹ | åŒºåŸŸç©ºé—´ã€ç³»ç»Ÿé…ç½® | â† | æƒé™éªŒè¯å’Œæµç¨‹æ§åˆ¶ |
| é«˜çº§åŠŸèƒ½ | æ‰€æœ‰æ¨¡å— | â† | å…¨å±€åŠŸèƒ½æ§åˆ¶å…¶ä»–æ¨¡å— |

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. å®æ—¶é€šä¿¡æ¶æ„

```java
@Component
@Slf4j
public class RealtimeEventHandler {

    @Resource
    private SimpMessagingTemplate messagingTemplate;

    @Resource
    private DeviceStatusService deviceStatusService;

    /**
     * å¤„ç†è®¾å¤‡çŠ¶æ€å˜æ›´äº‹ä»¶
     */
    @EventListener
    public void handleDeviceStatusChangedEvent(DeviceStatusChangedEvent event) {
        try {
            // 1. æ›´æ–°è®¾å¤‡çŠ¶æ€ç¼“å­˜
            deviceStatusService.updateDeviceStatus(event);

            // 2. æ¨é€å®æ—¶çŠ¶æ€åˆ°å‰ç«¯
            DeviceStatusVO statusVO = DeviceStatusVO.builder()
                    .deviceId(event.getDeviceId())
                    .deviceName(event.getDeviceName())
                    .status(event.getStatus())
                    .timestamp(event.getTimestamp())
                    .build();

            messagingTemplate.convertAndSend(
                "/topic/device/status",
                statusVO
            );

            // 3. è§¦å‘ç›¸å…³ä¸šåŠ¡é€»è¾‘
            if (event.getStatus() == DeviceStatus.OFFLINE) {
                this.handleDeviceOffline(event);
            }

            log.info("è®¾å¤‡çŠ¶æ€å˜æ›´äº‹ä»¶å¤„ç†å®Œæˆ, deviceId: {}", event.getDeviceId());

        } catch (Exception e) {
            log.error("è®¾å¤‡çŠ¶æ€å˜æ›´äº‹ä»¶å¤„ç†å¤±è´¥", e);
        }
    }
}
```

### 2. æƒé™éªŒè¯æœåŠ¡

```java
@Service
@Slf4j
public class AccessControlService {

    @Resource
    private AreaPermissionService areaPermissionService;
    @Resource
    private DeviceService deviceService;

    /**
     * éªŒè¯è®¿é—®æƒé™
     */
    public AccessControlResult validateAccess(Long employeeId, Long deviceId, LocalDateTime accessTime) {
        try {
            // 1. è·å–è®¾å¤‡ä¿¡æ¯
            DeviceInfo device = deviceService.getDeviceInfo(deviceId);
            if (device == null || !device.isEnabled()) {
                return AccessControlResult.denied("è®¾å¤‡ä¸å­˜åœ¨æˆ–å·²ç¦ç”¨");
            }

            // 2. è·å–è®¾å¤‡æ‰€åœ¨åŒºåŸŸ
            List<Long> areaIds = deviceService.getDeviceAreaIds(deviceId);

            // 3. éªŒè¯äººå‘˜åŒºåŸŸæƒé™
            for (Long areaId : areaIds) {
                AreaPermission permission = areaPermissionService
                        .getEmployeeAreaPermission(employeeId, areaId, accessTime);

                if (permission.isAllowed()) {
                    return AccessControlResult.granted(areaId, permission);
                }
            }

            return AccessControlResult.denied("æ— è®¿é—®æƒé™");

        } catch (Exception e) {
            log.error("æƒé™éªŒè¯å¤±è´¥", e);
            return AccessControlResult.error("ç³»ç»Ÿå¼‚å¸¸");
        }
    }
}
```

### 3. äº‹ä»¶å¤„ç†æœåŠ¡

```java
@Service
@Transactional
@Slf4j
public class EventProcessingService {

    @Resource
    private AccessEventDao accessEventDao;
    @Resource
    private WarningService warningService;
    @Resource
    private VideoLinkageService videoLinkageService;

    /**
     * å¤„ç†é—¨ç¦äº‹ä»¶
     */
    public void processAccessEvent(AccessEvent event) {
        try {
            // 1. ä¿å­˜è®¿é—®äº‹ä»¶
            accessEventDao.insert(event);

            // 2. æ£€æŸ¥å¼‚å¸¸æƒ…å†µ
            if (this.isAbnormalEvent(event)) {
                // ç”Ÿæˆé¢„è­¦
                WarningRecord warning = warningService.createWarning(event);

                // å‘é€é€šçŸ¥
                this.sendWarningNotification(warning);
            }

            // 3. è§†é¢‘è”åŠ¨å¤„ç†
            if (videoLinkageService.isVideoLinkageEnabled(event.getDeviceId())) {
                videoLinkageService.triggerVideoLinkage(event);
            }

            // 4. æ›´æ–°å®æ—¶ç»Ÿè®¡
            this.updateRealTimeStatistics(event);

        } catch (Exception e) {
            log.error("é—¨ç¦äº‹ä»¶å¤„ç†å¤±è´¥", e);
        }
    }
}
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

### æŠ€æœ¯æ¶æ„æ–‡æ¡£
- [é—¨ç¦ç³»ç»Ÿæ•°æ®åº“è®¾è®¡](./æ•°æ®åº“è®¾è®¡.md) - å®Œæ•´çš„æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡
- [ç”Ÿç‰©è¯†åˆ«é›†æˆæ–¹æ¡ˆ](./ç”Ÿç‰©è¯†åˆ«é›†æˆæ–¹æ¡ˆ.md) - ç”Ÿç‰©è¯†åˆ«é›†æˆè¯¦ç»†è®¾è®¡
- [è§†é¢‘è”åŠ¨æ–¹æ¡ˆ](./è§†é¢‘è”åŠ¨æ–¹æ¡ˆ.md) - è§†é¢‘è”åŠ¨å®ç°æ–¹æ¡ˆ

### ä¸šåŠ¡æµç¨‹æ–‡æ¡£
- [é—¨ç¦é›†æˆæ–¹æ¡ˆ](../é›†æˆæ–¹æ¡ˆ/é—¨ç¦é›†æˆæ–¹æ¡ˆ.md) - é—¨ç¦ç³»ç»Ÿé›†æˆè®¾è®¡
- [è®¿å®¢ç®¡ç†æµç¨‹è®¾è®¡](./è®¿å®¢ç®¡ç†æµç¨‹è®¾è®¡.md) - è®¿å®¢ç®¡ç†ä¸šåŠ¡æµç¨‹
- [å¼‚å¸¸å¤„ç†æµç¨‹è®¾è®¡](./å¼‚å¸¸å¤„ç†æµç¨‹è®¾è®¡.md) - å¼‚å¸¸äº‹ä»¶å¤„ç†æµç¨‹

### APIæ¥å£æ–‡æ¡£
- [é—¨ç¦ç®¡ç†APIæ¥å£æ–‡æ¡£](./é—¨ç¦ç®¡ç†APIæ¥å£æ–‡æ¡£.md) - é—¨ç¦ç®¡ç†APIè¯¦ç»†è®¾è®¡
- [å®æ—¶ç›‘æ§APIæ¥å£æ–‡æ¡£](./å®æ—¶ç›‘æ§APIæ¥å£æ–‡æ¡£.md) - å®æ—¶ç›‘æ§APIè®¾è®¡

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™æ€»ç»“

1. **æ¨¡å—åŒ–è®¾è®¡** - ä¸ƒå¤§æ ¸å¿ƒæ¨¡å—ç›¸äº’ç‹¬ç«‹åˆç´§å¯†åä½œ
2. **æ•°æ®é©±åŠ¨** - åŸºäºäº‹ä»¶çš„å“åº”å¼æ¶æ„è®¾è®¡
3. **å®‰å…¨ä¼˜å…ˆ** - å¤šå±‚å®‰å…¨é˜²æŠ¤ï¼Œæƒé™æ§åˆ¶ç²¾ç»†åŒ–
4. **å®æ—¶æ€§** - å®æ—¶ç›‘æ§å’Œå¿«é€Ÿå“åº”æœºåˆ¶
5. **å¯æ‰©å±•æ€§** - æ¨¡å—åŒ–æ¶æ„æ”¯æŒåŠŸèƒ½æ‰©å±•

## ğŸ“‹ ç‰ˆæœ¬ä¿¡æ¯

- æœ¬æ–‡æ¡£åŸºäºZKBioSecurity-ACCé—¨ç¦ç³»ç»Ÿæ¶æ„è®¾è®¡
- æ¶æ„è®¾è®¡è´Ÿè´£äººï¼šSmartAdminè§„èŒƒæ²»ç†å§”å‘˜ä¼š
- åˆ›å»ºæ—¥æœŸï¼š2025-11-13
- ä¸‹æ¬¡è¯„å®¡ï¼š2026-02-13

---

**ğŸ¯ IOE-DREAMé—¨ç¦ç®¡ç†ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡ - æ¨¡å—åŒ–ã€å®‰å…¨ã€å¯æ‰©å±•çš„ä¼ä¸šçº§é—¨ç¦è§£å†³æ–¹æ¡ˆ**