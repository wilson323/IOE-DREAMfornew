# IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å° - æ™ºèƒ½è§†é¢‘ç›‘æ§ç³»ç»Ÿé¡¹ç›®æ¦‚è¿°ä¸ç³»ç»Ÿæ¶æ„

> **æ™ºæ…§å®‰é˜² Â· AIèµ‹èƒ½ Â· å…¨é¢ç›‘æ§**
> **æ›´æ–°æ—¶é—´**: 2025-11-13
> **ç‰ˆæœ¬**: v4.0
> **æ–‡æ¡£ç±»å‹**: é¡¹ç›®æ¦‚è¿°ä¸ç³»ç»Ÿæ¶æ„

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®å®šä½ä¸æˆ˜ç•¥ä»·å€¼

**æ™ºèƒ½è§†é¢‘ç›‘æ§ç³»ç»Ÿ**ä½œä¸ºIOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°çš„æ ¸å¿ƒå®‰é˜²æ¨¡å—ï¼Œé‡‡ç”¨**Spring Bootåˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„**ï¼Œä¸“æ³¨äºæä¾›å®Œæ•´çš„AIæ™ºèƒ½è§†é¢‘ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚æœ¬æ¨¡å—é€šè¿‡**äº‹ä»¶è®¢é˜…ä¸­å¿ƒ**ä¸å…¶ä»–ä¸šåŠ¡æ¨¡å—ååŒå·¥ä½œï¼Œå®ç°å…¨åŸŸå®‰é˜²æ™ºèƒ½åŒ–ç®¡ç†ã€‚

#### æ ¸å¿ƒå®šä½
- **å®‰é˜²ä½“ç³»æ ¸å¿ƒ**ï¼šæ‰¿æ‹…æ™ºæ…§å›­åŒºå®‰é˜²ç›‘æ§çš„ä¸­æ¢è§’è‰²
- **AIæ™ºèƒ½ä¸­æ¢**ï¼šé›†æˆäººè„¸è¯†åˆ«ã€è¡Œä¸ºåˆ†æç­‰æ™ºèƒ½ç®—æ³•
- **æ•°æ®èåˆå¹³å°**ï¼šå¤šæºå¼‚æ„æ•°æ®çš„ç»Ÿä¸€æ¥å…¥ä¸å¤„ç†
- **è”åŠ¨æŒ‡æŒ¥ä¸­å¿ƒ**ï¼šè·¨æ¨¡å—ååŒã€åº”æ€¥å“åº”çš„ç»Ÿä¸€è°ƒåº¦

#### ä¸šåŠ¡ä»·å€¼
```mermaid
graph TB
    A[æ™ºèƒ½è§†é¢‘ç›‘æ§ç³»ç»Ÿ] --> B[å®‰é˜²é¢„è­¦èƒ½åŠ›æå‡]
    A --> C[è¿è¥ç®¡ç†æ•ˆç‡ä¼˜åŒ–]
    A --> D[åº”æ€¥å“åº”é€Ÿåº¦æå‡]
    A --> E[æ•°æ®ä»·å€¼æ·±åº¦æŒ–æ˜]

    B --> B1[å®æ—¶é£é™©è¯†åˆ«]
    B --> B2[æ™ºèƒ½è¡Œä¸ºåˆ†æ]
    B --> B3[å¼‚å¸¸äº‹ä»¶é¢„è­¦]

    C --> C1[è‡ªåŠ¨åŒ–ç›‘æ§]
    C --> C2[æ™ºèƒ½åŒ–åˆ†æ]
    C --> C3[å¯è§†åŒ–å†³ç­–]

    D --> D1[å¿«é€Ÿå®šä½å¼‚å¸¸]
    D --> D2[æ™ºèƒ½è°ƒåº¦èµ„æº]
    D --> D3[ååŒåº”æ€¥å¤„ç½®]

    E --> E1[è§†é¢‘æ•°æ®æŒ–æ˜]
    E --> E2[è¡Œä¸ºæ¨¡å¼åˆ†æ]
    E --> E3[ä¸šåŠ¡æ´å¯Ÿæç‚¼]
```

### å¾®æœåŠ¡æ¶æ„è¾¹ç•Œ

#### âœ… æ ¸å¿ƒåŒ…å«æ¨¡å—

| æ¨¡å—åç§° | åŠŸèƒ½èŒè´£ | æŠ€æœ¯ç‰¹æ€§ |
|---------|---------|---------|
| **å®æ—¶ç›‘æ§æœåŠ¡** | è§†é¢‘æµå¤„ç†ã€å¤šç”»é¢å±•ç¤º | WebRTCã€RTMPã€HLSå¤šåè®®æ”¯æŒ |
| **å½•åƒå›æ”¾æœåŠ¡** | å†å²è§†é¢‘æŸ¥è¯¢ã€å›æ”¾æ§åˆ¶ | æ—¶é—´è½´é¢„è§ˆã€æ™ºèƒ½æ£€ç´¢ |
| **è¡Œä¸ºåˆ†ææœåŠ¡** | AIç®—æ³•é›†æˆã€æ™ºèƒ½è¯†åˆ« | æ·±åº¦å­¦ä¹ ã€å®æ—¶åˆ†æ |
| **å‘Šè­¦ç®¡ç†æœåŠ¡** | å¼‚å¸¸æ£€æµ‹ã€äº‹ä»¶å¤„ç† | å¤šçº§å‘Šè­¦ã€æ™ºèƒ½è”åŠ¨ |
| **è§£ç ä¸Šå¢™æœåŠ¡** | å¤§å±æ§åˆ¶ã€è§£ç ç®¡ç† | å¤šå±è”åŠ¨ã€ç”»é¢æ‹¼æ¥ |
| **äº‹ä»¶è®¢é˜…æœåŠ¡** | è·¨æ¨¡å—é€šä¿¡ã€æ•°æ®æ¨é€ | æ··åˆæ¨é€æ¨¡å¼ã€å®æ—¶é€šä¿¡ |

#### âŒ å¤–éƒ¨ä¾èµ–æ¨¡å—

| ä¾èµ–æ¨¡å— | è·å–æ–¹å¼ | äº¤äº’å†…å®¹ |
|---------|---------|---------|
| **è®¾å¤‡ç®¡ç†æ¨¡å—** | äº‹ä»¶è®¢é˜… | è®¾å¤‡ä¿¡æ¯ã€çŠ¶æ€æ•°æ®ã€é…ç½®å˜æ›´ |
| **ç”¨æˆ·æƒé™æ¨¡å—** | APIè°ƒç”¨ | èº«ä»½è®¤è¯ã€æƒé™æ§åˆ¶ã€å®‰å…¨çº§åˆ« |
| **ç³»ç»Ÿæ—¥å¿—æ¨¡å—** | äº‹ä»¶å‘å¸ƒ | æ“ä½œæ—¥å¿—ã€å®¡è®¡è®°å½•ã€å¼‚å¸¸è¿½è¸ª |
| **ä¸‹è½½ä¸­å¿ƒæ¨¡å—** | ä»»åŠ¡æäº¤ | è§†é¢‘ä¸‹è½½ã€æ°´å°æ·»åŠ ã€æ–‡ä»¶ç®¡ç† |
| **åœ°å›¾æœåŠ¡æ¨¡å—** | APIé›†æˆ | ä½ç½®æ ‡æ³¨ã€åœ°ç†å›´æ ã€è·¯å¾„è§„åˆ’ |

### æ ¸å¿ƒæŠ€æœ¯ç‰¹æ€§

#### ğŸ” äº”çº§å®‰å…¨ä½“ç³»
```java
/**
 * å®‰å…¨çº§åˆ«æšä¸¾å®šä¹‰
 */
public enum SecurityLevel {
    TOP_SECRET(1, "ç»å¯†çº§", "æœ€é«˜çº§åˆ«å®‰å…¨æ§åˆ¶"),
    SECRET(2, "æœºå¯†çº§", "é«˜çº§åˆ«å®‰å…¨æ§åˆ¶"),
    CONFIDENTIAL(3, "ç§˜å¯†çº§", "ä¸­çº§åˆ«å®‰å…¨æ§åˆ¶"),
    INTERNAL(4, "å†…éƒ¨çº§", "åŸºç¡€çº§åˆ«å®‰å…¨æ§åˆ¶"),
    PUBLIC(5, "å…¬å¼€çº§", "æœ€ä½çº§åˆ«å®‰å…¨æ§åˆ¶");

    private final int code;
    private final String name;
    private final String description;
}
```

#### ğŸ“¹ å¤šåè®®è§†é¢‘æµæ”¯æŒ
- **RTSPåè®®**ï¼šä¼ ç»ŸIPæ‘„åƒå¤´ä¸»æµåè®®
- **RTMPåè®®**ï¼šä½å»¶æ—¶å®æ—¶ä¼ è¾“
- **HLSåè®®**ï¼šHTTPè‡ªé€‚åº”æµåª’ä½“
- **WebRTCåè®®**ï¼šæµè§ˆå™¨ç«¯å®æ—¶é€šä¿¡
- **ONVIFæ ‡å‡†**ï¼šè®¾å¤‡æ ‡å‡†åŒ–æ¥å…¥

#### ğŸ¤– AIæ™ºèƒ½åˆ†æèƒ½åŠ›
```java
/**
 * AIåˆ†æç®—æ³•é…ç½®
 */
@Data
public class AIAlgorithmConfig {
    /**
     * äººè„¸è¯†åˆ«é…ç½®
     */
    private FaceRecognitionConfig faceRecognition;

    /**
     * è¡Œä¸ºåˆ†æé…ç½®
     */
    private BehaviorAnalysisConfig behaviorAnalysis;

    /**
     * å¼‚å¸¸æ£€æµ‹é…ç½®
     */
    private AnomalyDetectionConfig anomalyDetection;

    /**
     * ç›®æ ‡è·Ÿè¸ªé…ç½®
     */
    private ObjectTrackingConfig objectTracking;
}
```

## ğŸ—ï¸ å¾®æœåŠ¡æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          IOE-DREAMå¾®æœåŠ¡ç”Ÿæ€ç³»ç»Ÿ                              â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  è®¾å¤‡ç®¡ç†æ¨¡å—   â”‚     â”‚  ç”¨æˆ·æƒé™æ¨¡å—   â”‚     â”‚  äº‹ä»¶è®¢é˜…ä¸­å¿ƒ   â”‚        â”‚
â”‚  â”‚   (å…¬å…±æ¨¡å—)    â”‚     â”‚   (å…¬å…±æ¨¡å—)    â”‚     â”‚   (ä¸­å¿ƒæ¢çº½)    â”‚        â”‚
â”‚  â”‚                â”‚     â”‚                â”‚     â”‚                â”‚        â”‚
â”‚  â”‚ â€¢ è®¾å¤‡æ³¨å†Œ     â”‚     â”‚ â€¢ ç”¨æˆ·è®¤è¯     â”‚     â”‚ â€¢ äº‹ä»¶å‘å¸ƒ     â”‚        â”‚
â”‚  â”‚ â€¢ è®¾å¤‡é…ç½®     â”‚     â”‚ â€¢ æƒé™æ§åˆ¶     â”‚     â”‚ â€¢ äº‹ä»¶è®¢é˜…     â”‚        â”‚
â”‚  â”‚ â€¢ è®¾å¤‡çŠ¶æ€     â”‚â”€â”€â”€â”€â–¶â”‚ â€¢ å®‰å…¨çº§åˆ«     â”‚     â”‚ â€¢ æ•°æ®æ¨é€     â”‚â—€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â–²                       â–²                         â”‚               â”‚
â”‚         â”‚                       â”‚                         â”‚               â”‚
â”‚  è®¾å¤‡æ•°æ®è®¢é˜…                   ç”¨æˆ·æƒé™æŸ¥è¯¢              äº‹ä»¶æ¨é€         â”‚
â”‚         â”‚                       â”‚                         â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚              æ™ºèƒ½è§†é¢‘ç›‘æ§æ¨¡å— (æœ¬å¾®æœåŠ¡)                     â”‚           â”‚
â”‚  â”‚                                                             â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚           â”‚
â”‚  â”‚  â”‚  å®æ—¶ç›‘æ§   â”‚  â”‚  å½•åƒå›æ”¾   â”‚  â”‚  è¡Œä¸ºåˆ†æ   â”‚          â”‚           â”‚
â”‚  â”‚  â”‚   æœåŠ¡      â”‚  â”‚   æœåŠ¡      â”‚  â”‚   æœåŠ¡      â”‚          â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚           â”‚
â”‚  â”‚                                                             â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚           â”‚
â”‚  â”‚  â”‚  å‘Šè­¦ç®¡ç†   â”‚  â”‚  è§£ç ä¸Šå¢™   â”‚  â”‚ äº‹ä»¶è®¢é˜…æ¨é€â”‚          â”‚           â”‚
â”‚  â”‚  â”‚   æœåŠ¡      â”‚  â”‚   æœåŠ¡      â”‚  â”‚   æœåŠ¡      â”‚          â”‚           â”‚
â”‚  â”‚  â”‚(å«ç¦»çº¿å‘Šè­¦) â”‚  â”‚             â”‚  â”‚             â”‚          â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚           â”‚
â”‚  â”‚                                                             â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚           â”‚
â”‚  â”‚  â”‚  æµåª’ä½“è½¬å‘ â”‚  â”‚ æ€§èƒ½ä¼˜åŒ–æœåŠ¡â”‚                          â”‚           â”‚
â”‚  â”‚  â”‚   æœåŠ¡      â”‚  â”‚             â”‚                          â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                 â”‚                                             â”‚
â”‚                          æäº¤ä¸‹è½½ä»»åŠ¡                                     â”‚
â”‚                                 â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚              ä¸‹è½½ä¸­å¿ƒæ¨¡å—                  â”‚                             â”‚
â”‚  â”‚                                       â”‚                             â”‚
â”‚  â”‚  â€¢ è§†é¢‘ä¸‹è½½                           â”‚                             â”‚
â”‚  â”‚  â€¢ æ°´å°æ·»åŠ  (æ ¹æ®è§†é¢‘æ¨¡å—ä¼ é€’çš„é…ç½®)     â”‚                             â”‚
â”‚  â”‚  â€¢ æ–‡ä»¶ç®¡ç†                           â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº‹ä»¶è®¢é˜…ä¸­å¿ƒæ¶æ„

#### æ··åˆæ¨é€æ¨¡å¼è®¾è®¡

```mermaid
graph LR
    subgraph "å®æ—¶äº‹ä»¶æ¨é€ (ä¸»åŠ¨æ¨é€)"
        A1[æ™ºèƒ½è§†é¢‘æ¨¡å—] -->|è§¦å‘äº‹ä»¶| B1[äº‹ä»¶è®¢é˜…ä¸­å¿ƒ]
        B1 -->|æ¨é€| C1[è®¾å¤‡ç®¡ç†æ¨¡å—]
        B1 -->|æ¨é€| C2[é—¨ç¦æ§åˆ¶æ¨¡å—]
        B1 -->|æ¨é€| C3[çŸ­ä¿¡é€šçŸ¥æ¨¡å—]
        B1 -->|æ¨é€| C4[é‚®ä»¶é€šçŸ¥æ¨¡å—]
    end

    subgraph "å†å²æ•°æ®æ‹‰å– (è¢«åŠ¨æŸ¥è¯¢)"
        A2[å…¶ä»–ä¸šåŠ¡æ¨¡å—] -->|æŸ¥è¯¢è¯·æ±‚| B2[äº‹ä»¶è®¢é˜…ä¸­å¿ƒ]
        B2 -.->|è¿”å›æ•°æ®| A2
        A3[æ™ºèƒ½è§†é¢‘æ¨¡å—] -->|æŸ¥è¯¢æ•°æ®| B2
    end
```

#### äº‹ä»¶å‘å¸ƒè®¢é˜…é…ç½®
```java
/**
 * äº‹ä»¶å‘å¸ƒé…ç½®
 */
@Component
public class VideoEventPublisher {

    @Autowired
    private EventPublisher eventPublisher;

    /**
     * å‘å¸ƒå‘Šè­¦äº‹ä»¶
     */
    public void publishAlarmEvent(AlarmEvent event) {
        EventMessage message = EventMessage.builder()
            .eventType(EventType.ALARM)
            .sourceModule("video-monitor")
            .data(event)
            .priority(event.getSeverity())
            .timestamp(System.currentTimeMillis())
            .build();

        eventPublisher.publish(message);
    }

    /**
     * å‘å¸ƒè®¾å¤‡ç¦»çº¿äº‹ä»¶
     */
    public void publishDeviceOfflineEvent(DeviceOfflineEvent event) {
        EventMessage message = EventMessage.builder()
            .eventType(EventType.DEVICE_OFFLINE)
            .sourceModule("video-monitor")
            .data(event)
            .priority(EventPriority.HIGH)
            .timestamp(System.currentTimeMillis())
            .build();

        eventPublisher.publish(message);
    }
}
```

### æ¨¡å—ä¾èµ–å…³ç³»çŸ©é˜µ

| æ™ºèƒ½è§†é¢‘æ¨¡å— | ä¾èµ–æ¨¡å— | äº¤äº’æ–¹å¼ | æ•°æ®æ–¹å‘ | äº¤äº’é¢‘ç‡ |
|------------|---------|---------|---------|---------|
| å®æ—¶ç›‘æ§ | è®¾å¤‡ç®¡ç†æ¨¡å— | äº‹ä»¶è®¢é˜… | è®¾å¤‡æ•°æ® â† | å®æ—¶ |
| å®æ—¶ç›‘æ§ | ç”¨æˆ·æƒé™æ¨¡å— | APIè°ƒç”¨ | æƒé™éªŒè¯ â†’ | é«˜é¢‘ |
| å½•åƒå›æ”¾ | ä¸‹è½½ä¸­å¿ƒæ¨¡å— | ä»»åŠ¡æäº¤ | ä¸‹è½½ä»»åŠ¡ â†’ | ä¸­é¢‘ |
| å‘Šè­¦ç®¡ç† | äº‹ä»¶è®¢é˜…ä¸­å¿ƒ | äº‹ä»¶å‘å¸ƒ | å‘Šè­¦äº‹ä»¶ â†’ | å®æ—¶ |
| è¡Œä¸ºåˆ†æ | è®¾å¤‡ç®¡ç†æ¨¡å— | äº‹ä»¶è®¢é˜… | è®¾å¤‡æ•°æ® â† | å®æ—¶ |
| è§£ç ä¸Šå¢™ | è®¾å¤‡ç®¡ç†æ¨¡å— | äº‹ä»¶è®¢é˜… | è®¾å¤‡æ•°æ® â† | ä¸­é¢‘ |
| è·¨æ¨¡å—äº¤äº’ | äº‹ä»¶è®¢é˜…ä¸­å¿ƒ | æ··åˆæ¨¡å¼ | åŒå‘ | é«˜é¢‘ |

## ğŸ¯ è®¾è®¡åŸåˆ™ä½“ç³»

### 1. å®‰å…¨æ€§åŸåˆ™

#### å¤šå±‚å®‰å…¨é˜²æŠ¤
```java
/**
 * å®‰å…¨çº§åˆ«æ§åˆ¶æ³¨è§£
 */
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface SecurityLevel {
    /**
     * å®‰å…¨çº§åˆ«ä»£ç 
     */
    int value();

    /**
     * æƒé™è¦æ±‚
     */
    String[] permissions() default {};
}

/**
 * APIå®‰å…¨æ§åˆ¶ç¤ºä¾‹
 */
@RestController
@RequestMapping("/api/monitor")
public class MonitorController {

    @GetMapping("/stream/{deviceId}")
    @SecurityLevel(value = 2, permissions = {"video:monitor:view"})
    public ResponseDTO<String> getStreamUrl(@PathVariable Long deviceId) {
        // å®æ—¶è§†é¢‘æµè·å–
        return ResponseDTO.ok(videoStreamService.getStreamUrl(deviceId));
    }

    @PostMapping("/capture/{deviceId}")
    @SecurityLevel(value = 1, permissions = {"video:monitor:capture"})
    public ResponseDTO<String> captureImage(@PathVariable Long deviceId) {
        // æŠ“æ‹åŠŸèƒ½ï¼ˆæ›´é«˜çº§åˆ«å®‰å…¨æ§åˆ¶ï¼‰
        return ResponseDTO.ok(videoCaptureService.capture(deviceId));
    }
}
```

#### æ•°æ®åŠ å¯†ç­–ç•¥
- **ä¼ è¾“åŠ å¯†**ï¼šTLS 1.3ã€å›½å¯†SM4
- **å­˜å‚¨åŠ å¯†**ï¼šAES-256ã€å›½å¯†SM4
- **å¯†é’¥ç®¡ç†**ï¼šç¡¬ä»¶åŠ å¯†æœºã€å¯†é’¥è½®æ¢
- **æ•æ„Ÿæ•°æ®è„±æ•**ï¼šè§†é¢‘æ°´å°ã€éšç§ä¿æŠ¤

### 2. é«˜æ€§èƒ½åŸåˆ™

#### å¤šçº§ç¼“å­˜æ¶æ„
```java
/**
 * å¤šçº§ç¼“å­˜é…ç½®
 */
@Configuration
public class CacheConfig {

    /**
     * L1ç¼“å­˜ - æœ¬åœ°ç¼“å­˜
     */
    @Bean
    public CacheManager l1CacheManager() {
        CaffeineCacheManager cacheManager = new CaffeineCacheManager();
        cacheManager.setCaffeine(Caffeine.newBuilder()
            .maximumSize(10000)
            .expireAfterWrite(Duration.ofMinutes(10))
            .recordStats());
        return cacheManager;
    }

    /**
     * L2ç¼“å­˜ - åˆ†å¸ƒå¼ç¼“å­˜
     */
    @Bean
    public RedisTemplate<String, Object> l2CacheTemplate() {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(redisConnectionFactory());
        template.setDefaultSerializer(new GenericJackson2JsonRedisSerializer());
        return template;
    }
}
```

#### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥çŸ©é˜µ

| ä¼˜åŒ–ç­–ç•¥ | å®ç°æ–¹å¼ | æ€§èƒ½æå‡ç›®æ ‡ | æŠ€æœ¯æŒ‡æ ‡ |
|---------|---------|-------------|---------|
| **æµåª’ä½“è½¬å‘** | æµåª’ä½“æœåŠ¡å™¨é›†ç¾¤ | å‡å°‘80%ç›´è¿å‹åŠ› | æ”¯æŒ5000+è·¯å¹¶å‘ |
| **æ‡’åŠ è½½æœºåˆ¶** | æŒ‰éœ€åŠ è½½æ‘„åƒå¤´ | æå‡50%é¡µé¢åŠ è½½é€Ÿåº¦ | é¦–å±<2ç§’ |
| **åˆ†çº§è”æ–¹æ¡ˆ** | ä¼˜å…ˆçº§åˆ†çº§æ˜¾ç¤º | æ”¯æŒ5000+è·¯è®¾å¤‡ | æ™ºèƒ½è°ƒåº¦ç®—æ³• |
| **å¤šçº§ç¼“å­˜** | L1/L2/L3ç¼“å­˜æ¶æ„ | å‘½ä¸­ç‡>90% | å¹³å‡å“åº”<100ms |
| **è¯»å†™åˆ†ç¦»** | ä¸»ä»é›†ç¾¤æ¶æ„ | æå‡200%è¯»æ€§èƒ½ | è¯»QPS>10ä¸‡ |

### 3. é«˜å¯ç”¨åŸåˆ™

#### é›†ç¾¤éƒ¨ç½²é…ç½®
```yaml
# å¾®æœåŠ¡é›†ç¾¤é…ç½®
spring:
  cloud:
    loadbalancer:
      ribbon:
        NFLoadBalancerRuleClassName: com.netflix.loadbalancer.WeightedResponseTimeRule
    discovery:
      client:
        service-url:
          defaultZone: http://eureka-server:8761/eureka/

# ç†”æ–­é…ç½®
feign:
  hystrix:
    enabled: true
    command:
      default:
        execution:
          isolation:
            thread:
              timeoutInMilliseconds: 10000
        circuitBreaker:
          requestVolumeThreshold: 20
          errorThresholdPercentage: 50
          sleepWindowInMilliseconds: 5000
```

### 4. å¯æ‰©å±•åŸåˆ™

#### æ’ä»¶æœºåˆ¶è®¾è®¡
```java
/**
 * è§†é¢‘åˆ†ææ’ä»¶æ¥å£
 */
public interface VideoAnalysisPlugin {

    /**
     * æ’ä»¶åˆå§‹åŒ–
     */
    void initialize(PluginConfig config);

    /**
     * è§†é¢‘å¸§åˆ†æ
     */
    AnalysisResult analyzeFrame(VideoFrame frame);

    /**
     * æ’ä»¶é”€æ¯
     */
    void destroy();
}

/**
 * æ’ä»¶ç®¡ç†å™¨
 */
@Component
public class VideoPluginManager {

    private Map<String, VideoAnalysisPlugin> plugins = new ConcurrentHashMap<>();

    public void registerPlugin(String name, VideoAnalysisPlugin plugin) {
        plugins.put(name, plugin);
    }

    public AnalysisResult executeAnalysis(String pluginName, VideoFrame frame) {
        VideoAnalysisPlugin plugin = plugins.get(pluginName);
        return plugin != null ? plugin.analyzeFrame(frame) : null;
    }
}
```

## ğŸ“¦ æ ¸å¿ƒä¸šåŠ¡æ¨¡å—è¯¦ç»†è®¾è®¡

### 1. å®æ—¶ç›‘æ§æ¨¡å—

#### æ¨¡å—æ¶æ„
```java
/**
 * å®æ—¶ç›‘æ§æœåŠ¡
 */
@Service
@Transactional(rollbackFor = Exception.class)
public class RealTimeMonitorService {

    @Resource
    private VideoStreamManager videoStreamManager;

    @Resource
    private DeviceManager deviceManager;

    @Resource
    private CacheService cacheService;

    /**
     * è·å–å®æ—¶è§†é¢‘æµåœ°å€
     */
    @Cacheable(value = "video_stream", key = "#deviceId", unless = "#result == null")
    public ResponseDTO<Map<String, String>> getStreamUrl(Long deviceId, String protocol) {
        // 1. éªŒè¯è®¾å¤‡çŠ¶æ€
        DeviceInfo device = deviceManager.getDevice(deviceId);
        if (device == null || !device.isOnline()) {
            throw new BusinessException("è®¾å¤‡ä¸å­˜åœ¨æˆ–å·²ç¦»çº¿");
        }

        // 2. éªŒè¯ç”¨æˆ·æƒé™
        SecurityContext context = SecurityContextHolder.getContext();
        if (!hasViewPermission(context, device)) {
            throw new BusinessException("æ— æƒé™æŸ¥çœ‹è¯¥è®¾å¤‡");
        }

        // 3. è·å–è§†é¢‘æµåœ°å€
        Map<String, String> streamUrls = videoStreamManager.getStreamUrls(device, protocol);

        return ResponseDTO.ok(streamUrls);
    }

    /**
     * äº‘å°æ§åˆ¶
     */
    @SecurityLevel(value = 2, permissions = {"video:monitor:control"})
    public ResponseDTO<Void> ptzControl(PTZControlCommand command) {
        // äº‘å°æ§åˆ¶é€»è¾‘
        return videoStreamManager.ptzControl(command);
    }
}
```

#### æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½æ¨¡å— | æŠ€æœ¯å®ç° | æ€§èƒ½æŒ‡æ ‡ | å¤‡æ³¨ |
|---------|---------|---------|------|
| **å¤šç”»é¢å¸ƒå±€** | CSS Grid + Web Components | æ”¯æŒ1/4/9/16/25ç”»é¢ | è‡ªé€‚åº”å¸ƒå±€ |
| **è§†é¢‘æµåè®®** | WebRTC/RTMP/HLS/RTSP | å»¶æ—¶<500ms | è‡ªåŠ¨é™çº§ |
| **äº‘å°æ§åˆ¶** | ONVIFåè®® | å“åº”<200ms | æ”¯æŒé¢„ç½®ä½ |
| **å®æ—¶æˆªå›¾** | Canvas API | <100ms | æ”¯æŒæ‰¹é‡ |
| **ç”»é¢æ§åˆ¶** | CSS3 Transform | æµç•…åº¦60fps | ç¼©æ”¾æ—‹è½¬ |

### 2. å½•åƒå›æ”¾æ¨¡å—

#### æ—¶é—´è½´é¢„è§ˆæŠ€æœ¯
```java
/**
 * æ—¶é—´è½´é¢„è§ˆæœåŠ¡
 */
@Service
public class TimelinePreviewService {

    /**
     * ç”Ÿæˆæ—¶é—´è½´é¢„è§ˆæ•°æ®
     */
    public ResponseDTO<TimelineData> generateTimelinePreview(TimelineQuery query) {
        // 1. æŸ¥è¯¢å½•åƒæ®µ
        List<VideoSegment> segments = videoRecordDao.querySegments(query);

        // 2. ç”Ÿæˆå…³é”®å¸§ç¼©ç•¥å›¾
        List<Thumbnail> thumbnails = generateThumbnails(segments);

        // 3. æ„å»ºæ—¶é—´è½´æ•°æ®
        TimelineData timelineData = TimelineData.builder()
            .segments(segments)
            .thumbnails(thumbnails)
            .duration(calculateDuration(segments))
            .build();

        return ResponseDTO.ok(timelineData);
    }

    /**
     * æ‰¹é‡ç”Ÿæˆç¼©ç•¥å›¾
     */
    private List<Thumbnail> generateThumbnails(List<VideoSegment> segments) {
        return segments.parallelStream()
            .map(this::extractKeyFrames)
            .flatMap(List::stream)
            .map(this::createThumbnail)
            .collect(Collectors.toList());
    }
}
```

#### å½•åƒç®¡ç†åŠŸèƒ½
- **æ™ºèƒ½æ£€ç´¢**ï¼šåŸºäºæ—¶é—´ã€è®¾å¤‡ã€äº‹ä»¶ç±»å‹çš„å¤šç»´åº¦æ£€ç´¢
- **å¿«é€Ÿå®šä½**ï¼šæ—¶é—´è½´æ‹–æ‹½ã€å…³é”®å¸§é¢„è§ˆã€äº‹ä»¶æ ‡æ³¨
- **æ°´å°é…ç½®**ï¼šè‡ªå®šä¹‰æ°´å°å†…å®¹ã€ä½ç½®ã€é€æ˜åº¦
- **æ‰¹é‡æ“ä½œ**ï¼šæ‰¹é‡ä¸‹è½½ã€æ‰¹é‡åˆ é™¤ã€æ‰¹é‡å¤‡ä»½

### 3. è¡Œä¸ºåˆ†ææ¨¡å—

#### AIç®—æ³•é›†æˆæ¶æ„
```java
/**
 * AIåˆ†ææœåŠ¡
 */
@Service
public class AIAnalysisService {

    @Resource
    private List<AIAlgorithm> algorithms;

    @Resource
    private EventPublisher eventPublisher;

    /**
     * è§†é¢‘å¸§åˆ†æ
     */
    @Async
    public CompletableFuture<AnalysisResult> analyzeFrame(VideoFrame frame) {
        List<CompletableFuture<AlgorithmResult>> futures = algorithms.stream()
            .map(algorithm -> CompletableFuture.supplyAsync(() ->
                algorithm.analyze(frame)))
            .collect(Collectors.toList());

        return CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))
            .thenApply(v -> {
                List<AlgorithmResult> results = futures.stream()
                    .map(CompletableFuture::join)
                    .collect(Collectors.toList());

                return combineResults(results, frame);
            });
    }

    /**
     * å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
     */
    public void detectAnomaly(AnalysisResult result) {
        if (result.hasAnomaly()) {
            AnomalyEvent event = AnomalyEvent.builder()
                .deviceId(result.getDeviceId())
                .timestamp(result.getTimestamp())
                .anomalyType(result.getAnomalyType())
                .confidence(result.getConfidence())
                .snapshot(result.getSnapshot())
                .build();

            // å‘å¸ƒå¼‚å¸¸äº‹ä»¶
            eventPublisher.publish(event);

            // è§¦å‘è”åŠ¨æŠ“æ‹
            triggerLinkedCapture(result);
        }
    }
}
```

#### æ”¯æŒçš„AIç®—æ³•

| ç®—æ³•ç±»å‹ | æ£€æµ‹ç›®æ ‡ | å‡†ç¡®ç‡ | å“åº”æ—¶é—´ | åº”ç”¨åœºæ™¯ |
|---------|---------|-------|---------|---------|
| **äººè„¸è¯†åˆ«** | äººè„¸ç‰¹å¾åŒ¹é… | >99% | <200ms | èº«ä»½è®¤è¯ã€é»‘åå• |
| **è¡Œä¸ºåˆ†æ** | å¼‚å¸¸è¡Œä¸ºè¯†åˆ« | >95% | <500ms | å®‰å…¨é˜²èŒƒã€è¡Œä¸ºç›‘æ§ |
| **ç›®æ ‡æ£€æµ‹** | ç‰©ä½“è¯†åˆ«è·Ÿè¸ª | >98% | <300ms | ç‰©å“ç›‘æ§ã€åŒºåŸŸé˜²æŠ¤ |
| **äººæµç»Ÿè®¡** | äººæµé‡è®¡ç®— | >97% | <100ms | å®¢æµåˆ†æã€æ‹¥æŒ¤é¢„è­¦ |
| **è½¦ç‰Œè¯†åˆ«** | è½¦ç‰Œå·ç è¯†åˆ« | >99% | <150ms | åœè½¦ç®¡ç†ã€è½¦è¾†è¿½è¸ª |

### 4. å‘Šè­¦ç®¡ç†æ¨¡å—

#### å¤šçº§å‘Šè­¦å¤„ç†
```java
/**
 * å‘Šè­¦ç®¡ç†æœåŠ¡
 */
@Service
public class AlarmManagementService {

    @Resource
    private AlarmRuleEngine ruleEngine;

    @Resource
    private NotificationService notificationService;

    @Resource
    private EventPublisher eventPublisher;

    /**
     * å¤„ç†å‘Šè­¦äº‹ä»¶
     */
    @EventListener
    @Async
    public void handleAlarmEvent(AlarmEvent event) {
        try {
            // 1. å‘Šè­¦è§„åˆ™åŒ¹é…
            List<AlarmRule> matchedRules = ruleEngine.matchRules(event);

            // 2. å‘Šè­¦çº§åˆ«è¯„å®š
            AlarmLevel level = evaluateAlarmLevel(event, matchedRules);

            // 3. æ‰§è¡Œå‘Šè­¦åŠ¨ä½œ
            executeAlarmActions(event, matchedRules);

            // 4. å‘é€é€šçŸ¥
            sendNotifications(event, level);

            // 5. å‘å¸ƒå‘Šè­¦äº‹ä»¶
            eventPublisher.publish(event);

        } catch (Exception e) {
            log.error("å‘Šè­¦å¤„ç†å¤±è´¥", e);
        }
    }

    /**
     * è®¾å¤‡ç¦»çº¿æ£€æµ‹
     */
    @Scheduled(fixedDelay = 30000) // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
    public void checkDeviceOffline() {
        List<DeviceInfo> offlineDevices = deviceManager.getOfflineDevices();
        offlineDevices.forEach(device -> {
            DeviceOfflineEvent event = DeviceOfflineEvent.builder()
                .deviceId(device.getDeviceId())
                .deviceName(device.getDeviceName())
                .offlineTime(System.currentTimeMillis())
                .build();

            handleDeviceOffline(event);
        });
    }
}
```

### 5. è§£ç ä¸Šå¢™æ¨¡å—

#### å¤§å±æ§åˆ¶æ¶æ„
```java
/**
 * è§£ç ä¸Šå¢™æœåŠ¡
 */
@Service
public class VideoWallService {

    @Resource
    private DecoderManager decoderManager;

    @Resource
    private DisplayLayoutManager layoutManager;

    /**
     * è§†é¢‘ä¸Šå¢™æ˜¾ç¤º
     */
    public ResponseDTO<Void> displayOnWall(VideoWallCommand command) {
        // 1. éªŒè¯è§£ç å™¨çŠ¶æ€
        DecoderInfo decoder = decoderManager.getDecoder(command.getDecoderId());
        if (decoder == null || !decoder.isOnline()) {
            throw new BusinessException("è§£ç å™¨ä¸å¯ç”¨");
        }

        // 2. é…ç½®æ˜¾ç¤ºå¸ƒå±€
        DisplayLayout layout = layoutManager.createLayout(command);

        // 3. è§†é¢‘æµè§£ç è¾“å‡º
        VideoStream stream = videoStreamManager.getStream(command.getDeviceId());
        decoder.decodeAndOutput(stream, layout);

        return ResponseDTO.ok();
    }

    /**
     * å¤šå±è”åŠ¨æ§åˆ¶
     */
    public void synchronizedControl(SyncControlCommand command) {
        List<DecoderInfo> decoders = command.getDecoderIds().stream()
            .map(decoderManager::getDecoder)
            .filter(Objects::nonNull)
            .collect(Collectors.toList());

        // åŒæ­¥æ§åˆ¶æ‰€æœ‰è§£ç å™¨
        decoders.forEach(decoder -> {
            decoder.executeCommand(command.getOperation());
        });
    }
}
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡ä½“ç³»

### å“åº”æ—¶é—´æŒ‡æ ‡

| æ“ä½œç±»å‹ | ç›®æ ‡å“åº”æ—¶é—´ | å¯æ¥å—å“åº”æ—¶é—´ | ä¼˜åŒ–ç­–ç•¥ |
|---------|-------------|---------------|---------|
| é¡µé¢åŠ è½½ | < 2ç§’ | < 5ç§’ | æ‡’åŠ è½½ã€CDNåŠ é€Ÿ |
| å®æ—¶é¢„è§ˆ | < 1ç§’ | < 3ç§’ | WebRTCã€æµåª’ä½“è½¬å‘ |
| **è”åŠ¨æŠ“æ‹å“åº”** | **< 200ms** | **< 500ms** | è¾¹ç¼˜è®¡ç®—ã€é¢„è¿æ¥ |
| å½•åƒæŸ¥è¯¢ | < 3ç§’ | < 8ç§’ | ç´¢å¼•ä¼˜åŒ–ã€åˆ†åº“åˆ†è¡¨ |
| å½•åƒå›æ”¾ | < 2ç§’ | < 5ç§’ | é¢„åŠ è½½ã€ç¼“å­˜ç­–ç•¥ |
| **æ—¶é—´è½´é¢„è§ˆç”Ÿæˆ** | **< 1ç§’** | **< 3ç§’** | å¹¶è¡Œå¤„ç†ã€ç¼©ç•¥å›¾ç¼“å­˜ |
| å‘Šè­¦å“åº” | < 0.5ç§’ | < 2ç§’ | äº‹ä»¶é©±åŠ¨ã€ä¼˜å…ˆçº§é˜Ÿåˆ— |

### å¹¶å‘æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ç±»å‹ | ç›®æ ‡å€¼ | æœ€å¤§å€¼ | æ‰©å±•æ–¹æ¡ˆ |
|---------|-------|-------|---------|
| åŒæ—¶åœ¨çº¿ç”¨æˆ· | 500 | 1000 | æ°´å¹³æ‰©å±•WebæœåŠ¡ |
| **åŒæ—¶é¢„è§ˆç”»é¢** | **2000** | **5000** | æµåª’ä½“é›†ç¾¤ã€è´Ÿè½½å‡è¡¡ |
| **å¤§è§„æ¨¡æ‘„åƒå¤´æ¥å…¥** | **1000è·¯** | **5000è·¯** | åˆ†çº§æ¥å…¥ã€è¾¹ç¼˜è®¡ç®— |
| åŒæ—¶å›æ”¾è·¯æ•° | 500 | 1000 | å­˜å‚¨ä¼˜åŒ–ã€å¹¶å‘æ§åˆ¶ |
| å‘Šè­¦å¹¶å‘å¤„ç† | 1000 | 2000 | å¼‚æ­¥å¤„ç†ã€é˜Ÿåˆ—å‰Šå³° |
| APIå¹¶å‘è¯·æ±‚ | 2000 | 5000 | æœåŠ¡ç½‘æ ¼ã€é™æµç†”æ–­ |

### å­˜å‚¨æ€§èƒ½æŒ‡æ ‡

| å­˜å‚¨ç±»å‹ | å®¹é‡è§„åˆ’ | æ€§èƒ½è¦æ±‚ | æŠ€æœ¯é€‰å‹ |
|---------|---------|---------|---------|
| **æ•°æ®åº“å­˜å‚¨** | 10TB | 10ä¸‡QPS | PostgreSQLé›†ç¾¤ |
| **ç¼“å­˜å­˜å‚¨** | 100GB | 50ä¸‡QPS | Redis Cluster |
| **æ–‡ä»¶å­˜å‚¨** | 100TB | 1ä¸‡QPS | åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ |
| **å½•åƒå­˜å‚¨** | 1PB | 5åƒè·¯å¹¶å‘ | è§†é¢‘ä¸“ç”¨å­˜å‚¨ |

## ğŸš€ éƒ¨ç½²æ¶æ„æ–¹æ¡ˆ

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ‹“æ‰‘

```mermaid
graph TB
    subgraph "è´Ÿè½½å‡è¡¡å±‚"
        LB1[Nginxè´Ÿè½½å‡è¡¡]
        LB2[HAProxyè´Ÿè½½å‡è¡¡]
        LB3[F5ç¡¬ä»¶è´Ÿè½½]
    end

    subgraph "åº”ç”¨æœåŠ¡å±‚"
        WEB1[Webå‰ç«¯é›†ç¾¤]
        WEB2[Webå‰ç«¯é›†ç¾¤]
        API1[APIç½‘å…³é›†ç¾¤]
        API2[APIç½‘å…³é›†ç¾¤]
        MS1[å¾®æœåŠ¡é›†ç¾¤]
        MS2[å¾®æœåŠ¡é›†ç¾¤]
        AI[AIæœåŠ¡é›†ç¾¤]
        MQ[æ¶ˆæ¯é˜Ÿåˆ—é›†ç¾¤]
    end

    subgraph "æ•°æ®å­˜å‚¨å±‚"
        DB1[ä¸»æ•°æ®åº“]
        DB2[ä»æ•°æ®åº“é›†ç¾¤]
        CACHE[ç¼“å­˜é›†ç¾¤]
        STORAGE[å¯¹è±¡å­˜å‚¨]
        SEARCH[æœç´¢å¼•æ“]
    end

    subgraph "è®¾å¤‡æ¥å…¥å±‚"
        VIDEO[è§†é¢‘ç›‘æ§è®¾å¤‡ç½‘]
        RECORD[å½•åƒå­˜å‚¨ç½‘]
        DISPLAY[æ˜¾ç¤ºæ‹¼æ¥è®¾å¤‡ç½‘]
        MGNT[ç®¡ç†ç½‘]
        IOT[ç‰©è”ç½‘ç½‘ç»œ]
    end

    LB1 --> WEB1
    LB2 --> API1
    API1 --> MS1
    MS1 --> DB1
    MS1 --> CACHE
    DB1 --> DB2
```

### å®¹å™¨åŒ–éƒ¨ç½²é…ç½®

#### Docker Composeé…ç½®
```yaml
version: '3.8'
services:
  # æ™ºèƒ½è§†é¢‘ç›‘æ§æœåŠ¡
  video-monitor-service:
    image: ioe-dream/video-monitor:v4.0
    deploy:
      replicas: 3
      resources:
        limits:
          cpus: '2.0'
          memory: 4G
        reservations:
          cpus: '1.0'
          memory: 2G
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - EUREKA_SERVER=http://eureka:8761/eureka
      - REDIS_HOST=redis-cluster
      - DB_HOST=postgresql-master
    ports:
      - "8080:8080"
    depends_on:
      - eureka
      - redis-cluster
      - postgresql-master
    networks:
      - video-network

  # æµåª’ä½“æœåŠ¡
  streaming-server:
    image: ioe-dream/streaming-server:v4.0
    deploy:
      replicas: 2
    environment:
      - MAX_STREAMS=1000
      - RTMP_PORT=1935
      - WEBRTC_PORT=8080
    ports:
      - "1935:1935"
      - "8081:8080"
    networks:
      - video-network

  # AIåˆ†ææœåŠ¡
  ai-analysis-service:
    image: ioe-dream/ai-analysis:v4.0
    deploy:
      replicas: 2
    environment:
      - MODEL_PATH=/models
      - GPU_ENABLED=true
    volumes:
      - ./models:/models
    networks:
      - video-network

networks:
  video-network:
    driver: overlay
```

#### Kuberneteséƒ¨ç½²æ¸…å•
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: video-monitor-deployment
  namespace: video-system
spec:
  replicas: 3
  selector:
    matchLabels:
      app: video-monitor
  template:
    metadata:
      labels:
        app: video-monitor
    spec:
      containers:
      - name: video-monitor
        image: ioe-dream/video-monitor:v4.0
        ports:
        - containerPort: 8080
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "prod"
        - name: EUREKA_SERVER
          value: "http://eureka-service:8761/eureka"
        resources:
          requests:
            memory: "2Gi"
            cpu: "1000m"
          limits:
            memory: "4Gi"
            cpu: "2000m"
        livenessProbe:
          httpGet:
            path: /actuator/health
            port: 8080
          initialDelaySeconds: 60
          periodSeconds: 30
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
---
apiVersion: v1
kind: Service
metadata:
  name: video-monitor-service
  namespace: video-system
spec:
  selector:
    app: video-monitor
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8080
  type: LoadBalancer
```

### ç›‘æ§ä¸è¿ç»´

#### Prometheusç›‘æ§é…ç½®
```yaml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'video-monitor'
    static_configs:
      - targets: ['video-monitor:8080']
    metrics_path: '/actuator/prometheus'
    scrape_interval: 10s

  - job_name: 'streaming-server'
    static_configs:
      - targets: ['streaming-server:1935']
    metrics_path: '/metrics'
    scrape_interval: 5s

rule_files:
  - "video-monitor-rules.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093
```

#### Grafana Dashboardç›‘æ§æŒ‡æ ‡
```json
{
  "dashboard": {
    "title": "æ™ºèƒ½è§†é¢‘ç›‘æ§ç³»ç»Ÿ",
    "panels": [
      {
        "title": "å®æ—¶è§†é¢‘æµæ•°é‡",
        "type": "stat",
        "targets": [
          {
            "expr": "sum(video_streams_active)",
            "legendFormat": "æ´»è·ƒè§†é¢‘æµ"
          }
        ]
      },
      {
        "title": "å‘Šè­¦äº‹ä»¶è¶‹åŠ¿",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(alarm_events_total[5m])",
            "legendFormat": "å‘Šè­¦é€Ÿç‡"
          }
        ]
      },
      {
        "title": "AIåˆ†ææ€§èƒ½",
        "type": "graph",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(ai_analysis_duration_seconds_bucket[5m]))",
            "legendFormat": "95%åˆ†æå»¶æ—¶"
          }
        ]
      }
    ]
  }
}
```

## ğŸ“ æ€»ç»“ä¸è§„åˆ’

### æŠ€æœ¯æ¶æ„æ€»ç»“

IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°çš„æ™ºèƒ½è§†é¢‘ç›‘æ§ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„å¾®æœåŠ¡æ¶æ„ï¼Œå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼š

#### âœ… æ¶æ„ä¼˜åŠ¿
1. **å¾®æœåŠ¡åŒ–è®¾è®¡**ï¼šæœåŠ¡æ‹†åˆ†åˆç†ï¼ŒèŒè´£æ¸…æ™°ï¼Œä¾¿äºç‹¬ç«‹éƒ¨ç½²æ‰©å±•
2. **äº‹ä»¶é©±åŠ¨æ¶æ„**ï¼šé€šè¿‡äº‹ä»¶è®¢é˜…ä¸­å¿ƒå®ç°æ¾è€¦åˆçš„æ¨¡å—é—´é€šä¿¡
3. **å¤šçº§å®‰å…¨é˜²æŠ¤**ï¼šäº”çº§å®‰å…¨ä½“ç³»ç¡®ä¿æ•°æ®å’Œç³»ç»Ÿå®‰å…¨
4. **é«˜æ€§èƒ½ä¼˜åŒ–**ï¼šæµåª’ä½“è½¬å‘ã€å¤šçº§ç¼“å­˜ã€æ‡’åŠ è½½ç­‰ä¼˜åŒ–ç­–ç•¥
5. **AIæ™ºèƒ½åŒ–**ï¼šé›†æˆå¤šç§AIç®—æ³•ï¼Œå®ç°æ™ºèƒ½åˆ†æå’Œé¢„è­¦

#### âœ… æŠ€æœ¯ç‰¹è‰²
1. **å¤šåè®®æ”¯æŒ**ï¼šRTSPã€RTMPã€HLSã€WebRTCå…¨åè®®è¦†ç›–
2. **å®æ—¶æ€§èƒ½**ï¼šè”åŠ¨æŠ“æ‹<200msï¼Œè§†é¢‘å»¶æ—¶<500ms
3. **å¤§è§„æ¨¡å¹¶å‘**ï¼šæ”¯æŒ1000+è·¯æ‘„åƒå¤´ï¼Œ5000+å¹¶å‘ç”»é¢
4. **äº‘åŸç”Ÿéƒ¨ç½²**ï¼šæ”¯æŒDockerã€Kubernetesç­‰å®¹å™¨åŒ–éƒ¨ç½²
5. **å¯æ‰©å±•æ¶æ„**ï¼šæ’ä»¶æœºåˆ¶æ”¯æŒç®—æ³•å’ŒåŠŸèƒ½çš„çµæ´»æ‰©å±•

### åç»­å‘å±•è§„åˆ’

#### çŸ­æœŸè§„åˆ’ï¼ˆ3-6ä¸ªæœˆï¼‰
- [ ] å®Œæˆæ ¸å¿ƒåŠŸèƒ½æ¨¡å—å¼€å‘å’Œæµ‹è¯•
- [ ] å®ç°åŸºç¡€çš„AIç®—æ³•é›†æˆ
- [ ] å®Œæˆç³»ç»Ÿéƒ¨ç½²å’Œè¿ç»´é…ç½®
- [ ] å¼€å±•å°è§„æ¨¡è¯•ç‚¹åº”ç”¨

#### ä¸­æœŸè§„åˆ’ï¼ˆ6-12ä¸ªæœˆï¼‰
- [ ] æ‰©å±•AIç®—æ³•ç§ç±»å’Œç²¾åº¦
- [ ] ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§
- [ ] å¢åŠ å¤§æ•°æ®åˆ†æåŠŸèƒ½
- [ ] å®Œå–„ç§»åŠ¨ç«¯æ”¯æŒ

#### é•¿æœŸè§„åˆ’ï¼ˆ1-2å¹´ï¼‰
- [ ] é›†æˆ5Gç½‘ç»œä¼˜åŒ–è§†é¢‘ä¼ è¾“
- [ ] å¼•å…¥è¾¹ç¼˜è®¡ç®—é™ä½å»¶æ—¶
- [ ] å®ç°è·¨å›­åŒºè§†é¢‘ç›‘æ§è”åŠ¨
- [ ] å¼€å‘è§†é¢‘æ•°æ®ä»·å€¼æŒ–æ˜åº”ç”¨

---

*æœ¬æ–‡æ¡£å°†éšç€é¡¹ç›®è¿›å±•æŒç»­æ›´æ–°å®Œå–„ï¼Œç¡®ä¿æŠ€æœ¯æ¶æ„ä¸ä¸šåŠ¡éœ€æ±‚ä¿æŒåŒæ­¥æ¼”è¿›ã€‚*