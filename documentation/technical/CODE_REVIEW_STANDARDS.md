# 代码审查标准

> **创建时间**: 2025-11-20  
> **规范基准**: repowiki规范体系  
> **适用范围**: IOE-DREAM项目所有代码审查工作

---

## 📋 审查标准说明

本审查标准基于 `D:\IOE-DREAM\docs\repowiki` 下的权威规范文档制定，确保代码审查工作100%符合企业级开发标准。

---

## 🔴 一级审查项：必须拒绝（阻塞合并）

### 编码规范违规
- ❌ **非UTF-8编码**: 发现非UTF-8编码文件 → **拒绝合并**
- ❌ **BOM标记**: 发现UTF-8 BOM标记 → **拒绝合并**
- ❌ **乱码字符**: 发现乱码字符 → **拒绝合并**
- ❌ **javax包使用**: 发现javax包使用（EE命名空间）→ **拒绝合并**
- ❌ **@Autowired使用**: 发现@Autowired使用 → **拒绝合并**

### 架构规范违规
- ❌ **Controller直接访问DAO**: 发现Controller层直接访问DAO → **拒绝合并**
- ❌ **Engine直接访问DAO**: 发现Engine层直接访问DAO → **拒绝合并**
- ❌ **事务边界错误**: 发现Manager层管理事务 → **拒绝合并**

### 编译规范违规
- ❌ **编译失败**: 代码无法编译 → **拒绝合并**
- ❌ **编译错误**: 存在编译错误 → **拒绝合并**

---

## 🟡 二级审查项：要求修复（限期修复）

### 代码质量违规
- ⚠️ **System.out使用**: 发现System.out.println → **要求修复**
- ⚠️ **缺少异常处理**: 缺少统一异常处理 → **要求修复**
- ⚠️ **缺少参数验证**: 缺少@Valid参数校验 → **要求修复**
- ⚠️ **缺少权限控制**: 缺少@SaCheckPermission → **要求修复**

### 数据库规范违规
- ⚠️ **表命名不规范**: 不符合t_{business}_{entity}格式 → **要求修复**
- ⚠️ **缺少审计字段**: 缺少create_time/update_time等 → **要求修复**
- ⚠️ **物理删除**: 使用物理删除而非软删除 → **要求修复**

### 命名规范违规
- ⚠️ **包名不规范**: 不符合net.lab1024.sa.{module}.{layer}格式 → **要求修复**
- ⚠️ **类名不规范**: 不符合命名规范 → **要求修复**
- ⚠️ **方法名不规范**: 不符合命名规范 → **要求修复**

---

## 🟢 三级审查项：建议优化（择机优化）

### 代码组织
- 💡 **单一职责**: 类或方法职责过多 → **建议优化**
- 💡 **代码重复**: 存在重复代码 → **建议优化**
- 💡 **注释缺失**: 重要方法缺少注释 → **建议优化**
- 💡 **测试缺失**: 核心业务逻辑缺少测试 → **建议优化**

### 性能优化
- 💡 **缓存使用**: 未合理使用缓存 → **建议优化**
- 💡 **批量操作**: 未使用批量方法 → **建议优化**
- 💡 **索引优化**: 数据库查询未使用索引 → **建议优化**

---

## 📊 审查流程

### 1. 自动化检查
```bash
# 执行自动化检查
./scripts/compile-error-check.sh
./scripts/architecture-compliance-check.sh
./scripts/enforce-standards.sh
```

### 2. 人工审查
- 检查代码逻辑是否正确
- 检查业务规则是否符合需求
- 检查异常处理是否完善
- 检查性能是否满足要求

### 3. 审查结果
- **通过**: 所有检查项通过，可以合并
- **需要修复**: 存在二级或三级问题，限期修复
- **拒绝**: 存在一级问题，必须修复后重新审查

---

## 🔧 审查工具

### 自动化检查工具
- `scripts/compile-error-check.sh` - 编译错误检查
- `scripts/architecture-compliance-check.sh` - 架构合规检查
- `scripts/enforce-standards.sh` - 规范检查
- `scripts/quick-check.sh` - 快速检查

### IDE检查
- IntelliJ IDEA实时代码检查
- 编译错误即时提示
- 代码格式化检查

### 代码质量工具
- SonarQube代码质量分析
- Maven依赖检查
- 单元测试覆盖率检查

---

## 📋 审查清单模板

### 代码审查清单

#### 一级检查项（必须通过）
- [ ] UTF-8编码（无BOM）
- [ ] 无乱码字符
- [ ] jakarta包名（无javax）
- [ ] @Resource依赖注入（无@Autowired）
- [ ] 四层架构合规
- [ ] 编译成功（无错误）

#### 二级检查项（应该通过）
- [ ] SLF4J日志（无System.out）
- [ ] 异常处理完善
- [ ] 参数验证完整
- [ ] 权限控制完整
- [ ] 数据库规范符合
- [ ] 命名规范符合

#### 三级检查项（建议通过）
- [ ] 单一职责原则
- [ ] 代码复用良好
- [ ] 注释完整
- [ ] 单元测试覆盖
- [ ] 性能优化合理

---

## 📚 相关文档

- **[规范遵循检查清单](docs/STANDARDS_COMPLIANCE_CHECKLIST.md)** - 详细检查清单
- **[综合开发规范文档](docs/DEV_STANDARDS.md)** - 完整编码标准
- **[架构设计规范](docs/ARCHITECTURE_STANDARDS.md)** - 四层架构设计标准

---

**最后更新**: 2025-11-20  
**维护者**: SmartAdmin规范治理委员会

