# æ¶ˆè´¹ç®¡ç†æ¨¡å—è·¯ç”±é…ç½®è¯´æ˜

## ğŸ¯ SmartAdmin æ”¯æŒä¸¤ç§è·¯ç”±é…ç½®æ–¹å¼

---

## æ–¹å¼ä¸€ï¼šåŠ¨æ€è·¯ç”±ï¼ˆæ¨è â­ï¸ï¼‰

### é€‚ç”¨åœºæ™¯
- âœ… ç”Ÿäº§ç¯å¢ƒ
- âœ… éœ€è¦æƒé™æ§åˆ¶
- âœ… å¤šè§’è‰²å¤šæƒé™ç³»ç»Ÿ

### é…ç½®æ­¥éª¤

#### 1. åç«¯æ•°æ®åº“é…ç½®èœå•

åœ¨åç«¯æ•°æ®åº“çš„ `t_menu` è¡¨ä¸­æ’å…¥èœå•æ•°æ®ï¼š

```sql
-- 1. æ¶ˆè´¹ç®¡ç†ä¸€çº§ç›®å½•
INSERT INTO `t_menu` (
  `menu_name`, 
  `menu_type`, 
  `parent_id`, 
  `sort`, 
  `path`, 
  `component`, 
  `perms_type`, 
  `api_perms`, 
  `web_perms`, 
  `icon`, 
  `context_menu_id`, 
  `frame_flag`, 
  `frame_url`, 
  `cache_flag`, 
  `visible_flag`, 
  `disabled_flag`
) VALUES (
  'æ¶ˆè´¹ç®¡ç†',           -- èœå•åç§°
  1,                    -- èœå•ç±»å‹ï¼š1=ç›®å½•ï¼Œ2=èœå•ï¼Œ3=åŠŸèƒ½ç‚¹
  0,                    -- çˆ¶çº§IDï¼ˆ0è¡¨ç¤ºé¡¶çº§ï¼‰
  100,                  -- æ’åº
  NULL,                 -- è·¯ç”±è·¯å¾„ï¼ˆç›®å½•å¯ä¸ºç©ºï¼‰
  NULL,                 -- ç»„ä»¶è·¯å¾„ï¼ˆç›®å½•å¯ä¸ºç©ºï¼‰
  1,                    -- æƒé™ç±»å‹ï¼š1=Sa-Token
  NULL,                 -- åç«¯æƒé™æ ‡è¯†
  NULL,                 -- å‰ç«¯æƒé™æ ‡è¯†
  'ShoppingOutlined',   -- å›¾æ ‡
  NULL,                 -- å³é”®èœå•ID
  0,                    -- æ˜¯å¦å¤–é“¾ï¼š0=å¦ï¼Œ1=æ˜¯
  NULL,                 -- å¤–é“¾åœ°å€
  0,                    -- æ˜¯å¦ç¼“å­˜ï¼š0=å¦ï¼Œ1=æ˜¯
  1,                    -- æ˜¯å¦å¯è§ï¼š0=å¦ï¼Œ1=æ˜¯
  0                     -- æ˜¯å¦ç¦ç”¨ï¼š0=å¦ï¼Œ1=æ˜¯
);

-- 2. æ•°æ®æ€»è§ˆèœå•ï¼ˆå‡è®¾ä¸Šé¢æ’å…¥åçš„ menu_id æ˜¯ 1001ï¼‰
INSERT INTO `t_menu` (
  `menu_name`, 
  `menu_type`, 
  `parent_id`, 
  `sort`, 
  `path`, 
  `component`, 
  `perms_type`, 
  `api_perms`, 
  `web_perms`, 
  `icon`, 
  `context_menu_id`, 
  `frame_flag`, 
  `frame_url`, 
  `cache_flag`, 
  `visible_flag`, 
  `disabled_flag`
) VALUES (
  'æ•°æ®æ€»è§ˆ',                                               -- èœå•åç§°
  2,                                                        -- èœå•ç±»å‹ï¼š2=èœå•
  1001,                                                     -- çˆ¶çº§IDï¼ˆæ¶ˆè´¹ç®¡ç†ç›®å½•çš„IDï¼‰
  1,                                                        -- æ’åº
  '/business/consumption/dashboard',                        -- è·¯ç”±è·¯å¾„ â­ï¸
  '/business/consumption/dashboard/index.vue',              -- ç»„ä»¶è·¯å¾„ â­ï¸
  1,                                                        -- æƒé™ç±»å‹
  NULL,                                                     -- åç«¯æƒé™ï¼ˆå¯é€‰ï¼‰
  'business:consumption:dashboard:query',                   -- å‰ç«¯æƒé™ï¼ˆå¯é€‰ï¼‰
  'DashboardOutlined',                                      -- å›¾æ ‡
  NULL,                                                     -- å³é”®èœå•ID
  0,                                                        -- æ˜¯å¦å¤–é“¾
  NULL,                                                     -- å¤–é“¾åœ°å€
  1,                                                        -- æ˜¯å¦ç¼“å­˜ â­ï¸
  1,                                                        -- æ˜¯å¦å¯è§
  0                                                         -- æ˜¯å¦ç¦ç”¨
);

-- 3. åŠŸèƒ½ç‚¹é…ç½®ï¼ˆå¯é€‰ï¼‰
INSERT INTO `t_menu` (
  `menu_name`, 
  `menu_type`, 
  `parent_id`, 
  `sort`, 
  `path`, 
  `component`, 
  `perms_type`, 
  `api_perms`, 
  `web_perms`, 
  `icon`, 
  `context_menu_id`, 
  `frame_flag`, 
  `frame_url`, 
  `cache_flag`, 
  `visible_flag`, 
  `disabled_flag`
) VALUES (
  'æŸ¥è¯¢ç»Ÿè®¡æ•°æ®',                                           -- åŠŸèƒ½ç‚¹åç§°
  3,                                                        -- èœå•ç±»å‹ï¼š3=åŠŸèƒ½ç‚¹
  1002,                                                     -- çˆ¶çº§IDï¼ˆæ•°æ®æ€»è§ˆçš„IDï¼‰
  1,                                                        -- æ’åº
  NULL,                                                     -- è·¯ç”±è·¯å¾„ï¼ˆåŠŸèƒ½ç‚¹ä¸éœ€è¦ï¼‰
  NULL,                                                     -- ç»„ä»¶è·¯å¾„ï¼ˆåŠŸèƒ½ç‚¹ä¸éœ€è¦ï¼‰
  1,                                                        -- æƒé™ç±»å‹
  '/consumption/dashboard/stats',                           -- åç«¯æ¥å£æƒé™ â­ï¸
  'business:consumption:dashboard:query',                   -- å‰ç«¯æƒé™æ ‡è¯† â­ï¸
  NULL,                                                     -- å›¾æ ‡
  NULL,                                                     -- å³é”®èœå•ID
  0,                                                        -- æ˜¯å¦å¤–é“¾
  NULL,                                                     -- å¤–é“¾åœ°å€
  0,                                                        -- æ˜¯å¦ç¼“å­˜
  1,                                                        -- æ˜¯å¦å¯è§
  0                                                         -- æ˜¯å¦ç¦ç”¨
);
```

#### 2. åˆ†é…èœå•ç»™è§’è‰²

åœ¨ `t_role_menu` è¡¨ä¸­å…³è”è§’è‰²å’Œèœå•ï¼š

```sql
-- å‡è®¾è§’è‰²IDä¸º 1ï¼ˆç®¡ç†å‘˜ï¼‰
INSERT INTO `t_role_menu` (`role_id`, `menu_id`) VALUES (1, 1001); -- æ¶ˆè´¹ç®¡ç†ç›®å½•
INSERT INTO `t_role_menu` (`role_id`, `menu_id`) VALUES (1, 1002); -- æ•°æ®æ€»è§ˆ
INSERT INTO `t_role_menu` (`role_id`, `menu_id`) VALUES (1, 1003); -- æŸ¥è¯¢ç»Ÿè®¡æ•°æ®åŠŸèƒ½ç‚¹
```

#### 3. å‰ç«¯è‡ªåŠ¨ç”Ÿæˆè·¯ç”±

SmartAdmin ä¼šåœ¨ç”¨æˆ·ç™»å½•æ—¶ï¼š
1. ä»åç«¯è·å–ç”¨æˆ·çš„èœå•æƒé™
2. è°ƒç”¨ `buildRoutes()` æ–¹æ³•è‡ªåŠ¨ç”Ÿæˆè·¯ç”±
3. åŠ¨æ€æ·»åŠ åˆ° Vue Router

**æ— éœ€ä»»ä½•å‰ç«¯ä»£ç ä¿®æ”¹ï¼** ğŸ‰

---

## æ–¹å¼äºŒï¼šé™æ€è·¯ç”±ï¼ˆä»…å¼€å‘æµ‹è¯•ç”¨ï¼‰

### é€‚ç”¨åœºæ™¯
- âœ… å¼€å‘é˜¶æ®µå¿«é€Ÿæµ‹è¯•
- âœ… ä¸éœ€è¦æƒé™æ§åˆ¶çš„é¡µé¢
- âŒ ä¸æ¨èç”Ÿäº§ç¯å¢ƒä½¿ç”¨

### é…ç½®æ­¥éª¤

#### 1. åœ¨ `src/router/routers.js` ä¸­å¼•å…¥

```javascript
import { consumptionRouters } from './business/consumption';

export const routerArray = [
    ...loginRouters,
    ...homeRouters, 
    ...helpDocRouters,
    ...consumptionRouters,  // â­ï¸ æ·»åŠ è¿™ä¸€è¡Œ
    { path: '/:pathMatch(.*)*', name: '404', component: NotFound },
    { path: '/403', name: '403', component: NoPrivilege }
];
```

#### 2. ä¿®æ”¹èœå•é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦åœ¨ä¾§è¾¹æ æ˜¾ç¤ºï¼Œéœ€è¦åœ¨ç”¨æˆ·ç™»å½•åçš„èœå•æ•°æ®ä¸­æ·»åŠ ï¼ˆé€šå¸¸åœ¨åç«¯è¿”å›ï¼‰ã€‚

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•æ–¹æ³•

### å¼€å‘é˜¶æ®µä¸´æ—¶æµ‹è¯•

ç›´æ¥åœ¨æµè§ˆå™¨åœ°å€æ è®¿é—®ï¼š

```
http://localhost/#/business/consumption/dashboard
```

æˆ–åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š

```javascript
import { useRouter } from 'vue-router';

const router = useRouter();

// è·³è½¬åˆ° Dashboard
router.push('/business/consumption/dashboard');
```

---

## ğŸ“‹ å…³é”®å­—æ®µè¯´æ˜

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `menu_name` | èœå•åç§° | 'æ•°æ®æ€»è§ˆ' |
| `menu_type` | èœå•ç±»å‹ | 1=ç›®å½•ï¼Œ2=èœå•ï¼Œ3=åŠŸèƒ½ç‚¹ |
| `parent_id` | çˆ¶çº§èœå•ID | 0=é¡¶çº§ï¼Œå…¶ä»–=çˆ¶çº§ID |
| `path` | å‰ç«¯è·¯ç”±è·¯å¾„ | '/business/consumption/dashboard' |
| `component` | Vueç»„ä»¶è·¯å¾„ | '/business/consumption/dashboard/index.vue' |
| `icon` | Ant Design å›¾æ ‡å | 'DashboardOutlined' |
| `cache_flag` | æ˜¯å¦ç¼“å­˜é¡µé¢ | 1=æ˜¯ï¼Œ0=å¦ |
| `visible_flag` | æ˜¯å¦åœ¨èœå•æ˜¾ç¤º | 1=æ˜¾ç¤ºï¼Œ0=éšè— |
| `disabled_flag` | æ˜¯å¦ç¦ç”¨ | 0=å¯ç”¨ï¼Œ1=ç¦ç”¨ |
| `web_perms` | å‰ç«¯æƒé™æ ‡è¯† | 'business:consumption:dashboard:query' |
| `api_perms` | åç«¯æ¥å£æƒé™ | '/consumption/dashboard/stats' |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç»„ä»¶è·¯å¾„è§„åˆ™

```javascript
// âœ… æ­£ç¡®ï¼šç›¸å¯¹äº views ç›®å½•
component: '/business/consumption/dashboard/index.vue'

// âŒ é”™è¯¯ï¼šä¸è¦åŠ  src æˆ– views
component: '/src/views/business/consumption/dashboard/index.vue'

// âŒ é”™è¯¯ï¼šä¸è¦åŠ  /@/
component: '/@/views/business/consumption/dashboard/index.vue'
```

### 2. è·¯ç”±è·¯å¾„è§„åˆ™

```javascript
// âœ… æ­£ç¡®ï¼šå¿…é¡»ä»¥ / å¼€å¤´
path: '/business/consumption/dashboard'

// âŒ é”™è¯¯ï¼šä¸è¦é—æ¼å¼€å¤´çš„ /
path: 'business/consumption/dashboard'
```

### 3. èœå•ç±»å‹åŒºåˆ«

- **ç›®å½•ï¼ˆ1ï¼‰**ï¼šåªåšåˆ†ç»„ï¼Œä¸å…³è”é¡µé¢
- **èœå•ï¼ˆ2ï¼‰**ï¼šå…³è”å…·ä½“é¡µé¢ï¼Œæœ‰ path å’Œ component
- **åŠŸèƒ½ç‚¹ï¼ˆ3ï¼‰**ï¼šé¡µé¢å†…çš„æŒ‰é’®æƒé™ï¼Œä¸åœ¨èœå•æ˜¾ç¤º

---

## ğŸ” æƒé™æ§åˆ¶ä½¿ç”¨

åœ¨é¡µé¢ä¸­ä½¿ç”¨æƒé™æŒ‡ä»¤ï¼š

```vue
<template>
  <!-- æŒ‰é’®æƒé™æ§åˆ¶ -->
  <a-button v-privilege="'business:consumption:dashboard:query'">
    æŸ¥è¯¢
  </a-button>
  
  <!-- å¤šä¸ªæƒé™ï¼ˆæ»¡è¶³ä¸€ä¸ªå³å¯ï¼‰ -->
  <a-button v-privilege="['business:consumption:dashboard:add', 'business:consumption:dashboard:edit']">
    ç¼–è¾‘
  </a-button>
</template>
```

åœ¨ä»£ç ä¸­åˆ¤æ–­æƒé™ï¼š

```javascript
import { $smartEnumPlugin } from '/@/plugins/smart-enums-plugin';

// åˆ¤æ–­æ˜¯å¦æœ‰æƒé™
if ($smartEnumPlugin.checkPermission('business:consumption:dashboard:query')) {
  // æœ‰æƒé™
}
```

---

## ğŸ“ æ€»ç»“

### å¼€å‘é˜¶æ®µ
1. ä½¿ç”¨é™æ€è·¯ç”±å¿«é€Ÿæµ‹è¯•
2. ç›´æ¥è®¿é—® URL æŸ¥çœ‹é¡µé¢æ•ˆæœ

### ç”Ÿäº§ç¯å¢ƒ
1. åç«¯æ•°æ®åº“é…ç½®èœå•
2. åˆ†é…èœå•ç»™è§’è‰²
3. å‰ç«¯è‡ªåŠ¨ç”Ÿæˆè·¯ç”±
4. å®Œå–„çš„æƒé™æ§åˆ¶

**æ¨èä½¿ç”¨åŠ¨æ€è·¯ç”±æ–¹å¼ï¼** â­ï¸â­ï¸â­ï¸

