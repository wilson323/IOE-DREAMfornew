# ç”Ÿç‰©è¯†åˆ«è®¤è¯ç­–ç•¥æ¶æ„åˆ†æä¸è¿ç§»æ–¹æ¡ˆ

**ç‰ˆæœ¬**: v1.0.0  
**æ—¥æœŸ**: 2025-01-30  
**çŠ¶æ€**: ğŸ“‹ æ¶æ„åˆ†æå®Œæˆï¼Œå¾…æ‰§è¡Œè¿ç§»

---

## ğŸ“‹ ä¸€ã€é—®é¢˜åˆ†æ

### 1.1 å½“å‰æ¶æ„é—®é¢˜

**ç°çŠ¶**ï¼š

- âœ… ç”Ÿç‰©è¯†åˆ«è®¤è¯ç­–ç•¥ï¼ˆ`MultiModalAuthenticationStrategy`ï¼‰å½“å‰åœ¨ `ioedream-access-service` æ¨¡å—ä¸­
- âŒ è€ƒå‹¤ã€è§†é¢‘ã€è®¿å®¢ã€æ¶ˆè´¹ç­‰æ¨¡å—éƒ½éœ€è¦ä½¿ç”¨è®¤è¯æ–¹å¼è®°å½•åŠŸèƒ½
- âŒ ä»£ç åˆ†æ•£åœ¨å•ä¸€ä¸šåŠ¡æ¨¡å—ï¼Œè¿åäº†"è·¨æ¨¡å—å…¬å…±èƒ½åŠ›åº”æ”¾åœ¨å…¬å…±æ¨¡å—"çš„æ¶æ„åŸåˆ™

**å½±å“**ï¼š

- ğŸ”´ **ä»£ç é‡å¤é£é™©**ï¼šå…¶ä»–æ¨¡å—å¯èƒ½è‡ªè¡Œå®ç°ç±»ä¼¼çš„è®¤è¯æ–¹å¼è®°å½•é€»è¾‘
- ğŸ”´ **ç»´æŠ¤æˆæœ¬é«˜**ï¼šæ–°å¢è®¤è¯æ–¹å¼éœ€è¦ä¿®æ”¹å¤šä¸ªæ¨¡å—
- ğŸ”´ **æ¶æ„ä¸æ¸…æ™°**ï¼šå…¬å…±èƒ½åŠ›ä¸ä¸šåŠ¡é€»è¾‘æ··åœ¨ä¸€èµ·

### 1.2 æ ¸å¿ƒèŒè´£åˆ†æ

æ ¹æ®ä»£ç æ³¨é‡Šå’Œå®ç°ï¼Œè®¤è¯ç­–ç•¥çš„**æ ¸å¿ƒèŒè´£**æ˜¯ï¼š

```
âš ï¸ é‡è¦è¯´æ˜ï¼šä¸æ˜¯è¿›è¡Œäººå‘˜è¯†åˆ«

è®¾å¤‡ç«¯å·²å®Œæˆäººå‘˜è¯†åˆ«ï¼ˆäººè„¸ã€æŒ‡çº¹ã€å¡ç‰‡ç­‰ï¼‰
è®¾å¤‡ç«¯å·²è¯†åˆ«å‡ºäººå‘˜ç¼–å·ï¼ˆpinå­—æ®µï¼‰
è½¯ä»¶ç«¯æ¥æ”¶çš„æ˜¯äººå‘˜ç¼–å·ï¼ˆpinï¼‰ï¼Œä¸æ˜¯ç”Ÿç‰©ç‰¹å¾æ•°æ®

æ ¸å¿ƒèŒè´£æ˜¯è®°å½•è®¤è¯æ–¹å¼ç”¨äºç»Ÿè®¡å’Œå®¡è®¡ï¼š
- âœ… è®°å½•è®¤è¯æ–¹å¼ï¼ˆverifytypeï¼‰ç”¨äºç»Ÿè®¡å’Œå®¡è®¡
- âœ… æä¾›è®¤è¯æ–¹å¼æšä¸¾ï¼ˆVerifyTypeEnumï¼‰ç»Ÿä¸€ç®¡ç†
- âœ… è½¬æ¢è®¤è¯æ–¹å¼ï¼ˆverifytype â†” verifyMethodï¼‰ç”¨äºæ•°æ®å­˜å‚¨å’Œå±•ç¤º
- âŒ ä¸è¿›è¡Œäººå‘˜è¯†åˆ«ï¼ˆè®¾å¤‡ç«¯å·²å®Œæˆï¼‰
- âŒ ä¸éªŒè¯è®¤è¯æ–¹å¼æ˜¯å¦å…è®¸ï¼ˆè®¾å¤‡ç«¯å·²å®Œæˆï¼‰
```

**å…³é”®ç»“è®º**ï¼š

- è®¤è¯ç­–ç•¥æ˜¯**è·¨ä¸šåŠ¡æ¨¡å—çš„å…¬å…±èƒ½åŠ›**ï¼Œä¸æ˜¯é—¨ç¦æ¨¡å—ç‹¬æœ‰
- éœ€è¦è®°å½•è®¤è¯æ–¹å¼çš„ä¸šåŠ¡åœºæ™¯ï¼š
  - âœ… **access-service**ï¼šè®°å½•é€šè¡Œè®¤è¯æ–¹å¼
  - âœ… **attendance-service**ï¼šè®°å½•æ‰“å¡è®¤è¯æ–¹å¼ï¼ˆå¯é€‰ï¼Œå¦‚æœè€ƒå‹¤è®°å½•éœ€è¦ï¼‰
  - âœ… **visitor-service**ï¼šè®°å½•è®¿å®¢ç™»è®°å’Œé€šè¡Œè®¤è¯æ–¹å¼
  - âœ… **video-service**ï¼šè®°å½•AIè¯†åˆ«æ–¹å¼ï¼ˆå¯é€‰ï¼‰
  - âŒ **consume-service**ï¼šä¸éœ€è¦ï¼ˆè®¾å¤‡ç«¯å·²è¯†åˆ«ï¼Œè½¯ä»¶ç«¯åªå¤„ç†æ”¯ä»˜é€»è¾‘ï¼‰

---

## ğŸ“Š äºŒã€å…¨å±€ä»£ç å…³è”åˆ†æ

### 2.1 ä½¿ç”¨åœºæ™¯åˆ†æ

#### 2.1.1 é—¨ç¦æœåŠ¡ï¼ˆioedream-access-serviceï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š

- é—¨ç¦é€šè¡Œè®°å½•ï¼šè®°å½•ç”¨æˆ·é€šè¿‡é—¨ç¦æ—¶ä½¿ç”¨çš„è®¤è¯æ–¹å¼ï¼ˆäººè„¸/æŒ‡çº¹/å¡ç‰‡ç­‰ï¼‰
- ç»Ÿè®¡å’Œå®¡è®¡ï¼šåˆ†æä¸åŒè®¤è¯æ–¹å¼çš„ä½¿ç”¨é¢‘ç‡å’Œæ•ˆæœ

**å½“å‰å®ç°**ï¼š

- âœ… `MultiModalAuthenticationStrategy` æ¥å£
- âœ… `AbstractAuthenticationStrategy` æŠ½è±¡ç±»
- âœ… 9ç§è®¤è¯ç­–ç•¥å®ç°ç±»ï¼ˆFaceã€Fingerprintã€Cardã€Irisã€Palmã€Voiceã€NFCã€QR_CODEã€Passwordï¼‰
- âœ… `MultiModalAuthenticationManager` ç®¡ç†å™¨
- âœ… `VerifyTypeEnum` æšä¸¾

#### 2.1.2 è€ƒå‹¤æœåŠ¡ï¼ˆioedream-attendance-serviceï¼‰

**æ½œåœ¨ä½¿ç”¨åœºæ™¯**ï¼š

- è€ƒå‹¤æ‰“å¡è®°å½•ï¼šè®°å½•å‘˜å·¥æ‰“å¡æ—¶ä½¿ç”¨çš„è®¤è¯æ–¹å¼
- è€ƒå‹¤ç»Ÿè®¡ï¼šåˆ†æä¸åŒè®¤è¯æ–¹å¼çš„æ‰“å¡æˆåŠŸç‡

**å½“å‰çŠ¶æ€**ï¼š

- âŒ æœªä½¿ç”¨è®¤è¯ç­–ç•¥ï¼Œå¯èƒ½è‡ªè¡Œå®ç°æˆ–ç¼ºå¤±

#### 2.1.3 è®¿å®¢æœåŠ¡ï¼ˆioedream-visitor-serviceï¼‰

**æ½œåœ¨ä½¿ç”¨åœºæ™¯**ï¼š

- è®¿å®¢ç™»è®°ï¼šè®°å½•è®¿å®¢ç™»è®°æ—¶ä½¿ç”¨çš„è®¤è¯æ–¹å¼ï¼ˆäººè„¸/èº«ä»½è¯ç­‰ï¼‰
- è®¿å®¢é€šè¡Œï¼šè®°å½•è®¿å®¢é€šè¿‡é—¨ç¦æ—¶ä½¿ç”¨çš„è®¤è¯æ–¹å¼
- è®¿å®¢ç»Ÿè®¡ï¼šåˆ†æä¸åŒè®¤è¯æ–¹å¼çš„ä½¿ç”¨æƒ…å†µ

**å½“å‰çŠ¶æ€**ï¼š

- âŒ æœ‰ `VisitorFaceRecognitionService`ï¼Œä½†æœªä½¿ç”¨ç»Ÿä¸€çš„è®¤è¯ç­–ç•¥
- âŒ æœ‰ `VisitorAccessControlService`ï¼Œæ”¯æŒå¤šç§éªŒè¯æ–¹å¼ï¼ˆface/card/qrcodeï¼‰ï¼Œä½†æœªä½¿ç”¨ç­–ç•¥æ¨¡å¼

#### 2.1.4 è§†é¢‘æœåŠ¡ï¼ˆioedream-video-serviceï¼‰

**æ½œåœ¨ä½¿ç”¨åœºæ™¯**ï¼š

- è§†é¢‘ç›‘æ§è¯†åˆ«ï¼šè®°å½•AIè¯†åˆ«æ—¶ä½¿ç”¨çš„è¯†åˆ«æ–¹å¼ï¼ˆäººè„¸è¯†åˆ«ã€è¡Œä¸ºè¯†åˆ«ç­‰ï¼‰
- å‘Šè­¦è®°å½•ï¼šè®°å½•å‘Šè­¦è§¦å‘æ—¶çš„è¯†åˆ«æ–¹å¼

**å½“å‰çŠ¶æ€**ï¼š

- âŒ æœªä½¿ç”¨è®¤è¯ç­–ç•¥ï¼Œå¯èƒ½è‡ªè¡Œå®ç°æˆ–ç¼ºå¤±

#### 2.1.5 æ¶ˆè´¹æœåŠ¡ï¼ˆioedream-consume-serviceï¼‰

**âš ï¸ é‡è¦è¯´æ˜ï¼šæ¶ˆè´¹æœåŠ¡ä¸éœ€è¦è®¤è¯ç­–ç•¥**

- âŒ **æ¶ˆè´¹æœåŠ¡ä¸ä½¿ç”¨è®¤è¯ç­–ç•¥**
- è®¾å¤‡ç«¯å·²å®Œæˆäººå‘˜è¯†åˆ«ï¼ˆäººè„¸/å¡ç‰‡/NFCç­‰ï¼‰
- è½¯ä»¶ç«¯æ¥æ”¶çš„æ˜¯ç”¨æˆ·IDï¼ˆpinï¼‰ï¼Œç›´æ¥å¤„ç†æ”¯ä»˜é€»è¾‘ï¼ˆä½™é¢æ£€æŸ¥ã€æ‰£æ¬¾ç­‰ï¼‰
- è½¯ä»¶ç«¯ä¸è¿›è¡Œäººå‘˜è¯†åˆ«ï¼Œä¸è€ƒè™‘è®¤è¯æ–¹å¼è®°å½•
- æ¶ˆè´¹æ¨¡å—åªéªŒè¯æ¶ˆè´¹é€»è¾‘ï¼Œä¸éœ€è¦è®¤è¯ç­–ç•¥

**å½“å‰çŠ¶æ€**ï¼š

- âŒ ä¸éœ€è¦è®¤è¯ç­–ç•¥ï¼ˆç¬¦åˆæ¶æ„è®¾è®¡ï¼‰

### 2.2 ä»£ç ä¾èµ–å…³ç³»

```
è®¤è¯ç­–ç•¥ç›¸å…³ä»£ç ç»“æ„ï¼š

ioedream-access-service/
â”œâ”€â”€ strategy/
â”‚   â”œâ”€â”€ MultiModalAuthenticationStrategy.java          # ç­–ç•¥æ¥å£
â”‚   â””â”€â”€ impl/authentication/
â”‚       â”œâ”€â”€ AbstractAuthenticationStrategy.java        # æŠ½è±¡åŸºç±»
â”‚       â”œâ”€â”€ FaceAuthenticationStrategy.java            # äººè„¸ç­–ç•¥
â”‚       â”œâ”€â”€ FingerprintAuthenticationStrategy.java     # æŒ‡çº¹ç­–ç•¥
â”‚       â”œâ”€â”€ CardAuthenticationStrategy.java            # ICå¡ç­–ç•¥
â”‚       â”œâ”€â”€ IrisAuthenticationStrategy.java            # è™¹è†œç­–ç•¥
â”‚       â”œâ”€â”€ PalmAuthenticationStrategy.java            # æŒçº¹ç­–ç•¥
â”‚       â”œâ”€â”€ VoiceAuthenticationStrategy.java           # å£°çº¹ç­–ç•¥
â”‚       â”œâ”€â”€ NfcAuthenticationStrategy.java             # NFCç­–ç•¥
â”‚       â”œâ”€â”€ QrCodeAuthenticationStrategy.java          # äºŒç»´ç ç­–ç•¥
â”‚       â””â”€â”€ PasswordAuthenticationStrategy.java        # å¯†ç ç­–ç•¥
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ AccessVerificationRequest.java             # éªŒè¯è¯·æ±‚DTO
â”‚   â”‚   â””â”€â”€ VerificationResult.java                    # éªŒè¯ç»“æœDTO
â”‚   â””â”€â”€ enumeration/
â”‚       â””â”€â”€ VerifyTypeEnum.java                        # è®¤è¯æ–¹å¼æšä¸¾
â””â”€â”€ manager/
    â””â”€â”€ MultiModalAuthenticationManager.java           # è®¤è¯ç®¡ç†å™¨

å…¶ä»–æœåŠ¡éœ€è¦ï¼š
- å¼•ç”¨è®¤è¯ç­–ç•¥æ¥å£å’Œå®ç°ç±»
- å¼•ç”¨è®¤è¯æ–¹å¼æšä¸¾
- å¼•ç”¨éªŒè¯è¯·æ±‚/ç»“æœDTO
- ä½¿ç”¨è®¤è¯ç®¡ç†å™¨
```

### 2.3 ä¾èµ–å†²çªåˆ†æ

**å½“å‰é—®é¢˜**ï¼š

- âŒ å…¶ä»–æœåŠ¡æ— æ³•ç›´æ¥ä½¿ç”¨ `ioedream-access-service` çš„è®¤è¯ç­–ç•¥ï¼ˆæœåŠ¡é—´è°ƒç”¨æˆæœ¬é«˜ï¼‰
- âŒ å¦‚æœå¤åˆ¶ä»£ç åˆ°å…¶ä»–æœåŠ¡ï¼Œä¼šå¯¼è‡´ä»£ç é‡å¤å’Œç»´æŠ¤å›°éš¾
- âŒ `AccessVerificationRequest` åŒ…å«é—¨ç¦ç‰¹å®šå­—æ®µï¼ˆå¦‚ `inOutStatus`ã€`doorNumber`ï¼‰ï¼Œä¸é€‚åˆå…¶ä»–æœåŠ¡

---

## ğŸ¯ ä¸‰ã€æ¶æ„è®¾è®¡åŸåˆ™

### 3.1 å…¬å…±æ¨¡å—èŒè´£ï¼ˆå‚è€ƒ COMMON_LIBRARY_SPLIT.mdï¼‰

æ ¹æ® `documentation/architecture/COMMON_LIBRARY_SPLIT.md`ï¼š

**`microservices-common-business` çš„å®šä½**ï¼š

- ä¸šåŠ¡å…¬å…±ç»„ä»¶ï¼ˆDAOã€Managerã€Serviceæ¥å£ç­‰ï¼‰
- è·¨æœåŠ¡å…±äº«çš„ä¸šåŠ¡å¥‘çº¦ã€DTOã€å·¥å…·ç­‰ï¼ˆä»…é™ç¨³å®šå¥‘çº¦ï¼Œä¸å«é¢†åŸŸå®ç°ï¼‰
- ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•ç­‰è®¾è®¡æ¨¡å¼çš„å…¬å…±å®ç°

**`microservices-common-core` çš„å®šä½**ï¼š

- æœ€ç¨³å®šå…±äº«åŸºå…ƒï¼ˆResponseDTOã€å¼‚å¸¸ã€å¸¸é‡ç­‰ï¼‰
- å°½é‡ä¸ä¾èµ– Spring

**ç»“è®º**ï¼š

- âœ… è®¤è¯ç­–ç•¥åº”è¯¥æ”¾åœ¨ `microservices-common-business`
- âœ… è®¤è¯æ–¹å¼æšä¸¾åº”è¯¥æ”¾åœ¨ `microservices-common-business`
- âœ… é€šç”¨çš„éªŒè¯è¯·æ±‚/ç»“æœDTOåº”è¯¥æ”¾åœ¨ `microservices-common-business`

### 3.2 æ¨¡å—åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  microservices-common-core                                  â”‚
â”‚  - ResponseDTOã€å¼‚å¸¸ã€å¸¸é‡                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  microservices-common-entity                                â”‚
â”‚  - æ‰€æœ‰å®ä½“ç±»                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  microservices-common-business                              â”‚
â”‚  - è®¤è¯ç­–ç•¥ï¼ˆæ–°å¢ï¼‰                                         â”‚
â”‚    â”œâ”€â”€ strategy/                                            â”‚
â”‚    â”‚   â”œâ”€â”€ MultiModalAuthenticationStrategy.java            â”‚
â”‚    â”‚   â””â”€â”€ impl/                                            â”‚
â”‚    â”‚       â”œâ”€â”€ AbstractAuthenticationStrategy.java          â”‚
â”‚    â”‚       â””â”€â”€ [9ç§ç­–ç•¥å®ç°ç±»]                              â”‚
â”‚    â”œâ”€â”€ domain/                                              â”‚
â”‚    â”‚   â”œâ”€â”€ dto/                                             â”‚
â”‚    â”‚   â”‚   â”œâ”€â”€ VerificationRequest.java (é€šç”¨)              â”‚
â”‚    â”‚   â”‚   â””â”€â”€ VerificationResult.java                      â”‚
â”‚    â”‚   â””â”€â”€ enumeration/                                     â”‚
â”‚    â”‚       â””â”€â”€ VerifyTypeEnum.java                          â”‚
â”‚    â””â”€â”€ manager/                                             â”‚
â”‚        â””â”€â”€ MultiModalAuthenticationManager.java             â”‚
â”‚  - å…¶ä»–ä¸šåŠ¡å…¬å…±ç»„ä»¶ï¼ˆDAOã€Managerç­‰ï¼‰                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸šåŠ¡å¾®æœåŠ¡                                                 â”‚
â”‚  - ioedream-access-service                                  â”‚
â”‚  - ioedream-attendance-service                              â”‚
â”‚  - ioedream-visitor-service                                 â”‚
â”‚  - ioedream-video-service                                   â”‚
â”‚  - ioedream-consume-service                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å››ã€è¿ç§»æ–¹æ¡ˆè®¾è®¡

### 4.1 ç›®æ ‡æ¶æ„

**è¿ç§»ç›®æ ‡**ï¼š

- âœ… è®¤è¯ç­–ç•¥æ¥å£å’Œå®ç°ç±»è¿ç§»åˆ° `microservices-common-business/src/main/java/net/lab1024/sa/common/biometric/strategy/`
- âœ… è®¤è¯æ–¹å¼æšä¸¾è¿ç§»åˆ° `microservices-common-business/src/main/java/net/lab1024/sa/common/biometric/domain/enumeration/`
- âœ… é€šç”¨DTOè¿ç§»åˆ° `microservices-common-business/src/main/java/net/lab1024/sa/common/biometric/domain/dto/`
- âœ… è®¤è¯ç®¡ç†å™¨è¿ç§»åˆ° `microservices-common-business/src/main/java/net/lab1024/sa/common/biometric/manager/`
- âœ… é—¨ç¦æœåŠ¡ä¿ç•™ä¸šåŠ¡ç‰¹å®šçš„DTOï¼ˆå¦‚ `AccessVerificationRequest`ï¼‰ï¼Œå¯ç»§æ‰¿é€šç”¨DTO

### 4.2 åŒ…ç»“æ„è®¾è®¡

```
microservices-common-business/
â””â”€â”€ src/main/java/net/lab1024/sa/common/biometric/
    â”œâ”€â”€ domain/
    â”‚   â”œâ”€â”€ dto/
    â”‚   â”‚   â”œâ”€â”€ VerificationRequest.java        # é€šç”¨éªŒè¯è¯·æ±‚DTOï¼ˆæŠ½è±¡æˆ–åŸºç¡€ç±»ï¼‰
    â”‚   â”‚   â””â”€â”€ VerificationResult.java         # éªŒè¯ç»“æœDTO
    â”‚   â””â”€â”€ enumeration/
    â”‚       â””â”€â”€ VerifyTypeEnum.java             # è®¤è¯æ–¹å¼æšä¸¾
    â”œâ”€â”€ strategy/
    â”‚   â”œâ”€â”€ MultiModalAuthenticationStrategy.java
    â”‚   â””â”€â”€ impl/
    â”‚       â”œâ”€â”€ AbstractAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ FaceAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ FingerprintAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ CardAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ IrisAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ PalmAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ VoiceAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ NfcAuthenticationStrategy.java
    â”‚       â”œâ”€â”€ QrCodeAuthenticationStrategy.java
    â”‚       â””â”€â”€ PasswordAuthenticationStrategy.java
    â””â”€â”€ manager/
        â””â”€â”€ MultiModalAuthenticationManager.java
```

### 4.3 DTOè®¾è®¡ä¼˜åŒ–

**é—®é¢˜**ï¼š

- `AccessVerificationRequest` åŒ…å«é—¨ç¦ç‰¹å®šå­—æ®µï¼ˆ`inOutStatus`ã€`doorNumber`ã€`event`ç­‰ï¼‰
- å…¶ä»–æœåŠ¡ä¸éœ€è¦è¿™äº›å­—æ®µ

**è§£å†³æ–¹æ¡ˆ**ï¼š

- **æ–¹æ¡ˆAï¼ˆæ¨èï¼‰**ï¼šåˆ›å»ºé€šç”¨çš„ `VerificationRequest` åŸºç±»ï¼ŒåŒ…å«é€šç”¨å­—æ®µï¼ˆ`userId`ã€`deviceId`ã€`areaId`ã€`verifyType`ã€`verifyTime`ç­‰ï¼‰ï¼Œå„æœåŠ¡å¯ç»§æ‰¿æ‰©å±•
- **æ–¹æ¡ˆB**ï¼šåˆ›å»ºé€šç”¨çš„ `VerificationRequest` æ¥å£ï¼Œå„æœåŠ¡å®ç°è‡ªå·±çš„DTO

**æ¨èæ–¹æ¡ˆA**ï¼š

```java
// microservices-common-business: VerificationRequestï¼ˆé€šç”¨åŸºç±»ï¼‰
public class VerificationRequest {
    private Long userId;
    private Long deviceId;
    private Long areaId;
    private Integer verifyType;
    private LocalDateTime verifyTime;
    private String serialNumber;
    // ... é€šç”¨å­—æ®µ
}

// ioedream-access-service: AccessVerificationRequestï¼ˆé—¨ç¦ç‰¹å®šï¼‰
public class AccessVerificationRequest extends VerificationRequest {
    private Integer inOutStatus;      // é—¨ç¦ç‰¹å®š
    private Integer doorNumber;       // é—¨ç¦ç‰¹å®š
    private Integer event;            // é—¨ç¦ç‰¹å®š
    private String cardNo;            // é—¨ç¦ç‰¹å®š
    // ... é—¨ç¦ç‰¹å®šå­—æ®µ
}
```

### 4.4 ç­–ç•¥æ¥å£è®¾è®¡ä¼˜åŒ–

**å½“å‰é—®é¢˜**ï¼š

- `MultiModalAuthenticationStrategy.authenticate()` æ–¹æ³•å‚æ•°æ˜¯ `AccessVerificationRequest`ï¼Œè€¦åˆé—¨ç¦æœåŠ¡

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ä¿®æ”¹æ¥å£ä¸ºä½¿ç”¨é€šç”¨çš„ `VerificationRequest` æˆ–æ³›å‹

```java
// æ–¹æ¡ˆ1ï¼šä½¿ç”¨é€šç”¨DTO
public interface MultiModalAuthenticationStrategy {
    VerificationResult authenticate(VerificationRequest request);
    // ...
}

// æ–¹æ¡ˆ2ï¼šä½¿ç”¨æ³›å‹ï¼ˆæ›´çµæ´»ï¼‰
public interface MultiModalAuthenticationStrategy<T extends VerificationRequest> {
    VerificationResult authenticate(T request);
    // ...
}
```

**æ¨èæ–¹æ¡ˆ1**ï¼ˆæ›´ç®€å•ï¼Œæ»¡è¶³å½“å‰éœ€æ±‚ï¼‰

---

## ğŸ”„ äº”ã€è¿ç§»æ­¥éª¤

### 5.1 ç¬¬ä¸€é˜¶æ®µï¼šå‡†å¤‡å…¬å…±æ¨¡å—ç»“æ„

1. âœ… åˆ›å»ºç›®å½•ç»“æ„

   ```
   microservices-common-business/src/main/java/net/lab1024/sa/common/biometric/
   â”œâ”€â”€ domain/dto/
   â”œâ”€â”€ domain/enumeration/
   â”œâ”€â”€ strategy/impl/
   â””â”€â”€ manager/
   ```

2. âœ… åˆ›å»ºé€šç”¨DTOï¼ˆ`VerificationRequest`ã€`VerificationResult`ï¼‰

3. âœ… è¿ç§»æšä¸¾ï¼ˆ`VerifyTypeEnum`ï¼‰

### 5.2 ç¬¬äºŒé˜¶æ®µï¼šè¿ç§»ç­–ç•¥ä»£ç 

1. âœ… ä¿®æ”¹ç­–ç•¥æ¥å£ï¼Œä½¿ç”¨é€šç”¨DTO
2. âœ… è¿ç§»æŠ½è±¡åŸºç±»ï¼ˆ`AbstractAuthenticationStrategy`ï¼‰
3. âœ… è¿ç§»9ç§ç­–ç•¥å®ç°ç±»
4. âœ… ä¿®æ”¹ç­–ç•¥å®ç°ç±»ï¼Œä½¿ç”¨é€šç”¨DTO

### 5.3 ç¬¬ä¸‰é˜¶æ®µï¼šè¿ç§»ç®¡ç†å™¨

1. âœ… è¿ç§»ç®¡ç†å™¨ï¼ˆ`MultiModalAuthenticationManager`ï¼‰
2. âœ… åˆ›å»ºé…ç½®ç±»ï¼Œæ³¨å†Œç®¡ç†å™¨ä¸ºBeanï¼ˆåœ¨ `ioedream-common-service` æˆ–å„æœåŠ¡ä¸­ï¼‰

### 5.4 ç¬¬å››é˜¶æ®µï¼šæ›´æ–°é—¨ç¦æœåŠ¡

1. âœ… åˆ›å»º `AccessVerificationRequest` ç»§æ‰¿ `VerificationRequest`
2. âœ… æ›´æ–°é—¨ç¦æœåŠ¡ä»£ç ï¼Œä½¿ç”¨æ–°çš„åŒ…è·¯å¾„
3. âœ… åˆ›å»ºé€‚é…å™¨æˆ–è½¬æ¢å™¨ï¼Œå°† `AccessVerificationRequest` è½¬æ¢ä¸º `VerificationRequest`

### 5.5 ç¬¬äº”é˜¶æ®µï¼šå…¶ä»–æœåŠ¡é›†æˆ

1. âœ… è€ƒå‹¤æœåŠ¡ï¼šé›†æˆè®¤è¯ç­–ç•¥ï¼Œè®°å½•æ‰“å¡è®¤è¯æ–¹å¼
2. âœ… è®¿å®¢æœåŠ¡ï¼šé›†æˆè®¤è¯ç­–ç•¥ï¼Œç»Ÿä¸€è®¤è¯æ–¹å¼è®°å½•
3. âœ… è§†é¢‘æœåŠ¡ï¼šé›†æˆè®¤è¯ç­–ç•¥ï¼Œè®°å½•AIè¯†åˆ«æ–¹å¼
4. âœ… æ¶ˆè´¹æœåŠ¡ï¼šé›†æˆè®¤è¯ç­–ç•¥ï¼Œè®°å½•æ”¯ä»˜è®¤è¯æ–¹å¼

---

## ğŸ“‹ å…­ã€å½±å“åˆ†æ

### 6.1 ç¼–è¯‘å½±å“

**éœ€è¦æ›´æ–°çš„æ–‡ä»¶**ï¼š

- âœ… `ioedream-access-service` ä¸­æ‰€æœ‰ä½¿ç”¨è®¤è¯ç­–ç•¥çš„ç±»
- âœ… å…¶ä»–æœåŠ¡çš„ä¾èµ–é…ç½®ï¼ˆ`pom.xml`ï¼‰

**ç¼–è¯‘é¡ºåº**ï¼š

1. å…ˆç¼–è¯‘ `microservices-common-business`ï¼ˆç¡®ä¿æ–°ä»£ç å¯ç”¨ï¼‰
2. å†ç¼–è¯‘ `ioedream-access-service`ï¼ˆæ›´æ–°å¼•ç”¨ï¼‰
3. æœ€åç¼–è¯‘å…¶ä»–æœåŠ¡ï¼ˆæŒ‰éœ€é›†æˆï¼‰

### 6.2 è¿è¡Œæ—¶å½±å“

**æ— å½±å“**ï¼š

- è®¤è¯ç­–ç•¥æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿ç§»åˆ°å…¬å…±æ¨¡å—ä¸å½±å“è¿è¡Œæ—¶è¡Œä¸º
- æ¥å£ç­¾åä¿æŒä¸å˜ï¼ˆä½¿ç”¨é€šç”¨DTOåï¼Œå†…éƒ¨å®ç°ç•¥æœ‰è°ƒæ•´ï¼‰

### 6.3 ä¾èµ–å…³ç³»

**æ–°å¢ä¾èµ–**ï¼š

- æ‰€æœ‰éœ€è¦ä½¿ç”¨è®¤è¯ç­–ç•¥çš„æœåŠ¡éœ€è¦ä¾èµ– `microservices-common-business`
- å¤§éƒ¨åˆ†æœåŠ¡å·²ä¾èµ– `microservices-common-business`ï¼ˆé€šè¿‡ `microservices-common` æˆ–ç›´æ¥ä¾èµ–ï¼‰

---

## âœ… ä¸ƒã€éªŒè¯æ ‡å‡†

### 7.1 ç¼–è¯‘éªŒè¯

- âœ… `microservices-common-business` ç¼–è¯‘æˆåŠŸ
- âœ… `ioedream-access-service` ç¼–è¯‘æˆåŠŸï¼ŒåŠŸèƒ½æ­£å¸¸
- âœ… å…¶ä»–æœåŠ¡ç¼–è¯‘æˆåŠŸï¼ˆæŒ‰éœ€é›†æˆåï¼‰

### 7.2 åŠŸèƒ½éªŒè¯

- âœ… é—¨ç¦æœåŠ¡ï¼šè®¤è¯ç­–ç•¥æ­£å¸¸å·¥ä½œï¼Œè®°å½•è®¤è¯æ–¹å¼æ­£ç¡®
- âœ… è€ƒå‹¤æœåŠ¡ï¼šé›†æˆè®¤è¯ç­–ç•¥åï¼Œæ‰“å¡è®°å½•åŒ…å«è®¤è¯æ–¹å¼
- âœ… è®¿å®¢æœåŠ¡ï¼šé›†æˆè®¤è¯ç­–ç•¥åï¼Œè®¿å®¢ç™»è®°å’Œé€šè¡Œè®°å½•åŒ…å«è®¤è¯æ–¹å¼

### 7.3 æ¶æ„éªŒè¯

- âœ… è®¤è¯ç­–ç•¥ä»£ç åœ¨å…¬å…±æ¨¡å—ï¼Œä¸åœ¨ä¸šåŠ¡æ¨¡å—
- âœ… å„æœåŠ¡å¯ä»¥å¤ç”¨è®¤è¯ç­–ç•¥ï¼Œæ— ä»£ç é‡å¤
- âœ… æ–°å¢è®¤è¯æ–¹å¼åªéœ€ä¿®æ”¹å…¬å…±æ¨¡å—

---

## ğŸ“š å…«ã€ç›¸å…³æ–‡æ¡£

- **å…¬å…±æ¨¡å—æ‹†åˆ†æ–‡æ¡£**: `documentation/architecture/COMMON_LIBRARY_SPLIT.md`
- **è®¾å¤‡äº¤äº’æ¶æ„**: `CLAUDE.md` (è®¾å¤‡äº¤äº’æ¶æ„è®¾è®¡è§„èŒƒ)
- **å½“å‰è®¤è¯ç­–ç•¥å®ç°**: `microservices/ioedream-access-service/src/main/java/net/lab1024/sa/access/strategy/`

---

## ğŸ¯ ä¹ã€æ€»ç»“

### 9.1 æ ¸å¿ƒç»“è®º

1. **è®¤è¯ç­–ç•¥æ˜¯è·¨ä¸šåŠ¡æ¨¡å—çš„å…¬å…±èƒ½åŠ›**ï¼Œåº”è¯¥æ”¾åœ¨ `microservices-common-business`
2. **å½“å‰æ¶æ„ä¸åˆç†**ï¼šè®¤è¯ç­–ç•¥æ”¾åœ¨é—¨ç¦æ¨¡å—ï¼Œå¯¼è‡´å…¶ä»–æ¨¡å—æ— æ³•å¤ç”¨
3. **è¿ç§»æ”¶ç›Šé«˜**ï¼šç»Ÿä¸€è®¤è¯æ–¹å¼ç®¡ç†ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ï¼Œæé«˜ä»£ç å¤ç”¨ç‡

### 9.2 è¿ç§»ä¼˜å…ˆçº§

- ğŸ”´ **P0ï¼ˆç«‹å³æ‰§è¡Œï¼‰**ï¼šè¿ç§»è®¤è¯ç­–ç•¥åˆ°å…¬å…±æ¨¡å—ï¼Œç»Ÿä¸€è®¤è¯æ–¹å¼ç®¡ç†
- ğŸŸ  **P1ï¼ˆçŸ­æœŸï¼‰**ï¼šé—¨ç¦æœåŠ¡é›†æˆæ–°çš„è®¤è¯ç­–ç•¥
- ğŸŸ¡ **P2ï¼ˆä¸­æœŸï¼‰**ï¼šå…¶ä»–æœåŠ¡é€æ­¥é›†æˆè®¤è¯ç­–ç•¥

### 9.3 é£é™©æ§åˆ¶

- âœ… ä¿ç•™é—¨ç¦æœåŠ¡çš„ä¸šåŠ¡ç‰¹å®šDTOï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… é€æ­¥è¿ç§»ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µç¼–è¯‘é€šè¿‡
- âœ… å……åˆ†çš„æµ‹è¯•éªŒè¯ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸

---

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**ï¼šæŒ‰ç…§è¿ç§»æ­¥éª¤æ‰§è¡Œï¼Œå…ˆå®Œæˆç¬¬ä¸€é˜¶æ®µï¼ˆå‡†å¤‡å…¬å…±æ¨¡å—ç»“æ„ï¼‰å’Œç¬¬äºŒã€ä¸‰é˜¶æ®µï¼ˆè¿ç§»ç­–ç•¥ä»£ç å’Œç®¡ç†å™¨ï¼‰
