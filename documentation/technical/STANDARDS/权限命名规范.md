# æƒé™å‘½åè§„èŒƒ

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£è§„å®šSmartAdminé¡¹ç›®ä¸­æ‰€æœ‰æƒé™çš„ç»Ÿä¸€å‘½åæ ¼å¼ï¼Œç¡®ä¿å‰åç«¯æƒé™é…ç½®ä¸€è‡´æ€§ã€‚

**å¼ºåˆ¶æ‰§è¡Œ**ï¼šæ‰€æœ‰æ–°å¼€å‘åŠŸèƒ½ã€ä¿®æ”¹ç°æœ‰åŠŸèƒ½æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆæœ¬è§„èŒƒã€‚

---

## ğŸ¯ ç»Ÿä¸€æ ¼å¼

### æ ‡å‡†æ ¼å¼
```
{domain}:{module}:{action}
```

- **domain**ï¼šä¸šåŠ¡åŸŸ/ç³»ç»ŸåŸŸ
- **module**ï¼šæ¨¡å—åç§°
- **action**ï¼šæ“ä½œåŠ¨ä½œ

### æ ¼å¼è¯´æ˜
- å…¨éƒ¨ä½¿ç”¨**å°å†™å­—æ¯**
- ä½¿ç”¨**å†’å·(:)**åˆ†éš”
- ä½¿ç”¨**è‹±æ–‡å•è¯**ï¼Œç¦æ­¢æ‹¼éŸ³

---

## ğŸ“š æ ‡å‡†ç¤ºä¾‹

### ç³»ç»Ÿæ¨¡å—ï¼ˆsystemåŸŸï¼‰

| åŠŸèƒ½æ¨¡å— | æƒé™æ ‡è¯† | è¯´æ˜ |
|---------|---------|------|
| èœå•ç®¡ç† | `system:menu:add` | æ–°å¢èœå• |
| èœå•ç®¡ç† | `system:menu:update` | ç¼–è¾‘èœå• |
| èœå•ç®¡ç† | `system:menu:delete` | åˆ é™¤èœå• |
| èœå•ç®¡ç† | `system:menu:batchDelete` | æ‰¹é‡åˆ é™¤èœå• |
| å‘˜å·¥ç®¡ç† | `system:employee:add` | æ–°å¢å‘˜å·¥ |
| å‘˜å·¥ç®¡ç† | `system:employee:update` | ç¼–è¾‘å‘˜å·¥ |
| å‘˜å·¥ç®¡ç† | `system:employee:delete` | åˆ é™¤å‘˜å·¥ |
| å‘˜å·¥ç®¡ç† | `system:employee:query` | æŸ¥è¯¢å‘˜å·¥ |
| è§’è‰²ç®¡ç† | `system:role:add` | æ–°å¢è§’è‰² |
| è§’è‰²ç®¡ç† | `system:role:update` | ç¼–è¾‘è§’è‰² |
| éƒ¨é—¨ç®¡ç† | `system:department:add` | æ–°å¢éƒ¨é—¨ |
| éƒ¨é—¨ç®¡ç† | `system:department:update` | ç¼–è¾‘éƒ¨é—¨ |
| åŒºåŸŸç®¡ç† | `system:area:add` | æ–°å¢åŒºåŸŸ |
| åŒºåŸŸç®¡ç† | `system:area:update` | ç¼–è¾‘åŒºåŸŸ |
| åŒºåŸŸç®¡ç† | `system:area:delete` | åˆ é™¤åŒºåŸŸ |
| åŒºåŸŸç®¡ç† | `system:area:query` | æŸ¥è¯¢åŒºåŸŸ |

### æ”¯æŒæ¨¡å—ï¼ˆsupportåŸŸï¼‰

| åŠŸèƒ½æ¨¡å— | æƒé™æ ‡è¯† | è¯´æ˜ |
|---------|---------|------|
| æ•°æ®å­—å…¸ | `support:dict:add` | æ–°å¢å­—å…¸ |
| æ•°æ®å­—å…¸ | `support:dict:update` | ç¼–è¾‘å­—å…¸ |
| æ•°æ®å­—å…¸ | `support:dict:delete` | åˆ é™¤å­—å…¸ |
| å‚æ•°é…ç½® | `support:config:add` | æ–°å¢é…ç½® |
| å‚æ•°é…ç½® | `support:config:update` | ç¼–è¾‘é…ç½® |
| æ–‡ä»¶ç®¡ç† | `support:file:upload` | ä¸Šä¼ æ–‡ä»¶ |
| æ–‡ä»¶ç®¡ç† | `support:file:delete` | åˆ é™¤æ–‡ä»¶ |

### ä¸šåŠ¡æ¨¡å—ï¼ˆbusinessåŸŸï¼‰

| åŠŸèƒ½æ¨¡å— | æƒé™æ ‡è¯† | è¯´æ˜ |
|---------|---------|------|
| å•†å“ç®¡ç† | `business:goods:add` | æ–°å¢å•†å“ |
| å•†å“ç®¡ç† | `business:goods:update` | ç¼–è¾‘å•†å“ |
| è®¢å•ç®¡ç† | `business:order:query` | æŸ¥è¯¢è®¢å• |
| è®¢å•ç®¡ç† | `business:order:export` | å¯¼å‡ºè®¢å• |

---

## ğŸ”‘ æƒé™Actionæ ‡å‡†è¯æ±‡

### æŸ¥è¯¢ç±»æ“ä½œ

| Action | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|---------|
| `query` | æŸ¥è¯¢/æœç´¢ | åˆ—è¡¨æŸ¥è¯¢ã€æ¡ä»¶æœç´¢ |
| `list` | åˆ—è¡¨æŸ¥è¯¢ | ç®€å•åˆ—è¡¨è·å– |
| `detail` | è¯¦æƒ…æŸ¥è¯¢ | è·å–å•æ¡è®°å½•è¯¦æƒ… |
| `tree` | æ ‘å½¢æŸ¥è¯¢ | è·å–æ ‘å½¢ç»“æ„æ•°æ® |
| `page` | åˆ†é¡µæŸ¥è¯¢ | åˆ†é¡µåˆ—è¡¨æŸ¥è¯¢ï¼ˆä¸æ¨èï¼Œå»ºè®®ç”¨queryï¼‰ |

### å†™å…¥ç±»æ“ä½œ

| Action | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|---------|
| `add` | æ–°å¢ | åˆ›å»ºæ–°è®°å½•ï¼ˆæ¨èï¼‰ |
| `create` | åˆ›å»º | åˆ›å»ºæ–°è®°å½•ï¼ˆå¤‡é€‰ï¼‰ |
| `save` | ä¿å­˜ | ä¿å­˜è®°å½•ï¼ˆä¸æ¨èï¼Œè¯­ä¹‰ä¸æ˜ç¡®ï¼‰ |
| `insert` | æ’å…¥ | æ’å…¥è®°å½•ï¼ˆä¸æ¨èï¼Œå¤ªåº•å±‚ï¼‰ |

### æ›´æ–°ç±»æ“ä½œ

| Action | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|---------|
| `update` | æ›´æ–° | ä¿®æ”¹è®°å½•ï¼ˆæ¨èï¼‰ |
| `edit` | ç¼–è¾‘ | ä¿®æ”¹è®°å½•ï¼ˆå¤‡é€‰ï¼‰ |
| `modify` | ä¿®æ”¹ | ä¿®æ”¹è®°å½•ï¼ˆä¸æ¨èï¼‰ |

### åˆ é™¤ç±»æ“ä½œ

| Action | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|---------|
| `delete` | åˆ é™¤ | åˆ é™¤å•æ¡è®°å½•ï¼ˆæ¨èï¼‰ |
| `batchDelete` | æ‰¹é‡åˆ é™¤ | åˆ é™¤å¤šæ¡è®°å½• |
| `remove` | ç§»é™¤ | åˆ é™¤è®°å½•ï¼ˆå¤‡é€‰ï¼‰ |

### å…¶ä»–æ“ä½œ

| Action | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|---------|
| `export` | å¯¼å‡º | å¯¼å‡ºæ•°æ®ï¼ˆExcelã€PDFç­‰ï¼‰ |
| `import` | å¯¼å…¥ | å¯¼å…¥æ•°æ® |
| `upload` | ä¸Šä¼  | ä¸Šä¼ æ–‡ä»¶ |
| `download` | ä¸‹è½½ | ä¸‹è½½æ–‡ä»¶ |
| `enable` | å¯ç”¨ | å¯ç”¨è®°å½• |
| `disable` | ç¦ç”¨ | ç¦ç”¨è®°å½• |
| `audit` | å®¡æ ¸ | å®¡æ ¸æ“ä½œ |
| `approve` | å®¡æ‰¹ | å®¡æ‰¹æ“ä½œ |

---

## ğŸ’» å‰åç«¯ä¸€è‡´æ€§è¦æ±‚

### åç«¯Controller
```java
@RestController
@RequestMapping("/area")
@SaCheckLogin
public class AreaController {

    @PostMapping("/query")
    @SaCheckPermission("system:area:query")  // âœ… æ­£ç¡®æ ¼å¼
    public ResponseDTO<PageResult<AreaVO>> queryPage(@RequestBody AreaQueryForm form) {
        // ...
    }

    @PostMapping("/add")
    @SaCheckPermission("system:area:add")  // âœ… æ­£ç¡®æ ¼å¼
    public ResponseDTO<Long> add(@RequestBody AreaAddForm form) {
        // ...
    }
}
```

### å‰ç«¯ç»„ä»¶
```vue
<template>
  <!-- âœ… æ­£ç¡®ï¼šæƒé™æŒ‡ä»¤æ ¼å¼ -->
  <a-button type="primary" v-privilege="'system:area:add'">æ–°å¢</a-button>

  <!-- âœ… æ­£ç¡®ï¼šæƒé™æŒ‡ä»¤æ ¼å¼ -->
  <a-button v-privilege="'system:area:update'">ç¼–è¾‘</a-button>

  <!-- âœ… æ­£ç¡®ï¼šæƒé™æŒ‡ä»¤æ ¼å¼ -->
  <a-button v-privilege="'system:area:delete'">åˆ é™¤</a-button>

  <!-- âŒ é”™è¯¯ï¼šç¼ºå°‘domainå‰ç¼€ -->
  <a-button v-privilege="'area:add'">æ–°å¢</a-button>

  <!-- âŒ é”™è¯¯ï¼šä½¿ç”¨äº†ä¸­æ–‡ -->
  <a-button v-privilege="'system:åŒºåŸŸ:æ–°å¢'">æ–°å¢</a-button>
</template>
```

### æ•°æ®åº“èœå•é…ç½®
```sql
-- âœ… æ­£ç¡®ï¼št_menuè¡¨æƒé™é…ç½®
INSERT INTO t_menu (menu_name, api_perms, web_perms, ...) VALUES
('æ–°å¢', 'system:area:add', 'system:area:add', ...),
('ç¼–è¾‘', 'system:area:update', 'system:area:update', ...),
('åˆ é™¤', 'system:area:delete', 'system:area:delete', ...),
('æŸ¥è¯¢', 'system:area:query', 'system:area:query', ...);
```

---

## âš ï¸ å¸¸è§é”™è¯¯ç¤ºä¾‹

### âŒ é”™è¯¯1ï¼šç¼ºå°‘domainå‰ç¼€
```java
// âŒ é”™è¯¯
@SaCheckPermission("area:add")

// âœ… æ­£ç¡®
@SaCheckPermission("system:area:add")
```

### âŒ é”™è¯¯2ï¼šä½¿ç”¨ä¸­æ–‡æˆ–æ‹¼éŸ³
```java
// âŒ é”™è¯¯
@SaCheckPermission("system:quyu:xinzeng")

// âœ… æ­£ç¡®
@SaCheckPermission("system:area:add")
```

### âŒ é”™è¯¯3ï¼šActionä¸è§„èŒƒ
```java
// âŒ é”™è¯¯ï¼šä½¿ç”¨äº†saveï¼Œè¯­ä¹‰ä¸æ¸…
@SaCheckPermission("system:area:save")

// âœ… æ­£ç¡®ï¼šä½¿ç”¨addæˆ–update
@SaCheckPermission("system:area:add")
@SaCheckPermission("system:area:update")
```

### âŒ é”™è¯¯4ï¼šå‰åç«¯ä¸ä¸€è‡´
```java
// åç«¯
@SaCheckPermission("system:area:add")

// å‰ç«¯ âŒ é”™è¯¯
<a-button v-privilege="'area:add'">

// å‰ç«¯ âœ… æ­£ç¡®
<a-button v-privilege="'system:area:add'">
```

---

## ğŸ” å¼€å‘æ£€æŸ¥æ¸…å•

åœ¨å¼€å‘æ–°åŠŸèƒ½æˆ–ä¿®æ”¹æƒé™æ—¶ï¼Œè¯·é€é¡¹æ£€æŸ¥ï¼š

- [ ] æƒé™æ ¼å¼ç¬¦åˆ`{domain}:{module}:{action}`
- [ ] domainä½¿ç”¨æ­£ç¡®ï¼ˆsystem/support/businessï¼‰
- [ ] moduleä½¿ç”¨è‹±æ–‡å•è¯
- [ ] actionä½¿ç”¨æ ‡å‡†è¯æ±‡è¡¨ä¸­çš„è¯æ±‡
- [ ] åç«¯@SaCheckPermissionä¸å‰ç«¯v-privilegeä¸€è‡´
- [ ] æ•°æ®åº“t_menuè¡¨çš„api_permså’Œweb_permsä¸€è‡´
- [ ] æ‰€æœ‰å­—æ¯ä½¿ç”¨å°å†™
- [ ] ä½¿ç”¨å†’å·åˆ†éš”ï¼Œä¸ä½¿ç”¨ä¸‹åˆ’çº¿æˆ–è¿å­—ç¬¦

---

## ğŸ“ æ–°æ¨¡å—æƒé™å®šä¹‰æµç¨‹

1. **ç¡®å®šdomain**ï¼šåˆ¤æ–­å±äºsystem/support/business
2. **ç¡®å®šmodule**ï¼šä½¿ç”¨ç®€æ´çš„è‹±æ–‡å•è¯
3. **åˆ—å‡ºåŠŸèƒ½æ¸…å•**ï¼šåˆ—å‡ºæ‰€æœ‰éœ€è¦æƒé™æ§åˆ¶çš„åŠŸèƒ½
4. **å®šä¹‰action**ï¼šä»æ ‡å‡†è¯æ±‡è¡¨ä¸­é€‰æ‹©åˆé€‚çš„action
5. **ç”Ÿæˆæƒé™æ ‡è¯†**ï¼šç»„åˆæˆå®Œæ•´çš„æƒé™æ ‡è¯†
6. **åŒæ­¥åˆ°ä¸‰ç«¯**ï¼šåç«¯Controllerã€å‰ç«¯ç»„ä»¶ã€æ•°æ®åº“é…ç½®

### ç¤ºä¾‹ï¼šæ–°å¢"è€ƒå‹¤ç®¡ç†"æ¨¡å—

```markdown
1. domain: systemï¼ˆå±äºç³»ç»Ÿç®¡ç†ç±»ï¼‰
2. module: attendanceï¼ˆè€ƒå‹¤ï¼‰
3. åŠŸèƒ½æ¸…å•ï¼š
   - æŸ¥è¯¢è€ƒå‹¤è®°å½•
   - æ–°å¢è€ƒå‹¤è®°å½•
   - ç¼–è¾‘è€ƒå‹¤è®°å½•
   - åˆ é™¤è€ƒå‹¤è®°å½•
   - å¯¼å‡ºè€ƒå‹¤æŠ¥è¡¨

4. æƒé™å®šä¹‰ï¼š
   - system:attendance:query
   - system:attendance:add
   - system:attendance:update
   - system:attendance:delete
   - system:attendance:export
```

---

## ğŸ“ æœ€ä½³å®è·µå»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨æ ‡å‡†è¯æ±‡**ï¼šä»æ ‡å‡†actionè¯æ±‡è¡¨ä¸­é€‰æ‹©ï¼Œä¿æŒä¸€è‡´æ€§
2. **é¿å…è¿‡åº¦ç»†åŒ–**ï¼šä¸è¦ä¸ºæ¯ä¸ªå°åŠŸèƒ½éƒ½åˆ›å»ºæƒé™ï¼Œåˆç†å½’ç±»
3. **è¯­ä¹‰æ¸…æ™°æ˜ç¡®**ï¼šæƒé™åç§°åº”è¯¥è®©äººä¸€çœ‹å°±æ‡‚
4. **ä¿æŒç®€æ´**ï¼šmoduleå’Œactionå°½é‡ä½¿ç”¨ç®€çŸ­çš„å•è¯
5. **å®šæœŸå®¡æŸ¥**ï¼šå®šæœŸæ£€æŸ¥æƒé™é…ç½®ï¼Œæ¸…ç†æ— ç”¨æƒé™

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [APIè·¯å¾„è§„èŒƒ](./APIè·¯å¾„è§„èŒƒ.md)
- [å‰ç«¯ç»„ä»¶å¼€å‘è§„èŒƒ](./å‰ç«¯ç»„ä»¶å¼€å‘è§„èŒƒ.md)
- [AIè¾…åŠ©å¼€å‘æ£€æŸ¥æ¸…å•](../AI_DEV_CHECKLIST.md)

---

**ç‰ˆæœ¬**ï¼šv1.0
**æ›´æ–°æ—¶é—´**ï¼š2025-11-11
**ç»´æŠ¤äºº**ï¼šå¼€å‘å›¢é˜Ÿ
