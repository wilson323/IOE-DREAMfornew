# IOE-DREAM æƒé™æ§åˆ¶å¼€å‘æŒ‡å—

> **ç‰ˆæœ¬**: v1.0
> **æ›´æ–°æ—¶é—´**: 2025-11-17
> **åˆ†ç±»**: å¼€å‘æŒ‡å— > æƒé™æ§åˆ¶
> **éµå¾ªè§„èŒƒ**: repowikiç³»ç»Ÿå®‰å…¨è§„èŒƒ
> **æŠ€æœ¯æ ˆ**: Sa-Token 1.44.0 + Vue3 + Ant Design Vue

---

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£æ˜¯IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°æƒé™æ§åˆ¶çš„å®Œæ•´å¼€å‘æŒ‡å—ï¼Œä¸¥æ ¼éµå¾ªrepowikiç³»ç»Ÿå®‰å…¨è§„èŒƒè¦æ±‚ï¼Œä¸ºå¼€å‘å›¢é˜Ÿæä¾›ç»Ÿä¸€ã€æƒå¨çš„æƒé™æ§åˆ¶å¼€å‘æ ‡å‡†ã€‚

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

ç¡®ä¿ç³»ç»Ÿæ‰€æœ‰æ•æ„Ÿæ“ä½œéƒ½æœ‰é€‚å½“çš„æƒé™æ§åˆ¶ï¼Œæ»¡è¶³ï¼š
- **repowikiç³»ç»Ÿå®‰å…¨è§„èŒƒè¦æ±‚**
- **ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤ä¸‰çº§ï¼ˆç­‰ä¿ä¸‰çº§ï¼‰æ ‡å‡†**
- **Sa-Tokenæƒé™æ§åˆ¶æœ€ä½³å®è·µ**
- **å‰åç«¯æƒé™æ§åˆ¶ä¸€è‡´æ€§**

---

## ğŸ” æƒé™æ§åˆ¶æ¶æ„

### æ•´ä½“æ¶æ„è®¾è®¡

```mermaid
graph TB
    subgraph "å‰ç«¯æƒé™æ§åˆ¶"
        A[Vueç»„ä»¶] --> B[v-permissionæŒ‡ä»¤]
        B --> C[æƒé™æ£€æŸ¥]
        C --> D[æ˜¾ç¤º/éšè—å…ƒç´ ]
    end

    subgraph "åç«¯æƒé™æ§åˆ¶"
        E[Controller] --> F[@SaCheckPermissionæ³¨è§£]
        F --> G[Sa-TokenéªŒè¯]
        G --> H[æƒé™æ ¡éªŒé€šè¿‡/æ‹’ç»]
    end

    subgraph "æƒé™æ•°æ®ä¸­å¿ƒ"
        I[æƒé™é…ç½®è¡¨]
        J[è§’è‰²æƒé™æ˜ å°„]
        K[ç”¨æˆ·æƒé™ç¼“å­˜]
    end

    D --> I
    H --> I
    I --> J
    J --> K
```

### æŠ€æœ¯æ ˆè¯´æ˜

| æŠ€æœ¯ç»„ä»¶ | ç‰ˆæœ¬ | ç”¨é€” | è§„èŒƒè¦æ±‚ |
|---------|------|------|----------|
| Sa-Token | 1.44.0 | è®¤è¯æˆæƒ | repowikiå¼ºåˆ¶è¦æ±‚ |
| Spring Boot | 3.x | åç«¯æ¡†æ¶ | Jakarta EE 9+ |
| Vue3 | 3.x | å‰ç«¯æ¡†æ¶ | Composition API |
| Ant Design Vue | 4.x | UIç»„ä»¶åº“ | v-permissionæŒ‡ä»¤ |

---

## ğŸ“– æƒé™æ ‡è¯†è§„èŒƒ

### æƒé™æ ‡è¯†å‘½åè§„èŒƒ

åŸºäºrepowikiç³»ç»Ÿå®‰å…¨è§„èŒƒï¼Œæƒé™æ ‡è¯†é‡‡ç”¨**ä¸‰çº§å‘½å**æ ¼å¼ï¼š

```markdown
æ ¼å¼ï¼š{æ¨¡å—}:{æ“ä½œ}:{å…·ä½“åŠ¨ä½œ}
ç¤ºä¾‹ï¼š
- consume:record:export  - æ¶ˆè´¹è®°å½•å¯¼å‡º
- attendance:punch:in    - è€ƒå‹¤ä¸Šç­æ‰“å¡
- access:device:add     - é—¨ç¦è®¾å¤‡æ·»åŠ 
- device:control         - è®¾å¤‡æ§åˆ¶
- cache:manage:clear     - ç¼“å­˜ç®¡ç†æ¸…ç©º
```

### æƒé™æ ‡è¯†åˆ†ç±»

#### 1. æ¶ˆè´¹ç®¡ç†æ¨¡å— (consume)
```javascript
// æ¶ˆè´¹è®°å½•æƒé™
consume:record:query     // æŸ¥è¯¢æ¶ˆè´¹è®°å½•
consume:record:detail    // æŸ¥çœ‹æ¶ˆè´¹è¯¦æƒ…
consume:record:export    // å¯¼å‡ºæ¶ˆè´¹è®°å½•
consume:record:cancel    // å–æ¶ˆæ¶ˆè´¹è®°å½•

// æ¶ˆè´¹è´¦æˆ·æƒé™
consume:account:create   // åˆ›å»ºæ¶ˆè´¹è´¦æˆ·
consume:account:update   // æ›´æ–°æ¶ˆè´¹è´¦æˆ·
consume:account:delete   // åˆ é™¤æ¶ˆè´¹è´¦æˆ·
consume:account:freeze   // å†»ç»“æ¶ˆè´¹è´¦æˆ·
consume:account:recharge // è´¦æˆ·å……å€¼

// æ¶ˆè´¹æŠ¥è¡¨æƒé™
consume:report:view      // æŸ¥çœ‹æ¶ˆè´¹æŠ¥è¡¨
consume:report:export    // å¯¼å‡ºæ¶ˆè´¹æŠ¥è¡¨
```

#### 2. è€ƒå‹¤ç®¡ç†æ¨¡å— (attendance)
```javascript
// æ‰“å¡æƒé™
attendance:punch:in      // ä¸Šç­æ‰“å¡
attendance:punch:out     // ä¸‹ç­æ‰“å¡
attendance:punch:gps     // GPSå®šä½æ‰“å¡

// è€ƒå‹¤æŸ¥è¯¢æƒé™
attendance:query:today   // æŸ¥è¯¢ä»Šæ—¥è€ƒå‹¤
attendance:query:record  // æŸ¥è¯¢è€ƒå‹¤è®°å½•
attendance:statistics:view // æŸ¥çœ‹è€ƒå‹¤ç»Ÿè®¡

// è€ƒå‹¤ç®¡ç†æƒé™
attendance:makeup:apply  // ç”³è¯·è¡¥å¡
attendance:export        // å¯¼å‡ºè€ƒå‹¤æ•°æ®
```

#### 3. é—¨ç¦ç®¡ç†æ¨¡å— (access/smart:access)
```javascript
// é—¨ç¦è®¾å¤‡æƒé™
smart:access:device:add     // æ·»åŠ é—¨ç¦è®¾å¤‡
smart:access:device:update  // æ›´æ–°é—¨ç¦è®¾å¤‡
smart:access:device:delete  // åˆ é™¤é—¨ç¦è®¾å¤‡
smart:access:device:control // æ§åˆ¶é—¨ç¦è®¾å¤‡

// é—¨ç¦è®°å½•æƒé™
access:record:query         // æŸ¥è¯¢é—¨ç¦è®°å½•
access:record:export        // å¯¼å‡ºé—¨ç¦è®°å½•
access:statistics:device    // è®¾å¤‡ç»Ÿè®¡

// é—¨ç¦åŒºåŸŸæƒé™
smart:access:area:add       // æ·»åŠ é—¨ç¦åŒºåŸŸ
smart:access:area:update    // æ›´æ–°é—¨ç¦åŒºåŸŸ
smart:access:area:delete    // åˆ é™¤é—¨ç¦åŒºåŸŸ
```

#### 4. è®¾å¤‡ç®¡ç†æ¨¡å— (device)
```javascript
// è®¾å¤‡åŸºç¡€æƒé™
device:add                  // æ·»åŠ è®¾å¤‡
device:update               // æ›´æ–°è®¾å¤‡
device:delete               // åˆ é™¤è®¾å¤‡
device:query                // æŸ¥è¯¢è®¾å¤‡
device:export               // å¯¼å‡ºè®¾å¤‡ä¿¡æ¯

// è®¾å¤‡æ§åˆ¶æƒé™
device:control              // è®¾å¤‡æ§åˆ¶
device:enable               // å¯ç”¨è®¾å¤‡
device:disable              // ç¦ç”¨è®¾å¤‡
device:config:update        // æ›´æ–°è®¾å¤‡é…ç½®
```

#### 5. ç¼“å­˜ç®¡ç†æ¨¡å— (cache)
```javascript
// ç¼“å­˜æ“ä½œæƒé™
cache:operate:get           // è·å–ç¼“å­˜
cache:operate:set           // è®¾ç½®ç¼“å­˜
cache:operate:delete        // åˆ é™¤ç¼“å­˜
cache:operate:batch         // æ‰¹é‡æ“ä½œ

// ç¼“å­˜ç®¡ç†æƒé™
cache:manage:clear          // æ¸…ç©ºç¼“å­˜
cache:manage:warmup         // ç¼“å­˜é¢„çƒ­
cache:manage:reset          // é‡ç½®ç¼“å­˜
cache:statistics:query      // æŸ¥è¯¢ç¼“å­˜ç»Ÿè®¡
```

---

## ğŸ› ï¸ åç«¯æƒé™æ§åˆ¶å®ç°

### Controllerå±‚æƒé™æ§åˆ¶

åŸºäºrepowikiç³»ç»Ÿå®‰å…¨è§„èŒƒï¼Œæ‰€æœ‰Controlleræ–¹æ³•å¿…é¡»ä½¿ç”¨`@SaCheckPermission`æ³¨è§£ï¼š

```java
@RestController
@RequestMapping("/api/consume/record")
@Tag(name = "æ¶ˆè´¹è®°å½•ç®¡ç†")
public class ConsumeRecordController {

    @Resource
    private ConsumeRecordService consumeRecordService;

    @GetMapping("/query")
    @Operation(summary = "æŸ¥è¯¢æ¶ˆè´¹è®°å½•")
    @SaCheckPermission("consume:record:query")
    public ResponseDTO<PageResult<ConsumeRecordVO>> queryConsumeRecords(
            @Valid ConsumeRecordQueryForm queryForm) {
        PageResult<ConsumeRecordVO> result = consumeRecordService.queryRecords(queryForm);
        return ResponseDTO.success(result);
    }

    @GetMapping("/export")
    @Operation(summary = "å¯¼å‡ºæ¶ˆè´¹è®°å½•")
    @SaCheckPermission("consume:record:export")
    public void exportConsumeRecords(
            @Valid ConsumeRecordQueryForm queryForm,
            HttpServletResponse response) {
        consumeRecordService.exportRecords(queryForm, response);
    }

    @PostMapping("/cancel")
    @Operation(summary = "å–æ¶ˆæ¶ˆè´¹è®°å½•")
    @SaCheckPermission("consume:record:cancel")
    public ResponseDTO<String> cancelConsumeRecord(@RequestBody @Valid ConsumeCancelForm cancelForm) {
        String result = consumeRecordService.cancelRecord(cancelForm);
        return ResponseDTO.success(result);
    }
}
```

### æƒé™æ³¨è§£ä½¿ç”¨è§„èŒƒ

#### 1. åŸºæœ¬æƒé™æ£€æŸ¥
```java
@SaCheckPermission("user:query")
public ResponseDTO<List<UserVO>> queryUsers() {
    // ä¸šåŠ¡é€»è¾‘
}
```

#### 2. å¤šæƒé™ORæ£€æŸ¥
```java
@SaCheckPermission("user:add", "user:create")
public ResponseDTO<String> addUser() {
    // ä¸šåŠ¡é€»è¾‘
}
```

#### 3. è§’è‰²æƒé™æ£€æŸ¥
```java
@SaCheckRole("admin")
@SaCheckPermission("system:config")
public ResponseDTO<String> updateSystemConfig() {
    // ä¸šåŠ¡é€»è¾‘
}
```

### æƒé™éªŒè¯æœ€ä½³å®è·µ

#### âœ… å¿…é¡»éµå¾ªçš„åŸåˆ™
1. **æ‰€æœ‰APIå¿…é¡»æœ‰æƒé™æ§åˆ¶**ï¼ˆrepowikiå¼ºåˆ¶è¦æ±‚ï¼‰
2. **ä½¿ç”¨æ ‡å‡†æƒé™æ ‡è¯†æ ¼å¼**
3. **ç»†ç²’åº¦æƒé™æ§åˆ¶ï¼Œé¿å…è¿‡äºå®½æ³›çš„æƒé™**
4. **æ•æ„Ÿæ“ä½œéœ€è¦å¤šé‡æƒé™éªŒè¯**

#### âŒ ç¦æ­¢çš„æ“ä½œ
1. **ç»•è¿‡æƒé™æ£€æŸ¥**
2. **ç¡¬ç¼–ç æƒé™åˆ¤æ–­**
3. **ä½¿ç”¨è¿‡å®½çš„æƒé™æ ‡è¯†**
4. **åœ¨Controllerå±‚ç¼–å†™æƒé™é€»è¾‘**

---

## ğŸ¨ å‰ç«¯æƒé™æ§åˆ¶å®ç°

### v-permissionæŒ‡ä»¤ä½¿ç”¨

åŸºäºAnt Design Vueå’ŒVue3çš„æƒé™æ§åˆ¶æŒ‡ä»¤ï¼š

```vue
<template>
  <div class="consume-record-page">
    <!-- é¡µé¢æ“ä½œæŒ‰é’® -->
    <div class="page-actions">
      <!-- å¯¼å‡ºæŒ‰é’® - éœ€è¦consume:record:exportæƒé™ -->
      <a-button
        type="primary"
        @click="handleExport"
        v-permission="['consume:record:export']">
        <template #icon><ExportOutlined /></template>
        å¯¼å‡ºæ•°æ®
      </a-button>

      <!-- æ–°å¢æŒ‰é’® - éœ€è¦consume:record:addæƒé™ -->
      <a-button
        type="primary"
        @click="handleAdd"
        v-permission="['consume:record:add']">
        <template #icon><PlusOutlined /></template>
        æ–°å¢è®°å½•
      </a-button>
    </div>

    <!-- è¡¨æ ¼æ“ä½œåˆ— -->
    <a-table :columns="columns" :data-source="dataSource">
      <template #bodyCell="{ column, record }">
        <template v-if="column.key === 'actions'">
          <a-space>
            <!-- æŸ¥çœ‹è¯¦æƒ… - éœ€è¦consume:record:detailæƒé™ -->
            <a-button
              type="link"
              size="small"
              @click="handleViewDetail(record)"
              v-permission="['consume:record:detail']">
              è¯¦æƒ…
            </a-button>

            <!-- ç¼–è¾‘ - éœ€è¦consume:record:updateæƒé™ -->
            <a-button
              type="link"
              size="small"
              @click="handleEdit(record)"
              v-permission="['consume:record:update']">
              ç¼–è¾‘
            </a-button>

            <!-- åˆ é™¤ - éœ€è¦consume:record:deleteæƒé™ -->
            <a-button
              type="link"
              size="small"
              danger
              @click="handleDelete(record)"
              v-permission="['consume:record:delete']">
              åˆ é™¤
            </a-button>
          </a-space>
        </template>
      </template>
    </a-table>
  </div>
</template>
```

### æƒé™æŒ‡ä»¤è¿›é˜¶ç”¨æ³•

#### 1. å¤šæƒé™ORæ§åˆ¶
```vue
<!-- åŒæ—¶å…·æœ‰ä¸¤ä¸ªæƒé™ä¹‹ä¸€å³å¯ -->
<a-button v-permission="['consume:record:add', 'consume:record:create']">
  æ–°å¢è®°å½•
</a-button>
```

#### 2. æƒé™æ§åˆ¶ç»„åˆ
```vue
<template>
  <div>
    <!-- åŸºç¡€æŸ¥è¯¢æƒé™ -->
    <a-form v-permission="['consume:record:query']">
      <!-- æŸ¥è¯¢è¡¨å•å†…å®¹ -->
    </a-form>

    <!-- é«˜çº§æ“ä½œæƒé™ -->
    <div v-permission="['consume:record:export', 'consume:record:cancel']">
      <!-- é«˜çº§æ“ä½œæŒ‰é’®ç»„ -->
    </div>
  </div>
</template>
```

#### 3. æƒé™æ§åˆ¶ä¸ç¦ç”¨çŠ¶æ€
```vue
<template>
  <a-button
    :disabled="!hasPermission(['consume:record:edit'])"
    @click="handleEdit">
    ç¼–è¾‘
  </a-button>
</template>

<script setup>
import { useUserStore } from '@/stores/user';

const userStore = useUserStore();

const hasPermission = (permissions) => {
  return userStore.hasPermission(permissions);
};
</script>
```

### æƒé™æ§åˆ¶æœ€ä½³å®è·µ

#### âœ… æ¨èåšæ³•
1. **æ‰€æœ‰æ•æ„Ÿæ“ä½œéƒ½è¦æœ‰æƒé™æ§åˆ¶**
2. **ä½¿ç”¨æ ‡å‡†çš„v-permissionæŒ‡ä»¤**
3. **æƒé™æ ‡è¯†ä¸åç«¯ä¿æŒä¸€è‡´**
4. **æä¾›å‹å¥½çš„æ— æƒé™æç¤º**

#### âŒ é¿å…åšæ³•
1. **ä½¿ç”¨éæ ‡å‡†æƒé™æŒ‡ä»¤ï¼ˆå¦‚v-privilegeã€v-authï¼‰**
2. **åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æƒé™åˆ¤æ–­**
3. **æƒé™æ ‡è¯†æ ¼å¼ä¸è§„èŒƒ**
4. **å¿½ç•¥æƒé™æ§åˆ¶çš„ç”¨æˆ·ä½“éªŒ**

---

## ğŸ”§ æƒé™æ§åˆ¶å·¥å…·é›†

### 1. æƒé™æå–å·¥å…·

ä½¿ç”¨Pythonè„šæœ¬è‡ªåŠ¨æå–åç«¯æƒé™æ ‡è¯†ï¼š

```bash
# æå–åç«¯æƒé™
python3 scripts/permission_extractor.py

# ç”Ÿæˆæƒé™æ˜ å°„
python3 scripts/permission_extractor.py --generate-mapping
```

### 2. æƒé™ä¿®å¤å·¥å…·

æ‰¹é‡ä¿®å¤å‰ç«¯æƒé™æ§åˆ¶ï¼š

```bash
# ä¿®å¤æƒé™æŒ‡ä»¤æ ¼å¼
./scripts/fix-permission-directives.sh

# å¿«é€Ÿæƒé™ä¿®å¤
./scripts/quick-permission-fix.sh
```

### 3. æƒé™æ£€æŸ¥å·¥å…·

éªŒè¯æƒé™æ§åˆ¶è¦†ç›–ç‡ï¼š

```bash
# æ£€æŸ¥æƒé™è¦†ç›–ç‡
./scripts/check-permission-coverage.sh

# æŒç»­ç›‘æ§æƒé™çŠ¶æ€
./scripts/permission-monitor.sh --continuous
```

### 4. CIæƒé™éªŒè¯

GitHub Actionsè‡ªåŠ¨éªŒè¯ï¼š

```yaml
# .github/workflows/permission-validation.yml
name: Permission Control Validation
on: [push, pull_request]
jobs:
  permission-validation:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Validate Permissions
        run: |
          ./scripts/check-permission-coverage.sh
```

---

## ğŸ§ª æƒé™æ§åˆ¶æµ‹è¯•

### è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶

ä½¿ç”¨Jestè¿›è¡Œæƒé™æ§åˆ¶å•å…ƒæµ‹è¯•ï¼š

```javascript
// tests/unit/permission-control.test.js
describe('æƒé™æ§åˆ¶æµ‹è¯•å¥—ä»¶', () => {
  it('v-permissionæŒ‡ä»¤åº”è¯¥æ­£ç¡®æ§åˆ¶æƒé™', () => {
    const wrapper = mount({
      template: `
        <button v-permission="['test:permission']" data-testid="protected-button">
          å—ä¿æŠ¤æŒ‰é’®
        </button>
      `,
      directives: { permission: vPermission }
    });

    expect(wrapper.find('[data-testid="protected-button"]').isVisible()).toBe(false);
  });
});
```

### æµ‹è¯•è¦†ç›–è¦æ±‚

åŸºäºrepowikiè´¨é‡æ ‡å‡†ï¼š

| æµ‹è¯•ç±»å‹ | è¦†ç›–ç‡è¦æ±‚ | è¯´æ˜ |
|---------|-----------|------|
| æƒé™æŒ‡ä»¤æµ‹è¯• | 90%+ | æ‰€æœ‰v-permissionæŒ‡ä»¤ |
| æƒé™APIæµ‹è¯• | 95%+ | æ‰€æœ‰æƒé™æ§åˆ¶API |
| æƒé™ä¸€è‡´æ€§æµ‹è¯• | 100% | å‰åç«¯æƒé™ä¸€è‡´æ€§ |
| å®‰å…¨æµ‹è¯• | 100% | æƒé™ç»•è¿‡æµ‹è¯• |

---

## ğŸ“Š æƒé™æ§åˆ¶ç›‘æ§

### å®æ—¶ç›‘æ§æŒ‡æ ‡

1. **æƒé™è¦†ç›–ç‡ç›‘æ§**
   - å‰ç«¯Vueæ–‡ä»¶æƒé™æ§åˆ¶è¦†ç›–ç‡
   - åç«¯Controlleræƒé™æ³¨è§£è¦†ç›–ç‡
   - æƒé™æ ‡è¯†ä¸€è‡´æ€§æ£€æŸ¥

2. **æƒé™ä½¿ç”¨ç›‘æ§**
   - æƒé™æ£€æŸ¥APIè°ƒç”¨é‡
   - æƒé™éªŒè¯å¤±è´¥æ¬¡æ•°
   - æƒé™ç¼“å­˜å‘½ä¸­ç‡

3. **å®‰å…¨ç›‘æ§**
   - æƒé™ç»•è¿‡å°è¯•æ¬¡æ•°
   - å¼‚å¸¸æƒé™è®¿é—®
   - æƒé™é…ç½®å˜æ›´è®°å½•

### ç›‘æ§å·¥å…·

```bash
# å¯åŠ¨æŒç»­ç›‘æ§
./scripts/permission-monitor.sh --continuous

# æŸ¥çœ‹ç›‘æ§æŠ¥å‘Š
cat permission_trend_report_$(date +%Y%m%d).md
```

---

## ğŸš¨ æƒé™æ§åˆ¶å®‰å…¨è¦æ±‚

### repowikiç³»ç»Ÿå®‰å…¨è§„èŒƒå¼ºåˆ¶è¦æ±‚

#### ğŸš« ç»å¯¹ç¦æ­¢
```markdown
âŒ ç»•è¿‡Sa-Tokenæƒé™æ£€æŸ¥
âŒ åœ¨Controllerä¸­ç›´æ¥æ“ä½œæƒé™é€»è¾‘
âŒ ä½¿ç”¨ç¡¬ç¼–ç æƒé™åˆ¤æ–­
âŒ æƒé™æ ‡è¯†æ ¼å¼ä¸è§„èŒƒ
âŒ æ•æ„Ÿæ“ä½œç¼ºå°‘æƒé™æ§åˆ¶
```

#### âœ… å¿…é¡»æ‰§è¡Œ
```markdown
âœ… æ‰€æœ‰APIå¿…é¡»æœ‰@SaCheckPermissionæ³¨è§£
âœ… å‰ç«¯æ•æ„Ÿæ“ä½œå¿…é¡»ä½¿ç”¨v-permissionæŒ‡ä»¤
âœ… æƒé™æ ‡è¯†å¿…é¡»ç¬¦åˆæ ‡å‡†æ ¼å¼
âœ… å®šæœŸè¿›è¡Œæƒé™å®‰å…¨å®¡è®¡
âœ… å»ºç«‹æƒé™ç›‘æ§é¢„è­¦æœºåˆ¶
```

### å®‰å…¨ç­‰çº§ä¿æŠ¤è¦æ±‚

æ»¡è¶³ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤ä¸‰çº§æ ‡å‡†ï¼š

1. **èº«ä»½è®¤è¯**ï¼šä½¿ç”¨Sa-Tokenè¿›è¡Œç»Ÿä¸€èº«ä»½è®¤è¯
2. **è®¿é—®æ§åˆ¶**ï¼šåŸºäºRBACçš„ç»†ç²’åº¦æƒé™æ§åˆ¶
3. **å®‰å…¨å®¡è®¡**ï¼šå®Œæ•´çš„æƒé™æ“ä½œæ—¥å¿—è®°å½•
4. **æ•°æ®ä¿æŠ¤**ï¼šæ•æ„Ÿæ•°æ®æƒé™è®¿é—®æ§åˆ¶
5. **å®‰å…¨å®¡è®¡**ï¼šå®šæœŸæƒé™å®‰å…¨æ£€æŸ¥å’Œè¯„ä¼°

---

## ğŸ“š å¼€å‘æ£€æŸ¥æ¸…å•

### å¼€å‘é˜¶æ®µæ£€æŸ¥

#### åç«¯å¼€å‘
- [ ] æ‰€æœ‰Controlleræ–¹æ³•éƒ½æœ‰@SaCheckPermissionæ³¨è§£
- [ ] æƒé™æ ‡è¯†ç¬¦åˆæ ‡å‡†æ ¼å¼ï¼š{æ¨¡å—}:{æ“ä½œ}:{å…·ä½“åŠ¨ä½œ}
- [ ] æ•æ„Ÿæ“ä½œæœ‰å¤šé‡æƒé™éªŒè¯
- [ ] æƒé™æ£€æŸ¥é€»è¾‘ä¸æ³„éœ²ä¸šåŠ¡ä¿¡æ¯

#### å‰ç«¯å¼€å‘
- [ ] æ‰€æœ‰æ•æ„Ÿæ“ä½œéƒ½æœ‰v-permissionæŒ‡ä»¤
- [ ] æƒé™æ ‡è¯†ä¸åç«¯ä¿æŒä¸€è‡´
- [ ] æä¾›å‹å¥½çš„æ— æƒé™æç¤º
- [ ] æƒé™æ§åˆ¶ä¸å½±å“é¡µé¢æ€§èƒ½

### æµ‹è¯•é˜¶æ®µæ£€æŸ¥
- [ ] æƒé™æ§åˆ¶æµ‹è¯•è¦†ç›–ç‡â‰¥90%
- [ ] æƒé™ç»•è¿‡æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] å‰åç«¯æƒé™ä¸€è‡´æ€§éªŒè¯é€šè¿‡
- [ ] æƒé™ç¼“å­˜æœºåˆ¶æ­£å¸¸å·¥ä½œ

### éƒ¨ç½²é˜¶æ®µæ£€æŸ¥
- [ ] æƒé™é…ç½®æ­£ç¡®éƒ¨ç½²
- [ ] æƒé™ç›‘æ§æŒ‡æ ‡æ­£å¸¸
- [ ] å®‰å…¨å®¡è®¡æ—¥å¿—æ­£å¸¸è®°å½•
- [ ] æƒé™éªŒè¯å“åº”æ—¶é—´æ­£å¸¸

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æƒé™æŒ‡ä»¤ä¸ç”Ÿæ•ˆ
```javascript
// é—®é¢˜ï¼šv-permissionæŒ‡ä»¤æ²¡æœ‰éšè—å…ƒç´ 
// è§£å†³ï¼šæ£€æŸ¥æƒé™æ ‡è¯†æ ¼å¼å’Œç”¨æˆ·æƒé™é…ç½®

// æ­£ç¡®æ ¼å¼
v-permission="['consume:record:export']"

// é”™è¯¯æ ¼å¼
v-permission="'consume:record:export'"  // ç¼ºå°‘æ•°ç»„
v-privilege="consume:record:export"     // éæ ‡å‡†æŒ‡ä»¤
```

#### 2. åç«¯æƒé™æ³¨è§£å¤±æ•ˆ
```java
// é—®é¢˜ï¼š@SaCheckPermissionæ³¨è§£ä¸ç”Ÿæ•ˆ
// è§£å†³ï¼šç¡®ä¿Sa-Tokené…ç½®æ­£ç¡®

@Configuration
public class SaTokenConfig {
    @Bean
    public SaTokenConfig saTokenConfig() {
        SaTokenConfig config = new SaTokenConfig();
        config.setTokenName("satoken");
        config.setTimeout(2592000);
        return config;
    }
}
```

#### 3. æƒé™æ ‡è¯†ä¸ä¸€è‡´
```bash
# é—®é¢˜ï¼šå‰åç«¯æƒé™æ ‡è¯†ä¸åŒ¹é…
# è§£å†³ï¼šä½¿ç”¨æƒé™æå–å·¥å…·æ£€æŸ¥ä¸€è‡´æ€§

python3 scripts/permission_extractor.py --check-consistency
```

---

## ğŸ“– åŸ¹è®­ææ–™

### æ–°äººåŸ¹è®­å†…å®¹

1. **repowikiç³»ç»Ÿå®‰å…¨è§„èŒƒå­¦ä¹ **ï¼ˆ1å¤©ï¼‰
2. **Sa-Tokenæƒé™æ§åˆ¶åŸç†**ï¼ˆ0.5å¤©ï¼‰
3. **æƒé™æ ‡è¯†å‘½åè§„èŒƒ**ï¼ˆ0.5å¤©ï¼‰
4. **å‰åç«¯æƒé™æ§åˆ¶å®è·µ**ï¼ˆ1å¤©ï¼‰
5. **æƒé™æ§åˆ¶æµ‹è¯•æ–¹æ³•**ï¼ˆ0.5å¤©ï¼‰

### è¿›é˜¶åŸ¹è®­å†…å®¹

1. **å¤æ‚æƒé™åœºæ™¯å¤„ç†**
2. **æƒé™æ€§èƒ½ä¼˜åŒ–**
3. **æƒé™ç›‘æ§å’Œå‘Šè­¦**
4. **æƒé™å®‰å…¨å®¡è®¡**
5. **æƒé™æ•…éšœæ’é™¤**

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- **æƒé™æ§åˆ¶é—®é¢˜**: æƒé™æ§åˆ¶ä¸“å®¶ç»„
- **repowikiè§„èŒƒå’¨è¯¢**: SmartAdminè§„èŒƒæ²»ç†å§”å‘˜ä¼š
- **å·¥å…·ä½¿ç”¨é—®é¢˜**: å¼€å‘å·¥å…·æ”¯æŒå›¢é˜Ÿ

### åé¦ˆæ¸ é“
- **åŠŸèƒ½å»ºè®®**: æäº¤Feature Request
- **BugæŠ¥å‘Š**: æäº¤Issueå¹¶é™„ä¸Šè¯¦ç»†æ—¥å¿—
- **å®‰å…¨é—®é¢˜**: ç«‹å³è”ç³»å®‰å…¨å›¢é˜Ÿ
- **æ–‡æ¡£æ”¹è¿›**: æäº¤PRæ›´æ–°æ–‡æ¡£

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-17
**ç»´æŠ¤å›¢é˜Ÿ**: SmartAdminè§„èŒƒæ²»ç†å§”å‘˜ä¼š
**æ–‡æ¡£çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

**é€šè¿‡éµå¾ªæœ¬æŒ‡å—ï¼ŒIOE-DREAMé¡¹ç›®å°†å»ºç«‹èµ·å®Œæ•´çš„ã€ç¬¦åˆrepowikiç³»ç»Ÿå®‰å…¨è§„èŒƒçš„æƒé™æ§åˆ¶ä½“ç³»ï¼**