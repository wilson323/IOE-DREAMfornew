# å‰ç«¯å¼€å‘æŒ‡å—ï¼ˆæƒå¨æ–‡æ¡£ï¼‰

> **ğŸ“‹ æ–‡æ¡£ç‰ˆæœ¬**: v4.0.0 (æ•´åˆç‰ˆ)
> **ğŸ“‹ æ–‡æ¡£èŒè´£**: SmartAdminé¡¹ç›®çš„å‰ç«¯å¼€å‘æƒå¨æŒ‡å—ï¼Œæ•´åˆäº†v2å‰ç«¯è§„èŒƒçš„ç²¾åå†…å®¹ã€‚

## âš ï¸ å‰ç«¯é“å¾‹ï¼ˆä¸å¯è¿åï¼‰

### ğŸš« ç»å¯¹ç¦æ­¢
```markdown
âŒ ç¦æ­¢åœ¨æ¨¡æ¿ä¸­ç¼–å†™å¤æ‚é€»è¾‘
âŒ ç¦æ­¢ç›´æ¥ä¿®æ”¹propsæ•°æ®
âŒ ç¦æ­¢ä½¿ç”¨v-ifå’Œv-foråœ¨åŒä¸€å…ƒç´ 
âŒ ç¦æ­¢åœ¨dataä¸­å®šä¹‰å†—ä½™æ•°æ®
âŒ ç¦æ­¢ä½¿ç”¨å…¨å±€æ ·å¼æ±¡æŸ“ç»„ä»¶
âŒ ç¦æ­¢åœ¨createdä¸­è¿›è¡Œå¼‚æ­¥æ“ä½œ
âŒ ç¦æ­¢ä½¿ç”¨setTimeoutä»£æ›¿watch
âŒ ç¦æ­¢å¿½ç•¥é”™è¯¯å¤„ç†
```

### âœ… å¿…é¡»æ‰§è¡Œ
```markdown
âœ… å¿…é¡»ä½¿ç”¨Vue3 Composition API
âœ… å¿…é¡»éµå¾ªç»„ä»¶åŒ–å¼€å‘åŸåˆ™
âœ… å¿…é¡»ä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹æ£€æŸ¥
âœ… å¿…ç»Ÿä¸€æ ·å¼è§„èŒƒå’Œå‘½å
âœ… å¿…é¡»è¿›è¡Œç»„ä»¶å•å…ƒæµ‹è¯•
âœ… å¿…é¡»ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
âœ… å¿…é¡»ä¿è¯ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
âœ… å¿…é¡»éµå¾ªå“åº”å¼è®¾è®¡åŸåˆ™
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„è§„èŒƒ

### ç›®å½•ç»“æ„
```
smart-admin-web/
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                   # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ system/           # ç³»ç»Ÿæ¨¡å—API
â”‚   â”‚   â””â”€â”€ business/         # ä¸šåŠ¡æ¨¡å—API
â”‚   â”œâ”€â”€ assets/                # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ images/           # å›¾ç‰‡
â”‚   â”‚   â”œâ”€â”€ icons/            # å›¾æ ‡
â”‚   â”‚   â””â”€â”€ styles/           # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/            # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Table/            # è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Form/             # è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ composables/           # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ directives/            # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”œâ”€â”€ hooks/                 # é€šç”¨Hook
â”‚   â”œâ”€â”€ router/                # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ stores/                # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/                 # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ views/                 # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ system/           # ç³»ç»Ÿç®¡ç†
â”‚   â”‚   â””â”€â”€ business/         # ä¸šåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ App.vue                # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts                # å…¥å£æ–‡ä»¶
â”œâ”€â”€ .env.development           # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.production            # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ .eslintrc.js               # ESLinté…ç½®
â”œâ”€â”€ .prettierrc                # Prettieré…ç½®
â”œâ”€â”€ package.json               # ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json              # TypeScripté…ç½®
â””â”€â”€ vite.config.ts             # Viteé…ç½®
```

## ğŸ“ å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å
```javascript
// âœ… ç»„ä»¶æ–‡ä»¶ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰
UserList.vue
EmployeeForm.vue
DepartmentTree.vue

// âœ… å·¥å…·æ–‡ä»¶ï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰
formatUtil.ts
validateHelper.ts
dateFormat.ts

// âœ… APIæ–‡ä»¶ï¼šå°é©¼å³° + Apiåç¼€
employeeApi.ts
departmentApi.ts
roleApi.ts

// âœ… Storeæ¨¡å—ï¼šå°é©¼å³°
userStore.ts
appStore.ts
permissionStore.ts

// âœ… ç±»å‹å®šä¹‰ï¼šå°é©¼å³° + Typeåç¼€
userType.ts
menuType.ts
commonType.ts

// âŒ é”™è¯¯ç¤ºä¾‹
user-list.vue        // ä½¿ç”¨è¿å­—ç¬¦
employee_form.vue    // ä½¿ç”¨ä¸‹åˆ’çº¿
Validate_Helper.ts   // æ··åˆä½¿ç”¨
```

### Vueç»„ä»¶å‘½å
```vue
<!-- âœ… ç»„ä»¶åï¼šå¤šå•è¯ï¼Œå¤§é©¼å³° -->
<template>
  <div class="employee-list">
    <SearchForm />
    <DataTable />
    <EditModal />
  </div>
</template>

<script setup lang="ts">
// âœ… ç»„ä»¶åä½¿ç”¨ name å±æ€§
import { defineOptions } from 'vue';

defineOptions({
  name: 'EmployeeList'
});
</script>
```

### å˜é‡å‘½å
```typescript
// âœ… å˜é‡å‘½åï¼šå°é©¼å³°
const userName = 'å¼ ä¸‰';
const userList = ref<User[]>([]);
const isLoading = ref(false);

// âœ… å¸¸é‡å‘½åï¼šå…¨å¤§å†™ä¸‹åˆ’çº¿
const API_BASE_URL = 'https://api.example.com';
const MAX_FILE_SIZE = 10 * 1024 * 1024;

// âœ… å‡½æ•°å‘½åï¼šåŠ¨è¯å¼€å¤´
const getUserList = async () => {
  // è·å–ç”¨æˆ·åˆ—è¡¨
};

const validateForm = (form: FormData) => {
  // éªŒè¯è¡¨å•
};

// âœ… æ¥å£å‘½åï¼šIå‰ç¼€
interface IUser {
  userId: number;
  userName: string;
  email: string;
}

// âœ… ç±»å‹åˆ«åï¼šæè¿°æ€§å‘½å
type UserRole = 'admin' | 'user' | 'guest';
type HttpMethods = 'GET' | 'POST' | 'PUT' | 'DELETE';
```

## ğŸ§© ç»„ä»¶å¼€å‘è§„èŒƒ

### ç»„ä»¶ç»“æ„æ¨¡æ¿
```vue
<template>
  <div class="component-name">
    <!-- ç»„ä»¶å†…å®¹ -->
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue';
import type { ComponentProps } from './types';

// ç»„ä»¶å±æ€§å®šä¹‰
interface Props {
  title?: string;
  data?: any[];
  loading?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
  title: '',
  data: () => [],
  loading: false
});

// ç»„ä»¶äº‹ä»¶å®šä¹‰
interface Emits {
  update: [value: any];
  change: [event: Event];
  delete: [id: number];
}

const emit = defineEmits<Emits>();

// å“åº”å¼æ•°æ®
const internalData = ref<any[]>([]);

// è®¡ç®—å±æ€§
const computedValue = computed(() => {
  return props.data.length > 0 ? props.data : internalData.value;
});

// æ–¹æ³•å®šä¹‰
const handleClick = (event: Event) => {
  emit('change', event);
};

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  // åˆå§‹åŒ–é€»è¾‘
});
</script>

<style scoped lang="scss">
.component-name {
  // ç»„ä»¶æ ·å¼
}
</style>
```

### ç»„ä»¶é€šä¿¡è§„èŒƒ
```typescript
// çˆ¶å­ç»„ä»¶é€šä¿¡
// çˆ¶ç»„ä»¶
<template>
  <ChildComponent
    :title="title"
    :data="data"
    @update="handleUpdate"
    @change="handleChange"
  />
</template>

// å­ç»„ä»¶
const props = defineProps<{
  title: string;
  data: any[];
}>();

const emit = defineEmits<{
  update: [value: any];
  change: [event: Event];
}>();

// å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼ˆä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼‰
import { useEventBus } from '@/composables/useEventBus';

const eventBus = useEventBus();

// å‘é€äº‹ä»¶
eventBus.emit('user-updated', userData);

// ç›‘å¬äº‹ä»¶
eventBus.on('user-updated', (userData) => {
  // å¤„ç†ç”¨æˆ·æ›´æ–°
});

// è·¨å±‚çº§é€šä¿¡ï¼ˆä½¿ç”¨provide/injectï¼‰
// ç¥–å…ˆç»„ä»¶
provide('userInfo', reactive({
  userId: 123,
  userName: 'å¼ ä¸‰'
}));

// åä»£ç»„ä»¶
const userInfo = inject('userInfo');
```

## ğŸ¨ æ ·å¼è§„èŒƒ

### CSSç±»å‘½å
```scss
// BEMå‘½åè§„èŒƒ
.block {
  // å—
  &__element {
    // å…ƒç´ 
  }

  &--modifier {
    // ä¿®é¥°ç¬¦
  }
}

// ç¤ºä¾‹
.user-card {
  &__header {
    display: flex;
    align-items: center;
  }

  &__title {
    font-size: 16px;
    font-weight: bold;
  }

  &__avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
  }

  &--active {
    border: 2px solid #1890ff;
  }

  &--disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}
```

### æ ·å¼ç»„ç»‡
```scss
// styles/index.scss - ä¸»æ ·å¼æ–‡ä»¶
@import './variables.scss';    // å˜é‡å®šä¹‰
@import './mixins.scss';       // æ··å…¥å‡½æ•°
@import './reset.scss';        // æ ·å¼é‡ç½®
@import './common.scss';       // é€šç”¨æ ·å¼
@import './components.scss';   // ç»„ä»¶æ ·å¼

// styles/variables.scss - å˜é‡å®šä¹‰
:root {
  // ä¸»è‰²è°ƒ
  --primary-color: #1890ff;
  --success-color: #52c41a;
  --warning-color: #faad14;
  --error-color: #f5222d;

  // å­—ä½“
  --font-size-base: 14px;
  --font-size-lg: 16px;
  --font-size-sm: 12px;

  // é—´è·
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;

  // åœ†è§’
  --border-radius-base: 4px;
  --border-radius-sm: 2px;
  --border-radius-lg: 8px;
}
```

## ğŸ”„ çŠ¶æ€ç®¡ç†è§„èŒƒ

### Pinia Storeç»“æ„
```typescript
// stores/user.ts
import { defineStore } from 'pinia';
import type { User, LoginForm } from '@/types/user';
import { userApi } from '@/api/user';

interface UserState {
  userInfo: User | null;
  token: string | null;
  permissions: string[];
  loading: boolean;
}

export const useUserStore = defineStore('user', {
  state: (): UserState => ({
    userInfo: null,
    token: localStorage.getItem('token'),
    permissions: [],
    loading: false
  }),

  getters: {
    isLoggedIn: (state): boolean => !!state.token,
    userName: (state): string => state.userInfo?.userName || '',
    hasPermission: (state) => (permission: string): boolean => {
      return state.permissions.includes(permission);
    }
  },

  actions: {
    async login(loginForm: LoginForm) {
      try {
        this.loading = true;
        const response = await userApi.login(loginForm);

        this.token = response.token;
        this.userInfo = response.userInfo;
        this.permissions = response.permissions;

        localStorage.setItem('token', response.token);

        return Promise.resolve(response);
      } catch (error) {
        return Promise.reject(error);
      } finally {
        this.loading = false;
      }
    },

    logout() {
      this.userInfo = null;
      this.token = null;
      this.permissions = [];
      localStorage.removeItem('token');
    },

    async updateUserInfo(userInfo: Partial<User>) {
      if (this.userInfo) {
        this.userInfo = { ...this.userInfo, ...userInfo };
      }
    }
  }
});
```

## ğŸ”§ APIè°ƒç”¨è§„èŒƒ

### APIå°è£…
```typescript
// api/user.ts
import { http } from '@/utils/http';
import type { User, LoginForm, RegisterForm } from '@/types/user';

export const userApi = {
  // ç”¨æˆ·ç™»å½•
  login: (data: LoginForm) => {
    return http.post<{ token: string; userInfo: User }>('/auth/login', data);
  },

  // è·å–ç”¨æˆ·ä¿¡æ¯
  getUserInfo: () => {
    return http.get<User>('/user/info');
  },

  // è·å–ç”¨æˆ·åˆ—è¡¨
  getUserList: (params: any) => {
    return http.get<{ records: User[]; total: number }>('/user/list', params);
  },

  // åˆ›å»ºç”¨æˆ·
  createUser: (data: any) => {
    return http.post<User>('/user', data);
  },

  // æ›´æ–°ç”¨æˆ·
  updateUser: (id: number, data: any) => {
    return http.put<User>(`/user/${id}`, data);
  },

  // åˆ é™¤ç”¨æˆ·
  deleteUser: (id: number) => {
    return http.delete(`/user/${id}`);
  }
};
```

### é”™è¯¯å¤„ç†
```typescript
// composables/useApi.ts
import { ref } from 'vue';
import { ElMessage } from 'element-plus';

export function useApi<T>() {
  const loading = ref(false);
  const error = ref<string | null>(null);

  const execute = async (apiCall: () => Promise<T>): Promise<T | null> => {
    try {
      loading.value = true;
      error.value = null;

      const result = await apiCall();
      return result;
    } catch (err: any) {
      error.value = err.message || 'è¯·æ±‚å¤±è´¥';
      ElMessage.error(error.value);
      return null;
    } finally {
      loading.value = false;
    }
  };

  return {
    loading,
    error,
    execute
  };
}
```

## ğŸ“± å“åº”å¼è®¾è®¡è§„èŒƒ

### æ–­ç‚¹è®¾ç½®
```scss
// styles/variables.scss
$breakpoints: (
  'xs': 480px,
  'sm': 768px,
  'md': 992px,
  'lg': 1200px,
  'xl': 1600px
);

// å“åº”å¼æ··å…¥
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
.container {
  width: 100%;
  padding: 0 16px;

  @include respond-to('sm') {
    max-width: 750px;
    margin: 0 auto;
  }

  @include respond-to('md') {
    max-width: 970px;
  }

  @include respond-to('lg') {
    max-width: 1170px;
  }
}
```

### ç§»åŠ¨ç«¯é€‚é…
```vue
<template>
  <div class="responsive-layout">
    <Header class="header" />
    <main class="main-content">
      <Sidebar class="sidebar" />
      <Content class="content" />
    </main>
  </div>
</template>

<style scoped lang="scss">
.responsive-layout {
  min-height: 100vh;

  .main-content {
    display: flex;
    flex-direction: column;

    @include respond-to('md') {
      flex-direction: row;
    }
  }

  .sidebar {
    width: 100%;
    order: 2;

    @include respond-to('md') {
      width: 250px;
      order: 1;
    }
  }

  .content {
    flex: 1;
    order: 1;

    @include respond-to('md') {
      order: 2;
    }
  }
}
</style>
```

---

**ğŸ¯ æ ¸å¿ƒåŸåˆ™**ï¼š
1. **ç»„ä»¶åŒ–å¼€å‘** - ä¸€åˆ‡çš†ç»„ä»¶ï¼Œé«˜å†…èšä½è€¦åˆ
2. **ç±»å‹å®‰å…¨** - ä½¿ç”¨TypeScriptä¿è¯ç±»å‹å®‰å…¨
3. **æ€§èƒ½ä¼˜å…ˆ** - ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
4. **å“åº”å¼è®¾è®¡** - é€‚é…å„ç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸
5. **ä»£ç è§„èŒƒ** - ç»Ÿä¸€çš„ç¼–ç é£æ ¼å’Œå‘½åè§„èŒƒ

**ğŸ“– ç›¸å…³æ–‡æ¡£**ï¼š
- [æ¶æ„è§„èŒƒ](../01-æ ¸å¿ƒè§„èŒƒå±‚/æ¶æ„è§„èŒƒ.md) - å‰ç«¯æ¶æ„è®¾è®¡
- [ç¼–ç è§„èŒƒ](../01-æ ¸å¿ƒè§„èŒƒå±‚/ç¼–ç è§„èŒƒ.md) - é€šç”¨ç¼–ç è§„èŒƒ
- [APIè§„èŒƒ](../01-æ ¸å¿ƒè§„èŒƒå±‚/APIè§„èŒƒ.md) - å‰åç«¯æ¥å£è§„èŒƒ