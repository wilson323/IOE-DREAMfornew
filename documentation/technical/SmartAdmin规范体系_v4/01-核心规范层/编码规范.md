# ç¼–ç è§„èŒƒï¼ˆæƒå¨æ–‡æ¡£ï¼‰

> **ğŸ“‹ æ–‡æ¡£ç‰ˆæœ¬**: v4.0.0 (æ•´åˆç‰ˆ)
> **ğŸ“‹ æ–‡æ¡£èŒè´£**: SmartAdminé¡¹ç›®çš„å”¯ä¸€ç¼–ç è§„èŒƒæƒå¨æ¥æºï¼Œæ•´åˆäº†v1åŸºç¡€è§„èŒƒã€v2è´¨é‡æ ‡å‡†å’Œv3ç¼–ç ç²¾åã€‚

## âš ï¸ æ ¸å¿ƒçº¦æŸï¼ˆä¸å¯è¿åï¼‰

### ğŸš« ç»å¯¹ç¦æ­¢
```markdown
âŒ ç¦æ­¢ä½¿ç”¨ @Autowired æ³¨å…¥ï¼Œå¿…é¡»ä½¿ç”¨ @Resource
âŒ ç¦æ­¢ä½¿ç”¨é­”æ³•æ•°å­—ï¼Œå¿…é¡»å®šä¹‰ä¸ºå¸¸é‡
âŒ ç¦æ­¢åœ¨Controllerä¸­ç¼–å†™ä¸šåŠ¡é€»è¾‘
âŒ ç¦æ­¢è·¨å±‚ç›´æ¥è®¿é—®ï¼ˆå¦‚Controllerç›´æ¥è®¿é—®Daoï¼‰
âŒ ç¦æ­¢ä½¿ç”¨System.out.println()ï¼Œå¿…é¡»ä½¿ç”¨æ—¥å¿—æ¡†æ¶
âŒ ç¦æ­¢ç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼Œå¿…é¡»å®šä¹‰ä¸ºå¸¸é‡
âŒ ç¦æ­¢å¿½ç•¥å¼‚å¸¸å¤„ç†
âŒ ç¦æ­¢ä½¿ç”¨ @NotEmptyã€@Size ç­‰éå¸¸ç”¨éªŒè¯æ³¨è§£
âŒ ç¦æ­¢ä»£ç å¤æ‚åº¦è¶…è¿‡10
âŒ ç¦æ­¢é‡å¤ä»£ç ç‡è¶…è¿‡3%
```

### âœ… å¿…é¡»æ‰§è¡Œ
```markdown
âœ… å¿…é¡»ä½¿ç”¨ @Resource æ³¨å…¥ä¾èµ–
âœ… å¿…é¡»ä¸ºæ¯ä¸ªå…¬å…±æ–¹æ³•ç¼–å†™æ³¨é‡Š
âœ… å¿…é¡»å¤„ç†æ‰€æœ‰å¼‚å¸¸æƒ…å†µ
âœ… å¿…é¡»ä½¿ç”¨æ—¥å¿—æ¡†æ¶è®°å½•é‡è¦æ“ä½œ
âœ… å¿…é¡»éµå¾ªç»Ÿä¸€çš„å‘½åè§„èŒƒ
âœ… å¿…é¡»ä¿æŒä»£ç å¤æ‚åº¦ â‰¤ 10
âœ… å¿…é¡»ä¸ºå…¬å…±æ–¹æ³•ç¼–å†™å•å…ƒæµ‹è¯•
âœ… å¿…é¡»ä½¿ç”¨ @NotBlank + @NotNull è¿›è¡Œå¿…å¡«å­—æ®µéªŒè¯
âœ… å¿…é¡»éµå¾ªå››å±‚æ¶æ„è§„èŒƒ
âœ… å¿…é¡»ä»£ç è¦†ç›–ç‡ â‰¥ 80%
```

## ğŸ—ï¸ å‘½åè§„èŒƒï¼ˆå”¯ä¸€æƒå¨ï¼‰

### ç±»å‘½åè§„èŒƒ
```markdown
âœ… Controller: {Module}Controllerï¼ˆUserControllerï¼‰
âœ… Service: {Module}Serviceï¼ˆUserServiceï¼‰
âœ… Manager: {Module}Managerï¼ˆUserManagerï¼‰
âœ… Dao: {Module}Daoï¼ˆUserDaoï¼‰
âœ… Entity: {Module}Entityï¼ˆUserEntityï¼‰
âœ… Form: {Module}{Action}Formï¼ˆUserAddFormï¼‰
âœ… VO: {Module}VO æˆ– {Module}SpecialVOï¼ˆUserVOã€UserTreeVOï¼‰
âœ… å¸¸é‡ç±»: {Module}Constï¼ˆUserConstï¼‰
âœ… æšä¸¾ç±»: {Module}TypeEnumï¼ˆUserTypeEnumï¼‰
âŒ ç¦æ­¢ï¼šCategoryForm, CategoryRequest, CategoryDTO
```

### æ–¹æ³•å‘½åè§„èŒƒ
```markdown
âœ… æ·»åŠ æ“ä½œ: add, insert, create
âœ… åˆ é™¤æ“ä½œ: delete, remove
âœ… æ›´æ–°æ“ä½œ: update, modify, edit
âœ… æŸ¥è¯¢æ“ä½œ: query, get, find, select
âœ… åˆ†é¡µæŸ¥è¯¢: page, queryPage
âœ… ç»Ÿè®¡æ“ä½œ: count, statistics
âœ… éªŒè¯æ“ä½œ: validate, check
âœ… è½¬æ¢æ“ä½œ: convert, transform, to
```

### å˜é‡å‘½åè§„èŒƒ
```markdown
âœ… æ™®é€šå˜é‡: å°é©¼å³°å‘½åï¼ˆuserName, categoryIdï¼‰
âœ… å¸¸é‡å˜é‡: å…¨å¤§å†™ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆMAX_SIZE, DEFAULT_VALUEï¼‰
âœ… é™æ€å˜é‡: å°é©¼å³°å‘½åï¼ˆinstance, factoryï¼‰
âœ… ä¸´æ—¶å˜é‡: æœ‰æ„ä¹‰çš„åç§°ï¼ˆtempUser, resultï¼‰
âœ… é›†åˆå˜é‡: å¤æ•°å½¢å¼æˆ–Liståç¼€ï¼ˆusers, userListï¼‰
âœ… å¸ƒå°”å˜é‡: is/has/canå‰ç¼€ï¼ˆisActive, hasPermissionï¼‰
âœ… ä¸»é”®å­—æ®µ: {entity}Idï¼ˆuserId, orderIdï¼‰
âœ… æ ‡è®°å­—æ®µ: {business}Flagï¼ˆdisabledFlag, deletedFlagï¼‰
```

## ğŸ“ ä»£ç ç»“æ„è§„èŒƒ

### Controllerç»“æ„æ¨¡æ¿
```java
@RestController
@RequestMapping("/api/{module}")
@Tag(name = "{æ¨¡å—åç§°}ç®¡ç†", description = "{æ¨¡å—åç§°}çš„å¢åˆ æ”¹æŸ¥æ“ä½œ")
@SaCheckLogin
public class {Module}Controller {

    @Resource
    private {Module}Service {module}Service;

    @Operation(summary = "æ–°å¢{å®ä½“}")
    @PostMapping("/add")
    @SaCheckPermission("{module}:add")
    public ResponseDTO<String> add(@RequestBody @Valid {Module}AddForm addForm) {
        return ResponseDTO.ok({module}Service.add(addForm));
    }

    @Operation(summary = "æ›´æ–°{å®ä½“}")
    @PostMapping("/update")
    @SaCheckPermission("{module}:update")
    public ResponseDTO<String> update(@RequestBody @Valid {Module}UpdateForm updateForm) {
        return ResponseDTO.ok({module}Service.update(updateForm));
    }

    @Operation(summary = "åˆ é™¤{å®ä½“}")
    @PostMapping("/delete")
    @SaCheckPermission("{module}:delete")
    public ResponseDTO<String> delete(@RequestBody @Valid IdForm idForm) {
        return ResponseDTO.ok({module}Service.delete(idForm.getId()));
    }

    @Operation(summary = "åˆ†é¡µæŸ¥è¯¢{å®ä½“}")
    @PostMapping("/page")
    @SaCheckPermission("{module}:query")
    public ResponseDTO<PageResult<{Module}VO>> page(@RequestBody @Valid {Module}QueryForm queryForm) {
        return ResponseDTO.ok({module}Service.page(queryForm));
    }
}
```

### Serviceç»“æ„æ¨¡æ¿
```java
@Service
@Transactional(rollbackFor = Exception.class)
public class {Module}ServiceImpl implements {Module}Service {

    @Resource
    private {Module}Dao {module}Dao;

    @Resource
    private {Module}Manager {module}Manager;

    @Override
    public String add({Module}AddForm addForm) {
        // 1. å‚æ•°éªŒè¯
        this.validateAddForm(addForm);

        // 2. æ„å»ºå®ä½“
        {Module}Entity entity = SmartBeanUtil.copy(addForm, {Module}Entity.class);

        // 3. ä¿å­˜æ•°æ®
        {module}Dao.insert(entity);

        // 4. æ¸…é™¤ç¼“å­˜
        {module}Manager.removeCache();

        // 5. è¿”å›ç»“æœ
        return ResponseStringConst.SUCCESS;
    }

    @Override
    @Transactional(readOnly = true)
    public PageResult<{Module}VO> page({Module}QueryForm queryForm) {
        // æŸ¥è¯¢æ•°æ®
        Page<{Module}Entity> page = {module}Dao.queryPage(queryForm);

        // è½¬æ¢VO
        List<{Module}VO> voList = SmartBeanUtil.copyList(page.getRecords(), {Module}VO.class);

        return new PageResult<>(voList, page.getTotal());
    }
}
```

## ğŸ” ä»£ç è´¨é‡è§„èŒƒ

### å¤æ‚åº¦æ§åˆ¶
```markdown
âœ… åœˆå¤æ‚åº¦ â‰¤ 10
âœ… åµŒå¥—å±‚çº§ â‰¤ 4å±‚
âœ… æ–¹æ³•è¡Œæ•° â‰¤ 50è¡Œ
âœ… ç±»è¡Œæ•° â‰¤ 500è¡Œ
âœ… å‚æ•°ä¸ªæ•° â‰¤ 5ä¸ª
âœ… è¿”å›å€¼ç±»å‹æ˜ç¡®
âŒ ç¦æ­¢æ·±åº¦åµŒå¥—çš„if-else
âŒ ç¦æ­¢è¿‡é•¿çš„å‚æ•°åˆ—è¡¨
âŒ ç¦æ­¢è¿‡å¤§çš„ç±»å’Œæ–¹æ³•
```

### å¼‚å¸¸å¤„ç†è§„èŒƒ
```java
// è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
@Data
@EqualsAndHashCode(callSuper = true)
public class BusinessException extends RuntimeException {
    private final String code;
    private final Object[] args;

    public BusinessException(String message) {
        super(message);
        this.code = "BUSINESS_ERROR";
    }

    public BusinessException(String code, String message, Object... args) {
        super(message);
        this.code = code;
        this.args = args;
    }
}

// å…¨å±€å¼‚å¸¸å¤„ç†
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {

    @ExceptionHandler(BusinessException.class)
    public ResponseDTO<Void> handleBusinessException(BusinessException e) {
        log.warn("ä¸šåŠ¡å¼‚å¸¸: {}", e.getMessage());
        return ResponseDTO.error(e.getCode(), e.getMessage());
    }

    @ExceptionHandler(Exception.class)
    public ResponseDTO<Void> handleException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸", e);
        return ResponseDTO.error("SYSTEM_ERROR", "ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜");
    }
}
```

## ğŸ“Š ä»£ç åº¦é‡æ ‡å‡†

### è´¨é‡æŒ‡æ ‡
```markdown
âœ… ä»£ç è¦†ç›–ç‡ â‰¥ 80%
âœ… æ ¸å¿ƒä¸šåŠ¡è¦†ç›–ç‡ = 100%
âœ… é‡å¤ä»£ç ç‡ â‰¤ 3%
âœ… åœˆå¤æ‚åº¦ â‰¤ 10
âœ… ä»£ç è¡Œæ•°/æ–¹æ³• â‰¤ 50
âœ… ç±»è¡Œæ•° â‰¤ 500
âœ… æ–‡æ¡£è¦†ç›–ç‡ â‰¥ 90%
âœ… å®‰å…¨æ¼æ´ = 0ä¸ªé«˜å±
```

### ä»£ç å®¡æŸ¥æ¸…å•
```markdown
â–¡ æ˜¯å¦éµå¾ªå‘½åè§„èŒƒï¼Ÿ
â–¡ æ˜¯å¦ç¬¦åˆæ¶æ„åˆ†å±‚ï¼Ÿ
â–¡ å¼‚å¸¸å¤„ç†æ˜¯å¦å®Œå–„ï¼Ÿ
â–¡ æ—¥å¿—è®°å½•æ˜¯å¦è§„èŒƒï¼Ÿ
â–¡ ä»£ç å¤æ‚åº¦æ˜¯å¦è¾¾æ ‡ï¼Ÿ
â–¡ å•å…ƒæµ‹è¯•æ˜¯å¦è¦†ç›–ï¼Ÿ
â–¡ æ€§èƒ½æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Ÿ
â–¡ å®‰å…¨æ˜¯å¦å­˜åœ¨æ¼æ´ï¼Ÿ
â–¡ æ–‡æ¡£æ˜¯å¦å®Œæ•´ï¼Ÿ
â–¡ æ˜¯å¦ç¬¦åˆå›¢é˜Ÿçº¦å®šï¼Ÿ
```

---

**ğŸ¯ æ ¸å¿ƒåŸåˆ™**ï¼š
1. **å¯è¯»æ€§ç¬¬ä¸€** - ä»£ç æ˜¯å†™ç»™äººè¯»çš„
2. **ä¸€è‡´æ€§ä¼˜å…ˆ** - éµå¾ªç»Ÿä¸€çš„ç¼–ç é£æ ¼
3. **è´¨é‡ä¿è¯** - é€šè¿‡æµ‹è¯•å’Œå®¡æŸ¥ä¿è¯è´¨é‡
4. **æ€§èƒ½è€ƒè™‘** - ç¼–å†™é«˜æ•ˆçš„ä»£ç 
5. **å®‰å…¨ç¬¬ä¸€** - é¿å…å®‰å…¨æ¼æ´

**ğŸ“– ç›¸å…³æ–‡æ¡£**ï¼š
- [æ¶æ„è§„èŒƒ](./æ¶æ„è§„èŒƒ.md) - æ¶æ„è®¾è®¡è§„èŒƒ
- [APIè§„èŒƒ](./APIè§„èŒƒ.md) - APIæ¥å£è§„èŒƒ
- [å®‰å…¨è§„èŒƒ](./å®‰å…¨è§„èŒƒ.md) - å®‰å…¨ç¼–ç è§„èŒƒ