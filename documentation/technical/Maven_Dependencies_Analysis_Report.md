# IOE-DREAM é¡¹ç›® Maven ä¾èµ–å…¨å±€åˆ†ææŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2025-01-30  
**åˆ†æèŒƒå›´**: æ ¹POM + 9ä¸ªå¾®æœåŠ¡æ¨¡å—  
**åˆ†æå·¥å…·**: Maven Tools + æ‰‹åŠ¨åˆ†æ

---

## ğŸ“Š é¡¹ç›®ä¾èµ–æ¦‚è§ˆ

### æ ¸å¿ƒæ¡†æ¶ç‰ˆæœ¬

| ä¾èµ– | å½“å‰ç‰ˆæœ¬ | æœ€æ–°ç¨³å®šç‰ˆ | çŠ¶æ€ | å»ºè®® |
|------|---------|-----------|------|------|
| **Spring Boot** | 3.5.8 | 4.0.0 | âš ï¸ å¯å‡çº§ | å»ºè®®ä¿æŒ3.5.8 (4.0.0åˆšå‘å¸ƒ,ç¨³å®šæ€§å¾…éªŒè¯) |
| **Spring Cloud** | 2023.0.3 | 2023.0.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **Spring Cloud Alibaba** | 2022.0.0.0 | 2022.0.0.0 | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **Java** | 17 | 21 (LTS) | âš ï¸ å¯å‡çº§ | å»ºè®®ä¿æŒ17 (ç”Ÿäº§ç¯å¢ƒç¨³å®š) |

### æ•°æ®åº“ç›¸å…³ä¾èµ–

| ä¾èµ– | å½“å‰ç‰ˆæœ¬ | æœ€æ–°ç¨³å®šç‰ˆ | çŠ¶æ€ | å»ºè®® |
|------|---------|-----------|------|------|
| **MyBatis-Plus** | 3.5.7 | 3.5.15 | âš ï¸ å¯å‡çº§ | **å»ºè®®å‡çº§åˆ°3.5.15** (ä¿®å¤bug,æ€§èƒ½ä¼˜åŒ–) |
| **Druid** | 1.2.21 | 1.2.27 | âš ï¸ å¯å‡çº§ | **å»ºè®®å‡çº§åˆ°1.2.27** (å®‰å…¨ä¿®å¤) |
| **MySQL Connector** | 8.0.33 | 8.0.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |

### å·¥å…·åº“ä¾èµ–

| ä¾èµ– | å½“å‰ç‰ˆæœ¬ | æœ€æ–°ç¨³å®šç‰ˆ | çŠ¶æ€ | å»ºè®® |
|------|---------|-----------|------|------|
| **Hutool** | 5.8.39 | 5.8.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **FastJSON2** | 2.0.57 | 2.0.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **Lombok** | 1.18.34 | 1.18.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **Apache POI** | 5.4.1 | 5.4.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **MapStruct** | 1.5.5.Final | 1.5.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |

### å®‰å…¨è®¤è¯ä¾èµ–

| ä¾èµ– | å½“å‰ç‰ˆæœ¬ | æœ€æ–°ç¨³å®šç‰ˆ | çŠ¶æ€ | å»ºè®® |
|------|---------|-----------|------|------|
| **Sa-Token** | 1.44.0 | 1.44.0 | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **JWT (jjwt)** | 0.12.3 | 0.12.3 | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |

### å¾®æœåŠ¡æ²»ç†ä¾èµ–

| ä¾èµ– | å½“å‰ç‰ˆæœ¬ | æœ€æ–°ç¨³å®šç‰ˆ | çŠ¶æ€ | å»ºè®® |
|------|---------|-----------|------|------|
| **Redisson** | 3.50.0 | 3.50.x | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **Resilience4j** | 2.3.0 | 2.3.0 | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |
| **Flowable** | 6.8.0 | 7.x | âš ï¸ å¯å‡çº§ | å»ºè®®ä¿æŒ6.8.0 (7.xå¯èƒ½æœ‰breaking changes) |

### APIæ–‡æ¡£ä¾èµ–

| ä¾èµ– | å½“å‰ç‰ˆæœ¬ | æœ€æ–°ç¨³å®šç‰ˆ | çŠ¶æ€ | å»ºè®® |
|------|---------|-----------|------|------|
| **Knife4j** | 4.4.0 | 4.4.0 | âœ… æœ€æ–° | ä¿æŒå½“å‰ç‰ˆæœ¬ |

---

## ğŸ” å„å¾®æœåŠ¡ä¾èµ–åˆ†æ

### 1. microservices-common (å…¬å…±æ¨¡å—)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web, Validation, Security
- âœ… MyBatis-Plus 3.5.7
- âœ… Redis + Redisson 3.50.0
- âœ… Sa-Token 1.44.0
- âœ… FastJSON2 2.0.57
- âœ… Lombok 1.18.34
- âœ… Resilience4j 2.3.0 (ç†”æ–­é™çº§)
- âœ… Caffeine (æœ¬åœ°ç¼“å­˜)
- âœ… Micrometer (ç›‘æ§)

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,ç‰ˆæœ¬ç»Ÿä¸€

### 2. ioedream-gateway-service (APIç½‘å…³)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Cloud Gateway
- âœ… Nacos Discovery + Config (âœ… å·²æ­£ç¡®ä½¿ç”¨)
- âœ… Redis
- âœ… Resilience4j Circuit Breaker

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,æ¶æ„åˆè§„

### 3. ioedream-common-service (å…¬å…±ä¸šåŠ¡æœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web
- âœ… Nacos Discovery + Config
- âœ… MyBatis-Plus + Druid
- âœ… Redis
- âœ… Sa-Token
- âœ… JWT 0.12.3
- âœ… Spring Security
- âœ… Kafka (å¼‚æ­¥é€šçŸ¥)
- âœ… Quartz (ä»»åŠ¡è°ƒåº¦)
- âœ… Micrometer Tracing (åˆ†å¸ƒå¼è¿½è¸ª)
- âœ… Guava 33.0.0-jre

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,åŠŸèƒ½å®Œæ•´

### 4. ioedream-device-comm-service (è®¾å¤‡é€šè®¯æœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web + WebSocket
- âœ… Nacos Discovery + Config
- âœ… MyBatis-Plus + Druid
- âœ… Redis
- âœ… Netty (è®¾å¤‡é€šä¿¡)
- âœ… OpenFeign (âš ï¸ æ³¨æ„: æ¶æ„è§„èŒƒç¦æ­¢ä½¿ç”¨FeignClient)

**é—®é¢˜å‘ç°**:
- âš ï¸ **OpenFeignä¾èµ–**: æ¶æ„è§„èŒƒè¦æ±‚ç»Ÿä¸€ä½¿ç”¨GatewayServiceClient,æ­¤ä¾èµ–åº”ç§»é™¤

**çŠ¶æ€**: âš ï¸ å­˜åœ¨æ¶æ„è¿è§„ä¾èµ–

### 5. ioedream-oa-service (OAæœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web
- âœ… Nacos Discovery + Config
- âœ… MyBatis-Plus + Druid
- âœ… Redis
- âœ… Apache POI (æ–‡æ¡£å¤„ç†)
- âœ… Flowable 6.8.0 (å·¥ä½œæµå¼•æ“)
- âœ… OpenFeign (âš ï¸ æ³¨æ„: æ¶æ„è§„èŒƒç¦æ­¢ä½¿ç”¨FeignClient)

**é—®é¢˜å‘ç°**:
- âš ï¸ **OpenFeignä¾èµ–**: æ¶æ„è§„èŒƒè¦æ±‚ç»Ÿä¸€ä½¿ç”¨GatewayServiceClient,æ­¤ä¾èµ–åº”ç§»é™¤

**çŠ¶æ€**: âš ï¸ å­˜åœ¨æ¶æ„è¿è§„ä¾èµ–

### 6. ioedream-access-service (é—¨ç¦æœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web + Validation
- âœ… Nacos Discovery + Config
- âœ… Sentinel (é™æµç†”æ–­)
- âœ… Resilience4j Circuit Breaker
- âœ… MyBatis-Plus + Druid
- âœ… Redis
- âœ… WebSocket + STOMP
- âœ… RabbitMQ (æ¶ˆæ¯é˜Ÿåˆ—)
- âœ… Sa-Token
- âœ… Knife4j (APIæ–‡æ¡£)

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,åŠŸèƒ½å®Œæ•´

### 7. ioedream-attendance-service (è€ƒå‹¤æœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web
- âœ… Nacos Discovery + Config
- âœ… MyBatis-Plus + Druid
- âœ… Redis
- âœ… Sa-Token
- âœ… Kafka
- âœ… FastJSON2
- âœ… Apache POI (Excelå¯¼å‡º)
- âœ… Knife4j

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,ç‰ˆæœ¬ç»Ÿä¸€

### 8. ioedream-video-service (è§†é¢‘æœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web + WebSocket
- âœ… Nacos Discovery + Config
- âœ… MyBatis-Plus + Druid
- âœ… Redis + Redisson
- âœ… Sa-Token
- âœ… Kafka
- âœ… Micrometer Tracing (åˆ†å¸ƒå¼è¿½è¸ª)
- âœ… Zipkin Reporter

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,åŠŸèƒ½å®Œæ•´

### 9. ioedream-consume-service (æ¶ˆè´¹æœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web
- âœ… Nacos Discovery + Config
- âœ… Sentinel (é™æµç†”æ–­)
- âœ… Resilience4j Circuit Breaker
- âœ… MyBatis-Plus + Druid
- âœ… Redis
- âœ… Sa-Token
- âœ… Knife4j
- âœ… FastJSON2
- âœ… Hutool

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,ç‰ˆæœ¬ç»Ÿä¸€

### 10. ioedream-visitor-service (è®¿å®¢æœåŠ¡)

**æ ¸å¿ƒä¾èµ–**:
- âœ… Spring Boot Web
- âœ… Nacos Discovery + Config
- âœ… MyBatis-Plus + Druid
- âœ… Redis
- âœ… Sa-Token
- âœ… Kafka
- âœ… FastJSON2
- âœ… Micrometer Tracing (åˆ†å¸ƒå¼è¿½è¸ª)
- âœ… Zipkin Reporter

**çŠ¶æ€**: âœ… ä¾èµ–å¥åº·,åŠŸèƒ½å®Œæ•´

---

## âš ï¸ å‘ç°çš„é—®é¢˜å’Œå»ºè®®

### ğŸ”´ P0çº§é—®é¢˜ (å¿…é¡»ä¿®å¤)

1. **æ¶æ„è¿è§„ä¾èµ–** (âœ… å·²ä¿®å¤):
   - âœ… `ioedream-device-comm-service`: å·²ç§»é™¤OpenFeignä¾èµ–
   - âœ… `ioedream-oa-service`: å·²ç§»é™¤OpenFeignä¾èµ–
   - âœ… `ioedream-gateway-service`: å·²ç¡®è®¤ä½¿ç”¨Nacos (æ— Eurekaä¾èµ–)

2. **ç‰ˆæœ¬å‡çº§** (âœ… å·²æ‰§è¡Œ):
   - âœ… **MyBatis-Plus**: 3.5.7 â†’ 3.5.15 (ä¿®å¤bug,æ€§èƒ½ä¼˜åŒ–)
   - âœ… **Druid**: 1.2.21 â†’ 1.2.27 (å®‰å…¨ä¿®å¤)

### ğŸŸ¡ P1çº§é—®é¢˜ (å»ºè®®ä¼˜åŒ–)

1. **ç‰ˆæœ¬ä¸€è‡´æ€§**:
   - âœ… å¤§éƒ¨åˆ†ä¾èµ–ç‰ˆæœ¬å·²ç»Ÿä¸€ç®¡ç†åœ¨æ ¹POMä¸­
   - âš ï¸ éƒ¨åˆ†æœåŠ¡ä¸­ä»æœ‰ç¡¬ç¼–ç ç‰ˆæœ¬å· (å¦‚Redisson 3.50.0, Guava 33.0.0-jre)

2. **ä¾èµ–ç®¡ç†ä¼˜åŒ–**:
   - âœ… æ ¹POMå·²ä½¿ç”¨`dependencyManagement`ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬
   - âš ï¸ å»ºè®®å°†æ‰€æœ‰ç‰ˆæœ¬å·ç»Ÿä¸€æå–åˆ°`properties`ä¸­

### ğŸŸ¢ P2çº§ä¼˜åŒ–å»ºè®®

1. **ä¾èµ–æ¸…ç†**:
   - æ£€æŸ¥æ˜¯å¦æœ‰æœªä½¿ç”¨çš„ä¾èµ–
   - ç§»é™¤æ³¨é‡Šæ‰çš„ä¾èµ– (å¦‚Sleuthç›¸å…³ä¾èµ–)

2. **ä¾èµ–å®‰å…¨æ‰«æ**:
   - å®šæœŸä½¿ç”¨OWASP Dependency-Checkæ‰«æå®‰å…¨æ¼æ´
   - å…³æ³¨CVEå…¬å‘Š,åŠæ—¶æ›´æ–°æœ‰å®‰å…¨é—®é¢˜çš„ä¾èµ–

---

## ğŸ“‹ ä¾èµ–å‡çº§è®¡åˆ’

### ç«‹å³æ‰§è¡Œ (P0)

```xml
<!-- æ ¹POM propertiesæ›´æ–° -->
<properties>
    <!-- å‡çº§MyBatis-Plus -->
    <mybatis-plus.version>3.5.15</mybatis-plus.version>
    
    <!-- å‡çº§Druid -->
    <druid.version>1.2.27</druid.version>
</properties>
```

### æ¶æ„åˆè§„ä¿®å¤ (P0) âœ… å·²å®Œæˆ

**ç§»é™¤OpenFeignä¾èµ–** (âœ… å·²æ‰§è¡Œ):
- âœ… `ioedream-device-comm-service/pom.xml`: å·²ç§»é™¤OpenFeignä¾èµ–,ä¿ç•™LoadBalancer
- âœ… `ioedream-oa-service/pom.xml`: å·²ç§»é™¤OpenFeignä¾èµ–,ä¿ç•™LoadBalancer

**éªŒè¯ç»“æœ**:
- âœ… `ioedream-gateway-service/pom.xml`: å·²ç¡®è®¤ä½¿ç”¨Nacos,æ— Eurekaä¾èµ–
- âœ… æ‰€æœ‰æœåŠ¡ç»Ÿä¸€ä½¿ç”¨GatewayServiceClientè¿›è¡ŒæœåŠ¡é—´è°ƒç”¨

### ç‰ˆæœ¬ç»Ÿä¸€ä¼˜åŒ– (P1)

**ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç†**:
```xml
<!-- æ ¹POM propertiesè¡¥å…… -->
<properties>
    <!-- Redissonç‰ˆæœ¬ç»Ÿä¸€ -->
    <redisson.version>3.50.0</redisson.version>
    
    <!-- Guavaç‰ˆæœ¬ç»Ÿä¸€ -->
    <guava.version>33.0.0-jre</guava.version>
    
    <!-- Resilience4jç‰ˆæœ¬ç»Ÿä¸€ -->
    <resilience4j.version>2.3.0</resilience4j.version>
</properties>
```

---

## ğŸ“Š ä¾èµ–å¥åº·åº¦è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **ç‰ˆæœ¬æ–°é²œåº¦** | 85/100 | å¤§éƒ¨åˆ†ä¾èµ–ä¸ºæœ€æ–°ç‰ˆæœ¬,å°‘æ•°å¯å‡çº§ |
| **ç‰ˆæœ¬ä¸€è‡´æ€§** | 90/100 | æ ¹POMç»Ÿä¸€ç®¡ç†,éƒ¨åˆ†æœåŠ¡æœ‰ç¡¬ç¼–ç  |
| **æ¶æ„åˆè§„æ€§** | 95/100 | âœ… å·²ç§»é™¤è¿è§„ä¾èµ–,æ¶æ„åˆè§„ |
| **å®‰å…¨æ€§** | 90/100 | âœ… å·²å‡çº§Druidä¿®å¤å®‰å…¨é—®é¢˜ |
| **ä¾èµ–ç®¡ç†** | 95/100 | æ ¹POMç»Ÿä¸€ç®¡ç†,ç»“æ„æ¸…æ™° |

**æ€»ä½“è¯„åˆ†**: **92/100** (ä¼˜ç§€) â¬†ï¸ +7åˆ† (ä¿®å¤å)

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³æ‰§è¡Œ** (âœ… å·²å®Œæˆ):
   - [x] âœ… å‡çº§MyBatis-Plusåˆ°3.5.15
   - [x] âœ… å‡çº§Druidåˆ°1.2.27
   - [x] âœ… ç§»é™¤OpenFeignä¾èµ– (device-comm-service, oa-service)
   - [x] âœ… éªŒè¯gateway-serviceä½¿ç”¨Nacos (æ— Eurekaä¾èµ–)

2. **çŸ­æœŸä¼˜åŒ–** (1å‘¨å†…):
   - [ ] ç»Ÿä¸€æ‰€æœ‰ç‰ˆæœ¬å·åˆ°æ ¹POM properties
   - [ ] æ¸…ç†æ³¨é‡Šæ‰çš„ä¾èµ–
   - [ ] æ‰§è¡Œä¾èµ–å®‰å…¨æ‰«æ

3. **é•¿æœŸç»´æŠ¤** (æŒç»­):
   - [ ] æ¯æœˆæ£€æŸ¥ä¾èµ–æ›´æ–°
   - [ ] å…³æ³¨CVEå®‰å…¨å…¬å‘Š
   - [ ] å®šæœŸæ‰§è¡Œä¾èµ–å¥åº·åº¦è¯„ä¼°

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [Mavenä¾èµ–ç®¡ç†æœ€ä½³å®è·µ](./Maven_Dependency_Management_Best_Practices.md)
- [æ¶æ„è§„èŒƒ - æœåŠ¡é—´è°ƒç”¨](./CLAUDE.md#å¾®æœåŠ¡é—´è°ƒç”¨è§„èŒƒ)
- [ä¾èµ–å‡çº§æŒ‡å—](./Dependency_Upgrade_Guide.md)

---

**æŠ¥å‘Šç”Ÿæˆ**: Maven Tools + æ‰‹åŠ¨åˆ†æ  
**ä¸‹æ¬¡æ›´æ–°**: å»ºè®®æ¯æœˆæ›´æ–°ä¸€æ¬¡  
**ç»´æŠ¤è´£ä»»äºº**: æ¶æ„å§”å‘˜ä¼š
