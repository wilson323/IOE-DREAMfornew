# 密码管理

<cite>
**本文档引用的文件**
- [employee-api.js](file://smart-admin-web-javascript\src\api\system\employee-api.js)
- [EmployeeServiceImpl.java](file://microservices\ioedream-common-service\src\main\java\net\lab1024\sa\common\system\employee\service\impl\EmployeeServiceImpl.java)
- [regular-change-password-modal.vue](file://smart-admin-web-javascript\src\layout\components\change-password\regular-change-password-modal.vue)
- [index.vue](file://smart-admin-web-javascript\src\views\system\account\components\password\index.vue)
</cite>

## 目录
1. [简介](#简介)
2. [密码重置流程](#密码重置流程)
3. [密码更新流程](#密码更新流程)
4. [密码复杂度配置获取](#密码复杂度配置获取)
5. [前端调用示例](#前端调用示例)
6. [安全合规性说明](#安全合规性说明)

## 简介
本系统实现了完整的密码管理功能，包括密码重置、密码更新和密码复杂度校验等核心业务逻辑。系统遵循《网络安全法》和《数据安全法》的要求，确保用户密码的安全性。密码管理功能主要通过后端Java服务实现业务逻辑，前端JavaScript进行调用展示，形成了完整的密码管理解决方案。

## 密码重置流程
密码重置功能允许管理员为员工重置密码。系统会自动生成随机密码，进行加盐处理后更新到数据库，并将明文密码返回给管理员。

```mermaid
sequenceDiagram
participant 前端 as 前端界面
participant API as employee-api.js
participant 服务 as EmployeeServiceImpl
participant 数据库 as 数据库
前端->>API : 调用resetPassword(employeeId)
API->>服务 : 发送重置请求
服务->>服务 : generateRandomPassword()生成随机密码
服务->>服务 : generateSaltPassword()进行加盐处理
服务->>数据库 : 更新加密后的密码
数据库-->>服务 : 更新成功
服务-->>API : 返回明文密码
API-->>前端 : 显示重置后的密码
```

**图示来源**
- [employee-api.js](file://smart-admin-web-javascript\src\api\system\employee-api.js#L71-L73)
- [EmployeeServiceImpl.java](file://microservices\ioedream-common-service\src\main\java\net\lab1024\sa\common\system\employee\service\impl\EmployeeServiceImpl.java)

**本节来源**
- [employee-api.js](file://smart-admin-web-javascript\src\api\system\employee-api.js#L71-L73)

## 密码更新流程
密码更新功能允许用户修改自己的密码，系统会进行严格的验证和校验。

```mermaid
flowchart TD
A[开始] --> B[验证原密码]
B --> C{原密码正确?}
C --> |否| D[返回错误]
C --> |是| E[检查新旧密码是否相同]
E --> F{相同?}
F --> |是| G[返回错误]
F --> |否| H[执行三级等保密码重复性校验]
H --> I{校验通过?}
I --> |否| J[返回错误]
I --> |是| K[更新用户密码]
K --> L[结束]
```

**图示来源**
- [EmployeeServiceImpl.java](file://microservices\ioedream-common-service\src\main\java\net\lab1024\sa\common\system\employee\service\impl\EmployeeServiceImpl.java)
- [index.vue](file://smart-admin-web-javascript\src\views\system\account\components\password\index.vue#L82-L97)

**本节来源**
- [EmployeeServiceImpl.java](file://microservices\ioedream-common-service\src\main\java\net\lab1024\sa\common\system\employee\service\impl\EmployeeServiceImpl.java)
- [index.vue](file://smart-admin-web-javascript\src\views\system\account\components\password\index.vue#L82-L97)

## 密码复杂度配置获取
系统提供了获取密码复杂度配置的功能，用于前端展示密码输入规则。

```mermaid
sequenceDiagram
participant 前端 as 前端界面
participant API as employee-api.js
participant 服务 as EmployeeServiceImpl
participant 配置 as 系统配置
前端->>API : 调用getPasswordComplexityEnabled()
API->>服务 : 发送获取请求
服务->>配置 : 查询密码复杂度配置
配置-->>服务 : 返回配置结果
服务-->>API : 返回配置值
API-->>前端 : 更新密码输入规则提示
```

**图示来源**
- [employee-api.js](file://smart-admin-web-javascript\src\api\system\employee-api.js#L83-L85)
- [index.vue](file://smart-admin-web-javascript\src\views\system\account\components\password\index.vue#L39-L45)

**本节来源**
- [employee-api.js](file://smart-admin-web-javascript\src\api\system\employee-api.js#L83-L85)
- [index.vue](file://smart-admin-web-javascript\src\views\system\account\components\password\index.vue#L39-L45)

## 前端调用示例
前端通过API调用实现密码管理功能，以下是具体的调用示例。

### 重置密码调用
```mermaid
sequenceDiagram
participant UI as 用户界面
participant JS as employee-api.js
participant 后端 as 后端服务
UI->>JS : 管理员点击重置密码
JS->>JS : resetPassword(employeeId)
JS->>后端 : GET /employee/update/password/reset/{employeeId}
后端-->>JS : 返回重置后的明文密码
JS-->>UI : 显示重置结果
```

### 更新密码调用
```mermaid
sequenceDiagram
participant UI as 用户界面
participant JS as employee-api.js
participant 后端 as 后端服务
UI->>JS : 用户输入新密码
JS->>JS : updateEmployeePassword(param)
JS->>后端 : POST /employee/update/password (加密)
后端-->>JS : 返回操作结果
JS-->>UI : 显示操作成功或失败
```

**图示来源**
- [employee-api.js](file://smart-admin-web-javascript\src\api\system\employee-api.js#L71-L79)

**本节来源**
- [employee-api.js](file://smart-admin-web-javascript\src\api\system\employee-api.js#L71-L79)

## 安全合规性说明
系统严格遵循三级等保要求，实现了全面的密码安全管理。

```mermaid
graph TD
A[密码安全要求] --> B[密码复杂度]
A --> C[密码更新]
A --> D[密码重置]
A --> E[定期修改]
B --> F[8-20位]
B --> G[包含字母、数字、特殊符号]
C --> H[验证原密码]
C --> I[新旧密码不能相同]
C --> J[三级等保重复性校验]
D --> K[生成随机密码]
D --> L[加盐处理]
D --> M[明文返回给管理员]
E --> N[定期强制修改]
E --> O[根据《网络安全法》要求]
```

**图示来源**
- [regular-change-password-modal.vue](file://smart-admin-web-javascript\src\layout\components\change-password\regular-change-password-modal.vue#L12)
- [index.vue](file://smart-admin-web-javascript\src\views\system\account\components\password\index.vue#L30-L34)

**本节来源**
- [regular-change-password-modal.vue](file://smart-admin-web-javascript\src\layout\components\change-password\regular-change-password-modal.vue#L12)
- [index.vue](file://smart-admin-web-javascript\src\views\system\account\components\password\index.vue#L30-L34)