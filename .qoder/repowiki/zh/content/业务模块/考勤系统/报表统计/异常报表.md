# 异常报表

<cite>
**本文档引用文件**   
- [考勤系统数据库ER图设计.md](file://documentation\03-业务模块\考勤\考勤系统数据库ER图设计.md)
- [考勤前端原型布局\异常管理功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\异常管理功能布局文档_完整版.md)
- [考勤汇总报表.md](file://documentation\03-业务模块\考勤\考勤汇总报表.md)
- [考勤前端原型布局\汇总报表功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\汇总报表功能布局文档_完整版.md)
- [PHASE3_TASK32_EXCEPTION_HANDLING_PLAN.md](file://documentation\archive\reports-2025-12-04\PHASE3_TASK32_EXCEPTION_HANDLING_PLAN.md)
- [PHASE3_TASK32_EXCEPTION_HANDLING_COMPLETE.md](file://documentation\archive\reports-2025-12-04\PHASE3_TASK32_EXCEPTION_HANDLING_COMPLETE.md)
</cite>

## 目录
1. [异常报表分类](#异常报表分类)
2. [异常判定规则与计算方式](#异常判定规则与计算方式)
3. [异常状态标记逻辑](#异常状态标记逻辑)
4. [异常报表筛选与查询功能](#异常报表筛选与查询功能)
5. [异常数据导出与批量处理](#异常数据导出与批量处理)
6. [异常提醒配置方法](#异常提醒配置方法)

## 异常报表分类

异常报表主要分为以下几类：
- **迟到早退**：员工未在规定时间内打卡，包括上班迟到和下班早退。
- **缺卡**：员工在应打卡的时间段内未进行打卡操作。
- **考勤异常**：包括连续多日未打卡、频繁迟到、旷工等不符合正常考勤规则的情况。

这些分类帮助企业和人力资源部门更好地监控和管理员工的出勤情况，及时发现并处理异常行为。

**Section sources**
- [考勤系统数据库ER图设计.md](file://documentation\03-业务模块\考勤\考勤系统数据库ER图设计.md#L1182-L1473)
- [考勤前端原型布局\异常管理功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\异常管理功能布局文档_完整版.md#L733-L1075)

## 异常判定规则与计算方式

### 迟到早退
- **判定规则**：根据员工的打卡时间与规定的工作时间对比，若打卡时间晚于规定上班时间，则视为迟到；若早于规定下班时间，则视为早退。
- **计算方式**：迟到或早退的时间差即为实际迟到或早退的分钟数。

### 缺卡
- **判定规则**：员工在规定的打卡时间段内没有打卡记录。
- **计算方式**：统计缺卡天数，连续缺卡天数超过设定阈值（如连续3天）将触发预警。

### 考勤异常
- **判定规则**：
  - 连续7天内迟到3次；
  - 7天内旷工2天；
  - 连续3天未打卡。
- **计算方式**：通过统计周期内的打卡记录，结合上述规则进行判断。

**Section sources**
- [考勤系统数据库ER图设计.md](file://documentation\03-业务模块\考勤\考勤系统数据库ER图设计.md#L1182-L1473)
- [考勤前端原型布局\异常管理功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\异常管理功能布局文档_完整版.md#L733-L1075)

## 异常状态标记逻辑

异常状态的标记逻辑基于以下步骤：
1. **数据采集**：从考勤系统中获取员工的打卡记录。
2. **规则匹配**：将打卡记录与预设的异常规则进行匹配。
3. **状态标记**：根据匹配结果，对相应的打卡记录标记为“迟到”、“早退”、“缺卡”或“考勤异常”。
4. **通知生成**：对于标记为异常的记录，生成相应的通知，发送给员工及其直属领导。

此逻辑确保了异常状态的准确性和及时性，有助于快速响应和处理异常情况。

**Section sources**
- [考勤系统数据库ER图设计.md](file://documentation\03-业务模块\考勤\考勤系统数据库ER图设计.md#L1182-L1473)
- [考勤前端原型布局\异常管理功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\异常管理功能布局文档_完整版.md#L733-L1075)

## 异常报表筛选与查询功能

异常报表支持多种筛选和查询条件，以便用户能够灵活地获取所需信息：
- **按异常类型**：可以选择特定的异常类型（如迟到、早退、缺卡、考勤异常）进行查询。
- **按处理状态**：可以筛选已处理或未处理的异常记录。
- **按时间段**：支持按日、周、月等不同时间范围进行查询。

此外，系统还提供了高级筛选功能，允许用户组合多个条件进行精确查询，提高工作效率。

**Section sources**
- [考勤前端原型布局\异常管理功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\异常管理功能布局文档_完整版.md#L733-L1075)
- [考勤汇总报表.md](file://documentation\03-业务模块\考勤\考勤汇总报表.md#L66-L87)

## 异常数据导出与批量处理

### 数据导出
- **导出格式**：支持PDF、Excel、CSV等多种格式导出。
- **导出内容**：包含异常记录的详细信息，如员工姓名、异常类型、发生时间、处理状态等。

### 批量处理
- **批量审批**：支持对多条异常记录进行批量审批操作。
- **批量通知**：可以一次性向多名员工发送异常通知，提高沟通效率。

这些功能使得异常数据的管理和处理更加高效，减少了人工操作的工作量。

**Section sources**
- [考勤前端原型布局\汇总报表功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\汇总报表功能布局文档_完整版.md#L884-L1375)
- [考勤汇总报表.md](file://documentation\03-业务模块\考勤\考勤汇总报表.md#L66-L87)

## 异常提醒配置方法

异常提醒的配置方法如下：
1. **设置触发条件**：定义触发提醒的条件，如连续3天未打卡、7天内迟到3次等。
2. **选择通知方式**：支持短信、邮件、微信、钉钉等多种通知方式。
3. **指定接收人**：可以设置通知发送给员工本人、直属领导或HR。
4. **配置频率控制**：限制每天的最大通知次数和通知间隔时间，避免过度打扰。

通过以上配置，系统能够在检测到异常情况时自动发送提醒，确保相关人员能够及时了解并处理异常。

**Section sources**
- [考勤系统数据库ER图设计.md](file://documentation\03-业务模块\考勤\考勤系统数据库ER图设计.md#L1182-L1473)
- [考勤前端原型布局\异常管理功能布局文档_完整版.md](file://documentation\03-业务模块\各业务模块文档\考勤\考勤前端原型布局\异常管理功能布局文档_完整版.md#L733-L1075)