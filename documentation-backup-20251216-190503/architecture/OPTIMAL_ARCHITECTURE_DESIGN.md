# IOE-DREAM æœ€ä¼˜æ¶æ„è®¾è®¡è¯´æ˜ä¹¦

> **ç‰ˆæœ¬**: v1.0.0
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-02
> **ä½œè€…**: æ¶æ„å¸ˆå›¢é˜Ÿ
> **çŠ¶æ€**: ç”Ÿæ•ˆä¸­
> **é€‚ç”¨èŒƒå›´**: IOE-DREAM æ™ºèƒ½ç®¡ç†ç³»ç»Ÿå…¨æ ˆæ¶æ„

---

## ğŸ“‹ ç›®å½•

1. [æ¶æ„æ„¿æ™¯ä¸ç›®æ ‡](#1-æ¶æ„æ„¿æ™¯ä¸ç›®æ ‡)
2. [å½“å‰æ¶æ„é—®é¢˜åˆ†æ](#2-å½“å‰æ¶æ„é—®é¢˜åˆ†æ)
3. [æœ€ä¼˜æ¶æ„è®¾è®¡æ–¹æ¡ˆ](#3-æœ€ä¼˜æ¶æ„è®¾è®¡æ–¹æ¡ˆ)
4. [æŠ€æœ¯æ ˆè§„èŒƒ](#4-æŠ€æœ¯æ ˆè§„èŒƒ)
5. [åç«¯æ¶æ„è¯¦è§£](#5-åç«¯æ¶æ„è¯¦è§£)
6. [å‰ç«¯æ¶æ„è¯¦è§£](#6-å‰ç«¯æ¶æ„è¯¦è§£)
7. [ç§»åŠ¨ç«¯æ¶æ„è¯¦è§£](#7-ç§»åŠ¨ç«¯æ¶æ„è¯¦è§£)
8. [æœåŠ¡é—´é€šä¿¡è§„èŒƒ](#8-æœåŠ¡é—´é€šä¿¡è§„èŒƒ)
9. [æ•°æ®åº“è®¾è®¡è§„èŒƒ](#9-æ•°æ®åº“è®¾è®¡è§„èŒƒ)
10. [å®‰å…¨æ¶æ„è®¾è®¡](#10-å®‰å…¨æ¶æ„è®¾è®¡)
11. [éƒ¨ç½²æ¶æ„è®¾è®¡](#11-éƒ¨ç½²æ¶æ„è®¾è®¡)
12. [ç›‘æ§ä¸è¿ç»´æ¶æ„](#12-ç›‘æ§ä¸è¿ç»´æ¶æ„)

---

## 1. æ¶æ„æ„¿æ™¯ä¸ç›®æ ‡

### 1.1 æ¶æ„æ„¿æ™¯

æ„å»ºä¸€ä¸ª**é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜å¯æ‰©å±•**çš„ä¼ä¸šçº§æ™ºèƒ½ç®¡ç†å¹³å°ï¼Œæ”¯æŒé—¨ç¦ã€è€ƒå‹¤ã€æ¶ˆè´¹ã€è®¿å®¢ã€è§†é¢‘ç­‰æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œå®ç°è®¾å¤‡ç»Ÿä¸€ç®¡ç†ã€æ•°æ®å®æ—¶å¤„ç†ã€ä¸šåŠ¡çµæ´»æ‰©å±•ã€‚

### 1.2 æ ¸å¿ƒç›®æ ‡

| ç›®æ ‡ç»´åº¦ | å…·ä½“æŒ‡æ ‡ | è¾¾æˆæ ‡å‡† |
|---------|---------|---------|
| **å¯ç”¨æ€§** | ç³»ç»Ÿå¯ç”¨æ€§ | â‰¥99.9% (å¹´åœæœºæ—¶é—´<8.76å°æ—¶) |
| **æ€§èƒ½** | APIå“åº”æ—¶é—´ | P99 < 500ms |
| **å¹¶å‘** | å¹¶å‘å¤„ç†èƒ½åŠ› | â‰¥10000 TPS |
| **æ‰©å±•æ€§** | æ°´å¹³æ‰©å±•èƒ½åŠ› | æ”¯æŒåŠ¨æ€æ‰©ç¼©å®¹ |
| **å¯ç»´æŠ¤æ€§** | ä»£ç è´¨é‡ | åœˆå¤æ‚åº¦â‰¤10ï¼Œè¦†ç›–ç‡â‰¥80% |
| **å®‰å…¨æ€§** | å®‰å…¨ç­‰çº§ | ç­‰ä¿ä¸‰çº§ |

### 1.3 æ¶æ„åŸåˆ™

1. **å•ä¸€èŒè´£åŸåˆ™**: æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸ
2. **å¼€é—­åŸåˆ™**: å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
3. **ä¾èµ–å€’ç½®åŸåˆ™**: é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡
4. **æ¥å£éš”ç¦»åŸåˆ™**: ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£ï¼Œè€Œä¸æ˜¯å•ä¸€çš„æ€»æ¥å£
5. **æœ€å°çŸ¥è¯†åŸåˆ™**: ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£

---

## 2. å½“å‰æ¶æ„é—®é¢˜åˆ†æ

### 2.1 æ ¸å¿ƒé—®é¢˜æ¸…å•

#### é—®é¢˜1: å…¬å…±åº“èŒè´£è¾¹ç•Œä¸æ¸…ï¼ˆä¸¥é‡ï¼‰

**ç°çŠ¶**:
```
microservices-common (å…¬å…±åº“):
â”œâ”€â”€ âœ… Entityã€DAOã€DTOã€Formã€VO  (æ­£ç¡®)
â”œâ”€â”€ âœ… Managerå±‚å®ç° (å¯æ¥å—)
â”œâ”€â”€ âŒ @Serviceå®ç°ç±» (é”™è¯¯ï¼13ä¸ª)
â”œâ”€â”€ âŒ @Componentä¸šåŠ¡ç»„ä»¶ (é”™è¯¯ï¼)
â””â”€â”€ âŒ ä¾èµ–spring-boot-starter-web (é”™è¯¯ï¼)
```

**é—®é¢˜å½±å“**:
- å…¬å…±åº“å˜æˆäº†"è¶…çº§æœåŠ¡"ï¼Œè¿åå•ä¸€èŒè´£
- ä¾èµ–è¿‡é‡ï¼Œæ‰€æœ‰å¾®æœåŠ¡éƒ½è¢«è¿«å¼•å…¥ä¸éœ€è¦çš„ä¾èµ–
- éš¾ä»¥ç‹¬ç«‹å‡çº§å’Œç»´æŠ¤
- å¾ªç¯ä¾èµ–é£é™©é«˜

#### é—®é¢˜2: å¾®æœåŠ¡è¾¹ç•Œä¸æ¸…æ™°

**ç°çŠ¶**:
- `ioedream-common-service` å’Œ `microservices-common` èŒè´£é‡å 
- ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨å…¬å…±åº“å’Œå¾®æœåŠ¡ä¸­
- éƒ¨åˆ†æœåŠ¡åŠŸèƒ½é‡å¤

#### é—®é¢˜3: å‰åç«¯APIå¥‘çº¦ä¸ç»Ÿä¸€

**ç°çŠ¶**:
- å‰ç«¯è°ƒç”¨å¤šä¸ªåç«¯æœåŠ¡
- APIç‰ˆæœ¬ç®¡ç†æ··ä¹±
- é”™è¯¯ç ä¸ç»Ÿä¸€

### 2.2 é—®é¢˜ä¸¥é‡ç¨‹åº¦è¯„ä¼°

| é—®é¢˜ç¼–å· | é—®é¢˜æè¿° | ä¸¥é‡ç¨‹åº¦ | å½±å“èŒƒå›´ | ä¿®å¤ä¼˜å…ˆçº§ |
|---------|---------|---------|---------|-----------|
| P-001 | å…¬å…±åº“åŒ…å«@Serviceå®ç° | ğŸ”´ ä¸¥é‡ | å…¨å±€ | P0 |
| P-002 | å…¬å…±åº“ä¾èµ–è¿‡é‡ | ğŸ”´ ä¸¥é‡ | å…¨å±€ | P0 |
| P-003 | å¾®æœåŠ¡è¾¹ç•Œä¸æ¸… | ğŸŸ¡ ä¸­ç­‰ | å¤šæœåŠ¡ | P1 |
| P-004 | APIå¥‘çº¦ä¸ç»Ÿä¸€ | ğŸŸ¡ ä¸­ç­‰ | å‰åç«¯ | P1 |
| P-005 | å‰ç«¯æ¶æ„åˆ†æ•£ | ğŸŸ¢ è½»å¾® | å‰ç«¯ | P2 |

---

## 3. æœ€ä¼˜æ¶æ„è®¾è®¡æ–¹æ¡ˆ

### 3.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å®¢æˆ·ç«¯å±‚ (Client Layer)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Webå‰ç«¯ (Vue3) â”‚  â”‚  ç®¡ç†åå° (Vue3) â”‚  â”‚  ç§»åŠ¨ç«¯ (uni-app)          â”‚  â”‚
â”‚  â”‚  smart-admin-webâ”‚  â”‚  admin-console  â”‚  â”‚  smart-app                 â”‚  â”‚
â”‚  â”‚  ç«¯å£: 3000     â”‚  â”‚  ç«¯å£: 3001     â”‚  â”‚  H5/å°ç¨‹åº/App             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç½‘å…³å±‚ (Gateway Layer)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                    â”‚   API Gateway (8080)   â”‚                                â”‚
â”‚                    â”‚   ioedream-gateway     â”‚                                â”‚
â”‚                    â”‚   - è·¯ç”±è½¬å‘           â”‚                                â”‚
â”‚                    â”‚   - è®¤è¯é‰´æƒ           â”‚                                â”‚
â”‚                    â”‚   - é™æµç†”æ–­           â”‚                                â”‚
â”‚                    â”‚   - æ—¥å¿—è¿½è¸ª           â”‚                                â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ä¸šåŠ¡æœåŠ¡å±‚ (Business Service Layer)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ common-svc   â”‚ â”‚ device-comm  â”‚ â”‚ access-svc   â”‚ â”‚ attendance   â”‚       â”‚
â”‚  â”‚ (8088)       â”‚ â”‚ (8087)       â”‚ â”‚ (8090)       â”‚ â”‚ (8091)       â”‚       â”‚
â”‚  â”‚ å…¬å…±æœåŠ¡     â”‚ â”‚ è®¾å¤‡é€šè®¯     â”‚ â”‚ é—¨ç¦æœåŠ¡     â”‚ â”‚ è€ƒå‹¤æœåŠ¡     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ consume-svc  â”‚ â”‚ visitor-svc  â”‚ â”‚ video-svc    â”‚                        â”‚
â”‚  â”‚ (8094)       â”‚ â”‚ (8095)       â”‚ â”‚ (8092)       â”‚                        â”‚
â”‚  â”‚ æ¶ˆè´¹æœåŠ¡     â”‚ â”‚ è®¿å®¢æœåŠ¡     â”‚ â”‚ è§†é¢‘æœåŠ¡     â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å…¬å…±ç»„ä»¶å±‚ (Common Component Layer)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    microservices-common (JARåº“)                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚   Entity    â”‚ â”‚    DAO      â”‚ â”‚  DTO/VO/Formâ”‚ â”‚   Manager   â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  æ•°æ®å®ä½“   â”‚ â”‚  æ•°æ®è®¿é—®   â”‚ â”‚  æ•°æ®ä¼ è¾“   â”‚ â”‚  ä¸šåŠ¡ç¼–æ’   â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚   Utils     â”‚ â”‚  Constants  â”‚ â”‚  Exception  â”‚ â”‚   Config    â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  å·¥å…·ç±»     â”‚ â”‚   å¸¸é‡      â”‚ â”‚  å¼‚å¸¸å®šä¹‰   â”‚ â”‚  é…ç½®ç±»     â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚  âŒ ç¦æ­¢: @Service, @RestController, @Component(ä¸šåŠ¡ç»„ä»¶)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   MySQL      â”‚ â”‚   Redis      â”‚ â”‚   RabbitMQ   â”‚ â”‚   Nacos      â”‚       â”‚
â”‚  â”‚  ä¸»ä»é›†ç¾¤    â”‚ â”‚  å“¨å…µé›†ç¾¤    â”‚ â”‚   æ¶ˆæ¯é˜Ÿåˆ—   â”‚ â”‚  é…ç½®ä¸­å¿ƒ    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Elasticsearchâ”‚ â”‚   MinIO      â”‚ â”‚  Prometheus  â”‚ â”‚   Grafana    â”‚       â”‚
â”‚  â”‚  æ—¥å¿—æœç´¢    â”‚ â”‚  æ–‡ä»¶å­˜å‚¨    â”‚ â”‚   ç›‘æ§é‡‡é›†   â”‚ â”‚  å¯è§†åŒ–      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä¸ƒå¾®æœåŠ¡æ¶æ„å®šä¹‰

| æœåŠ¡åç§° | ç«¯å£ | èŒè´£æè¿° | æ ¸å¿ƒåŠŸèƒ½ |
|---------|------|---------|---------|
| **ioedream-gateway** | 8080 | APIç½‘å…³ | è·¯ç”±ã€è®¤è¯ã€é™æµã€æ—¥å¿— |
| **ioedream-common-service** | 8088 | å…¬å…±ä¸šåŠ¡æœåŠ¡ | ç”¨æˆ·ã€æƒé™ã€ç»„ç»‡ã€å­—å…¸ã€å®¡è®¡ã€é€šçŸ¥ã€ç›‘æ§ã€è°ƒåº¦ |
| **ioedream-device-comm-service** | 8087 | è®¾å¤‡é€šè®¯æœåŠ¡ | è®¾å¤‡åè®®ã€è¿æ¥ç®¡ç†ã€æ•°æ®é‡‡é›†ã€æŒ‡ä»¤ä¸‹å‘ |
| **ioedream-access-service** | 8090 | é—¨ç¦æœåŠ¡ | é—¨ç¦æ§åˆ¶ã€é€šè¡Œè®°å½•ã€æƒé™ç®¡ç† |
| **ioedream-attendance-service** | 8091 | è€ƒå‹¤æœåŠ¡ | è€ƒå‹¤æ‰“å¡ã€æ’ç­ç®¡ç†ã€è€ƒå‹¤ç»Ÿè®¡ |
| **ioedream-consume-service** | 8094 | æ¶ˆè´¹æœåŠ¡ | æ¶ˆè´¹ç®¡ç†ã€è´¦æˆ·ç®¡ç†ã€äº¤æ˜“è®°å½• |
| **ioedream-visitor-service** | 8095 | è®¿å®¢æœåŠ¡ | è®¿å®¢é¢„çº¦ã€è®¿å®¢ç™»è®°ã€è®¿å®¢é€šè¡Œ |
| **ioedream-video-service** | 8092 | è§†é¢‘æœåŠ¡ | è§†é¢‘ç›‘æ§ã€å½•åƒå›æ”¾ã€æ™ºèƒ½åˆ†æ |

### 3.3 æ¨¡å—èŒè´£è¾¹ç•Œ

#### 3.3.1 microservices-commonï¼ˆå…¬å…±JARåº“ï¼‰

**âœ… å…è®¸åŒ…å«**:
```
microservices-common/
â”œâ”€â”€ entity/              # æ•°æ®å®ä½“ç±» (@Entity, @TableName)
â”œâ”€â”€ dao/                 # æ•°æ®è®¿é—®æ¥å£ (@Mapper extends BaseMapper)
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ form/           # è¡¨å•å¯¹è±¡ (XxxAddForm, XxxUpdateForm, XxxQueryForm)
â”‚   â””â”€â”€ vo/             # è§†å›¾å¯¹è±¡ (XxxVO, XxxDetailVO, XxxListVO)
â”œâ”€â”€ manager/            # ä¸šåŠ¡ç¼–æ’å±‚ (å¤æ‚ä¸šåŠ¡é€»è¾‘, å¯åŒ…å«@Component)
â”œâ”€â”€ config/             # é…ç½®ç±» (@Configuration)
â”œâ”€â”€ constant/           # å¸¸é‡å®šä¹‰
â”œâ”€â”€ enums/              # æšä¸¾å®šä¹‰
â”œâ”€â”€ exception/          # å¼‚å¸¸å®šä¹‰
â”œâ”€â”€ util/               # å·¥å…·ç±»
â””â”€â”€ gateway/            # ç½‘å…³è°ƒç”¨å®¢æˆ·ç«¯
```

**âŒ ç¦æ­¢åŒ…å«**:
```
âŒ @Service æ³¨è§£çš„ç±»
âŒ @RestController æ³¨è§£çš„ç±»
âŒ @Component æ³¨è§£çš„ä¸šåŠ¡ç»„ä»¶ (Manageré™¤å¤–)
âŒ spring-boot-starter-web ä¾èµ–
âŒ ä»»ä½•HTTPç«¯ç‚¹å®šä¹‰
```

#### 3.3.2 ioedream-common-serviceï¼ˆå…¬å…±ä¸šåŠ¡å¾®æœåŠ¡ï¼‰

**âœ… å…è®¸åŒ…å«**:
```
ioedream-common-service/
â”œâ”€â”€ controller/          # RESTæ§åˆ¶å™¨ (@RestController)
â”‚   â”œâ”€â”€ audit/          # å®¡è®¡ç›¸å…³API
â”‚   â”œâ”€â”€ auth/           # è®¤è¯ç›¸å…³API
â”‚   â”œâ”€â”€ dict/           # å­—å…¸ç›¸å…³API
â”‚   â”œâ”€â”€ menu/           # èœå•ç›¸å…³API
â”‚   â”œâ”€â”€ monitor/        # ç›‘æ§ç›¸å…³API
â”‚   â”œâ”€â”€ notification/   # é€šçŸ¥ç›¸å…³API
â”‚   â”œâ”€â”€ organization/   # ç»„ç»‡ç›¸å…³API
â”‚   â”œâ”€â”€ scheduler/      # è°ƒåº¦ç›¸å…³API
â”‚   â”œâ”€â”€ security/       # å®‰å…¨ç›¸å…³API
â”‚   â””â”€â”€ system/         # ç³»ç»Ÿç›¸å…³API
â”œâ”€â”€ service/            # ä¸šåŠ¡æœåŠ¡å±‚ (@Service)
â”‚   â””â”€â”€ impl/           # æœåŠ¡å®ç°
â””â”€â”€ config/             # æœåŠ¡é…ç½®
```

**æ ¸å¿ƒèŒè´£**:
1. ç”¨æˆ·è®¤è¯ä¸æˆæƒ (JWTã€OAuth2)
2. ç»„ç»‡æ¶æ„ç®¡ç† (éƒ¨é—¨ã€å‘˜å·¥ã€äººå‘˜)
3. æƒé™ç®¡ç† (è§’è‰²ã€æƒé™ã€èœå•)
4. å­—å…¸ç®¡ç† (å­—å…¸ç±»å‹ã€å­—å…¸æ•°æ®)
5. å®¡è®¡æ—¥å¿— (æ“ä½œæ—¥å¿—ã€ç™»å½•æ—¥å¿—)
6. ç³»ç»Ÿé…ç½® (å‚æ•°é…ç½®ã€ç¼“å­˜ç®¡ç†)
7. é€šçŸ¥ç®¡ç† (ç«™å†…æ¶ˆæ¯ã€é‚®ä»¶ã€çŸ­ä¿¡)
8. ä»»åŠ¡è°ƒåº¦ (å®šæ—¶ä»»åŠ¡ã€ä»»åŠ¡æ—¥å¿—)
9. ç›‘æ§å‘Šè­¦ (ç³»ç»Ÿç›‘æ§ã€å‘Šè­¦é…ç½®)
10. æ–‡ä»¶ç®¡ç† (æ–‡ä»¶ä¸Šä¼ ã€æ–‡ä»¶å­˜å‚¨)

---

## 4. æŠ€æœ¯æ ˆè§„èŒƒ

### 4.1 åç«¯æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ | ç”¨é€” |
|------|---------|------|------|
| **è¯­è¨€** | Java | 17 LTS | ä¸»å¼€å‘è¯­è¨€ |
| **æ¡†æ¶** | Spring Boot | **3.5.8** | åº”ç”¨æ¡†æ¶ |
| **å¾®æœåŠ¡** | Spring Cloud | **2025.0.0** | å¾®æœåŠ¡æ¡†æ¶ |
| **å¾®æœåŠ¡** | Spring Cloud Alibaba | **2025.0.0.0** | é˜¿é‡Œå·´å·´å¾®æœåŠ¡å¥—ä»¶ |
| **ORM** | MyBatis-Plus | **3.5.15** | æ•°æ®è®¿é—® |
| **æ•°æ®åº“** | MySQL | **8.0.35** | å…³ç³»å‹æ•°æ®åº“ |
| **ç¼“å­˜** | Redis | 7.x | ç¼“å­˜ã€ä¼šè¯ |
| **æ¶ˆæ¯é˜Ÿåˆ—** | RabbitMQ | 3.12+ | å¼‚æ­¥æ¶ˆæ¯ |
| **æ³¨å†Œä¸­å¿ƒ** | Nacos | 2.3.2+ | æœåŠ¡æ³¨å†Œä¸é…ç½® |
| **è¿æ¥æ± ** | Druid | **1.2.25** | æ•°æ®åº“è¿æ¥æ±  |
| **APIæ–‡æ¡£** | Knife4j | 4.4.0 | APIæ–‡æ¡£ç”Ÿæˆ |
| **è®¤è¯** | JWT | 0.12.3 | èº«ä»½è®¤è¯ |
| **å·¥å…·** | Hutool | 5.8.24 | å·¥å…·åº“ |
| **å·¥å…·** | Lombok | **1.18.42** | ä»£ç ç®€åŒ– |

### 4.2 å‰ç«¯æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ | ç”¨é€” |
|------|---------|------|------|
| **æ¡†æ¶** | Vue | 3.4.x | å‰ç«¯æ¡†æ¶ |
| **æ„å»º** | Vite | 5.x | æ„å»ºå·¥å…· |
| **çŠ¶æ€ç®¡ç†** | Pinia | 2.1.x | çŠ¶æ€ç®¡ç† |
| **è·¯ç”±** | Vue Router | 4.x | è·¯ç”±ç®¡ç† |
| **UIç»„ä»¶** | Ant Design Vue | 4.x | UIç»„ä»¶åº“ |
| **HTTP** | Axios | 1.6.x | HTTPå®¢æˆ·ç«¯ |
| **å›¾è¡¨** | ECharts | 5.4.x | å›¾è¡¨åº“ |
| **å›½é™…åŒ–** | Vue I18n | 9.x | å¤šè¯­è¨€ |
| **ä»£ç è§„èŒƒ** | ESLint + Prettier | - | ä»£ç è§„èŒƒ |
| **ç±»å‹æ£€æŸ¥** | TypeScript | 5.3.x | ç±»å‹ç³»ç»Ÿ |

### 4.3 ç§»åŠ¨ç«¯æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ | ç”¨é€” |
|------|---------|------|------|
| **æ¡†æ¶** | uni-app | 3.0.x | è·¨å¹³å°æ¡†æ¶ |
| **è¯­è¨€** | Vue 3 | 3.2.x | å¼€å‘è¯­è¨€ |
| **çŠ¶æ€ç®¡ç†** | Pinia | 2.0.x | çŠ¶æ€ç®¡ç† |
| **UIç»„ä»¶** | uni-ui | 1.5.x | UIç»„ä»¶åº“ |
| **æ„å»º** | Vite | 4.x | æ„å»ºå·¥å…· |
| **æ ·å¼** | Sass | 1.69.x | CSSé¢„å¤„ç† |

---

## 5. åç«¯æ¶æ„è¯¦è§£

### 5.1 å››å±‚æ¶æ„è§„èŒƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Controllerå±‚ (æ¥å£æ§åˆ¶å±‚)                      â”‚
â”‚  èŒè´£: æ¥æ”¶è¯·æ±‚ã€å‚æ•°æ ¡éªŒã€è°ƒç”¨Serviceã€è¿”å›å“åº”                   â”‚
â”‚  æ³¨è§£: @RestController, @RequestMapping, @Valid                  â”‚
â”‚  è¿”å›: ResponseDTO<T>                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Serviceå±‚ (ä¸šåŠ¡é€»è¾‘å±‚)                         â”‚
â”‚  èŒè´£: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†ã€è°ƒç”¨Manager                         â”‚
â”‚  æ³¨è§£: @Service, @Transactional                                  â”‚
â”‚  ä½ç½®: ioedream-xxx-service å¾®æœåŠ¡ä¸­                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Managerå±‚ (ä¸šåŠ¡ç¼–æ’å±‚)                         â”‚
â”‚  èŒè´£: å¤æ‚ä¸šåŠ¡ç¼–æ’ã€å¤šDAOåè°ƒã€ç¼“å­˜ç®¡ç†ã€å¤–éƒ¨æœåŠ¡è°ƒç”¨              â”‚
â”‚  æ³¨è§£: @Component                                                â”‚
â”‚  ä½ç½®: microservices-common æˆ– å¾®æœåŠ¡ä¸­                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    DAOå±‚ (æ•°æ®è®¿é—®å±‚)                             â”‚
â”‚  èŒè´£: æ•°æ®åº“CRUDæ“ä½œã€SQLæ˜ å°„                                    â”‚
â”‚  æ³¨è§£: @Mapper, extends BaseMapper<T>                            â”‚
â”‚  ä½ç½®: microservices-common                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ä»£ç è§„èŒƒ

#### 5.2.1 å‘½åè§„èŒƒ

| ç±»å‹ | å‘½åè§„åˆ™ | ç¤ºä¾‹ |
|------|---------|------|
| **Entity** | ä¸šåŠ¡å+Entity | `UserEntity`, `DepartmentEntity` |
| **DAO** | ä¸šåŠ¡å+Dao | `UserDao`, `DepartmentDao` |
| **Serviceæ¥å£** | ä¸šåŠ¡å+Service | `UserService`, `DepartmentService` |
| **Serviceå®ç°** | ä¸šåŠ¡å+ServiceImpl | `UserServiceImpl`, `DepartmentServiceImpl` |
| **Manager** | ä¸šåŠ¡å+Manager | `UserManager`, `DepartmentManager` |
| **Controller** | ä¸šåŠ¡å+Controller | `UserController`, `DepartmentController` |
| **Form** | ä¸šåŠ¡å+æ“ä½œ+Form | `UserAddForm`, `UserUpdateForm`, `UserQueryForm` |
| **VO** | ä¸šåŠ¡å+VO | `UserVO`, `UserDetailVO`, `UserListVO` |

#### 5.2.2 åŒ…ç»“æ„è§„èŒƒ

```
net.lab1024.sa.{module}/
â”œâ”€â”€ controller/           # æ§åˆ¶å™¨ (ä»…å¾®æœåŠ¡)
â”œâ”€â”€ service/             # æœåŠ¡æ¥å£ (ä»…å¾®æœåŠ¡)
â”‚   â””â”€â”€ impl/            # æœåŠ¡å®ç° (ä»…å¾®æœåŠ¡)
â”œâ”€â”€ manager/             # ä¸šåŠ¡ç¼–æ’ (å…¬å…±åº“æˆ–å¾®æœåŠ¡)
â”œâ”€â”€ dao/                 # æ•°æ®è®¿é—® (å…¬å…±åº“)
â”œâ”€â”€ entity/              # æ•°æ®å®ä½“ (å…¬å…±åº“)
â”œâ”€â”€ domain/              # é¢†åŸŸå¯¹è±¡ (å…¬å…±åº“)
â”‚   â”œâ”€â”€ form/            # è¡¨å•å¯¹è±¡
â”‚   â””â”€â”€ vo/              # è§†å›¾å¯¹è±¡
â”œâ”€â”€ config/              # é…ç½®ç±»
â”œâ”€â”€ constant/            # å¸¸é‡
â”œâ”€â”€ enums/               # æšä¸¾
â”œâ”€â”€ exception/           # å¼‚å¸¸
â””â”€â”€ util/                # å·¥å…·ç±»
```

#### 5.2.3 æ³¨è§£ä½¿ç”¨è§„èŒƒ

```java
// âœ… æ­£ç¡®: ä½¿ç”¨@Resourceä¾èµ–æ³¨å…¥
@Resource
private UserDao userDao;

// âŒ é”™è¯¯: ç¦æ­¢ä½¿ç”¨@Autowired
@Autowired
private UserDao userDao;

// âœ… æ­£ç¡®: DAOä½¿ç”¨@Mapper
@Mapper
public interface UserDao extends BaseMapper<UserEntity> {}

// âŒ é”™è¯¯: ç¦æ­¢ä½¿ç”¨@Repository
@Repository
public interface UserRepository extends BaseMapper<UserEntity> {}

// âœ… æ­£ç¡®: ä½¿ç”¨jakartaåŒ…å
import jakarta.annotation.Resource;
import jakarta.validation.Valid;

// âŒ é”™è¯¯: ç¦æ­¢ä½¿ç”¨javaxåŒ…å
import javax.annotation.Resource;
import javax.validation.Valid;
```

### 5.3 APIè®¾è®¡è§„èŒƒ

#### 5.3.1 RESTfulè§„èŒƒ

| HTTPæ–¹æ³• | ç”¨é€” | URLç¤ºä¾‹ | è¯·æ±‚ä½“ |
|---------|------|---------|-------|
| GET | æŸ¥è¯¢å•ä¸ª | `/api/v1/users/{id}` | æ—  |
| GET | æŸ¥è¯¢åˆ—è¡¨ | `/api/v1/users` | æ—  |
| POST | æ–°å¢ | `/api/v1/users` | JSON |
| PUT | å…¨é‡æ›´æ–° | `/api/v1/users/{id}` | JSON |
| PATCH | éƒ¨åˆ†æ›´æ–° | `/api/v1/users/{id}` | JSON |
| DELETE | åˆ é™¤ | `/api/v1/users/{id}` | æ—  |

#### 5.3.2 å“åº”æ ¼å¼è§„èŒƒ

```java
// ç»Ÿä¸€å“åº”æ ¼å¼
public class ResponseDTO<T> {
    private Integer code;        // çŠ¶æ€ç : 200æˆåŠŸ, å…¶ä»–å¤±è´¥
    private String message;      // æç¤ºä¿¡æ¯
    private T data;              // å“åº”æ•°æ®
    private Long timestamp;      // æ—¶é—´æˆ³
    private String traceId;      // é“¾è·¯è¿½è¸ªID
}

// åˆ†é¡µå“åº”æ ¼å¼
public class PageResult<T> {
    private List<T> list;        // æ•°æ®åˆ—è¡¨
    private Long total;          // æ€»è®°å½•æ•°
    private Integer pageNum;     // å½“å‰é¡µç 
    private Integer pageSize;    // æ¯é¡µå¤§å°
    private Integer pages;       // æ€»é¡µæ•°
}
```

---

## 6. å‰ç«¯æ¶æ„è¯¦è§£

### 6.1 é¡¹ç›®ç»“æ„

```
smart-admin-web-javascript/
â”œâ”€â”€ public/                      # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # APIæ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ business/           # ä¸šåŠ¡æ¨¡å—API
â”‚   â”‚   â”‚   â”œâ”€â”€ access/         # é—¨ç¦API
â”‚   â”‚   â”‚   â”œâ”€â”€ attendance/     # è€ƒå‹¤API
â”‚   â”‚   â”‚   â”œâ”€â”€ consume/        # æ¶ˆè´¹API
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ system/             # ç³»ç»Ÿç®¡ç†API
â”‚   â”‚   â””â”€â”€ support/            # æ”¯æ’‘åŠŸèƒ½API
â”‚   â”œâ”€â”€ assets/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ components/             # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ business/           # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ framework/          # æ¡†æ¶ç»„ä»¶
â”‚   â”‚   â””â”€â”€ support/            # æ”¯æ’‘ç»„ä»¶
â”‚   â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ constants/              # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ directives/             # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”œâ”€â”€ i18n/                   # å›½é™…åŒ–
â”‚   â”œâ”€â”€ layout/                 # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                    # ç¬¬ä¸‰æ–¹åº“å°è£…
â”‚   â”œâ”€â”€ plugins/                # æ’ä»¶
â”‚   â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ store/                  # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ theme/                  # ä¸»é¢˜æ ·å¼
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ views/                  # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ business/           # ä¸šåŠ¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ system/             # ç³»ç»Ÿç®¡ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ support/            # æ”¯æ’‘åŠŸèƒ½é¡µé¢
â”‚   â”œâ”€â”€ App.vue                 # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js                 # å…¥å£æ–‡ä»¶
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ README.md
```

### 6.2 å‰ç«¯å¼€å‘è§„èŒƒ

#### 6.2.1 ç»„ä»¶å‘½åè§„èŒƒ

```javascript
// âœ… æ­£ç¡®: ç»„ä»¶ä½¿ç”¨PascalCase
UserList.vue
UserDetail.vue
UserForm.vue

// âœ… æ­£ç¡®: ä¸šåŠ¡ç»„ä»¶å¸¦æ¨¡å—å‰ç¼€
AccessDeviceList.vue
AttendanceRecordTable.vue

// âŒ é”™è¯¯: ä½¿ç”¨kebab-caseå‘½åç»„ä»¶æ–‡ä»¶
user-list.vue
```

#### 6.2.2 APIè°ƒç”¨è§„èŒƒ

```javascript
// api/business/access/access-api.js
import { request } from '@/lib/axios';

/**
 * é—¨ç¦è®¾å¤‡API
 */
export const accessApi = {
  /**
   * æŸ¥è¯¢è®¾å¤‡åˆ—è¡¨
   * @param {Object} params - æŸ¥è¯¢å‚æ•°
   * @returns {Promise} è®¾å¤‡åˆ—è¡¨
   */
  getDeviceList(params) {
    return request.get('/api/v1/access/devices', { params });
  },

  /**
   * è·å–è®¾å¤‡è¯¦æƒ…
   * @param {number} id - è®¾å¤‡ID
   * @returns {Promise} è®¾å¤‡è¯¦æƒ…
   */
  getDeviceDetail(id) {
    return request.get(`/api/v1/access/devices/${id}`);
  },

  /**
   * æ–°å¢è®¾å¤‡
   * @param {Object} data - è®¾å¤‡ä¿¡æ¯
   * @returns {Promise} æ“ä½œç»“æœ
   */
  addDevice(data) {
    return request.post('/api/v1/access/devices', data);
  },

  /**
   * æ›´æ–°è®¾å¤‡
   * @param {number} id - è®¾å¤‡ID
   * @param {Object} data - è®¾å¤‡ä¿¡æ¯
   * @returns {Promise} æ“ä½œç»“æœ
   */
  updateDevice(id, data) {
    return request.put(`/api/v1/access/devices/${id}`, data);
  },

  /**
   * åˆ é™¤è®¾å¤‡
   * @param {number} id - è®¾å¤‡ID
   * @returns {Promise} æ“ä½œç»“æœ
   */
  deleteDevice(id) {
    return request.delete(`/api/v1/access/devices/${id}`);
  }
};
```

#### 6.2.3 çŠ¶æ€ç®¡ç†è§„èŒƒ

```javascript
// store/modules/access/access-device.js
import { defineStore } from 'pinia';
import { accessApi } from '@/api/business/access/access-api';

export const useAccessDeviceStore = defineStore('accessDevice', {
  state: () => ({
    deviceList: [],
    currentDevice: null,
    loading: false,
    pagination: {
      pageNum: 1,
      pageSize: 10,
      total: 0
    }
  }),

  getters: {
    /**
     * è·å–åœ¨çº¿è®¾å¤‡æ•°é‡
     */
    onlineDeviceCount: (state) => {
      return state.deviceList.filter(d => d.status === 'ONLINE').length;
    }
  },

  actions: {
    /**
     * åŠ è½½è®¾å¤‡åˆ—è¡¨
     * @param {Object} params - æŸ¥è¯¢å‚æ•°
     */
    async loadDeviceList(params = {}) {
      this.loading = true;
      try {
        const { data } = await accessApi.getDeviceList({
          ...params,
          pageNum: this.pagination.pageNum,
          pageSize: this.pagination.pageSize
        });
        this.deviceList = data.list;
        this.pagination.total = data.total;
      } finally {
        this.loading = false;
      }
    },

    /**
     * è®¾ç½®å½“å‰è®¾å¤‡
     * @param {Object} device - è®¾å¤‡å¯¹è±¡
     */
    setCurrentDevice(device) {
      this.currentDevice = device;
    }
  }
});
```

---

## 7. ç§»åŠ¨ç«¯æ¶æ„è¯¦è§£

### 7.1 é¡¹ç›®ç»“æ„

```
smart-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ business/           # ä¸šåŠ¡API
â”‚   â”‚   â”œâ”€â”€ support/            # æ”¯æ’‘API
â”‚   â”‚   â””â”€â”€ system/             # ç³»ç»ŸAPI
â”‚   â”œâ”€â”€ components/             # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ dict-select/        # å­—å…¸é€‰æ‹©
â”‚   â”‚   â”œâ”€â”€ smart-card/         # å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ constants/              # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ lib/                    # å·¥å…·åº“
â”‚   â”œâ”€â”€ pages/                  # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ attendance/         # è€ƒå‹¤é¡µé¢
â”‚   â”‚   â”œâ”€â”€ biometric/          # ç”Ÿç‰©è¯†åˆ«
â”‚   â”‚   â”œâ”€â”€ home/               # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ login/              # ç™»å½•
â”‚   â”‚   â”œâ”€â”€ mine/               # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ plugins/                # æ’ä»¶
â”‚   â”œâ”€â”€ static/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ store/                  # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ theme/                  # ä¸»é¢˜æ ·å¼
â”‚   â”œâ”€â”€ uni_modules/            # uni-appæ¨¡å—
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.vue                 # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.js                 # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ manifest.json           # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ pages.json              # é¡µé¢é…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.js
```

### 7.2 ç§»åŠ¨ç«¯å¼€å‘è§„èŒƒ

#### 7.2.1 é¡µé¢é…ç½®è§„èŒƒ

```json
// pages.json
{
  "pages": [
    {
      "path": "pages/home/index",
      "style": {
        "navigationBarTitleText": "é¦–é¡µ",
        "enablePullDownRefresh": true
      }
    },
    {
      "path": "pages/attendance/attendance-punch",
      "style": {
        "navigationBarTitleText": "è€ƒå‹¤æ‰“å¡"
      }
    }
  ],
  "tabBar": {
    "color": "#999999",
    "selectedColor": "#1890ff",
    "backgroundColor": "#ffffff",
    "list": [
      {
        "pagePath": "pages/home/index",
        "iconPath": "static/images/tabbar/home.png",
        "selectedIconPath": "static/images/tabbar/home-active.png",
        "text": "é¦–é¡µ"
      }
    ]
  }
}
```

#### 7.2.2 è¯·æ±‚å°è£…è§„èŒƒ

```javascript
// lib/smart-request.js
import { getToken, clearToken } from '@/lib/smart-support';

const BASE_URL = import.meta.env.VITE_API_BASE_URL;

/**
 * ç»Ÿä¸€è¯·æ±‚å°è£…
 * @param {Object} options - è¯·æ±‚é…ç½®
 * @returns {Promise} è¯·æ±‚ç»“æœ
 */
export function request(options) {
  return new Promise((resolve, reject) => {
    const token = getToken();
    
    uni.request({
      url: BASE_URL + options.url,
      method: options.method || 'GET',
      data: options.data,
      header: {
        'Content-Type': 'application/json',
        'Authorization': token ? `Bearer ${token}` : ''
      },
      success: (res) => {
        if (res.statusCode === 200) {
          if (res.data.code === 200) {
            resolve(res.data);
          } else if (res.data.code === 401) {
            // Tokenè¿‡æœŸï¼Œè·³è½¬ç™»å½•
            clearToken();
            uni.reLaunch({ url: '/pages/login/login' });
            reject(res.data);
          } else {
            uni.showToast({
              title: res.data.message || 'è¯·æ±‚å¤±è´¥',
              icon: 'none'
            });
            reject(res.data);
          }
        } else {
          reject(res);
        }
      },
      fail: (err) => {
        uni.showToast({
          title: 'ç½‘ç»œå¼‚å¸¸',
          icon: 'none'
        });
        reject(err);
      }
    });
  });
}
```

---

## 8. æœåŠ¡é—´é€šä¿¡è§„èŒƒ

### 8.1 é€šä¿¡æ–¹å¼

| åœºæ™¯ | é€šä¿¡æ–¹å¼ | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|
| **åŒæ­¥è°ƒç”¨** | HTTP/REST | å®æ—¶æ€§è¦æ±‚é«˜ã€æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜ |
| **å¼‚æ­¥è°ƒç”¨** | RabbitMQ | å‰Šå³°å¡«è°·ã€è§£è€¦ã€æœ€ç»ˆä¸€è‡´æ€§ |
| **äº‹ä»¶é©±åŠ¨** | RabbitMQ | ä¸šåŠ¡äº‹ä»¶é€šçŸ¥ã€æ—¥å¿—é‡‡é›† |

### 8.2 Gatewayè°ƒç”¨è§„èŒƒ

```java
/**
 * ç½‘å…³æœåŠ¡å®¢æˆ·ç«¯
 * æ‰€æœ‰å¾®æœåŠ¡é—´è°ƒç”¨å¿…é¡»é€šè¿‡æ­¤å®¢æˆ·ç«¯
 */
@Component
public class GatewayServiceClient {

    @Resource
    private RestTemplate restTemplate;

    /**
     * è°ƒç”¨å…¬å…±æœåŠ¡
     * @param path APIè·¯å¾„
     * @param method HTTPæ–¹æ³•
     * @param body è¯·æ±‚ä½“
     * @param responseType å“åº”ç±»å‹
     * @return å“åº”æ•°æ®
     */
    public <T> T callCommonService(String path, HttpMethod method, 
                                    Object body, Class<T> responseType) {
        String url = "http://ioedream-common-service" + path;
        return executeRequest(url, method, body, responseType);
    }

    /**
     * è°ƒç”¨é—¨ç¦æœåŠ¡
     */
    public <T> T callAccessService(String path, HttpMethod method, 
                                    Object body, Class<T> responseType) {
        String url = "http://ioedream-access-service" + path;
        return executeRequest(url, method, body, responseType);
    }

    // ... å…¶ä»–æœåŠ¡è°ƒç”¨æ–¹æ³•
}
```

### 8.3 æ¶ˆæ¯é˜Ÿåˆ—è§„èŒƒ

```java
/**
 * æ¶ˆæ¯é˜Ÿåˆ—é…ç½®
 */
@Configuration
public class RabbitMQConfig {

    // äº¤æ¢æœºå®šä¹‰
    public static final String EXCHANGE_BUSINESS = "ioedream.business.exchange";
    public static final String EXCHANGE_EVENT = "ioedream.event.exchange";

    // é˜Ÿåˆ—å®šä¹‰
    public static final String QUEUE_ACCESS_EVENT = "ioedream.access.event.queue";
    public static final String QUEUE_ATTENDANCE_EVENT = "ioedream.attendance.event.queue";
    public static final String QUEUE_NOTIFICATION = "ioedream.notification.queue";

    // è·¯ç”±é”®å®šä¹‰
    public static final String ROUTING_ACCESS_EVENT = "access.event.*";
    public static final String ROUTING_ATTENDANCE_EVENT = "attendance.event.*";
}
```

---

## 9. æ•°æ®åº“è®¾è®¡è§„èŒƒ

### 9.1 è¡¨å‘½åè§„èŒƒ

| ç±»å‹ | å‰ç¼€ | ç¤ºä¾‹ |
|------|------|------|
| ä¸šåŠ¡è¡¨ | t_ | t_user, t_department |
| å…³è”è¡¨ | t_rel_ | t_rel_user_role |
| æ—¥å¿—è¡¨ | t_log_ | t_log_operation |
| é…ç½®è¡¨ | t_config_ | t_config_system |
| å­—å…¸è¡¨ | t_dict_ | t_dict_type, t_dict_data |

### 9.2 å­—æ®µè§„èŒƒ

```sql
-- æ ‡å‡†è¡¨ç»“æ„æ¨¡æ¿
CREATE TABLE t_example (
    id              BIGINT          NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
    
    -- ä¸šåŠ¡å­—æ®µ
    name            VARCHAR(100)    NOT NULL COMMENT 'åç§°',
    code            VARCHAR(50)     NULL COMMENT 'ç¼–ç ',
    status          TINYINT         NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€: 0-ç¦ç”¨, 1-å¯ç”¨',
    sort            INT             NOT NULL DEFAULT 0 COMMENT 'æ’åº',
    remark          VARCHAR(500)    NULL COMMENT 'å¤‡æ³¨',
    
    -- æ‰©å±•å­—æ®µ
    extended_attributes JSON        NULL COMMENT 'æ‰©å±•å±æ€§(JSON)',
    
    -- å®¡è®¡å­—æ®µ (å¿…é¡»)
    create_time     DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    create_by       BIGINT          NULL COMMENT 'åˆ›å»ºäººID',
    update_time     DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    update_by       BIGINT          NULL COMMENT 'æ›´æ–°äººID',
    deleted_flag    TINYINT         NOT NULL DEFAULT 0 COMMENT 'åˆ é™¤æ ‡è®°: 0-æœªåˆ é™¤, 1-å·²åˆ é™¤',
    version         INT             NOT NULL DEFAULT 0 COMMENT 'ä¹è§‚é”ç‰ˆæœ¬å·',
    
    PRIMARY KEY (id),
    KEY idx_status (status),
    KEY idx_create_time (create_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç¤ºä¾‹è¡¨';
```

### 9.3 ç´¢å¼•è§„èŒƒ

1. **ä¸»é”®**: å¿…é¡»ä½¿ç”¨è‡ªå¢BIGINT
2. **å”¯ä¸€ç´¢å¼•**: ä¸šåŠ¡å”¯ä¸€å­—æ®µå¿…é¡»å»ºç«‹å”¯ä¸€ç´¢å¼•
3. **æ™®é€šç´¢å¼•**: æŸ¥è¯¢æ¡ä»¶å­—æ®µå»ºç«‹ç´¢å¼•
4. **å¤åˆç´¢å¼•**: éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™
5. **ç´¢å¼•å‘½å**: `idx_å­—æ®µå` æˆ– `uk_å­—æ®µå`

---

## 10. å®‰å…¨æ¶æ„è®¾è®¡

### 10.1 è®¤è¯æˆæƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è®¤è¯æˆæƒæµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ç”¨æˆ·ç™»å½•                                                    â”‚
â”‚     â”œâ”€â”€ éªŒè¯ç”¨æˆ·åå¯†ç                                           â”‚
â”‚     â”œâ”€â”€ ç”ŸæˆJWT Token (Access Token + Refresh Token)           â”‚
â”‚     â””â”€â”€ è¿”å›Tokenç»™å®¢æˆ·ç«¯                                       â”‚
â”‚                                                                 â”‚
â”‚  2. è¯·æ±‚è®¤è¯                                                    â”‚
â”‚     â”œâ”€â”€ å®¢æˆ·ç«¯æºå¸¦Access Tokenè¯·æ±‚                              â”‚
â”‚     â”œâ”€â”€ GatewayéªŒè¯Tokenæœ‰æ•ˆæ€§                                  â”‚
â”‚     â”œâ”€â”€ è§£æç”¨æˆ·ä¿¡æ¯å’Œæƒé™                                      â”‚
â”‚     â””â”€â”€ è½¬å‘è¯·æ±‚åˆ°åç«¯æœåŠ¡                                      â”‚
â”‚                                                                 â”‚
â”‚  3. æƒé™æ ¡éªŒ                                                    â”‚
â”‚     â”œâ”€â”€ æ¥å£çº§åˆ«: @PreAuthorizeæ³¨è§£                             â”‚
â”‚     â”œâ”€â”€ æ•°æ®çº§åˆ«: æ•°æ®æƒé™è¿‡æ»¤                                  â”‚
â”‚     â””â”€â”€ æŒ‰é’®çº§åˆ«: å‰ç«¯æƒé™æŒ‡ä»¤                                  â”‚
â”‚                                                                 â”‚
â”‚  4. Tokenåˆ·æ–°                                                   â”‚
â”‚     â”œâ”€â”€ Access Tokenè¿‡æœŸ                                        â”‚
â”‚     â”œâ”€â”€ ä½¿ç”¨Refresh Tokenè·å–æ–°Token                           â”‚
â”‚     â””â”€â”€ Refresh Tokenè¿‡æœŸåˆ™é‡æ–°ç™»å½•                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 å®‰å…¨è§„èŒƒ

| å®‰å…¨é¡¹ | å®ç°æ–¹å¼ | è¯´æ˜ |
|-------|---------|------|
| **ä¼ è¾“å®‰å…¨** | HTTPS | å…¨ç«™å¼ºåˆ¶HTTPS |
| **è®¤è¯å®‰å…¨** | JWT + Redis | Tokenå­˜å‚¨åœ¨Redisï¼Œæ”¯æŒä¸»åŠ¨å¤±æ•ˆ |
| **å¯†ç å®‰å…¨** | BCrypt | å¯†ç åŠ å¯†å­˜å‚¨ |
| **æ¥å£å®‰å…¨** | ç­¾åéªŒè¯ | å…³é”®æ¥å£ç­¾åæ ¡éªŒ |
| **SQLæ³¨å…¥** | MyBatiså‚æ•°åŒ– | ä½¿ç”¨#{}ï¼Œç¦æ­¢${} |
| **XSSé˜²æŠ¤** | è¾“å…¥è¿‡æ»¤ | æ•æ„Ÿå­—ç¬¦è½¬ä¹‰ |
| **CSRFé˜²æŠ¤** | TokenéªŒè¯ | è¯·æ±‚æºå¸¦CSRF Token |
| **æ•æ„Ÿæ•°æ®** | åŠ å¯†å­˜å‚¨ | AESåŠ å¯†æ•æ„Ÿå­—æ®µ |
| **æ—¥å¿—è„±æ•** | æ•°æ®è„±æ• | æ—¥å¿—ä¸­è„±æ•æ•æ„Ÿä¿¡æ¯ |

---

## 11. éƒ¨ç½²æ¶æ„è®¾è®¡

### 11.1 éƒ¨ç½²æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ¶æ„                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          è´Ÿè½½å‡è¡¡å±‚                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚   â”‚
â”‚  â”‚  â”‚   Nginx (ä¸»)    â”‚ â†â†’  â”‚   Nginx (å¤‡)    â”‚                        â”‚   â”‚
â”‚  â”‚  â”‚   Keepalived    â”‚     â”‚   Keepalived    â”‚                        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          åº”ç”¨æœåŠ¡å±‚ (K8s)                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ gatewayÃ—3   â”‚ â”‚ commonÃ—3    â”‚ â”‚ accessÃ—2    â”‚ â”‚ attendÃ—2    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ consumeÃ—2   â”‚ â”‚ visitorÃ—2   â”‚ â”‚ videoÃ—2     â”‚ â”‚ deviceÃ—2    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          æ•°æ®å­˜å‚¨å±‚                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ MySQLä¸»ä»   â”‚ â”‚ Rediså“¨å…µ   â”‚ â”‚ RabbitMQé›†ç¾¤â”‚ â”‚ MinIOé›†ç¾¤   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 1ä¸»2ä»      â”‚ â”‚ 1ä¸»2ä»3å“¨å…µ â”‚ â”‚ 3èŠ‚ç‚¹é•œåƒ   â”‚ â”‚ 4èŠ‚ç‚¹      â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          ç›‘æ§è¿ç»´å±‚                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Prometheus  â”‚ â”‚ Grafana     â”‚ â”‚ ELK Stack   â”‚ â”‚ SkyWalking  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ æŒ‡æ ‡é‡‡é›†    â”‚ â”‚ å¯è§†åŒ–      â”‚ â”‚ æ—¥å¿—åˆ†æ    â”‚ â”‚ é“¾è·¯è¿½è¸ª    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 å®¹å™¨åŒ–é…ç½®

```yaml
# docker-compose.yml (å¼€å‘ç¯å¢ƒ)
version: '3.8'

services:
  # APIç½‘å…³
  ioedream-gateway:
    image: ioedream/gateway:latest
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=dev
      - NACOS_SERVER_ADDR=nacos:8848
    depends_on:
      - nacos
      - redis

  # å…¬å…±æœåŠ¡
  ioedream-common-service:
    image: ioedream/common-service:latest
    ports:
      - "8088:8088"
    environment:
      - SPRING_PROFILES_ACTIVE=dev
      - NACOS_SERVER_ADDR=nacos:8848
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
    depends_on:
      - mysql
      - redis
      - nacos

  # å…¶ä»–æœåŠ¡...
```

---

## 12. ç›‘æ§ä¸è¿ç»´æ¶æ„

### 12.1 ç›‘æ§æŒ‡æ ‡

| ç›‘æ§ç±»å‹ | æŒ‡æ ‡é¡¹ | å‘Šè­¦é˜ˆå€¼ |
|---------|-------|---------|
| **åº”ç”¨ç›‘æ§** | JVMå†…å­˜ä½¿ç”¨ç‡ | >80% |
| **åº”ç”¨ç›‘æ§** | GCé¢‘ç‡ | >10æ¬¡/åˆ†é’Ÿ |
| **åº”ç”¨ç›‘æ§** | çº¿ç¨‹æ± ä½¿ç”¨ç‡ | >80% |
| **æ¥å£ç›‘æ§** | å“åº”æ—¶é—´P99 | >500ms |
| **æ¥å£ç›‘æ§** | é”™è¯¯ç‡ | >1% |
| **æ¥å£ç›‘æ§** | QPS | æ ¹æ®å®¹é‡è§„åˆ’ |
| **æ•°æ®åº“ç›‘æ§** | è¿æ¥æ•° | >80% |
| **æ•°æ®åº“ç›‘æ§** | æ…¢æŸ¥è¯¢ | >1ç§’ |
| **ç¼“å­˜ç›‘æ§** | å‘½ä¸­ç‡ | <90% |
| **ç¼“å­˜ç›‘æ§** | å†…å­˜ä½¿ç”¨ç‡ | >80% |
| **ç³»ç»Ÿç›‘æ§** | CPUä½¿ç”¨ç‡ | >80% |
| **ç³»ç»Ÿç›‘æ§** | å†…å­˜ä½¿ç”¨ç‡ | >80% |
| **ç³»ç»Ÿç›‘æ§** | ç£ç›˜ä½¿ç”¨ç‡ | >80% |

### 12.2 æ—¥å¿—è§„èŒƒ

```java
// æ—¥å¿—çº§åˆ«ä½¿ç”¨è§„èŒƒ
log.trace("è¯¦ç»†è·Ÿè¸ªä¿¡æ¯");           // å¼€å‘è°ƒè¯•
log.debug("è°ƒè¯•ä¿¡æ¯: {}", debugInfo); // å¼€å‘è°ƒè¯•
log.info("ä¸šåŠ¡æ“ä½œ: userId={}", id);  // æ­£å¸¸ä¸šåŠ¡
log.warn("è­¦å‘Šä¿¡æ¯: {}", warning);    // éœ€è¦å…³æ³¨
log.error("é”™è¯¯ä¿¡æ¯", exception);     // éœ€è¦å¤„ç†

// æ—¥å¿—æ ¼å¼
%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] [%X{traceId}] %-5level %logger{36} - %msg%n
```

---

## é™„å½•

### A. å‚è€ƒæ–‡æ¡£

- [Spring Bootå®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [Vue 3å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [uni-appå®˜æ–¹æ–‡æ¡£](https://uniapp.dcloud.net.cn/)
- [MyBatis-Pluså®˜æ–¹æ–‡æ¡£](https://baomidou.com/)

### B. ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|-----|------|-----|---------|
| v1.0.0 | 2025-12-02 | æ¶æ„å¸ˆå›¢é˜Ÿ | åˆå§‹ç‰ˆæœ¬ |

---

**æ–‡æ¡£ç»´æŠ¤**: æ¶æ„å¸ˆå›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-12-02

