# æ¶ˆè´¹æ¨¡å—å‰ç«¯ç§»åŠ¨ç«¯ç»„ä»¶è®¾è®¡

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†IOE-DREAMæ™ºèƒ½æ¶ˆè´¹ç®¡ç†ç³»ç»Ÿçš„ç§»åŠ¨ç«¯ç»„ä»¶è®¾è®¡ï¼ŒåŸºäºVue 3 + TypeScript + Vant 4æŠ€æœ¯æ ˆï¼Œæä¾›å®Œæ•´çš„ç§»åŠ¨ç«¯æ¶ˆè´¹è§£å†³æ–¹æ¡ˆã€‚åŒ…æ‹¬æ‰«ç æ”¯ä»˜ã€è´¦æˆ·ç®¡ç†ã€é€€æ¬¾å¤„ç†ã€æ¶ˆè´¹ç»Ÿè®¡ç­‰å…¨åŠŸèƒ½ç§»åŠ¨ç»„ä»¶ã€‚

### æŠ€æœ¯æ¶æ„
- **å‰ç«¯æ¡†æ¶**: Vue 3.4.0+
- **å¼€å‘è¯­è¨€**: TypeScript 5.0+
- **UIç»„ä»¶åº“**: Vant 4.8.0+
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.0+
- **è·¯ç”±ç®¡ç†**: Vue Router 4.2.0+
- **HTTPè¯·æ±‚**: Axios 1.6.0+
- **å®æ—¶é€šä¿¡**: WebSocket + Socket.IO
- **æ”¯ä»˜é›†æˆ**: å¾®ä¿¡æ”¯ä»˜SDKã€æ”¯ä»˜å®SDK
- **æ‰«ç åŠŸèƒ½**: HTML5 QRCode Scanner
- **åœ°å›¾æœåŠ¡**: é«˜å¾·åœ°å›¾/ç™¾åº¦åœ°å›¾

## 1. é¡¹ç›®ç»“æ„è®¾è®¡

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ consume/                   # æ¶ˆè´¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PaymentButton/         # æ”¯ä»˜æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ QRCodeScanner/         # äºŒç»´ç æ‰«æ
â”‚   â”‚   â”œâ”€â”€ AccountCard/           # è´¦æˆ·å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ TransactionList/       # äº¤æ˜“åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ RefundApplication/     # é€€æ¬¾ç”³è¯·
â”‚   â”‚   â”œâ”€â”€ PaymentMethodSelector/ # æ”¯ä»˜æ–¹å¼é€‰æ‹©
â”‚   â”‚   â”œâ”€â”€ AmountInput/           # é‡‘é¢è¾“å…¥
â”‚   â”‚   â”œâ”€â”€ MerchantPicker/        # å•†æˆ·é€‰æ‹©
â”‚   â”‚   â”œâ”€â”€ ConsumptionChart/      # æ¶ˆè´¹å›¾è¡¨
â”‚   â”‚   â””â”€â”€ RechargeForm/          # å……å€¼è¡¨å•
â”‚   â”œâ”€â”€ payment/                   # æ”¯ä»˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ WechatPay/             # å¾®ä¿¡æ”¯ä»˜
â”‚   â”‚   â”œâ”€â”€ AlipayPay/             # æ”¯ä»˜å®æ”¯ä»˜
â”‚   â”‚   â”œâ”€â”€ UnionPay/              # é“¶è”æ”¯ä»˜
â”‚   â”‚   â”œâ”€â”€ BalancePay/            # ä½™é¢æ”¯ä»˜
â”‚   â”‚   â””â”€â”€ PaymentResult/         # æ”¯ä»˜ç»“æœ
â”‚   â”œâ”€â”€ common/                    # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ QRCodeGenerator/       # äºŒç»´ç ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ AmountCalculator/      # é‡‘é¢è®¡ç®—å™¨
â”‚   â”‚   â”œâ”€â”€ NotificationBar/       # é€šçŸ¥æ 
â”‚   â”‚   â”œâ”€â”€ LoadingSpinner/        # åŠ è½½åŠ¨ç”»
â”‚   â”‚   â””â”€â”€ ErrorBoundary/         # é”™è¯¯è¾¹ç•Œ
â”‚   â””â”€â”€ charts/                    # å›¾è¡¨ç»„ä»¶
â”‚       â”œâ”€â”€ PieChart/              # é¥¼å›¾
â”‚       â”œâ”€â”€ LineChart/             # æŠ˜çº¿å›¾
â”‚       â”œâ”€â”€ BarChart/              # æŸ±çŠ¶å›¾
â”‚       â””â”€â”€ ProgressChart/         # è¿›åº¦å›¾è¡¨
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ consume/                   # æ¶ˆè´¹é¡µé¢
â”‚   â”‚   â”œâ”€â”€ PaymentPage.vue        # æ”¯ä»˜é¡µé¢
â”‚   â”‚   â”œâ”€â”€ AccountPage.vue        # è´¦æˆ·é¡µé¢
â”‚   â”‚   â”œâ”€â”€ HistoryPage.vue        # å†å²é¡µé¢
â”‚   â”‚   â”œâ”€â”€ RefundPage.vue         # é€€æ¬¾é¡µé¢
â”‚   â”‚   â”œâ”€â”€ RechargePage.vue       # å……å€¼é¡µé¢
â”‚   â”‚   â”œâ”€â”€ StatisticsPage.vue     # ç»Ÿè®¡é¡µé¢
â”‚   â”‚   â””â”€â”€ SettingsPage.vue       # è®¾ç½®é¡µé¢
â”‚   â””â”€â”€ tabs/                      # æ ‡ç­¾é¡µ
â”‚       â”œâ”€â”€ HomeTab.vue            # é¦–é¡µ
â”‚       â”œâ”€â”€ PaymentTab.vue         # æ”¯ä»˜é¡µ
â”‚       â”œâ”€â”€ AccountTab.vue         # è´¦æˆ·é¡µ
â”‚       â”œâ”€â”€ HistoryTab.vue         # å†å²é¡µ
â”‚       â””â”€â”€ ProfileTab.vue         # ä¸ªäººé¡µ
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ consume.ts                 # æ¶ˆè´¹çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ account.ts                 # è´¦æˆ·çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ payment.ts                 # æ”¯ä»˜çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ merchant.ts                # å•†æˆ·çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ notification.ts            # é€šçŸ¥çŠ¶æ€ç®¡ç†
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ consume.service.ts         # æ¶ˆè´¹æœåŠ¡
â”‚   â”œâ”€â”€ payment.service.ts         # æ”¯ä»˜æœåŠ¡
â”‚   â”œâ”€â”€ account.service.ts         # è´¦æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ merchant.service.ts        # å•†æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ websocket.service.ts       # WebSocketæœåŠ¡
â”‚   â””â”€â”€ notification.service.ts    # é€šçŸ¥æœåŠ¡
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ payment.ts                 # æ”¯ä»˜å·¥å…·
â”‚   â”œâ”€â”€ qrcode.ts                  # äºŒç»´ç å·¥å…·
â”‚   â”œâ”€â”€ amount.ts                  # é‡‘é¢å·¥å…·
â”‚   â”œâ”€â”€ crypto.ts                  # åŠ å¯†å·¥å…·
â”‚   â””â”€â”€ device.ts                  # è®¾å¤‡å·¥å…·
â””â”€â”€ types/
    â”œâ”€â”€ consume.ts                 # æ¶ˆè´¹ç±»å‹å®šä¹‰
    â”œâ”€â”€ account.ts                 # è´¦æˆ·ç±»å‹å®šä¹‰
    â”œâ”€â”€ payment.ts                 # æ”¯ä»˜ç±»å‹å®šä¹‰
    â””â”€â”€ api.ts                     # APIç±»å‹å®šä¹‰
```

## 2. æ ¸å¿ƒç»„ä»¶è®¾è®¡
## ğŸ“‹ IOE-DREAMä¸ƒå¾®æœåŠ¡æ¶æ„

**æ ¸å¿ƒæ¶æ„ç»„æˆ**:
- **Gateway Service (8080)**: APIç½‘å…³
- **Common Service (8088)**: å…¬å…±æ¨¡å—å¾®æœåŠ¡
- **DeviceComm Service (8087)**: è®¾å¤‡é€šè®¯å¾®æœåŠ¡
- **OA Service (8089)**: OAå¾®æœåŠ¡
- **Access Service (8090)**: é—¨ç¦æœåŠ¡
- **Attendance Service (8091)**: è€ƒå‹¤æœåŠ¡
- **Video Service (8092)**: è§†é¢‘æœåŠ¡
- **Consume Service (8094)**: æ¶ˆè´¹æœåŠ¡
- **Visitor Service (8095)**: è®¿å®¢æœåŠ¡

**æ¶æ„ç‰¹ç‚¹**:
- åŸºäºSpring Boot 3.5.8 + Java 17
- ä¸¥æ ¼éµå¾ªä¼ä¸šçº§å¾®æœåŠ¡è§„èŒƒ
- æ”¯æŒé«˜å¹¶å‘ã€é«˜å¯ç”¨ã€æ°´å¹³æ‰©å±•

**æŠ€æœ¯æ ˆæ ‡å‡†**:
- **æ•°æ®åº“**: MySQL 8.0 + Druidè¿æ¥æ± 
- **ç¼“å­˜**: Redis + Caffeineå¤šçº§ç¼“å­˜
- **æ³¨å†Œä¸­å¿ƒ**: Nacos
- **é…ç½®ä¸­å¿ƒ**: Nacos Config
- **è®¤è¯æˆæƒ**: Sa-Token

## ğŸ—ï¸ å››å±‚æ¶æ„è§„èŒƒ

**æ ‡å‡†æ¶æ„æ¨¡å¼**:
```
Controller (æ¥å£æ§åˆ¶å±‚)
    â†“
Service (æ ¸å¿ƒä¸šåŠ¡å±‚)
    â†“
Manager (æµç¨‹ç®¡ç†å±‚)
    â†“
DAO (æ•°æ®è®¿é—®å±‚)
```

**å±‚çº§èŒè´£**:
- **Controllerå±‚**: HTTPè¯·æ±‚å¤„ç†ã€å‚æ•°éªŒè¯ã€æƒé™æ§åˆ¶
- **Serviceå±‚**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†ã€ä¸šåŠ¡è§„åˆ™éªŒè¯
- **Managerå±‚**: å¤æ‚æµç¨‹ç¼–æ’ã€å¤šæ•°æ®ç»„è£…ã€ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- **DAOå±‚**: æ•°æ®åº“CRUDæ“ä½œã€SQLæŸ¥è¯¢å®ç°ã€æ•°æ®è®¿é—®è¾¹ç•Œ

**ä¸¥æ ¼ç¦æ­¢è·¨å±‚è®¿é—®**: Controllerä¸èƒ½ç›´æ¥è°ƒç”¨Manager/DAOï¼
### 2.1 PaymentButton æ”¯ä»˜æŒ‰é’®ç»„ä»¶
## âš ï¸ IOE-DREAMé›¶å®¹å¿è§„åˆ™ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**å¿…é¡»éµå®ˆçš„æ¶æ„è§„åˆ™**:
- âœ… **å¿…é¡»ä½¿ç”¨ @Resource æ³¨å…¥ä¾èµ–**
- âœ… **å¿…é¡»ä½¿ç”¨ @Mapper æ³¨è§£** (ç¦æ­¢@Repository)
- âœ… **å¿…é¡»ä½¿ç”¨ Dao åç¼€** (ç¦æ­¢Repository)
- âœ… **å¿…é¡»ä½¿ç”¨ @RestController æ³¨è§£**
- âœ… **å¿…é¡»ä½¿ç”¨ @Valid å‚æ•°æ ¡éªŒ**
- âœ… **å¿…é¡»è¿”å›ç»Ÿä¸€ResponseDTOæ ¼å¼**
- âœ… **å¿…é¡»éµå¾ªå››å±‚æ¶æ„è¾¹ç•Œ**

**ä¸¥æ ¼ç¦æ­¢äº‹é¡¹**:
- âŒ **ç¦æ­¢ä½¿ç”¨ @Autowired æ³¨å…¥**
- âŒ **ç¦æ­¢ä½¿ç”¨ @Repository æ³¨è§£**
- âŒ **ç¦æ­¢ä½¿ç”¨ Repository åç¼€å‘½å**
- âŒ **ç¦æ­¢è·¨å±‚è®¿é—®**
- âŒ **ç¦æ­¢åœ¨Controllerä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘**
- âŒ **ç¦æ­¢ç›´æ¥è®¿é—®æ•°æ®åº“**

**è¿è§„åæœ**: P0çº§é—®é¢˜ï¼Œç«‹å³ä¿®å¤ï¼Œç¦æ­¢åˆå¹¶ï¼

#### ç»„ä»¶æ¥å£å®šä¹‰
```typescript
// PaymentButton.vue
interface PaymentButtonProps {
  amount?: number;                 // æ”¯ä»˜é‡‘é¢
  disabled?: boolean;              // æ˜¯å¦ç¦ç”¨
  loading?: boolean;               // åŠ è½½çŠ¶æ€
  size?: 'small' | 'normal' | 'large'; // æŒ‰é’®å°ºå¯¸
  type?: 'default' | 'primary' | 'success'; // æŒ‰é’®ç±»å‹
  showAmount?: boolean;            // æ˜¯å¦æ˜¾ç¤ºé‡‘é¢
  countdown?: number;              // å€’è®¡æ—¶
  autoPay?: boolean;               // è‡ªåŠ¨æ”¯ä»˜
  paymentMethods?: PaymentMethod[]; // æ”¯æŒçš„æ”¯ä»˜æ–¹å¼
}

interface PaymentMethod {
  id: string;
  name: string;
  icon: string;
  enabled: boolean;
  priority: number;
}

interface PaymentButtonEmits {
  pay: [data: PaymentData];        // æ”¯ä»˜äº‹ä»¶
  methodChange: [method: PaymentMethod]; // æ”¯ä»˜æ–¹å¼å˜æ›´äº‹ä»¶
  error: [error: Error];           // é”™è¯¯äº‹ä»¶
}

interface PaymentData {
  amount: number;
  method: PaymentMethod;
  extraData?: Record<string, any>;
}
```

#### ç»„ä»¶å®ç°
```vue
<template>
  <div class="payment-button-container">
    <!-- æ”¯ä»˜æ–¹å¼é€‰æ‹© -->
    <div v-if="showMethodSelector" class="payment-methods">
      <div class="method-title">é€‰æ‹©æ”¯ä»˜æ–¹å¼</div>
      <div class="method-list">
        <div
          v-for="method in availableMethods"
          :key="method.id"
          class="method-item"
          :class="{ 'active': selectedMethod?.id === method.id }"
          @click="selectPaymentMethod(method)"
        >
          <van-icon
            :name="method.icon"
            :color="selectedMethod?.id === method.id ? '#1989fa' : '#969799'"
            size="24"
          />
          <span>{{ method.name }}</span>
          <van-icon
            v-if="selectedMethod?.id === method.id"
            name="success"
            color="#07c160"
            size="16"
          />
        </div>
      </div>
    </div>

    <!-- æ”¯ä»˜é‡‘é¢æ˜¾ç¤º -->
    <div v-if="showAmount && amount" class="amount-display">
      <div class="amount-label">æ”¯ä»˜é‡‘é¢</div>
      <div class="amount-value">
        <span class="currency">Â¥</span>
        <span class="amount">{{ formatAmount(amount) }}</span>
      </div>
      <div v-if="selectedMethod" class="method-info">
        <van-icon :name="selectedMethod.icon" size="16" />
        <span>{{ selectedMethod.name }}</span>
      </div>
    </div>

    <!-- æ”¯ä»˜æŒ‰é’® -->
    <div class="payment-button-wrapper">
      <van-button
        :type="buttonType"
        :size="size"
        :loading="loading"
        :disabled="disabled || !canPay"
        round
        block
        class="payment-button"
        @click="handlePay"
      >
        <template #icon>
          <van-icon :name="buttonIcon" size="20" />
        </template>
        {{ buttonText }}
      </van-button>

      <!-- å€’è®¡æ—¶æ˜¾ç¤º -->
      <div v-if="countdown > 0" class="countdown">
        {{ countdown }}ç§’åè‡ªåŠ¨æ”¯ä»˜
      </div>
    </div>

    <!-- æ”¯ä»˜çŠ¶æ€æ˜¾ç¤º -->
    <div v-if="paymentStatus" class="payment-status" :class="paymentStatus.type">
      <van-icon :name="paymentStatus.icon" size="20" />
      <span>{{ paymentStatus.message }}</span>
    </div>

    <!-- å¿«æ·æ”¯ä»˜é€‰é¡¹ -->
    <div v-if="showQuickOptions" class="quick-options">
      <div class="quick-title">å¿«æ·é‡‘é¢</div>
      <div class="quick-amounts">
        <van-button
          v-for="quickAmount in quickAmounts"
          :key="quickAmount"
          type="default"
          size="small"
          round
          @click="handleQuickAmount(quickAmount)"
        >
          Â¥{{ quickAmount }}
        </van-button>
      </div>
    </div>

    <!-- æ”¯ä»˜è¯´æ˜ -->
    <div v-if="showPaymentTips" class="payment-tips">
      <van-notice-bar
        left-icon="info-o"
        background="#fff7e6"
        color="#ed6a0c"
      >
        {{ paymentTips }}
      </van-notice-bar>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted, watch } from 'vue'
import { usePaymentStore } from '@/stores/payment'
import { useConsumeService } from '@/services/consume.service'
import { showToast, showConfirmDialog } from 'vant'

// Propså®šä¹‰
const props = withDefaults(defineProps<PaymentButtonProps>(), {
  disabled: false,
  loading: false,
  size: 'normal',
  type: 'primary',
  showAmount: true,
  countdown: 0,
  autoPay: false,
  paymentMethods: () => [
    { id: 'BALANCE', name: 'ä½™é¢æ”¯ä»˜', icon: 'balance-o', enabled: true, priority: 1 },
    { id: 'WECHAT', name: 'å¾®ä¿¡æ”¯ä»˜', icon: 'wechat', enabled: true, priority: 2 },
    { id: 'ALIPAY', name: 'æ”¯ä»˜å®', icon: 'alipay', enabled: true, priority: 3 }
  ]
})

// Emitså®šä¹‰
const emit = defineEmits<PaymentButtonEmits>()

// çŠ¶æ€ç®¡ç†
const paymentStore = usePaymentStore()
const consumeService = useConsumeService()

// å“åº”å¼æ•°æ®
const selectedMethod = ref<PaymentMethod | null>(null)
const paymentStatus = ref<{
  type: 'success' | 'error' | 'warning' | 'info';
  icon: string;
  message: string;
} | null>(null)

const countdownTimer = ref<NodeJS.Timeout | null>(null)

// é¢„è®¾å¿«æ·é‡‘é¢
const quickAmounts = [10, 20, 50, 100, 200]

// è®¡ç®—å±æ€§
const availableMethods = computed(() => {
  return props.paymentMethods
    .filter(method => method.enabled)
    .sort((a, b) => a.priority - b.priority)
})

const canPay = computed(() => {
  return props.amount && props.amount > 0 && selectedMethod.value !== null
})

const buttonType = computed(() => {
  if (props.type !== 'default') return props.type
  if (props.disabled || !canPay.value) return 'default'
  return 'primary'
})

const buttonIcon = computed(() => {
  if (props.loading) return 'loading'
  if (!canPay.value) return 'warning-o'
  return selectedMethod.value?.icon || 'credit-pay'
})

const buttonText = computed(() => {
  if (props.loading) return 'æ”¯ä»˜ä¸­...'

  if (!canPay.value) {
    if (!props.amount) return 'è¯·è¾“å…¥é‡‘é¢'
    if (!selectedMethod.value) return 'è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼'
  }

  return selectedMethod.value
    ? `${selectedMethod.value.name} Â¥${formatAmount(props.amount)}`
    : `æ”¯ä»˜ Â¥${formatAmount(props.amount)}`
})

const showMethodSelector = computed(() => {
  return props.paymentMethods.length > 1 && !selectedMethod.value
})

const showQuickOptions = computed(() => {
  return !props.amount && quickAmounts.length > 0
})

const showPaymentTips = computed(() => {
  return selectedMethod.value?.id === 'BALANCE'
})

const paymentTips = computed(() => {
  if (selectedMethod.value?.id === 'BALANCE') {
    return 'ä½¿ç”¨ä½™é¢æ”¯ä»˜æ— éœ€è¾“å…¥å¯†ç ï¼Œå®‰å…¨ä¾¿æ·'
  }
  return ''
})

// æ–¹æ³•å®ç°
const selectPaymentMethod = (method: PaymentMethod) => {
  selectedMethod.value = method
  emit('methodChange', method)
}

const handlePay = async () => {
  if (!canPay.value) {
    showToast('æ”¯ä»˜æ¡ä»¶ä¸æ»¡è¶³')
    return
  }

  try {
    const paymentData: PaymentData = {
      amount: props.amount!,
      method: selectedMethod.value!,
      extraData: {
        timestamp: Date.now(),
        deviceId: getDeviceId(),
        location: await getCurrentLocation()
      }
    }

    emit('pay', paymentData)

  } catch (error) {
    console.error('æ”¯ä»˜å¤±è´¥:', error)
    handlePaymentError(error as Error)
  }
}

const handleQuickAmount = (amount: number) => {
  // é€šè¿‡äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°é‡‘é¢
  const event = new CustomEvent('quick-amount', { detail: amount })
  window.dispatchEvent(event)
}

const handlePaymentError = (error: Error) => {
  paymentStatus.value = {
    type: 'error',
    icon: 'close',
    message: error.message || 'æ”¯ä»˜å¤±è´¥'
  }

  emit('error', error)
  showToast(error.message || 'æ”¯ä»˜å¤±è´¥')

  // æ¸…é™¤çŠ¶æ€
  setTimeout(() => {
    paymentStatus.value = null
  }, 3000)
}

const formatAmount = (amount: number): string => {
  return (amount / 100).toFixed(2)
}

const getDeviceId = (): string => {
  return localStorage.getItem('device_id') || `MOBILE_${Date.now()}`
}

const getCurrentLocation = async (): Promise<any> => {
  return new Promise((resolve) => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          resolve({
            latitude: position.coords.latitude,
            longitude: position.coords.longitude,
            accuracy: position.coords.accuracy
          })
        },
        () => {
          resolve(null) // ä½ç½®è·å–å¤±è´¥ä¸å½±å“æ”¯ä»˜
        },
        { timeout: 5000, enableHighAccuracy: true }
      )
    } else {
      resolve(null)
    }
  })
}

const startCountdown = () => {
  if (props.countdown <= 0) return

  let remaining = props.countdown
  countdownTimer.value = setInterval(() => {
    remaining--
    if (remaining <= 0) {
      clearInterval(countdownTimer.value!)
      if (props.autoPay && canPay.value) {
        handlePay()
      }
    }
  }, 1000)
}

const stopCountdown = () => {
  if (countdownTimer.value) {
    clearInterval(countdownTimer.value)
    countdownTimer.value = null
  }
}

// ç›‘å¬å¿«æ·é‡‘é¢äº‹ä»¶
onMounted(() => {
  window.addEventListener('quick-amount', (e: any) => {
    console.log('å¿«æ·é‡‘é¢é€‰æ‹©:', e.detail)
  })

  // è‡ªåŠ¨é€‰æ‹©é»˜è®¤æ”¯ä»˜æ–¹å¼
  if (availableMethods.value.length > 0 && !selectedMethod.value) {
    selectPaymentMethod(availableMethods.value[0])
  }

  // å¯åŠ¨å€’è®¡æ—¶
  if (props.autoPay && props.countdown > 0) {
    startCountdown()
  }
})

onUnmounted(() => {
  stopCountdown()
})

// ç›‘å¬é‡‘é¢å˜åŒ–
watch(() => props.amount, (newAmount) => {
  if (newAmount && newAmount > 0 && !selectedMethod.value && availableMethods.value.length > 0) {
    selectPaymentMethod(availableMethods.value[0])
  }
})

// ç›‘å¬æ”¯ä»˜æ–¹å¼é…ç½®å˜åŒ–
watch(() => props.paymentMethods, () => {
  if (!selectedMethod.value || !props.paymentMethods.find(m => m.id === selectedMethod.value?.id)) {
    const firstAvailable = availableMethods.value[0]
    if (firstAvailable) {
      selectPaymentMethod(firstAvailable)
    }
  }
}, { deep: true })

// ç›‘å¬è‡ªåŠ¨æ”¯ä»˜é…ç½®å˜åŒ–
watch(() => props.autoPay && props.countdown, (shouldStart) => {
  if (shouldStart) {
    startCountdown()
  } else {
    stopCountdown()
  }
})
</script>

<style lang="scss" scoped>
.payment-button-container {
  padding: 20px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
}

.payment-methods {
  margin-bottom: 20px;

  .method-title {
    font-size: 16px;
    font-weight: 600;
    color: #323233;
    margin-bottom: 12px;
    text-align: center;
  }

  .method-list {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;

    .method-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 16px 8px;
      background: #f7f8fa;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      border: 2px solid transparent;

      &:hover:not(.disabled) {
        background: #e8f4ff;
        transform: translateY(-2px);
      }

      &.active {
        background: #e3f2fd;
        border-color: #2196f3;
      }

      &.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .van-icon:first-child {
        margin-bottom: 8px;
      }

      span {
        font-size: 14px;
        color: #323233;
        margin-bottom: 4px;
        text-align: center;
      }

      .van-icon:last-child {
        align-self: flex-end;
      }
    }
  }
}

.amount-display {
  text-align: center;
  margin-bottom: 20px;

  .amount-label {
    font-size: 14px;
    color: #969799;
    margin-bottom: 8px;
  }

  .amount-value {
    display: flex;
    align-items: baseline;
    justify-content: center;
    margin-bottom: 12px;

    .currency {
      font-size: 24px;
      color: #ee0a24;
      font-weight: 500;
      margin-right: 4px;
    }

    .amount {
      font-size: 48px;
      color: #ee0a24;
      font-weight: 600;
      line-height: 1;
    }
  }

  .method-info {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: #646566;

    .van-icon {
      margin-right: 6px;
    }
  }
}

.payment-button-wrapper {
  position: relative;
  margin-bottom: 16px;

  .payment-button {
    height: 56px;
    font-size: 18px;
    font-weight: 600;
    background: linear-gradient(135deg, #1989fa, #1a73e8);
    border: none;
    box-shadow: 0 4px 16px rgba(25, 137, 250, 0.3);

    &.van-button--success {
      background: linear-gradient(135deg, #07c160, #00d084);
      box-shadow: 0 4px 16px rgba(7, 193, 96, 0.3);
    }

    &.van-button--warning {
      background: linear-gradient(135deg, #ff976a, #ff6b6b);
      box-shadow: 0 4px 16px rgba(255, 151, 106, 0.3);
    }
  }

  .countdown {
    position: absolute;
    top: -8px;
    right: 8px;
    padding: 2px 8px;
    background: #ff6b6b;
    color: white;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
  }
}

.payment-status {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 16px;
  font-size: 14px;

  .van-icon {
    margin-right: 8px;
  }

  &.success {
    background: #f0f9ff;
    color: #07c160;
    border: 1px solid #b3e0ff;
  }

  &.error {
    background: #fef2f2;
    color: #ee0a24;
    border: 1px solid #fecaca;
  }

  &.warning {
    background: #fffbf0;
    color: #ed6a0c;
    border: 1px solid #fdecc8;
  }

  &.info {
    background: #f0f8ff;
    color: #1989fa;
    border: 1px solid #d1e7ff;
  }
}

.quick-options {
  margin-bottom: 16px;

  .quick-title {
    font-size: 14px;
    color: #969799;
    margin-bottom: 12px;
    text-align: center;
  }

  .quick-amounts {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;

    .van-button {
      height: 36px;
      font-size: 14px;
    }
  }
}

.payment-tips {
  margin-top: 16px;
}

// å“åº”å¼è®¾è®¡
@media (max-width: 375px) {
  .payment-button-container {
    padding: 16px;
  }

  .payment-methods .method-list {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;

    .method-item {
      padding: 12px 6px;
    }
  }

  .amount-display .amount-value {
    .currency {
      font-size: 20px;
    }

    .amount {
      font-size: 36px;
    }
  }

  .payment-button-wrapper .payment-button {
    height: 48px;
    font-size: 16px;
  }

  .quick-options .quick-amounts {
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;

    .van-button {
      height: 32px;
      font-size: 12px;
    }
  }
}
</style>
```

### 2.2 QRCodeScanner äºŒç»´ç æ‰«æç»„ä»¶

#### ç»„ä»¶æ¥å£å®šä¹‰
```typescript
// QRCodeScanner.vue
interface QRCodeScannerProps {
  visible?: boolean;               // æ˜¯å¦æ˜¾ç¤º
  title?: string;                  // æ ‡é¢˜
  subtitle?: string;               // å‰¯æ ‡é¢˜
  scanMode?: 'CAMERA' | 'GALLERY'; // æ‰«ææ¨¡å¼
  timeout?: number;                // æ‰«æè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  continuous?: boolean;            // æ˜¯å¦è¿ç»­æ‰«æ
  showTorch?: boolean;             // æ˜¯å¦æ˜¾ç¤ºæ‰‹ç”µç­’
  torchDefault?: boolean;          // æ‰‹ç”µç­’é»˜è®¤çŠ¶æ€
}

interface QRCodeScannerEmits {
  scan: [result: QRCodeResult];    // æ‰«æç»“æœäº‹ä»¶
  error: [error: Error];           // é”™è¯¯äº‹ä»¶
  close: [];                       // å…³é—­äº‹ä»¶
  timeout: [];                     // è¶…æ—¶äº‹ä»¶
}

interface QRCodeResult {
  text: string;
  format: string;
  timestamp: number;
  imageData?: string;
}
```

#### ç»„ä»¶å®ç°
```vue
<template>
  <div v-if="visible" class="qr-scanner-overlay">
    <div class="scanner-container">
      <!-- æ‰«æå¤´éƒ¨ -->
      <div class="scanner-header">
        <van-button
          type="default"
          size="small"
          round
          @click="handleClose"
        >
          <van-icon name="cross" />
        </van-button>
        <div class="scanner-title">
          <h3>{{ title }}</h3>
          <p v-if="subtitle">{{ subtitle }}</p>
        </div>
        <van-button
          v-if="showTorch && cameraActive"
          type="default"
          size="small"
          round
          @click="toggleTorch"
        >
          <van-icon :name="torchOn ? 'fire' : 'fire-o'" />
        </van-button>
      </div>

      <!-- æ‰«æåŒºåŸŸ -->
      <div class="scanner-content">
        <!-- ç›¸æœºé¢„è§ˆ -->
        <div class="camera-container">
          <video
            ref="videoElement"
            class="camera-video"
            autoplay
            playsinline
            muted
          ></video>
          <canvas
            ref="canvasElement"
            class="scanner-canvas"
            width="640"
            height="480"
          ></canvas>

          <!-- æ‰«ææ¡† -->
          <div class="scanner-frame">
            <div class="frame-corners">
              <div class="corner top-left"></div>
              <div class="corner top-right"></div>
              <div class="corner bottom-left"></div>
              <div class="corner bottom-right"></div>
            </div>
            <div class="scan-line" :class="{ 'scanning': scanning }"></div>
          </div>

          <!-- æç¤ºä¿¡æ¯ -->
          <div class="scanner-hints">
            <div class="hint-text">å°†äºŒç»´ç æ”¾å…¥æ¡†å†…ï¼Œå³å¯è‡ªåŠ¨æ‰«æ</div>
            <div class="hint-status">
              <van-icon
                :name="scanningStatus.icon"
                :color="scanningStatus.color"
                size="16"
              />
              <span>{{ scanningStatus.text }}</span>
            </div>
          </div>
        </div>

        <!-- æ‰«ææ¨¡å¼åˆ‡æ¢ -->
        <div class="scan-modes">
          <van-button-group>
            <van-button
              :type="scanMode === 'CAMERA' ? 'primary' : 'default'"
              size="small"
              @click="switchMode('CAMERA')"
            >
              <van-icon name="photograph" />
              ç›¸æœº
            </van-button>
            <van-button
              :type="scanMode === 'GALLERY' ? 'primary' : 'default'"
              size="small"
              @click="switchMode('GALLERY')"
            >
              <van-icon name="photo-o" />
              ç›¸å†Œ
            </van-button>
          </van-button-group>
        </div>
      </div>

      <!-- åº•éƒ¨æ“ä½œ -->
      <div class="scanner-footer">
        <div class="recent-codes" v-if="recentScans.length > 0">
          <div class="recent-title">æœ€è¿‘æ‰«æ</div>
          <div class="recent-list">
            <div
              v-for="(scan, index) in recentScans.slice(-3)"
              :key="index"
              class="recent-item"
              @click="selectRecentScan(scan)"
            >
              <div class="recent-text">{{ maskQRCode(scan.text) }}</div>
              <div class="recent-time">{{ formatTime(scan.timestamp) }}</div>
            </div>
          </div>
        </div>

        <div class="manual-input">
          <van-button
            type="default"
            size="small"
            round
            @click="showManualInput"
          >
            <van-icon name="edit" />
            æ‰‹åŠ¨è¾“å…¥
          </van-button>
        </div>
      </div>
    </div>

    <!-- æ‰‹åŠ¨è¾“å…¥å¼¹çª— -->
    <van-dialog
      v-model:show="showManualDialog"
      title="æ‰‹åŠ¨è¾“å…¥äºŒç»´ç "
      :show-confirm-button="false"
      :show-cancel-button="false"
    >
      <div class="manual-input-content">
        <van-field
          v-model="manualInput"
          type="textarea"
          placeholder="è¯·è¾“å…¥äºŒç»´ç å†…å®¹"
          rows="3"
          autosize
        />
        <div class="manual-actions">
          <van-button
            type="default"
            @click="showManualDialog = false"
          >
            å–æ¶ˆ
          </van-button>
          <van-button
            type="primary"
            @click="handleManualInput"
          >
            ç¡®å®š
          </van-button>
        </div>
      </div>
    </van-dialog>

    <!-- æ–‡ä»¶é€‰æ‹©å™¨ï¼ˆç›¸å†Œæ¨¡å¼ï¼‰ -->
    <input
      v-if="scanMode === 'GALLERY'"
      ref="fileInput"
      type="file"
      accept="image/*"
      style="display: none"
      @change="handleFileSelect"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted, nextTick, watch } from 'vue'
import { showToast, showConfirmDialog } from 'vant'

// Propså®šä¹‰
const props = withDefaults(defineProps<QRCodeScannerProps>(), {
  visible: false,
  title: 'äºŒç»´ç æ‰«æ',
  subtitle: '',
  scanMode: 'CAMERA',
  timeout: 30,
  continuous: false,
  showTorch: true,
  torchDefault: false
})

// Emitså®šä¹‰
const emit = defineEmits<QRCodeScannerEmits>()

// å“åº”å¼æ•°æ®
const videoElement = ref<HTMLVideoElement | null>(null)
const canvasElement = ref<HTMLCanvasElement | null>(null)
const fileInput = ref<HTMLInputElement | null>(null)

const scanning = ref(false)
const cameraActive = ref(false)
const torchOn = ref(props.torchDefault)
const currentScanMode = ref(props.scanMode)

const recentScans = ref<QRCodeResult[]>([])
const showManualDialog = ref(false)
const manualInput = ref('')

let mediaStream: MediaStream | null = null
let scanTimer: NodeJS.Timeout | null = null
let timeoutTimer: NodeJS.Timeout | null = null
let animationId: number | null = null

// è®¡ç®—å±æ€§
const scanningStatus = computed(() => {
  if (scanning.value) {
    return { icon: 'scan', color: '#1989fa', text: 'æ­£åœ¨æ‰«æ...' }
  }
  if (cameraActive.value) {
    return { icon: 'photograph', color: '#07c160', text: 'æ‘„åƒå¤´å·²å°±ç»ª' }
  }
  return { icon: 'warning-o', color: '#ff976a', text: 'æ‘„åƒå¤´æœªå¯åŠ¨' }
})

// æ–¹æ³•å®ç°
const initializeScanner = async () => {
  if (currentScanMode.value === 'CAMERA') {
    await initializeCamera()
  } else {
    await initializeGallery()
  }
}

const initializeCamera = async () => {
  try {
    const constraints = {
      video: {
        facingMode: 'environment', // åç½®æ‘„åƒå¤´
        width: { ideal: 640 },
        height: { ideal: 480 },
        torch: torchOn.value
      },
      audio: false
    }

    mediaStream = await navigator.mediaDevices.getUserMedia(constraints)

    if (videoElement.value) {
      videoElement.value.srcObject = mediaStream
      cameraActive.value = true

      // å¯åŠ¨æ‰«æ
      startScanning()
    }

  } catch (error) {
    console.error('æ‘„åƒå¤´åˆå§‹åŒ–å¤±è´¥:', error)
    handleScannerError(new Error('æ— æ³•è®¿é—®æ‘„åƒå¤´'))
  }
}

const initializeGallery = async () => {
  // ç›¸å†Œæ¨¡å¼ä¸éœ€è¦åˆå§‹åŒ–ï¼Œç­‰å¾…ç”¨æˆ·é€‰æ‹©æ–‡ä»¶
  cameraActive.value = false
}

const startScanning = () => {
  if (!videoElement.value || !canvasElement.value) return

  scanning.value = true

  // å¯åŠ¨è¶…æ—¶å®šæ—¶å™¨
  if (props.timeout > 0) {
    timeoutTimer.value = setTimeout(() => {
      stopScanning()
      emit('timeout')
      showToast('æ‰«æè¶…æ—¶')
    }, props.timeout * 1000)
  }

  // å¼€å§‹æ‰«æå¾ªç¯
  const scan = () => {
    if (!scanning.value || !videoElement.value || !canvasElement.value) return

    const video = videoElement.value
    const canvas = canvasElement.value
    const ctx = canvas.getContext('2d')

    if (ctx && video.readyState === 4) {
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height)

      try {
        // è¿™é‡Œåº”è¯¥è°ƒç”¨äºŒç»´ç æ‰«æåº“
        const result = scanQRCodeFromCanvas(canvas)

        if (result) {
          handleScanSuccess(result)
        }
      } catch (error) {
        console.error('äºŒç»´ç æ‰«æå¤±è´¥:', error)
      }
    }

    animationId = requestAnimationFrame(scan)
  }

  scan()
}

const stopScanning = () => {
  scanning.value = false

  if (animationId) {
    cancelAnimationFrame(animationId)
    animationId = null
  }

  if (timeoutTimer) {
    clearTimeout(timeoutTimer)
    timeoutTimer = null
  }
}

const scanQRCodeFromCanvas = (canvas: HTMLCanvasElement): QRCodeResult | null => {
  // æ¨¡æ‹ŸäºŒç»´ç æ‰«æç»“æœ
  // å®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨çœŸå®çš„äºŒç»´ç æ‰«æåº“ï¼Œå¦‚jsQR
  return new Promise((resolve) => {
    setTimeout(() => {
      if (Math.random() > 0.95) { // 5%çš„æ¦‚ç‡æ¨¡æ‹Ÿæ‰«ææˆåŠŸ
        resolve({
          text: `QR_CODE_${Date.now()}`,
          format: 'QR_CODE',
          timestamp: Date.now(),
          imageData: canvas.toDataURL('image/jpeg', 0.8)
        })
      } else {
        resolve(null)
      }
    }, 100)
  }) as any
}

const handleScanSuccess = (result: QRCodeResult) => {
  // æ·»åŠ åˆ°æœ€è¿‘æ‰«æè®°å½•
  recentScans.value.push(result)

  // å¦‚æœä¸æ˜¯è¿ç»­æ‰«æï¼Œåœæ­¢æ‰«æ
  if (!props.continuous) {
    stopScanning()
    handleClose()
  }

  // å‘é€æ‰«æç»“æœ
  emit('scan', result)

  // éœ‡åŠ¨åé¦ˆï¼ˆå¦‚æœæ”¯æŒï¼‰
  if (navigator.vibrate) {
    navigator.vibrate(200)
  }
}

const handleScannerError = (error: Error) => {
  emit('error', error)
  showToast(error.message)
}

const toggleTorch = async () => {
  if (!mediaStream) return

  try {
    const track = mediaStream.getVideoTracks()[0]
    const capabilities = track.getCapabilities() as any

    if (capabilities.torch) {
      await track.applyConstraints({
        advanced: [{ torch: !torchOn.value }]
      } as any)
      torchOn.value = !torchOn.value
    } else {
      showToast('è®¾å¤‡ä¸æ”¯æŒæ‰‹ç”µç­’')
    }
  } catch (error) {
    console.error('åˆ‡æ¢æ‰‹ç”µç­’å¤±è´¥:', error)
    showToast('åˆ‡æ¢æ‰‹ç”µç­’å¤±è´¥')
  }
}

const switchMode = async (mode: 'CAMERA' | 'GALLERY') => {
  currentScanMode.value = mode

  // åœæ­¢å½“å‰æ‰«æ
  stopScanning()

  // åœæ­¢æ‘„åƒå¤´
  if (mediaStream) {
    mediaStream.getTracks().forEach(track => track.stop())
    mediaStream = null
  }

  cameraActive.value = false

  // åˆå§‹åŒ–æ–°æ¨¡å¼
  await initializeScanner()

  if (mode === 'GALLERY') {
    // è§¦å‘æ–‡ä»¶é€‰æ‹©
    nextTick(() => {
      fileInput.value?.click()
    })
  }
}

const handleFileSelect = async (event: Event) => {
  const file = (event.target as HTMLInputElement).files?.[0]
  if (!file) return

  try {
    const result = await scanQRCodeFromFile(file)
    if (result) {
      handleScanSuccess(result)
    } else {
      showToast('æœªè¯†åˆ«åˆ°äºŒç»´ç ')
    }
  } catch (error) {
    handleScannerError(error as Error)
  }

  // é‡ç½®æ–‡ä»¶è¾“å…¥
  if (fileInput.value) {
    fileInput.value.value = ''
  }
}

const scanQRCodeFromFile = (file: File): Promise<QRCodeResult | null> => {
  return new Promise((resolve, reject) => {
    const reader = new FileReader()

    reader.onload = (e) => {
      const img = new Image()
      img.onload = () => {
        const canvas = document.createElement('canvas')
        const ctx = canvas.getContext('2d')

        if (ctx) {
          canvas.width = img.width
          canvas.height = img.height
          ctx.drawImage(img, 0, 0)

          // è¿™é‡Œåº”è¯¥è°ƒç”¨äºŒç»´ç æ‰«æåº“
          setTimeout(() => {
            if (Math.random() > 0.1) { // 90%çš„æ¦‚ç‡æ¨¡æ‹Ÿæ‰«ææˆåŠŸ
              resolve({
                text: `QR_CODE_FROM_FILE_${Date.now()}`,
                format: 'QR_CODE',
                timestamp: Date.now()
              })
            } else {
              resolve(null)
            }
          }, 500)
        }
      }
      img.src = e.target?.result as string
    }

    reader.onerror = () => reject(new Error('æ–‡ä»¶è¯»å–å¤±è´¥'))
    reader.readAsDataURL(file)
  })
}

const selectRecentScan = (scan: QRCodeResult) => {
  emit('scan', scan)
  handleClose()
}

const showManualInput = () => {
  showManualDialog.value = true
}

const handleManualInput = () => {
  if (!manualInput.value.trim()) {
    showToast('è¯·è¾“å…¥äºŒç»´ç å†…å®¹')
    return
  }

  const result: QRCodeResult = {
    text: manualInput.value.trim(),
    format: 'MANUAL',
    timestamp: Date.now()
  }

  handleScanSuccess(result)
  showManualDialog.value = false
  manualInput.value = ''
}

const handleClose = () => {
  stopScanning()

  // åœæ­¢æ‘„åƒå¤´
  if (mediaStream) {
    mediaStream.getTracks().forEach(track => track.stop())
    mediaStream = null
  }

  cameraActive.value = false
  emit('close')
}

const maskQRCode = (text: string): string => {
  if (text.length <= 8) return text
  return text.substring(0, 4) + '****' + text.substring(text.length - 4)
}

const formatTime = (timestamp: number): string => {
  const now = Date.now()
  const diff = now - timestamp

  if (diff < 60000) {
    return 'åˆšåˆš'
  } else if (diff < 3600000) {
    return `${Math.floor(diff / 60000)}åˆ†é’Ÿå‰`
  } else if (diff < 86400000) {
    return `${Math.floor(diff / 3600000)}å°æ—¶å‰`
  } else {
    return new Date(timestamp).toLocaleDateString()
  }
}

// ç›‘å¬propså˜åŒ–
watch(() => props.visible, (visible) => {
  if (visible) {
    initializeScanner()
  } else {
    handleClose()
  }
})

watch(() => props.scanMode, (newMode) => {
  if (props.visible) {
    switchMode(newMode)
  }
})

// ç”Ÿå‘½å‘¨æœŸ
onUnmounted(() => {
  handleClose()
})
</script>

<style lang="scss" scoped>
.qr-scanner-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
}

.scanner-container {
  width: 100%;
  height: 100%;
  max-width: 480px;
  background: white;
  display: flex;
  flex-direction: column;
}

.scanner-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;

  .scanner-title {
    flex: 1;
    text-align: center;

    h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
    }

    p {
      margin: 4px 0 0 0;
      font-size: 14px;
      opacity: 0.8;
    }
  }

  .van-button {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;

    &:active {
      background: rgba(255, 255, 255, 0.3);
    }
  }
}

.scanner-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 16px;
}

.camera-container {
  position: relative;
  width: 100%;
  height: 300px;
  background: #000;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 16px;

  .camera-video,
  .scanner-canvas {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .scanner-canvas {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
  }

  .scanner-frame {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;

    .frame-corners {
      position: relative;
      width: 100%;
      height: 100%;

      .corner {
        position: absolute;
        width: 20px;
        height: 20px;
        border: 3px solid #07c160;

        &.top-left {
          top: 0;
          left: 0;
          border-right: none;
          border-bottom: none;
        }

        &.top-right {
          top: 0;
          right: 0;
          border-left: none;
          border-bottom: none;
        }

        &.bottom-left {
          bottom: 0;
          left: 0;
          border-right: none;
          border-top: none;
        }

        &.bottom-right {
          bottom: 0;
          right: 0;
          border-left: none;
          border-top: none;
        }
      }
    }

    .scan-line {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, #07c160, transparent);

      &.scanning {
        animation: scan-line 2s linear infinite;
      }
    }
  }

  .scanner-hints {
    position: absolute;
    bottom: 16px;
    left: 16px;
    right: 16px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 12px;
    border-radius: 8px;
    text-align: center;

    .hint-text {
      font-size: 14px;
      margin-bottom: 8px;
    }

    .hint-status {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      opacity: 0.8;

      .van-icon {
        margin-right: 6px;
      }
    }
  }
}

.scan-modes {
  display: flex;
  justify-content: center;
  margin-bottom: 16px;

  .van-button-group {
    .van-button {
      &:not(:first-child) {
        margin-left: -1px;
      }

      &:first-child {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      &:last-child {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    }
  }
}

.scanner-footer {
  padding: 16px 20px;
  background: #f7f8fa;
  border-top: 1px solid #ebedf0;

  .recent-codes {
    margin-bottom: 16px;

    .recent-title {
      font-size: 14px;
      color: #646566;
      margin-bottom: 8px;
    }

    .recent-list {
      display: flex;
      flex-direction: column;
      gap: 8px;

      .recent-item {
        background: white;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        border: 1px solid #ebedf0;

        &:hover {
          background: #f0f8ff;
          border-color: #1989fa;
        }

        .recent-text {
          font-size: 12px;
          color: #323233;
          margin-bottom: 2px;
          font-family: monospace;
        }

        .recent-time {
          font-size: 10px;
          color: #969799;
        }
      }
    }
  }

  .manual-input {
    text-align: center;
  }
}

.manual-input-content {
  padding: 16px;

  .manual-actions {
    display: flex;
    gap: 12px;
    margin-top: 16px;

    .van-button {
      flex: 1;
    }
  }
}

// åŠ¨ç”»æ•ˆæœ
@keyframes scan-line {
  0% {
    top: 0;
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
  100% {
    top: 100%;
    opacity: 1;
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 375px) {
  .scanner-container {
    max-width: 100%;
  }

  .camera-container {
    height: 250px;
  }

  .scanner-frame {
    width: 160px;
    height: 160px;
  }
}
</style>
```

### 2.3 AccountCard è´¦æˆ·å¡ç‰‡ç»„ä»¶

#### ç»„ä»¶æ¥å£å®šä¹‰
```typescript
// AccountCard.vue
interface AccountCardProps {
  accountInfo?: AccountInfo;        // è´¦æˆ·ä¿¡æ¯
  showBalance?: boolean;            // æ˜¯å¦æ˜¾ç¤ºä½™é¢
  showActions?: boolean;            // æ˜¯å¦æ˜¾ç¤ºæ“ä½œæŒ‰é’®
  showStatistics?: boolean;         // æ˜¯å¦æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
  refreshable?: boolean;            // æ˜¯å¦å¯åˆ·æ–°
  loading?: boolean;                // åŠ è½½çŠ¶æ€
}

interface AccountInfo {
  accountId: number;
  accountNo: string;
  userName: string;
  userNo: string;
  departmentName?: string;
  balance: number;
  availableBalance: number;
  frozenAmount: number;
  accountType: string;
  status: string;
  creditLimit?: number;
  monthlyLimit?: number;
  dailyLimit?: number;
  usedMonthly?: number;
  usedDaily?: number;
  lastConsumeTime?: string;
  lastConsumeAmount?: number;
}

interface AccountCardEmits {
  refresh: [];                      // åˆ·æ–°äº‹ä»¶
  recharge: [account: AccountInfo]; // å……å€¼äº‹ä»¶
  details: [account: AccountInfo];  // æŸ¥çœ‹è¯¦æƒ…äº‹ä»¶
  transfer: [account: AccountInfo]; // è½¬è´¦äº‹ä»¶
}
```

#### ç»„ä»¶å®ç°
```vue
<template>
  <div class="account-card">
    <!-- å¡ç‰‡å¤´éƒ¨ -->
    <div class="card-header">
      <div class="account-info">
        <div class="user-info">
          <div class="user-avatar">
            <van-image
              :src="getUserAvatar()"
              round
              width="48"
              height="48"
            >
              <template #loading>
                <van-loading type="spinner" size="24" />
              </template>
              <template #error>
                <van-icon name="user-circle-o" size="24" />
              </template>
            </van-image>
          </div>
          <div class="user-details">
            <div class="user-name">{{ accountInfo?.userName || 'æœªçŸ¥ç”¨æˆ·' }}</div>
            <div class="user-meta">
              <span class="account-no">{{ accountInfo?.accountNo || '' }}</span>
              <span class="department">{{ accountInfo?.departmentName || '' }}</span>
            </div>
          </div>
        </div>
        <div v-if="refreshable" class="refresh-btn" @click="handleRefresh">
          <van-icon
            :name="loading ? 'loading' : 'replay'"
            :class="{ 'rotating': loading }"
            size="18"
          />
        </div>
      </div>
    </div>

    <!-- ä½™é¢æ˜¾ç¤º -->
    <div v-if="showBalance" class="balance-section">
      <div class="balance-display">
        <div class="balance-label">è´¦æˆ·ä½™é¢</div>
        <div class="balance-amount">
          <span class="currency">Â¥</span>
          <span class="amount">{{ formatAmount(accountInfo?.balance || 0) }}</span>
        </div>
        <div v-if="accountInfo?.frozenAmount && accountInfo.frozenAmount > 0" class="frozen-amount">
          <span class="frozen-label">å†»ç»“é‡‘é¢ï¼š</span>
          <span class="frozen-value">Â¥{{ formatAmount(accountInfo.frozenAmount) }}</span>
        </div>
        <div class="available-balance">
          <span class="available-label">å¯ç”¨ä½™é¢ï¼š</span>
          <span class="available-value">Â¥{{ formatAmount(accountInfo?.availableBalance || 0) }}</span>
        </div>
      </div>

      <!-- é™é¢ä¿¡æ¯ -->
      <div v-if="showStatistics && accountInfo" class="limit-info">
        <div class="limit-item">
          <div class="limit-label">æ—¥é™é¢</div>
          <div class="limit-progress">
            <van-progress
              :percentage="getDailyLimitPercentage()"
              stroke-width="4"
              color="#1989fa"
            />
            <div class="limit-text">
              Â¥{{ formatAmount(accountInfo.usedDaily || 0) }} / Â¥{{ formatAmount(accountInfo.dailyLimit || 0) }}
            </div>
          </div>
        </div>
        <div class="limit-item">
          <div class="limit-label">æœˆé™é¢</div>
          <div class="limit-progress">
            <van-progress
              :percentage="getMonthlyLimitPercentage()"
              stroke-width="4"
              color="#07c160"
            />
            <div class="limit-text">
              Â¥{{ formatAmount(accountInfo.usedMonthly || 0) }} / Â¥{{ formatAmount(accountInfo.monthlyLimit || 0) }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- è´¦æˆ·çŠ¶æ€ -->
    <div class="account-status" :class="accountInfo?.status.toLowerCase()">
      <van-icon :name="getStatusIcon()" size="16" />
      <span>{{ getStatusText() }}</span>
    </div>

    <!-- æ¶ˆè´¹ç»Ÿè®¡ -->
    <div v-if="showStatistics && accountInfo" class="consume-stats">
      <div class="stats-item">
        <div class="stats-label">æœ€è¿‘æ¶ˆè´¹</div>
        <div class="stats-value" v-if="accountInfo.lastConsumeAmount">
          Â¥{{ formatAmount(accountInfo.lastConsumeAmount) }}
        </div>
        <div class="stats-value" v-else>--</div>
      </div>
      <div class="stats-item">
        <div class="stats-label">æ¶ˆè´¹æ—¶é—´</div>
        <div class="stats-value" v-if="accountInfo.lastConsumeTime">
          {{ formatDateTime(accountInfo.lastConsumeTime) }}
        </div>
        <div class="stats-value" v-else>--</div>
      </div>
    </div>

    <!-- æ“ä½œæŒ‰é’® -->
    <div v-if="showActions" class="card-actions">
      <van-button
        type="primary"
        size="small"
        round
        @click="handleRecharge"
      >
        <van-icon name="credit-pay" />
        å……å€¼
      </van-button>
      <van-button
        type="default"
        size="small"
        round
        @click="handleDetails"
      >
        <van-icon name="records" />
        æ˜ç»†
      </van-button>
      <van-button
        type="default"
        size="small"
        round
        @click="handleTransfer"
      >
        <van-icon name="exchange" />
        è½¬è´¦
      </van-button>
    </div>

    <!-- å¿«æ·æ“ä½œ -->
    <div class="quick-actions">
      <div class="quick-title">å¿«æ·æ“ä½œ</div>
      <div class="quick-grid">
        <div class="quick-item" @click="handleQrCode">
          <van-icon name="qr" size="24" color="#1989fa" />
          <span>ä»˜æ¬¾ç </span>
        </div>
        <div class="quick-item" @click="handleConsumption">
          <van-icon name="chart-trending-o" size="24" color="#07c160" />
          <span>æ¶ˆè´¹ç»Ÿè®¡</span>
        </div>
        <div class="quick-item" @click="handleRefund">
          <van-icon name="arrow-left" size="24" color="#ff976a" />
          <span>é€€æ¬¾</span>
        </div>
        <div class="quick-item" @click="handleSettings">
          <van-icon name="setting-o" size="24" color="#969799" />
          <span>è®¾ç½®</span>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useAccountStore } from '@/stores/account'
import { showToast } from 'vant'

// Propså®šä¹‰
const props = withDefaults(defineProps<AccountCardProps>(), {
  showBalance: true,
  showActions: true,
  showStatistics: true,
  refreshable: true,
  loading: false
})

// Emitså®šä¹‰
const emit = defineEmits<AccountCardEmits>()

// çŠ¶æ€ç®¡ç†
const accountStore = useAccountStore()

// è®¡ç®—å±æ€§
const accountInfo = computed(() => props.accountInfo || accountStore.currentAccount)

// æ–¹æ³•å®ç°
const handleRefresh = () => {
  emit('refresh')
}

const handleRecharge = () => {
  if (accountInfo.value) {
    emit('recharge', accountInfo.value)
  }
}

const handleDetails = () => {
  if (accountInfo.value) {
    emit('details', accountInfo.value)
  }
}

const handleTransfer = () => {
  if (accountInfo.value) {
    emit('transfer', accountInfo.value)
  }
}

const handleQrCode = () => {
  showToast('ç”Ÿæˆä»˜æ¬¾ç ')
}

const handleConsumption = () => {
  showToast('æŸ¥çœ‹æ¶ˆè´¹ç»Ÿè®¡')
}

const handleRefund = () => {
  showToast('ç”³è¯·é€€æ¬¾')
}

const handleSettings = () => {
  showToast('è´¦æˆ·è®¾ç½®')
}

const getUserAvatar = (): string => {
  // ç”Ÿæˆç”¨æˆ·å¤´åƒURLæˆ–è¿”å›é»˜è®¤å¤´åƒ
  return accountInfo.value?.userNo
    ? `https://api.dicebear.com/7.x/initials/svg?seed=${accountInfo.value.userNo}`
    : 'default-avatar.png'
}

const formatAmount = (amount: number): string => {
  return (amount / 100).toFixed(2)
}

const formatDateTime = (dateTime: string): string => {
  const date = new Date(dateTime)
  const now = new Date()
  const diff = now.getTime() - date.getTime()

  if (diff < 60000) {
    return 'åˆšåˆš'
  } else if (diff < 3600000) {
    return `${Math.floor(diff / 60000)}åˆ†é’Ÿå‰`
  } else if (diff < 86400000) {
    return date.toLocaleTimeString('zh-CN', {
      hour: '2-digit',
      minute: '2-digit'
    })
  } else {
    return date.toLocaleDateString('zh-CN', {
      month: 'numeric',
      day: 'numeric'
    })
  }
}

const getStatusIcon = (): string => {
  switch (accountInfo.value?.status) {
    case 'ACTIVE':
      return 'passed'
    case 'FROZEN':
      return 'lock'
    case 'CLOSED':
      return 'close'
    default:
      return 'warning-o'
  }
}

const getStatusText = (): string => {
  switch (accountInfo.value?.status) {
    case 'ACTIVE':
      return 'æ­£å¸¸'
    case 'FROZEN':
      return 'å·²å†»ç»“'
    case 'CLOSED':
      return 'å·²å…³é—­'
    default:
      return 'æœªçŸ¥çŠ¶æ€'
  }
}

const getDailyLimitPercentage = (): number => {
  if (!accountInfo.value || !accountInfo.value.dailyLimit) return 0
  return Math.min(
    ((accountInfo.value.usedDaily || 0) / accountInfo.value.dailyLimit) * 100,
    100
  )
}

const getMonthlyLimitPercentage = (): number => {
  if (!accountInfo.value || !accountInfo.value.monthlyLimit) return 0
  return Math.min(
    ((accountInfo.value.usedMonthly || 0) / accountInfo.value.monthlyLimit) * 100,
    100
  )
}
</script>

<style lang="scss" scoped>
.account-card {
  background: white;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  margin-bottom: 16px;
}

.card-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 20px;
  color: white;

  .account-info {
    display: flex;
    align-items: center;
    justify-content: space-between;

    .user-info {
      display: flex;
      align-items: center;
      flex: 1;

      .user-avatar {
        margin-right: 16px;
      }

      .user-details {
        .user-name {
          font-size: 18px;
          font-weight: 600;
          margin-bottom: 4px;
        }

        .user-meta {
          font-size: 14px;
          opacity: 0.8;

          .account-no {
            margin-right: 12px;
          }

          .department {
            opacity: 0.7;
          }
        }
      }
    }

    .refresh-btn {
      padding: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      cursor: pointer;
      transition: all 0.2s ease;

      &:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .rotating {
        animation: rotate 1s linear infinite;
      }
    }
  }
}

.balance-section {
  padding: 20px;
  background: white;
}

.balance-display {
  text-align: center;
  margin-bottom: 20px;

  .balance-label {
    font-size: 14px;
    color: #969799;
    margin-bottom: 8px;
  }

  .balance-amount {
    display: flex;
    align-items: baseline;
    justify-content: center;
    margin-bottom: 12px;

    .currency {
      font-size: 24px;
      color: #323233;
      font-weight: 500;
      margin-right: 4px;
    }

    .amount {
      font-size: 48px;
      color: #323233;
      font-weight: 600;
      line-height: 1;
    }
  }

  .frozen-amount {
    font-size: 12px;
    color: #ee0a24;
    margin-bottom: 8px;
  }

  .available-balance {
    font-size: 14px;
    color: #07c160;
    font-weight: 500;
  }
}

.limit-info {
  .limit-item {
    margin-bottom: 16px;

    &:last-child {
      margin-bottom: 0;
    }

    .limit-label {
      font-size: 14px;
      color: #646566;
      margin-bottom: 8px;
    }

    .limit-progress {
      .limit-text {
        font-size: 12px;
        color: #969799;
        margin-top: 4px;
        display: flex;
        justify-content: space-between;
      }
    }
  }
}

.account-status {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px 20px;
  font-size: 14px;
  font-weight: 500;
  border-bottom: 1px solid #ebedf0;

  .van-icon {
    margin-right: 6px;
  }

  &.active {
    color: #07c160;
    background: rgba(7, 193, 96, 0.05);
  }

  &.frozen {
    color: #ee0a24;
    background: rgba(238, 10, 36, 0.05);
  }

  &.closed {
    color: #969799;
    background: rgba(150, 151, 153, 0.05);
  }
}

.consume-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  padding: 16px 20px;
  background: #f7f8fa;

  .stats-item {
    text-align: center;

    .stats-label {
      font-size: 12px;
      color: #969799;
      margin-bottom: 4px;
    }

    .stats-value {
      font-size: 16px;
      color: #323233;
      font-weight: 500;
    }
  }
}

.card-actions {
  display: flex;
  justify-content: space-around;
  padding: 16px 20px;
  background: white;
  border-top: 1px solid #ebedf0;

  .van-button {
    min-width: 80px;

    .van-icon {
      margin-right: 4px;
    }
  }
}

.quick-actions {
  padding: 16px 20px;
  background: #f7f8fa;

  .quick-title {
    font-size: 14px;
    color: #646566;
    margin-bottom: 12px;
    text-align: center;
  }

  .quick-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;

    .quick-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 12px 8px;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;

      &:hover {
        background: #f0f8ff;
        transform: translateY(-2px);
      }

      .van-icon {
        margin-bottom: 8px;
      }

      span {
        font-size: 12px;
        color: #646566;
        text-align: center;
      }
    }
  }
}

// åŠ¨ç”»æ•ˆæœ
@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 375px) {
  .card-header {
    padding: 16px;

    .account-info .user-info .user-details {
      .user-name {
        font-size: 16px;
      }

      .user-meta {
        font-size: 12px;
      }
    }
  }

  .balance-display {
    .balance-amount {
      .currency {
        font-size: 20px;
      }

      .amount {
        font-size: 36px;
      }
    }
  }

  .card-actions {
    .van-button {
      min-width: 70px;
      padding: 6px 12px;
      font-size: 12px;

      .van-icon {
        margin-right: 2px;
      }
    }
  }

  .quick-actions .quick-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;

    .quick-item {
      padding: 10px 6px;

      span {
        font-size: 11px;
      }
    }
  }
}
</style>
```

---

## ç§»åŠ¨ç«¯ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨
```typescript
import { ref } from 'vue'
import { PaymentButton, QRCodeScanner, AccountCard } from '@/components/consume'

export default {
  components: {
    PaymentButton,
    QRCodeScanner,
    AccountCard
  },
  setup() {
    const showScanner = ref(false)
    const paymentAmount = ref(0)

    const handlePayment = async (data: PaymentData) => {
      console.log('æ”¯ä»˜æ•°æ®:', data)
      // è°ƒç”¨æ”¯ä»˜API
    }

    const handleScan = (result: QRCodeResult) => {
      console.log('æ‰«æç»“æœ:', result)
      showScanner.value = false
    }

    return {
      showScanner,
      paymentAmount,
      handlePayment,
      handleScan
    }
  }
}
```

### å®Œæ•´æ”¯ä»˜é¡µé¢ç¤ºä¾‹
```vue
<template>
  <div class="payment-page">
    <!-- è´¦æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <AccountCard
      :account-info="accountInfo"
      :show-balance="true"
      :show-actions="true"
      :show-statistics="true"
      @refresh="refreshAccount"
      @recharge="handleRecharge"
      @details="handleDetails"
    />

    <!-- é‡‘é¢è¾“å…¥ -->
    <van-cell-group title="æ”¯ä»˜é‡‘é¢">
      <van-field
        v-model="paymentAmount"
        type="number"
        label="é‡‘é¢"
        placeholder="è¯·è¾“å…¥æ”¯ä»˜é‡‘é¢"
        @input="handleAmountChange"
      />
    </van-cell-group>

    <!-- æ”¯ä»˜æŒ‰é’® -->
    <PaymentButton
      :amount="paymentAmount"
      :loading="paying"
      :payment-methods="paymentMethods"
      @pay="handlePayment"
      @error="handlePaymentError"
    />

    <!-- äºŒç»´ç æ‰«æ -->
    <QRCodeScanner
      :visible="showScanner"
      title="æ‰«ç æ”¯ä»˜"
      subtitle="è¯·æ‰«æä»˜æ¬¾äºŒç»´ç "
      @scan="handleScanResult"
      @error="handleScanError"
      @close="showScanner = false"
    />

    <!-- å¿«æ·æ“ä½œ -->
    <van-grid :column-num="4" :gutter="12">
      <van-grid-item
        v-for="action in quickActions"
        :key="action.id"
        :icon="action.icon"
        :text="action.text"
        @click="handleQuickAction(action)"
      />
    </van-grid>
  </div>
</template>
```

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç»„ä»¶æ‡’åŠ è½½
```typescript
// è·¯ç”±æ‡’åŠ è½½
const PaymentPage = () => import('@/views/consume/PaymentPage.vue')

// ç»„ä»¶å¼‚æ­¥åŠ è½½
const QRCodeScanner = defineAsyncComponent(() =>
  import('@/components/consume/QRCodeScanner.vue')
)
```

### 2. å›¾ç‰‡ä¼˜åŒ–
```typescript
// ä½¿ç”¨WebPæ ¼å¼
const getOptimizedImageUrl = (url: string) => {
  if (supportsWebP()) {
    return url.replace(/\.(jpg|jpeg|png)$/, '.webp')
  }
  return url
}
```

### 3. å†…å­˜ç®¡ç†
```typescript
// åŠæ—¶æ¸…ç†åª’ä½“èµ„æº
onUnmounted(() => {
  if (mediaStream) {
    mediaStream.getTracks().forEach(track => track.stop())
  }
})
```

---

## å®‰å…¨æ³¨æ„äº‹é¡¹

### 1. æ”¯ä»˜å®‰å…¨
- æ”¯ä»˜æ•°æ®åŠ å¯†ä¼ è¾“
- é˜²é‡å¤æäº¤æœºåˆ¶
- æ”¯ä»˜é‡‘é¢éªŒè¯
- æ“ä½œæ—¥å¿—è®°å½•

### 2. è´¦æˆ·å®‰å…¨
- äºŒç»´ç æœ‰æ•ˆæœŸæ§åˆ¶
- æ•æ„Ÿä¿¡æ¯è„±æ•
- å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
- å®æ—¶ç›‘æ§å‘Šè­¦

### 3. æ•°æ®ä¿æŠ¤
- æœ¬åœ°æ•°æ®åŠ å¯†
- ç¼“å­˜æ—¶æ•ˆæ§åˆ¶
- æƒé™è®¿é—®æ§åˆ¶
- æ•°æ®å¤‡ä»½æ¢å¤

---

## ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: v2.0.0
- **å…¼å®¹Vue**: 3.4.0+
- **å…¼å®¹Vant**: 4.8.0+
- **æ›´æ–°æ—¥æœŸ**: 2024-01-15
- **æŠ€æœ¯æ”¯æŒ**: frontend-team@ioe-dream.com