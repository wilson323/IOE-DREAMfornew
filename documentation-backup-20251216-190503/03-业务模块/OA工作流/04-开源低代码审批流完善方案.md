# å¼€æºä½ä»£ç å®¡æ‰¹æµå®Œå–„æ–¹æ¡ˆ

> **åˆ›å»ºæ—¶é—´**: 2025-12-16
> **æ–¹æ¡ˆç±»å‹**: æŠ€æœ¯æ¶æ„å®Œå–„æ–¹æ¡ˆ
> **ä¼˜å…ˆçº§**: P0 - æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ
> **é€‚ç”¨èŒƒå›´**: IOE-DREAM OAå·¥ä½œæµç³»ç»Ÿ

---

## ğŸ“‹ æ–¹æ¡ˆæ¦‚è¿°

åŸºäºå…¨ç½‘å¼€æºä½ä»£ç å¹³å°è°ƒç ”ï¼Œç»“åˆIOE-DREAMé¡¹ç›®ç°æœ‰çš„Spring Boot 3.5.8 + Spring Cloud 2025.0.0 + Vue3æŠ€æœ¯æ ˆï¼Œåˆ¶å®šå®Œå–„çš„ä¼ä¸šçº§ä½ä»£ç å®¡æ‰¹æµå®ç°æ–¹æ¡ˆã€‚å‚è€ƒä¸»æµå¼€æºè§£å†³æ–¹æ¡ˆï¼šForm.ioã€Flowableã€Camundaã€JeecgBootç­‰ï¼Œæ„å»ºé€‚åˆæ™ºæ…§å›­åŒºåœºæ™¯çš„ä½ä»£ç å®¡æ‰¹æµå¹³å°ã€‚

### æ ¸å¿ƒæ”¹è¿›æ–¹å‘
- **å€Ÿé‰´Form.io**: å¼ºå¤§çš„è¡¨å•è®¾è®¡å™¨å’ŒJSON Schemaæ”¯æŒ
- **é›†æˆFlowable**: ä¼ä¸šçº§BPMN 2.0å·¥ä½œæµå¼•æ“
- **å‚è€ƒCamunda**: ç°ä»£åŒ–çš„ä½ä»£ç è®¾è®¡ç†å¿µ
- **å­¦ä¹ JeecgBoot**: å›½äº§åŒ–ä½ä»£ç å¹³å°ç»éªŒ
- **æ·±åº¦å¯¹æ ‡é’‰é’‰å®œæ­**: [é˜¿é‡Œäº‘å®œæ­æ¶æ„è§£æ](https://developer.aliyun.com/article/741284)å¾®æœåŠ¡æ¶æ„ç†å¿µ
- **é›†æˆé’‰é’‰å®¡æ‰¹æµ**: [é’‰é’‰å¼€å‘è€…æ–‡æ¡£](https://open.dingtalk.com/document/orgapp-server/approval-flow-development-guide)ä¼ä¸šçº§å®¡æ‰¹æµAPI
- **é€‚é…IOE-DREAM**: æ·±åº¦é›†æˆç°æœ‰å¾®æœåŠ¡æ¶æ„

### é’‰é’‰å®œæ­æŠ€æœ¯ç‰¹è‰²å€Ÿé‰´
- **[é’‰é’‰å®œæ­æ¶æ„è®¾è®¡](https://juejin.cn/post/6844904089377144839)**ï¼šReact/Vueå¯è§†åŒ–ç¼–è¾‘å™¨ + æ‹–æ‹½ç»„ä»¶ç³»ç»Ÿ
- **å¾®æœåŠ¡æ¶æ„**: å‰ç«¯æ¸²æŸ“å¼•æ“ + åç«¯æœåŠ¡åˆ†å±‚è®¾è®¡
- **ç»„ä»¶åŒ–å¼€å‘**: æ ‡å‡†åŒ–ç»„ä»¶åº“ + å¯è§†åŒ–é…ç½®
- **æƒé™ä½“ç³»**: ç²¾ç»†åŒ–æƒé™æ§åˆ¶ + ä¼ä¸šçº§å®‰å…¨
- **ç§»åŠ¨ä¼˜å…ˆ**: ç§»åŠ¨ç«¯é€‚é… + ç¦»çº¿èƒ½åŠ›

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„å®Œå–„æ–¹æ¡ˆ

### 1. æ•´ä½“æ¶æ„è®¾è®¡ï¼ˆå¯¹æ ‡é’‰é’‰å®œæ­ï¼‰

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚ - Vue3 + TypeScriptï¼ˆå¯¹æ ‡é’‰é’‰å®œæ­ï¼‰"
        A[è¡¨å•è®¾è®¡å™¨] --> B[æµç¨‹è®¾è®¡å™¨]
        B --> C[å®¡æ‰¹ä¸­å¿ƒ]
        C --> D[ç§»åŠ¨ç«¯å®¡æ‰¹]
        A --> E[é’‰é’‰é›†æˆæ¨¡å—]
    end

    subgraph "APIç½‘å…³å±‚ - Spring Cloud Gateway 2025"
        F[ç»Ÿä¸€å…¥å£] --> G[è·¯ç”±è½¬å‘]
        G --> H[è®¤è¯æˆæƒ]
        H --> I[é™æµç†”æ–­]
        I --> J[é’‰é’‰APIé›†æˆ]
    end

    subgraph "æ ¸å¿ƒå¼•æ“å±‚ - Spring Boot 3.5.8ï¼ˆå¢å¼ºFlowableï¼‰"
        K[ä½ä»£ç è¡¨å•å¼•æ“] --> L[å·¥ä½œæµå¼•æ“]
        L --> M[è§„åˆ™å¼•æ“]
        M --> N[é’‰é’‰å®¡æ‰¹æµé€‚é…å™¨]
        N --> O[äº‹ä»¶å¼•æ“]
    end

    subgraph "ä¸šåŠ¡æœåŠ¡å±‚ - å¾®æœåŠ¡æ¶æ„"
        P[è¡¨å•è®¾è®¡æœåŠ¡] --> Q[æµç¨‹ç®¡ç†æœåŠ¡]
        Q --> R[å®¡æ‰¹å¤„ç†æœåŠ¡]
        R --> S[é€šçŸ¥æœåŠ¡]
        S --> T[é’‰é’‰æ¶ˆæ¯æœåŠ¡]
    end

    subgraph "æ•°æ®å±‚ - å¤šæ•°æ®åº“æ”¯æŒ"
        U[PostgreSQL] --> V[JSON Schemaå­˜å‚¨]
        W[MongoDB] --> X[è¡¨å•å®šä¹‰å­˜å‚¨]
        Y[Redis] --> Z[ç¼“å­˜å’Œä¼šè¯]
    end

    subgraph "é’‰é’‰é›†æˆå±‚ - ä¼ä¸šçº§é›†æˆ"
        AA[é’‰é’‰ç»„ç»‡æ¶æ„åŒæ­¥] --> BB[é’‰é’‰ç”¨æˆ·åŒæ­¥]
        BB --> CC[é’‰é’‰å®¡æ‰¹æµåŒæ­¥]
        CC --> DD[é’‰é’‰æ¶ˆæ¯é€šçŸ¥]
        DD --> EE[é’‰é’‰æ•°æ®æ¨é€]
    end

    style A fill:#e1f5fe
    style K fill:#c8e6c9
    style U fill:#fff3e0
    style AA fill:#ffecb3
```

#### 1.1 é’‰é’‰å®œæ­æ¶æ„ç‰¹è‰²å¯¹æ¯”åˆ†æ

| æŠ€æœ¯å±‚é¢ | IOE-DREAMç°çŠ¶ | é’‰é’‰å®œæ­ç‰¹è‰² | æ”¹è¿›æ–¹å‘ |
|---------|---------------|-------------|---------|
| **å‰ç«¯æ¶æ„** | Vue3å•é¡µåº”ç”¨ | React/Vueå¾®å‰ç«¯ + å¯è§†åŒ–ç¼–è¾‘å™¨ | å‡çº§ä¸ºå¾®å‰ç«¯æ¶æ„ |
| **è¡¨å•å¼•æ“** | è‡ªç ”JSON Schema | å¼ºå¤§çš„ç»„ä»¶åŒ–è¡¨å•è®¾è®¡å™¨ | å€Ÿé‰´é’‰é’‰ç»„ä»¶è®¾è®¡ç†å¿µ |
| **æµç¨‹å¼•æ“** | è‡ªç ”æµç¨‹å¼•æ“ | æˆç†Ÿçš„BPMN 2.0å·¥ä½œæµ | é›†æˆFlowableå¢å¼ºç‰ˆæœ¬ |
| **ç§»åŠ¨ç«¯** | åŸºç¡€H5é€‚é… | åŸç”Ÿç§»åŠ¨ç«¯ä½“éªŒ | å¼€å‘åŸç”Ÿç§»åŠ¨åº”ç”¨ |
| **ä¼ä¸šé›†æˆ** | å¾®æœåŠ¡é›†æˆ | æ·±åº¦é’‰é’‰ç”Ÿæ€é›†æˆ | å®ç°é’‰é’‰æ— ç¼å¯¹æ¥ |

### 2. å‚è€ƒå¼€æºæ–¹æ¡ˆå¯¹æ¯”åˆ†æ

| å¼€æºæ–¹æ¡ˆ | æŠ€æœ¯æ ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | é€‚é…å»ºè®® |
|---------|--------|------|------|---------|
| **Form.io** | Node.js + MongoDB | å¼ºå¤§è¡¨å•è®¾è®¡å™¨ | åç«¯éJava | å€Ÿé‰´è¡¨å•è®¾è®¡ç†å¿µ |
| **Flowable** | Java + Spring Boot | æˆç†ŸBPMNå¼•æ“ | å­¦ä¹ æ›²çº¿é™¡å³­ | æ ¸å¿ƒå·¥ä½œæµå¼•æ“ |
| **Camunda** | Java + Spring Boot | ç°ä»£åŒ–è®¾è®¡ | å•†ä¸šç‰ˆæœ¬é™åˆ¶ | å‚è€ƒè®¾è®¡ç†å¿µ |
| **JeecgBoot** | Spring Boot + Vue | å›½äº§åŒ–ç¨‹åº¦é«˜ | æ¶æ„ç›¸å¯¹ä¼ ç»Ÿ | å€Ÿé‰´å›½å†…åŒ–ç»éªŒ |

### 3. IOE-DREAMæŠ€æœ¯æ ˆé€‚é…

#### 3.1 åç«¯æŠ€æœ¯æ ˆå‡çº§

```java
// å‡çº§åçš„Spring Boot 3.5.8é…ç½®
@SpringBootApplication
@EnableFlowable
@EnableCaching
@EnableAsync
public class OaWorkflowApplication {

    public static void main(String[] args) {
        SpringApplication.run(OaWorkflowApplication.class, args);
    }

    @Bean
    public FormEngine formEngine() {
        return new FormEngineBuilder()
                .withDatabaseType(DatabaseType.POSTGRESQL)
                .withCacheManager(cacheManager())
                .withEventPublisher(eventPublisher())
                .build();
    }

    @Bean
    public WorkflowEngine workflowEngine() {
        return new WorkflowEngineBuilder()
                .withProcessEngine(processEngine())
                .withFormEngine(formEngine())
                .withTaskService(taskService())
                .build();
    }
}
```

#### 3.2 å‰ç«¯æŠ€æœ¯æ ˆä¼˜åŒ–

```typescript
// Vue3 + TypeScript å‰ç«¯æ¶æ„
import { createApp } from 'vue'
import { FormDesigner } from '@/components/form-designer'
import { WorkflowDesigner } from '@/components/workflow-designer'

const app = createApp(App)

// æ³¨å†Œæ ¸å¿ƒç»„ä»¶
app.component('FormDesigner', FormDesigner)
app.component('WorkflowDesigner', WorkflowDesigner)

// é›†æˆä¸»æµUIåº“
app.use(AntDesignVue)
app.use(ElementPlus)
app.use(Vant) // ç§»åŠ¨ç«¯
```

---

## ğŸ¨ è¡¨å•è®¾è®¡å™¨å®Œå–„æ–¹æ¡ˆ

### 1. å€Ÿé‰´Form.ioçš„è¡¨å•è®¾è®¡ç†å¿µ

#### 1.1 Form.ioæ ¸å¿ƒç‰¹æ€§åˆ†æ

```mermaid
graph LR
    A[Form.ioæ¶æ„] --> B[JSON Schema]
    A --> C[Form Renderer]
    A --> D[Submission API]
    A --> E[Plugin System]

    B --> F[è¡¨å•ç»“æ„å®šä¹‰]
    C --> G[åŠ¨æ€è¡¨å•æ¸²æŸ“]
    D --> H[æ•°æ®æäº¤ç®¡ç†]
    E --> I[è‡ªå®šä¹‰ç»„ä»¶]

    style A fill:#e1f5fe
    style I fill:#c8e6c9
```

#### 1.2 IOE-DREAMè¡¨å•è®¾è®¡å™¨æ¶æ„

```java
@Component
public class FormDefinitionService {

    /**
     * åŸºäºJSON Schemaçš„è¡¨å•å®šä¹‰
     */
    public FormDefinition createFormDefinition(FormDesignRequest request) {
        // ç”ŸæˆJSON Schema
        JsonNode schema = generateJsonSchema(request.getComponents());

        // ç”ŸæˆUI Schema
        JsonNode uiSchema = generateUiSchema(request.getLayout());

        return FormDefinition.builder()
                .id(UUID.randomUUID().toString())
                .name(request.getName())
                .schema(schema)
                .uiSchema(uiSchema)
                .components(request.getComponents())
                .build();
    }

    /**
     * åŠ¨æ€è¡¨å•æ¸²æŸ“
     */
    public RenderedForm renderForm(String formId, Map<String, Object> data) {
        FormDefinition definition = getFormDefinition(formId);

        return RenderedForm.builder()
                .formId(formId)
                .schema(definition.getSchema())
                .uiSchema(definition.getUiSchema())
                .data(data)
                .components(renderComponents(definition.getComponents()))
                .build();
    }
}
```

### 2. è¡¨å•ç»„ä»¶åº“è®¾è®¡

#### 2.1 æ ¸å¿ƒç»„ä»¶æ¶æ„

```typescript
// Vue3è¡¨å•ç»„ä»¶åŸºç±»
export abstract class BaseFormComponent<T = any> {
  abstract componentType: string;
  abstract props: FormComponentProps<T>;

  // æ¸²æŸ“æ–¹æ³•
  abstract render(): VNode;

  // éªŒè¯æ–¹æ³•
  abstract validate(value: T): ValidationResult;

  // åºåˆ—åŒ–æ–¹æ³•
  abstract serialize(value: T): any;

  // ååºåˆ—åŒ–æ–¹æ³•
  abstract deserialize(data: any): T;
}

// å…·ä½“ç»„ä»¶å®ç°
export class TextInputComponent extends BaseFormComponent<string> {
  componentType = 'text-input';

  render() {
    return h('el-input', {
      ...this.props,
      modelValue: this.props.value,
      'onUpdate:modelValue': this.props.onChange
    });
  }

  validate(value: string): ValidationResult {
    if (this.props.required && !value) {
      return { valid: false, message: 'æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹' };
    }
    if (this.props.maxLength && value.length > this.props.maxLength) {
      return { valid: false, message: `é•¿åº¦ä¸èƒ½è¶…è¿‡${this.props.maxLength}ä¸ªå­—ç¬¦` };
    }
    return { valid: true };
  }
}
```

#### 2.2 ç»„ä»¶æ³¨å†Œæœºåˆ¶

```javascript
// ç»„ä»¶æ³¨å†Œç³»ç»Ÿ
class FormComponentRegistry {
  private components = new Map<string, typeof BaseFormComponent>();

  register(type: string, component: typeof BaseFormComponent) {
    this.components.set(type, component);
  }

  get(type: string): typeof BaseFormComponent | undefined {
    return this.components.get(type);
  }

  getAll(): Map<string, typeof BaseFormComponent> {
    return new Map(this.components);
  }
}

// æ³¨å†Œå†…ç½®ç»„ä»¶
const registry = new FormComponentRegistry();
registry.register('text-input', TextInputComponent);
registry.register('number-input', NumberInputComponent);
registry.register('date-picker', DatePickerComponent);
registry.register('select', SelectComponent);
registry.register('file-upload', FileUploadComponent);
```

### 3. æ™ºèƒ½è¡¨å•ç”Ÿæˆ

#### 3.1 AIè¾…åŠ©è¡¨å•è®¾è®¡

```java
@Service
public class AIFormDesignService {

    @Autowired
    private LLMService llmService;

    /**
     * AIè¾…åŠ©ç”Ÿæˆè¡¨å•ç»“æ„
     */
    public FormStructure generateFormStructure(String businessDescription) {
        String prompt = String.format("""
            åŸºäºä»¥ä¸‹ä¸šåŠ¡æè¿°ï¼Œç”Ÿæˆè¡¨å•JSON Schemaï¼š
            ä¸šåŠ¡æè¿°ï¼š%s

            è¯·è¿”å›JSONæ ¼å¼çš„è¡¨å•ç»“æ„ï¼ŒåŒ…å«ï¼š
            1. è¡¨å•å­—æ®µå®šä¹‰
            2. éªŒè¯è§„åˆ™
            3. UIå¸ƒå±€å»ºè®®
            4. å­—æ®µå…³è”å…³ç³»

            åªè¿”å›JSONï¼Œä¸è¦å…¶ä»–è¯´æ˜æ–‡å­—ã€‚
            """, businessDescription);

        String response = llmService.generate(prompt);

        // è§£æAIå“åº”
        return parseAIResponse(response);
    }

    /**
     * æ™ºèƒ½å­—æ®µæ¨è
     */
    public List<String> recommendFields(String formType, String businessContext) {
        // åŸºäºå†å²è¡¨å•æ•°æ®å’ŒAIåˆ†ææ¨èå­—æ®µ
        return analyzeHistoricalForms(formType, businessContext);
    }
}
```

---

## âš™ï¸ å·¥ä½œæµå¼•æ“å®Œå–„æ–¹æ¡ˆ

### 1. Flowableé›†æˆæ–¹æ¡ˆ

#### 1.1 Flowableé…ç½®ä¼˜åŒ–

```java
@Configuration
@EnableProcessEngine
public class FlowableConfiguration {

    @Bean
    public ProcessEngineConfiguration processEngineConfiguration() {
        return ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration()
                .setDatabaseType(ProcessEngineConfiguration.DATABASE_TYPE_POSTGRES)
                .setDataSource(dataSource())
                .setTransactionManager(transactionManager())
                // è‡ªå®šä¹‰è¡¨å•å¼•æ“é›†æˆ
                .setFormEngine(new SpringFormEngine())
                // é›†æˆæ¶ˆæ¯é˜Ÿåˆ—
                .setAsyncExecutor(asyncExecutor())
                // å¯ç”¨äº‹ä»¶ç›‘å¬
                .setEventListeners(eventListeners());
    }

    @Bean
    public SpringFormEngine springFormEngine() {
        SpringFormEngine engine = new SpringFormEngine();
        engine.setFormEngines(new HashMap<>());
        return engine;
    }
}
```

#### 1.2 è‡ªå®šä¹‰è¡¨å•å¼•æ“

```java
@Component
public class CustomFormEngine implements FormEngine {

    @Override
    public String getName() {
        return "ioe-dream-form-engine";
    }

    @Override
    public Object renderStartForm(StartFormData startFormData) {
        // æ¸²æŸ“åŠ¨æ€è¡¨å•
        FormDefinition formDef = formDefinitionService.getById(startFormData.getFormKey());
        return formRenderService.renderForm(formDef);
    }

    @Override
    public Object renderTaskForm(FormData formData) {
        // æ¸²æŸ“ä»»åŠ¡è¡¨å•
        String taskId = formData.getTaskId();
        FormDefinition formDef = getTaskFormDefinition(taskId);
        return formRenderService.renderForm(formDef, formData);
    }

    @Override
    public FormData submitTaskForm(SubmittedFormData submittedFormData) {
        // å¤„ç†è¡¨å•æäº¤
        validateFormData(submittedFormData);
        return processFormData(submittedFormData);
    }
}
```

### 2. å®¡æ‰¹æµç¨‹å¢å¼º

#### 2.1 æ™ºèƒ½å®¡æ‰¹è·¯ç”±

```java
@Component
public class IntelligentApprovalRouter {

    @Autowired
    private MLApprovalService mlApprovalService;

    @Autowired
    private RuleEngine ruleEngine;

    /**
     * æ™ºèƒ½è·¯ç”±å†³ç­–
     */
    public String routeDecision(ApprovalRequest request) {
        // 1. åŸºäºå†å²æ•°æ®çš„æœºå™¨å­¦ä¹ é¢„æµ‹
        ApprovalPrediction prediction = mlApprovalService.predictApproval(request);

        // 2. åŸºäºè§„åˆ™å¼•æ“çš„ä¸šåŠ¡é€»è¾‘åˆ¤æ–­
        RuleExecutionResult ruleResult = ruleEngine.executeRules(request);

        // 3. ç»“åˆé¢„æµ‹ç»“æœå’Œè§„åˆ™ç»“æœåšå‡ºå†³ç­–
        return makeRoutingDecision(prediction, ruleResult, request);
    }

    /**
     * åŠ¨æ€å®¡æ‰¹äººåˆ†é…
     */
    public List<String> assignApprovers(String processDefinitionKey, Map<String, Object> variables) {
        // åŸºäºç»„ç»‡æ¶æ„å’Œä¸šåŠ¡è§„åˆ™åŠ¨æ€åˆ†é…å®¡æ‰¹äºº
        return approvalAssignerService.assignApprovers(processDefinitionKey, variables);
    }
}
```

#### 2.2 å®¡æ‰¹è´¨é‡ç›‘æ§

```java
@Component
public class ApprovalQualityMonitor {

    @EventListener
    @Async
    public void handleApprovalCompleted(ApprovalCompletedEvent event) {
        // è®°å½•å®¡æ‰¹æ•°æ®
        recordApprovalData(event);

        // åˆ†æå®¡æ‰¹è´¨é‡
        analyzeApprovalQuality(event);

        // æ›´æ–°ç”¨æˆ·ç”»åƒ
        updateUserProfile(event);
    }

    /**
     * å®¡æ‰¹æ•ˆç‡åˆ†æ
     */
    public ApprovalEfficiencyReport analyzeEfficiency(String timeRange) {
        return ApprovalEfficiencyReport.builder()
                .avgApprovalTime(calculateAvgApprovalTime(timeRange))
                .approvalRate(calculateApprovalRate(timeRange))
                .timeoutRate(calculateTimeoutRate(timeRange))
                .userWorkloadStatistics(calculateUserWorkload(timeRange))
                .build();
    }
}
```

---

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ

### 1. ç§»åŠ¨ç«¯æŠ€æœ¯é€‰å‹

#### 1.1 UniApp + Vue3ç§»åŠ¨ç«¯

```json
{
  "name": "oa-workflow-mobile",
  "version": "1.0.0",
  "framework": "uniapp",
  "vueVersion": "3.4.0",
  "platforms": ["h5", "app", "mp-weixin", "mp-alipay"],
  "dependencies": {
    "vue": "^3.4.0",
    "pinia": "^2.0.0",
    "vant": "^4.0.0",
    "@dcloudio/uni-ui": "^1.4.0"
  }
}
```

#### 1.2 ç§»åŠ¨ç«¯è¡¨å•æ¸²æŸ“

```vue
<template>
  <view class="mobile-form">
    <van-form @submit="onSubmit">
      <van-field
        v-for="field in formFields"
        :key="field.id"
        v-model="formData[field.name]"
        :label="field.label"
        :placeholder="field.placeholder"
        :rules="field.rules"
        :required="field.required"
      />
      <van-button type="primary" native-type="submit">æäº¤</van-button>
    </van-form>
  </view>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useWorkflowApi } from '@/api/workflow'

const { getFormDefinition, submitForm } = useWorkflowApi()

const formFields = ref([])
const formData = ref({})

onMounted(async () => {
  const formDef = await getFormDefinition(route.query.formId)
  formFields.value = formDef.fields
  formData.value = formDef.initialData
})

const onSubmit = async () => {
  try {
    await submitForm({
      formId: route.query.formId,
      data: formData.value
    })
    uni.showToast({ title: 'æäº¤æˆåŠŸ', icon: 'success' })
  } catch (error) {
    uni.showToast({ title: error.message, icon: 'error' })
  }
}
</script>
```

### 2. ç§»åŠ¨ç«¯å®¡æ‰¹ä¼˜åŒ–

#### 2.1 å¿«é€Ÿå®¡æ‰¹åŠŸèƒ½

```javascript
// ç§»åŠ¨ç«¯å¿«é€Ÿå®¡æ‰¹
class QuickApproval {
  constructor() {
    this.approvalHistory = new Map()
    this.commonActions = new Map()
  }

  // æ™ºèƒ½æ¨èå®¡æ‰¹åŠ¨ä½œ
  recommendAction(formId, formData) {
    const history = this.approvalHistory.get(formId) || []
    const similarCases = history.filter(h => this.isSimilar(h.data, formData))

    if (similarCases.length > 0) {
      return this.mostCommonAction(similarCases)
    }

    return this.getDefaultAction(formData)
  }

  // ä¸€é”®å®¡æ‰¹
  quickApprove(formId, action, comment) {
    return uni.request({
      url: '/api/workflow/quick-approve',
      method: 'POST',
      data: {
        formId,
        action,
        comment,
        timestamp: Date.now(),
        deviceInfo: this.getDeviceInfo()
      }
    })
  }

  // è¯­éŸ³å®¡æ‰¹
  voiceApprove(formId, audioData) {
    return uni.request({
      url: '/api/workflow/voice-approve',
      method: 'POST',
      data: {
        formId,
        audioData,
        deviceInfo: this.getDeviceInfo()
      }
    })
  }
}
```

---

## ğŸ”Œ å¾®æœåŠ¡é›†æˆæ–¹æ¡ˆ

### 1. ä¸ç°æœ‰å¾®æœåŠ¡é›†æˆ

#### 1.1 ç»Ÿä¸€APIç½‘å…³é…ç½®

```yaml
# application.yml
spring:
  cloud:
    gateway:
      routes:
        # è¡¨å•è®¾è®¡å™¨è·¯ç”±
        - id: form-designer
          uri: lb://oa-workflow-service
          predicates:
            - Path=/api/v1/forms/**
          filters:
            - StripPrefix=3

        # å®¡æ‰¹æµç¨‹è·¯ç”±
        - id: approval-flow
          uri: lb://oa-workflow-service
          predicates:
            - Path=/api/v1/approval/**
          filters:
            - StripPrefix=3

        # è·¨æ¨¡å—å®¡æ‰¹é›†æˆ
        - id: cross-module
          uri: lb://oa-workflow-service
          predicates:
            - Path=/api/v1/integration/**
          filters:
            - StripPrefix=3
```

#### 1.2 è·¨æ¨¡å—å®¡æ‰¹é›†æˆ

```java
@RestController
@RequestMapping("/api/v1/integration")
public class ModuleIntegrationController {

    @Autowired
    private ModuleIntegrationService integrationService;

    /**
     * é—¨ç¦æ¨¡å—å®¡æ‰¹é›†æˆ
     */
    @PostMapping("/access-control/request")
    public ResponseDTO<String> createAccessControlRequest(@RequestBody AccessControlRequest request) {
        // åˆ›å»ºè·¨æ¨¡å—å®¡æ‰¹æµç¨‹
        String processInstanceId = integrationService.createCrossModuleProcess(
            ModuleType.ACCESS_CONTROL, request);

        // å‘é€é€šçŸ¥ç»™ç›¸å…³ç³»ç»Ÿ
        integrationService.notifyModule(ModuleType.ACCESS_CONTROL, processInstanceId);

        return ResponseDTO.ok(processInstanceId);
    }

    /**
     * è€ƒå‹¤æ¨¡å—å®¡æ‰¹é›†æˆ
     */
    @PostMapping("/attendance/correction")
    public ResponseDTO<String> createAttendanceCorrection(@RequestBody AttendanceCorrectionRequest request) {
        return ResponseDTO.ok(integrationService.createCrossModuleProcess(
            ModuleType.ATTENDANCE, request));
    }

    /**
     * æ¶ˆè´¹æ¨¡å—å®¡æ‰¹é›†æˆ
     */
    @PostMapping("/consume/authorization")
    public ResponseDTO<String> createConsumeAuthorization(@RequestBody ConsumeAuthorizationRequest request) {
        return ResponseDTO.ok(integrationService.createCrossModuleProcess(
            ModuleType.CONSUME, request));
    }
}
```

### 2. äº‹ä»¶é©±åŠ¨æ¶æ„

#### 2.1 Spring Cloud Streamé›†æˆ

```java
@EnableBinding(ApprovalEventBinding.class)
public class ApprovalEventProcessor {

    @StreamListener(ApprovalEventBinding.APPROVAL_COMPLETED)
    public void handleApprovalCompleted(ApprovalCompletedEvent event) {
        // å¤„ç†å®¡æ‰¹å®Œæˆäº‹ä»¶
        log.info("æ”¶åˆ°å®¡æ‰¹å®Œæˆäº‹ä»¶: {}", event.getProcessInstanceId());

        // å‘é€åˆ°å¯¹åº”çš„ä¸šåŠ¡æ¨¡å—
        sendToBusinessModule(event);

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        updateStatistics(event);
    }

    @StreamListener(ApprovalEventBinding.FORM_SUBMITTED)
    public void handleFormSubmitted(FormSubmittedEvent event) {
        // å¤„ç†è¡¨å•æäº¤äº‹ä»¶
        log.info("æ”¶åˆ°è¡¨å•æäº¤äº‹ä»¶: {}", event.getFormId());

        // è§¦å‘å®¡æ‰¹æµç¨‹
        triggerApprovalProcess(event);
    }

    private void sendToBusinessModule(ApprovalCompletedEvent event) {
        String routingKey = getRoutingKey(event.getModuleType());

        // å‘é€åˆ°RabbitMQ
        rabbitTemplate.convertAndSend(
            "approval.exchange",
            routingKey,
            event
        );
    }
}
```

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡ä¼˜åŒ–

### 1. PostgreSQL JSONBæ”¯æŒ

```sql
-- è¡¨å•å®šä¹‰è¡¨ï¼ˆJSONBå­˜å‚¨ï¼‰
CREATE TABLE oa_form_definition (
    id VARCHAR(64) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    schema_json JSONB NOT NULL,  -- JSON Schema
    ui_schema_json JSONB NOT NULL,  -- UI Schema
    layout_json JSONB,  -- å¸ƒå±€é…ç½®
    components_json JSONB,  -- ç»„ä»¶é…ç½®
    status INTEGER DEFAULT 1,  -- çŠ¶æ€ï¼š1-å¯ç”¨ 0-ç¦ç”¨
    version INTEGER DEFAULT 1,
    created_by VARCHAR(64),
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(64),
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    deleted_flag INTEGER DEFAULT 0
);

-- åˆ›å»ºJSONç´¢å¼•
CREATE INDEX idx_form_definition_schema ON oa_form_definition USING GIN (schema_json);
CREATE INDEX idx_form_definition_ui_schema ON oa_form_definition USING GIN (ui_schema_json);

-- è¡¨å•æ•°æ®è¡¨
CREATE TABLE oa_form_data (
    id VARCHAR(64) PRIMARY KEY,
    form_id VARCHAR(64) NOT NULL,
    process_instance_id VARCHAR(64),
    data_json JSONB NOT NULL,  -- è¡¨å•æ•°æ®
    attachments JSONB,  -- é™„ä»¶ä¿¡æ¯
    status INTEGER DEFAULT 1,  -- çŠ¶æ€ï¼š1-è‰ç¨¿ 2-æäº¤ä¸­ 3-å·²å®¡æ‰¹ 4-å·²é©³å›
    submitted_by VARCHAR(64),
    submitted_time TIMESTAMP,
    approved_by VARCHAR(64),
    approved_time TIMESTAMP,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    deleted_flag INTEGER DEFAULT 0
);

-- åˆ›å»ºå¤åˆç´¢å¼•
CREATE INDEX idx_form_data_form_id_status ON oa_form_data(form_id, status);
CREATE INDEX idx_form_data_process_id ON oa_form_data(process_instance_id);
```

### 2. MongoDBè¡¨å•å­˜å‚¨

```javascript
// MongoDBè¡¨å•å®šä¹‰å­˜å‚¨
const formDefinitionSchema = new mongoose.Schema({
  _id: String,
  name: String,
  description: String,
  version: Number,
  schema: Object,        // JSON Schema
  uiSchema: Object,      // UI Schema
  layout: Object,         // å¸ƒå±€é…ç½®
  components: [Object],  // ç»„ä»¶åˆ—è¡¨
  settings: {
    permissions: Object,
    validation: Object,
    notifications: Object
  },
  status: {
    type: String,
    enum: ['active', 'inactive', 'deprecated']
  },
  metadata: {
    createdBy: String,
    updatedBy: String,
    tags: [String],
    category: String
  },
  createdAt: Date,
  updatedAt: Date
}, {
  collection: 'form_definitions',
  timestamps: true
});
```

---

## ğŸ”§ éƒ¨ç½²ä¸è¿ç»´æ–¹æ¡ˆ

### 1. Dockerå®¹å™¨åŒ–éƒ¨ç½²

```dockerfile
# å¤šé˜¶æ®µæ„å»º
FROM openjdk:17-jdk-slim as builder
WORKDIR /app
COPY pom.xml .
COPY src ./src
RUN mvn clean package -DskipTests

FROM openjdk:17-jre-slim
WORKDIR /app
COPY --from=builder /app/target/*.jar app.jar
EXPOSE 8089
ENTRYPOINT ["java", "-jar", "/app/app.jar"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  oa-workflow-service:
    build: .
    ports:
      - "8089:8089"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/oa_workflow
      - SPRING_REDIS_HOST=redis
    depends_on:
      - postgres
      - redis
    volumes:
      - ./logs:/app/logs
      - ./forms:/app/forms
    networks:
      - oa-network

  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=oa_workflow
      - POSTGRES_USER=oa_user
      - POSTGRES_PASSWORD=oa_password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - oa-network

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    networks:
      - oa-network

networks:
  oa-network:
    driver: bridge
```

### 2. Kuberneteséƒ¨ç½²é…ç½®

```yaml
# k8s-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: oa-workflow
spec:
  replicas: 3
  selector:
    matchLabels:
      app: oa-workflow
  template:
    metadata:
      labels:
        app: oa-workflow
    spec:
      containers:
      - name: oa-workflow
        image: ioedream/oa-workflow:latest
        ports:
        - containerPort: 8089
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "prod"
        - name: SPRING_DATASOURCE_URL
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: url
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
        livenessProbe:
          httpGet:
            path: /actuator/health
            port: 8089
          initialDelaySeconds: 60
          periodSeconds: 30
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

### 1. ç¼“å­˜ç­–ç•¥

```java
@Configuration
@EnableCaching
public class CacheConfiguration {

    @Bean
    public CacheManager cacheManager() {
        CompositeCacheManager manager = new CompositeCacheManager();

        // æœ¬åœ°ç¼“å­˜ - Caffeine
        CaffeineCacheManager caffeine = new CaffeineCacheManager();
        caffeine.setCaffeine(Caffeine.newBuilder()
                .expireAfterWrite(Duration.ofMinutes(30))
                .maximumSize(10000)
                .recordStats());
        manager.setCaches(caffeine.getCaches());

        // åˆ†å¸ƒå¼ç¼“å­˜ - Redis
        RedisCacheManager redis = RedisCacheManager.builder(redisConnectionFactory())
                .cacheDefaults(RedisCacheConfiguration.defaultCacheConfig()
                        .entryTtl(Duration.ofHours(1))
                        .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer())))
                .build();
        manager.setCaches(redis.getCaches());

        return manager;
    }
}
```

### 2. æ•°æ®åº“ä¼˜åŒ–

```sql
-- åˆ†åŒºè¡¨ä¼˜åŒ–
CREATE TABLE oa_form_data_2024 PARTITION OF oa_form_data
FOR VALUES FROM ('2024-01-01') TO ('2024-12-31');

-- åˆ›å»ºç‰©åŒ–è§†å›¾
CREATE MATERIALIZED VIEW oa_approval_statistics AS
SELECT
    DATE_TRUNC('day', approved_time) as approval_date,
    module_type,
    COUNT(*) as approval_count,
    AVG(EXTRACT(EPOCH FROM approved_time - submitted_time)) as avg_approval_time
FROM oa_approval_instance
WHERE status = 'COMPLETED'
GROUP BY DATE_TRUNC('day', approved_time), module_type;

-- å®šæœŸåˆ·æ–°ç‰©åŒ–è§†å›¾
CREATE OR REPLACE FUNCTION refresh_approval_statistics()
RETURNS void AS $$
BEGIN
    REFRESH MATERIALIZED VIEW oa_approval_statistics;
END;
$$ LANGUAGE plpgsql;
```

---

## ğŸ“‹ å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰ï¼šåŸºç¡€æ¶æ„æ­å»º
1. âœ… æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å®Œæˆ
2. â³ Spring Boot 3.5.8å‡çº§
3. â³ å‰ç«¯Vue3+TypeScripté‡æ„
4. â³ Flowableå·¥ä½œæµå¼•æ“é›†æˆ
5. â³ æ•°æ®åº“è®¾è®¡å’Œè¿ç§»

### ç¬¬äºŒé˜¶æ®µï¼ˆ2-3å‘¨ï¼‰ï¼šæ ¸å¿ƒåŠŸèƒ½å®ç°
1. â³ ä½ä»£ç è¡¨å•è®¾è®¡å™¨
2. â³ å¯è§†åŒ–æµç¨‹è®¾è®¡å™¨
3. â³ å®¡æ‰¹æµç¨‹é…ç½®å™¨
4. â³ ç§»åŠ¨ç«¯é€‚é…
5. â³ è·¨æ¨¡å—é›†æˆ

### ç¬¬ä¸‰é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰ï¼šä¼˜åŒ–å’Œæµ‹è¯•
1. â³ æ€§èƒ½ä¼˜åŒ–
2. â³ å®‰å…¨åŠ å›º
3. â³ é›†æˆæµ‹è¯•
4. â³ å‹åŠ›æµ‹è¯•
5. â³ éƒ¨ç½²ä¸Šçº¿

### ç¬¬å››é˜¶æ®µï¼ˆ1å‘¨ï¼‰ï¼šç›‘æ§å’Œè¿ç»´
1. â³ ç›‘æ§ç³»ç»Ÿæ­å»º
2. â³ æ—¥å¿—ç³»ç»Ÿå®Œå–„
3. â³ å‘Šè­¦è§„åˆ™é…ç½®
4. â³ ç”¨æˆ·åŸ¹è®­
5. â³ æ–‡æ¡£å®Œå–„

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

### æŠ€æœ¯æŒ‡æ ‡æå‡
| æŒ‡æ ‡é¡¹ | å½“å‰å€¼ | ç›®æ ‡å€¼ | æå‡å¹…åº¦ |
|---------|--------|--------|---------|
| **è¡¨å•è®¾è®¡æ•ˆç‡** | æ‰‹å·¥ç¼–ç  | å¯è§†åŒ–æ‹–æ‹½ | æå‡80% |
| **æµç¨‹é…ç½®å¤æ‚åº¦** | éœ€è¦å¼€å‘ | ä½ä»£ç é…ç½® | é™ä½90% |
| **ç§»åŠ¨ç«¯æ”¯æŒ** | åŸºç¡€H5 | åŸç”ŸAppä½“éªŒ | æå‡100% |
| **è·¨æ¨¡å—é›†æˆ** | ç¡¬ç¼–ç  | é…ç½®åŒ–é›†æˆ | æå‡70% |
| **éƒ¨ç½²æ•ˆç‡** | æ‰‹åŠ¨éƒ¨ç½² | è‡ªåŠ¨åŒ–éƒ¨ç½² | æå‡60% |

### ä¸šåŠ¡ä»·å€¼
- **å¿«é€Ÿå“åº”ä¸šåŠ¡å˜åŒ–**: è¡¨å•å’Œæµç¨‹å¯å¿«é€Ÿè°ƒæ•´ï¼Œæ— éœ€ç¼–ç 
- **é™ä½æŠ€æœ¯é—¨æ§›**: ä¸šåŠ¡äººå‘˜å¯è‡ªä¸»é…ç½®å®¡æ‰¹æµç¨‹
- **æå‡ç”¨æˆ·ä½“éªŒ**: ç»Ÿä¸€çš„ç§»åŠ¨ç«¯å®¡æ‰¹ä½“éªŒ
- **å¢å¼ºç³»ç»Ÿé›†æˆ**: æ·±åº¦é›†æˆç°æœ‰ä¸šåŠ¡æ¨¡å—
- **æé«˜å¼€å‘æ•ˆç‡**: ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¼€å‘

---

## ğŸ”— é’‰é’‰å®¡æ‰¹æµAPIé›†æˆæ¶æ„

åŸºäºå¯¹é’‰é’‰å®œæ­å’Œå®¡æ‰¹æµAPIçš„æ·±å…¥ç ”ç©¶ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—å®Œæ•´çš„é’‰é’‰é›†æˆæ–¹æ¡ˆï¼Œç¡®ä¿IOE-DREAMä¸é’‰é’‰ç”Ÿæ€ç³»ç»Ÿçš„æ— ç¼å¯¹æ¥ã€‚

### 1. é’‰é’‰å®œæ­æ¶æ„å¯¹æ¯”åˆ†æ

#### 1.1 æŠ€æœ¯æ¶æ„å¯¹æ¯”

| æŠ€æœ¯ç‰¹æ€§ | IOE-DREAM | é’‰é’‰å®œæ­ | å¯¹é½æ–¹æ¡ˆ |
|---------|-----------|----------|----------|
| **è¡¨å•è®¾è®¡å™¨** | Vue3 + VForm | React + Formily | ç»Ÿä¸€ä½¿ç”¨JSON Schemaæ ‡å‡† |
| **å·¥ä½œæµå¼•æ“** | Flowable | è‡ªç ”å¼•æ“ | ä¿æŒFlowableï¼Œæä¾›APIå…¼å®¹ |
| **æ•°æ®å­˜å‚¨** | MySQL + PostgreSQL | å¤šç§Ÿæˆ·æ•°æ®åº“ | å¢åŠ å¤šç§Ÿæˆ·æ”¯æŒ |
| **ç§»åŠ¨ç«¯** | UniApp | é’‰é’‰å°ç¨‹åº | é›†æˆé’‰é’‰å°ç¨‹åºSDK |
| **å¼€æ”¾èƒ½åŠ›** | REST API | å¼€æ”¾å¹³å°API | æä¾›é’‰é’‰APIé€‚é…å±‚ |

#### 1.2 åŠŸèƒ½ç‰¹æ€§å¯¹é½

```java
// é’‰é’‰å®œæ­åŠŸèƒ½å¯¹é½å®ç°
@Component
public class DingTalkAlignmentService {

    /**
     * å¯¹é’‰é’‰è¡¨å•ç»„ä»¶çš„é€‚é…æ”¯æŒ
     */
    private final Map<String, String> componentMapping = Map.of(
        "INPUT", "el-input",
        "TEXTAREA", "el-input",
        "SELECT", "el-select",
        "RADIO", "el-radio-group",
        "CHECKBOX", "el-checkbox-group",
        "DATE_PICKER", "el-date-picker",
        "NUMBER", "el-input-number",
        "CASCADER", "el-cascader",
        "UPLOAD", "el-upload",
        "RATE", "el-rate",
        "SWITCH", "el-switch"
    );

    /**
     * è½¬æ¢é’‰é’‰è¡¨å•é…ç½®ä¸ºIOE-DREAMæ ¼å¼
     */
    public FormConfig convertDingTalkForm(DingTalkFormConfig dingTalkForm) {
        return FormConfig.builder()
            .formId(dingTalkForm.getFormUuid())
            .formName(dingTalkForm.getFormName())
            .schema(convertJsonSchema(dingTalkForm.getComponents()))
            .uiSchema(convertUiSchema(dingTalkForm.getComponents()))
            .layout(convertLayout(dingTalkForm.getLayout()))
            .build();
    }
}
```

### 2. é’‰é’‰ä¼ä¸šåº”ç”¨é…ç½®

#### 2.1 åº”ç”¨æ³¨å†Œå’Œé…ç½®

```java
@Configuration
@ConfigurationProperties(prefix = "dingtalk.app")
@Data
public class DingTalkAppConfig {

    /**
     * åº”ç”¨Key
     */
    private String appKey;

    /**
     * åº”ç”¨å¯†é’¥
     */
    private String appSecret;

    /**
     * ä¼ä¸šID
     */
    private String corpId;

    /**
     * åº”ç”¨ID
     */
    private Long agentId;

    /**
     * å›è°ƒURL
     */
    private String callbackUrl;

    /**
     * äº‹ä»¶è®¢é˜…Token
     */
    private String eventToken;

    /**
     * äº‹ä»¶è®¢é˜…AESå¯†é’¥
     */
    private String eventAesKey;

    /**
     * æˆæƒèŒƒå›´
     */
    private List<String> authScope = Arrays.asList("contact:user", "contact:department");
}
```

#### 2.2 é’‰é’‰APIå®¢æˆ·ç«¯

```java
@Component
@Slf4j
public class DingTalkApiClient {

    @Resource
    private DingTalkAppConfig appConfig;

    @Resource
    private RestTemplate restTemplate;

    @Resource
    private RedisTemplate<String, Object> redisTemplate;

    private final String ACCESS_TOKEN_CACHE_KEY = "dingtalk:access_token:";
    private final String APP_TICKET_CACHE_KEY = "dingtalk:app_ticket:";

    /**
     * è·å–åº”ç”¨è®¿é—®ä»¤ç‰Œ
     */
    public String getAccessToken() {
        String cacheKey = ACCESS_TOKEN_CACHE_KEY + appConfig.getAppKey();
        String cachedToken = (String) redisTemplate.opsForValue().get(cacheKey);

        if (StringUtils.isNotBlank(cachedToken)) {
            return cachedToken;
        }

        // è·å–æ–°çš„è®¿é—®ä»¤ç‰Œ
        String url = "https://oapi.dingtalk.com/gettoken";
        Map<String, String> params = Map.of(
            "appkey", appConfig.getAppKey(),
            "appsecret", appConfig.getAppSecret()
        );

        ResponseEntity<DingTalkApiResponse> response = restTemplate.getForEntity(
            url + "?appkey={appkey}&appsecret={appsecret}",
            DingTalkApiResponse.class,
            params
        );

        if (response.getStatusCode().is2xxSuccessful() && response.getBody().isSuccess()) {
            String accessToken = response.getBody().getAccessToken();
            // ç¼“å­˜7200ç§’ï¼ˆé’‰é’‰tokenæœ‰æ•ˆæœŸï¼‰
            redisTemplate.opsForValue().set(cacheKey, accessToken, Duration.ofSeconds(7000));
            return accessToken;
        }

        throw new RuntimeException("è·å–é’‰é’‰è®¿é—®ä»¤ç‰Œå¤±è´¥");
    }

    /**
     * è·å–ç”¨æˆ·ä¿¡æ¯
     */
    public DingTalkUser getUserInfo(String code) {
        String url = "https://oapi.dingtalk.com/user/getuserinfo";
        Map<String, String> params = Map.of(
            "access_token", getAccessToken(),
            "code", code
        );

        ResponseEntity<DingTalkApiResponse> response = restTemplate.getForEntity(
            url + "?access_token={access_token}&code={code}",
            DingTalkApiResponse.class,
            params
        );

        if (response.getStatusCode().is2xxSuccessful() && response.getBody().isSuccess()) {
            return getUserDetail(response.getBody().getUserId());
        }

        throw new RuntimeException("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥");
    }

    /**
     * è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
     */
    public DingTalkUser getUserDetail(String userId) {
        String url = "https://oapi.dingtalk.com/user/get";
        Map<String, Object> params = Map.of(
            "access_token", getAccessToken(),
            "userid", userId
        );

        ResponseEntity<DingTalkApiResponse> response = restTemplate.getForEntity(
            url + "?access_token={access_token}&userid={userid}",
            DingTalkApiResponse.class,
            params
        );

        if (response.getStatusCode().is2xxSuccessful() && response.getBody().isSuccess()) {
            return response.getBody().getUser();
        }

        throw new RuntimeException("è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯å¤±è´¥");
    }
}
```

### 3. é’‰é’‰å®¡æ‰¹æµç¨‹APIé›†æˆ

#### 3.1 å®¡æ‰¹æµç¨‹åŒæ­¥æœåŠ¡

```java
@Service
@Transactional(rollbackFor = Exception.class)
@Slf4j
public class DingTalkApprovalSyncService {

    @Resource
    private DingTalkApiClient dingTalkClient;

    @Resource
    private ApprovalProcessService approvalProcessService;

    @Resource
    private FormDataService formDataService;

    /**
     * åŒæ­¥é’‰é’‰å®¡æ‰¹æµç¨‹åˆ°IOE-DREAM
     */
    public void syncApprovalProcessFromDingTalk(String processCode) {
        try {
            // 1. è·å–é’‰é’‰å®¡æ‰¹æµç¨‹å®šä¹‰
            DingTalkProcessDefinition dingTalkProcess = getDingTalkProcessDefinition(processCode);

            // 2. è½¬æ¢ä¸ºIOE-DREAMæµç¨‹å®šä¹‰
            ApprovalProcessDefinition localProcess = convertToLocalProcess(dingTalkProcess);

            // 3. ä¿å­˜åˆ°æœ¬åœ°æ•°æ®åº“
            approvalProcessService.saveProcessDefinition(localProcess);

            // 4. åŒæ­¥è¡¨å•ç»“æ„
            syncFormStructure(dingTalkProcess.getFormUuid(), localProcess.getFormId());

            log.info("æˆåŠŸåŒæ­¥é’‰é’‰å®¡æ‰¹æµç¨‹: {}", processCode);
        } catch (Exception e) {
            log.error("åŒæ­¥é’‰é’‰å®¡æ‰¹æµç¨‹å¤±è´¥: {}", processCode, e);
            throw new RuntimeException("åŒæ­¥å®¡æ‰¹æµç¨‹å¤±è´¥", e);
        }
    }

    /**
     * æ¨é€æœ¬åœ°æµç¨‹åˆ°é’‰é’‰
     */
    public String pushProcessToDingTalk(Long localProcessId) {
        try {
            ApprovalProcessDefinition localProcess = approvalProcessService.getById(localProcessId);

            // 1. è½¬æ¢ä¸ºé’‰é’‰æµç¨‹æ ¼å¼
            DingTalkProcessDefinition dingTalkProcess = convertToDingTalkProcess(localProcess);

            // 2. åˆ›å»ºé’‰é’‰å®¡æ‰¹æµç¨‹
            String processCode = createDingTalkProcess(dingTalkProcess);

            // 3. æ›´æ–°æœ¬åœ°æµç¨‹çš„é’‰é’‰æ ‡è¯†
            localProcess.setDingTalkProcessCode(processCode);
            approvalProcessService.updateById(localProcess);

            // 4. æ¨é€è¡¨å•ç»“æ„
            pushFormStructureToDingTalk(localProcess.getFormId(), dingTalkProcess.getFormUuid());

            return processCode;
        } catch (Exception e) {
            log.error("æ¨é€æµç¨‹åˆ°é’‰é’‰å¤±è´¥: {}", localProcessId, e);
            throw new RuntimeException("æ¨é€æµç¨‹å¤±è´¥", e);
        }
    }

    private ApprovalProcessDefinition convertToLocalProcess(DingTalkProcessDefinition dingTalkProcess) {
        return ApprovalProcessDefinition.builder()
            .processName(dingTalkProcess.getName())
            .processDesc(dingTalkProcess.getDescription())
            .formId(dingTalkProcess.getFormUuid())
            .processType("DINGTALK_SYNC")
            .dingTalkProcessCode(dingTalkProcess.getProcessCode())
            .dingTalkProcessId(dingTalkProcess.getId())
            .build();
    }
}
```

#### 3.2 é’‰é’‰å®¡æ‰¹å®ä¾‹ç®¡ç†

```java
@Service
@Transactional(rollbackFor = Exception.class)
@Slf4j
public class DingTalkApprovalInstanceService {

    @Resource
    private DingTalkApiClient dingTalkClient;

    @Resource
    private ApprovalInstanceService approvalInstanceService;

    /**
     * åœ¨é’‰é’‰ä¸Šå‘èµ·å®¡æ‰¹
     */
    public String startApprovalInDingTalk(ApprovalStartRequest request) {
        try {
            // 1. æ„å»ºé’‰é’‰å®¡æ‰¹è¯·æ±‚
            DingTalkStartApprovalRequest dingTalkRequest = buildDingTalkRequest(request);

            // 2. è°ƒç”¨é’‰é’‰APIå‘èµ·å®¡æ‰¹
            String url = "https://oapi.dingtalk.com/topapi/processinstance/start";
            Map<String, Object> params = Map.of(
                "access_token", dingTalkClient.getAccessToken()
            );

            HttpHeaders headers = new HttpHeaders();
            headers.setContentType(MediaType.APPLICATION_JSON);

            HttpEntity<DingTalkStartApprovalRequest> entity = new HttpEntity<>(dingTalkRequest, headers);

            ResponseEntity<DingTalkApiResponse> response = restTemplate.postForEntity(
                url + "?access_token={access_token}",
                entity,
                DingTalkApiResponse.class,
                params
            );

            if (response.getStatusCode().is2xxSuccessful() && response.getBody().isSuccess()) {
                String processInstanceId = response.getBody().getProcessInstanceId();

                // 3. æ›´æ–°æœ¬åœ°å®¡æ‰¹å®ä¾‹çŠ¶æ€
                updateLocalInstanceStatus(request.getLocalInstanceId(), processInstanceId, "RUNNING");

                return processInstanceId;
            }

            throw new RuntimeException("é’‰é’‰å‘èµ·å®¡æ‰¹å¤±è´¥");
        } catch (Exception e) {
            log.error("åœ¨é’‰é’‰å‘èµ·å®¡æ‰¹å¤±è´¥", e);
            throw new RuntimeException("å‘èµ·å®¡æ‰¹å¤±è´¥", e);
        }
    }

    /**
     * åŒæ­¥é’‰é’‰å®¡æ‰¹çŠ¶æ€
     */
    public void syncApprovalStatus(String processInstanceId) {
        try {
            // 1. è·å–é’‰é’‰å®¡æ‰¹çŠ¶æ€
            DingTalkApprovalStatus status = getDingTalkApprovalStatus(processInstanceId);

            // 2. æ›´æ–°æœ¬åœ°å®¡æ‰¹å®ä¾‹
            ApprovalInstance localInstance = approvalInstanceService.getByDingTalkProcessId(processInstanceId);
            if (localInstance != null) {
                localInstance.setStatus(mapDingTalkStatusToLocal(status.getStatus()));
                localInstance.setCompletedTime(status.getFinishTime());
                localInstance.setResult(status.getResult());
                approvalInstanceService.updateById(localInstance);

                // 3. å¤„ç†å®¡æ‰¹å®Œæˆäº‹ä»¶
                if ("COMPLETED".equals(status.getStatus())) {
                    handleApprovalCompleted(localInstance, status);
                }
            }
        } catch (Exception e) {
            log.error("åŒæ­¥å®¡æ‰¹çŠ¶æ€å¤±è´¥: {}", processInstanceId, e);
        }
    }

    private void handleApprovalCompleted(ApprovalInstance instance, DingTalkApprovalStatus status) {
        // å‘é€å®¡æ‰¹å®Œæˆäº‹ä»¶
        ApprovalCompletedEvent event = ApprovalCompletedEvent.builder()
            .instanceId(instance.getId())
            .processInstanceId(instance.getDingTalkProcessId())
            .result(status.getResult())
            .completedTime(status.getFinishTime())
            .build();

        // å‘å¸ƒäº‹ä»¶
        applicationEventPublisher.publishEvent(event);
    }
}
```

#### 3.3 é’‰é’‰äº‹ä»¶å›è°ƒå¤„ç†

```java
@RestController
@RequestMapping("/callback/dingtalk")
@Slf4j
public class DingTalkCallbackController {

    @Resource
    private DingTalkEventProcessor eventProcessor;

    /**
     * é’‰é’‰äº‹ä»¶å›è°ƒ
     */
    @PostMapping("/events")
    public String handleDingTalkEvent(@RequestBody String encryptedData,
                                      @RequestParam("signature") String signature,
                                      @RequestParam("timestamp") String timestamp,
                                      @RequestParam("nonce") String nonce) {
        try {
            // 1. éªŒè¯ç­¾å
            if (!validateSignature(signature, timestamp, nonce, encryptedData)) {
                return "fail";
            }

            // 2. è§£å¯†æ•°æ®
            String decryptedData = decryptData(encryptedData);
            DingTalkEvent event = JSON.parseObject(decryptedData, DingTalkEvent.class);

            // 3. å¤„ç†äº‹ä»¶
            eventProcessor.processEvent(event);

            return "success";
        } catch (Exception e) {
            log.error("å¤„ç†é’‰é’‰äº‹ä»¶å›è°ƒå¤±è´¥", e);
            return "fail";
        }
    }
}

@Component
@Slf4j
public class DingTalkEventProcessor {

    @Resource
    private DingTalkApprovalInstanceService approvalInstanceService;

    @Resource
    private ApplicationEventPublisher eventPublisher;

    /**
     * å¤„ç†é’‰é’‰äº‹ä»¶
     */
    @EventListener
    @Async
    public void processEvent(DingTalkEvent event) {
        switch (event.getEventType()) {
            case "bpms_instance_change":
                handleProcessInstanceChange(event);
                break;
            case "bpms_task_change":
                handleTaskChange(event);
                break;
            case "bpms_approval_change":
                handleApprovalChange(event);
                break;
            default:
                log.warn("æœªçŸ¥çš„é’‰é’‰äº‹ä»¶ç±»å‹: {}", event.getEventType());
        }
    }

    /**
     * å¤„ç†å®¡æ‰¹å®ä¾‹å˜æ›´äº‹ä»¶
     */
    private void handleProcessInstanceChange(DingTalkEvent event) {
        DingTalkProcessInstanceChangeEvent changeEvent =
            JSON.parseObject(event.getContent(), DingTalkProcessInstanceChangeEvent.class);

        String processInstanceId = changeEvent.getProcessInstanceId();
        String status = changeEvent.getResult();

        // åŒæ­¥æœ¬åœ°å®¡æ‰¹çŠ¶æ€
        approvalInstanceService.syncApprovalStatus(processInstanceId);
    }

    /**
     * å¤„ç†ä»»åŠ¡å˜æ›´äº‹ä»¶
     */
    private void handleTaskChange(DingTalkEvent event) {
        DingTalkTaskChangeEvent taskEvent =
            JSON.parseObject(event.getContent(), DingTalkTaskChangeEvent.class);

        // å¤„ç†ä»»åŠ¡å˜æ›´é€»è¾‘
        log.info("é’‰é’‰ä»»åŠ¡å˜æ›´: processId={}, taskId={}, status={}",
            taskEvent.getProcessInstanceId(),
            taskEvent.getTaskId(),
            taskEvent.getStatus());
    }
}
```

### 4. é’‰é’‰å°ç¨‹åºé›†æˆ

#### 4.1 é’‰é’‰å°ç¨‹åºé€‚é…

```javascript
// é’‰é’‰å°ç¨‹åºé€‚é…å±‚
import dd from 'dingtalk-jsapi';

export class DingTalkMiniAppAdapter {

  constructor() {
    this.isDingTalkEnv = dd.env.platform === 'dingtalk';
  }

  /**
   * è·å–é’‰é’‰ç”¨æˆ·ä¿¡æ¯
   */
  async getUserInfo() {
    if (!this.isDingTalkEnv) {
      throw new Error('éé’‰é’‰ç¯å¢ƒ');
    }

    try {
      // è·å–å…ç™»å½•æˆæƒç 
      const code = await dd.runtime.permission.requestAuthCode({
        corpId: process.env.VUE_APP_DINGTALK_CORP_ID
      });

      // é€šè¿‡åç«¯æ¢å–ç”¨æˆ·ä¿¡æ¯
      const response = await this.$http.post('/api/dingtalk/user/info', { code });
      return response.data;
    } catch (error) {
      console.error('è·å–é’‰é’‰ç”¨æˆ·ä¿¡æ¯å¤±è´¥', error);
      throw error;
    }
  }

  /**
   * æ‰“å¼€é’‰é’‰å®¡æ‰¹é¡µé¢
   */
  async openApprovalPage(processInstanceId) {
    if (!this.isDingTalkEnv) {
      // éé’‰é’‰ç¯å¢ƒï¼Œä½¿ç”¨H5é¡µé¢
      window.open(`/mobile/approval/detail/${processInstanceId}`);
      return;
    }

    try {
      // æ‰“å¼€é’‰é’‰å®¡æ‰¹é¡µé¢
      await dd.biz.util.openLink({
        url: `/pages/approval/detail?id=${processInstanceId}`,
        type: 0  // 0-å†…éƒ¨é“¾æ¥ï¼Œ1-å¤–éƒ¨é“¾æ¥
      });
    } catch (error) {
      console.error('æ‰“å¼€å®¡æ‰¹é¡µé¢å¤±è´¥', error);
      // é™çº§åˆ°H5é¡µé¢
      window.open(`/mobile/approval/detail/${processInstanceId}`);
    }
  }

  /**
   * å‘é€é’‰é’‰å·¥ä½œé€šçŸ¥
   */
  async sendWorkNotification(options) {
    if (!this.isDingTalkEnv) {
      return false;
    }

    try {
      await dd.device.notification.notify({
        title: options.title,
        content: options.content,
        url: options.url
      });
      return true;
    } catch (error) {
      console.error('å‘é€é’‰é’‰é€šçŸ¥å¤±è´¥', error);
      return false;
    }
  }

  /**
   * æ‰«æäºŒç»´ç 
   */
  async scanQRCode() {
    if (!this.isDingTalkEnv) {
      throw new Error('éé’‰é’‰ç¯å¢ƒ');
    }

    try {
      const result = await dd.biz.util.scan({
        type: 'qr'  // 'qr'äºŒç»´ç  'bar'æ¡å½¢ç 
      });
      return result.text;
    } catch (error) {
      console.error('æ‰«ç å¤±è´¥', error);
      throw error;
    }
  }
}
```

#### 4.2 ç§»åŠ¨ç«¯å®¡æ‰¹ç»„ä»¶é€‚é…

```vue
<template>
  <div class="dingtalk-approval-container">
    <!-- é’‰é’‰ç¯å¢ƒä¸“ç”¨ç»„ä»¶ -->
    <div v-if="isDingTalk" class="dingtalk-specific">
      <van-nav-bar
        :title="pageTitle"
        left-arrow
        @click-left="goBack"
        class="dingtalk-nav-bar"
      />

      <!-- å®¡æ‰¹è¡¨å• -->
      <approval-form
        ref="approvalForm"
        :form-data="formData"
        :readonly="readonly"
        @submit="handleSubmit"
        @save="handleSave"
      />

      <!-- å®¡æ‰¹æ“ä½œæŒ‰é’® -->
      <div class="approval-actions" v-if="showActions">
        <van-button
          v-for="action in actions"
          :key="action.key"
          :type="action.type"
          :loading="action.loading"
          @click="handleAction(action)"
          class="action-button"
        >
          {{ action.text }}
        </van-button>
      </div>

      <!-- é’‰é’‰åˆ†äº«æŒ‰é’® -->
      <div class="dingtalk-share" v-if="canShare">
        <van-button
          icon="share-o"
          @click="shareToDingTalk"
          class="share-button"
        >
          åˆ†äº«åˆ°é’‰é’‰
        </van-button>
      </div>
    </div>

    <!-- éé’‰é’‰ç¯å¢ƒæ˜¾ç¤º -->
    <div v-else class="h5-fallback">
      <h3>è¯·åœ¨é’‰é’‰ç¯å¢ƒä¸­æ‰“å¼€æ­¤é¡µé¢</h3>
      <p>æˆ–ä½¿ç”¨æµè§ˆå™¨è®¿é—®H5ç‰ˆæœ¬</p>
      <van-button @click="openH5Version">æ‰“å¼€H5ç‰ˆæœ¬</van-button>
    </div>
  </div>
</template>

<script>
import { DingTalkMiniAppAdapter } from '@/utils/dingtalk-adapter'

export default {
  name: 'DingTalkApprovalDetail',

  data() {
    return {
      isDingTalk: false,
      dingtalkAdapter: null,
      processInstanceId: '',
      formData: {},
      actions: [],
      readonly: false,
      showActions: true,
      canShare: true
    }
  },

  async created() {
    await this.initDingTalk();
    await this.loadApprovalData();
  },

  methods: {
    async initDingTalk() {
      this.dingtalkAdapter = new DingTalkMiniAppAdapter();
      this.isDingTalk = this.dingtalkAdapter.isDingTalkEnv;

      if (this.isDingTalk) {
        // è®¾ç½®é’‰é’‰é¡µé¢æ ‡é¢˜
        try {
          await dd.biz.navigation.setTitle({
            title: this.pageTitle
          });
        } catch (error) {
          console.error('è®¾ç½®æ ‡é¢˜å¤±è´¥', error);
        }
      }
    },

    async handleSubmit(formData) {
      try {
        const result = await this.$http.post('/api/approval/submit', {
          processInstanceId: this.processInstanceId,
          formData: formData
        });

        // å‘é€é’‰é’‰é€šçŸ¥
        if (this.isDingTalk) {
          await this.dingtalkAdapter.sendWorkNotification({
            title: 'å®¡æ‰¹æäº¤æˆåŠŸ',
            content: `æ‚¨çš„å®¡æ‰¹ç”³è¯·å·²æäº¤ï¼Œè¯·ç­‰å¾…å®¡æ‰¹ç»“æœ`,
            url: `/pages/approval/detail?id=${this.processInstanceId}`
          });
        }

        this.$toast.success('æäº¤æˆåŠŸ');
        this.goBack();
      } catch (error) {
        this.$toast.fail('æäº¤å¤±è´¥');
        console.error('æäº¤å®¡æ‰¹å¤±è´¥', error);
      }
    },

    async shareToDingTalk() {
      if (!this.isDingTalk) return;

      try {
        await dd.biz.util.share({
          type: 0,  // åˆ†äº«ç±»å‹
          url: window.location.href,
          title: 'å®¡æ‰¹è¯¦æƒ…',
          content: 'è¯·æŸ¥çœ‹æ­¤å®¡æ‰¹äº‹é¡¹',
          image: ''
        });
      } catch (error) {
        console.error('åˆ†äº«å¤±è´¥', error);
      }
    },

    openH5Version() {
      window.open(`/h5/approval/detail/${this.processInstanceId}`);
    }
  }
}
</script>
```

### 5. é’‰é’‰é›†æˆæµ‹è¯•æ–¹æ¡ˆ

#### 5.1 é›†æˆæµ‹è¯•ç”¨ä¾‹

```java
@SpringBootTest
@Transactional
@Slf4j
public class DingTalkIntegrationTest {

    @Resource
    private DingTalkApprovalSyncService syncService;

    @Resource
    private DingTalkApprovalInstanceService instanceService;

    @Test
    public void testSyncApprovalProcess() {
        // æµ‹è¯•åŒæ­¥é’‰é’‰å®¡æ‰¹æµç¨‹
        String processCode = "PROC-TEST-001";

        // æ‰§è¡ŒåŒæ­¥
        syncService.syncApprovalProcessFromDingTalk(processCode);

        // éªŒè¯ç»“æœ
        ApprovalProcessDefinition process = approvalProcessService.getByDingTalkCode(processCode);
        assertNotNull(process);
        assertEquals(processCode, process.getDingTalkProcessCode());
    }

    @Test
    public void testStartApprovalInDingTalk() {
        // æµ‹è¯•åœ¨é’‰é’‰å‘èµ·å®¡æ‰¹
        ApprovalStartRequest request = ApprovalStartRequest.builder()
            .processInstanceId("local-inst-001")
            .formId("form-001")
            .formData(Map.of("field1", "value1"))
            .build();

        String dingTalkInstanceId = instanceService.startApprovalInDingTalk(request);

        assertNotNull(dingTalkInstanceId);

        // éªŒè¯æœ¬åœ°çŠ¶æ€æ›´æ–°
        ApprovalInstance localInstance = approvalInstanceService.getById("local-inst-001");
        assertEquals("RUNNING", localInstance.getStatus());
        assertEquals(dingTalkInstanceId, localInstance.getDingTalkProcessId());
    }

    @Test
    public void testEventCallback() {
        // æµ‹è¯•é’‰é’‰äº‹ä»¶å›è°ƒå¤„ç†
        DingTalkEvent event = DingTalkEvent.builder()
            .eventType("bpms_instance_change")
            .content(JSON.toJSONString(Map.of(
                "processInstanceId", "test-inst-001",
                "result", "agree"
            )))
            .build();

        // å¤„ç†äº‹ä»¶
        eventProcessor.processEvent(event);

        // éªŒè¯çŠ¶æ€åŒæ­¥
        ApprovalInstance instance = approvalInstanceService.getByDingTalkProcessId("test-inst-001");
        assertEquals("COMPLETED", instance.getStatus());
    }
}
```

### 6. ç›‘æ§å’Œè¿ç»´

#### 6.1 é’‰é’‰APIè°ƒç”¨ç›‘æ§

```java
@Component
@Slf4j
public class DingTalkApiMonitor {

    @Resource
    private MeterRegistry meterRegistry;

    @EventListener
    public void handleApiCall(DingTalkApiCallEvent event) {
        // è®°å½•APIè°ƒç”¨æŒ‡æ ‡
        meterRegistry.counter("dingtalk.api.calls",
            "api", event.getApiName(),
            "status", event.getStatus().toString()
        ).increment();

        // è®°å½•å“åº”æ—¶é—´
        meterRegistry.timer("dingtalk.api.duration",
            "api", event.getApiName()
        ).record(event.getDuration(), TimeUnit.MILLISECONDS);
    }

    @EventListener
    public void handleSyncFailure(DingTalkSyncFailureEvent event) {
        // è®°å½•åŒæ­¥å¤±è´¥å‘Šè­¦
        meterRegistry.counter("dingtalk.sync.failures",
            "type", event.getSyncType(),
            "error", event.getErrorType()
        ).increment();

        log.error("é’‰é’‰åŒæ­¥å¤±è´¥: type={}, error={}",
            event.getSyncType(), event.getErrorMessage());
    }
}
```

é€šè¿‡è¿™å¥—å®Œæ•´çš„é’‰é’‰é›†æˆæ–¹æ¡ˆï¼ŒIOE-DREAMå°†èƒ½å¤Ÿï¼š

1. **æ— ç¼å¯¹æ¥é’‰é’‰ç”Ÿæ€** - æ”¯æŒé’‰é’‰ç”¨æˆ·å•ç‚¹ç™»å½•ã€ç»„ç»‡æ¶æ„åŒæ­¥
2. **å®¡æ‰¹æµç¨‹äº’é€š** - é’‰é’‰å’Œæœ¬åœ°çš„å®¡æ‰¹æµç¨‹å¯ä»¥åŒå‘åŒæ­¥
3. **ç§»åŠ¨ç«¯ä½“éªŒä¸€è‡´** - é’‰é’‰å°ç¨‹åºå’ŒH5ç‰ˆæœ¬åŠŸèƒ½å®Œå…¨ä¸€è‡´
4. **äº‹ä»¶å®æ—¶åŒæ­¥** - é’‰é’‰å®¡æ‰¹çŠ¶æ€å˜æ›´å®æ—¶åŒæ­¥åˆ°æœ¬åœ°ç³»ç»Ÿ
5. **é«˜å¯ç”¨æ€§ä¿éšœ** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆï¼ˆåŒ…å«é’‰é’‰APIé›†æˆï¼‰
**é€‚ç”¨ç‰ˆæœ¬**: IOE-DREAM v2.0.0+
**ç»´æŠ¤è´£ä»»äºº**: æŠ€æœ¯æ¶æ„å›¢é˜Ÿ + äº§å“å›¢é˜Ÿ
**æœ€åå®¡æ ¸**: 2025-12-16