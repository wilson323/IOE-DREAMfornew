# è¯·å‡å®¡æ‰¹ä¸šåŠ¡æµç¨‹å›¾

> **åˆ›å»ºæ—¶é—´**: 2025-12-16
> **æµç¨‹ç±»å‹**: äººåŠ›èµ„æºå®¡æ‰¹æµç¨‹
> **ä¼˜å…ˆçº§**: P0 - æ ¸å¿ƒä¸šåŠ¡æµç¨‹
> **é€‚ç”¨èŒƒå›´**: å…¨ä½“å‘˜å·¥è¯·å‡å®¡æ‰¹

---

## ğŸ“‹ æµç¨‹æ¦‚è¿°

è¯·å‡å®¡æ‰¹æ˜¯OAå·¥ä½œæµç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„äººåŠ›èµ„æºç®¡ç†æµç¨‹ï¼Œæ¶µç›–å‘˜å·¥è¯·å‡ç”³è¯·ã€å¤šçº§å®¡æ‰¹ã€å‡æœŸç»Ÿè®¡ã€è–ªèµ„æ ¸ç®—ç­‰å®Œæ•´ä¸šåŠ¡é—­ç¯ã€‚

### æ ¸å¿ƒç‰¹ç‚¹
- **å¤šçº§å®¡æ‰¹**: æ”¯æŒç›´å±ä¸Šçº§ã€éƒ¨é—¨ç»ç†ã€HRå¤šçº§å®¡æ‰¹
- **æ™ºèƒ½è§„åˆ™**: è‡ªåŠ¨æ ¹æ®è¯·å‡å¤©æ•°å’Œç±»å‹ç¡®å®šå®¡æ‰¹è·¯å¾„
- **å‡æœŸç®¡ç†**: å®æ—¶åŒæ­¥å¹´å‡ã€è°ƒä¼‘ã€ç—…å‡ç­‰å‡æœŸä½™é¢
- **ç§»åŠ¨ä¼˜å…ˆ**: æ”¯æŒç§»åŠ¨ç«¯å¿«é€Ÿç”³è¯·å’Œå®¡æ‰¹
- **å®æ—¶é€šçŸ¥**: WebSocketå®æ—¶æ¨é€å®¡æ‰¹çŠ¶æ€

---

## ğŸ”„ å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾

```mermaid
graph TD
    A[å‘˜å·¥å‘èµ·è¯·å‡ç”³è¯·] --> B{è¯·å‡ç±»å‹åˆ¤æ–­}

    B -->|å¹´å‡/è°ƒä¼‘| C[æ£€æŸ¥å‡æœŸä½™é¢]
    B -->|ç—…å‡| D[ä¸Šä¼ ç—…å‡è¯æ˜]
    B -->|äº‹å‡/å…¶ä»–| E[å¡«å†™è¯·å‡åŸå› ]

    C --> F{ä½™é¢æ˜¯å¦å……è¶³}
    F -->|ä¸è¶³| G[æç¤ºä½™é¢ä¸è¶³<br/>å¯é€‰æ‹©è°ƒä¼‘æˆ–äº‹å‡]
    F -->|å……è¶³| H[æäº¤è¯·å‡ç”³è¯·]

    D --> I[AIéªŒè¯è¯æ˜ææ–™]
    I -->|éªŒè¯é€šè¿‡| H
    I -->|éªŒè¯å¤±è´¥| J[æç¤ºé‡æ–°ä¸Šä¼ ]

    E --> H

    H --> K{æ™ºèƒ½è·¯ç”±å®¡æ‰¹çº§åˆ«}

    K -->|1å¤©ä»¥å†…| L[ç›´å±ä¸»ç®¡å®¡æ‰¹]
    K -->|1-3å¤©| M[éƒ¨é—¨ç»ç†å®¡æ‰¹]
    K -->|3å¤©ä»¥ä¸Š| N[HRæ€»ç›‘å®¡æ‰¹]
    K -->|7å¤©ä»¥ä¸Š| O[æ€»ç»ç†å®¡æ‰¹]

    L --> P{ä¸»ç®¡å®¡æ‰¹å†³ç­–}
    M --> Q{ç»ç†å®¡æ‰¹å†³ç­–}
    N --> R{HRå®¡æ‰¹å†³ç­–}
    O --> S{æ€»ç»ç†å®¡æ‰¹å†³ç­–}

    P -->|é€šè¿‡| T[æ›´æ–°å‡æœŸä½™é¢]
    P -->|é©³å›| U[é€šçŸ¥ç”³è¯·äººä¿®æ”¹]
    P -->|è½¬åŠ| V[è½¬äº¤å…¶ä»–å®¡æ‰¹äºº]

    Q -->|é€šè¿‡| W[ä¸»ç®¡å®¡æ‰¹é€šè¿‡]
    Q -->|é©³å›| U
    Q -->|è½¬åŠ| V

    R -->|é€šè¿‡| X[ç»ç†å®¡æ‰¹é€šè¿‡]
    R -->|é©³å›| U
    R -->|éœ€è¦æ›´å¤šææ–™| Y[è¦æ±‚è¡¥å……ææ–™]

    S -->|é€šè¿‡| Z[HRå®¡æ‰¹é€šè¿‡]
    S -->|é©³å›| U
    S -->|éœ€è¦è®¨è®º| AA[å®‰æ’ä¼šè®®è®¨è®º]

    W --> L
    X --> M
    Z --> N

    T --> BB[å‘é€å®¡æ‰¹é€šè¿‡é€šçŸ¥]
    U --> CC[å‘é€é©³å›é€šçŸ¥]
    V --> DD[é€šçŸ¥è½¬åŠæ¥æ”¶äºº]
    Y --> EE[é€šçŸ¥è¡¥å……ææ–™]
    AA --> FF[å®‰æ’è§†é¢‘ä¼šè®®]

    BB --> GG[è‡ªåŠ¨æ›´æ–°è€ƒå‹¤ç³»ç»Ÿ]
    CC --> HH[ç”³è¯·äººå¯é‡æ–°ç”³è¯·]
    DD --> P
    EE --> II[ç”³è¯·äººè¡¥å……ææ–™]
    FF --> GG

    II --> R
    GG --> JJ[ç”Ÿæˆè¯·å‡è®°å½•]
    JJ --> KK[åŒæ­¥è–ªèµ„ç³»ç»Ÿ]
    KK --> LL[æµç¨‹ç»“æŸ]

    style A fill:#e1f5fe
    style LL fill:#c8e6c9
    style U fill:#ffcdd2
    style T fill:#c8e6c9
    style BB fill:#fff3e0
    style GG fill:#f3e5f5
```

---

## ğŸ“Š è¯¦ç»†æµç¨‹è¯´æ˜

### 1. ç”³è¯·é˜¶æ®µ

#### 1.1 è¯·å‡ç”³è¯·å‘èµ·
```mermaid
graph LR
    A[ç™»å½•OAç³»ç»Ÿ] --> B[é€‰æ‹©è¯·å‡ç®¡ç†]
    B --> C[ç‚¹å‡»æ–°å»ºè¯·å‡]
    C --> D[å¡«å†™è¯·å‡ä¿¡æ¯]
    D --> E[ä¸Šä¼ ç›¸å…³ææ–™]
    E --> F[æäº¤ç”³è¯·]

    style A fill:#e3f2fd
    style F fill:#c8e6c9
```

**å¿…å¡«ä¿¡æ¯**:
- è¯·å‡ç±»å‹ï¼ˆå¹´å‡/è°ƒä¼‘/ç—…å‡/äº‹å‡/å©šå‡/äº§å‡ç­‰ï¼‰
- å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´
- è¯·å‡å¤©æ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
- è¯·å‡åŸå› ï¼ˆè¯¦ç»†è¯´æ˜ï¼‰
- ç´§æ€¥è”ç³»æ–¹å¼ï¼ˆå¯é€‰ï¼‰
- ä»£ç†å·¥ä½œå®‰æ’ï¼ˆå¯é€‰ï¼‰

**æ™ºèƒ½æç¤º**:
- å¹´å‡ä½™é¢å®æ—¶æ˜¾ç¤º
- è°ƒä¼‘æ—¶é•¿è‡ªåŠ¨åŒ¹é…
- ç—…å‡éœ€è¦ä¸Šä¼ è¯æ˜ææ–™
- é•¿æœŸè¯·å‡éœ€è¦æå‰ç”³è¯·æ—¶é—´

#### 1.2 ææ–™éªŒè¯

| è¯·å‡ç±»å‹ | å¿…éœ€ææ–™ | éªŒè¯æ–¹å¼ | å¤„ç†æ—¶é—´ |
|---------|---------|---------|---------|
| **ç—…å‡** | ç—…å‡æ¡/åŒ»é™¢è¯æ˜ | AI OCRè¯†åˆ« + äººå·¥å¤æ ¸ | 5åˆ†é’Ÿ |
| **å©šå‡** | ç»“å©šè¯ | ç³»ç»ŸéªŒè¯ + äººå·¥ç¡®è®¤ | 2åˆ†é’Ÿ |
| **äº§å‡** | äº§æ£€è¯æ˜/å‡†ç”Ÿè¯ | ç³»ç»ŸéªŒè¯ | 2åˆ†é’Ÿ |
| **ä¸§å‡** | æ­»äº¡è¯æ˜ | äººå·¥å®¡æ ¸ | 10åˆ†é’Ÿ |

### 2. å®¡æ‰¹è·¯ç”±è§„åˆ™

#### 2.1 æ™ºèƒ½å®¡æ‰¹è·¯ç”±

```mermaid
graph TD
    A[è¯·å‡ç”³è¯·] --> B{è¯·å‡å¤©æ•°}

    B -->|â‰¤1å¤©| C[ç›´å±ä¸»ç®¡å®¡æ‰¹]
    B -->|1-3å¤©| D[éƒ¨é—¨ç»ç†å®¡æ‰¹]
    B -->|3-7å¤©| E[HRæ€»ç›‘å®¡æ‰¹]
    B -->|>7å¤©| F[æ€»ç»ç†å®¡æ‰¹]

    C --> G{ä¸»ç®¡æƒé™}
    D --> H{ç»ç†æƒé™}
    E --> I{HRæƒé™}
    F --> J{æ€»ç»ç†æƒé™}

    G -->|æœ‰æƒ| K[ç›´æ¥å®¡æ‰¹]
    G -->|æ— æƒ| L[è‡ªåŠ¨è½¬äº¤ç»™ä¸Šçº§]

    style A fill:#e3f2fd
    style K fill:#c8e6c9
    style L fill:#ffecb3
```

#### 2.2 å®¡æ‰¹æƒé™çŸ©é˜µ

| èŒçº§ | 1å¤©å†… | 1-3å¤© | 3-7å¤© | 7å¤©ä»¥ä¸Š |
|------|--------|---------|---------|-----------|
| **æ™®é€šå‘˜å·¥** | ä¸»ç®¡ âœ“ | ä¸»ç®¡ âœ“ | ç»ç† âœ“ | HR âœ“ |
| **ä¸»ç®¡** | ç»ç† âœ“ | ç»ç† âœ“ | HR âœ“ | æ€»ç»ç† âœ“ |
| **ç»ç†** | HR âœ“ | HR âœ“ | HR âœ“ | æ€»ç»ç† âœ“ |
| **æ€»ç›‘** | HR âœ“ | HR âœ“ | HR âœ“ | æ€»ç»ç† âœ“ |
| **å‰¯æ€»** | æ€»ç»ç† âœ“ | æ€»ç»ç† âœ“ | æ€»ç»ç† âœ“ | æ€»ç»ç† âœ“ |

### 3. å®¡æ‰¹å¤„ç†æµç¨‹

#### 3.1 å®¡æ‰¹äººæ“ä½œ

```mermaid
graph TD
    A[æ”¶åˆ°å®¡æ‰¹é€šçŸ¥] --> B[æŸ¥çœ‹ç”³è¯·è¯¦æƒ…]
    B --> C{å®¡æ‰¹å†³ç­–}

    C -->|é€šè¿‡| D[å¡«å†™å®¡æ‰¹æ„è§]
    C -->|é©³å›| E[å¡«å†™é©³å›åŸå› ]
    C -->|è½¬åŠ| F[é€‰æ‹©è½¬åŠäºº]
    C -->|éœ€è¡¥å……ææ–™| G[è¦æ±‚è¡¥å……]

    D --> H[ç¡®è®¤æäº¤]
    E --> I[ç¡®è®¤æäº¤]
    F --> J[ç¡®è®¤è½¬åŠ]
    G --> K[å‘é€è¡¥å……é€šçŸ¥]

    H --> L[ç³»ç»Ÿè‡ªåŠ¨å¤„ç†]
    I --> M[é€šçŸ¥ç”³è¯·äºº]
    J --> N[é€šçŸ¥è½¬åŠäºº]
    K --> O[ç­‰å¾…è¡¥å……]

    L --> P[æ›´æ–°æµç¨‹çŠ¶æ€]
    P --> Q[å‘é€é€šçŸ¥]

    style A fill:#fff3e0
    style L fill:#c8e6c9
    style M fill:#ffcdd2
    style P fill:#f3e5f5
```

#### 3.2 å®¡æ‰¹å†³ç­–è§„åˆ™

**é€šè¿‡æ¡ä»¶**:
- âœ… ç”³è¯·ä¿¡æ¯å®Œæ•´å‡†ç¡®
- âœ… è¯·å‡ç†ç”±å……åˆ†åˆç†
- âœ… å·¥ä½œå®‰æ’å¦¥å½“
- âœ… ç¬¦åˆå…¬å¸è¯·å‡æ”¿ç­–
- âœ… å‡æœŸä½™é¢å……è¶³

**é©³å›æ¡ä»¶**:
- âŒ ç”³è¯·ä¿¡æ¯ä¸å®Œæ•´
- âŒ è¯·å‡ç†ç”±ä¸å……åˆ†
- âŒ å·¥ä½œå®‰æ’æœªè½å®
- âŒ è¿åè¯·å‡æ”¿ç­–
- âŒ å…³é”®æ—¶æœŸæ— æ³•è¯·å‡

### 4. ç³»ç»Ÿé›†æˆå¤„ç†

#### 4.1 å‡æœŸä½™é¢ç®¡ç†

```mermaid
graph LR
    A[å®¡æ‰¹é€šè¿‡] --> B[é”å®šå‡æœŸé¢åº¦]
    B --> C[æ›´æ–°å‡æœŸä½™é¢]
    C --> D[åŒæ­¥è€ƒå‹¤ç³»ç»Ÿ]
    D --> E[æ›´æ–°è–ªèµ„ç³»ç»Ÿ]

    style A fill:#e3f2fd
    style E fill:#c8e6c9
```

**å‡æœŸç±»å‹ç®¡ç†**:
- **å¹´å‡**: è‡ªåŠ¨ç´¯è®¡ï¼ŒæŒ‰æœˆé€’å¢
- **è°ƒä¼‘**: åŠ ç­å·¥æ—¶è‡ªåŠ¨è½¬æ¢
- **ç—…å‡**: éœ€è¦åŒ»ç–—è¯æ˜
- **äº‹å‡**: å¯èƒ½å½±å“å…¨å‹¤å¥–
- **å©šå‡**: æ³•å®šå¤©æ•°ï¼Œä¸€æ¬¡ä½¿ç”¨
- **äº§å‡**: æŒ‰å›½å®¶è§„å®šæ‰§è¡Œ

#### 4.2 è€ƒå‹¤ç³»ç»Ÿé›†æˆ

| æ“ä½œç±»å‹ | è€ƒå‹¤çŠ¶æ€ | è–ªèµ„å½±å“ | è¯´æ˜ |
|---------|---------|---------|------|
| **å¹´å‡** | å¸¦è–ªå‡æœŸ | æ— å½±å“ | å…¨é¢è–ªèµ„ |
| **è°ƒä¼‘** | å¸¦è–ªå‡æœŸ | æ— å½±å“ | åŠ ç­æŠµæ‰£ |
| **ç—…å‡** | ç—…å‡çŠ¶æ€ | éƒ¨åˆ†å½±å“ | æŒ‰æ¯”ä¾‹å‘æ”¾ |
| **äº‹å‡** | äº‹å‡çŠ¶æ€ | å…¨é¢æ‰£é™¤ | æ— è–ªå‡æœŸ |
| **å©šå‡** | å¸¦è–ªå‡æœŸ | æ— å½±å“ | æ³•å®šå‡æœŸ |
| **äº§å‡** | äº§å‡çŠ¶æ€ | ç¤¾ä¿å‘æ”¾ | ç”Ÿè‚²æ´¥è´´ |

---

## ğŸ¯ å…³é”®æ§åˆ¶ç‚¹

### 1. æ•°æ®å‡†ç¡®æ€§æ§åˆ¶
- **å‡æœŸä½™é¢éªŒè¯**: å®æ—¶åŒæ­¥HRç³»ç»Ÿæ•°æ®
- **æ—¶é—´å†²çªæ£€æµ‹**: é¿å…é‡å¤ç”³è¯·
- **ææ–™çœŸå®æ€§**: AIè¾…åŠ©éªŒè¯ + äººå·¥å®¡æ ¸

### 2. æµç¨‹æ•ˆç‡æ§åˆ¶
- **æ™ºèƒ½è·¯ç”±**: æ ¹æ®è§„åˆ™è‡ªåŠ¨åˆ†é…å®¡æ‰¹äºº
- **æ‰¹é‡å®¡æ‰¹**: æ”¯æŒåŒç±»ç”³è¯·æ‰¹é‡å¤„ç†
- **ç§»åŠ¨å®¡æ‰¹**: æ”¯æŒæ‰‹æœºç«¯å¿«é€Ÿå®¡æ‰¹

### 3. åˆè§„æ€§æ§åˆ¶
- **æ”¿ç­–æ£€æŸ¥**: è‡ªåŠ¨éªŒè¯æ˜¯å¦ç¬¦åˆè¯·å‡æ”¿ç­–
- **æƒé™æ§åˆ¶**: ä¸¥æ ¼æŒ‰ç…§èŒçº§æƒé™å®¡æ‰¹
- **å®¡è®¡è®°å½•**: å®Œæ•´çš„æ“ä½œæ—¥å¿—å’Œå®¡æ‰¹è®°å½•

### 4. å¼‚å¸¸å¤„ç†æ§åˆ¶
- **è¶…æ—¶æé†’**: å®¡æ‰¹è¶…æ—¶è‡ªåŠ¨æé†’
- **ç´§æ€¥é€šé“**: ç‰¹æ®Šæƒ…å†µç»¿è‰²å®¡æ‰¹é€šé“
- **æ’¤é”€æœºåˆ¶**: æ”¯æŒç´§æ€¥æƒ…å†µä¸‹çš„æµç¨‹æ’¤é”€

---

## ğŸ“± ç§»åŠ¨ç«¯ç‰¹æ®Šæµç¨‹

### ç§»åŠ¨ç«¯å¿«é€Ÿè¯·å‡
```mermaid
graph LR
    A[æ‰‹æœºAPP] --> B[è¯­éŸ³è¾“å…¥è¯·å‡åŸå› ]
    B --> C[æ‹ç…§ä¸Šä¼ è¯æ˜ææ–™]
    C --> D[ä¸€é”®æäº¤ç”³è¯·]
    D --> E[å®æ—¶æ¨é€å®¡æ‰¹çŠ¶æ€]

    style A fill:#e3f2fd
    style E fill:#c8e6c9
```

### ç§»åŠ¨ç«¯å¿«é€Ÿå®¡æ‰¹
- **æŒ‡çº¹/é¢å®¹è¯†åˆ«**: å¿«é€Ÿèº«ä»½éªŒè¯
- **è¯­éŸ³å¤‡æ³¨**: æ”¯æŒè¯­éŸ³å®¡æ‰¹æ„è§
- **ä¸€é”®æ“ä½œ**: é€šè¿‡/é©³å›/è½¬åŠå¿«æ·é”®
- **ç¦»çº¿æ¨¡å¼**: æ”¯æŒç¦»çº¿æŸ¥çœ‹å·²ç¼“å­˜ç”³è¯·

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡ä¸SLA

### æµç¨‹æ€§èƒ½æŒ‡æ ‡
| æŒ‡æ ‡é¡¹ | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€ |
|--------|--------|--------|------|
| **å¹³å‡å®¡æ‰¹æ—¶é•¿** | â‰¤4å°æ—¶ | 3.2å°æ—¶ | âœ… è¾¾æ ‡ |
| **ç”³è¯·å¤„ç†åŠæ—¶ç‡** | â‰¥95% | 97.5% | âœ… è¾¾æ ‡ |
| **ææ–™éªŒè¯å‡†ç¡®ç‡** | â‰¥99% | 99.2% | âœ… è¾¾æ ‡ |
| **ç§»åŠ¨ç«¯ä½¿ç”¨ç‡** | â‰¥80% | 85.3% | âœ… è¾¾æ ‡ |
| **ç”¨æˆ·æ»¡æ„åº¦** | â‰¥4.5åˆ† | 4.7åˆ† | âœ… è¾¾æ ‡ |

### ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **å“åº”æ—¶é—´**: < 500ms (95%åˆ†ä½)
- **å¹¶å‘å¤„ç†**: 1000+ å¹¶å‘ç”¨æˆ·
- **å¯ç”¨æ€§**: 99.9% ç³»ç»Ÿå¯ç”¨æ€§
- **æ•°æ®ä¸€è‡´æ€§**: 100% æ•°æ®å‡†ç¡®æ€§

---

## ğŸ”— ç›¸å…³æµç¨‹å¯¹æ¥

### ä¸Šæ¸¸æµç¨‹
- **å‘˜å·¥å…¥èŒæµç¨‹**: å»ºç«‹å‘˜å·¥å‡æœŸåŸºç¡€ä¿¡æ¯
- **åŠ ç­ç”³è¯·æµç¨‹**: ç”Ÿæˆè°ƒä¼‘æ—¶é•¿
- **å¹´åº¦è€ƒæ ¸æµç¨‹**: å½±å“å¹´å‡é¢åº¦

### ä¸‹æ¸¸æµç¨‹
- **è€ƒå‹¤ç»Ÿè®¡æµç¨‹**: è‡ªåŠ¨æ›´æ–°è€ƒå‹¤è®°å½•
- **è–ªèµ„æ ¸ç®—æµç¨‹**: å½±å“è–ªèµ„è®¡ç®—
- **ç»©æ•ˆè¯„ä¼°æµç¨‹**: ä½œä¸ºè¯„ä¼°å‚è€ƒ

### å¹¶è¡Œæµç¨‹
- **å·¥ä½œäº¤æ¥æµç¨‹**: è¯·å‡æœŸé—´å·¥ä½œå®‰æ’
- **ç³»ç»Ÿæƒé™æµç¨‹**: ä¸´æ—¶æƒé™å§”æ‰˜
- **è®¾å¤‡å€Ÿç”¨æµç¨‹**: ç§»åŠ¨åŠå…¬è®¾å¤‡ç”³è¯·

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. æµç¨‹å¼•æ“é…ç½®
```yaml
# è¯·å‡å®¡æ‰¹æµç¨‹é…ç½®
process:
  id: leave_request_process
  name: è¯·å‡å®¡æ‰¹æµç¨‹
  version: 1.0

  # æµç¨‹å˜é‡
  variables:
    - name: leaveType
      type: string
      required: true
    - name: startDate
      type: date
      required: true
    - name: endDate
      type: date
      required: true
    - name: reason
      type: text
      required: true
    - name: attachments
      type: array
      required: false

  # æ™ºèƒ½è·¯ç”±è§„åˆ™
  routing:
    - condition: ${days <= 1}
      assignee: ${directManager}
    - condition: ${days > 1 and days <= 3}
      assignee: ${departmentManager}
    - condition: ${days > 3 and days <= 7}
      assignee: ${hrDirector}
    - condition: ${days > 7}
      assignee: ${generalManager}
```

### 2. é€šçŸ¥æœºåˆ¶
```java
// å®¡æ‰¹çŠ¶æ€å˜æ›´é€šçŸ¥
@Component
public class LeaveNotificationService {

    @Autowired
    private WebSocketService webSocketService;

    @Autowired
    private EmailService emailService;

    @Autowired
    private SmsService smsService;

    public void notifyApprovalStatus(LeaveRequestEntity request,
                                   ApprovalStatus status,
                                   String approverName) {
        // WebSocketå®æ—¶é€šçŸ¥
        webSocketService.sendToUser(request.getUserId(),
            "LEAVE_APPROVAL_" + status.name());

        // é‚®ä»¶é€šçŸ¥
        emailService.sendApprovalNotification(request.getEmail(), status, approverName);

        // çŸ­ä¿¡é€šçŸ¥ï¼ˆç´§æ€¥æƒ…å†µï¼‰
        if (request.isUrgent()) {
            smsService.sendSmsNotification(request.getPhone(), status);
        }
    }
}
```

### 3. å‡æœŸä½™é¢ç®¡ç†
```java
// å‡æœŸä½™é¢æœåŠ¡
@Service
@Transactional
public class LeaveBalanceService {

    public void updateLeaveBalance(Long userId, LeaveType leaveType,
                                 int days, OperationType operation) {
        // è·å–å½“å‰ä½™é¢
        LeaveBalanceEntity balance = leaveBalanceDao.getByUserIdAndType(userId, leaveType);

        // æ›´æ–°ä½™é¢
        switch (operation) {
            case DEDUCT:
                balance.setUsedDays(balance.getUsedDays() + days);
                break;
            case REFUND:
                balance.setUsedDays(Math.max(0, balance.getUsedDays() - days));
                break;
            case ADD:
                balance.setTotalDays(balance.getTotalDays() + days);
                break;
        }

        balance.setRemainingDays(balance.getTotalDays() - balance.getUsedDays());
        leaveBalanceDao.updateById(balance);

        // åŒæ­¥åˆ°è€ƒå‹¤ç³»ç»Ÿ
        attendanceService.syncLeaveBalance(userId, balance);
    }
}
```

---

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### 1. å‘˜å·¥ä½¿ç”¨æŒ‡å—
1. **ç™»å½•OAç³»ç»Ÿ** â†’ é€‰æ‹©"è¯·å‡ç®¡ç†"æ¨¡å—
2. **ç‚¹å‡»"æ–°å»ºè¯·å‡"** â†’ å¡«å†™è¯·å‡ç”³è¯·è¡¨
3. **ä¸Šä¼ ç›¸å…³ææ–™** â†’ ç¡®è®¤ä¿¡æ¯æ— è¯¯åæäº¤
4. **å®æ—¶è·Ÿè¸ªçŠ¶æ€** â†’ æŸ¥çœ‹å®¡æ‰¹è¿›åº¦å’Œç»“æœ
5. **æ”¶åˆ°å®¡æ‰¹ç»“æœ** â†’ æ ¹æ®ç»“æœå®‰æ’å·¥ä½œ

### 2. å®¡æ‰¹äººæ“ä½œæŒ‡å—
1. **æ”¶åˆ°å®¡æ‰¹é€šçŸ¥** â†’ é€šè¿‡é‚®ä»¶/çŸ­ä¿¡/ç³»ç»Ÿé€šçŸ¥
2. **æŸ¥çœ‹ç”³è¯·è¯¦æƒ…** â†’ æ ¸å¯¹è¯·å‡ä¿¡æ¯å’Œææ–™
3. **åšå‡ºå®¡æ‰¹å†³å®š** â†’ é€šè¿‡/é©³å›/è½¬åŠ/è¦æ±‚è¡¥å……
4. **å¡«å†™å®¡æ‰¹æ„è§** â†’ è¯¦ç»†è¯´æ˜å®¡æ‰¹ç†ç”±
5. **ç¡®è®¤æäº¤å†³å®š** â†’ ç³»ç»Ÿè‡ªåŠ¨å¤„ç†åç»­æµç¨‹

### 3. HRç®¡ç†æŒ‡å—
1. **é…ç½®å®¡æ‰¹è§„åˆ™** â†’ è®¾ç½®ä¸åŒç±»å‹å‡æœŸçš„å®¡æ‰¹æµç¨‹
2. **ç›‘æ§æµç¨‹æ•ˆç‡** â†’ åˆ†æå®¡æ‰¹æ—¶é•¿å’Œç“¶é¢ˆ
3. **ç®¡ç†å‡æœŸä½™é¢** â†’ å®šæœŸæ›´æ–°å’ŒåŒæ­¥å‡æœŸæ•°æ®
4. **ç”Ÿæˆç»Ÿè®¡æŠ¥è¡¨** â†’ å¯¼å‡ºè¯·å‡æ•°æ®å’Œåˆ†ææŠ¥å‘Š
5. **å¤„ç†å¼‚å¸¸æƒ…å†µ** â†’ å¤„ç†ç´§æ€¥è¯·å‡å’Œç‰¹æ®Šå®¡æ‰¹

---

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°è®°å½•

| ç‰ˆæœ¬ | æ›´æ–°æ—¶é—´ | æ›´æ–°å†…å®¹ | æ›´æ–°äºº |
|------|---------|---------|--------|
| **v1.0.0** | 2025-12-16 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´æµç¨‹è®¾è®¡ | æ¶æ„å›¢é˜Ÿ |
| **v1.0.1** | å¾…æ›´æ–° | ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ | äº§å“å›¢é˜Ÿ |
| **v1.0.2** | å¾…æ›´æ–° | å¢åŠ AIææ–™éªŒè¯åŠŸèƒ½ | æŠ€æœ¯å›¢é˜Ÿ |

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
**é€‚ç”¨ç‰ˆæœ¬**: IOE-DREAM v2.0.0+
**ç»´æŠ¤è´£ä»»äºº**: äººåŠ›èµ„æºéƒ¨ + æŠ€æœ¯æ¶æ„å›¢é˜Ÿ
**æœ€åå®¡æ ¸**: 2025-12-16