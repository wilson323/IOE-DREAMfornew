# å®¡æ‰¹æµç¨‹é…ç½®å™¨ä¸šåŠ¡æµç¨‹å›¾

> **åˆ›å»ºæ—¶é—´**: 2025-12-16
> **æµç¨‹ç±»å‹**: OAå·¥ä½œæµæ ¸å¿ƒåŠŸèƒ½
> **ä¼˜å…ˆçº§**: P0 - æ ¸å¿ƒæ¶æ„åŠŸèƒ½
> **é€‚ç”¨èŒƒå›´**: ä¼ä¸šçº§å®¡æ‰¹æµç¨‹è®¾è®¡ä¸é…ç½®

---

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å®¡æ‰¹æµç¨‹é…ç½®å™¨æ˜¯OAå·¥ä½œæµç³»ç»Ÿçš„æ ¸å¿ƒå¼•æ“ï¼Œæä¾›å¯è§†åŒ–å®¡æ‰¹æµç¨‹è®¾è®¡ã€èŠ‚ç‚¹é…ç½®ã€æ¡ä»¶è·¯ç”±ã€æƒé™æ§åˆ¶ã€è¶…æ—¶å¤„ç†ç­‰å®Œæ•´çš„ä¼ä¸šçº§å®¡æ‰¹æµç¨‹æ„å»ºèƒ½åŠ›ï¼Œæ”¯æŒä¸šåŠ¡äººå‘˜æ— éœ€ç¼–ç¨‹å³å¯åˆ›å»ºå¤æ‚çš„å®¡æ‰¹æµç¨‹ã€‚

### æ ¸å¿ƒç‰¹ç‚¹
- **å¯è§†åŒ–æµç¨‹è®¾è®¡**: æ‹–æ‹½å¼æµç¨‹èŠ‚ç‚¹è®¾è®¡ï¼Œæ‰€è§å³æ‰€å¾—
- **æ™ºèƒ½è·¯ç”±å¼•æ“**: åŸºäºæ¡ä»¶è‡ªåŠ¨è·¯ç”±å®¡æ‰¹æµç¨‹
- **çµæ´»æƒé™æ§åˆ¶**: ç²¾ç»†åŒ–å®¡æ‰¹æƒé™å’Œè§’è‰²ç®¡ç†
- **å¤šçº§å®¡æ‰¹æ”¯æŒ**: æ”¯æŒä¸²è¡Œã€å¹¶è¡Œã€æ¡ä»¶åˆ†æ”¯ç­‰å¤šç§å®¡æ‰¹æ¨¡å¼
- **è·¨ç³»ç»Ÿé›†æˆ**: ä¸å…¶ä»–ä¸šåŠ¡æ¨¡å—æ— ç¼é›†æˆï¼Œæ”¯æŒè·¨æ¨¡å—å®¡æ‰¹

---

## ğŸ”„ å®¡æ‰¹æµç¨‹é…ç½®å™¨å®Œæ•´æµç¨‹å›¾

```mermaid
graph TD
    A[è¿›å…¥å®¡æ‰¹æµç¨‹é…ç½®å™¨] --> B[åˆ›å»ºæ–°å®¡æ‰¹æµç¨‹]
    B --> C[é€‰æ‹©æµç¨‹ç±»å‹]
    C --> D{æµç¨‹ç±»å‹}

    D -->|åŸºç¡€å®¡æ‰¹æµç¨‹| E[ç®€å•ä¸²è¡Œå®¡æ‰¹]
    D -->|æ¡ä»¶å®¡æ‰¹æµç¨‹| F[æ¡ä»¶åˆ†æ”¯å®¡æ‰¹]
    D -->|å¹¶è¡Œå®¡æ‰¹æµç¨‹| G[å¹¶è¡Œä¼šç­¾å®¡æ‰¹]
    D -->|æ¨¡æ¿æµç¨‹| H[åŸºäºæ¨¡æ¿åˆ›å»º]

    E --> I[æ‹–æ‹½å®¡æ‰¹èŠ‚ç‚¹]
    F --> I
    G --> I
    H --> J[åŠ è½½æµç¨‹æ¨¡æ¿]

    I --> K[é…ç½®èŠ‚ç‚¹å±æ€§]
    J --> K

    K --> L[è®¾ç½®å®¡æ‰¹æ¡ä»¶]
    L --> M[é…ç½®å®¡æ‰¹æƒé™]
    M --> N[è®¾ç½®è¶…æ—¶å¤„ç†]
    N --> O[é…ç½®é€šçŸ¥è§„åˆ™]

    O --> P[æµç¨‹é¢„è§ˆæµ‹è¯•]
    P --> Q{é¢„è§ˆç»“æœ}

    Q -->|æ»¡æ„| R[ä¿å­˜æµç¨‹é…ç½®]
    Q -->|ä¸æ»¡æ„| K

    R --> S[å‘å¸ƒå®¡æ‰¹æµç¨‹]
    S --> T[æµç¨‹æŠ•å…¥ä½¿ç”¨]

    T --> U[ç›‘æ§æµç¨‹æ‰§è¡Œ]
    U --> V[æ”¶é›†æµç¨‹æ•°æ®]
    V --> W[æµç¨‹ä¼˜åŒ–è¿­ä»£]

    style A fill:#e1f5fe
    style T fill:#c8e6c9
    style W fill:#f3e5f5
```

---

## ğŸ“Š å®¡æ‰¹èŠ‚ç‚¹ç±»å‹è¯¦è§£

### 1. åŸºç¡€å®¡æ‰¹èŠ‚ç‚¹

```mermaid
graph LR
    A[å®¡æ‰¹èŠ‚ç‚¹ç±»å‹] --> B[å¼€å§‹èŠ‚ç‚¹]
    A --> C[å®¡æ‰¹èŠ‚ç‚¹]
    A --> D[ç½‘å…³èŠ‚ç‚¹]
    A --> E[ç»“æŸèŠ‚ç‚¹]

    B --> F[æµç¨‹å¯åŠ¨]
    C --> G[äººå·¥å®¡æ‰¹]
    C --> H[ç³»ç»Ÿå®¡æ‰¹]
    D --> I[æ¡ä»¶åˆ†æ”¯]
    D --> J[å¹¶è¡Œåˆ†æ”¯]
    D --> K[åˆå¹¶åˆ†æ”¯]
    E --> L[æµç¨‹ç»“æŸ]

    style A fill:#e3f2fd
    style L fill:#c8e6c9
```

#### èŠ‚ç‚¹åŠŸèƒ½çŸ©é˜µ

| èŠ‚ç‚¹ç±»å‹ | åŠŸèƒ½æè¿° | é…ç½®å¤æ‚åº¦ | ä½¿ç”¨åœºæ™¯ | æ‰§è¡Œæ–¹å¼ |
|---------|---------|-----------|---------|---------|
| **å¼€å§‹èŠ‚ç‚¹** | æµç¨‹èµ·ç‚¹ï¼Œå‘èµ·ç”³è¯· | ç®€å• | æ‰€æœ‰æµç¨‹ | è‡ªåŠ¨æ‰§è¡Œ |
| **å®¡æ‰¹èŠ‚ç‚¹** | äººå·¥å®¡æ‰¹å†³ç­– | ä¸­ç­‰ | éœ€è¦äººå·¥å†³ç­– | äººå·¥æ‰§è¡Œ |
| **ç³»ç»ŸèŠ‚ç‚¹** | ç³»ç»Ÿè‡ªåŠ¨å¤„ç† | ç®€å• | è‡ªåŠ¨åŒ–å¤„ç† | ç³»ç»Ÿæ‰§è¡Œ |
| **æ¡ä»¶ç½‘å…³** | åŸºäºæ¡ä»¶åˆ†æ”¯ | ä¸­ç­‰ | æ¡ä»¶åˆ¤æ–­ | ç³»ç»Ÿæ‰§è¡Œ |
| **å¹¶è¡Œç½‘å…³** | å¹¶è¡Œå¤„ç†åˆ†æ”¯ | å¤æ‚ | éœ€è¦å¤šäººä¼šç­¾ | ç³»ç»Ÿæ‰§è¡Œ |
| **åˆå¹¶ç½‘å…³** | åˆå¹¶å¹¶è¡Œåˆ†æ”¯ | å¤æ‚ | æ±‡æ€»å¹¶è¡Œç»“æœ | ç³»ç»Ÿæ‰§è¡Œ |
| **ç»“æŸèŠ‚ç‚¹** | æµç¨‹ç»ˆç‚¹ | ç®€å• | æ‰€æœ‰æµç¨‹ | è‡ªåŠ¨æ‰§è¡Œ |

### 2. é«˜çº§å®¡æ‰¹èŠ‚ç‚¹

```mermaid
graph TD
    A[é«˜çº§èŠ‚ç‚¹] --> B[å­æµç¨‹èŠ‚ç‚¹]
    A --> C[å®šæ—¶å™¨èŠ‚ç‚¹]
    A --> D[æœåŠ¡ä»»åŠ¡èŠ‚ç‚¹]
    A --> E[é‚®ä»¶é€šçŸ¥èŠ‚ç‚¹]
    A --> F[æ¶ˆæ¯æ¨é€èŠ‚ç‚¹]
    A --> G[æ•°æ®åŒæ­¥èŠ‚ç‚¹]
    A --> H[å›è°ƒèŠ‚ç‚¹]

    style A fill:#e3f2fd
    style H fill:#c8e6c9
```

#### é«˜çº§èŠ‚ç‚¹ç‰¹æ€§

| èŠ‚ç‚¹åç§° | æŠ€æœ¯å®ç° | é›†æˆèƒ½åŠ› | ä¸šåŠ¡ä»·å€¼ | é…ç½®éš¾åº¦ |
|-----------|---------|---------|---------|----------|
| **å­æµç¨‹èŠ‚ç‚¹** | è°ƒç”¨å…¶ä»–å®¡æ‰¹æµç¨‹ | âœ… æ”¯æŒåµŒå¥—è°ƒç”¨ | æµç¨‹å¤ç”¨ï¼Œæé«˜æ•ˆç‡ | å¤æ‚ |
| **å®šæ—¶å™¨èŠ‚ç‚¹** | å»¶æ—¶æ‰§è¡Œå’Œè¶…æ—¶å¤„ç† | âœ… å®šæ—¶ä»»åŠ¡é›†æˆ | è‡ªåŠ¨åŒ–è¶…æ—¶å¤„ç† | ä¸­ç­‰ |
| **æœåŠ¡ä»»åŠ¡èŠ‚ç‚¹** | è°ƒç”¨å¤–éƒ¨APIæœåŠ¡ | âœ… REST APIé›†æˆ | ç³»ç»Ÿé—´æ•°æ®äº¤äº’ | ä¸­ç­‰ |
| **é‚®ä»¶é€šçŸ¥èŠ‚ç‚¹** | è‡ªåŠ¨å‘é€é‚®ä»¶é€šçŸ¥ | âœ… é‚®ä»¶ç³»ç»Ÿé›†æˆ | åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜ | ç®€å• |
| **æ¶ˆæ¯æ¨é€èŠ‚ç‚¹** | å®æ—¶æ¶ˆæ¯æ¨é€ | âœ… WebSocketé›†æˆ | å®æ—¶çŠ¶æ€é€šçŸ¥ | ç®€å• |
| **æ•°æ®åŒæ­¥èŠ‚ç‚¹** | åŒæ­¥æ•°æ®åˆ°å…¶ä»–ç³»ç»Ÿ | âœ… æ•°æ®åº“é›†æˆ | æ•°æ®ä¸€è‡´æ€§ä¿è¯ | ä¸­ç­‰ |
| **å›è°ƒèŠ‚ç‚¹** | ç­‰å¾…å¤–éƒ¨å›è°ƒ | âœ… ç¬¬ä¸‰æ–¹é›†æˆ | å¼‚æ­¥å¤„ç†æ”¯æŒ | å¤æ‚ |

---

## ğŸ›ï¸ å®¡æ‰¹æƒé™é…ç½®

### 1. å®¡æ‰¹äººé…ç½®æ–¹å¼

```mermaid
graph TD
    A[å®¡æ‰¹äººé…ç½®] --> B{é…ç½®æ–¹å¼}

    B -->|æŒ‡å®šç”¨æˆ·| C[å…·ä½“äººå‘˜]
    B -->|æŒ‡å®šè§’è‰²| D[è§’è‰²ç»„]
    B -->|æŒ‡å®šéƒ¨é—¨| E[éƒ¨é—¨äººå‘˜]
    B -->|åŠ¨æ€è®¡ç®—| F[åŸºäºè§„åˆ™è®¡ç®—]
    B -->|ä¸Šä¸€æ­¥å®¡æ‰¹äºº| G[å‘èµ·äººä¸Šçº§]
    B -->|è¡¨å•å­—æ®µ| H[åŸºäºè¡¨å•æ•°æ®]

    C --> I[æƒé™éªŒè¯é€šè¿‡]
    D --> I
    E --> I
    F --> I
    G --> I
    H --> I

    I --> J[å®¡æ‰¹äººç¡®å®š]

    style A fill:#e3f2fd
    style J fill:#c8e6c9
```

#### å®¡æ‰¹äººé…ç½®ç­–ç•¥

| é…ç½®ç­–ç•¥ | å®ç°æ–¹å¼ | é€‚ç”¨åœºæ™¯ | çµæ´»æ€§ | ç»´æŠ¤æˆæœ¬ |
|---------|---------|---------|--------|----------|
| **æŒ‡å®šç”¨æˆ·** | ç›´æ¥é€‰æ‹©ç”¨æˆ· | å›ºå®šå®¡æ‰¹äººå‘˜ | ä½ | ä½ |
| **è§’è‰²é…ç½®** | æŒ‰è§’è‰²é€‰æ‹© | åŒè§’è‰²å¤šäººå®¡æ‰¹ | ä¸­ | ä¸­ |
| **éƒ¨é—¨é…ç½®** | æŒ‰éƒ¨é—¨å±‚çº§ | ç»„ç»‡ç»“æ„å®¡æ‰¹ | é«˜ | ä½ |
| **åŠ¨æ€è®¡ç®—** | åŸºäºä¸šåŠ¡è§„åˆ™ | å¤æ‚ä¸šåŠ¡é€»è¾‘ | å¾ˆé«˜ | é«˜ |
| **ä¸Šçº§å®¡æ‰¹** | ç»„ç»‡å…³ç³» | é€çº§å®¡æ‰¹ | ä¸­ | ä½ |
| **è¡¨å•å­—æ®µ** | æ•°æ®é©±åŠ¨ | åŸºäºç”³è¯·å†…å®¹åŠ¨æ€åˆ†é… | å¾ˆé«˜ | ä¸­ |

### 2. å®¡æ‰¹æƒé™çŸ©é˜µ

```javascript
// å®¡æ‰¹æƒé™é…ç½®ç¤ºä¾‹
{
  "processId": "expense_approval",
  "nodes": [
    {
      "nodeId": "manager_approval",
      "nodeName": "éƒ¨é—¨ç»ç†å®¡æ‰¹",
      "assigneeType": "department_manager",
      "assigneeValue": "${applicant.departmentId}",
      "permissions": {
        "canApprove": true,
        "canReject": true,
        "canDelegate": true,
        "canTransfer": true,
        "canViewAttachments": true
      },
      "conditions": {
        "amount": {
          "operator": "<=",
          "value": 5000
        }
      }
    },
    {
      "nodeId": "director_approval",
      "nodeName": "æ€»ç›‘å®¡æ‰¹",
      "assigneeType": "role",
      "assigneeValue": "FINANCE_DIRECTOR",
      "permissions": {
        "canApprove": true,
        "canReject": true,
        "canDelegate": false,
        "canTransfer": true,
        "canViewAttachments": true
      },
      "conditions": {
        "amount": {
          "operator": ">",
          "value": 5000
        }
      }
    }
  ]
}
```

---

## ğŸ”„ æ¡ä»¶è·¯ç”±å¼•æ“

### 1. è·¯ç”±æ¡ä»¶ç±»å‹

```mermaid
graph TD
    A[è·¯ç”±æ¡ä»¶é…ç½®] --> B{æ¡ä»¶ç±»å‹}

    B -->|è¡¨å•å­—æ®µæ¡ä»¶| C[åŸºäºç”³è¯·æ•°æ®]
    B -->|ç”¨æˆ·å±æ€§æ¡ä»¶| D[åŸºäºç”³è¯·äººä¿¡æ¯]
    B -->|ç³»ç»Ÿæ¡ä»¶| E[åŸºäºç³»ç»ŸçŠ¶æ€]
    B -->|æ—¶é—´æ¡ä»¶| F[åŸºäºæ—¶é—´è§„åˆ™]
    B -->|å¤–éƒ¨æ¡ä»¶| G[åŸºäºå¤–éƒ¨æ•°æ®]

    C --> H[æ¡ä»¶è¡¨è¾¾å¼è§£æ]
    D --> H
    E --> H
    F --> H
    G --> H

    H --> I[è·¯ç”±å†³ç­–æ‰§è¡Œ]

    style A fill:#e3f2fd
    style I fill:#c8e6c9
```

#### è·¯ç”±æ¡ä»¶ç¤ºä¾‹

| æ¡ä»¶ç±»å‹ | è¡¨è¾¾å¼ç¤ºä¾‹ | è¯´æ˜ | åº”ç”¨åœºæ™¯ |
|---------|-----------|------|---------|
| **æ•°å€¼æ¯”è¾ƒ** | ${amount} > 10000 | é‡‘é¢å¤§äº1ä¸‡ | å¤§é¢æŠ¥é”€ç‰¹æ®Šå®¡æ‰¹ |
| **å­—ç¬¦ä¸²åŒ¹é…** | ${type} == 'URGENT' | ç±»å‹ä¸ºç´§æ€¥ | ç´§æ€¥ç”³è¯·å¿«é€Ÿé€šé“ |
| **åŒ…å«åˆ¤æ–­** | ${department} contains 'æŠ€æœ¯' | éƒ¨é—¨åŒ…å«æŠ€æœ¯ | æŠ€æœ¯éƒ¨é—¨ç‰¹æ®Šæµç¨‹ |
| **æ—¥æœŸèŒƒå›´** | ${submitDate} between '2024-01-01' and '2024-12-31' | å¹´åº¦å†…ç”³è¯· | å¹´åº¦é¢„ç®—æ§åˆ¶ |
| **ç”¨æˆ·çº§åˆ«** | ${applicant.level} >= 3 | ç”³è¯·äººçº§åˆ«3çº§ä»¥ä¸Š | é«˜çº§äººå‘˜ç®€åŒ–æµç¨‹ |
| **ç³»ç»ŸçŠ¶æ€** | ${system.maintenance} == false | éç³»ç»Ÿç»´æŠ¤æœŸ | é¿å…ç»´æŠ¤æœŸå®¡æ‰¹ |

### 2. å¤æ‚è·¯ç”±é…ç½®

```mermaid
graph TD
    A[ç”³è¯·æäº¤] --> B{é‡‘é¢åˆ¤æ–­}

    B -->|â‰¤1000å…ƒ| C[ä¸»ç®¡å®¡æ‰¹]
    B -->|1000-5000å…ƒ| D[ç»ç†å®¡æ‰¹]
    B -->|>5000å…ƒ| E{ç±»å‹åˆ¤æ–­}

    E -->|æ™®é€šè´¹ç”¨| F[æ€»ç›‘å®¡æ‰¹]
    E -->|ç´§æ€¥è´¹ç”¨| G[å¿«é€Ÿå®¡æ‰¹é€šé“]
    E -->|èµ„æœ¬æ”¯å‡º| H[è´¢åŠ¡+æŠ€æœ¯åŒå®¡æ‰¹]

    C --> I[æµç¨‹ç»“æŸ]
    D --> I
    F --> I
    G --> I
    H --> I

    style A fill:#e3f2fd
    style I fill:#c8e6c9
```

---

## ğŸ“± è·¨æ¨¡å—å®¡æ‰¹è”åŠ¨

### 1. æ¨¡å—é›†æˆæ¶æ„

```mermaid
graph LR
    A[OAå·¥ä½œæµå¼•æ“] --> B[æ¨¡å—é›†æˆæ¥å£]
    B --> C[é—¨ç¦æ¨¡å—]
    B --> D[è€ƒå‹¤æ¨¡å—]
    B --> E[æ¶ˆè´¹æ¨¡å—]
    B --> F[è®¿å®¢æ¨¡å—]
    B --> G[è§†é¢‘æ¨¡å—]

    C --> H[é—¨ç¦æƒé™å®¡æ‰¹]
    D --> I[è€ƒå‹¤å¼‚å¸¸å®¡æ‰¹]
    E --> J[æ¶ˆè´¹ç‰¹æ®Šç”³è¯·]
    F --> K[è®¿å®¢æƒé™å®¡æ‰¹]
    G --> L[å½•åƒæŸ¥çœ‹æƒé™]

    style A fill:#e3f2fd
    style L fill:#c8e6c9
```

### 2. è·¨æ¨¡å—å®¡æ‰¹åœºæ™¯

| é›†æˆæ¨¡å— | å®¡æ‰¹åœºæ™¯ | è§¦å‘æ¡ä»¶ | å®¡æ‰¹æµç¨‹ | å¤„ç†ç»“æœ |
|---------|---------|---------|---------|---------|
| **é—¨ç¦æ¨¡å—** | ç‰¹æ®Šé—¨ç¦æƒé™ | è®¿é—®é™åˆ¶åŒºåŸŸ | éƒ¨é—¨ç»ç†+å®‰ä¿ | ä¸´æ—¶é—¨ç¦æˆæƒ |
| **è€ƒå‹¤æ¨¡å—** | å¼‚å¸¸è€ƒå‹¤å¤„ç† | è€ƒå‹¤å¼‚å¸¸æ•°æ® | HR+éƒ¨é—¨ç»ç† | è€ƒå‹¤è®°å½•ä¿®æ­£ |
| **æ¶ˆè´¹æ¨¡å—** | å¤§é¢æ¶ˆè´¹ç”³è¯· | å•æ¬¡æ¶ˆè´¹>1000å…ƒ | è´¢åŠ¡+ç”³è¯·äºº | æ¶ˆè´¹é¢„æˆæƒ |
| **è®¿å®¢æ¨¡å—** | VIPè®¿å®¢æ¥å¾… | é‡è¦è®¿å®¢ç”³è¯· | æ¥å¾…éƒ¨é—¨+å®‰ä¿ | è®¿å®¢é€šè¡Œæƒé™ |
| **è§†é¢‘æ¨¡å—** | å½•åƒæŸ¥çœ‹æƒé™ | æŸ¥çœ‹æ•æ„Ÿå½•åƒ | æ³•åŠ¡+éƒ¨é—¨ä¸»ç®¡ | ä¸´æ—¶æŸ¥çœ‹æˆæƒ |

---

## â° è¶…æ—¶å¤„ç†æœºåˆ¶

### 1. è¶…æ—¶å¤„ç†ç­–ç•¥

```mermaid
graph TD
    A[å®¡æ‰¹ä»»åŠ¡åˆ›å»º] --> B[è®¾ç½®è¶…æ—¶æ—¶é—´]
    B --> C[å¼€å§‹è®¡æ—¶]
    C --> D{ä»»åŠ¡çŠ¶æ€}

    D -->|æŒ‰æ—¶å®Œæˆ| E[æ­£å¸¸ç»“æŸ]
    D -->|è¶…æ—¶æœªå¤„ç†| F{è¶…æ—¶å¤„ç†ç­–ç•¥}

    F -->|è‡ªåŠ¨é€šè¿‡| G[è‡ªåŠ¨å®¡æ‰¹é€šè¿‡]
    F -->|è‡ªåŠ¨é©³å›| H[è‡ªåŠ¨é©³å›ç”³è¯·]
    F -->|è½¬äº¤ä¸Šçº§| I[è½¬äº¤ç»™ä¸Šçº§å®¡æ‰¹]
    F -->|æé†’é€šçŸ¥| J[å‘é€å‚¬åŠé€šçŸ¥]

    G --> K[è®°å½•è¶…æ—¶å¤„ç†]
    H --> K
    I --> K
    J --> L[ç­‰å¾…è¿›ä¸€æ­¥å¤„ç†]

    style A fill:#e3f2fd
    style K fill:#c8e6c9
```

#### è¶…æ—¶å¤„ç†é…ç½®

| å¤„ç†ç­–ç•¥ | é€‚ç”¨åœºæ™¯ | é…ç½®å‚æ•° | é£é™©ç­‰çº§ |
|---------|---------|---------|---------|
| **è‡ªåŠ¨é€šè¿‡** | ä½é£é™©å®¡æ‰¹ | è¶…æ—¶æ—¶é—´=24å°æ—¶ | ä½ |
| **è‡ªåŠ¨é©³å›** | æ—¶æ•ˆæ€§å¼ºå®¡æ‰¹ | è¶…æ—¶æ—¶é—´=4å°æ—¶ | ä¸­ |
| **è½¬äº¤ä¸Šçº§** | é‡è¦å®¡æ‰¹ | è¶…æ—¶æ—¶é—´=8å°æ—¶ | ä½ |
| **å‚¬åŠé€šçŸ¥** | ä¸€èˆ¬å®¡æ‰¹ | è¶…æ—¶æ—¶é—´=12å°æ—¶ | ä½ |
| **å‡çº§å¤„ç†** | ç´§æ€¥å®¡æ‰¹ | è¶…æ—¶æ—¶é—´=2å°æ—¶ | ä¸­ |

### 2. æé†’é€šçŸ¥æœºåˆ¶

```java
@Component
public class ApprovalTimeoutService {

    @Scheduled(fixedRate = 300000) // 5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
    public void checkTimeoutTasks() {
        List<ApprovalTask> timeoutTasks = approvalTaskDao.findTimeoutTasks();

        for (ApprovalTask task : timeoutTasks) {
            TimeoutConfig config = getTimeoutConfig(task.getProcessId());

            switch (config.getAction()) {
                case AUTO_APPROVE:
                    autoApproveTask(task);
                    break;
                case AUTO_REJECT:
                    autoRejectTask(task);
                    break;
                case ESCALATE:
                    escalateTask(task);
                    break;
                case NOTIFY:
                    sendTimeoutNotification(task);
                    break;
            }
        }
    }
}
```

---

## ğŸ“Š æµç¨‹ç›‘æ§ä¸åˆ†æ

### 1. æµç¨‹æ‰§è¡Œç›‘æ§

```mermaid
graph LR
    A[æµç¨‹ç›‘æ§é¢æ¿] --> B[å®æ—¶çŠ¶æ€ç›‘æ§]
    A --> C[å®¡æ‰¹æ•ˆç‡åˆ†æ]
    A --> D[ç“¶é¢ˆèŠ‚ç‚¹è¯†åˆ«]
    A --> E[å¼‚å¸¸æµç¨‹å‘Šè­¦]

    B --> F[æµç¨‹å®ä¾‹çŠ¶æ€]
    C --> G[å¹³å‡å®¡æ‰¹æ—¶é•¿]
    D --> H[è¶…æ—¶èŠ‚ç‚¹ç»Ÿè®¡]
    E --> I[å¼‚å¸¸æµç¨‹å¤„ç†]

    style A fill:#e3f2fd
    style I fill:#c8e6c9
```

### 2. å…³é”®ç›‘æ§æŒ‡æ ‡

| ç›‘æ§æŒ‡æ ‡ | è®¡ç®—æ–¹å¼ | ç›®æ ‡å€¼ | å‘Šè­¦é˜ˆå€¼ |
|---------|---------|--------|---------|
| **å¹³å‡å®¡æ‰¹æ—¶é•¿** | æ€»å®¡æ‰¹æ—¶é•¿Ã·å®¡æ‰¹æ•°é‡ | â‰¤24å°æ—¶ | >48å°æ—¶ |
| **å®¡æ‰¹åŠæ—¶ç‡** | æŒ‰æ—¶å®Œæˆæ•°Ã·æ€»å®¡æ‰¹æ•° | â‰¥90% | <85% |
| **æµç¨‹å®Œæˆç‡** | å®Œæˆæµç¨‹æ•°Ã·å¯åŠ¨æµç¨‹æ•° | â‰¥95% | <90% |
| **è¶…æ—¶å¤„ç†ç‡** | è¶…æ—¶å¤„ç†æ•°Ã·è¶…æ—¶ä»»åŠ¡æ•° | â‰¥80% | <70% |
| **ç”¨æˆ·æ»¡æ„åº¦** | ç”¨æˆ·è¯„åˆ†å¹³å‡åˆ† | â‰¥4.5åˆ† | <4.0åˆ† |

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°æ¶æ„

### 1. æµç¨‹å¼•æ“æ ¸å¿ƒ

```java
@Service
public class ApprovalProcessEngine {

    @Autowired
    private ProcessDefinitionService definitionService;

    @Autowired
    private ProcessInstanceService instanceService;

    @Autowired
    private TaskService taskService;

    /**
     * å¯åŠ¨å®¡æ‰¹æµç¨‹
     */
    public ProcessInstance startProcess(String processId, Map<String, Object> variables) {
        // è·å–æµç¨‹å®šä¹‰
        ProcessDefinition definition = definitionService.getProcessDefinition(processId);

        // åˆ›å»ºæµç¨‹å®ä¾‹
        ProcessInstance instance = instanceService.createInstance(definition, variables);

        // æ‰§è¡Œå¼€å§‹èŠ‚ç‚¹
        executeStartNode(instance);

        // è·¯ç”±åˆ°ç¬¬ä¸€ä¸ªå®¡æ‰¹èŠ‚ç‚¹
        routeToNextNode(instance);

        return instance;
    }

    /**
     * å®Œæˆå®¡æ‰¹ä»»åŠ¡
     */
    public void completeTask(String taskId, Map<String, Object> variables) {
        ApprovalTask task = taskService.getTask(taskId);

        // éªŒè¯å®¡æ‰¹æƒé™
        validateApprovalPermission(task, getCurrentUser());

        // æ‰§è¡Œå®¡æ‰¹åŠ¨ä½œ
        executeApprovalAction(task, variables);

        // è·¯ç”±åˆ°ä¸‹ä¸€èŠ‚ç‚¹
        routeToNextNode(task.getProcessInstance());

        // æ£€æŸ¥æµç¨‹æ˜¯å¦ç»“æŸ
        checkProcessCompletion(task.getProcessInstance());
    }
}
```

### 2. æ¡ä»¶è·¯ç”±å¼•æ“

```java
@Component
public class ConditionRoutingEngine {

    /**
     * æ‰§è¡Œæ¡ä»¶è·¯ç”±
     */
    public String route(String processId, Map<String, Object> variables) {
        // è·å–å½“å‰èŠ‚ç‚¹çš„è·¯ç”±è§„åˆ™
        List<RouteRule> rules = routingRuleDao.findByProcessId(processId);

        // éå†è·¯ç”±è§„åˆ™
        for (RouteRule rule : rules) {
            if (evaluateCondition(rule.getCondition(), variables)) {
                return rule.getTargetNodeId();
            }
        }

        // é»˜è®¤è·¯ç”±
        return getDefaultRoute(processId);
    }

    /**
     * è¯„ä¼°è·¯ç”±æ¡ä»¶
     */
    private boolean evaluateCondition(String condition, Map<String, Object> variables) {
        // ä½¿ç”¨è¡¨è¾¾å¼å¼•æ“è§£ææ¡ä»¶
        Expression expression = expressionEngine.parseExpression(condition);
        return expression.evaluate(variables, Boolean.class);
    }
}
```

---

## ğŸ“‹ ä½¿ç”¨æŒ‡å—

### 1. æµç¨‹é…ç½®æ­¥éª¤

1. **ç™»å½•OAç³»ç»Ÿ** â†’ è¿›å…¥"å®¡æ‰¹æµç¨‹é…ç½®å™¨"
2. **åˆ›å»ºæ–°æµç¨‹** â†’ é€‰æ‹©æµç¨‹ç±»å‹æˆ–æ¨¡æ¿
3. **æ‹–æ‹½èŠ‚ç‚¹** â†’ è®¾è®¡æµç¨‹ç»“æ„å’ŒèŠ‚ç‚¹
4. **é…ç½®èŠ‚ç‚¹** â†’ è®¾ç½®æ¯ä¸ªèŠ‚ç‚¹çš„å±æ€§å’Œæƒé™
5. **è®¾ç½®è·¯ç”±** â†’ é…ç½®èŠ‚ç‚¹é—´çš„æµè½¬æ¡ä»¶
6. **é…ç½®é€šçŸ¥** â†’ è®¾ç½®å®¡æ‰¹çŠ¶æ€é€šçŸ¥è§„åˆ™
7. **æµ‹è¯•æµç¨‹** â†’ ä½¿ç”¨æµ‹è¯•æ•°æ®éªŒè¯æµç¨‹
8. **å‘å¸ƒæµç¨‹** â†’ å°†é…ç½®å¥½çš„æµç¨‹å‘å¸ƒä½¿ç”¨

### 2. æœ€ä½³å®è·µå»ºè®®

| å®è·µå»ºè®® | å…·ä½“è¯´æ˜ | é¢„æœŸæ”¶ç›Š |
|---------|---------|---------|
| **æµç¨‹ç®€åŒ–** | é¿å…è¿‡åº¦å¤æ‚çš„å®¡æ‰¹æµç¨‹ | æå‡å®¡æ‰¹æ•ˆç‡ |
| **æƒé™åˆ†ç¦»** | å®¡æ‰¹æƒé™å’Œç”³è¯·æƒé™åˆ†ç¦» | ä¿è¯å®¡æ‰¹å…¬æ­£æ€§ |
| **è¶…æ—¶æ§åˆ¶** | åˆç†è®¾ç½®å®¡æ‰¹è¶…æ—¶æ—¶é—´ | é¿å…æµç¨‹ç§¯å‹ |
| **å¼‚å¸¸å¤„ç†** | å®Œå–„çš„å¼‚å¸¸æƒ…å†µå¤„ç†æœºåˆ¶ | æé«˜æµç¨‹é²æ£’æ€§ |
| **æ•°æ®åˆ†æ** | å®šæœŸåˆ†ææµç¨‹æ‰§è¡Œæ•°æ® | æŒç»­ä¼˜åŒ–æµç¨‹è®¾è®¡ |

---

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°è®°å½•

| ç‰ˆæœ¬ | æ›´æ–°æ—¶é—´ | æ›´æ–°å†…å®¹ | æ›´æ–°äºº |
|------|---------|---------|--------|
| **v1.0.0** | 2025-12-16 | åˆå§‹ç‰ˆæœ¬ï¼Œå®¡æ‰¹æµç¨‹é…ç½®å™¨æ ¸å¿ƒåŠŸèƒ½ | äº§å“å›¢é˜Ÿ |
| **v1.0.1** | å¾…æ›´æ–° | å¢åŠ æ›´å¤šè·¨æ¨¡å—é›†æˆèƒ½åŠ› | æŠ€æœ¯å›¢é˜Ÿ |
| **v1.0.2** | å¾…æ›´æ–° | ä¼˜åŒ–æ¡ä»¶è·¯ç”±å¼•æ“æ€§èƒ½ | æ¶æ„å›¢é˜Ÿ |

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
**é€‚ç”¨ç‰ˆæœ¬**: IOE-DREAM v2.0.0+
**ç»´æŠ¤è´£ä»»äºº**: äº§å“éƒ¨ + æŠ€æœ¯æ¶æ„å›¢é˜Ÿ
**æœ€åå®¡æ ¸**: 2025-12-16