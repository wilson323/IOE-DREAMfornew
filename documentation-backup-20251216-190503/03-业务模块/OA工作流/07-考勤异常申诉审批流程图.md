# è€ƒå‹¤å¼‚å¸¸ç”³è¯‰å®¡æ‰¹æµç¨‹å›¾

## ğŸ“‹ æµç¨‹æ¦‚è¿°

è€ƒå‹¤å¼‚å¸¸ç”³è¯‰å®¡æ‰¹æµç¨‹æ˜¯IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°ä¸­äººåŠ›èµ„æºç®¡ç†çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºå‘˜å·¥å¯¹è€ƒå‹¤å¼‚å¸¸è®°å½•ï¼ˆå¦‚è¿Ÿåˆ°ã€æ—©é€€ã€ç¼ºå‹¤ã€æ‰“å¡å¼‚å¸¸ç­‰ï¼‰è¿›è¡Œç”³è¯‰å’Œå®¡æ‰¹ã€‚è¯¥æµç¨‹é€šè¿‡OAå·¥ä½œæµå¼•æ“ä¸è€ƒå‹¤ç®¡ç†ç³»ç»Ÿæ·±åº¦é›†æˆï¼Œç¡®ä¿è€ƒå‹¤å¼‚å¸¸å¤„ç†çš„å…¬å¹³æ€§ã€å‡†ç¡®æ€§å’Œå¯è¿½æº¯æ€§ã€‚

### ğŸ¯ ä¸šåŠ¡ç›®æ ‡

- **å…¬å¹³å¤„ç†**: ä¸ºå‘˜å·¥æä¾›ç”³è¯‰æ¸ é“ï¼Œç¡®ä¿è€ƒå‹¤å¤„ç†å…¬å¹³å…¬æ­£
- **å‡†ç¡®æ€§æå‡**: é€šè¿‡ç”³è¯‰æœºåˆ¶ä¿®æ­£è€ƒå‹¤è®°å½•é”™è¯¯
- **æµç¨‹è§„èŒƒ**: å»ºç«‹æ ‡å‡†åŒ–çš„è€ƒå‹¤å¼‚å¸¸å¤„ç†æµç¨‹
- **æ•°æ®å®Œæ•´**: ä¿è¯è€ƒå‹¤æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§
- **ç®¡ç†ä¼˜åŒ–**: é€šè¿‡å¼‚å¸¸æ•°æ®åˆ†æä¼˜åŒ–è€ƒå‹¤ç®¡ç†åˆ¶åº¦

### ğŸ“Š æµç¨‹æŒ‡æ ‡

| æŒ‡æ ‡é¡¹ | ç›®æ ‡å€¼ | è¯´æ˜ |
|---------|--------|------|
| **ç”³è¯‰å“åº”æ—¶é—´** | â‰¤ 4å°æ—¶ | ä»ç”³è¯‰åˆ°é¦–æ¬¡å®¡æ‰¹å“åº” |
| **å®¡æ‰¹å®Œæˆæ—¶é—´** | â‰¤ 48å°æ—¶ | ä»ç”³è¯‰åˆ°æœ€ç»ˆå®¡æ‰¹å®Œæˆ |
| **ç”³è¯‰å¤„ç†å‡†ç¡®ç‡** | â‰¥ 98% | ç”³è¯‰å¤„ç†çš„å‡†ç¡®ç‡ |
| **å‘˜å·¥æ»¡æ„åº¦** | â‰¥ 90% | å‘˜å·¥å¯¹ç”³è¯‰å¤„ç†çš„æ»¡æ„åº¦ |
| **æµç¨‹è‡ªåŠ¨åŒ–ç‡** | â‰¥ 85% | è‡ªåŠ¨åŒ–å¤„ç†æ¯”ä¾‹ |

---

## ğŸ”„ è¯¦ç»†æµç¨‹å›¾

```mermaid
graph TD
    A[è€ƒå‹¤å¼‚å¸¸æ£€æµ‹] --> B{å¼‚å¸¸ç±»å‹}

    B -->|è¿Ÿåˆ°/æ—©é€€| C[è¿Ÿåˆ°æ—©é€€ç”³è¯‰]
    B -->|ç¼ºå‹¤è®°å½•| D[ç¼ºå‹¤ç”³è¯‰]
    B -->|æ‰“å¡å¼‚å¸¸| E[æ‰“å¡å¼‚å¸¸ç”³è¯‰]
    B -->|åŠ ç­è®°å½•| F[åŠ ç­è®°å½•ç”³è¯‰]

    C --> G[å‘˜å·¥å‘èµ·ç”³è¯‰]
    D --> G
    E --> G
    F --> G

    G --> H[å¡«å†™ç”³è¯‰è¡¨å•]
    H --> I[é€‰æ‹©å¼‚å¸¸è®°å½•]
    I --> J[å¡«å†™ç”³è¯‰åŸå› ]
    J --> K[ä¸Šä¼ è¯æ˜ææ–™]

    K --> L[æäº¤ç”³è¯‰ç”³è¯·]
    L --> M[ç³»ç»Ÿè‡ªåŠ¨å®¡æ ¸]

    M --> N{å®¡æ ¸ç»“æœ}
    N -->|ææ–™é½å…¨| O[åˆ†é…å®¡æ‰¹äºº]
    N -->|ææ–™ä¸å…¨| P[è¦æ±‚è¡¥å……ææ–™]
    N -->|é‡å¤ç”³è¯‰| Q[æç¤ºå·²æœ‰ç”³è¯‰è®°å½•]
    N -->|è‡ªåŠ¨æ‰¹å‡†| R[è‡ªåŠ¨å¤„ç†å®Œæˆ]

    O --> S{ç”³è¯‰ç±»å‹åˆ¤æ–­}
    S -->|è½»å¾®å¼‚å¸¸| T[ä¸»ç®¡å®¡æ‰¹]
    S -->|ä¸€èˆ¬å¼‚å¸¸| U[ä¸»ç®¡+HRå®¡æ‰¹]
    S -->|ä¸¥é‡å¼‚å¸¸| V[ä¸»ç®¡+HR+éƒ¨é—¨ç»ç†å®¡æ‰¹]

    T --> W[ç›´æ¥ä¸»ç®¡å®¡æ‰¹]
    U --> X[HRä¸“å‘˜å®¡æ‰¹]
    V --> Y[éƒ¨é—¨ç»ç†å®¡æ‰¹]

    W --> Z{ä¸»ç®¡å®¡æ‰¹ç»“æœ}
    X --> AA{HRå®¡æ‰¹ç»“æœ}
    Y --> BB{éƒ¨é—¨ç»ç†å®¡æ‰¹ç»“æœ}

    Z -->|åŒæ„| CC[ä¿®æ­£è€ƒå‹¤è®°å½•]
    Z -->|æ‹’ç»| DD[å‘é€æ‹’ç»é€šçŸ¥]
    Z -->|éœ€è¡¥å……| EE[è¦æ±‚è¡¥å……ææ–™]
    Z -->|è½¬ä¸Šçº§| FF[ä¸Šçº§å®¡æ‰¹]

    AA --> CC
    AA --> DD
    AA --> EE
    AA --> FF

    BB --> CC
    BB --> DD
    BB --> EE
    BB --> FF

    CC --> GG[æ›´æ–°è€ƒå‹¤ç³»ç»Ÿ]
    GG --> HH[é€šçŸ¥ç”³è¯‰ç»“æœ]
    HH --> II[è®°å½•å¤„ç†æ—¥å¿—]

    DD --> JJ[å‘é€æ‹’ç»åŸå› ]
    EE --> KK[è¡¥å……ææ–™]
    KK --> L

    P --> LL[è¡¥å……ææ–™é€šçŸ¥]
    Q --> MM[æŸ¥çœ‹å·²æœ‰ç”³è¯‰]
    R --> NN[è‡ªåŠ¨ä¿®æ­£è®°å½•]

    LL --> OO[é‡æ–°æäº¤]
    MM --> PP[ç»§ç»­ç”³è¯‰]
    NN --> QQ[é€šçŸ¥å¤„ç†ç»“æœ]

    style A fill:#e1f5fe
    style G fill:#fff3e0
    style L fill:#fff3e0
    style CC fill:#e8f5e8
    style GG fill:#e8f5e8
    style DD fill:#ffebee
    style JJ fill:#ffebee
    style LL fill:#ffebee
```

---

## ğŸ“‹ æµç¨‹èŠ‚ç‚¹è¯¦ç»†è¯´æ˜

### 1. è€ƒå‹¤å¼‚å¸¸æ£€æµ‹é˜¶æ®µ

#### 1.1 å¼‚å¸¸ç±»å‹è¯†åˆ«
```java
@Component
public class AttendanceAnomalyDetector {

    @Resource
    private AttendanceRuleEngine ruleEngine;

    @Resource
    private CheckRecordDao checkRecordDao;

    /**
     * æ£€æµ‹è€ƒå‹¤å¼‚å¸¸
     */
    public List<AttendanceAnomaly> detectAnomalies(Long userId, LocalDate date) {
        List<AttendanceAnomaly> anomalies = new ArrayList<>();

        // 1. è·å–å½“æ—¥æ‰“å¡è®°å½•
        List<CheckRecord> checkRecords = checkRecordDao.selectByUserIdAndDate(userId, date);

        // 2. åº”ç”¨æ£€æµ‹è§„åˆ™
        for (AttendanceRule rule : ruleEngine.getApplicableRules(userId)) {
            AnomalyDetectionResult result = ruleEngine.detect(rule, checkRecords);

            if (result.isAnomaly()) {
                AttendanceAnomaly anomaly = createAnomaly(userId, date, rule, result);
                anomalies.add(anomaly);
            }
        }

        return anomalies;
    }

    private AttendanceAnomaly createAnomaly(Long userId, LocalDate date, AttendanceRule rule, AnomalyDetectionResult result) {
        return AttendanceAnomaly.builder()
            .userId(userId)
            .anomalyDate(date)
            .anomalyType(rule.getAnomalyType())
            .anomalyLevel(rule.getAnomalyLevel())
            .originalTime(result.getActualTime())
            .expectedTime(result.getExpectedTime())
            .deviationMinutes(result.getDeviationMinutes())
            .description(result.getDescription())
            .autoDetected(true)
            .createTime(LocalDateTime.now())
            .build();
    }
}
```

### 2. ç”³è¯‰ç”³è¯·é˜¶æ®µ

#### 2.1 ç”³è¯‰è¡¨å•è®¾è®¡
```json
{
  "appealInfo": {
    "appealId": "APPEAL20241216001",
    "userId": "USER001",
    "userName": "å¼ ä¸‰",
    "department": "æŠ€æœ¯éƒ¨",
    "position": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
    "appealDate": "2024-12-16"
  },
  "anomalyRecord": {
    "anomalyId": "ANOMALY001",
    "anomalyType": "LATE",
    "anomalyDate": "2024-12-15",
    "originalCheckTime": "09:15:00",
    "expectedCheckTime": "09:00:00",
    "deviationMinutes": 15
  },
  "appealContent": {
    "appealReason": "å› å…¬å¸ç­è½¦å»¶è¯¯å¯¼è‡´è¿Ÿåˆ°",
    "appealType": "TRANSPORT_ISSUE",
    "detailedDescription": "ä»Šæ—¥å…¬å¸ç­è½¦åœ¨ä¸œä¸‰ç¯è·¯å‘ç”Ÿäº¤é€šäº‹æ•…ï¼Œå¯¼è‡´å»¶è¯¯15åˆ†é’Ÿåˆ°è¾¾å…¬å¸",
    "expectedCorrection": "å°†è®°å½•ä¿®æ­£ä¸ºæ­£å¸¸æ‰“å¡",
    "evidenceType": ["BUS_ACCIDENT_PHOTO", "TRAFFIC_REPORT"]
  },
  "attachments": [
    {
      "type": "BUS_ACCIDENT_PHOTO",
      "name": "äº¤é€šäº‹æ•…ç°åœºç…§ç‰‡.jpg",
      "url": "/uploads/appeal/bus_accident_001.jpg"
    },
    {
      "type": "TRAFFIC_REPORT",
      "name": "äº¤è­¦äº‹æ•…è®¤å®šä¹¦.pdf",
      "url": "/uploads/appeal/traffic_report_001.pdf"
    }
  ]
}
```

#### 2.2 ç”³è¯‰ç”³è¯·æœåŠ¡
```java
@Service
public class AttendanceAppealService {

    @Resource
    private AttendanceAnomalyDao anomalyDao;

    @Resource
    private AppealApplicationDao appealDao;

    @Resource
    private WorkflowEngine workflowEngine;

    /**
     * æäº¤ç”³è¯‰ç”³è¯·
     */
    public AppealApplicationResult submitAppeal(AppealApplicationRequest request) {
        AppealApplicationResult result = new AppealApplicationResult();

        try {
            // 1. éªŒè¯ç”³è¯‰èµ„æ ¼
            validateAppealEligibility(request);

            // 2. æ£€æŸ¥é‡å¤ç”³è¯‰
            checkDuplicateAppeal(request);

            // 3. ä¿å­˜ç”³è¯‰ç”³è¯·
            AppealApplication appeal = createAppealApplication(request);
            appealDao.insert(appeal);

            // 4. æ›´æ–°å¼‚å¸¸è®°å½•çŠ¶æ€
            updateAnomalyStatus(request.getAnomalyId(), "APPEALED");

            // 5. å¯åŠ¨å®¡æ‰¹æµç¨‹
            String processInstanceId = startApprovalProcess(appeal);
            appeal.setProcessInstanceId(processInstanceId);
            appealDao.updateById(appeal);

            // 6. å‘é€ç¡®è®¤é€šçŸ¥
            sendAppealConfirmation(appeal);

            result.setSuccess(true);
            result.setAppealId(appeal.getId());
            result.setMessage("ç”³è¯‰ç”³è¯·æäº¤æˆåŠŸ");

        } catch (Exception e) {
            result.setSuccess(false);
            result.setMessage("ç”³è¯‰ç”³è¯·å¤±è´¥: " + e.getMessage());
        }

        return result;
    }

    private void validateAppealEligibility(AppealApplicationRequest request) {
        // 1. æ£€æŸ¥å¼‚å¸¸è®°å½•æ˜¯å¦å­˜åœ¨
        AttendanceAnomaly anomaly = anomalyDao.selectById(request.getAnomalyId());
        if (anomaly == null) {
            throw new IllegalArgumentException("å¼‚å¸¸è®°å½•ä¸å­˜åœ¨");
        }

        // 2. æ£€æŸ¥ç”³è¯‰æ—¶é—´é™åˆ¶
        LocalDateTime appealDeadline = anomaly.getCreateTime().plusDays(7);
        if (LocalDateTime.now().isAfter(appealDeadline)) {
            throw new IllegalArgumentException("ç”³è¯‰æ—¶é—´å·²è¿‡ï¼Œå¼‚å¸¸è®°å½•å‘ç”Ÿè¶…è¿‡7å¤©");
        }

        // 3. æ£€æŸ¥ç”³è¯‰æƒé™
        if (!request.getUserId().equals(anomaly.getUserId())) {
            throw new IllegalArgumentException("åªèƒ½å¯¹è‡ªå·±çš„å¼‚å¸¸è®°å½•å‘èµ·ç”³è¯‰");
        }
    }

    private String startApprovalProcess(AppealApplication appeal) {
        WorkflowStartRequest workflowRequest = WorkflowStartRequest.builder()
            .processKey("attendance_appeal")
            .businessKey(appeal.getId())
            .variables(Map.of(
                "appealId", appeal.getId(),
                "userId", appeal.getUserId(),
                "anomalyType", appeal.getAnomalyType(),
                "anomalyLevel", appeal.getAnomalyLevel(),
                "appealType", appeal.getAppealType()
            ))
            .build();

        return workflowEngine.startProcess(workflowRequest);
    }
}
```

### 3. è‡ªåŠ¨å®¡æ ¸é˜¶æ®µ

#### 3.1 è‡ªåŠ¨å®¡æ ¸æœåŠ¡
```java
@Service
public class AppealAutoReviewService {

    @Resource
    private AppealRuleEngine ruleEngine;

    @Resource
    private AttendancePolicyService policyService;

    /**
     * æ‰§è¡Œè‡ªåŠ¨å®¡æ ¸
     */
    public AutoReviewResult executeAutoReview(AppealApplication appeal) {
        AutoReviewResult result = new AutoReviewResult();

        try {
            // 1. ææ–™å®Œæ•´æ€§æ£€æŸ¥
            checkMaterialCompleteness(appeal, result);

            // 2. ç”³è¯‰ç†ç”±åˆç†æ€§éªŒè¯
            validateAppealReason(appeal, result);

            // 3. è¯æ®æœ‰æ•ˆæ€§éªŒè¯
            validateEvidence(appeal, result);

            // 4. æ”¿ç­–ç¬¦åˆæ€§æ£€æŸ¥
            checkPolicyCompliance(appeal, result);

            // 5. å†å²ç”³è¯‰è®°å½•åˆ†æ
            analyzeAppealHistory(appeal, result);

            // 6. é£é™©è¯„ä¼°
            assessAppealRisk(appeal, result);

            // 7. ç”Ÿæˆå®¡æ ¸å»ºè®®
            generateReviewSuggestion(appeal, result);

        } catch (Exception e) {
            result.setSuccess(false);
            result.addError("è‡ªåŠ¨å®¡æ ¸å¼‚å¸¸: " + e.getMessage());
        }

        return result;
    }

    private void checkMaterialCompleteness(AppealApplication appeal, AutoReviewResult result) {
        // 1. å¿…å¡«ææ–™æ£€æŸ¥
        List<MaterialType> requiredMaterials = getRequiredMaterials(appeal.getAppealType());
        for (MaterialType type : requiredMaterials) {
            if (!hasMaterialOfType(appeal.getAttachments(), type)) {
                result.addError("ç¼ºå°‘å¿…éœ€ææ–™: " + type.getDescription());
            }
        }

        // 2. ææ–™è´¨é‡æ£€æŸ¥
        for (AppealAttachment attachment : appeal.getAttachments()) {
            MaterialQuality quality = assessMaterialQuality(attachment);
            if (quality.getScore() < 60) {
                result.addWarning("ææ–™è´¨é‡è¾ƒä½: " + attachment.getName());
            }
        }
    }

    private void validateAppealReason(AppealApplication appeal, AutoReviewResult result) {
        // 1. ç”³è¯‰ç†ç”±æ¨¡æ¿åŒ¹é…
        ReasonTemplateMatch templateMatch = matchReasonTemplate(appeal.getAppealReason());
        result.setTemplateMatch(templateMatch);

        // 2. ç”³è¯‰ç†ç”±åˆç†æ€§è¯„åˆ†
        double reasonScore = calculateReasonScore(appeal.getDetailedDescription());
        result.setReasonScore(reasonScore);

        if (reasonScore < 50) {
            result.addWarning("ç”³è¯‰ç†ç”±æè¿°ä¸å¤Ÿè¯¦ç»†");
        }
    }

    private void validateEvidence(AppealApplication appeal, AutoReviewResult result) {
        for (AppealAttachment attachment : appeal.getAttachments()) {
            EvidenceValidation validation = validateAttachmentEvidence(attachment);
            result.addEvidenceValidation(attachment.getType(), validation);

            if (!validation.isValid()) {
                result.addError("è¯æ®éªŒè¯å¤±è´¥: " + validation.getErrorMessage());
            }
        }
    }

    private void checkPolicyCompliance(AppealApplication appeal, AutoReviewResult result) {
        AttendancePolicy policy = policyService.getApplicablePolicy(appeal.getUserId());

        PolicyComplianceCheck complianceCheck = policy.checkCompliance(appeal);
        result.setPolicyCompliance(complianceCheck);

        if (!complianceCheck.isCompliant()) {
            result.addWarning("ç”³è¯‰ä¸å®Œå…¨ç¬¦åˆè€ƒå‹¤æ”¿ç­–è¦æ±‚");
        }
    }

    private void analyzeAppealHistory(AppealApplication appeal, AutoReviewResult result) {
        // è·å–ç”¨æˆ·å†å²ç”³è¯‰è®°å½•
        List<AppealApplication> history = appealDao.selectByUserId(appeal.getUserId());

        AppealHistoryAnalysis analysis = analyzeAppealHistory(history, appeal);
        result.setHistoryAnalysis(analysis);

        // æ£€æŸ¥æ˜¯å¦æœ‰é¢‘ç¹ç”³è¯‰æ¨¡å¼
        if (analysis.getFrequencyScore() > 80) {
            result.addWarning("è¯¥ç”¨æˆ·ç”³è¯‰é¢‘ç‡è¾ƒé«˜ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨");
        }
    }
}
```

### 4. å®¡æ‰¹åˆ†é…é˜¶æ®µ

#### 4.1 å®¡æ‰¹äººåˆ†é…ç­–ç•¥
```java
@Service
public class AppealApprovalAssignService {

    @Resource
    private EmployeeDao employeeDao;

    @Resource
    private DepartmentDao departmentDao;

    @Resource
    private HREmployeeDao hrEmployeeDao;

    /**
     * åˆ†é…å®¡æ‰¹äºº
     */
    public List<String> assignApprovers(AppealApplication appeal) {
        List<String> approvers = new ArrayList<>();

        // 1. è·å–ç”³è¯‰äººä¿¡æ¯
        EmployeeEntity employee = employeeDao.selectByUserId(appeal.getUserId());

        // 2. æ ¹æ®å¼‚å¸¸çº§åˆ«åˆ†é…å®¡æ‰¹äºº
        switch (appeal.getAnomalyLevel()) {
            case 1: // è½»å¾®å¼‚å¸¸
                approvers.addAll(assignMinorAnomalyApprovers(employee, appeal));
                break;

            case 2: // ä¸€èˆ¬å¼‚å¸¸
                approvers.addAll(assignNormalAnomalyApprovers(employee, appeal));
                break;

            case 3: // ä¸¥é‡å¼‚å¸¸
                approvers.addAll(assignSevereAnomalyApprovers(employee, appeal));
                break;

            default:
                throw new IllegalArgumentException("æœªçŸ¥çš„å¼‚å¸¸çº§åˆ«: " + appeal.getAnomalyLevel());
        }

        // 3. å»é‡å¹¶æ’åº
        return approvers.stream()
            .distinct()
            .sorted(this::compareApproverLevel)
            .collect(Collectors.toList());
    }

    private List<String> assignMinorAnomalyApprovers(EmployeeEntity employee, AppealApplication appeal) {
        List<String> approvers = new ArrayList<>();

        // ç›´æ¥ä¸»ç®¡
        String managerId = getDirectManager(employee.getDepartmentId());
        approvers.add(managerId);

        // å¦‚æœæ˜¯äº¤é€šé—®é¢˜ï¼Œå¯ä»¥è·³è¿‡HRå®¡æ‰¹
        if (!isTransportIssue(appeal.getAppealType())) {
            approvers.add(getHRApprover());
        }

        return approvers;
    }

    private List<String> assignNormalAnomalyApprovers(EmployeeEntity employee, AppealApplication appeal) {
        List<String> approvers = new ArrayList<>();

        // ç›´æ¥ä¸»ç®¡
        approvers.add(getDirectManager(employee.getDepartmentId()));

        // HRä¸“å‘˜
        approvers.add(getHRApprover());

        // å¦‚æœæ¶‰åŠåŠ ç­æˆ–ç‰¹æ®Šæƒ…å†µï¼Œéœ€è¦éƒ¨é—¨ç»ç†
        if (involvesOvertime(appeal.getAppealType())) {
            approvers.add(getDepartmentManager(employee.getDepartmentId()));
        }

        return approvers;
    }

    private List<String> assignSevereAnomalyApprovers(EmployeeEntity employee, AppealApplication appeal) {
        List<String> approvers = new ArrayList<>();

        // ç›´æ¥ä¸»ç®¡
        approvers.add(getDirectManager(employee.getDepartmentId()));

        // HRç»ç†
        approvers.add(getHRManager());

        // éƒ¨é—¨ç»ç†
        approvers.add(getDepartmentManager(employee.getDepartmentId()));

        // å¦‚æœæ˜¯æ ¸å¿ƒå‘˜å·¥ï¼Œéœ€è¦åˆ†ç®¡é¢†å¯¼
        if (isCoreEmployee(employee)) {
            approvers.add(getDivisionDirector(employee.getDepartmentId()));
        }

        return approvers;
    }

    private String getDirectManager(Long departmentId) {
        DepartmentEntity department = departmentDao.selectById(departmentId);
        return department != null ? department.getManagerId() : null;
    }

    private String getHRApprover() {
        // æ ¹æ®HRéƒ¨é—¨çš„è½®ç­è§„åˆ™åˆ†é…HRä¸“å‘˜
        return hrEmployeeDao.getCurrentDutyHR();
    }
}
```

### 5. å®¡æ‰¹å†³ç­–é˜¶æ®µ

#### 5.1 å®¡æ‰¹å†³ç­–æœåŠ¡
```java
@Service
public class AppealApprovalDecisionService {

    @Resource
    private AttendanceRuleEngine ruleEngine;

    @Resource
    private AttendancePolicyService policyService;

    /**
     * æ‰§è¡Œå®¡æ‰¹å†³ç­–
     */
    public ApprovalDecision executeDecision(ApprovalRequest request) {
        ApprovalDecision decision = new ApprovalDecision();

        try {
            // 1. è·å–ç”³è¯‰è¯¦æƒ…
            AppealApplication appeal = appealDao.selectById(request.getAppealId());

            // 2. éªŒè¯å®¡æ‰¹æƒé™
            validateApprovalPermission(request, appeal);

            // 3. åº”ç”¨å®¡æ‰¹è§„åˆ™
            applyApprovalRules(request, appeal, decision);

            // 4. æ”¿ç­–åˆè§„æ€§æ£€æŸ¥
            checkPolicyCompliance(appeal, decision);

            // 5. å†å²è¡Œä¸ºåˆ†æ
            analyzeHistoricalBehavior(appeal, decision);

            // 6. ç»¼åˆå†³ç­–
            makeComprehensiveDecision(appeal, decision);

            // 7. ç”Ÿæˆå¤„ç†å»ºè®®
            generateProcessingSuggestions(appeal, decision);

        } catch (Exception e) {
            decision.setResult(DecisionResult.ERROR);
            decision.setReason("å®¡æ‰¹å†³ç­–å¼‚å¸¸: " + e.getMessage());
        }

        return decision;
    }

    private void applyApprovalRules(ApprovalRequest request, AppealApplication appeal, ApprovalDecision decision) {
        List<ApprovalRule> rules = ruleEngine.getApprovalRules(
            appeal.getAnomalyType(),
            appeal.getAnomalyLevel(),
            request.getApproverRole()
        );

        for (ApprovalRule rule : rules) {
            RuleResult result = ruleEngine.apply(rule, Map.of(
                "appeal", appeal,
                "request", request
            ));

            decision.addRuleResult(rule.getName(), result);

            // æ£€æŸ¥å¼ºåˆ¶è§„åˆ™
            if (rule.isMandatory() && !result.isPassed()) {
                decision.setResult(DecisionResult.REJECTED);
                decision.setReason("è¿åå¼ºåˆ¶è§„åˆ™: " + rule.getName());
                return;
            }
        }
    }

    private void checkPolicyCompliance(AppealApplication appeal, ApprovalDecision decision) {
        AttendancePolicy policy = policyService.getApplicablePolicy(appeal.getUserId());

        PolicyComplianceCheck compliance = policy.checkAppealCompliance(appeal);
        decision.setPolicyCompliance(compliance);

        // å¦‚æœä¸¥é‡è¿åæ”¿ç­–ï¼Œç›´æ¥æ‹’ç»
        if (compliance.getViolationLevel() == ViolationLevel.SEVERE) {
            decision.setResult(DecisionResult.REJECTED);
            decision.setReason("ä¸¥é‡è¿åè€ƒå‹¤æ”¿ç­–è¦æ±‚");
            return;
        }
    }

    private void analyzeHistoricalBehavior(AppealApplication appeal, ApprovalDecision decision) {
        // è·å–ç”¨æˆ·å†å²è€ƒå‹¤è®°å½•
        List<AttendanceRecord> history = attendanceDao.getHistoryRecords(
            appeal.getUserId(),
            LocalDate.now().minusMonths(3),
            LocalDate.now()
        );

        // è·å–ç”¨æˆ·å†å²ç”³è¯‰è®°å½•
        List<AppealApplication> appealHistory = appealDao.selectByUserId(
            appeal.getUserId()
        );

        HistoricalBehaviorAnalysis analysis = analyzeBehavior(history, appealHistory);
        decision.setBehaviorAnalysis(analysis);

        // è¯„ä¼°ç”³è¯‰å¯ä¿¡åº¦
        double credibilityScore = calculateCredibilityScore(appeal, analysis);
        decision.setCredibilityScore(credibilityScore);

        // å¦‚æœå¯ä¿¡åº¦è¿‡ä½ï¼Œéœ€è¦é¢å¤–å®¡æ ¸
        if (credibilityScore < 30) {
            decision.setRequireAdditionalReview(true);
            decision.addWarning("ç”¨æˆ·ç”³è¯‰å¯ä¿¡åº¦è¾ƒä½ï¼Œå»ºè®®é¢å¤–å®¡æ ¸");
        }
    }

    private void makeComprehensiveDecision(AppealApplication appeal, ApprovalDecision decision) {
        // ç»¼åˆè¯„åˆ†è®¡ç®—
        double ruleScore = calculateRuleScore(decision.getRuleResults());
        double policyScore = decision.getPolicyCompliance().getScore();
        double credibilityScore = decision.getCredibilityScore();
        double evidenceScore = calculateEvidenceScore(appeal);

        double totalScore = (
            ruleScore * 0.3 +
            policyScore * 0.25 +
            credibilityScore * 0.25 +
            evidenceScore * 0.2
        );

        // å†³ç­–é˜ˆå€¼
        double approveThreshold = 70.0;
        double conditionalApproveThreshold = 50.0;

        if (totalScore >= approveThreshold) {
            decision.setResult(DecisionResult.APPROVED);
        } else if (totalScore >= conditionalApproveThreshold) {
            decision.setResult(DecisionResult.APPROVED_WITH_CONDITIONS);
        } else {
            decision.setResult(DecisionResult.REJECTED);
        }

        decision.setTotalScore(totalScore);
    }

    private void generateProcessingSuggestions(AppealApplication appeal, ApprovalDecision decision) {
        List<String> suggestions = new ArrayList<>();

        switch (decision.getResult()) {
            case APPROVED:
                suggestions.add("åŒæ„ç”³è¯‰ï¼Œä¿®æ­£è€ƒå‹¤è®°å½•");
                suggestions.add("æ›´æ–°è€ƒå‹¤ç»Ÿè®¡æ•°æ®");
                break;

            case APPROVED_WITH_CONDITIONS:
                suggestions.add("æœ‰æ¡ä»¶åŒæ„ï¼Œéœ€è¦è¡¥å……ææ–™");
                suggestions.add("è®¾ç½®åç»­å…³æ³¨");
                break;

            case REJECTED:
                suggestions.add("æ‹’ç»ç”³è¯‰ï¼Œç»´æŒåŸè®°å½•");
                suggestions.add("ä¸å‘˜å·¥æ²Ÿé€šè§£é‡ŠåŸå› ");
                break;
        }

        decision.setSuggestions(suggestions);
    }
}
```

### 6. è®°å½•ä¿®æ­£é˜¶æ®µ

#### 6.1 è€ƒå‹¤è®°å½•ä¿®æ­£æœåŠ¡
```java
@Service
public class AttendanceRecordCorrectionService {

    @Resource
    private AttendanceRecordDao attendanceRecordDao;

    @Resource
    private CheckRecordDao checkRecordDao;

    @Resource
    private AttendanceStatisticsService statisticsService;

    /**
     * ä¿®æ­£è€ƒå‹¤è®°å½•
     */
    public CorrectionResult correctAttendanceRecord(AppealApplication appeal, ApprovalDecision decision) {
        CorrectionResult result = new CorrectionResult();

        try {
            // 1. éªŒè¯ä¿®æ­£æƒé™
            validateCorrectionPermission(decision);

            // 2. æ‰§è¡Œè®°å½•ä¿®æ­£
            switch (appeal.getAnomalyType()) {
                case LATE:
                case EARLY_LEAVE:
                    result = correctCheckInOutTime(appeal, decision);
                    break;

                case ABSENCE:
                    result = correctAbsenceRecord(appeal, decision);
                    break;

                case MISSING_CHECK:
                    result = addMissingCheckRecord(appeal, decision);
                    break;

                case OVERTIME_ERROR:
                    result = correctOvertimeRecord(appeal, decision);
                    break;

                default:
                    throw new IllegalArgumentException("æœªçŸ¥çš„å¼‚å¸¸ç±»å‹: " + appeal.getAnomalyType());
            }

            // 3. æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateAttendanceStatistics(appeal);

            // 4. è®°å½•ä¿®æ­£æ—¥å¿—
            logCorrection(appeal, decision, result);

        } catch (Exception e) {
            result.setSuccess(false);
            result.setMessage("è€ƒå‹¤è®°å½•ä¿®æ­£å¤±è´¥: " + e.getMessage());
        }

        return result;
    }

    private CorrectionResult correctCheckInOutTime(AppealApplication appeal, ApprovalDecision decision) {
        CorrectionResult result = new CorrectionResult();

        // 1. è·å–åŸå§‹æ‰“å¡è®°å½•
        CheckRecord originalRecord = checkRecordDao.selectById(appeal.getAnomalyRecordId());
        if (originalRecord == null) {
            throw new IllegalArgumentException("åŸå§‹æ‰“å¡è®°å½•ä¸å­˜åœ¨");
        }

        // 2. æ ¹æ®å®¡æ‰¹å†³å®šä¿®æ­£æ—¶é—´
        LocalDateTime correctedTime = calculateCorrectedTime(appeal, decision, originalRecord);

        // 3. æ›´æ–°æ‰“å¡è®°å½•
        originalRecord.setCorrectedTime(correctedTime);
        originalRecord.setCorrectionReason(decision.getReason());
        originalRecord.setCorrectedBy(decision.getApproverId());
        originalRecord.setCorrectionTime(LocalDateTime.now());

        int updated = checkRecordDao.updateById(originalRecord);
        result.setSuccess(updated > 0);

        // 4. é‡æ–°è®¡ç®—è€ƒå‹¤çŠ¶æ€
        recalculateAttendanceStatus(originalRecord.getUserId(), originalRecord.getCheckDate());

        if (result.isSuccess()) {
            result.setMessage("æ‰“å¡æ—¶é—´ä¿®æ­£æˆåŠŸ");
        } else {
            result.setMessage("æ‰“å¡æ—¶é—´ä¿®æ­£å¤±è´¥");
        }

        return result;
    }

    private LocalDateTime calculateCorrectedTime(AppealApplication appeal, ApprovalDecision decision, CheckRecord originalRecord) {
        // æ ¹æ®ç”³è¯‰ç±»å‹å’Œå®¡æ‰¹å†³å®šè®¡ç®—ä¿®æ­£æ—¶é—´
        switch (appeal.getAppealType()) {
            case TRANSPORT_ISSUE:
                // äº¤é€šé—®é¢˜ï¼Œä¿®æ­£ä¸ºæ­£å¸¸æ—¶é—´
                return getExpectedCheckTime(originalRecord.getCheckType(), originalRecord.getCheckDate());

            case SYSTEM_ERROR:
                // ç³»ç»Ÿé”™è¯¯ï¼Œæ ¹æ®å‘˜å·¥è¯´æ˜ä¿®æ­£
                return parseEmployeeProvidedTime(appeal.getDetailedDescription());

            case WORK_RELATED:
                // å·¥ä½œç›¸å…³ï¼Œå…è®¸ä¸€å®šçš„æ—¶é—´åå·®
                return adjustForWorkRelatedIssue(originalRecord, appeal);

            default:
                // å…¶ä»–æƒ…å†µï¼Œä¿æŒåŸæ—¶é—´æˆ–è½»å¾®è°ƒæ•´
                return originalRecord.getCheckTime();
        }
    }

    private void updateAttendanceStatistics(AppealApplication appeal) {
        // æ›´æ–°ä¸ªäººè€ƒå‹¤ç»Ÿè®¡
        statisticsService.updatePersonalStatistics(
            appeal.getUserId(),
            appeal.getAnomalyDate()
        );

        // æ›´æ–°éƒ¨é—¨è€ƒå‹¤ç»Ÿè®¡
        statisticsService.updateDepartmentStatistics(
            appeal.getDepartment(),
            appeal.getAnomalyDate()
        );

        // æ›´æ–°å…¨å…¬å¸è€ƒå‹¤ç»Ÿè®¡
        statisticsService.updateCompanyStatistics(appeal.getAnomalyDate());
    }

    @Transactional
    public void logCorrection(AppealApplication appeal, ApprovalDecision decision, CorrectionResult result) {
        AppealCorrectionLog log = AppealCorrectionLog.builder()
            .appealId(appeal.getId())
            .anomalyId(appeal.getAnomalyId())
            .correctionType(appeal.getAnomalyType())
            .originalValue(appeal.getOriginalValue())
            .correctedValue(result.getCorrectedValue())
            .approverId(decision.getApproverId())
            .correctionReason(decision.getReason())
            .correctionTime(LocalDateTime.now())
            .build();

        appealCorrectionLogDao.insert(log);
    }
}
```

### 7. æ•°æ®åˆ†æå’Œç›‘æ§

#### 7.1 ç”³è¯‰ç»Ÿè®¡åˆ†ææœåŠ¡
```java
@Service
public class AppealAnalyticsService {

    @Resource
    private AppealApplicationDao appealDao;

    @Resource
    private ApprovalDecisionDao decisionDao;

    /**
     * ç”Ÿæˆç”³è¯‰ç»Ÿè®¡æŠ¥å‘Š
     */
    public AppealStatisticsReport generateReport(LocalDateTime startTime, LocalDateTime endTime) {
        AppealStatisticsReport report = new AppealStatisticsReport();

        // 1. åŸºç¡€ç»Ÿè®¡æ•°æ®
        report.setTotalAppeals(appealDao.countAppeals(startTime, endTime));
        report.setApprovedAppeals(appealDao.countAppealsByStatus(startTime, endTime, "APPROVED"));
        report.setRejectedAppeals(appealDao.countAppealsByStatus(startTime, endTime, "REJECTED"));
        report.setPendingAppeals(appealDao.countAppealsByStatus(startTime, endTime, "PENDING"));

        // 2. ç”³è¯‰ç±»å‹åˆ†å¸ƒ
        report.setAnomalyTypeDistribution(appealDao.getAnomalyTypeDistribution(startTime, endTime));

        // 3. ç”³è¯‰åŸå› åˆ†å¸ƒ
        report.setAppealReasonDistribution(appealDao.getAppealReasonDistribution(startTime, endTime));

        // 4. éƒ¨é—¨ç”³è¯‰ç»Ÿè®¡
        report.setDepartmentStatistics(appealDao.getDepartmentStatistics(startTime, endTime));

        // 5. å®¡æ‰¹æ•ˆç‡ç»Ÿè®¡
        report.setApprovalEfficiency(calculateApprovalEfficiency(startTime, endTime));

        // 6. ç”³è¯‰è¶‹åŠ¿åˆ†æ
        report.setAppealTrend(analyzeAppealTrend(startTime, endTime));

        // 7. é«˜é¢‘ç”³è¯‰äººå‘˜åˆ†æ
        report.setFrequentAppealers(analyzeFrequentAppealers(startTime, endTime));

        return report;
    }

    /**
     * å®æ—¶ç›‘æ§ç”³è¯‰çŠ¶æ€
     */
    public AppealMonitor getRealTimeMonitor() {
        AppealMonitor monitor = new AppealMonitor();

        LocalDateTime now = LocalDateTime.now();
        LocalDateTime todayStart = now.toLocalDate().atStartOfDay();

        monitor.setTodayAppeals(appealDao.countAppeals(todayStart, now));
        monitor.setPendingApprovals(appealDao.countAppealsByStatus(todayStart, now, "PENDING"));
        monitor.setOverdueAppeals(appealDao.countOverdueAppeals());
        monitor.setAverageApprovalTime(calculateAverageApprovalTime(todayStart, now));

        return monitor;
    }

    private ApprovalEfficiency calculateApprovalEfficiency(LocalDateTime startTime, LocalDateTime endTime) {
        List<AppealApplication> completedAppeals = appealDao.selectCompletedAppeals(startTime, endTime);

        if (completedAppeals.isEmpty()) {
            return new ApprovalEfficiency();
        }

        long totalProcessingTime = 0;
        Map<String, Integer> approverStats = new HashMap<>();

        for (AppealApplication appeal : completedAppeals) {
            long processingTime = Duration.between(appeal.getCreateTime(), appeal.getApprovalTime()).toMinutes();
            totalProcessingTime += processingTime;

            String approverId = appeal.getApproverId();
            approverStats.put(approverId, approverStats.getOrDefault(approverId, 0) + 1);
        }

        ApprovalEfficiency efficiency = new ApprovalEfficiency();
        efficiency.setAverageProcessingTime(totalProcessingTime / completedAppeals.size());
        efficiency.setTotalAppeals(completedAppeals.size());
        efficiency.setApproverStatistics(approverStats);

        return efficiency;
    }
}
```

---

## ğŸ“± ç§»åŠ¨ç«¯åº”ç”¨

### ç”³è¯‰ç”³è¯·ç§»åŠ¨ç•Œé¢
```vue
<template>
  <div class="attendance-appeal">
    <van-nav-bar
      title="è€ƒå‹¤å¼‚å¸¸ç”³è¯‰"
      left-arrow
      @click-left="$router.go(-1)"
    />

    <!-- å¼‚å¸¸è®°å½•é€‰æ‹© -->
    <van-cell-group title="é€‰æ‹©å¼‚å¸¸è®°å½•">
      <van-cell
        :title="selectedAnomaly.description"
        :label="selectedAnomaly.date"
        :value="selectedAnomaly.deviation + 'åˆ†é’Ÿ'"
        is-link
        @click="showAnomalyPicker = true"
      />
    </van-cell-group>

    <!-- ç”³è¯‰è¡¨å• -->
    <van-form @submit="submitAppeal">
      <van-cell-group title="ç”³è¯‰ä¿¡æ¯">
        <van-field
          v-model="form.appealReason"
          label="ç”³è¯‰åŸå› "
          placeholder="è¯·é€‰æ‹©ç”³è¯‰åŸå› "
          readonly
          @click="showReasonPicker = true"
        />

        <van-field
          v-model="form.detailedDescription"
          label="è¯¦ç»†è¯´æ˜"
          type="textarea"
          placeholder="è¯·è¯¦ç»†æè¿°ç”³è¯‰åŸå› "
          :rules="[{ required: true, message: 'è¯·å¡«å†™è¯¦ç»†è¯´æ˜' }]"
        />

        <van-field
          label="æœŸæœ›å¤„ç†"
          placeholder="è¯·é€‰æ‹©æœŸæœ›å¤„ç†æ–¹å¼"
          readonly
          :value="expectedCorrectionText"
          @click="showCorrectionPicker = true"
        />
      </van-cell-group>

      <van-cell-group title="è¯æ˜ææ–™">
        <van-uploader
          v-model="attachments"
          :after-read="handleAttachmentUpload"
          :max-count="5"
          accept="image/*,.pdf"
        >
          <template #preview-cover>
            <div class="preview-cover">
              <span>{{ file.name }}</span>
            </div>
          </template>
        </van-uploader>
      </van-cell-group>

      <!-- æäº¤æŒ‰é’® -->
      <div class="submit-section">
        <van-button
          type="primary"
          block
          native-type="submit"
          :loading="submitting"
        >
          æäº¤ç”³è¯‰
        </van-button>
      </div>
    </van-form>

    <!-- å¼‚å¸¸è®°å½•é€‰æ‹©å™¨ -->
    <van-popup v-model="showAnomalyPicker" position="bottom">
      <van-picker
        show-toolbar
        :columns="anomalyColumns"
        @confirm="onAnomalyConfirm"
        @cancel="showAnomalyPicker = false"
      />
    </van-popup>

    <!-- ç”³è¯‰åŸå› é€‰æ‹©å™¨ -->
    <van-popup v-model="showReasonPicker" position="bottom">
      <van-picker
        show-toolbar
        :columns="reasonColumns"
        @confirm="onReasonConfirm"
        @cancel="showReasonPicker = false"
      />
    </van-popup>

    <!-- å¤„ç†æ–¹å¼é€‰æ‹©å™¨ -->
    <van-popup v-model="showCorrectionPicker" position="bottom">
      <van-picker
        show-toolbar
        :columns="correctionColumns"
        @confirm="onCorrectionConfirm"
        @cancel="showCorrectionPicker = false"
      />
    </van-popup>
  </div>
</template>

<script>
export default {
  name: 'AttendanceAppeal',

  data() {
    return {
      form: {
        appealReason: '',
        detailedDescription: '',
        expectedCorrection: ''
      },
      selectedAnomaly: {},
      attachments: [],
      showAnomalyPicker: false,
      showReasonPicker: false,
      showCorrectionPicker: false,
      anomalyColumns: [],
      reasonColumns: [
        { text: 'äº¤é€šé—®é¢˜', value: 'TRANSPORT_ISSUE' },
        { text: 'ç³»ç»Ÿé”™è¯¯', value: 'SYSTEM_ERROR' },
        { text: 'å·¥ä½œå®‰æ’', value: 'WORK_RELATED' },
        { text: 'ä¸ªäººåŸå› ', value: 'PERSONAL_REASON' }
      ],
      correctionColumns: [
        { text: 'ä¿®æ­£ä¸ºæ­£å¸¸', value: 'CORRECT_TO_NORMAL' },
        { text: 'è°ƒæ•´æ—¶é—´', value: 'ADJUST_TIME' },
        { text: 'åˆ é™¤å¼‚å¸¸', value: 'DELETE_ANOMALY' }
      ],
      submitting: false
    }
  },

  computed: {
    expectedCorrectionText() {
      const option = this.correctionColumns.find(col => col.value === this.form.expectedCorrection);
      return option ? option.text : '';
    }
  },

  async created() {
    await this.loadAnomalyRecords();
  },

  methods: {
    async loadAnomalyRecords() {
      const response = await this.$http.get('/api/attendance/anomalies');
      this.anomalyColumns = response.data.map(anomaly => ({
        text: `${anomaly.date} ${anomaly.type} ${anomaly.deviation}åˆ†é’Ÿ`,
        value: anomaly
      }));
    },

    async submitAppeal() {
      if (!this.validateForm()) {
        return;
      }

      this.submitting = true;

      try {
        const appeal = {
          anomalyId: this.selectedAnomaly.id,
          appealReason: this.form.appealReason,
          detailedDescription: this.form.detailedDescription,
          expectedCorrection: this.form.expectedCorrection,
          attachments: this.attachments
        };

        const response = await this.$http.post('/api/attendance/appeal', appeal);

        this.$toast.success('ç”³è¯‰æäº¤æˆåŠŸ');
        this.$router.push('/attendance/appeal/status/' + response.data.appealId);

      } catch (error) {
        this.$toast.fail('æäº¤å¤±è´¥: ' + error.message);
      } finally {
        this.submitting = false;
      }
    },

    validateForm() {
      if (!this.selectedAnomaly.id) {
        this.$toast('è¯·é€‰æ‹©å¼‚å¸¸è®°å½•');
        return false;
      }

      if (!this.form.appealReason) {
        this.$toast('è¯·é€‰æ‹©ç”³è¯‰åŸå› ');
        return false;
      }

      if (!this.form.detailedDescription.trim()) {
        this.$toast('è¯·å¡«å†™è¯¦ç»†è¯´æ˜');
        return false;
      }

      return true;
    }
  }
}
</script>
```

---

## ğŸ”§ ç³»ç»Ÿé›†æˆ

### ä¸å…¶ä»–ç³»ç»Ÿé›†æˆæ¶æ„
```mermaid
graph TB
    subgraph "è€ƒå‹¤ç®¡ç†ç³»ç»Ÿ"
        A[å¼‚å¸¸æ£€æµ‹]
        B[ç”³è¯‰ç®¡ç†]
        C[è®°å½•ä¿®æ­£]
    end

    subgraph "OAå·¥ä½œæµç³»ç»Ÿ"
        D[å®¡æ‰¹å¼•æ“]
        E[è§„åˆ™å¼•æ“]
        F[é€šçŸ¥æœåŠ¡]
    end

    subgraph "HRç³»ç»Ÿ"
        G[å‘˜å·¥ä¿¡æ¯]
        H[è€ƒå‹¤æ”¿ç­–]
        I[ç»Ÿè®¡åˆ†æ]
    end

    subgraph "é—¨ç¦ç³»ç»Ÿ"
        J[æ‰“å¡è®°å½•]
        K[è®¾å¤‡çŠ¶æ€]
        L[è®¿é—®æ—¥å¿—]
    end

    subgraph "æ¶ˆæ¯ç³»ç»Ÿ"
        M[çŸ­ä¿¡é€šçŸ¥]
        N[é‚®ä»¶é€šçŸ¥]
        O[ç³»ç»Ÿé€šçŸ¥]
    end

    A --> B
    B --> D
    C --> A

    D --> E
    E --> F
    F --> M
    F --> N
    F --> O

    G --> B
    H --> B
    I --> C

    J --> A
    K --> A
    L --> C
```

---

## ğŸ“Š ç›‘æ§å’Œå‘Šè­¦

### å…³é”®æŒ‡æ ‡ç›‘æ§
```java
@Component
public class AppealMonitoringMetrics {

    @Resource
    private MeterRegistry meterRegistry;

    // ç”³è¯‰æ•°é‡ç»Ÿè®¡
    public void recordAppeal(String type, String status) {
        meterRegistry.counter("attendance.appeals",
            "type", type,
            "status", status
        ).increment();
    }

    // å®¡æ‰¹æ—¶é—´ç»Ÿè®¡
    public void recordApprovalTime(String approverRole, Duration duration) {
        meterRegistry.timer("attendance.approval.duration",
            "role", approverRole
        ).record(duration);
    }

    // ä¿®æ­£ç»“æœç»Ÿè®¡
    public void recordCorrection(String originalType, String result) {
        meterRegistry.counter("attendance.corrections",
            "original_type", originalType,
            "result", result
        ).increment();
    }
}
```

---

## ğŸ¯ æ€»ç»“

è€ƒå‹¤å¼‚å¸¸ç”³è¯‰å®¡æ‰¹æµç¨‹é€šè¿‡æ ‡å‡†åŒ–ã€æ™ºèƒ½åŒ–çš„æ–¹å¼ï¼Œä¸ºå‘˜å·¥æä¾›äº†å…¬å¹³ã€é€æ˜çš„è€ƒå‹¤å¼‚å¸¸å¤„ç†æ¸ é“ã€‚è¯¥æµç¨‹å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **å¤šç»´åº¦æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«å„ç±»è€ƒå‹¤å¼‚å¸¸ï¼Œå‡å°‘æ¼æ£€
2. **æ™ºèƒ½å®¡æ ¸** - é€šè¿‡è§„åˆ™å¼•æ“å’Œæ”¿ç­–æ£€æŸ¥ï¼Œæé«˜å®¡æ ¸æ•ˆç‡
3. **åˆ†çº§å®¡æ‰¹** - æ ¹æ®å¼‚å¸¸ä¸¥é‡ç¨‹åº¦åˆ†é…ä¸åŒå®¡æ‰¹å±‚çº§
4. **å…¨ç¨‹è¿½æº¯** - å®Œæ•´è®°å½•ç”³è¯‰å¤„ç†è¿‡ç¨‹ï¼Œç¡®ä¿é€æ˜å…¬æ­£
5. **æ•°æ®é©±åŠ¨** - é€šè¿‡ç”³è¯‰æ•°æ®åˆ†æä¼˜åŒ–è€ƒå‹¤ç®¡ç†åˆ¶åº¦
6. **ç§»åŠ¨å‹å¥½** - æ”¯æŒç§»åŠ¨ç«¯ç”³è¯‰å’Œå®¡æ‰¹ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

è¯¥æµç¨‹ä¸ä»…ä¿éšœäº†å‘˜å·¥æƒç›Šï¼Œä¹Ÿæé«˜äº†è€ƒå‹¤ç®¡ç†çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ï¼Œä¸ºä¼ä¸šäººåŠ›èµ„æºç®¡ç†æä¾›äº†æœ‰åŠ›æ”¯æ’‘ã€‚

---

**æµç¨‹å›¾çŠ¶æ€**: âœ… å·²å®Œæˆ
**é€‚ç”¨ç‰ˆæœ¬**: IOE-DREAM v2.0.0+
**ç»´æŠ¤è´£ä»»äºº**: è€ƒå‹¤ç®¡ç†å›¢é˜Ÿ + OAå·¥ä½œæµå›¢é˜Ÿ
**æœ€åå®¡æ ¸**: 2025-12-16