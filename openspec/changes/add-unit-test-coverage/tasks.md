# Tasks: 提升单元测试覆盖率

## 1. 测试基础设施

- [ ] 1.1 配置JaCoCo测试覆盖率插件
- [ ] 1.2 配置测试报告生成
- [ ] 1.3 配置CI/CD测试流程
- [ ] 1.4 创建测试基类和工具类

## 2. consume-service测试

- [ ] 2.1 PaymentService单元测试
- [ ] 2.2 WechatPayService单元测试
- [ ] 2.3 AlipayPayService单元测试
- [ ] 2.4 ConsumeTransactionManager单元测试
- [ ] 2.5 AccountService单元测试
- [ ] 2.6 ConsumeReportService单元测试

## 3. access-service测试

- [ ] 3.1 AccessEventService单元测试
- [ ] 3.2 AccessDeviceService单元测试
- [ ] 3.3 AdvancedAccessControlService单元测试
- [ ] 3.4 AccessRecordController集成测试

## 4. visitor-service测试

- [ ] 4.1 VisitorAppointmentService单元测试
- [ ] 4.2 VisitorStatisticsService单元测试
- [ ] 4.3 VisitorExportService单元测试
- [ ] 4.4 VisitorMobileController集成测试

## 5. attendance-service测试

- [ ] 5.1 AttendanceRecordService单元测试
- [ ] 5.2 AttendanceScheduleService单元测试
- [ ] 5.3 AttendanceShiftService单元测试
- [ ] 5.4 AttendanceReportService单元测试

## 6. device-comm-service测试

- [ ] 6.1 AccessProtocolHandler单元测试
- [ ] 6.2 AttendanceProtocolHandler单元测试
- [ ] 6.3 ConsumeProtocolHandler单元测试
- [ ] 6.4 BiometricProtocolHandler单元测试
- [ ] 6.5 协议解析边界测试

## 7. video-service测试

- [ ] 7.1 VideoDeviceService单元测试
- [ ] 7.2 VideoPlayService单元测试
- [ ] 7.3 VideoDeviceManager单元测试
- [ ] 7.4 VideoStreamManager单元测试

## 8. gateway-service测试

- [ ] 8.1 JwtAuthenticationGlobalFilter单元测试
- [ ] 8.2 RouteManager单元测试
- [ ] 8.3 RateLimitManager单元测试

## 9. 集成测试

- [ ] 9.1 端到端API测试
- [ ] 9.2 跨服务调用测试
- [ ] 9.3 性能基准测试

## 10. 报告与文档

- [ ] 10.1 生成测试覆盖率报告
- [ ] 10.2 更新测试文档
- [ ] 10.3 配置覆盖率门槛检查
