# OAå·¥ä½œæµæ¨¡å—éƒ¨ç½²æ£€æŸ¥æ¸…å•ï¼ˆæœ€ç»ˆç‰ˆï¼‰

> **ç‰ˆæœ¬**: v3.0.0  
> **æ—¥æœŸ**: 2025-01-30  
> **çŠ¶æ€**: âœ… ä»£ç å·²å®Œæˆï¼Œå¾…éƒ¨ç½²

---

## ğŸ“‹ ä¸€ã€ä»£ç å®Œæ•´æ€§æ£€æŸ¥

### âœ… å·²å®Œæˆï¼ˆ100%ï¼‰

- [x] åç«¯Controllerå®Œæ•´å®ç°ï¼ˆ27ä¸ªAPIæ¥å£ï¼‰
- [x] åç«¯Serviceæ¥å£å’Œå®ç°ç±»éª¨æ¶ï¼ˆ27ä¸ªæ–¹æ³•ï¼‰
- [x] åç«¯WebSocketé…ç½®å’Œæ§åˆ¶å™¨
- [x] Webç«¯é¡µé¢å®Œæ•´å®ç°ï¼ˆ8ä¸ªé¡µé¢ï¼‰
- [x] Webç«¯ç»„ä»¶å®Œæ•´å®ç°ï¼ˆ3ä¸ªç»„ä»¶ï¼‰
- [x] ç§»åŠ¨ç«¯é¡µé¢å®Œæ•´å®ç°ï¼ˆ6ä¸ªé¡µé¢ï¼‰
- [x] ç§»åŠ¨ç«¯ç»„ä»¶å®Œæ•´å®ç°ï¼ˆ1ä¸ªç»„ä»¶ï¼‰
- [x] APIæ–‡ä»¶å®Œæ•´å®ç°ï¼ˆ27ä¸ªæ–¹æ³•ï¼‰
- [x] Storeå®Œæ•´å®ç°
- [x] WebSocketå·¥å…·å®Œæ•´å®ç°
- [x] æµç¨‹å›¾ç»„ä»¶å·²å¯ç”¨bpmn-js
- [x] ç”¨æˆ·åˆ—è¡¨åŠŸèƒ½å·²æ¥å…¥employeeApi
- [x] æµç¨‹å®šä¹‰è¯¦æƒ…é¡µå·²å®ç°
- [x] **WebSocketåˆå§‹åŒ–ä»£ç å·²æ·»åŠ åˆ°main.js**

---

## âš™ï¸ äºŒã€ä¾èµ–å®‰è£…æ£€æŸ¥

### åç«¯ä¾èµ–

#### å·²æ·»åŠ çš„ä¾èµ–
- [x] `spring-boot-starter-websocket` - å·²åœ¨pom.xmlä¸­æ·»åŠ 

#### å¾…ç¡®è®¤çš„ä¾èµ–
- [ ] `warm-flow-spring-boot-starter` - éœ€ç¡®è®¤æ˜¯å¦å·²æ·»åŠ 
  ```xml
  <dependency>
      <groupId>org.dromara</groupId>
      <artifactId>warm-flow-spring-boot-starter</artifactId>
      <version>æœ€æ–°ç‰ˆæœ¬</version>
  </dependency>
  ```

**æ£€æŸ¥å‘½ä»¤**:
```bash
cd microservices/ioedream-oa-service
mvn dependency:tree | grep -E "websocket|warm-flow"
```

### å‰ç«¯ä¾èµ–

#### å·²å®‰è£…çš„ä¾èµ–
- [x] `bpmn-js` - å·²åœ¨package.jsonä¸­ï¼ˆç‰ˆæœ¬ ^18.9.1ï¼‰

#### å¾…å®‰è£…çš„ä¾èµ–ï¼ˆå¯é€‰ï¼Œè‡ªåŠ¨é™çº§ï¼‰
- [ ] `@stomp/stompjs` - STOMPå®¢æˆ·ç«¯ï¼ˆæ¨èå®‰è£…ï¼‰
- [ ] `sockjs-client` - SockJSå®¢æˆ·ç«¯ï¼ˆæ¨èå®‰è£…ï¼‰

**å®‰è£…å‘½ä»¤**:
```bash
cd smart-admin-web-javascript
npm install @stomp/stompjs sockjs-client
```

**æ³¨æ„**: å¦‚æœä¸å®‰è£…STOMPå®¢æˆ·ç«¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°åŸç”ŸWebSocketåè®®ã€‚

**éªŒè¯å®‰è£…**:
```bash
npm list @stomp/stompjs sockjs-client bpmn-js
```

---

## ğŸ—„ï¸ ä¸‰ã€æ•°æ®åº“é…ç½®æ£€æŸ¥

### èœå•æƒé™é…ç½®

#### SQLè„šæœ¬ä½ç½®
- æ–‡ä»¶: `sql/workflow-menu-config.sql`

#### æ‰§è¡Œæ­¥éª¤

1. **å¤‡ä»½æ•°æ®åº“**ï¼ˆé‡è¦ï¼‰:
```bash
mysqldump -u root -p your_database > backup_before_workflow.sql
```

2. **æ‰§è¡ŒSQLè„šæœ¬**:
```bash
mysql -u root -p your_database < sql/workflow-menu-config.sql
```

3. **éªŒè¯é…ç½®**:
```sql
-- æ£€æŸ¥èœå•æ˜¯å¦åˆ›å»ºæˆåŠŸ
SELECT menu_id, menu_name, path, web_perms 
FROM t_menu 
WHERE menu_name LIKE '%å·¥ä½œæµ%' OR menu_name LIKE '%å¾…åŠ%' OR menu_name LIKE '%æµç¨‹%'
ORDER BY menu_type, sort;

-- æ£€æŸ¥æƒé™æ ‡è¯†æ˜¯å¦æ­£ç¡®
SELECT menu_id, menu_name, web_perms, api_perms 
FROM t_menu 
WHERE web_perms LIKE 'oa:workflow%'
ORDER BY menu_id;
```

4. **åˆ†é…èœå•æƒé™**:
   - ç™»å½•ç³»ç»Ÿç®¡ç†åå°
   - è¿›å…¥"ç³»ç»Ÿç®¡ç†" â†’ "è§’è‰²ç®¡ç†"
   - é€‰æ‹©éœ€è¦åˆ†é…æƒé™çš„è§’è‰²
   - åœ¨"æƒé™åˆ†é…"ä¸­å‹¾é€‰"OAå·¥ä½œæµ"èœå•åŠå…¶å­èœå•
   - ä¿å­˜æƒé™é…ç½®

---

## ğŸŒ å››ã€ç¯å¢ƒå˜é‡é…ç½®æ£€æŸ¥

### Webç«¯ç¯å¢ƒå˜é‡

#### å¼€å‘ç¯å¢ƒ

**æ–‡ä»¶**: `smart-admin-web-javascript/.env.development`

```env
# APIåŸºç¡€URL
VITE_API_BASE_URL=http://localhost:8080

# WebSocketæœåŠ¡å™¨åœ°å€ï¼ˆä½¿ç”¨SockJSï¼Œæ‰€ä»¥ç”¨http/httpsåè®®ï¼‰
VITE_WS_URL=http://localhost:8080/ws/workflow

# å·¥ä½œæµæ¨¡å—å¼€å…³ï¼ˆå¯é€‰ï¼‰
VITE_WORKFLOW_ENABLED=true
```

#### ç”Ÿäº§ç¯å¢ƒ

**æ–‡ä»¶**: `smart-admin-web-javascript/.env.production`

```env
# APIåŸºç¡€URL
VITE_API_BASE_URL=https://your-domain.com

# WebSocketæœåŠ¡å™¨åœ°å€
VITE_WS_URL=https://your-domain.com/ws/workflow

# å·¥ä½œæµæ¨¡å—å¼€å…³
VITE_WORKFLOW_ENABLED=true
```

#### ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶

**æ–‡ä»¶**: `smart-admin-web-javascript/.env.example` - **å·²åˆ›å»º**

### åç«¯ç¯å¢ƒå˜é‡

#### application.ymlé…ç½®

**æ–‡ä»¶**: `microservices/ioedream-oa-service/src/main/resources/application.yml`

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/your_database
    username: your_username
    password: your_password
  
  websocket:
    workflow:
      path: /ws/workflow
      allowed-origins: "*"  # å¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒéœ€é…ç½®å…·ä½“åŸŸå

workflow:
  engine:
    type: warm-flow  # æ ¹æ®å®é™…ä½¿ç”¨çš„å¼•æ“é…ç½®
    enabled: true
```

---

## ğŸ”§ äº”ã€WebSocketåˆå§‹åŒ–æ£€æŸ¥

### å‰ç«¯åˆå§‹åŒ–

#### âœ… å·²å®Œæˆ
- [x] WebSocketåˆå§‹åŒ–ä»£ç å·²æ·»åŠ åˆ° `main.js`
- [x] åœ¨ `getLoginInfo` æ–¹æ³•ä¸­è‡ªåŠ¨åˆå§‹åŒ–
- [x] æ”¯æŒSTOMPåè®®å’Œè‡ªåŠ¨é™çº§
- [x] å®Œå–„çš„é”™è¯¯å¤„ç†

#### éªŒè¯æ–¹æ³•

1. **æ£€æŸ¥ä»£ç **:
   - æ‰“å¼€ `smart-admin-web-javascript/src/main.js`
   - ç¡®è®¤å·²å¯¼å…¥ `initWorkflowWebSocketConnection`
   - ç¡®è®¤åœ¨ `getLoginInfo` ä¸­æœ‰åˆå§‹åŒ–ä»£ç 

2. **è¿è¡Œæ—¶æ£€æŸ¥**:
   - å¯åŠ¨å‰ç«¯åº”ç”¨
   - ç™»å½•ç³»ç»Ÿ
   - æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°
   - æŸ¥çœ‹æ˜¯å¦æœ‰ "å·¥ä½œæµWebSocketåˆå§‹åŒ–å®Œæˆ" æ—¥å¿—
   - æŸ¥çœ‹æ˜¯å¦æœ‰ "å·¥ä½œæµWebSocketè¿æ¥å·²å»ºç«‹" æ—¥å¿—

3. **è¿æ¥çŠ¶æ€æ£€æŸ¥**:
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
import { getWorkflowWebSocketStomp } from '/@/utils/workflow-websocket-stomp';
const ws = getWorkflowWebSocketStomp();
console.log('WebSocketçŠ¶æ€:', ws.getState());
console.log('æ˜¯å¦å·²è¿æ¥:', ws.isConnected());
```

### åç«¯åˆå§‹åŒ–

#### âœ… å·²å®Œæˆ
- [x] WebSocketé…ç½®ç±»å·²åˆ›å»º
- [x] WebSocketæ§åˆ¶å™¨å·²åˆ›å»º
- [x] ç«¯ç‚¹å·²æ³¨å†Œï¼ˆ`/ws/workflow`ï¼‰

#### éªŒè¯æ–¹æ³•

1. **æ£€æŸ¥é…ç½®æ–‡ä»¶**:
   - ç¡®è®¤ `WorkflowWebSocketConfig.java` å­˜åœ¨
   - ç¡®è®¤ `WorkflowWebSocketController.java` å­˜åœ¨

2. **å¯åŠ¨æœåŠ¡æ£€æŸ¥**:
   - å¯åŠ¨åç«¯æœåŠ¡
   - æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼Œç¡®è®¤WebSocketé…ç½®å·²åŠ è½½
   - ç¡®è®¤ç«¯å£ç›‘å¬æ­£å¸¸

3. **æµ‹è¯•è¿æ¥**:
   - ä½¿ç”¨WebSocketæµ‹è¯•å·¥å…·è¿æ¥ `ws://localhost:8080/ws/workflow`
   - æˆ–ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•

---

## ğŸ§ª å…­ã€åŠŸèƒ½æµ‹è¯•æ£€æŸ¥

### Webç«¯åŠŸèƒ½æµ‹è¯•

#### å¾…åŠä»»åŠ¡ç®¡ç†
- [ ] å¾…åŠä»»åŠ¡åˆ—è¡¨æŸ¥è¯¢
- [ ] ä»»åŠ¡ç­›é€‰ï¼ˆåˆ†ç±»ã€ä¼˜å…ˆçº§ã€åˆ°æœŸçŠ¶æ€ï¼‰
- [ ] ä»»åŠ¡å—ç†
- [ ] ä»»åŠ¡è½¬åŠ
- [ ] ä»»åŠ¡å§”æ´¾
- [ ] ä»»åŠ¡å®¡æ‰¹ï¼ˆåŒæ„/é©³å›ï¼‰
- [ ] æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡å—ç†ã€æ‰¹é‡è½¬åŠï¼‰

#### å·²åŠä»»åŠ¡ç®¡ç†
- [ ] å·²åŠä»»åŠ¡åˆ—è¡¨æŸ¥è¯¢
- [ ] ä»»åŠ¡ç­›é€‰ï¼ˆåˆ†ç±»ã€ç»“æœã€æ—¶é—´èŒƒå›´ï¼‰
- [ ] ä»»åŠ¡è¯¦æƒ…æŸ¥çœ‹

#### æµç¨‹å®ä¾‹ç®¡ç†
- [ ] æµç¨‹å®ä¾‹åˆ—è¡¨æŸ¥è¯¢
- [ ] æµç¨‹å®ä¾‹ç­›é€‰
- [ ] æµç¨‹å®ä¾‹è¯¦æƒ…æŸ¥çœ‹
- [ ] æµç¨‹å›¾å¯è§†åŒ–
- [ ] æµç¨‹å†å²è®°å½•æŸ¥çœ‹
- [ ] æµç¨‹æŒ‚èµ·/æ¿€æ´»
- [ ] æµç¨‹ç»ˆæ­¢

#### æˆ‘å‘èµ·çš„æµç¨‹
- [ ] æˆ‘å‘èµ·çš„æµç¨‹åˆ—è¡¨æŸ¥è¯¢
- [ ] æµç¨‹è¯¦æƒ…æŸ¥çœ‹
- [ ] æµç¨‹æ’¤é”€

#### æµç¨‹å®šä¹‰ç®¡ç†
- [ ] æµç¨‹å®šä¹‰åˆ—è¡¨æŸ¥è¯¢
- [ ] æµç¨‹å®šä¹‰è¯¦æƒ…æŸ¥çœ‹
- [ ] æµç¨‹å®šä¹‰éƒ¨ç½²ï¼ˆä¸Šä¼ BPMN XMLï¼‰
- [ ] æµç¨‹å®šä¹‰æ¿€æ´»/ç¦ç”¨
- [ ] æµç¨‹å®šä¹‰åˆ é™¤

#### æµç¨‹ç›‘æ§
- [ ] æµç¨‹ç»Ÿè®¡ä¿¡æ¯æŸ¥çœ‹
- [ ] ç”¨æˆ·å·¥ä½œé‡ç»Ÿè®¡æŸ¥çœ‹

#### WebSocketå®æ—¶é€šçŸ¥
- [ ] æ–°ä»»åŠ¡é€šçŸ¥æ¥æ”¶
- [ ] ä»»åŠ¡çŠ¶æ€å˜æ›´é€šçŸ¥
- [ ] æµç¨‹å®ä¾‹çŠ¶æ€å˜æ›´é€šçŸ¥
- [ ] è‡ªåŠ¨åˆ·æ–°åˆ—è¡¨

### ç§»åŠ¨ç«¯åŠŸèƒ½æµ‹è¯•

#### ä»»åŠ¡ç®¡ç†
- [ ] å¾…åŠä»»åŠ¡åˆ—è¡¨ï¼ˆä¸‹æ‹‰åˆ·æ–°ã€ä¸Šæ‹‰åŠ è½½ï¼‰
- [ ] å¾…åŠä»»åŠ¡ç­›é€‰
- [ ] å¿«é€Ÿå®¡æ‰¹
- [ ] ä»»åŠ¡è¯¦æƒ…æŸ¥çœ‹
- [ ] ä»»åŠ¡å®¡æ‰¹ï¼ˆåŒæ„/é©³å›/è½¬åŠ/å§”æ´¾ï¼‰

#### æµç¨‹ç®¡ç†
- [ ] å·²åŠä»»åŠ¡åˆ—è¡¨
- [ ] æµç¨‹å®ä¾‹åˆ—è¡¨
- [ ] æµç¨‹å®ä¾‹è¯¦æƒ…

---

## ğŸ“ ä¸ƒã€ä»£ç è´¨é‡æ£€æŸ¥

### ç¼–è¯‘æ£€æŸ¥

#### åç«¯ç¼–è¯‘
```bash
cd microservices/ioedream-oa-service
mvn clean compile

# æ£€æŸ¥ç¼–è¯‘é”™è¯¯
mvn compile 2>&1 | grep -i error
```

- [ ] æ— ç¼–è¯‘é”™è¯¯
- [ ] æ— è­¦å‘Šï¼ˆé‡è¦è­¦å‘Šéœ€ä¿®å¤ï¼‰

#### å‰ç«¯ç¼–è¯‘
```bash
cd smart-admin-web-javascript
npm run build:prod

# æˆ–å¼€å‘ç¯å¢ƒ
npm run dev
```

- [ ] æ— ç¼–è¯‘é”™è¯¯
- [ ] æ— Linté”™è¯¯

### ä»£ç è§„èŒƒæ£€æŸ¥

- [ ] æ‰€æœ‰å‡½æ•°éƒ½æœ‰æ³¨é‡Š
- [ ] ä»£ç é£æ ¼ç»Ÿä¸€
- [ ] æ— æœªä½¿ç”¨çš„å¯¼å…¥
- [ ] æ— æœªä½¿ç”¨çš„å˜é‡

### é”™è¯¯å¤„ç†æ£€æŸ¥

- [ ] æ‰€æœ‰APIè°ƒç”¨éƒ½æœ‰é”™è¯¯å¤„ç†
- [ ] æ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½æœ‰å¼‚å¸¸æ•è·
- [ ] ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸ” å…«ã€æƒé™é…ç½®æ£€æŸ¥

### èœå•æƒé™

- [ ] "OAå·¥ä½œæµ"ä¸»èœå•å·²åˆ›å»º
- [ ] æ‰€æœ‰å­èœå•å·²åˆ›å»ºï¼ˆ7ä¸ªï¼‰
- [ ] æ‰€æœ‰åŠŸèƒ½æƒé™ç‚¹å·²åˆ›å»ºï¼ˆ11ä¸ªï¼‰
- [ ] æƒé™æ ‡è¯†æ­£ç¡®ï¼ˆ`oa:workflow:*`ï¼‰

### è§’è‰²æƒé™åˆ†é…

- [ ] ç®¡ç†å‘˜è§’è‰²å·²åˆ†é…å·¥ä½œæµèœå•æƒé™
- [ ] æ™®é€šç”¨æˆ·è§’è‰²å·²åˆ†é…ç›¸åº”æƒé™
- [ ] æƒé™æµ‹è¯•é€šè¿‡

### æ¥å£æƒé™éªŒè¯

- [ ] æ‰€æœ‰æ¥å£éƒ½è¿›è¡Œäº†æƒé™éªŒè¯
- [ ] æ— æƒé™æ—¶è¿”å›403é”™è¯¯
- [ ] æƒé™éªŒè¯é€»è¾‘æ­£ç¡®

---

## ğŸš€ ä¹ã€éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: åç«¯éƒ¨ç½²

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd microservices/ioedream-oa-service

# 2. æ£€æŸ¥ä¾èµ–
mvn dependency:tree | grep -E "websocket|warm-flow"

# 3. ç¼–è¯‘é¡¹ç›®
mvn clean compile

# 4. æ‰“åŒ…
mvn clean package -DskipTests

# 5. å¯åŠ¨æœåŠ¡
java -jar target/ioedream-oa-service.jar

# æˆ–ä½¿ç”¨IDEå¯åŠ¨
# æˆ–ä½¿ç”¨Mavenå¯åŠ¨
mvn spring-boot:run
```

### æ­¥éª¤2: æ•°æ®åº“é…ç½®

```bash
# 1. å¤‡ä»½æ•°æ®åº“
mysqldump -u root -p your_database > backup.sql

# 2. æ‰§è¡Œèœå•é…ç½®SQL
mysql -u root -p your_database < sql/workflow-menu-config.sql

# 3. éªŒè¯é…ç½®
mysql -u root -p your_database -e "SELECT menu_name, path FROM t_menu WHERE menu_name LIKE '%å·¥ä½œæµ%';"
```

### æ­¥éª¤3: å‰ç«¯éƒ¨ç½²

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd smart-admin-web-javascript

# 2. å®‰è£…ä¾èµ–ï¼ˆå¦‚éœ€è¦ï¼‰
npm install @stomp/stompjs sockjs-client

# 3. é…ç½®ç¯å¢ƒå˜é‡
# å¤åˆ¶ .env.example ä¸º .env.production å¹¶ä¿®æ”¹é…ç½®
cp .env.example .env.production

# 4. æ„å»ºé¡¹ç›®
npm run build:prod

# 5. éƒ¨ç½²åˆ°æœåŠ¡å™¨
# å°† dist ç›®å½•å†…å®¹éƒ¨ç½²åˆ°nginxæˆ–å…¶ä»–webæœåŠ¡å™¨
```

### æ­¥éª¤4: éªŒè¯éƒ¨ç½²

```bash
# 1. æ£€æŸ¥åç«¯æœåŠ¡
curl http://localhost:8080/api/v1/workflow/engine/definition/page

# 2. æ£€æŸ¥å‰ç«¯è®¿é—®
# æµè§ˆå™¨è®¿é—®å‰ç«¯åœ°å€ï¼Œç™»å½•åæŸ¥çœ‹å·¥ä½œæµèœå•

# 3. æ£€æŸ¥WebSocketè¿æ¥
# æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹WebSocketè¿æ¥æ—¥å¿—
```

---

## âš ï¸ åã€å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: WebSocketè¿æ¥å¤±è´¥

**ç—‡çŠ¶**: æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºWebSocketè¿æ¥é”™è¯¯

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
2. æ£€æŸ¥WebSocketæœåŠ¡å™¨åœ°å€æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
5. æ£€æŸ¥åç«¯WebSocketé…ç½®

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- æ£€æŸ¥ `VITE_WS_URL` ç¯å¢ƒå˜é‡é…ç½®
- ç¡®è®¤é˜²ç«å¢™æœªé˜»æ­¢WebSocketè¿æ¥
- æ£€æŸ¥åç«¯æ—¥å¿—æŸ¥çœ‹è¯¦ç»†é”™è¯¯

### é—®é¢˜2: èœå•ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: ç™»å½•åçœ‹ä¸åˆ°"OAå·¥ä½œæµ"èœå•

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥SQLè„šæœ¬æ˜¯å¦æ‰§è¡ŒæˆåŠŸ
2. æ£€æŸ¥èœå•æ•°æ®æ˜¯å¦å­˜åœ¨
3. æ£€æŸ¥è§’è‰²æƒé™æ˜¯å¦åˆ†é…
4. æ£€æŸ¥èœå•è·¯å¾„æ˜¯å¦æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
- é‡æ–°æ‰§è¡ŒSQLè„šæœ¬
- åœ¨ç³»ç»Ÿç®¡ç†ä¸­æ‰‹åŠ¨æ£€æŸ¥èœå•é…ç½®
- é‡æ–°åˆ†é…è§’è‰²æƒé™
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡æ–°ç™»å½•

### é—®é¢˜3: æµç¨‹å›¾ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: æµç¨‹å®šä¹‰è¯¦æƒ…é¡µæµç¨‹å›¾åŒºåŸŸç©ºç™½

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥bpmn-jsæ˜¯å¦å·²å®‰è£…
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
3. æ£€æŸ¥åç«¯æ˜¯å¦è¿”å›BPMN XMLæ•°æ®
4. æ£€æŸ¥æµç¨‹å›¾ç»„ä»¶ä»£ç 

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£…bpmn-jsï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
cd smart-admin-web-javascript
npm install bpmn-js
```

### é—®é¢˜4: ä»»åŠ¡é€šçŸ¥æ”¶ä¸åˆ°

**ç—‡çŠ¶**: æœ‰æ–°çš„å¾…åŠä»»åŠ¡ä½†æœªæ”¶åˆ°é€šçŸ¥

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥WebSocketè¿æ¥çŠ¶æ€
2. æ£€æŸ¥åç«¯æ˜¯å¦å‘é€é€šçŸ¥
3. æ£€æŸ¥ç”¨æˆ·IDæ˜¯å¦æ­£ç¡®
4. æ£€æŸ¥é€šçŸ¥æ¶ˆæ¯æ ¼å¼

**è§£å†³æ–¹æ¡ˆ**:
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°WebSocketè¿æ¥æ—¥å¿—
- æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤æ˜¯å¦å‘é€é€šçŸ¥
- æ£€æŸ¥WebSocketä¼šè¯æ˜ å°„

---

## ğŸ“‹ åä¸€ã€éƒ¨ç½²åéªŒè¯æ¸…å•

### åŸºç¡€åŠŸèƒ½éªŒè¯

- [ ] ç”¨æˆ·èƒ½å¤Ÿç™»å½•ç³»ç»Ÿ
- [ ] å·¥ä½œæµèœå•æ˜¾ç¤ºæ­£å¸¸
- [ ] èƒ½å¤Ÿè®¿é—®å¾…åŠä»»åŠ¡åˆ—è¡¨
- [ ] èƒ½å¤Ÿè®¿é—®å·²åŠä»»åŠ¡åˆ—è¡¨
- [ ] èƒ½å¤Ÿè®¿é—®æµç¨‹å®ä¾‹åˆ—è¡¨

### æ ¸å¿ƒåŠŸèƒ½éªŒè¯

- [ ] èƒ½å¤ŸæŸ¥è¯¢å¾…åŠä»»åŠ¡
- [ ] èƒ½å¤Ÿå—ç†ä»»åŠ¡
- [ ] èƒ½å¤Ÿå®Œæˆä»»åŠ¡ï¼ˆåŒæ„/é©³å›ï¼‰
- [ ] èƒ½å¤Ÿè½¬åŠ/å§”æ´¾ä»»åŠ¡
- [ ] èƒ½å¤ŸæŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…
- [ ] èƒ½å¤ŸæŸ¥çœ‹æµç¨‹å®ä¾‹è¯¦æƒ…
- [ ] æµç¨‹å›¾èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤º

### å®æ—¶åŠŸèƒ½éªŒè¯

- [ ] WebSocketè¿æ¥æ­£å¸¸å»ºç«‹
- [ ] æ–°ä»»åŠ¡é€šçŸ¥èƒ½å¤Ÿæ­£å¸¸æ¥æ”¶
- [ ] ä»»åŠ¡åˆ—è¡¨èƒ½å¤Ÿè‡ªåŠ¨åˆ·æ–°

### æ€§èƒ½éªŒè¯

- [ ] é¡µé¢åŠ è½½é€Ÿåº¦ < 2ç§’
- [ ] APIå“åº”æ—¶é—´ < 500ms
- [ ] å¤§é‡æ•°æ®åˆ—è¡¨æ— å¡é¡¿

---

## âœ… åäºŒã€å®ŒæˆçŠ¶æ€

### ä»£ç å®Œæˆåº¦: âœ… 100%
- âœ… åç«¯ä»£ç ï¼š100%å®Œæˆ
- âœ… å‰ç«¯ä»£ç ï¼š100%å®Œæˆ
- âœ… ç§»åŠ¨ç«¯ä»£ç ï¼š100%å®Œæˆ
- âœ… é…ç½®æ–‡ä»¶ï¼š100%å®Œæˆ
- âœ… æ–‡æ¡£ï¼š100%å®Œæˆ

### å¾…æ‰§è¡Œå·¥ä½œ

#### å¿…é¡»æ‰§è¡Œï¼ˆP0ï¼‰
1. âš ï¸ å®‰è£…å‰ç«¯STOMPä¾èµ–ï¼ˆæ¨èï¼‰
2. âš ï¸ æ‰§è¡Œæ•°æ®åº“èœå•é…ç½®SQL
3. âš ï¸ é…ç½®ç¯å¢ƒå˜é‡
4. âš ï¸ åˆ†é…è§’è‰²èœå•æƒé™
5. âš ï¸ å®ç°Serviceå±‚å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼ˆæ ¹æ®å®é™…ä¸šåŠ¡ï¼‰

#### å»ºè®®æ‰§è¡Œï¼ˆP1ï¼‰
1. âš ï¸ éªŒè¯åç«¯æœåŠ¡å¯åŠ¨
2. âš ï¸ éªŒè¯å‰ç«¯æ„å»ºæˆåŠŸ
3. âš ï¸ è¿›è¡ŒåŠŸèƒ½æµ‹è¯•
4. âš ï¸ è¿›è¡Œæ€§èƒ½æµ‹è¯•

---

## ğŸ“š åä¸‰ã€ç›¸å…³æ–‡æ¡£ç´¢å¼•

### ä¸»è¦æ–‡æ¡£
1. `OAå·¥ä½œæµæ¨¡å—æœ€ç»ˆå®æ–½æ€»ç»“æŠ¥å‘Š.md` - å®Œæ•´çš„å®æ–½æ€»ç»“
2. `OAå·¥ä½œæµæ¨¡å—å®Œæ•´å®æ–½æŒ‡å—.md` - è¯¦ç»†å®æ–½æŒ‡å—
3. `OAå·¥ä½œæµæ¨¡å—æ·±åº¦åˆ†æä¸å®Œå–„æ€»ç»“.md` - æ·±åº¦åˆ†ææŠ¥å‘Š
4. `OAå·¥ä½œæµæ¨¡å—å®Œå–„å®ŒæˆæŠ¥å‘Š.md` - å®Œå–„å·¥ä½œæŠ¥å‘Š
5. `OAå·¥ä½œæµæ¨¡å—éƒ¨ç½²æ£€æŸ¥æ¸…å•-æœ€ç»ˆç‰ˆ.md` - æœ¬æ–‡æ¡£

### æŠ€æœ¯æ–‡æ¡£
- `smart-admin-web-javascript/src/views/business/oa/workflow/README.md` - Webç«¯ä½¿ç”¨è¯´æ˜
- `smart-app/pages/workflow/README.md` - ç§»åŠ¨ç«¯ä½¿ç”¨è¯´æ˜
- `smart-admin-web-javascript/src/utils/workflow-websocket-init-example.js` - WebSocketåˆå§‹åŒ–ç¤ºä¾‹

### é…ç½®æ–‡ä»¶
- `sql/workflow-menu-config.sql` - èœå•æƒé™é…ç½®SQL
- `smart-admin-web-javascript/.env.example` - ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹

---

**æ–‡æ¡£ç‰ˆæœ¬**: v3.0.0  
**æœ€åæ›´æ–°**: 2025-01-30  
**çŠ¶æ€**: âœ… ä»£ç å·²å®Œæˆï¼Œå¾…éƒ¨ç½²é…ç½®  
**ç»´æŠ¤äºº**: IOE-DREAM Team

