server:
  port: 8097

spring:
  application:
    name: ioedream-monitor-service
  profiles:
    active: dev
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:ioedream_monitor;DB_CLOSE_DELAY=-1;MODE=MySQL;DATABASE_TO_LOWER=TRUE
    username: sa
    password: ""
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
  h2:
    console:
      enabled: true
      path: /h2-console
  jackson:
    time-zone: Asia/Shanghai
    date-format: yyyy-MM-dd HH:mm:ss

# MyBatis Plus配置
mybatis-plus:
  mapper-locations: classpath:mapper/**/*.xml
  type-aliases-package: net.lab1024.sa.monitor.**.domain.entity
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl
  global-config:
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-field: deleted_flag
      logic-delete-value: 1
      logic-not-delete-value: 0

# 服务发现配置
cloud:
  nacos:
    discovery:
      server-addr: localhost:8848
      namespace: dev
      group: IOE-DREAM
      service: ioedream-monitor-service

# Actuator配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus,caches
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true

# WebSocket配置
websocket:
  enabled: true
  port: 8099

# 监控配置
monitor:
  # 数据收集间隔(秒)
  collect-interval: 30
  # 数据保留天数
  retention-days: 90
  # 告警检查间隔(秒)
  alert-check-interval: 60
  # 系统资源监控
  resource:
    cpu-warning: 80
    cpu-critical: 95
    memory-warning: 80
    memory-critical: 95
    disk-warning: 85
    disk-critical: 95

# 日志配置
logging:
  level:
    net.lab1024: DEBUG
    org.springframework: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

# 应用配置
app:
  name: "IOE-DREAM 监控服务"
  version: "1.0.0"
  description: "企业级系统监控和告警服务"

---
# 开发环境配置
spring:
  config:
    activate:
      on-profile: dev
  h2:
    console:
      enabled: true

logging:
  level:
    root: INFO
    net.lab1024: DEBUG

---
# 生产环境配置
spring:
  config:
    activate:
      on-profile: prod
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/ioedream_monitor?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false
    username: ioedream
    password: ioedream123
  h2:
    console:
      enabled: false

logging:
  level:
    root: WARN
    net.lab1024: INFO