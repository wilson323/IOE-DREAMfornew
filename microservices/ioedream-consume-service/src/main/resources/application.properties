# ============================================================
# IOE-DREAM Consume Service 配置文件
#
# Properties格式避免YAML编码问题
# ============================================================

# 服务基本信息
spring.application.name=ioedream-consume-service
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}
# Spring Boot 2.4+ 要求显式声明配置导入
# 升级到Spring Cloud Alibaba 2025.0.0.0后，使用optional前缀允许配置中心可选
spring.config.import=optional:nacos:ioedream-consume-service-docker.yaml

# 服务器配置
server.port=8094
server.servlet.context-path=/
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Nacos配置
spring.cloud.nacos.discovery.server-addr=${NACOS_SERVER_ADDR:127.0.0.1:8848}
spring.cloud.nacos.discovery.namespace=${NACOS_NAMESPACE:dev}
spring.cloud.nacos.discovery.group=${NACOS_GROUP:IOE-DREAM}
spring.cloud.nacos.discovery.username=${NACOS_USERNAME:nacos}
spring.cloud.nacos.discovery.password=${NACOS_PASSWORD}
spring.cloud.nacos.discovery.enabled=true
spring.cloud.nacos.discovery.register-enabled=true

spring.cloud.nacos.config.server-addr=${NACOS_SERVER_ADDR:127.0.0.1:8848}
spring.cloud.nacos.config.namespace=${NACOS_NAMESPACE:dev}
spring.cloud.nacos.config.group=${NACOS_GROUP:IOE-DREAM}
spring.cloud.nacos.config.file-extension=yaml
spring.cloud.nacos.config.enabled=true
spring.cloud.nacos.config.import-check.enabled=true

# MyBatis-Plus配置
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.slf4j.Slf4jImpl
mybatis-plus.configuration.cache-enabled=true
mybatis-plus.mapper-locations=classpath*:/mapper/**/*.xml
mybatis-plus.type-aliases-package=net.lab1024.sa.common.entity,net.lab1024.sa.common.domain.entity,net.lab1024.sa.consume.entity

# 日志配置
logging.level.root=INFO
logging.level."net.lab1024.sa"=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n

# Actuator监控配置
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=when-authorized
management.prometheus.metrics.export.enabled=true
