# ============================================================
# æ”¯ä»˜æœåŠ¡é…ç½®æ–‡ä»¶
#
# @Author:    IOE-DREAM Team
# @Date:      2025-12-05
# @Copyright  IOE-DREAMæ™ºæ…§å›­åŒºä¸€å¡é€šç®¡ç†å¹³å°
#
# é…ç½®è¯´æ˜ï¼š
# - å¾®ä¿¡æ”¯ä»˜é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½®çœŸå®å€¼ï¼‰
# - æ”¯ä»˜å®é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½®çœŸå®å€¼ï¼‰
# - æ‰€æœ‰æ•æ„Ÿä¿¡æ¯å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡æˆ–Nacosé…ç½®
# ============================================================

# ==================== å¾®ä¿¡æ”¯ä»˜é…ç½® ====================
wechat:
  pay:
    # æ˜¯å¦å¯ç”¨å¾®ä¿¡æ”¯ä»˜ï¼ˆå¼€å‘ç¯å¢ƒé»˜è®¤falseï¼Œç”Ÿäº§ç¯å¢ƒè®¾ä¸ºtrueï¼‰
    enabled: ${WECHAT_PAY_ENABLED:false}

    # å¾®ä¿¡å…¬ä¼—å·/å°ç¨‹åºAppID
    app-id: ${WECHAT_APP_ID:}

    # å¾®ä¿¡æ”¯ä»˜å•†æˆ·å·
    mch-id: ${WECHAT_MCH_ID:}

    # å¾®ä¿¡æ”¯ä»˜APIå¯†é’¥ï¼ˆAPI v3å¯†é’¥ï¼‰
    api-key: ${WECHAT_API_KEY:}

    # å¾®ä¿¡æ”¯ä»˜è¯ä¹¦è·¯å¾„ï¼ˆç”¨äºé€€æ¬¾ç­‰æ•æ„Ÿæ“ä½œï¼‰
    cert-path: ${WECHAT_CERT_PATH:/opt/cert/apiclient_cert.p12}

    # æ”¯ä»˜å›è°ƒé€šçŸ¥URL
    notify-url: ${WECHAT_NOTIFY_URL:https://api.ioedream.com/api/v1/consume/payment/wechat/notify}

    # API v3è¯ä¹¦åºåˆ—å·
    cert-serial-no: ${WECHAT_CERT_SERIAL_NO:}

    # API v3ç§é’¥è·¯å¾„
    private-key-path: ${WECHAT_PRIVATE_KEY_PATH:/opt/cert/apiclient_key.pem}

# ==================== æ”¯ä»˜å®é…ç½® ====================
alipay:
  # æ˜¯å¦å¯ç”¨æ”¯ä»˜å®æ”¯ä»˜
  enabled: ${ALIPAY_ENABLED:false}

  # æ”¯ä»˜å®åº”ç”¨AppID
  app-id: ${ALIPAY_APP_ID:}

  # æ”¯ä»˜å®åº”ç”¨ç§é’¥ï¼ˆRSA2ç§é’¥ï¼ŒPKCS8æ ¼å¼ï¼‰
  private-key: ${ALIPAY_PRIVATE_KEY:}

  # æ”¯ä»˜å®å…¬é’¥ï¼ˆRSA2å…¬é’¥ï¼Œä»æ”¯ä»˜å®å¼€æ”¾å¹³å°è·å–ï¼‰
  public-key: ${ALIPAY_PUBLIC_KEY:}

  # æ”¯ä»˜å®ç½‘å…³åœ°å€
  gateway-url: ${ALIPAY_GATEWAY_URL:https://openapi.alipay.com/gateway.do}

  # æ”¯ä»˜å›è°ƒé€šçŸ¥URL
  notify-url: ${ALIPAY_NOTIFY_URL:https://api.ioedream.com/api/v1/consume/payment/alipay/notify}

  # ç­¾åç±»å‹ï¼ˆRSA2ï¼‰
  sign-type: RSA2

  # å­—ç¬¦é›†
  charset: UTF-8

  # æ•°æ®æ ¼å¼
  format: json

# ==================== æ”¯ä»˜ä¸šåŠ¡é…ç½® ====================
payment:
  # è®¢å•è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  order-timeout: 30

  # é€€æ¬¾è¶…æ—¶æ—¶é—´ï¼ˆå¤©ï¼‰
  refund-timeout: 15

  # æœ€å°æ”¯ä»˜é‡‘é¢ï¼ˆå…ƒï¼‰
  min-amount: 0.01

  # æœ€å¤§æ”¯ä»˜é‡‘é¢ï¼ˆå…ƒï¼‰
  max-amount: 10000.00

  # æ˜¯å¦å…è®¸éƒ¨åˆ†é€€æ¬¾
  allow-partial-refund: true

  # è‡ªåŠ¨å…³é—­æœªæ”¯ä»˜è®¢å•ï¼ˆåˆ†é’Ÿï¼‰
  auto-close-timeout: 30

# ==================== å¼€å‘ç¯å¢ƒé…ç½®ç¤ºä¾‹ ====================
---
spring:
  config:
    activate:
      on-profile: dev

wechat:
  pay:
    enabled: false  # å¼€å‘ç¯å¢ƒç¦ç”¨
    app-id: wx1234567890abcdef
    mch-id: 1234567890
    # å¼€å‘ç¯å¢ƒä½¿ç”¨æ²™ç®±ç¯å¢ƒæˆ–æ¨¡æ‹Ÿæ•°æ®

alipay:
  enabled: false  # å¼€å‘ç¯å¢ƒç¦ç”¨
  app-id: 2021000000000000
  gateway-url: https://openapi.alipaydev.com/gateway.do  # æ²™ç®±ç¯å¢ƒ

# ==================== ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹ ====================
---
spring:
  config:
    activate:
      on-profile: prod

# ç”Ÿäº§ç¯å¢ƒé…ç½®é€šè¿‡ç¯å¢ƒå˜é‡æˆ–NacosåŠ¨æ€é…ç½®
# ç¦æ­¢åœ¨é…ç½®æ–‡ä»¶ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼

wechat:
  pay:
    enabled: true
    # ä»¥ä¸‹é…ç½®å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥
    # WECHAT_APP_ID=wx_real_app_id
    # WECHAT_MCH_ID=real_mch_id
    # WECHAT_API_KEY=real_api_key (32ä½)
    # WECHAT_CERT_SERIAL_NO=real_serial_no
    # WECHAT_PRIVATE_KEY_PATH=/opt/cert/apiclient_key.pem

alipay:
  enabled: true
  # ä»¥ä¸‹é…ç½®å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥
  # ALIPAY_APP_ID=real_app_id
  # ALIPAY_PRIVATE_KEY=real_private_key (PKCS8æ ¼å¼)
  # ALIPAY_PUBLIC_KEY=real_public_key
  gateway-url: https://openapi.alipay.com/gateway.do

# ==================== å®‰å…¨æç¤º ====================
#
# ğŸ”’ æ•æ„Ÿä¿¡æ¯å®‰å…¨è§„èŒƒï¼š
# 1. æ‰€æœ‰å¯†é’¥å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡æˆ–NacosåŠ å¯†é…ç½®ç®¡ç†
# 2. ç¦æ­¢å°†çœŸå®å¯†é’¥æäº¤åˆ°Gitä»“åº“
# 3. è¯ä¹¦æ–‡ä»¶å¿…é¡»å¦¥å–„ä¿ç®¡ï¼Œæƒé™è®¾ä¸º600
# 4. å®šæœŸè½®æ¢APIå¯†é’¥ï¼ˆå»ºè®®æ¯å­£åº¦ä¸€æ¬¡ï¼‰
# 5. ç”Ÿäº§ç¯å¢ƒå¿…é¡»å¯ç”¨HTTPS
# 6. å›è°ƒURLå¿…é¡»éªŒè¯ç­¾å
#
# ğŸ“ ç”³è¯·æ”¯ä»˜è´¦å·ï¼š
# - å¾®ä¿¡æ”¯ä»˜ï¼šhttps://pay.weixin.qq.com
# - æ”¯ä»˜å®ï¼šhttps://open.alipay.com
#
# ğŸ“š æŠ€æœ¯æ–‡æ¡£ï¼š
# - å¾®ä¿¡æ”¯ä»˜API v3: https://pay.weixin.qq.com/wiki/doc/apiv3/
# - æ”¯ä»˜å®å¼€æ”¾å¹³å°: https://opendocs.alipay.com/
#
# ============================================================

