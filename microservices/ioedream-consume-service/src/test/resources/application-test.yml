# 测试环境配置
spring:
  # Nacos配置（禁用）
  cloud:
    nacos:
      config:
        enabled: false
      discovery:
        enabled: false

  # 数据源配置 - 使用H2内存数据库进行单元测试
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:

  # H2数据库控制台（可选，用于调试）
  h2:
    console:
      enabled: false

  # 禁用Flyway数据库迁移（单元测试不需要）
  flyway:
    enabled: false

  # 禁用SQL初始化脚本
  sql:
    init:
      mode: never

  # MyBatis Plus配置
  mybatis-plus:
    configuration:
      map-underscore-to-camel-case: true
      cache-enabled: false
      log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    global-config:
      db-config:
        logic-delete-field: deleted_flag
        logic-delete-value: 1
        logic-not-delete-value: 0

  # Redis配置（如果需要）
  redis:
    host: localhost
    port: 6379
    password:
    database: 0
    timeout: 3000
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0

# 日志配置
logging:
  level:
    "net.lab1024.sa.consume": DEBUG
    "org.springframework.test": DEBUG
    "com.alibaba.nacos": ERROR
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# 测试专用配置
test:
  timeout: 30000
  random:
    seed: 12345
