# ============================================================
# IOE-DREAM SonarQube项目配置
#
# 功能：配置SonarQube扫描范围和规则
# ============================================================

# 项目基本信息
sonar.projectKey=ioe-dream
sonar.projectName=IOE-DREAM智慧园区一卡通管理平台
sonar.projectVersion=1.0.0

# 源代码路径
sonar.sources=microservices
sonar.sourceEncoding=UTF-8

# 测试代码路径
sonar.tests=microservices
sonar.test.inclusions=**/*Test.java,**/*Tests.java,**/test/**/*.java

# 排除文件
sonar.exclusions=**/target/**,**/*.class,**/*.jar,**/node_modules/**,**/src/main/resources/static/**,**/src/main/resources/templates/**,**/*.min.js,**/*.min.css

# 测试覆盖率报告路径
sonar.coverage.jacoco.xmlReportPaths=**/target/site/jacoco/jacoco.xml
sonar.coverage.exclusions=**/domain/**,**/entity/**,**/dto/**,**/vo/**,**/form/**,**/config/**,**/*Application.java,**/*Config.java

# Java版本
sonar.java.source=17
sonar.java.target=17

# 代码质量规则
sonar.issue.ignore.multicriteria=e1,e2,e3

# 忽略特定规则（根据实际情况调整）
sonar.issue.ignore.multicriteria.e1.ruleKey=java:S1104  # 类字段应该为private
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*Entity.java

sonar.issue.ignore.multicriteria.e2.ruleKey=java:S1068  # 未使用的私有字段
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*Entity.java

sonar.issue.ignore.multicriteria.e3.ruleKey=java:S1135  # TODO注释
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*

# 复杂度阈值
sonar.complexity.max=15  # 方法复杂度
sonar.class.complexity.max=150  # 类复杂度

# 重复代码检测
sonar.cpd.exclusions=**/entity/**,**/dto/**,**/vo/**,**/form/**

# 代码行数限制
sonar.squid.java.fileLengthLimit=500  # 单个文件最大行数

# 语言设置
sonar.language=java

# 模块配置（多模块项目）
sonar.modules=microservices-common,ioedream-gateway-service,ioedream-common-service,ioedream-device-comm-service,ioedream-oa-service,ioedream-access-service,ioedream-attendance-service,ioedream-video-service,ioedream-consume-service,ioedream-visitor-service,ioedream-database-service,ioedream-biometric-service

# 公共模块配置
microservices-common.sonar.projectBaseDir=microservices/microservices-common

# 网关服务配置
ioedream-gateway-service.sonar.projectBaseDir=microservices/ioedream-gateway-service

# 公共服务配置
ioedream-common-service.sonar.projectBaseDir=microservices/ioedream-common-service

# 设备通讯服务配置
ioedream-device-comm-service.sonar.projectBaseDir=microservices/ioedream-device-comm-service

# OA服务配置
ioedream-oa-service.sonar.projectBaseDir=microservices/ioedream-oa-service

# 业务服务配置
ioedream-access-service.sonar.projectBaseDir=microservices/ioedream-access-service
ioedream-attendance-service.sonar.projectBaseDir=microservices/ioedream-attendance-service
ioedream-video-service.sonar.projectBaseDir=microservices/ioedream-video-service
ioedream-consume-service.sonar.projectBaseDir=microservices/ioedream-consume-service
ioedream-visitor-service.sonar.projectBaseDir=microservices/ioedream-visitor-service
ioedream-database-service.sonar.projectBaseDir=microservices/ioedream-database-service
ioedream-biometric-service.sonar.projectBaseDir=microservices/ioedream-biometric-service
