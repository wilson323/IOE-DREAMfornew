# 全局技术债务偿还 - 阶段1执行计划

**执行时间**: 2025-12-23
**预计完成**: 2周
**策略**: 全部并行（修复编译 + 依赖梳理 + 配置统一）

## 任务目标

- ✅ 编译通过率：100%
- ✅ Lombok注解处理器正常工作
- ✅ 依赖关系清晰化
- ✅ 配置统一标准化

## 执行策略

**并行执行3个任务组**：
1. 任务组1：Lombok编译问题修复（4个原子操作）
2. 任务组2：依赖关系梳理（4个原子操作）
3. 任务组3：配置统一化（2个原子操作）

## 10个原子操作清单

### 任务组1：Lombok编译问题修复

#### 操作1.1：降级Lombok版本
- **文件**: `microservices/pom.xml`
- **位置**: Line 37
- **修改**: `<lombok.version>1.18.42</lombok.version>` → `<lombok.version>1.18.30</lombok.version>`
- **预期**: 与Java 17 + Maven 3.11.0兼容

#### 操作1.2：配置全局编译器插件
- **文件**: `microservices/pom.xml`
- **位置**: `<build><plugins>`部分
- **操作**: 添加maven-compiler-plugin配置
- **预期**: 所有子模块继承统一配置

#### 操作1.3：强制更新依赖
- **命令**: 清理本地Maven缓存 + 强制更新
- **预期**: 重新下载Lombok 1.18.30

#### 操作1.4：验证编译修复
- **命令**: 顺序编译公共库 + 业务服务
- **预期**: 0个编译错误

### 任务组2：依赖关系梳理

#### 操作2.1：生成依赖关系图谱
- **脚本**: `scripts/analyze-dependencies.sh`
- **预期**: 生成dependency-reports/目录

#### 操作2.2：识别依赖违规
- **脚本**: `scripts/check-dependency-violations.sh`
- **预期**: 违规服务清单

#### 操作2.3：建立依赖规范文档
- **文件**: `documentation/technical/MODULE_DEPENDENCY_STANDARD.md`
- **预期**: 明确的依赖规则

#### 操作2.4：生成依赖关系图
- **工具**: Maven dependency:tree
- **预期**: 可视化依赖树

### 任务组3：配置统一化

#### 操作3.1：统一父POM版本管理
- **文件**: `microservices/pom.xml`
- **操作**: 确认所有版本在<properties>中定义
- **预期**: 版本集中管理

#### 操作3.2：创建配置检查脚本
- **文件**: `scripts/check-module-configuration.sh`
- **预期**: 自动检测配置不一致

## 验证标准

### 编译修复验证
```bash
mvn clean compile -DskipTests
# 成功：BUILD SUCCESS
```

### 依赖关系验证
```bash
./scripts/check-dependency-violations.sh
# 成功：0个违规
```

### 配置一致性验证
```bash
./scripts/check-module-configuration.sh
# 成功：所有检查通过
```

## 回滚策略

如果Lombok 1.18.30仍有问题：
```bash
git checkout microservices/pom.xml
# 尝试1.18.34
```

## 进度跟踪

- 总进度: 0/10 (0%)
- 任务组1: 0/4 (0%)
- 任务组2: 0/4 (0%)
- 任务组3: 0/2 (0%)
