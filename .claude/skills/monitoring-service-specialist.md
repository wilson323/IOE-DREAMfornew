# ç›‘æ§æœåŠ¡ä¸“å®¶æŠ€èƒ½
## Monitoring Service Specialist

**ğŸ¯ æŠ€èƒ½å®šä½**: IOE-DREAMæ™ºæ…§å›­åŒºç›‘æ§æœåŠ¡ä¸“å®¶ï¼Œç²¾é€šç³»ç»Ÿç›‘æ§ã€æ€§èƒ½åˆ†æã€å‘Šè­¦ç®¡ç†ã€æ—¥å¿—æ”¶é›†ã€é“¾è·¯è¿½è¸ªã€å¯è§†åŒ–å±•ç¤ºç­‰æ ¸å¿ƒç›‘æ§åŠŸèƒ½

**âš¡ æŠ€èƒ½ç­‰çº§**: â˜…â˜…â˜…â˜…â˜…â˜… (é¡¶çº§ä¸“å®¶)
**ğŸ¯ é€‚ç”¨åœºæ™¯**: ç³»ç»Ÿç›‘æ§å»ºè®¾ã€æ€§èƒ½åˆ†æä¼˜åŒ–ã€å‘Šè­¦è§„åˆ™é…ç½®ã€æ—¥å¿—ç®¡ç†ã€é“¾è·¯è¿½è¸ªã€è¿ç»´è‡ªåŠ¨åŒ–
**ğŸ“Š æŠ€èƒ½è¦†ç›–**: ç³»ç»Ÿç›‘æ§ | æ€§èƒ½åˆ†æ | å‘Šè­¦ç®¡ç† | æ—¥å¿—æ”¶é›† | é“¾è·¯è¿½è¸ª | å¯è§†åŒ–å±•ç¤º
**ğŸ”§ æŠ€æœ¯æ ˆ**: Spring Boot 3.5.8 + Prometheus + Grafana + ELK + Jaeger + RabbitMQ + Redis

---

## ğŸ“‹ æŠ€èƒ½æ¦‚è¿°

### **æ ¸å¿ƒä¸“é•¿**
- **å…¨æ–¹ä½ç›‘æ§**: åº”ç”¨ç›‘æ§ã€åŸºç¡€è®¾æ–½ç›‘æ§ã€ä¸šåŠ¡ç›‘æ§ã€ç”¨æˆ·ä½“éªŒç›‘æ§
- **æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ**: å¤šçº§å‘Šè­¦ã€å‘Šè­¦èšåˆã€å‘Šè­¦æŠ‘åˆ¶ã€æ™ºèƒ½é™å™ªã€è‡ªåŠ¨åŒ–å¤„ç†
- **æ€§èƒ½åˆ†æä¼˜åŒ–**: åº”ç”¨æ€§èƒ½åˆ†æã€æ•°æ®åº“æ€§èƒ½ã€ç½‘ç»œæ€§èƒ½ã€èµ„æºä½¿ç”¨åˆ†æ
- **æ—¥å¿—ç®¡ç†ä½“ç³»**: æ—¥å¿—æ”¶é›†ã€å­˜å‚¨ã€åˆ†æã€æ£€ç´¢ã€å¯è§†åŒ–ã€å½’æ¡£
- **é“¾è·¯è¿½è¸ªç›‘æ§**: åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªã€æœåŠ¡è°ƒç”¨åˆ†æã€æ€§èƒ½ç“¶é¢ˆå®šä½
- **å¯è§†åŒ–å±•ç¤º**: ç›‘æ§å¤§å±ã€æ€§èƒ½å›¾è¡¨ã€è¶‹åŠ¿åˆ†æã€å®æ—¶ç›‘æ§

### **è§£å†³èƒ½åŠ›**
- **ç›‘æ§å¹³å°å»ºè®¾**: å®Œæ•´çš„ä¼ä¸šçº§ç›‘æ§å’Œå¯è§‚æµ‹æ€§å¹³å°å®ç°
- **æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ**: åŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½å‘Šè­¦å’Œæ ¹å› åˆ†æç³»ç»Ÿ
- **æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ**: è‡ªåŠ¨åŒ–çš„æ€§èƒ½é—®é¢˜æ£€æµ‹å’Œä¼˜åŒ–å»ºè®®ç³»ç»Ÿ
- **è¿ç»´è‡ªåŠ¨åŒ–**: åŸºäºç›‘æ§æ•°æ®çš„è‡ªåŠ¨åŒ–è¿ç»´å’Œæ•…éšœå¤„ç†ç³»ç»Ÿ
- **å¯è§†åŒ–å¹³å°**: ä¸°å¯Œçš„ç›‘æ§æ•°æ®å¯è§†åŒ–å’Œåˆ†æå±•ç¤ºå¹³å°

---

## ğŸ¯ ä¸šåŠ¡åœºæ™¯è¦†ç›–

### ğŸ“Š å…¨æ–¹ä½ç›‘æ§ä½“ç³»

```java
// ç›‘æ§æ•°æ®æ”¶é›†å’Œç®¡ç†æ ¸å¿ƒæµç¨‹
@Service
public class MonitoringDataServiceImpl implements MonitoringDataService {

    @Resource
    private MetricsCollectorManager metricsCollector;

    @Resource
    private AlertRuleEngine alertRuleEngine;

    @Resource
    private DashboardManager dashboardManager;

    @Override
    @Scheduled(fixedRate = 30000) // æ¯30ç§’æ‰§è¡Œä¸€æ¬¡
    public void collectSystemMetrics() {
        try {
            long startTime = System.currentTimeMillis();

            // 1. æ”¶é›†åº”ç”¨æŒ‡æ ‡
            ApplicationMetrics appMetrics = collectApplicationMetrics();

            // 2. æ”¶é›†åŸºç¡€è®¾æ–½æŒ‡æ ‡
            InfrastructureMetrics infraMetrics = collectInfrastructureMetrics();

            // 3. æ”¶é›†ä¸šåŠ¡æŒ‡æ ‡
            BusinessMetrics businessMetrics = collectBusinessMetrics();

            // 4. æ”¶é›†ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
            UserExperienceMetrics uxMetrics = collectUserExperienceMetrics();

            // 5. èšåˆç›‘æ§æ•°æ®
            MonitoringData aggregatedData = aggregateMonitoringData(
                appMetrics, infraMetrics, businessMetrics, uxMetrics);

            // 6. å­˜å‚¨ç›‘æ§æ•°æ®
            storeMonitoringData(aggregatedData);

            // 7. è§¦å‘å‘Šè­¦æ£€æŸ¥
            alertRuleEngine.evaluateRules(aggregatedData);

            // 8. æ›´æ–°ç›‘æ§é¢æ¿
            dashboardManager.updateDashboards(aggregatedData);

            // 9. è®°å½•æ”¶é›†ç»Ÿè®¡
            long duration = System.currentTimeMillis() - startTime;
            recordCollectionStatistics(duration, aggregatedData);

        } catch (Exception e) {
            log.error("æ”¶é›†ç³»ç»Ÿç›‘æ§æŒ‡æ ‡å¤±è´¥", e);
            alertService.sendSystemAlert("ç›‘æ§ç³»ç»Ÿå¼‚å¸¸",
                "æ”¶é›†ç³»ç»Ÿç›‘æ§æŒ‡æ ‡æ—¶å‘ç”Ÿå¼‚å¸¸: " + e.getMessage());
        }
    }

    private ApplicationMetrics collectApplicationMetrics() {
        try {
            return ApplicationMetrics.builder()
                // JVMæŒ‡æ ‡
                .jvmHeapUsage(getJvmHeapUsage())
                .jvmNonHeapUsage(getJvmNonHeapUsage())
                .gcInfo(getGcInfo())
                .threadCount(getThreadCount())

                // SpringæŒ‡æ ‡
                .beanCount(getBeanCount())
                .requestCount(getRequestCount())
                .responseTime(getAverageResponseTime())
                .errorRate(getErrorRate())

                // æ•°æ®åº“æŒ‡æ ‡
                .dbConnectionPoolUsage(getDbConnectionPoolUsage())
                .slowQueryCount(getSlowQueryCount())
                .dbTransactionTime(getAvgTransactionTime())

                // ç¼“å­˜æŒ‡æ ‡
                .cacheHitRate(getCacheHitRate())
                .cacheEvictions(getCacheEvictions())

                // æ¶ˆæ¯é˜Ÿåˆ—æŒ‡æ ‡
                .mqProducerRate(getMqProducerRate())
                .mqConsumerRate(getMqConsumerRate())
                .mqQueueSize(getMqQueueSize())

                .collectionTime(LocalDateTime.now())
                .build();

        } catch (Exception e) {
            log.error("æ”¶é›†åº”ç”¨æŒ‡æ ‡å¤±è´¥", e);
            throw new BusinessException(ErrorCode.APPLICATION_METRICS_COLLECTION_FAILED,
                "æ”¶é›†åº”ç”¨æŒ‡æ ‡å¤±è´¥", e);
        }
    }

    private InfrastructureMetrics collectInfrastructureMetrics() {
        try {
            return InfrastructureMetrics.builder()
                // CPUæŒ‡æ ‡
                .cpuUsage(getCpuUsage())
                .cpuLoadAverage(getCpuLoadAverage())

                // å†…å­˜æŒ‡æ ‡
                .memoryUsage(getMemoryUsage())
                .swapUsage(getSwapUsage())

                // ç£ç›˜æŒ‡æ ‡
                .diskUsage(getDiskUsage())
                .diskIOPS(getDiskIOPS())
                .diskThroughput(getDiskThroughput())

                // ç½‘ç»œæŒ‡æ ‡
                .networkBandwidth(getNetworkBandwidth())
                .networkLatency(getNetworkLatency())
                .packetLoss(getPacketLoss())

                .collectionTime(LocalDateTime.now())
                .build();

        } catch (Exception e) {
            log.error("æ”¶é›†åŸºç¡€è®¾æ–½æŒ‡æ ‡å¤±è´¥", e);
            throw new BusinessException(ErrorCode.INFRASTRUCTURE_METRICS_COLLECTION_FAILED,
                "æ”¶é›†åŸºç¡€è®¾æ–½æŒ‡æ ‡å¤±è´¥", e);
        }
    }

    private BusinessMetrics collectBusinessMetrics() {
        try {
            return BusinessMetrics.builder()
                // ä¸šåŠ¡é‡æŒ‡æ ‡
                .dailyActiveUsers(getDailyActiveUsers())
                .onlineUserCount(getOnlineUserCount())
                .transactionVolume(getTransactionVolume())
                .orderValue(getOrderValue())

                // ä¸šåŠ¡æ€§èƒ½æŒ‡æ ‡
                .avgOrderProcessingTime(getAvgOrderProcessingTime())
                .paymentSuccessRate(getPaymentSuccessRate())
                .userRetentionRate(getUserRetentionRate())

                // ä¸šåŠ¡å¼‚å¸¸æŒ‡æ ‡
                .businessExceptionCount(getBusinessExceptionCount())
                .systemExceptionCount(getSystemExceptionCount())

                .collectionTime(LocalDateTime.now())
                .build();

        } catch (Exception e) {
            log.error("æ”¶é›†ä¸šåŠ¡æŒ‡æ ‡å¤±è´¥", e);
            throw new BusinessException(ErrorCode.BUSINESS_METRICS_COLLECTION_FAILED,
                "æ”¶é›†ä¸šåŠ¡æŒ‡æ ‡å¤±è´¥", e);
        }
    }
}
```

### ğŸš¨ æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ

```java
// æ™ºèƒ½å‘Šè­¦è§„åˆ™å¼•æ“
@Service
public class AlertRuleEngineServiceImpl implements AlertRuleEngineService {

    @Resource
    private AlertRuleRepository alertRuleRepository;

    @Resource
    private AlertNotificationService notificationService;

    @Resource
    private AlertCorrelationService correlationService;

    @Override
    public List<Alert> evaluateRules(MonitoringData monitoringData) {
        try {
            List<Alert> alerts = new ArrayList<>();

            // 1. è·å–æ‰€æœ‰æ¿€æ´»çš„å‘Šè­¦è§„åˆ™
            List<AlertRule> activeRules = alertRuleRepository.findByStatus(AlertRuleStatus.ACTIVE);

            // 2. å¹¶è¡Œè¯„ä¼°è§„åˆ™
            List<CompletableFuture<List<Alert>>> ruleEvaluationTasks = activeRules.stream()
                    .map(rule -> CompletableFuture.supplyAsync(() -> evaluateSingleRule(rule, monitoringData)))
                    .collect(Collectors.toList());

            // 3. æ”¶é›†è¯„ä¼°ç»“æœ
            for (CompletableFuture<List<Alert>> task : ruleEvaluationTasks) {
                List<Alert> ruleAlerts = task.get();
                alerts.addAll(ruleAlerts);
            }

            // 4. å‘Šè­¦å…³è”å’Œèšåˆ
            List<Alert> aggregatedAlerts = correlationService.correlateAndAggregate(alerts);

            // 5. å‘Šè­¦é™å™ª
            List<Alert> dedupedAlerts = deduplicateAlerts(aggregatedAlerts);

            // 6. æ™ºèƒ½åˆ†çº§
            List<Alert> classifiedAlerts = classifyAlerts(dedupedAlerts);

            // 7. å‘é€å‘Šè­¦é€šçŸ¥
            for (Alert alert : classifiedAlerts) {
                notificationService.sendAlert(alert);
            }

            return classifiedAlerts;

        } catch (Exception e) {
            log.error("è¯„ä¼°å‘Šè­¦è§„åˆ™å¤±è´¥", e);
            throw new BusinessException(ErrorCode.ALERT_RULE_EVALUATION_FAILED,
                "è¯„ä¼°å‘Šè­¦è§„åˆ™å¤±è´¥", e);
        }
    }

    private List<Alert> evaluateSingleRule(AlertRule rule, MonitoringData data) {
        List<Alert> alerts = new ArrayList<>();

        try {
            // 1. æ ¹æ®è§„åˆ™ç±»å‹è¯„ä¼°
            switch (rule.getRuleType()) {
                case THRESHOLD:
                    alerts.addAll(evaluateThresholdRule(rule, data));
                    break;
                case ANOMALY:
                    alerts.addAll(evaluateAnomalyRule(rule, data));
                    break;
                case COMPOSITE:
                    alerts.addAll(evaluateCompositeRule(rule, data));
                    break;
                case CUSTOM:
                    alerts.addAll(evaluateCustomRule(rule, data));
                    break;
                default:
                    log.warn("æœªçŸ¥çš„å‘Šè­¦è§„åˆ™ç±»å‹: {}", rule.getRuleType());
            }

            // 2. åº”ç”¨å‘Šè­¦æŠ‘åˆ¶è§„åˆ™
            alerts = applySuppressionRules(alerts);

            // 3. åº”ç”¨å‘Šè­¦é™æµè§„åˆ™
            alerts = applyRateLimitingRules(alerts);

        } catch (Exception e) {
            log.error("è¯„ä¼°å•ä¸ªå‘Šè­¦è§„åˆ™å¤±è´¥: ruleId={}", rule.getRuleId(), e);
        }

        return alerts;
    }

    private List<Alert> evaluateThresholdRule(AlertRule rule, MonitoringData data) {
        List<Alert> alerts = new ArrayList<>();

        try {
            // 1. è§£æé˜ˆå€¼é…ç½®
            ThresholdConfig config = parseThresholdConfig(rule.getConfiguration());

            // 2. è·å–æŒ‡æ ‡å€¼
            double metricValue = getMetricValue(data, config.getMetricName());

            // 3. è¯„ä¼°é˜ˆå€¼æ¡ä»¶
            boolean isTriggered = evaluateThresholdCondition(metricValue, config);

            if (isTriggered) {
                // 4. åˆ›å»ºå‘Šè­¦
                Alert alert = Alert.builder()
                    .alertId(generateAlertId())
                    .ruleId(rule.getRuleId())
                    .ruleName(rule.getRuleName())
                    .severity(rule.getSeverity())
                    .metricName(config.getMetricName())
                    .currentValue(metricValue)
                    .threshold(config.getThreshold())
                    .condition(config.getCondition())
                    .description(generateAlertDescription(rule, metricValue, config))
                    .timestamp(LocalDateTime.now())
                    .source(getAlertSource())
                    .tags(rule.getTags())
                    .build();

                alerts.add(alert);
            }

        } catch (Exception e) {
            log.error("è¯„ä¼°é˜ˆå€¼å‘Šè­¦è§„åˆ™å¤±è´¥: ruleId={}", rule.getRuleId(), e);
        }

        return alerts;
    }

    private List<Alert> evaluateAnomalyRule(AlertRule rule, MonitoringData data) {
        List<Alert> alerts = new ArrayList<>();

        try {
            // 1. è§£æå¼‚å¸¸æ£€æµ‹é…ç½®
            AnomalyConfig config = parseAnomalyConfig(rule.getConfiguration());

            // 2. è·å–å†å²æ•°æ®
            List<Double> historicalValues = getHistoricalMetricValues(
                data, config.getMetricName(), config.getAnalysisWindow());

            // 3. æ‰§è¡Œå¼‚å¸¸æ£€æµ‹
            AnomalyDetectionResult result = detectAnomaly(historicalValues,
                getMetricValue(data, config.getMetricName()), config);

            if (result.isAnomaly()) {
                // 4. åˆ›å»ºå¼‚å¸¸å‘Šè­¦
                Alert alert = Alert.builder()
                    .alertId(generateAlertId())
                    .ruleId(rule.getRuleId())
                    .ruleName(rule.getRuleName())
                    .severity(AlertSeverity.WARNING)
                    .metricName(config.getMetricName())
                    .currentValue(result.getCurrentValue())
                    .anomalyScore(result.getAnomalyScore())
                    .description(generateAnomalyAlertDescription(rule, result))
                    .timestamp(LocalDateTime.now())
                    .source(getAlertSource())
                    .tags(ImmutableMap.of("anomaly_detection", "true"))
                    .build();

                alerts.add(alert);
            }

        } catch (Exception e) {
            log.error("è¯„ä¼°å¼‚å¸¸æ£€æµ‹å‘Šè­¦è§„åˆ™å¤±è´¥: ruleId={}", rule.getRuleId(), e);
        }

        return alerts;
    }

    private List<Alert> deduplicateAlerts(List<Alert> alerts) {
        Map<String, Alert> dedupedMap = new HashMap<>();

        for (Alert alert : alerts) {
            String deduplicationKey = generateDeduplicationKey(alert);

            // ä¿ç•™ç›¸åŒå‘Šè­¦ä¸­çš„æœ€é«˜çº§åˆ«
            Alert existingAlert = dedupedMap.get(deduplicationKey);
            if (existingAlert == null ||
                alert.getSeverity().getPriority() > existingAlert.getSeverity().getPriority()) {
                dedupedMap.put(deduplicationKey, alert);
            }
        }

        return new ArrayList<>(dedupedMap.values());
    }

    private List<Alert> classifyAlerts(List<Alert> alerts) {
        List<Alert> classifiedAlerts = new ArrayList<>();

        for (Alert alert : alerts) {
            // 1. åŸºäºå‘Šè­¦å†…å®¹è¿›è¡Œæ™ºèƒ½åˆ†ç±»
            AlertClassification classification = classifyAlertContent(alert);

            // 2. åŸºäºå†å²å½±å“æ•°æ®è°ƒæ•´å‘Šè­¦çº§åˆ«
            AlertSeverity adjustedSeverity = adjustSeverityBasedOnHistory(alert, classification);

            // 3. æ·»åŠ ä¸šåŠ¡å½±å“è¯„ä¼°
            BusinessImpact impact = assessBusinessImpact(alert);

            // 4. ç”Ÿæˆå¤„ç†å»ºè®®
            List<String> recommendations = generateRecommendations(alert, classification);

            // 5. æ„å»ºåˆ†ç±»åçš„å‘Šè­¦
            Alert classifiedAlert = alert.toBuilder()
                .classification(classification)
                .severity(adjustedSeverity)
                .businessImpact(impact)
                .recommendations(recommendations)
                .build();

            classifiedAlerts.add(classifiedAlert);
        }

        return classifiedAlerts;
    }
}
```

### ğŸ“ˆ æ€§èƒ½åˆ†æä¼˜åŒ–

```java
// ç³»ç»Ÿæ€§èƒ½åˆ†æå’Œä¼˜åŒ–å¼•æ“
@Service
public class PerformanceAnalysisServiceImpl implements PerformanceAnalysisService {

    @Resource
    private PerformanceDataAnalyzer dataAnalyzer;

    @Resource
    private PerformanceOptimizer performanceOptimizer;

    @Resource
    private OptimizationRecommendationEngine recommendationEngine;

    @Override
    public PerformanceAnalysisReport analyzePerformance(PerformanceAnalysisRequest request) {
        try {
            log.info("å¼€å§‹æ€§èƒ½åˆ†æ: request={}", request);

            // 1. æ”¶é›†æ€§èƒ½æ•°æ®
            PerformanceDataSet dataSet = collectPerformanceData(request);

            // 2. æ‰§è¡Œæ€§èƒ½åˆ†æ
            PerformanceAnalysisResults analysisResults = performPerformanceAnalysis(dataSet);

            // 3. è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
            List<PerformanceBottleneck> bottlenecks = identifyPerformanceBottlenecks(analysisResults);

            // 4. ç”Ÿæˆä¼˜åŒ–å»ºè®®
            List<OptimizationRecommendation> recommendations = generateOptimizationRecommendations(
                bottlenecks, dataSet);

            // 5. è¯„ä¼°ä¼˜åŒ–æ•ˆæœ
            OptimizationImpactEstimation impactEstimation = estimateOptimizationImpact(
                bottlenecks, recommendations);

            // 6. æ„å»ºæ€§èƒ½åˆ†ææŠ¥å‘Š
            PerformanceAnalysisReport report = PerformanceAnalysisReport.builder()
                .analysisId(generateAnalysisId())
                .analysisRequest(request)
                .dataSet(dataSet)
                .analysisResults(analysisResults)
                .bottlenecks(bottlenecks)
                .recommendations(recommendations)
                .impactEstimation(impactEstimation)
                .analysisTime(LocalDateTime.now())
                .build();

            // 7. å‘é€åˆ†æå®Œæˆé€šçŸ¥
            sendAnalysisCompletionNotification(report);

            log.info("æ€§èƒ½åˆ†æå®Œæˆ: analysisId={}, bottleneckCount={}, recommendationCount={}",
                report.getAnalysisId(), bottlenecks.size(), recommendations.size());

            return report;

        } catch (Exception e) {
            log.error("æ€§èƒ½åˆ†æå¤±è´¥: request={}", request, e);
            throw new BusinessException(ErrorCode.PERFORMANCE_ANALYSIS_FAILED,
                "æ€§èƒ½åˆ†æå¤±è´¥", e);
        }
    }

    private List<PerformanceBottleneck> identifyPerformanceBottlenecks(
            PerformanceAnalysisResults analysisResults) {

        List<PerformanceBottleneck> bottlenecks = new ArrayList<>();

        try {
            // 1. åˆ†æå“åº”æ—¶é—´ç“¶é¢ˆ
            List<ResponseTimeBottleneck> responseTimeBottlenecks =
                analyzeResponseTimeBottlenecks(analysisResults);
            bottlenecks.addAll(responseTimeBottlenecks);

            // 2. åˆ†æååé‡ç“¶é¢ˆ
            List<ThroughputBottleneck> throughputBottlenecks =
                analyzeThroughputBottlenecks(analysisResults);
            bottlenecks.addAll(throughputBottlenecks);

            // 3. åˆ†æèµ„æºä½¿ç”¨ç“¶é¢ˆ
            List<ResourceUsageBottleneck> resourceBottlenecks =
                analyzeResourceUsageBottlenecks(analysisResults);
            bottlenecks.addAll(resourceBottlenecks);

            // 4. åˆ†ææ•°æ®åº“æ€§èƒ½ç“¶é¢ˆ
            List<DatabaseBottleneck> databaseBottlenecks =
                analyzeDatabaseBottlenecks(analysisResults);
            bottlenecks.addAll(databaseBottlenecks);

            // 5. åˆ†æç½‘ç»œæ€§èƒ½ç“¶é¢ˆ
            List<NetworkBottleneck> networkBottlenecks =
                analyzeNetworkBottlenecks(analysisResults);
            bottlenecks.addAll(networkBottlenecks);

            // 6. æŒ‰å½±å“ç¨‹åº¦æ’åº
            bottlenecks.sort((a, b) ->
                Double.compare(b.getImpactScore(), a.getImpactScore()));

        } catch (Exception e) {
            log.error("è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå¤±è´¥", e);
            throw new BusinessException(ErrorCode.BOTTLENECK_IDENTIFICATION_FAILED,
                "è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå¤±è´¥", e);
        }

        return bottlenecks;
    }

    private List<ResponseTimeBottleneck> analyzeResponseTimeBottlenecks(
            PerformanceAnalysisResults analysisResults) {

        List<ResponseTimeBottleneck> bottlenecks = new ArrayList<>();

        try {
            // 1. åˆ†æAPIå“åº”æ—¶é—´
            for (ApiEndpointPerformance api : analysisResults.getApiPerformances()) {
                if (api.getP95ResponseTime() > getP95ResponseTimeThreshold()) {
                    ResponseTimeBottleneck bottleneck = ResponseTimeBottleneck.builder()
                        .bottleneckType(BottleneckType.HIGH_RESPONSE_TIME)
                        .component(api.getEndpoint())
                        .componentType(ComponentType.API_ENDPOINT)
                        .currentValue(api.getP95ResponseTime())
                        .thresholdValue(getP95ResponseTimeThreshold())
                        .impactScore(calculateResponseTimeImpactScore(api))
                        .description("APIç«¯ç‚¹P95å“åº”æ—¶é—´è¿‡é•¿")
                        .possibleCauses(identifyResponseTimeCauses(api))
                        .build();

                    bottlenecks.add(bottleneck);
                }
            }

            // 2. åˆ†ææœåŠ¡æ–¹æ³•å“åº”æ—¶é—´
            for (ServiceMethodPerformance service : analysisResults.getServicePerformances()) {
                if (service.getAverageResponseTime() > getServiceResponseTimeThreshold()) {
                    ResponseTimeBottleneck bottleneck = ResponseTimeBottleneck.builder()
                        .bottleneckType(BottleneckType.HIGH_RESPONSE_TIME)
                        .component(service.getServiceClass() + "." + service.getMethodName())
                        .componentType(ComponentType.SERVICE_METHOD)
                        .currentValue(service.getAverageResponseTime())
                        .thresholdValue(getServiceResponseTimeThreshold())
                        .impactScore(calculateServiceResponseTimeImpactScore(service))
                        .description("æœåŠ¡æ–¹æ³•å¹³å‡å“åº”æ—¶é—´è¿‡é•¿")
                        .possibleCauses(identifyServiceResponseTimeCauses(service))
                        .build();

                    bottlenecks.add(bottleneck);
                }
            }

            // 3. åˆ†ææ•°æ®åº“æŸ¥è¯¢å“åº”æ—¶é—´
            for (DatabaseQueryPerformance query : analysisResults.getDatabaseQueries()) {
                if (query.getAverageExecutionTime() > getDatabaseQueryThreshold()) {
                    ResponseTimeBottleneck bottleneck = ResponseTimeBottleneck.builder()
                        .bottleneckType(BottleneckType.SLOW_DATABASE_QUERY)
                        .component(query.getSqlStatement())
                        .componentType(ComponentType.DATABASE_QUERY)
                        .currentValue(query.getAverageExecutionTime())
                        .thresholdValue(getDatabaseQueryThreshold())
                        .impactScore(calculateDatabaseQueryImpactScore(query))
                        .description("æ•°æ®åº“æŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¿‡é•¿")
                        .possibleCauses(identifyDatabaseQueryCauses(query))
                        .build();

                    bottlenecks.add(bottleneck);
                }
            }

        } catch (Exception e) {
            log.error("åˆ†æå“åº”æ—¶é—´ç“¶é¢ˆå¤±è´¥", e);
        }

        return bottlenecks;
    }

    private List<OptimizationRecommendation> generateOptimizationRecommendations(
            List<PerformanceBottleneck> bottlenecks, PerformanceDataSet dataSet) {

        List<OptimizationRecommendation> recommendations = new ArrayList<>();

        try {
            for (PerformanceBottleneck bottleneck : bottlenecks) {
                // 1. æ ¹æ®ç“¶é¢ˆç±»å‹ç”Ÿæˆå»ºè®®
                List<OptimizationRecommendation> bottleneckRecommendations =
                    recommendationEngine.generateRecommendations(bottleneck);

                recommendations.addAll(bottleneckRecommendations);

                // 2. åŸºäºæ•°æ®ä¸Šä¸‹æ–‡å¢å¼ºå»ºè®®
                for (OptimizationRecommendation recommendation : bottleneckRecommendations) {
                    enhanceRecommendationWithData(recommendation, dataSet);
                }
            }

            // 3. å»é‡å»ºè®®
            recommendations = deduplicateRecommendations(recommendations);

            // 4. æŒ‰ä¼˜å…ˆçº§æ’åº
            recommendations.sort((a, b) ->
                b.getPriority().getScore() - a.getPriority().getScore());

            // 5. é™åˆ¶å»ºè®®æ•°é‡
            if (recommendations.size() > getMaxRecommendationsCount()) {
                recommendations = recommendations.subList(0, getMaxRecommendationsCount());
            }

        } catch (Exception e) {
            log.error("ç”Ÿæˆä¼˜åŒ–å»ºè®®å¤±è´¥", e);
            throw new BusinessException(ErrorCode.RECOMMENDATION_GENERATION_FAILED,
                "ç”Ÿæˆä¼˜åŒ–å»ºè®®å¤±è´¥", e);
        }

        return recommendations;
    }
}
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡è§„èŒƒ

### å››å±‚æ¶æ„å®ç°

#### Controllerå±‚ - æ¥å£æ§åˆ¶å±‚
```java
@RestController
@RequestMapping("/api/v1/monitoring")
@Tag(name = "ç›‘æ§ç®¡ç†")
@Validated
public class MonitoringController {

    @Resource
    private MonitoringDataService monitoringService;

    @Resource
    private AlertService alertService;

    @PostMapping("/analysis/performance")
    @Operation(summary = "æ‰§è¡Œæ€§èƒ½åˆ†æ")
    public ResponseDTO<PerformanceAnalysisReport> analyzePerformance(@Valid @RequestBody PerformanceAnalysisRequestDTO request) {
        PerformanceAnalysisReport report = monitoringService.analyzePerformance(request);
        return ResponseDTO.ok(report);
    }

    @GetMapping("/alerts")
    @Operation(summary = "è·å–å‘Šè­¦åˆ—è¡¨")
    public ResponseDTO<List<AlertVO>> getAlerts(@Valid AlertQueryDTO query) {
        List<AlertVO> alerts = alertService.getAlerts(query);
        return ResponseDTO.ok(alerts);
    }
}
```

#### Serviceå±‚ - æ ¸å¿ƒä¸šåŠ¡å±‚
```java
@Service
@Transactional(rollbackFor = Exception.class)
public class MonitoringDataServiceImpl implements MonitoringDataService {

    @Resource
    private MonitoringManager monitoringManager;

    @Override
    public void collectSystemMetrics() {
        // ä¸šåŠ¡è§„åˆ™éªŒè¯
        validateCollectionConditions();

        // æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
        monitoringManager.collectSystemMetrics();
    }

    private void validateCollectionConditions() {
        // éªŒè¯ç›‘æ§ç³»ç»ŸçŠ¶æ€
        if (!isMonitoringSystemHealthy()) {
            throw new BusinessException(ErrorCode.MONITORING_SYSTEM_UNHEALTHY,
                "ç›‘æ§ç³»ç»ŸçŠ¶æ€å¼‚å¸¸ï¼Œæš‚åœæŒ‡æ ‡æ”¶é›†");
        }

        // éªŒè¯å­˜å‚¨ç©ºé—´
        if (!hasEnoughStorageSpace()) {
            throw new BusinessException(ErrorCode.INSUFFICIENT_STORAGE_SPACE,
                "ç›‘æ§å­˜å‚¨ç©ºé—´ä¸è¶³");
        }
    }
}
```

---

## ğŸ“Š æŠ€èƒ½è´¨é‡æŒ‡æ ‡ä½“ç³»

### æ ¸å¿ƒè´¨é‡æŒ‡æ ‡
| æŒ‡æ ‡åç§° | ç›®æ ‡å€¼ | è¯´æ˜ | æµ‹é‡æ–¹æ³• |
|---------|--------|------|----------|
| **ç›‘æ§æ•°æ®å®Œæ•´æ€§** | â‰¥99.9% | ç›‘æ§æ•°æ®æ”¶é›†å®Œæ•´æ€§ | æ•°æ®éªŒè¯ |
| **å‘Šè­¦å‡†ç¡®ç‡** | â‰¥95% | å‘Šè­¦è§¦å‘å‡†ç¡®ç‡ | å‘Šè­¦åˆ†æ |
| **å‘Šè­¦å“åº”æ—¶é—´** | â‰¤30ç§’ | å‘Šè­¦è§¦å‘å“åº”æ—¶é—´ | å“åº”æµ‹è¯• |
| **ç›‘æ§è¦†ç›–èŒƒå›´** | 100% | ç›‘æ§è¦†ç›–å®Œæ•´æ€§ | è¦†ç›–ç‡å®¡è®¡ |
| **æ€§èƒ½åˆ†æå‡†ç¡®ç‡** | â‰¥85% | æ€§èƒ½åˆ†æç»“æœå‡†ç¡®ç‡ | åˆ†æéªŒè¯ |

### æ€§èƒ½æŒ‡æ ‡
| æŒ‡æ ‡åç§° | ç›®æ ‡å€¼ | è¯´æ˜ | æµ‹é‡æ–¹æ³• |
|---------|--------|------|----------|
| **æŒ‡æ ‡æ”¶é›†å»¶è¿Ÿ** | â‰¤5ç§’ | ç›‘æ§æŒ‡æ ‡æ”¶é›†å»¶è¿Ÿ | æ€§èƒ½ç›‘æ§ |
| **åˆ†æå¤„ç†æ—¶é—´** | â‰¤30ç§’ | æ€§èƒ½åˆ†æå¤„ç†æ—¶é—´ | å¤„ç†ç›‘æ§ |
| **å‘Šè­¦èšåˆæ—¶é—´** | â‰¤10ç§’ | å‘Šè­¦èšåˆå¤„ç†æ—¶é—´ | èšåˆç›‘æ§ |
| **å¯è§†åŒ–å“åº”æ—¶é—´** | â‰¤2ç§’ | ç›‘æ§å¯è§†åŒ–å“åº”æ—¶é—´ | ç•Œé¢æµ‹è¯• |
| **å†å²æ•°æ®æŸ¥è¯¢** | â‰¤3ç§’ | å†å²ç›‘æ§æ•°æ®æŸ¥è¯¢ | æŸ¥è¯¢æµ‹è¯• |

### å¯é æ€§æŒ‡æ ‡
| æŒ‡æ ‡åç§° | ç›®æ ‡å€¼ | è¯´æ˜ | æµ‹é‡æ–¹æ³• |
|---------|--------|------|----------|
| **ç›‘æ§æœåŠ¡å¯ç”¨æ€§** | â‰¥99.9% | ç›‘æ§æœåŠ¡å¯ç”¨æ€§ | å¯ç”¨æ€§ç›‘æ§ |
| **æ•°æ®å­˜å‚¨å¯é æ€§** | 100% | ç›‘æ§æ•°æ®å­˜å‚¨å¯é æ€§ | å­˜å‚¨éªŒè¯ |
| **å‘Šè­¦ç³»ç»Ÿå¯é æ€§** | â‰¥99.95% | å‘Šè­¦ç³»ç»Ÿå¯é æ€§ | å‘Šè­¦æµ‹è¯• |
| **æ¢å¤æ—¶é—´ç›®æ ‡(RTO)** | â‰¤5åˆ†é’Ÿ | ç›‘æ§æ•…éšœæ¢å¤æ—¶é—´ | æ•…éšœæ¼”ç»ƒ |
| **æ•°æ®ä¿ç•™å®Œæ•´æ€§** | 100% | ç›‘æ§æ•°æ®ä¿ç•™å®Œæ•´æ€§ | æ•°æ®å®¡è®¡ |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£å‚è€ƒ

### æ ¸å¿ƒæ¶æ„æ–‡æ¡£
- **ğŸ“‹ CLAUDE.md**: å…¨å±€æ¶æ„è§„èŒƒ (å¼ºåˆ¶éµå¾ª)
- **ğŸ—ï¸ å››å±‚æ¶æ„è¯¦è§£**: Controllerâ†’Serviceâ†’Managerâ†’DAOæ¶æ„æ¨¡å¼
- **ğŸ”§ ä¾èµ–æ³¨å…¥è§„èŒƒ**: ç»Ÿä¸€ä½¿ç”¨@Resourceæ³¨è§£
- **ğŸ“¦ DAOå±‚è§„èŒƒ**: ç»Ÿä¸€ä½¿ç”¨Daoåç¼€å’Œ@Mapperæ³¨è§£

### æŠ€æœ¯æ ˆæ–‡æ¡£
- **Spring Boot 3.5.8**: å¾®æœåŠ¡æ¡†æ¶æ–‡æ¡£
- **Prometheus**: ç›‘æ§æŒ‡æ ‡æ”¶é›†æ–‡æ¡£
- **Grafana**: ç›‘æ§å¯è§†åŒ–æ–‡æ¡£
- **ELK Stack**: æ—¥å¿—æ”¶é›†å’Œåˆ†ææ–‡æ¡£
- **Jaeger**: åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªæ–‡æ¡£

### ç›‘æ§è¿ç»´æ–‡æ¡£
- **ğŸ“Š ç³»ç»Ÿç›‘æ§ä½“ç³»**: å…¨æ–¹ä½ç³»ç»Ÿç›‘æ§ç›¸å…³ä¸šåŠ¡
- **ğŸš¨ æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ**: æ™ºèƒ½å‘Šè­¦å’Œé€šçŸ¥ä¸šåŠ¡
- **ğŸ“ˆ æ€§èƒ½åˆ†æå¹³å°**: æ€§èƒ½åˆ†æå’Œä¼˜åŒ–ä¸šåŠ¡
- **ğŸ“‹ ç›‘æ§å¯è§†åŒ–**: ç›‘æ§æ•°æ®å¯è§†åŒ–å’Œå±•ç¤ºä¸šåŠ¡

### å®‰å…¨è§„èŒƒæ–‡æ¡£
- **ğŸ”’ ç›‘æ§æ•°æ®å®‰å…¨è§„èŒƒ**: ç›‘æ§æ•°æ®å®‰å…¨å­˜å‚¨è¦æ±‚
- **ğŸ›¡ï¸ å‘Šè­¦å®‰å…¨è§„èŒƒ**: å‘Šè­¦ä¿¡æ¯å®‰å…¨ä¼ è¾“è¦æ±‚
- **ğŸ“‹ è®¿é—®æ§åˆ¶è§„èŒƒ**: ç›‘æ§ç³»ç»Ÿè®¿é—®æ§åˆ¶è¦æ±‚
- **ğŸ” å®¡è®¡æ—¥å¿—è§„èŒƒ**: ç›‘æ§æ“ä½œå®¡è®¡æ—¥å¿—è¦æ±‚

---

**ğŸ“‹ é‡è¦æé†’**:
1. æœ¬æŠ€èƒ½ä¸¥æ ¼éµå¾ªIOE-DREAMå››å±‚æ¶æ„è§„èŒƒ
2. æ‰€æœ‰ä»£ç ç¤ºä¾‹ä½¿ç”¨Jakarta EE 3.0+åŒ…åè§„èŒƒ
3. ç»Ÿä¸€ä½¿ç”¨@Resourceä¾èµ–æ³¨å…¥ï¼Œç¦æ­¢ä½¿ç”¨@Autowired
4. ç»Ÿä¸€ä½¿ç”¨@Mapperæ³¨è§£å’ŒDaoåç¼€å‘½å
5. é‡ç‚¹å…³æ³¨ç›‘æ§æ•°æ®çš„å‡†ç¡®æ€§å’Œå®æ—¶æ€§
6. å¿…é¡»æ”¯æŒé«˜å¹¶å‘å’Œé«˜æ€§èƒ½çš„ç›‘æ§æ•°æ®å¤„ç†
7. ä¸¥æ ¼éµå¾ªç›‘æ§å®‰å…¨å’Œåˆè§„æ€§è¦æ±‚

**è®©æˆ‘ä»¬ä¸€èµ·å»ºè®¾å¯é ã€é«˜æ•ˆçš„ç›‘æ§ç®¡ç†ä½“ç³»ï¼** ğŸš€

---
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0 - IOE-DREAMä¸ƒå¾®æœåŠ¡ä¸“ä¸šç‰ˆ
**åˆ›å»ºæ—¶é—´**: 2025-12-22
**æŠ€èƒ½ç­‰çº§**: â˜…â˜…â˜…â˜…â˜…â˜… (é¡¶çº§ä¸“å®¶)
**é€‚ç”¨æ¶æ„**: Spring Boot 3.5.8 + Prometheus + Grafana + ELK + Jaeger