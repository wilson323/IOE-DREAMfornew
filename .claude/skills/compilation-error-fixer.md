# ç¼–è¯‘å¼‚å¸¸ä¿®å¤ä¸“å®¶æŠ€èƒ½
## Compilation Error Fixer

**ğŸ¯ æŠ€èƒ½å®šä½**: IOE-DREAMæ™ºæ…§å›­åŒºé¡¹ç›®ç¼–è¯‘å¼‚å¸¸ç³»ç»Ÿæ€§ä¿®å¤ä¸“å®¶ï¼Œæ·±åº¦åˆ†æç¼–è¯‘é”™è¯¯çš„æ ¹æœ¬åŸå› ï¼Œè¯†åˆ«æ–‡æ¡£è¿‡æ—¶é—®é¢˜ï¼Œæä¾›ç³»ç»Ÿæ€§ä¿®å¤æ–¹æ¡ˆ

**âš¡ æŠ€èƒ½ç­‰çº§**: â˜…â˜…â˜…â˜…â˜…â˜… (é¡¶çº§ä¸“å®¶)
**ğŸ¯ é€‚ç”¨åœºæ™¯**: ç¼–è¯‘é”™è¯¯åˆ†æã€æ ¹å› è¯Šæ–­ã€æ–‡æ¡£æ›´æ–°å»ºè®®ã€ç³»ç»Ÿæ€§ä¿®å¤ã€ä»£ç è§„èŒƒç»Ÿä¸€
**ğŸ“Š æŠ€èƒ½è¦†ç›–**: ç¼–è¯‘åˆ†æ | æ ¹å› è¯Šæ–­ | æ–‡æ¡£æ›´æ–° | ç³»ç»Ÿæ€§ä¿®å¤ | è§„èŒƒç»Ÿä¸€ | é¢„é˜²æœºåˆ¶
**ğŸ”§ æŠ€æœ¯æ ˆ**: Java 17 | Spring Boot 3.5.8 | Maven | MyBatis-Plus | å¾®æœåŠ¡æ¶æ„

---

## ğŸ“‹ æŠ€èƒ½æ¦‚è¿°

### **æ ¸å¿ƒä¸“é•¿**
- **ç¼–è¯‘é”™è¯¯æ ¹å› åˆ†æ**: æ·±åº¦åˆ†æç¼–è¯‘é”™è¯¯çš„æ ¹æœ¬åŸå› ï¼ŒåŒºåˆ†ä»£ç é—®é¢˜ã€é…ç½®é—®é¢˜ã€æ–‡æ¡£é—®é¢˜
- **æ–‡æ¡£ä¸€è‡´æ€§æ£€æŸ¥**: è¯†åˆ«ç¼–è¯‘é”™è¯¯æ˜¯å¦ç”±æ–‡æ¡£å†…å®¹è¿‡æ—¶æˆ–ä¸ä¸€è‡´å¯¼è‡´
- **ç³»ç»Ÿæ€§ä¿®å¤ç­–ç•¥**: æä¾›å…¨å±€ç»Ÿä¸€çš„ç¼–è¯‘é”™è¯¯ä¿®å¤ç­–ç•¥
- **é¢„é˜²æœºåˆ¶å»ºç«‹**: å»ºç«‹ç¼–è¯‘é”™è¯¯é¢„é˜²æœºåˆ¶ï¼Œé¿å…ç±»ä¼¼é—®é¢˜é‡å¤å‡ºç°
- **æ–‡æ¡£æ›´æ–°åè°ƒ**: ä¸å…¶ä»–ä¸“å®¶æŠ€èƒ½åä½œï¼Œç¡®ä¿æ–‡æ¡£ä¸ä»£ç ä¿æŒä¸€è‡´

### **è§£å†³èƒ½åŠ›**
- **ç¼–è¯‘é”™è¯¯åˆ†ç±»**: å°†ç¼–è¯‘é”™è¯¯æŒ‰ç±»å‹ã€ä¸¥é‡ç¨‹åº¦ã€å½±å“èŒƒå›´è¿›è¡Œåˆ†ç±»
- **æ ¹å› å…³è”åˆ†æ**: åˆ†æç¼–è¯‘é”™è¯¯ä¸æ–‡æ¡£è§„èŒƒçš„å…³è”æ€§
- **æ–‡æ¡£æ›´æ–°å»ºè®®**: å½“è¯†åˆ«åˆ°æ–‡æ¡£è¿‡æ—¶æ—¶ï¼Œæä¾›å…·ä½“çš„æ–‡æ¡£æ›´æ–°å»ºè®®
- **æŠ€èƒ½æ›´æ–°åè°ƒ**: åè°ƒç›¸å…³æŠ€èƒ½çš„æ›´æ–°ï¼Œç¡®ä¿æŠ€èƒ½å†…å®¹ä¸å®é™…éœ€æ±‚åŒ¹é…
- **è‡ªåŠ¨åŒ–ä¿®å¤**: æä¾›è‡ªåŠ¨åŒ–ç¼–è¯‘é”™è¯¯ä¿®å¤æ–¹æ¡ˆ
- **è´¨é‡ä¿éšœ**: ç¡®ä¿ä¿®å¤åçš„ä»£ç ç¬¦åˆé¡¹ç›®ç»Ÿä¸€è§„èŒƒ

---

## ğŸš¨ ç¼–è¯‘é”™è¯¯åˆ†ç±»ä½“ç³»

### **ç¼–è¯‘é”™è¯¯ç±»å‹åˆ†ç±»**

#### **1. æ–‡æ¡£è¿‡æ—¶ç±»é”™è¯¯**
```java
@Component
@Slf4j
public class DocumentationOutdatedAnalyzer {

    /**
     * åˆ†ææ–‡æ¡£è¿‡æ—¶å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯
     */
    public DocumentationAnalysisResult analyzeDocumentationOutdatedErrors(
            List<CompilationError> compilationErrors) {

        log.info("[æ–‡æ¡£åˆ†æ] å¼€å§‹åˆ†ææ–‡æ¡£è¿‡æ—¶å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯");

        DocumentationAnalysisResult result = new DocumentationAnalysisResult();

        for (CompilationError error : compilationErrors) {
            DocumentationOutdatedType type = classifyDocumentationOutdatedError(error);

            switch (type) {
                case TECHNOLOGY_STACK_MISMATCH:
                    analyzeTechnologyStackMismatch(error, result);
                    break;

                case PACKAGE_STRUCTURE_CHANGED:
                    analyzePackageStructureChange(error, result);
                    break;

                case ANNOTATION_DEPRECATED:
                    analyzeAnnotationDeprecation(error, result);
                    break;

                case API_SIGNATURE_CHANGED:
                    analyzeApiSignatureChange(error, result);
                    break;

                case CONFIGURATION_OUTDATED:
                    analyzeConfigurationOutdated(error, result);
                    break;

                default:
                    log.debug("[æ–‡æ¡£åˆ†æ] æœªè¯†åˆ«çš„æ–‡æ¡£è¿‡æ—¶é”™è¯¯ç±»å‹: {}", error.getMessage());
                    break;
            }
        }

        return result;
    }

    /**
     * åˆ†ææŠ€æœ¯æ ˆä¸åŒ¹é…é”™è¯¯
     */
    private void analyzeTechnologyStackMismatch(CompilationError error,
                                               DocumentationAnalysisResult result) {
        log.warn("[æ–‡æ¡£åˆ†æ] æ£€æµ‹åˆ°æŠ€æœ¯æ ˆä¸åŒ¹é…: {}", error.getMessage());

        DocumentationUpdateNeed updateNeed = new DocumentationUpdateNeed();

        if (error.getMessage().contains("jakarta.persistence")) {
            updateNeed.setDocumentType(DocumentationType.TECHNOLOGY_STACK_GUIDE);
            updateNeed.setCurrentIssue("æ–‡æ¡£ä¸­ä»å¼•ç”¨JPAæ³¨è§£è§„èŒƒï¼Œä½†é¡¹ç›®å·²è¿ç§»åˆ°MyBatis-Plus");
            updateNeed.setRecommendedAction(
                "æ›´æ–°æ‰€æœ‰ç›¸å…³æ–‡æ¡£ä¸­çš„å®ä½“ç±»æ³¨è§£è§„èŒƒï¼š\n" +
                "1. CLAUDE.md - æ›´æ–°æŠ€æœ¯æ ˆè§„èŒƒæè¿°\n" +
                "2. ç›¸å…³ä¸šåŠ¡æŠ€èƒ½æ–‡æ¡£ - æ›´æ–°ä»£ç ç¤ºä¾‹\n" +
                "3. æŠ€æœ¯è§„èŒƒæ–‡æ¡£ - æ›´æ–°æ³¨è§£ä½¿ç”¨æŒ‡å—"
            );

            updateNeed.addAffectedDocument("CLAUDE.md");
            updateNeed.addAffectedDocument(".claude/skills/*-service-specialist.md");
            updateNeed.addAffectedDocument("documentation/technical/ENTITY_DESIGN_STANDARDS*.md");

            updateNeed.setPriority(UpdatePriority.HIGH);
            updateNeed.setEstimatedEffort("4å°æ—¶");
        }

        if (error.getMessage().contains("javax.")) {
            updateNeed.setDocumentType(DocumentationType.MIGRATION_GUIDE);
            updateNeed.setCurrentIssue("ä»£ç ä¸­ä»åœ¨ä½¿ç”¨javaxåŒ…åï¼Œä½†æŠ€æœ¯æ ˆå·²è¿ç§»åˆ°jakarta");
            updateNeed.setRecommendedAction(
                "æ›´æ–°åŒ…åè¿ç§»æŒ‡å¯¼ï¼š\n" +
                "1. æ£€æŸ¥spring-boot-jakarta-guardian.mdæŠ€èƒ½æ–‡æ¡£\n" +
                "2. ç¡®ä¿æ‰€æœ‰javaxåˆ°jakartaçš„æ˜ å°„å…³ç³»æ­£ç¡®\n" +
                "3. æ›´æ–°ç¤ºä¾‹ä»£ç ä¸­çš„åŒ…åå¼•ç”¨"
            );

            updateNeed.addAffectedDocument(".claude/skills/spring-boot-jakarta-guardian.md");
            updateNeed.addAffectedDocument("documentation/technical/JAKARTA_MIGRATION_GUIDE.md");

            updateNeed.setPriority(UpdatePriority.CRITICAL);
            updateNeed.setEstimatedEffort("2å°æ—¶");
        }

        result.addUpdateNeed(updateNeed);
    }

    /**
     * åˆ†æåŒ…ç»“æ„å˜æ›´é”™è¯¯
     */
    private void analyzePackageStructureChange(CompilationError error,
                                               DocumentationAnalysisResult result) {
        log.warn("[æ–‡æ¡£åˆ†æ] æ£€æµ‹åˆ°åŒ…ç»“æ„å˜æ›´: {}", error.getMessage());

        DocumentationUpdateNeed updateNeed = new DocumentationUpdateNeed();

        if (error.getMessage().contains("package") && error.getMessage().contains("does not exist")) {
            updateNeed.setDocumentType(DocumentationType.PACKAGE_STRUCTURE_GUIDE);
            updateNeed.setCurrentIssue("æ–‡æ¡£ä¸­çš„åŒ…è·¯å¾„æè¿°ä¸å®é™…ä»£ç ç»“æ„ä¸ä¸€è‡´");

            // æå–é”™è¯¯çš„åŒ…è·¯å¾„
            String incorrectPackage = extractPackageName(error.getMessage());

            updateNeed.setRecommendedAction(
                String.format("æ›´æ–°åŒ…è·¯å¾„è§„èŒƒï¼š\n" +
                "1. ç¡®å®šæ­£ç¡®çš„åŒ…ç»“æ„: %s\n" +
                "2. æ›´æ–°CLAUDE.mdä¸­çš„åŒ…è·¯å¾„æè¿°\n" +
                "3. æ›´æ–°ç›¸å…³æŠ€èƒ½æ–‡æ¡£ä¸­çš„importç¤ºä¾‹\n" +
                "4. éªŒè¯æ‰€æœ‰ç¤ºä¾‹ä»£ç çš„æ­£ç¡®æ€§", incorrectPackage)
            );

            updateNeed.addAffectedDocument("CLAUDE.md");
            updateNeed.addAffectedDocument(".claude/skills/*");

            updateNeed.setPriority(UpdatePriority.HIGH);
            updateNeed.setEstimatedEffort("3å°æ—¶");
        }

        result.addUpdateNeed(updateNeed);
    }
}
```

#### **2. æŠ€èƒ½å†…å®¹è¿‡æ—¶ç±»é”™è¯¯**
```java
@Component
@Slf4j
public class SkillsOutdatedAnalyzer {

    /**
     * åˆ†ææŠ€èƒ½å†…å®¹è¿‡æ—¶å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯
     */
    public SkillsAnalysisResult analyzeSkillsOutdatedErrors(
            List<CompilationError> compilationErrors,
            Map<String, SkillMetadata> availableSkills) {

        log.info("[æŠ€èƒ½åˆ†æ] å¼€å§‹åˆ†ææŠ€èƒ½å†…å®¹è¿‡æ—¶å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯");

        SkillsAnalysisResult result = new SkillsAnalysisResult();

        for (CompilationError error : compilationErrors) {
            SkillsOutdatedType type = classifySkillsOutdatedError(error);

            switch (type) {
                case SKILL_CODE_EXAMPLE_MISMATCH:
                    analyzeSkillCodeExampleMismatch(error, availableSkills, result);
                    break;

                case SKILL_TECHNOLOGY_OUTDATED:
                    analyzeSkillTechnologyOutdated(error, availableSkills, result);
                    break;

                case SKILL_ARCHITECTURE_PATTERN_CHANGED:
                    analyzeSkillArchitecturePatternChange(error, availableSkills, result);
                    break;

                case SKILL_DEPENDENCY_SUGGESTION_INVALID:
                    analyzeSkillDependencySuggestionInvalid(error, availableSkills, result);
                    break;

                default:
                    log.debug("[æŠ€èƒ½åˆ†æ] æœªè¯†åˆ«çš„æŠ€èƒ½è¿‡æ—¶é”™è¯¯ç±»å‹: {}", error.getMessage());
                    break;
            }
        }

        return result;
    }

    /**
     * åˆ†ææŠ€èƒ½ä»£ç ç¤ºä¾‹ä¸åŒ¹é…
     */
    private void analyzeSkillCodeExampleMismatch(CompilationError error,
                                                Map<String, SkillMetadata> availableSkills,
                                                SkillsAnalysisResult result) {
        log.warn("[æŠ€èƒ½åˆ†æ] æ£€æµ‹åˆ°æŠ€èƒ½ä»£ç ç¤ºä¾‹ä¸åŒ¹é…: {}", error.getMessage());

        // è¯†åˆ«é”™è¯¯æ¶‰åŠçš„æŠ€èƒ½ç±»å‹
        SkillType affectedSkillType = identifyAffectedSkillType(error);

        if (affectedSkillType != null) {
            SkillUpdateNeed updateNeed = new SkillUpdateNeed();

            updateNeed.setSkillType(affectedSkillType);
            updateNeed.setCurrentIssue(
                String.format("æŠ€èƒ½%sä¸­çš„ä»£ç ç¤ºä¾‹ä¸å½“å‰æŠ€æœ¯æ ˆä¸åŒ¹é…", affectedSkillType.getName()));

            updateNeed.setRecommendedAction(
                String.format("æ›´æ–°%sæŠ€èƒ½æ–‡æ¡£ï¼š\n" +
                "1. æ›´æ–°æŠ€æœ¯æ ˆç‰ˆæœ¬ä¿¡æ¯\n" +
                "2. ä¿®æ­£ä»£ç ç¤ºä¾‹ä¸­çš„æ³¨è§£å’ŒåŒ…å\n" +
                "3. ç¡®ä¿ç¤ºä¾‹ä»£ç ç¬¦åˆå½“å‰é¡¹ç›®è§„èŒƒ\n" +
                "4. éªŒè¯ç¤ºä¾‹ä»£ç çš„ç¼–è¯‘æ­£ç¡®æ€§", affectedSkillType.getName()));

            updateNeed.setSpecificFixes(generateSpecificSkillFixes(affectedSkillType, error));
            updateNeed.setPriority(UpdatePriority.HIGH);
            updateNeed.setEstimatedEffort("2å°æ—¶");

            result.addUpdateNeed(updateNeed);
        }
    }

    /**
     * ç”ŸæˆæŠ€èƒ½å…·ä½“ä¿®å¤å»ºè®®
     */
    private List<String> generateSpecificSkillFixes(SkillType skillType, CompilationError error) {
        List<String> fixes = new ArrayList<>();

        switch (skillType) {
            case ACCESS_SERVICE_SPECIALIST:
                fixes.add("æ›´æ–°@Entityä¸º@TableNameæ³¨è§£");
                fixes.add("æ›´æ–°@Repositoryä¸º@Mapperæ³¨è§£");
                fixes.add("æ›´æ–°importè¯­å¥ä¸ºMyBatis-PlusåŒ…å");
                break;

            case ATTENDANCE_SERVICE_SPECIALIST:
                fixes.add("ä¿®æ­£JPAæ³¨è§£ç¤ºä¾‹");
                fixes.add("æ›´æ–°ä¾èµ–æ³¨å…¥è§„èŒƒ(@Resource)");
                fixes.add("æ›´æ–°åŒ…è·¯å¾„ç»“æ„ç¤ºä¾‹");
                break;

            case FOUR_TIER_ARCHITECTURE_GUARDIAN:
                fixes.add("æ›´æ–°æ¶æ„éªŒè¯è§„åˆ™");
                fixes.add("ä¿®æ­£æŠ€æœ¯æ ˆåˆè§„æ£€æŸ¥");
                fixes.add("æ›´æ–°ç¤ºä¾‹ä»£ç æ¶æ„");
                break;

            default:
                fixes.add("æ£€æŸ¥å¹¶æ›´æ–°æ‰€æœ‰JPAæ³¨è§£å¼•ç”¨");
                fixes.add("éªŒè¯importè¯­å¥æ­£ç¡®æ€§");
                fixes.add("ç¡®ä¿ä»£ç ç¤ºä¾‹å¯ç¼–è¯‘");
                break;
        }

        return fixes;
    }
}
```

---

## ğŸ”§ ç³»ç»Ÿæ€§ä¿®å¤ç­–ç•¥

### **3. ç¼–è¯‘é”™è¯¯è‡ªåŠ¨ä¿®å¤**
```java
@Component
@Slf4j
public class CompilationErrorAutoFixer {

    /**
     * ç³»ç»Ÿæ€§ä¿®å¤ç¼–è¯‘é”™è¯¯
     */
    public CompilationFixResult fixCompilationErrors(
            List<CompilationError> errors,
            CompilationFixContext context) {

        log.info("[ç¼–è¯‘ä¿®å¤] å¼€å§‹ç³»ç»Ÿæ€§ä¿®å¤{}ä¸ªç¼–è¯‘é”™è¯¯", errors.size());

        CompilationFixResult result = new CompilationFixResult();

        // 1. åˆ†æé”™è¯¯æ ¹æœ¬åŸå› 
        CompilationAnalysisResult analysis = analyzeCompilationErrors(errors);

        // 2. ç¡®å®šä¿®å¤ç­–ç•¥
        FixStrategy strategy = determineFixStrategy(analysis);

        // 3. æ‰§è¡Œä¿®å¤
        executeFixStrategy(strategy, context, result);

        // 4. éªŒè¯ä¿®å¤æ•ˆæœ
        validateFixResult(errors, result);

        // 5. ç”Ÿæˆæ–‡æ¡£æ›´æ–°å»ºè®®
        generateDocumentationUpdateSuggestions(analysis, result);

        log.info("[ç¼–è¯‘ä¿®å¤] ç¼–è¯‘é”™è¯¯ä¿®å¤å®Œæˆ: æˆåŠŸä¿®å¤{}ä¸ª, éœ€è¦æ‰‹åŠ¨ä¿®å¤{}ä¸ª, éœ€è¦æ–‡æ¡£æ›´æ–°{}ä¸ª",
                result.getAutoFixedCount(),
                result.getManualFixRequiredCount(),
                result.getDocumentationUpdateCount());

        return result;
    }

    /**
     * æ‰§è¡Œä¿®å¤ç­–ç•¥
     */
    private void executeFixStrategy(FixStrategy strategy,
                                    CompilationFixContext context,
                                    CompilationFixResult result) {
        for (FixAction action : strategy.getActions()) {
            try {
                executeFixAction(action, context, result);
            } catch (Exception e) {
                log.error("[ç¼–è¯‘ä¿®å¤] æ‰§è¡Œä¿®å¤åŠ¨ä½œå¤±è´¥: {}", action.getDescription(), e);
                result.addFailedAction(action, e.getMessage());
            }
        }
    }

    /**
     * æ‰§è¡Œå•ä¸ªä¿®å¤åŠ¨ä½œ
     */
    private void executeFixAction(FixAction action,
                                  CompilationFixContext context,
                                  CompilationFixResult result) {
        switch (action.getType()) {
            case ANNOTATION_REPLACEMENT:
                executeAnnotationReplacement(action, context, result);
                break;

            case IMPORT_STATEMENT_FIX:
                executeImportStatementFix(action, context, result);
                break;

            case PACKAGE_NAME_UPDATE:
                executePackageNameUpdate(action, context, result);
                break;

            case DEPENDENCY_UPDATE:
                executeDependencyUpdate(action, context, result);
                break;

            case CONFIGURATION_FIX:
                executeConfigurationFix(action, context, result);
                break;

            case MANUAL_FIX_REQUIRED:
                markForManualFix(action, result);
                break;

            default:
                log.warn("[ç¼–è¯‘ä¿®å¤] æœªçŸ¥çš„ä¿®å¤åŠ¨ä½œç±»å‹: {}", action.getType());
                break;
        }
    }

    /**
     * æ‰§è¡Œæ³¨è§£æ›¿æ¢
     */
    private void executeAnnotationReplacement(FixAction action,
                                            CompilationFixContext context,
                                            CompilationFixResult result) {
        String filePath = action.getFilePath();
        String originalAnnotation = action.getOriginalContent();
        String replacementAnnotation = action.getReplacementContent();

        try {
            String fileContent = Files.readString(Paths.get(filePath));

            // æ‰§è¡Œæ³¨è§£æ›¿æ¢
            String fixedContent = fileContent.replace(originalAnnotation, replacementAnnotation);

            // å¦‚æœæœ‰å¤šä¸ªæ›¿æ¢è§„åˆ™ï¼Œåº”ç”¨æ‰€æœ‰è§„åˆ™
            for (ReplacementRule rule : action.getReplacementRules()) {
                fixedContent = fixedContent.replaceAll(rule.getPattern(), rule.getReplacement());
            }

            Files.writeString(Paths.get(filePath), fixedContent);

            result.addAutoFixedFile(filePath, "æ³¨è§£æ›¿æ¢: " + originalAnnotation + " â†’ " + replacementAnnotation);

            log.debug("[ç¼–è¯‘ä¿®å¤] æ³¨è§£æ›¿æ¢å®Œæˆ: {} - {}", filePath, originalAnnotation);

        } catch (Exception e) {
            log.error("[ç¼–è¯‘ä¿®å¤] æ³¨è§£æ›¿æ¢å¤±è´¥: {} - {}", filePath, originalAnnotation, e);
            throw new RuntimeException("æ³¨è§£æ›¿æ¢å¤±è´¥", e);
        }
    }
}
```

### **4. æ–‡æ¡£æ›´æ–°åè°ƒæœºåˆ¶**
```java
@Component
@Slf4j
public class DocumentationUpdateCoordinator {

    /**
     * åè°ƒæ–‡æ¡£æ›´æ–°ï¼Œç¡®ä¿å…¨å±€ä¸€è‡´æ€§
     */
    public DocumentationUpdateResult coordinateDocumentationUpdates(
            CompilationAnalysisResult analysisResult) {

        log.info("[æ–‡æ¡£åè°ƒ] å¼€å§‹åè°ƒæ–‡æ¡£æ›´æ–°");

        DocumentationUpdateResult result = new DocumentationUpdateResult();

        // 1. è¯†åˆ«éœ€è¦æ›´æ–°çš„æ–‡æ¡£
        List<DocumentationUpdateTask> updateTasks = identifyUpdateTasks(analysisResult);

        // 2. æŒ‰ä¼˜å…ˆçº§æ’åºä»»åŠ¡
        sortTasksByPriority(updateTasks);

        // 3. æ£€æŸ¥æ–‡æ¡£æ›´æ–°ä¾èµ–å…³ç³»
        validateUpdateDependencies(updateTasks);

        // 4. æ‰§è¡Œæ–‡æ¡£æ›´æ–°
        executeDocumentationUpdates(updateTasks, result);

        // 5. éªŒè¯æ›´æ–°ç»“æœ
        validateUpdateResults(updateTasks, result);

        // 6. ç”Ÿæˆæ›´æ–°æŠ¥å‘Š
        generateUpdateReport(updateTasks, result);

        log.info("[æ–‡æ¡£åè°ƒ] æ–‡æ¡£æ›´æ–°åè°ƒå®Œæˆ: æ›´æ–°{}ä¸ªæ–‡æ¡£, éœ€è¦å®¡æŸ¥{}ä¸ª",
                result.getUpdatedCount(), result.getReviewRequiredCount());

        return result;
    }

    /**
     * è¯†åˆ«æ–‡æ¡£æ›´æ–°ä»»åŠ¡
     */
    private List<DocumentationUpdateTask> identifyUpdateTasks(CompilationAnalysisResult analysisResult) {
        List<DocumentationUpdateTask> tasks = new ArrayList<>();

        // å¤„ç†æ–‡æ¡£è¿‡æ—¶å¯¼è‡´çš„æ›´æ–°éœ€æ±‚
        for (DocumentationUpdateNeed updateNeed : analysisResult.getDocumentationUpdateNeeds()) {
            DocumentationUpdateTask task = new DocumentationUpdateTask();

            task.setTaskType(TaskType.DOCUMENTATION_UPDATE);
            task.setDocumentType(updateNeed.getDocumentType());
            task.setAffectedDocuments(updateNeed.getAffectedDocuments());
            task.setUpdateAction(updateNeed.getRecommendedAction());
            task.setPriority(updateNeed.getPriority());
            task.setEstimatedEffort(updateNeed.getEstimatedEffort());

            tasks.add(task);
        }

        // å¤„ç†æŠ€èƒ½å†…å®¹è¿‡æ—¶å¯¼è‡´çš„æ›´æ–°éœ€æ±‚
        for (SkillsUpdateNeed updateNeed : analysisResult.getSkillsUpdateNeeds()) {
            DocumentationUpdateTask task = new DocumentationUpdateTask();

            task.setTaskType(TaskType.SKILL_UPDATE);
            task.setSkillType(updateNeed.getSkillType());
            task.setSpecificFixes(updateNeed.getSpecificFixes());
            task.setPriority(updateNeed.getPriority());
            task.setEstimatedEffort(updateNeed.getEstimatedEffort());

            tasks.add(task);
        }

        return tasks;
    }

    /**
     * æ‰§è¡Œæ–‡æ¡£æ›´æ–°
     */
    private void executeDocumentationUpdates(List<DocumentationUpdateTask> tasks,
                                            DocumentationUpdateResult result) {
        for (DocumentationUpdateTask task : tasks) {
            try {
                executeSingleDocumentationUpdate(task, result);
            } catch (Exception e) {
                log.error("[æ–‡æ¡£åè°ƒ] æ–‡æ¡£æ›´æ–°ä»»åŠ¡æ‰§è¡Œå¤±è´¥: {}", task.getTaskId(), e);
                result.addFailedTask(task, e.getMessage());
            }
        }
    }

    /**
     * æ‰§è¡Œå•ä¸ªæ–‡æ¡£æ›´æ–°
     */
    private void executeSingleDocumentationUpdate(DocumentationUpdateTask task,
                                                  DocumentationUpdateResult result) {
        switch (task.getTaskType()) {
            case DOCUMENTATION_UPDATE:
                executeDocumentationFileUpdate(task, result);
                break;

            case SKILL_UPDATE:
                executeSkillFileUpdate(task, result);
                break;

            case CONFIGURATION_UPDATE:
                executeConfigurationFileUpdate(task, result);
                break;

            default:
                log.warn("[æ–‡æ¡£åè°ƒ] æœªçŸ¥çš„æ›´æ–°ä»»åŠ¡ç±»å‹: {}", task.getTaskType());
                break;
        }
    }

    /**
     * æ‰§è¡ŒæŠ€èƒ½æ–‡ä»¶æ›´æ–°
     */
    private void executeSkillFileUpdate(DocumentationUpdateTask task,
                                        DocumentationUpdateResult result) {
        String skillFilePath = ".claude/skills/" + task.getSkillType().getFileName() + ".md";

        try {
            // è¯»å–ç°æœ‰æŠ€èƒ½æ–‡ä»¶
            String currentContent = Files.readString(Paths.get(skillFilePath));

            // åº”ç”¨æ›´æ–°ä¿®å¤
            String updatedContent = applySkillUpdates(currentContent, task.getSpecificFixes());

            // å†™å…¥æ›´æ–°åçš„å†…å®¹
            Files.writeString(Paths.get(skillFilePath), updatedContent);

            result.addUpdatedSkill(task.getSkillType().getName(), skillFilePath);

            log.info("[æ–‡æ¡£åè°ƒ] æŠ€èƒ½æ–‡æ¡£æ›´æ–°å®Œæˆ: {}", skillFilePath);

        } catch (Exception e) {
            log.error("[æ–‡æ¡£åè°ƒ] æŠ€èƒ½æ–‡æ¡£æ›´æ–°å¤±è´¥: {}", skillFilePath, e);
            throw new RuntimeException("æŠ€èƒ½æ–‡æ¡£æ›´æ–°å¤±è´¥", e);
        }
    }

    /**
     * åº”ç”¨æŠ€èƒ½æ›´æ–°
     */
    private String applySkillUpdates(String content, List<String> fixes) {
        String updatedContent = content;

        for (String fix : fixes) {
            if (fix.contains("@Entity")) {
                updatedContent = updatedContent.replaceAll("jakarta\\.persistence\\.Entity",
                                                          "@Data\\n@TableName(\"table_name\")");
            }

            if (fix.contains("@Repository")) {
                updatedContent = updatedContent.replaceAll("@Repository", "@Mapper");
            }

            if (fix.contains("@Autowired")) {
                updatedContent = updatedContent.replaceAll("@Autowired", "@Resource");
            }

            if (fix.contains("javax.")) {
                updatedContent = updatedContent.replaceAll("javax\\.", "jakarta\\.");
            }
        }

        return updatedContent;
    }
}
```

---

## ğŸ“Š ç¼–è¯‘è´¨é‡ç›‘æ§

### **5. ç¼–è¯‘è´¨é‡è¯„ä¼°ä½“ç³»**
```java
@Component
@Slf4j
public class CompilationQualityMonitor {

    /**
     * è¯„ä¼°é¡¹ç›®ç¼–è¯‘è´¨é‡
     */
    public CompilationQualityReport assessCompilationQuality(String projectPath) {
        log.info("[ç¼–è¯‘è´¨é‡è¯„ä¼°] å¼€å§‹è¯„ä¼°é¡¹ç›®ç¼–è¯‘è´¨é‡");

        CompilationQualityReport report = new CompilationQualityReport();

        // 1. ç¼–è¯‘é”™è¯¯ç‡è¯„ä¼° (æƒé‡: 40%)
        CompilationErrorRateResult errorRateResult = assessCompilationErrorRate(projectPath);
        report.setErrorRateScore(errorRateResult.getScore());

        // 2. ä»£ç è§„èŒƒç¬¦åˆåº¦è¯„ä¼° (æƒé‡: 25%)
        CodeComplianceResult complianceResult = assessCodeCompliance(projectPath);
        report.setComplianceScore(complianceResult.getScore());

        // 3. æ–‡æ¡£ä¸€è‡´æ€§è¯„ä¼° (æƒé‡: 20%)
        DocumentationConsistencyResult consistencyResult = assessDocumentationConsistency(projectPath);
        report.setConsistencyScore(consistencyResult.getScore());

        // 4. é‡å¤é—®é¢˜ç‡è¯„ä¼° (æƒé‡: 15%)
        RecurringIssueResult recurringResult = assessRecurringIssues(projectPath);
        report.setRecurringIssueScore(recurringResult.getScore());

        // è®¡ç®—æ€»åˆ†
        double totalScore = calculateCompilationQualityScore(report);
        report.setOverallScore(totalScore);

        // ç”Ÿæˆè¯„çº§
        report.setQualityGrade(determineQualityGrade(totalScore));

        // ç”Ÿæˆæ”¹è¿›å»ºè®®
        report.setImprovementPlan(generateQualityImprovementPlan(report));

        log.info("[ç¼–è¯‘è´¨é‡è¯„ä¼°] ç¼–è¯‘è´¨é‡è¯„ä¼°å®Œæˆ: æ€»åˆ†={}, è¯„çº§={}",
                totalScore, report.getQualityGrade());

        return report;
    }

    /**
     * ç”Ÿæˆç¼–è¯‘è´¨é‡æ”¹è¿›è®¡åˆ’
     */
    private List<QualityImprovementAction> generateQualityImprovementPlan(CompilationQualityReport report) {
        List<QualityImprovementAction> improvements = new ArrayList<>();

        if (report.getErrorRateScore() < 80) {
            improvements.add(new QualityImprovementAction(
                ActionType.REDUCE_COMPILATION_ERRORS,
                "å‡å°‘ç¼–è¯‘é”™è¯¯",
                "å®æ–½æ›´ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥å’Œè‡ªåŠ¨åŒ–æ£€æŸ¥",
                Priority.HIGH,
                "1-2å‘¨"
            ));
        }

        if (report.getComplianceScore() < 85) {
            improvements.add(new QualityImprovementAction(
                ActionType.IMPROVE_CODE_COMPLIANCE,
                "æé«˜ä»£ç è§„èŒƒç¬¦åˆåº¦",
                "æ›´æ–°æ–‡æ¡£å’ŒæŠ€èƒ½ï¼ŒåŠ å¼ºè§„èŒƒåŸ¹è®­",
                Priority.MEDIUM,
                "2-3å‘¨"
            ));
        }

        if (report.getConsistencyScore() < 90) {
            improvements.add(new QualityImprovementAction(
                ActionType.IMPROVE_DOCUMENTATION_CONSISTENCY,
                "æ”¹è¿›æ–‡æ¡£ä¸€è‡´æ€§",
                "å»ºç«‹æ–‡æ¡£ç‰ˆæœ¬æ§åˆ¶å’Œå®¡æŸ¥æœºåˆ¶",
                Priority.MEDIUM,
                "1-2å‘¨"
            ));
        }

        if (report.getRecurringIssueScore() < 85) {
            improvements.add(new QualityImprovementAction(
                ActionType.REDUCE_RECURRING_ISSUES,
                "å‡å°‘é‡å¤é—®é¢˜",
                "åˆ†ææ ¹æœ¬åŸå› ï¼Œå»ºç«‹é¢„é˜²æœºåˆ¶",
                Priority.HIGH,
                "2-4å‘¨"
            ));
        }

        return improvements;
    }
}
```

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### **1. ç¼–è¯‘å¼‚å¸¸åˆ†æ**
```bash
# æ·±åº¦åˆ†æç¼–è¯‘å¼‚å¸¸ï¼Œè¯†åˆ«æ ¹æœ¬åŸå› 
/call-skills compilation-error-fixer "æ·±åº¦åˆ†æé¡¹ç›®ç¼–è¯‘å¼‚å¸¸ï¼Œè¯†åˆ«æ–‡æ¡£è¿‡æ—¶é—®é¢˜"
```

### **2. ç³»ç»Ÿæ€§ç¼–è¯‘ä¿®å¤**
```bash
# ç³»ç»Ÿæ€§ä¿®å¤ç¼–è¯‘é”™è¯¯ï¼ŒåŒ…å«æ–‡æ¡£æ›´æ–°
/call-skills compilation-error-fixer "ç³»ç»Ÿæ€§ä¿®å¤ç¼–è¯‘é”™è¯¯ï¼Œç¡®ä¿å…¨å±€ä¸€è‡´æ€§"
```

### **3. ç¼–è¯‘è´¨é‡è¯„ä¼°**
```bash
# è¯„ä¼°é¡¹ç›®ç¼–è¯‘è´¨é‡å’Œæ–‡æ¡£ä¸€è‡´æ€§
/call-skills compilation-error-fixer "è¯„ä¼°ç¼–è¯‘è´¨é‡ï¼Œç”Ÿæˆæ”¹è¿›è®¡åˆ’"
```

### **4. åè°ƒæ–‡æ¡£æ›´æ–°**
```bash
# åè°ƒç›¸å…³æ–‡æ¡£å’ŒæŠ€èƒ½çš„æ›´æ–°
/call-skills compilation-error-fixer "åè°ƒæ–‡æ¡£æ›´æ–°ï¼Œç¡®ä¿å…¨å±€è§„èŒƒç»Ÿä¸€"
```

---

## ğŸ”„ ä¸å…¶ä»–æŠ€èƒ½çš„åä½œ

### **åä½œå…³ç³»å›¾**
```
compilation-error-fixer (ç¼–è¯‘å¼‚å¸¸ä¿®å¤ä¸“å®¶)
    â†“ åä½œ
global-dependency-manager (å…¨å±€ä¾èµ–ç®¡ç†ä¸“å®¶)
    â†“ åä½œ
four-tier-architecture-guardian (å››å±‚æ¶æ„å®ˆæŠ¤ä¸“å®¶)
    â†“ åä½œ
spring-boot-jakarta-guardian (æŠ€æœ¯æ ˆç»Ÿä¸€å®ˆæŠ¤ä¸“å®¶)
```

### **åä½œåœºæ™¯**
1. **ä¾èµ–é—®é¢˜**: ä¸global-dependency-manageråä½œè§£å†³ä¾èµ–ç›¸å…³ç¼–è¯‘é”™è¯¯
2. **æ¶æ„è¿è§„**: ä¸four-tier-architecture-guardianåä½œä¿®å¤æ¶æ„è¿è§„
3. **æŠ€æœ¯æ ˆé—®é¢˜**: ä¸spring-boot-jakarta-guardianåä½œå¤„ç†æŠ€æœ¯æ ˆè¿ç§»
4. **æ–‡æ¡£æ›´æ–°**: åè°ƒæ‰€æœ‰ç›¸å…³æŠ€èƒ½çš„æ–‡æ¡£æ›´æ–°

---

## ğŸ“ˆ æŠ€èƒ½è´¨é‡ä¿éšœ

### **æ ¸å¿ƒèƒ½åŠ›æŒ‡æ ‡**
- **æ ¹å› åˆ†æå‡†ç¡®ç‡**: 95%+
- **è‡ªåŠ¨ä¿®å¤æˆåŠŸç‡**: 90%+
- **æ–‡æ¡£æ›´æ–°å‡†ç¡®ç‡**: 98%+
- **é—®é¢˜é¢„é˜²æœ‰æ•ˆæ€§**: 85%+
- **åä½œæ•ˆç‡**: æå‡40%

### **æ”¯æŒçš„ç¼–è¯‘é”™è¯¯ç±»å‹**
- âœ… è¯­æ³•é”™è¯¯ (Syntax Errors)
- âœ… ç±»å‹é”™è¯¯ (Type Errors)
- âœ… ä¾èµ–é”™è¯¯ (Dependency Errors)
- âœ… é…ç½®é”™è¯¯ (Configuration Errors)
- âœ… æ¶æ„è¿è§„é”™è¯¯ (Architecture Violations)
- âœ… æ–‡æ¡£ä¸ä¸€è‡´é”™è¯¯ (Documentation Inconsistencies)

---

## ğŸ“ æŠ€èƒ½æ”¯æŒä¸åé¦ˆ

### **ä½¿ç”¨å»ºè®®**
1. **ç¼–è¯‘å¼‚å¸¸åˆ†æ**: ä¼˜å…ˆä½¿ç”¨æœ¬æŠ€èƒ½è¿›è¡Œæ ¹å› åˆ†æ
2. **ç³»ç»Ÿæ€§ä¿®å¤**: é…åˆglobal-dependency-managerè¿›è¡Œç³»ç»Ÿæ€§ä¿®å¤
3. **æ–‡æ¡£ç»´æŠ¤**: å®šæœŸæ£€æŸ¥æ–‡æ¡£ä¸ä»£ç çš„ä¸€è‡´æ€§
4. **è´¨é‡ç›‘æ§**: å»ºç«‹ç¼–è¯‘è´¨é‡ç›‘æ§æœºåˆ¶

### **æœ€ä½³å®è·µ**
1. åˆ†æç¼–è¯‘é”™è¯¯æ—¶ï¼Œå…ˆæ£€æŸ¥æ˜¯å¦ä¸ºæ–‡æ¡£è¿‡æ—¶é—®é¢˜
2. ä¿®å¤ä»£ç æ—¶ï¼ŒåŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£å’ŒæŠ€èƒ½
3. å»ºç«‹ç¼–è¯‘é”™è¯¯çš„åˆ†ç±»å’Œå¤„ç†æ ‡å‡†
4. å®šæœŸè¯„ä¼°ç¼–è¯‘è´¨é‡ï¼ŒæŒç»­æ”¹è¿›

---

**ğŸ“‹ æŠ€èƒ½ä¿¡æ¯**
- **ç‰ˆæœ¬**: v1.0.0
- **åˆ›å»ºæ—¶é—´**: 2025-12-22
- **ç»´æŠ¤å›¢é˜Ÿ**: IOE-DREAMæ¶æ„å§”å‘˜ä¼š
- **é€‚ç”¨èŒƒå›´**: ç¼–è¯‘å¼‚å¸¸ç³»ç»Ÿæ€§åˆ†æå’Œä¿®å¤
- **æŠ€èƒ½çŠ¶æ€**: æ­£å¼å‘å¸ƒ

**ğŸ¯ æ ¸å¿ƒä»·å€¼**: æä¾›ç¼–è¯‘å¼‚å¸¸çš„ç³»ç»Ÿæ€§è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡æ·±åº¦åˆ†ææ ¹å› ã€åè°ƒæ–‡æ¡£æ›´æ–°ã€ç¡®ä¿å…¨å±€ä¸€è‡´æ€§ï¼Œä¸ºé¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§æä¾›å¼ºæœ‰åŠ›ä¿éšœ