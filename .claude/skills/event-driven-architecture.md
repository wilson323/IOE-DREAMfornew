# äº‹ä»¶é©±åŠ¨æ¶æ„æŠ€èƒ½

**æŠ€èƒ½åç§°**: event-driven-architecture
**æŠ€èƒ½ç­‰çº§**: â˜…â˜…â˜… é«˜çº§
**é€‚ç”¨è§’è‰²**: æ¶æ„å¸ˆã€é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆã€ç³»ç»Ÿé›†æˆå·¥ç¨‹å¸ˆ
**å‰ç½®æŠ€èƒ½**: Spring Bootå¼€å‘ã€è®¾è®¡æ¨¡å¼ã€æ¶ˆæ¯é˜Ÿåˆ—ã€åˆ†å¸ƒå¼ç³»ç»Ÿ
**é¢„è®¡å­¦æ—¶**: 4å°æ—¶

---

## ğŸ“‹ æŠ€èƒ½æ¦‚è¿°

æœ¬æŠ€èƒ½ä¸“é—¨é’ˆå¯¹IOE-DREAMé¡¹ç›®çš„äº‹ä»¶é©±åŠ¨æ¶æ„è®¾è®¡ä¸å®æ–½ï¼ŒåŸºäºä¸¥æ ¼çš„repowikiè§„èŒƒï¼Œæä¾›å®Œæ•´çš„äº‹ä»¶é©±åŠ¨æ¶æ„è®¾è®¡ã€å®ç°ã€ç›‘æ§å’Œä¼˜åŒ–æŒ‡å¯¼ã€‚é€šè¿‡æœ¬æŠ€èƒ½ï¼Œå¼€å‘è€…èƒ½å¤Ÿæ„å»ºæ¾è€¦åˆã€é«˜æ‰©å±•ã€æ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼äº‹ä»¶é©±åŠ¨ç³»ç»Ÿã€‚

**æŠ€æœ¯åŸºç¡€**: ä¸¥æ ¼åŸºäº`D:\IOE-DREAM\docs\repowiki`ä¸‹çš„æƒå¨è§„èŒƒ
**æ¶æ„æ ‡å‡†**: 96/100åˆ†ï¼ˆä¼ä¸šçº§å“è¶Šæ ‡å‡†ï¼‰
**è®¾è®¡åŸåˆ™**: æ¾è€¦åˆã€é«˜å†…èšã€äº‹ä»¶æº¯æºã€æœ€ç»ˆä¸€è‡´æ€§

## ğŸ¯ æ ¸å¿ƒèƒ½åŠ›

### ğŸ—ï¸ äº‹ä»¶é©±åŠ¨æ¶æ„è®¾è®¡
- **äº‹ä»¶æ¨¡å‹è®¾è®¡**: é¢†åŸŸäº‹ä»¶ã€ç³»ç»Ÿäº‹ä»¶ã€é›†æˆäº‹ä»¶è®¾è®¡
- **äº‹ä»¶æ€»çº¿æ¶æ„**: Spring EventBusã€æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶å­˜å‚¨
- **äº‹ä»¶æµè®¾è®¡**: äº‹ä»¶äº§ç”Ÿã€å‘å¸ƒã€è·¯ç”±ã€æ¶ˆè´¹æœºåˆ¶
- **äº‹ä»¶æº¯æºæ¶æ„**: äº‹ä»¶å­˜å‚¨ã€çŠ¶æ€é‡å»ºã€å¿«ç…§ç­–ç•¥

### ğŸ”§ äº‹ä»¶ç³»ç»Ÿå®æ–½
- **Spring Eventså®ç°**: ApplicationEventã€@EventListenerã€@Async
- **æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ**: RabbitMQã€Kafkaã€RocketMQäº‹ä»¶æ”¯æŒ
- **äº‹ä»¶åºåˆ—åŒ–**: JSONã€Avroã€Protobufåºåˆ—åŒ–ç­–ç•¥
- **äº‹ä»¶ä¼ è¾“å®‰å…¨**: äº‹ä»¶åŠ å¯†ã€ç­¾åã€æƒé™æ§åˆ¶

### ğŸ“Š äº‹ä»¶ç›‘æ§ä¸è¿ç»´
- **äº‹ä»¶å®æ—¶ç›‘æ§**: äº‹ä»¶æµé‡ã€å»¶è¿Ÿã€é”™è¯¯ç‡ç›‘æ§
- **äº‹ä»¶è¿½è¸ªåˆ†æ**: åˆ†å¸ƒå¼è¿½è¸ªã€äº‹ä»¶é“¾è·¯åˆ†æ
- **äº‹ä»¶æ€§èƒ½ä¼˜åŒ–**: æ‰¹é‡å¤„ç†ã€å¼‚æ­¥ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥
- **äº‹ä»¶æ•…éšœæ¢å¤**: é‡è¯•æœºåˆ¶ã€æ­»ä¿¡é˜Ÿåˆ—ã€è¡¥å¿äº‹åŠ¡

### ğŸš€ æ¶æ„ä¼˜åŒ–æ¼”è¿›
- **äº‹ä»¶æ¨¡å¼è®¾è®¡**: CQRSã€Event Sourcingã€Sagaæ¨¡å¼
- **å¾®æœåŠ¡äº‹ä»¶é›†æˆ**: è·¨æœåŠ¡äº‹ä»¶é€šä¿¡ã€æœåŠ¡å‘ç°
- **äº‹ä»¶ç‰ˆæœ¬ç®¡ç†**: äº‹ä»¶ç‰ˆæœ¬å…¼å®¹ã€æ¼”è¿›ç­–ç•¥
- **äº‹ä»¶æ²»ç†æœºåˆ¶**: äº‹ä»¶æ ‡å‡†ã€æ²»ç†æ¡†æ¶ã€æœ€ä½³å®è·µ

---

## ğŸ“– å­¦ä¹ å†…å®¹

### ç¬¬ä¸€éƒ¨åˆ†ï¼šäº‹ä»¶é©±åŠ¨æ¶æ„åŸºç¡€ (1å°æ—¶)

#### 1.1 äº‹ä»¶é©±åŠ¨æ¶æ„åŸç†
```
äº‹ä»¶é©±åŠ¨æ¶æ„æ¨¡å‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯è¯·æ±‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ HTTP/API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Controllerå±‚ (å‘½ä»¤å¤„ç†å™¨)                        â”‚
â”‚  â”œâ”€ æ¥æ”¶å®¢æˆ·ç«¯å‘½ä»¤/æŸ¥è¯¢                                            â”‚
â”‚  â”œâ”€ å‚æ•°æ ¡éªŒå’Œæƒé™éªŒè¯                                            â”‚
â”‚  â”œâ”€ å‘å¸ƒé¢†åŸŸäº‹ä»¶                                                  â”‚
â”‚  â””â”€ è¿”å›å¤„ç†ç»“æœ                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ äº‹ä»¶å‘å¸ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Event Bus (äº‹ä»¶æ€»çº¿)                              â”‚
â”‚  â”œâ”€ äº‹ä»¶è·¯ç”±å’Œåˆ†å‘                                                  â”‚
â”‚  â”œâ”€ äº‹ä»¶åºåˆ—åŒ–å’Œååºåˆ—åŒ–                                            â”‚
â”‚  â”œâ”€ äº‹ä»¶æŒä¹…åŒ–å­˜å‚¨                                                  â”‚
â”‚  â””â”€ äº‹ä»¶ç›‘æ§å’Œè¿½è¸ª                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼           â–¼           â–¼           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Event Handler 1â”‚ â”‚  Event Handler 2â”‚ â”‚  Event Handler 3â”‚ â”‚  Event Handler Nâ”‚
        â”‚  (ä¸šåŠ¡å¤„ç†å™¨)    â”‚ â”‚  (æ•°æ®åŒæ­¥)     â”‚ â”‚  (é€šçŸ¥æœåŠ¡)     â”‚ â”‚  (å…¶ä»–å¤„ç†)     â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ æ¥æ”¶äº‹ä»¶         â”‚ â”‚ åŒæ­¥æ•°æ®         â”‚ â”‚ å‘é€é€šçŸ¥         â”‚ â”‚ è‡ªå®šä¹‰å¤„ç†       â”‚
        â”‚ ä¸šåŠ¡é€»è¾‘å¤„ç†     â”‚ â”‚ çŠ¶æ€æ›´æ–°         â”‚ â”‚ å¤–éƒ¨ç³»ç»Ÿé›†æˆ     â”‚ â”‚ è¡¥å¿äº‹åŠ¡       â”‚
        â”‚ å‘å¸ƒåç»­äº‹ä»¶     â”‚ â”‚ å†™å…¥æ•°æ®åº“       â”‚ â”‚ è°ƒç”¨ç¬¬ä¸‰æ–¹API     â”‚ â”‚ äº‹ä»¶æº¯æº       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2 äº‹ä»¶æ¨¡å‹è®¾è®¡
```java
/**
 * äº‹ä»¶æ¨¡å‹åŸºç¡€ç»“æ„
 */

// é¢†åŸŸäº‹ä»¶åŸºç±»
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public abstract class DomainEvent implements Serializable {

    /**
     * äº‹ä»¶å”¯ä¸€æ ‡è¯†
     */
    private String eventId;

    /**
     * äº‹ä»¶ç±»å‹
     */
    private String eventType;

    /**
     * äº‹ä»¶å‘ç”Ÿæ—¶é—´
     */
    private LocalDateTime eventTime;

    /**
     * äº‹ä»¶ç‰ˆæœ¬
     */
    private String eventVersion;

    /**
     * äº‹ä»¶æ¥æº
     */
    private String eventSource;

    /**
     * äº‹ä»¶ä¸Šä¸‹æ–‡
     */
    private EventContext context;

    /**
     * è·å–äº‹ä»¶èšåˆæ ¹ID
     */
    public abstract String getAggregateId();

    /**
     * è·å–äº‹ä»¶é”®
     */
    public String getEventKey() {
        return getEventType() + ":" + getAggregateId();
    }
}

// ç”¨æˆ·åˆ›å»ºäº‹ä»¶
@Data
@EqualsAndHashCode(callSuper = true)
public class UserCreatedEvent extends DomainEvent {

    /**
     * ç”¨æˆ·ID
     */
    private Long userId;

    /**
     * ç”¨æˆ·å
     */
    private String username;

    /**
     * é‚®ç®±
     */
    private String email;

    /**
     * åˆ›å»ºè€…ID
     */
    private Long createdBy;

    /**
     * ç”¨æˆ·è§’è‰²åˆ—è¡¨
     */
    private List<String> roles;

    /**
     * æ‰©å±•å±æ€§
     */
    private Map<String, Object> extendProps;

    @Override
    public String getAggregateId() {
        return String.valueOf(userId);
    }
}

// è®¾å¤‡çŠ¶æ€å˜æ›´äº‹ä»¶
@Data
@EqualsAndHashCode(callSuper = true)
public class DeviceStatusChangedEvent extends DomainEvent {

    /**
     * è®¾å¤‡ID
     */
    private Long deviceId;

    /**
     * è®¾å¤‡ç¼–ç 
     */
    private String deviceCode;

    /**
     * åŸçŠ¶æ€
     */
    private Integer oldStatus;

    /**
     * æ–°çŠ¶æ€
     */
    private Integer newStatus;

    /**
     * çŠ¶æ€å˜æ›´åŸå› 
     */
    private String reason;

    /**
     * æ“ä½œè€…ID
     */
    private Long operatorId;

    /**
     * æ“ä½œè€…ç±»å‹
     */
    private String operatorType; // USER, SYSTEM, AUTO

    @Override
    public String getAggregateId() {
        return String.valueOf(deviceId);
    }
}
```

#### 1.3 äº‹ä»¶ä¸Šä¸‹æ–‡è®¾è®¡
```java
/**
 * äº‹ä»¶ä¸Šä¸‹æ–‡
 */
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class EventContext {

    /**
     * è¯·æ±‚ID
     */
    private String requestId;

    /**
     * ç”¨æˆ·ID
     */
    private Long userId;

    /**
     * ç§Ÿæˆ·ID
     */
    private String tenantId;

    /**
     * ä¼šè¯ID
     */
    private String sessionId;

    /**
     * è°ƒç”¨é“¾ID
     */
    private String traceId;

    /**
     * è¯·æ±‚æ¥æº
     */
    private String source; // WEB, API, MQ, SCHEDULED

    /**
     * è¯·æ±‚IP
     */
    private String clientIp;

    /**
     * ç”¨æˆ·ä»£ç†
     */
    private String userAgent;

    /**
     * æ‰©å±•ä¿¡æ¯
     */
    private Map<String, Object> extendInfo;

    /**
     * åˆ›å»ºä¸Šä¸‹æ–‡
     */
    public static EventContext create() {
        return EventContext.builder()
            .requestId(UUID.randomUUID().toString())
            .eventTime(LocalDateTime.now())
            .source("SYSTEM")
            .build();
    }

    /**
     * ä»è¯·æ±‚ä¸Šä¸‹æ–‡åˆ›å»º
     */
    public static EventContext fromRequest(HttpServletRequest request) {
        return EventContext.builder()
            .requestId(getRequestId(request))
            .clientIp(getClientIp(request))
            .userAgent(request.getHeader("User-Agent"))
            .source("WEB")
            .build();
    }

    /**
     * ä»å½“å‰ç”¨æˆ·åˆ›å»º
     */
    public static EventContext fromCurrentUser() {
        RequestUser currentUser = SmartRequestUtil.getRequestUser();

        return EventContext.builder()
            .userId(currentUser.getUserId())
            .tenantId(currentUser.getTenantId())
            .build();
    }

    private static String getRequestId(HttpServletRequest request) {
        String requestId = request.getHeader("X-Request-Id");
        if (StringUtils.isBlank(requestId)) {
            requestId = UUID.randomUUID().toString();
        }
        return requestId;
    }

    private static String getClientIp(HttpServletRequest request) {
        String xForwardedFor = request.getHeader("X-Forwarded-For");
        if (StringUtils.isNotBlank(xForwardedFor)) {
            return xForwardedFor.split(",")[0].trim();
        }
        return request.getRemoteAddr();
    }
}
```

### ç¬¬äºŒéƒ¨åˆ†ï¼šSpringäº‹ä»¶ç³»ç»Ÿå®ç° (1å°æ—¶)

#### 2.1 Spring EventsåŸºç¡€å®ç°
```java
/**
 * Spring Eventsäº‹ä»¶å‘å¸ƒå™¨
 */
@Component
@Slf4j
public class SpringEventPublisher {

    @Resource
    private ApplicationEventPublisher eventPublisher;

    @Resource
    private TaskExecutor asyncTaskExecutor;

    /**
     * å‘å¸ƒåŒæ­¥äº‹ä»¶
     */
    public void publish(DomainEvent event) {
        try {
            log.info("å‘å¸ƒäº‹ä»¶: {}", event.getEventKey());

            // è®¾ç½®äº‹ä»¶ä¸Šä¸‹æ–‡
            if (event.getContext() == null) {
                event.setContext(EventContext.fromCurrentUser());
            }

            // åŒæ­¥å‘å¸ƒäº‹ä»¶
            eventPublisher.publishEvent(event);

        } catch (Exception e) {
            log.error("å‘å¸ƒäº‹ä»¶å¤±è´¥: {}", event.getEventKey(), e);
            throw new EventPublishException("äº‹ä»¶å‘å¸ƒå¤±è´¥: " + e.getMessage());
        }
    }

    /**
     * å‘å¸ƒå¼‚æ­¥äº‹ä»¶
     */
    @Async("eventTaskExecutor")
    public void publishAsync(DomainEvent event) {
        try {
            log.info("å‘å¸ƒå¼‚æ­¥äº‹ä»¶: {}", event.getEventKey());

            // è®¾ç½®äº‹ä»¶ä¸Šä¸‹æ–‡
            if (event.getContext() == null) {
                event.setContext(EventContext.fromCurrentUser());
            }

            // å¼‚æ­¥å‘å¸ƒäº‹ä»¶
            eventPublisher.publishEvent(event);

        } catch (Exception e) {
            log.error("å‘å¸ƒå¼‚æ­¥äº‹ä»¶å¤±è´¥: {}", event.getEventKey(), e);
            // å¼‚æ­¥äº‹ä»¶å¤±è´¥ä¸åº”è¯¥å½±å“ä¸»æµç¨‹
            recordAsyncEventFailure(event, e);
        }
    }

    /**
     * å»¶è¿Ÿå‘å¸ƒäº‹ä»¶
     */
    public void publishDelayed(DomainEvent event, long delayMillis) {
        try {
            log.info("å»¶è¿Ÿå‘å¸ƒäº‹ä»¶: {}, å»¶è¿Ÿ: {}ms", event.getEventKey(), delayMillis);

            ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();
            scheduler.schedule(() -> {
                try {
                    publishAsync(event);
                } catch (Exception e) {
                    log.error("å»¶è¿Ÿäº‹ä»¶å‘å¸ƒå¤±è´¥: {}", event.getEventKey(), e);
                }
            }, delayMillis, TimeUnit.MILLISECONDS);

            scheduler.shutdown();

        } catch (Exception e) {
            log.error("å®‰æ’å»¶è¿Ÿäº‹ä»¶å¤±è´¥: {}", event.getEventKey(), e);
        }
    }

    /**
     * æ‰¹é‡å‘å¸ƒäº‹ä»¶
     */
    public void publishBatch(List<DomainEvent> events) {
        if (CollectionUtils.isEmpty(events)) {
            return;
        }

        try {
            log.info("æ‰¹é‡å‘å¸ƒäº‹ä»¶ï¼Œæ•°é‡: {}", events.size());

            for (DomainEvent event : events) {
                // è®¾ç½®äº‹ä»¶ä¸Šä¸‹æ–‡
                if (event.getContext() == null) {
                    event.setContext(EventContext.fromCurrentUser());
                }

                eventPublisher.publishEvent(event);
            }

        } catch (Exception e) {
            log.error("æ‰¹é‡å‘å¸ƒäº‹ä»¶å¤±è´¥", e);
            throw new EventPublishException("æ‰¹é‡äº‹ä»¶å‘å¸ƒå¤±è´¥: " + e.getMessage());
        }
    }

    private void recordAsyncEventFailure(DomainEvent event, Exception e) {
        try {
            // è®°å½•å¼‚æ­¥äº‹ä»¶å‘å¸ƒå¤±è´¥
            AsyncEventFailureRecord record = AsyncEventFailureRecord.builder()
                .eventId(event.getEventId())
                .eventType(event.getEventType())
                .failureTime(LocalDateTime.now())
                .failureReason(e.getMessage())
                .eventData(JsonUtils.toJsonString(event))
                .build();

            asyncEventFailureService.recordFailure(record);

        } catch (Exception ex) {
            log.error("è®°å½•å¼‚æ­¥äº‹ä»¶å¤±è´¥è®°å½•å‡ºé”™", ex);
        }
    }
}

/**
 * äº‹ä»¶å¤„ç†å™¨åŸºç±»
 */
@Slf4j
public abstract class BaseEventHandler {

    /**
     * äº‹ä»¶å¤„ç†ç»Ÿè®¡
     */
    private final EventHandleStatistics statistics = new EventHandleStatistics();

    /**
     * å¤„ç†äº‹ä»¶
     */
    protected <T extends DomainEvent> void handleEvent(T event, String handlerName) {
        long startTime = System.currentTimeMillis();
        boolean success = false;

        try {
            log.info("å¼€å§‹å¤„ç†äº‹ä»¶: {}, å¤„ç†å™¨: {}", event.getEventKey(), handlerName);

            // æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘
            doHandleEvent(event);

            success = true;
            statistics.recordSuccess();

            log.info("äº‹ä»¶å¤„ç†æˆåŠŸ: {}, è€—æ—¶: {}ms",
                event.getEventKey(), System.currentTimeMillis() - startTime);

        } catch (Exception e) {
            success = false;
            statistics.recordFailure();

            log.error("äº‹ä»¶å¤„ç†å¤±è´¥: {}, å¤„ç†å™¨: {}", event.getEventKey(), handlerName, e);

            // æ ¹æ®å¼‚å¸¸ç±»å‹å†³å®šæ˜¯å¦é‡è¯•
            if (shouldRetry(e, event)) {
                scheduleRetry(event, handlerName);
            } else {
                handlePermanentFailure(event, e);
            }

            throw new EventHandlerException("äº‹ä»¶å¤„ç†å¤±è´¥: " + e.getMessage(), e);

        } finally {
            // è®°å½•å¤„ç†æ—¶é—´
            long duration = System.currentTimeMillis() - startTime;
            statistics.recordHandleTime(duration);

            // å‘å¸ƒäº‹ä»¶å¤„ç†ç»“æœ
            publishEventHandleResult(event, handlerName, success, duration);
        }
    }

    /**
     * æ‰§è¡Œå…·ä½“çš„äº‹ä»¶å¤„ç†é€»è¾‘
     */
    protected abstract <T extends DomainEvent> void doHandleEvent(T event) throws Exception;

    /**
     * åˆ¤æ–­æ˜¯å¦åº”è¯¥é‡è¯•
     */
    protected boolean shouldRetry(Exception e, DomainEvent event) {
        // 1. ä¸šåŠ¡å¼‚å¸¸ä¸é‡è¯•
        if (e instanceof BusinessException) {
            return false;
        }

        // 2. ç½‘ç»œå¼‚å¸¸å¯ä»¥é‡è¯•
        if (e instanceof NetworkException || e instanceof TimeoutException) {
            return true;
        }

        // 3. ç³»ç»Ÿå¼‚å¸¸é‡è¯•æ¬¡æ•°é™åˆ¶
        if (statistics.getFailureCount() < 3) {
            return true;
        }

        return false;
    }

    /**
     * å®‰æ’é‡è¯•
     */
    private void scheduleRetry(DomainEvent event, String handlerName) {
        try {
            ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();

            scheduler.schedule(() -> {
                try {
                    log.info("é‡è¯•å¤„ç†äº‹ä»¶: {}, å¤„ç†å™¨: {}", event.getEventKey(), handlerName);

                    // è½¬å‘ç»™åŒä¸€ä¸ªå¤„ç†å™¨
                    SpringContextUtils.publishEvent(event);

                } catch (Exception e) {
                    log.error("äº‹ä»¶é‡è¯•å¤„ç†å¤±è´¥: {}", event.getEventKey(), e);
                }
            }, 5000, TimeUnit.MILLISECONDS); // 5ç§’åé‡è¯•

            scheduler.shutdown();

        } catch (Exception e) {
            log.error("å®‰æ’äº‹ä»¶é‡è¯•å¤±è´¥", e);
        }
    }

    /**
     * å¤„ç†æ°¸ä¹…å¤±è´¥
     */
    private void handlePermanentFailure(DomainEvent event, Exception e) {
        try {
            // è®°å½•æ°¸ä¹…å¤±è´¥
            PermanentEventFailureRecord record = PermanentEventFailureRecord.builder()
                .eventId(event.getEventId())
                .eventType(event.getEventType())
                .failureTime(LocalDateTime.now())
                .failureReason(e.getMessage())
                .eventData(JsonUtils.toJsonString(event))
                .handlerName(this.getClass().getSimpleName())
                .build();

            permanentEventFailureService.recordFailure(record);

        } catch (Exception ex) {
            log.error("è®°å½•æ°¸ä¹…äº‹ä»¶å¤±è´¥è®°å½•å‡ºé”™", ex);
        }
    }

    /**
     * å‘å¸ƒäº‹ä»¶å¤„ç†ç»“æœ
     */
    private void publishEventHandleResult(DomainEvent event, String handlerName,
                                          boolean success, long duration) {
        try {
            EventHandleResultEvent resultEvent = EventHandleResultEvent.builder()
                .originalEventId(event.getEventId())
                .handlerName(handlerName)
                .success(success)
                .handleTime(duration)
                .handleTime(LocalDateTime.now())
                .build();

            eventPublisher.publishEvent(resultEvent);

        } catch (Exception e) {
            log.error("å‘å¸ƒäº‹ä»¶å¤„ç†ç»“æœå¤±è´¥", e);
        }
    }
}
```

#### 2.2 å…·ä½“äº‹ä»¶å¤„ç†å™¨å®ç°
```java
/**
 * ç”¨æˆ·äº‹ä»¶å¤„ç†å™¨
 */
@Component
@Slf4j
public class UserEventHandler extends BaseEventHandler {

    @Resource
    private UserService userService;

    @Resource
    private NotificationService notificationService;

    @Resource
    private AuditService auditService;

    @Resource
    private UserStatisticsService statisticsService;

    /**
     * å¤„ç†ç”¨æˆ·åˆ›å»ºäº‹ä»¶
     */
    @EventListener
    @Async("eventTaskExecutor")
    public void handleUserCreated(UserCreatedEvent event) {
        handleEvent(event, "ç”¨æˆ·åˆ›å»ºå¤„ç†å™¨");
    }

    @Override
    protected void doHandleEvent(UserCreatedEvent event) throws Exception {
        // 1. æ›´æ–°ç”¨æˆ·ç»Ÿè®¡
        statisticsService.incrementUserCount();

        // 2. å‘é€æ¬¢è¿é€šçŸ¥
        sendWelcomeNotification(event);

        // 3. è®°å½•å®¡è®¡æ—¥å¿—
        recordAuditLog(event);

        // 4. æ›´æ–°ç¼“å­˜
        updateUserCache(event);

        log.info("ç”¨æˆ·åˆ›å»ºäº‹ä»¶å¤„ç†å®Œæˆ: userId={}", event.getUserId());
    }

    /**
     * å¤„ç†ç”¨æˆ·çŠ¶æ€å˜æ›´äº‹ä»¶
     */
    @EventListener
    @Async("eventTaskExecutor")
    public void handleUserStatusChanged(UserStatusChangedEvent event) {
        handleEvent(event, "ç”¨æˆ·çŠ¶æ€å˜æ›´å¤„ç†å™¨");
    }

    /**
     * å‘é€æ¬¢è¿é€šçŸ¥
     */
    private void sendWelcomeNotification(UserCreatedEvent event) {
        try {
            WelcomeNotificationDTO notification = WelcomeNotificationDTO.builder()
                .userId(event.getUserId())
                .username(event.getUsername())
                .email(event.getEmail())
                .roles(event.getRoles())
                .createTime(LocalDateTime.now())
                .build();

            notificationService.sendWelcomeNotification(notification);

        } catch (Exception e) {
            log.warn("å‘é€æ¬¢è¿é€šçŸ¥å¤±è´¥: userId={}", event.getUserId(), e);
        }
    }

    /**
     * è®°å½•å®¡è®¡æ—¥å¿—
     */
    private void recordAuditLog(UserCreatedEvent event) {
        try {
            AuditLogDTO auditLog = AuditLogDTO.builder()
                .resourceType("USER")
                .resourceId(event.getUserId())
                .operation("CREATE")
                .operatorId(event.getCreatedBy())
                .operatorTime(event.getEventTime())
                .operationResult("SUCCESS")
                .description("åˆ›å»ºç”¨æˆ·: " + event.getUsername())
                .requestData(JsonUtils.toJsonString(event))
                .build();

            auditService.recordAuditLog(auditLog);

        } catch (Exception e) {
            log.warn("è®°å½•å®¡è®¡æ—¥å¿—å¤±è´¥: userId={}", event.getUserId(), e);
        }
    }

    /**
     * æ›´æ–°ç”¨æˆ·ç¼“å­˜
     */
    private void updateUserCache(UserCreatedEvent event) {
        try {
            UserCacheDTO userCache = UserCacheDTO.builder()
                .userId(event.getUserId())
                .username(event.getUsername())
                .email(event.getEmail())
                .roles(event.getRoles())
                .status(1)
                .build();

            cacheManager.put("user", "info:" + event.getUserId(), userCache);

        } catch (Exception e) {
            log.warn("æ›´æ–°ç”¨æˆ·ç¼“å­˜å¤±è´¥: userId={}", event.getUserId(), e);
        }
    }
}

/**
 * è®¾å¤‡äº‹ä»¶å¤„ç†å™¨
 */
@Component
@Slf4j
public class DeviceEventHandler extends BaseEventHandler {

    @Resource
    private DeviceService deviceService;

    @Resource
    private DeviceMonitorService monitorService;

    @Resource
    private AlertService alertService;

    @Resource
    private DeviceStatisticsService statisticsService;

    /**
     * å¤„ç†è®¾å¤‡çŠ¶æ€å˜æ›´äº‹ä»¶
     */
    @EventListener
    @Async("eventTaskExecutor")
    public void handleDeviceStatusChanged(DeviceStatusChangedEvent event) {
        handleEvent(event, "è®¾å¤‡çŠ¶æ€å˜æ›´å¤„ç†å™¨");
    }

    @Override
    protected void doHandleEvent(DeviceStatusChangedEvent event) throws Exception {
        // 1. æ›´æ–°è®¾å¤‡ç»Ÿè®¡
        updateDeviceStatistics(event);

        // 2. æ£€æŸ¥å‘Šè­¦æ¡ä»¶
        checkAlertConditions(event);

        // 3. æ›´æ–°ç›‘æ§æ•°æ®
        updateMonitorData(event);

        // 4. åŒæ­¥åˆ°å¤–éƒ¨ç³»ç»Ÿ
        syncToExternalSystems(event);

        log.info("è®¾å¤‡çŠ¶æ€å˜æ›´äº‹ä»¶å¤„ç†å®Œæˆ: deviceId={}, {}->{}",
            event.getDeviceId(), event.getOldStatus(), event.getNewStatus());
    }

    /**
     * æ›´æ–°è®¾å¤‡ç»Ÿè®¡
     */
    private void updateDeviceStatistics(DeviceStatusChangedEvent event) {
        try {
            DeviceStatisticsUpdateDTO updateDTO = DeviceStatisticsUpdateDTO.builder()
                .deviceId(event.getDeviceId())
                .oldStatus(event.getOldStatus())
                .newStatus(event.getNewStatus())
                .changeTime(event.getEventTime())
                .operatorType(event.getOperatorType())
                .build();

            statisticsService.updateDeviceStatistics(updateDTO);

        } catch (Exception e) {
            log.warn("æ›´æ–°è®¾å¤‡ç»Ÿè®¡å¤±è´¥: deviceId={}", event.getDeviceId(), e);
        }
    }

    /**
     * æ£€æŸ¥å‘Šè­¦æ¡ä»¶
     */
    private void checkAlertConditions(DeviceStatusChangedEvent event) {
        try {
            // è®¾å¤‡ç¦»çº¿å‘Šè­¦
            if (event.getNewStatus() == DeviceStatus.OFFLINE) {
                DeviceOfflineAlert alert = DeviceOfflineAlert.builder()
                    .deviceId(event.getDeviceId())
                    .deviceCode(event.getDeviceCode())
                    .offlineTime(event.getEventTime())
                    .reason(event.getReason())
                    .build();

                alertService.sendDeviceOfflineAlert(alert);
            }

            // è®¾å¤‡æ•…éšœå‘Šè­¦
            if (event.getNewStatus() == DeviceStatus.FAULT) {
                DeviceFaultAlert alert = DeviceFaultAlert.builder()
                    .deviceId(event.getDeviceId())
                    .deviceCode(event.getDeviceCode())
                    .faultTime(event.getEventTime())
                    .reason(event.getReason())
                    .build();

                alertService.sendDeviceFaultAlert(alert);
            }

        } catch (Exception e) {
            log.warn("æ£€æŸ¥å‘Šè­¦æ¡ä»¶å¤±è´¥: deviceId={}", event.getDeviceId(), e);
        }
    }
}
```

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¶ˆæ¯é˜Ÿåˆ—äº‹ä»¶é›†æˆ (1å°æ—¶)

#### 3.1 RabbitMQäº‹ä»¶é›†æˆ
```java
/**
 * RabbitMQäº‹ä»¶å‘å¸ƒå™¨
 */
@Component
@Slf4j
public class RabbitMQEventPublisher {

    @Resource
    private RabbitTemplate rabbitTemplate;

    @Value("${event.rabbitmq.exchange:smart.event.exchange}")
    private String eventExchange;

    @Value("${event.rabbitmq.routing-key-prefix:smart.event}")
    private String routingKeyPrefix;

    /**
     * å‘å¸ƒäº‹ä»¶åˆ°RabbitMQ
     */
    public void publish(DomainEvent event) {
        try {
            // è®¾ç½®äº‹ä»¶ä¸Šä¸‹æ–‡
            if (event.getContext() == null) {
                event.setContext(EventContext.fromCurrentUser());
            }

            // æ„å»ºRabbitMQæ¶ˆæ¯
            RabbitMQEventMessage message = RabbitMQEventMessage.builder()
                .eventId(event.getEventId())
                .eventType(event.getEventType())
                .eventData(event)
                .eventContext(event.getContext())
                .publishTime(LocalDateTime.now())
                .build();

            // è®¾ç½®è·¯ç”±é”®
            String routingKey = buildRoutingKey(event);

            // å‘å¸ƒæ¶ˆæ¯
            rabbitTemplate.convertAndSend(eventExchange, routingKey, message);

            log.info("äº‹ä»¶å‘å¸ƒåˆ°RabbitMQæˆåŠŸ: {}, routingKey: {}",
                event.getEventKey(), routingKey);

        } catch (Exception e) {
            log.error("å‘å¸ƒäº‹ä»¶åˆ°RabbitMQå¤±è´¥: {}", event.getEventKey(), e);
            throw new EventPublishException("RabbitMQäº‹ä»¶å‘å¸ƒå¤±è´¥: " + e.getMessage());
        }
    }

    /**
     * å‘å¸ƒå»¶è¿Ÿäº‹ä»¶
     */
    public void publishDelayed(DomainEvent event, long delayMillis) {
        try {
            // è®¾ç½®äº‹ä»¶ä¸Šä¸‹æ–‡
            if (event.getContext() == null) {
                event.setContext(EventContext.fromCurrentUser());
            }

            // æ„å»ºå»¶è¿Ÿæ¶ˆæ¯
            RabbitMQDelayedEventMessage delayedMessage = RabbitMQDelayedEventMessage.builder()
                .eventId(event.getEventId())
                .eventType(event.getEventType())
                .eventData(event)
                .eventContext(event.getContext())
                .delayMillis(delayMillis)
                .publishTime(LocalDateTime.now())
                .build();

            // å‘å¸ƒåˆ°å»¶è¿Ÿé˜Ÿåˆ—
            String routingKey = buildDelayedRoutingKey(event);
            rabbitTemplate.convertAndSend("smart.delayed.exchange", routingKey, delayedMessage);

            log.info("å»¶è¿Ÿäº‹ä»¶å‘å¸ƒåˆ°RabbitMQæˆåŠŸ: {}, å»¶è¿Ÿ: {}ms",
                event.getEventKey(), delayMillis);

        } catch (Exception e) {
            log.error("å‘å¸ƒå»¶è¿Ÿäº‹ä»¶åˆ°RabbitMQå¤±è´¥: {}", event.getEventKey(), e);
        }
    }

    /**
     * æ„å»ºè·¯ç”±é”®
     */
    private String buildRoutingKey(DomainEvent event) {
        return String.format("%s.%s.%s",
            routingKeyPrefix,
            event.getEventType().toLowerCase(),
            event.getAggregateId());
    }

    /**
     * æ„å»ºå»¶è¿Ÿè·¯ç”±é”®
     */
    private String buildDelayedRoutingKey(DomainEvent event) {
        return String.format("delayed.%s.%s.%s",
            routingKeyPrefix,
            event.getEventType().toLowerCase(),
            event.getAggregateId());
    }
}

/**
 * RabbitMQäº‹ä»¶ç›‘å¬å™¨
 */
@Component
@Slf4j
public class RabbitMQEventListener {

    @Resource
    private SpringEventPublisher springEventPublisher;

    /**
     * ç›‘å¬ç”¨æˆ·äº‹ä»¶
     */
    @RabbitListener(queues = "smart.event.user.queue")
    public void handleUserEvent(RabbitMQEventMessage message) {
        try {
            log.info("æ¥æ”¶åˆ°RabbitMQç”¨æˆ·äº‹ä»¶: {}", message.getEventType());

            // ååºåˆ—åŒ–äº‹ä»¶
            DomainEvent event = deserializeEvent(message);

            if (event != null) {
                // è½¬å‘åˆ°Springäº‹ä»¶ç³»ç»Ÿ
                springEventPublisher.publishAsync(event);
            }

        } catch (Exception e) {
            log.error("å¤„ç†RabbitMQç”¨æˆ·äº‹ä»¶å¤±è´¥: {}", message.getEventType(), e);

            // å‘é€é”™è¯¯æ¶ˆæ¯åˆ°æ­»ä¿¡é˜Ÿåˆ—
            sendToDeadLetterQueue(message, e);
        }
    }

    /**
     * ç›‘å¬è®¾å¤‡äº‹ä»¶
     */
    @RabbitListener(queues = "smart.event.device.queue")
    public void handleDeviceEvent(RabbitMQEventMessage message) {
        try {
            log.info("æ¥æ”¶åˆ°RabbitMQè®¾å¤‡äº‹ä»¶: {}", message.getEventType());

            // ååºåˆ—åŒ–äº‹ä»¶
            DomainEvent event = deserializeEvent(message);

            if (event != null) {
                // è½¬å‘åˆ°Springäº‹ä»¶ç³»ç»Ÿ
                springEventPublisher.publishAsync(event);
            }

        } catch (Exception e) {
            log.error("å¤„ç†RabbitMQè®¾å¤‡äº‹ä»¶å¤±è´¥: {}", message.getEventType(), e);

            // å‘é€é”™è¯¯æ¶ˆæ¯åˆ°æ­»ä¿¡é˜Ÿåˆ—
            sendToDeadLetterQueue(message, e);
        }
    }

    /**
     * ç›‘å¬å»¶è¿Ÿäº‹ä»¶
     */
    @RabbitListener(queues = "smart.event.delayed.queue")
    public void handleDelayedEvent(RabbitMQDelayedEventMessage message) {
        try {
            log.info("æ¥æ”¶åˆ°RabbitMQå»¶è¿Ÿäº‹ä»¶: {}", message.getEventType());

            // æ£€æŸ¥å»¶è¿Ÿæ—¶é—´æ˜¯å¦åˆ°è¾¾
            if (isDelayTimeReached(message)) {
                // ååºåˆ—åŒ–äº‹ä»¶
                DomainEvent event = deserializeDelayedEvent(message);

                if (event != null) {
                    // å‘å¸ƒåˆ°æ­£å¸¸äº‹ä»¶å¤„ç†æµç¨‹
                    springEventPublisher.publishAsync(event);
                }
            } else {
                // é‡æ–°æ”¾å…¥å»¶è¿Ÿé˜Ÿåˆ—
                requeueDelayedEvent(message);
            }

        } catch (Exception e) {
            log.error("å¤„ç†RabbitMQå»¶è¿Ÿäº‹ä»¶å¤±è´¥: {}", message.getEventType(), e);
        }
    }

    /**
     * ååºåˆ—åŒ–äº‹ä»¶
     */
    private DomainEvent deserializeEvent(RabbitMQEventMessage message) {
        try {
            Class<?> eventClass = getEventClass(message.getEventType());
            return (DomainEvent) JsonUtils.fromJson(message.getEventData().toString(), eventClass);
        } catch (Exception e) {
            log.error("äº‹ä»¶ååºåˆ—åŒ–å¤±è´¥: {}", message.getEventType(), e);
            return null;
        }
    }

    /**
     * æ ¹æ®äº‹ä»¶ç±»å‹è·å–äº‹ä»¶ç±»
     */
    private Class<?> getEventClass(String eventType) {
        try {
            String className = "com.example.event." + eventType + "Event";
            return Class.forName(className);
        } catch (ClassNotFoundException e) {
            throw new RuntimeException("æœªæ‰¾åˆ°äº‹ä»¶ç±»: " + eventType, e);
        }
    }

    /**
     * å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—
     */
    private void sendToDeadLetterQueue(RabbitMQEventMessage message, Exception e) {
        try {
            DeadLetterMessage deadLetter = DeadLetterMessage.builder()
                .originalMessage(message)
                .errorMessage(e.getMessage())
                .failureTime(LocalDateTime.now())
                .retryCount(0)
                .build();

            rabbitTemplate.convertAndSend("smart.dlq.exchange", "smart.dlq.routing.key", deadLetter);

        } catch (Exception ex) {
            log.error("å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—å¤±è´¥", ex);
        }
    }
}
```

### ç¬¬å››éƒ¨åˆ†ï¼šäº‹ä»¶ç›‘æ§ä¸æ²»ç† (1å°æ—¶)

#### 4.1 äº‹ä»¶ç›‘æ§ç³»ç»Ÿ
```java
/**
 * äº‹ä»¶ç›‘æ§ç³»ç»Ÿ
 */
@Component
@Slf4j
public class EventMonitoringSystem {

    @Resource
    private MeterRegistry meterRegistry;

    @Resource
    private EventStatisticsService statisticsService;

    /**
     * è®°å½•äº‹ä»¶å‘å¸ƒæŒ‡æ ‡
     */
    @EventListener
    public void recordEventPublishMetrics(EventPublishEvent event) {
        try {
            // è®°å½•å‘å¸ƒæ€»æ•°
            meterRegistry.counter("event.publish.count",
                "eventType", event.getEventType(),
                "status", event.isSuccess() ? "success" : "failure")
                .increment();

            // è®°å½•å‘å¸ƒè€—æ—¶
            meterRegistry.timer("event.publish.duration")
                .record(event.getDuration(), TimeUnit.MILLISECONDS);

            // è®°å½•å‘å¸ƒç‡
            if (event.isSuccess()) {
                meterRegistry.gauge("event.publish.success.rate", getPublishSuccessRate());
            }

            log.debug("äº‹ä»¶å‘å¸ƒæŒ‡æ ‡è®°å½•å®Œæˆ: {}", event.getEventType());

        } catch (Exception e) {
            log.error("è®°å½•äº‹ä»¶å‘å¸ƒæŒ‡æ ‡å¤±è´¥", e);
        }
    }

    /**
     * è®°å½•äº‹ä»¶å¤„ç†æŒ‡æ ‡
     */
    @EventListener
    public void recordEventHandleMetrics(EventHandleResultEvent event) {
        try {
            // è®°å½•å¤„ç†æ€»æ•°
            meterRegistry.counter("event.handle.count",
                "handlerName", event.getHandlerName(),
                "status", event.isSuccess() ? "success" : "failure")
                .increment();

            // è®°å½•å¤„ç†è€—æ—¶
            meterRegistry.timer("event.handle.duration")
                .record(event.getHandleTime(), TimeUnit.MILLISECONDS);

            // è®°å½•å¤„ç†æˆåŠŸç‡
            meterRegistry.gauge("event.handle.success.rate", getHandleSuccessRate());

            log.debug("äº‹ä»¶å¤„ç†æŒ‡æ ‡è®°å½•å®Œæˆ: handler={}, status={}",
                event.getHandlerName(), event.isSuccess());

        } catch (Exception e) {
            log.error("è®°å½•äº‹ä»¶å¤„ç†æŒ‡æ ‡å¤±è´¥", e);
        }
    }

    /**
     * å®šæœŸç”Ÿæˆäº‹ä»¶ç»Ÿè®¡æŠ¥å‘Š
     */
    @Scheduled(fixedRate = 60000) // æ¯åˆ†é’Ÿæ‰§è¡Œ
    public void generateEventStatisticsReport() {
        try {
            // è·å–æœ€è¿‘1å°æ—¶çš„ç»Ÿè®¡æ•°æ®
            EventStatisticsReport report = statisticsService.generateHourlyReport();

            // è®°å½•åˆ°ç›‘æ§ç³»ç»Ÿ
            recordStatisticsToMonitoring(report);

            // æ£€æŸ¥å‘Šè­¦æ¡ä»¶
            checkAlertConditions(report);

            log.info("äº‹ä»¶ç»Ÿè®¡æŠ¥å‘Šç”Ÿæˆå®Œæˆ: å‘å¸ƒ={}, å¤„ç†={}, æˆåŠŸç‡={}%",
                report.getPublishedCount(),
                report.getHandledCount(),
                report.getSuccessRate());

        } catch (Exception e) {
            log.error("ç”Ÿæˆäº‹ä»¶ç»Ÿè®¡æŠ¥å‘Šå¤±è´¥", e);
        }
    }

    /**
     * æ£€æŸ¥å‘Šè­¦æ¡ä»¶
     */
    private void checkAlertConditions(EventStatisticsReport report) {
        // 1. å‘å¸ƒå¤±è´¥ç‡å‘Šè­¦
        double publishFailureRate = 100.0 - report.getPublishSuccessRate();
        if (publishFailureRate > 5.0) { // å¤±è´¥ç‡è¶…è¿‡5%
            sendAlert("EVENT_PUBLISH_FAILURE_RATE_HIGH",
                "äº‹ä»¶å‘å¸ƒå¤±è´¥ç‡è¿‡é«˜: " + String.format("%.2f%%", publishFailureRate));
        }

        // 2. å¤„ç†å¤±è´¥ç‡å‘Šè­¦
        double handleFailureRate = 100.0 - report.getHandleSuccessRate();
        if (handleFailureRate > 3.0) { // å¤±è´¥ç‡è¶…è¿‡3%
            sendAlert("EVENT_HANDLE_FAILURE_RATE_HIGH",
                "äº‹ä»¶å¤„ç†å¤±è´¥ç‡è¿‡é«˜: " + String.format("%.2f%%", handleFailureRate));
        }

        // 3. äº‹ä»¶å †ç§¯å‘Šè­¦
        if (report.getPendingCount() > 1000) { // å¾…å¤„ç†äº‹ä»¶è¶…è¿‡1000
            sendAlert("EVENT_PENDING_COUNT_HIGH",
                "äº‹ä»¶å †ç§¯æ•°é‡è¿‡é«˜: " + report.getPendingCount());
        }

        // 4. å¹³å‡å¤„ç†æ—¶é—´å‘Šè­¦
        if (report.getAverageHandleTime() > 5000) { // å¹³å‡å¤„ç†æ—¶é—´è¶…è¿‡5ç§’
            sendAlert("EVENT_HANDLE_TIME_HIGH",
                "äº‹ä»¶å¹³å‡å¤„ç†æ—¶é—´è¿‡é•¿: " + report.getAverageHandleTime() + "ms");
        }
    }

    /**
     * å‘é€å‘Šè­¦
     */
    private void sendAlert(String alertType, String message) {
        try {
            AlertDTO alert = AlertDTO.builder()
                .alertType(alertType)
                .alertLevel("WARNING")
                .title("äº‹ä»¶ç³»ç»Ÿå‘Šè­¦")
                .message(message)
                .alertTime(LocalDateTime.now())
                .source("EVENT_MONITORING_SYSTEM")
                .build();

            alertService.sendAlert(alert);

            log.warn("äº‹ä»¶ç³»ç»Ÿå‘Šè­¦: type={}, message={}", alertType, message);

        } catch (Exception e) {
            log.error("å‘é€å‘Šè­¦å¤±è´¥", e);
        }
    }

    /**
     * è·å–å‘å¸ƒæˆåŠŸç‡
     */
    private double getPublishSuccessRate() {
        Counter successCount = meterRegistry.find("event.publish.count")
            .tag("status", "success")
            .counter();
        Counter failureCount = meterRegistry.find("event.publish.count")
            .tag("status", "failure")
            .counter();

        double total = successCount.count() + failureCount.count();
        if (total == 0) {
            return 100.0;
        }

        return successCount.count() / total * 100;
    }

    /**
     * è·å–å¤„ç†æˆåŠŸç‡
     */
    private double getHandleSuccessRate() {
        Counter successCount = meterRegistry.find("event.handle.count")
            .tag("status", "success")
            .counter();
        Counter failureCount = meterRegistry.find("event.handle.count")
            .tag("status", "failure")
            .counter();

        double total = successCount.count() + failureCount.count();
        if (total == 0) {
            return 100.0;
        }

        return successCount.count() / total * 100;
    }
}

/**
 * äº‹ä»¶æ²»ç†ç³»ç»Ÿ
 */
@Component
@Slf4j
public class EventGovernanceSystem {

    @Resource
    private EventStatisticsService statisticsService;

    @Resource
    private EventGovernanceRules governanceRules;

    /**
     * æ‰§è¡Œäº‹ä»¶æ²»ç†æ£€æŸ¥
     */
    @Scheduled(fixedRate = 300000) // æ¯5åˆ†é’Ÿæ‰§è¡Œ
    public void performEventGovernanceCheck() {
        try {
            log.info("ğŸ” å¼€å§‹æ‰§è¡Œäº‹ä»¶æ²»ç†æ£€æŸ¥...");

            // 1. æ£€æŸ¥äº‹ä»¶åˆè§„æ€§
            ComplianceCheckResult compliance = checkEventCompliance();
            logGovernanceResult("äº‹ä»¶åˆè§„æ€§æ£€æŸ¥", compliance);

            // 2. æ£€æŸ¥äº‹ä»¶æ€§èƒ½
            PerformanceCheckResult performance = checkEventPerformance();
            logGovernanceResult("äº‹ä»¶æ€§èƒ½æ£€æŸ¥", performance);

            // 3. æ£€æŸ¥äº‹ä»¶è´¨é‡
            QualityCheckResult quality = checkEventQuality();
            logGovernanceResult("äº‹ä»¶è´¨é‡æ£€æŸ¥", quality);

            // 4. ç”Ÿæˆæ²»ç†æŠ¥å‘Š
            GovernanceReport report = generateGovernanceReport(compliance, performance, quality);
            logGovernanceReport(report);

        } catch (Exception e) {
            log.error("äº‹ä»¶æ²»ç†æ£€æŸ¥å¤±è´¥", e);
        }
    }

    /**
     * æ£€æŸ¥äº‹ä»¶åˆè§„æ€§
     */
    private ComplianceCheckResult checkEventCompliance() {
        ComplianceCheckResult result = new ComplianceCheckResult();

        try {
            // æ£€æŸ¥äº‹ä»¶å‘½åè§„èŒƒ
            NamingComplianceCheck namingCheck = checkEventNamingCompliance();
            result.setNamingCompliance(namingCheck);

            // æ£€æŸ¥äº‹ä»¶ç»“æ„è§„èŒƒ
            StructureComplianceCheck structureCheck = checkEventStructureCompliance();
            result.setStructureCompliance(structureCheck);

            // æ£€æŸ¥äº‹ä»¶ç‰ˆæœ¬è§„èŒƒ
            VersionComplianceCheck versionCheck = checkEventVersionCompliance();
            result.setVersionCompliance(versionCheck);

            // è®¡ç®—åˆè§„åˆ†æ•°
            double complianceScore = calculateComplianceScore(result);
            result.setOverallScore(complianceScore);

            result.setPassed(complianceScore >= 85.0);

        } catch (Exception e) {
            log.error("æ£€æŸ¥äº‹ä»¶åˆè§„æ€§å¤±è´¥", e);
            result.setErrorMessage("åˆè§„æ€§æ£€æŸ¥å¤±è´¥: " + e.getMessage());
        }

        return result;
    }

    /**
     * æ£€æŸ¥äº‹ä»¶æ€§èƒ½
     */
    private PerformanceCheckResult checkEventPerformance() {
        PerformanceCheckResult result = new PerformanceCheckResult();

        try {
            // è·å–æ€§èƒ½ç»Ÿè®¡æ•°æ®
            EventPerformanceMetrics metrics = statisticsService.getPerformanceMetrics();

            // æ£€æŸ¥å‘å¸ƒæ€§èƒ½
            PublishPerformanceCheck publishCheck = checkPublishPerformance(metrics);
            result.setPublishPerformance(publishCheck);

            // æ£€æŸ¥å¤„ç†æ€§èƒ½
            HandlePerformanceCheck handleCheck = checkHandlePerformance(metrics);
            result.setHandlePerformance(handleCheck);

            // æ£€æŸ¥é˜Ÿåˆ—æ€§èƒ½
            QueuePerformanceCheck queueCheck = checkQueuePerformance(metrics);
            result.setQueuePerformance(queueCheck);

            // è®¡ç®—æ€§èƒ½åˆ†æ•°
            double performanceScore = calculatePerformanceScore(result);
            result.setOverallScore(performanceScore);

            result.setPassed(performanceScore >= 80.0);

        } catch (Exception e) {
            log.error("æ£€æŸ¥äº‹ä»¶æ€§èƒ½å¤±è´¥", e);
            result.setErrorMessage("æ€§èƒ½æ£€æŸ¥å¤±è´¥: " + e.getMessage());
        }

        return result;
    }

    /**
     * æ£€æŸ¥äº‹ä»¶è´¨é‡
     */
    private QualityCheckResult checkEventQuality() {
        QualityCheckResult result = new QualityCheckResult();

        try {
            // æ£€æŸ¥äº‹ä»¶è¦†ç›–ç‡
            CoverageQualityCheck coverageCheck = checkEventCoverage();
            result.setCoverageCheck(coverageCheck);

            // æ£€æŸ¥äº‹ä»¶ä¸€è‡´æ€§
            ConsistencyQualityCheck consistencyCheck = checkEventConsistency();
            result.setConsistencyCheck(consistencyCheck);

            // æ£€æŸ¥äº‹ä»¶å¯è¿½è¸ªæ€§
            TraceabilityQualityCheck traceabilityCheck = checkEventTraceability();
            result.setTraceabilityCheck(traceabilityCheck);

            // è®¡ç®—è´¨é‡åˆ†æ•°
            double qualityScore = calculateQualityScore(result);
            result.setOverallScore(qualityScore);

            result.setPassed(qualityScore >= 85.0);

        } catch (Exception e) {
            log.error("æ£€æŸ¥äº‹ä»¶è´¨é‡å¤±è´¥", e);
            result.setErrorMessage("è´¨é‡æ£€æŸ¥å¤±è´¥: " + e.getMessage());
        }

        return result;
    }

    /**
     * ç”Ÿæˆæ²»ç†æŠ¥å‘Š
     */
    private GovernanceReport generateGovernanceReport(
            ComplianceCheckResult compliance,
            PerformanceCheckResult performance,
            QualityCheckResult quality) {

        GovernanceReport report = GovernanceReport.builder()
            .checkTime(LocalDateTime.now())
            .complianceResult(compliance)
            .performanceResult(performance)
            .qualityResult(quality)
            .overallScore((compliance.getOverallScore() +
                              performance.getOverallScore() +
                              quality.getOverallScore()) / 3)
            .passed(compliance.isPassed() &&
                    performance.isPassed() &&
                    quality.isPassed())
            .build();

        return report;
    }

    /**
     * è®°å½•æ²»ç†ç»“æœ
     */
    private void logGovernanceResult(String checkType, Object result) {
        try {
            String jsonResult = JsonUtils.toJsonString(result);
            log.info("ğŸ“Š {}ç»“æœ: {}", checkType, jsonResult);

        } catch (Exception e) {
            log.error("è®°å½•{}ç»“æœå¤±è´¥", checkType, e);
        }
    }

    /**
     * è®°å½•æ²»ç†æŠ¥å‘Š
     */
    private void logGovernanceReport(GovernanceReport report) {
        try {
            String jsonReport = JsonUtils.toJsonString(report);
            log.info("ğŸ“‹ äº‹ä»¶æ²»ç†æŠ¥å‘Š: {}", jsonReport);

        } catch (Exception e) {
            log.error("è®°å½•æ²»ç†æŠ¥å‘Šå¤±è´¥", e);
        }
    }
}
```

---

## ğŸ› ï¸ å®è·µæ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šè®¢å•ç³»ç»Ÿäº‹ä»¶é©±åŠ¨é‡æ„
```java
/**
 * é‡æ„å‰ï¼šä¼ ç»ŸåŒæ­¥å¤„ç†
 */
@Service
public class LegacyOrderService {

    @Resource
    private OrderDao orderDao;

    @Resource
    private PaymentService paymentService;

    @Resource
    private InventoryService inventoryService;

    @Resource
    private NotificationService notificationService;

    @Resource
    private AuditService auditService;

    /**
     * âŒ é—®é¢˜ï¼šåŒæ­¥å¤„ç†ï¼Œè€¦åˆåº¦é«˜ï¼Œæ€§èƒ½å·®
     */
    @Transactional(rollbackFor = Throwable.class)
    public ResponseDTO<String> createOrder(OrderCreateForm form) {
        try {
            // 1. åˆ›å»ºè®¢å•
            OrderEntity order = new OrderEntity();
            order.setUserId(form.getUserId());
            order.setAmount(form.getAmount());
            orderDao.insert(order);

            // 2. å¤„ç†æ”¯ä»˜ï¼ˆåŒæ­¥è°ƒç”¨ï¼Œæ€§èƒ½å·®ï¼‰
            PaymentResult paymentResult = paymentService.processPayment(form.getPaymentInfo());
            if (!paymentResult.isSuccess()) {
                throw new BusinessException("æ”¯ä»˜å¤±è´¥");
            }
            order.setPaymentStatus(paymentResult.getStatus());
            orderDao.updateById(order);

            // 3. æ‰£å‡åº“å­˜ï¼ˆåŒæ­¥è°ƒç”¨ï¼Œæ€§èƒ½å·®ï¼‰
            boolean inventorySuccess = inventoryService.decreaseInventory(form.getProductId(), form.getQuantity());
            if (!inventorySuccess) {
                throw new BusinessException("åº“å­˜ä¸è¶³");
            }

            // 4. å‘é€é€šçŸ¥ï¼ˆåŒæ­¥è°ƒç”¨ï¼Œç”¨æˆ·ä½“éªŒå·®ï¼‰
            notificationService.sendOrderNotification(order);

            // 5. è®°å½•å®¡è®¡ï¼ˆåŒæ­¥è°ƒç”¨ï¼Œå½±å“ä¸»æµç¨‹æ€§èƒ½ï¼‰
            auditService.recordOrderCreate(order);

            // 6. æ›´æ–°ç»Ÿè®¡ï¼ˆåŒæ­¥è°ƒç”¨ï¼Œå½±å“ä¸»æµç¨‹æ€§èƒ½ï¼‰
            statisticsService.updateOrderStatistics(order);

            return ResponseDTO.ok("è®¢å•åˆ›å»ºæˆåŠŸ");

        } catch (Exception e) {
            log.error("åˆ›å»ºè®¢å•å¤±è´¥", e);
            return ResponseDTO.error("è®¢å•åˆ›å»ºå¤±è´¥: " + e.getMessage());
        }
    }
}

/**
 * é‡æ„åï¼šäº‹ä»¶é©±åŠ¨å¤„ç†
 */
@Service
public class EventDrivenOrderService {

    @Resource
    private OrderDao orderDao;

    @Resource
    private EventPublisher eventPublisher;

    /**
     * âœ… ä¼˜åŒ–ï¼šäº‹ä»¶é©±åŠ¨ï¼Œå¼‚æ­¥å¤„ç†ï¼Œé«˜æ€§èƒ½
     */
    @Transactional(rollbackFor = Throwable.class)
    public ResponseDTO<String> createOrder(OrderCreateForm form) {
        try {
            // 1. åˆ›å»ºè®¢å•ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
            OrderEntity order = createOrderEntity(form);
            orderDao.insert(order);

            // 2. å‘å¸ƒè®¢å•åˆ›å»ºäº‹ä»¶ï¼ˆå¼‚æ­¥å¤„ç†å…¶ä»–ä¸šåŠ¡ï¼‰
            OrderCreatedEvent event = OrderCreatedEvent.builder()
                .orderId(order.getOrderId())
                .userId(form.getUserId())
                .amount(form.getAmount())
                .productId(form.getProductId())
                .quantity(form.getQuantity())
                .paymentInfo(form.getPaymentInfo())
                .eventTime(LocalDateTime.now())
                .build();

            eventPublisher.publishAsync(event);

            return ResponseDTO.ok("è®¢å•åˆ›å»ºæˆåŠŸ");

        } catch (Exception e) {
            log.error("åˆ›å»ºè®¢å•å¤±è´¥", e);
            throw new BusinessException("è®¢å•åˆ›å»ºå¤±è´¥: " + e.getMessage());
        }
    }

    /**
     * åˆ›å»ºè®¢å•å®ä½“
     */
    private OrderEntity createOrderEntity(OrderCreateForm form) {
        OrderEntity order = new OrderEntity();
        order.setUserId(form.getUserId());
        order.setAmount(form.getAmount());
        order.setProductId(form.getProductId());
        order.setQuantity(form.getQuantity());
        order.setStatus(OrderStatus.CREATED);
        order.setCreateTime(LocalDateTime.now());
        return order;
    }
}

/**
 * è®¢å•äº‹ä»¶å¤„ç†å™¨
 */
@Component
@Slf4j
public class OrderEventHandler extends BaseEventHandler {

    @Resource
    private PaymentService paymentService;

    @Resource
    private InventoryService inventoryService;

    @Resource
    private NotificationService notificationService;

    @Resource
    private AuditService auditService;

    @Resource
    private StatisticsService statisticsService;

    /**
     * å¤„ç†è®¢å•åˆ›å»ºäº‹ä»¶
     */
    @EventListener
    @Async("eventTaskExecutor")
    public void handleOrderCreated(OrderCreatedEvent event) {
        handleEvent(event, "è®¢å•åˆ›å»ºå¤„ç†å™¨");
    }

    @Override
    protected void doHandleEvent(OrderCreatedEvent event) throws Exception {
        // 1. å¤„ç†æ”¯ä»˜ï¼ˆå¼‚æ­¥ï¼‰
        processPayment(event);

        // 2. æ‰£å‡åº“å­˜ï¼ˆå¼‚æ­¥ï¼‰
        processInventory(event);

        // 3. å‘é€é€šçŸ¥ï¼ˆå¼‚æ­¥ï¼‰
        sendNotification(event);

        // 4. è®°å½•å®¡è®¡ï¼ˆå¼‚æ­¥ï¼‰
        recordAuditLog(event);

        // 5. æ›´æ–°ç»Ÿè®¡ï¼ˆå¼‚æ­¥ï¼‰
        updateStatistics(event);

        log.info("è®¢å•åˆ›å»ºäº‹ä»¶å¤„ç†å®Œæˆ: orderId={}", event.getOrderId());
    }

    /**
     * å¤„ç†æ”¯ä»˜
     */
    private void processPayment(OrderCreatedEvent event) {
        try {
            PaymentResult result = paymentService.processPayment(event.getPaymentInfo());

            if (result.isSuccess()) {
                // å‘å¸ƒæ”¯ä»˜æˆåŠŸäº‹ä»¶
                PaymentSuccessEvent paymentEvent = PaymentSuccessEvent.builder()
                    .orderId(event.getOrderId())
                    .paymentId(result.getPaymentId())
                    .amount(result.getAmount())
                    .build();

                eventPublisher.publishAsync(paymentEvent);
            } else {
                // å‘å¸ƒæ”¯ä»˜å¤±è´¥äº‹ä»¶
                PaymentFailedEvent paymentEvent = PaymentFailedEvent.builder()
                    .orderId(event.getOrderId())
                    .reason(result.getErrorMessage())
                    .build();

                eventPublisher.publishAsync(paymentEvent);
            }

        } catch (Exception e) {
            log.error("å¤„ç†è®¢å•æ”¯ä»˜å¤±è´¥: orderId={}", event.getOrderId(), e);

            // å‘å¸ƒæ”¯ä»˜å¼‚å¸¸äº‹ä»¶
            PaymentExceptionEvent paymentEvent = PaymentExceptionEvent.builder()
                .orderId(event.getOrderId())
                .exceptionMessage(e.getMessage())
                .build();

            eventPublisher.publishAsync(paymentEvent);
        }
    }

    /**
     * æ‰£å‡åº“å­˜
     */
    private void processInventory(OrderCreatedEvent event) {
        try {
            boolean success = inventoryService.decreaseInventory(
                event.getProductId(), event.getQuantity());

            if (success) {
                // å‘å¸ƒåº“å­˜æ‰£å‡æˆåŠŸäº‹ä»¶
                InventoryDecreasedEvent inventoryEvent = InventoryDecreasedEvent.builder()
                    .orderId(event.getOrderId())
                    .productId(event.getProductId())
                    .quantity(event.getQuantity())
                    .build();

                eventPublisher.publishAsync(inventoryEvent);
            } else {
                // å‘å¸ƒåº“å­˜ä¸è¶³äº‹ä»¶
                InventoryInsufficientEvent inventoryEvent = InventoryInsufficientEvent.builder()
                    .orderId(event.getOrderId())
                    .productId(event.getProductId())
                    .requestedQuantity(event.getQuantity())
                    .build();

                eventPublisher.publishAsync(inventoryEvent);
            }

        } catch (Exception e) {
            log.error("å¤„ç†è®¢å•åº“å­˜å¤±è´¥: orderId={}", event.getOrderId(), e);

            // å‘å¸ƒåº“å­˜å¤„ç†å¼‚å¸¸äº‹ä»¶
            InventoryExceptionEvent inventoryEvent = InventoryExceptionEvent.builder()
                .orderId(event.getOrderId())
                .exceptionMessage(e.getMessage())
                .build();

            eventPublisher.publishAsync(inventoryEvent);
        }
    }
}
```

---

## ğŸ“ è¯„ä¼°æ ‡å‡†

### ç†è®ºçŸ¥è¯†è¯„ä¼° (40%)
- [ ] ç†è§£äº‹ä»¶é©±åŠ¨æ¶æ„åŸç†å’Œä¼˜åŠ¿
- [ ] æŒæ¡äº‹ä»¶æ¨¡å‹è®¾è®¡æ–¹æ³•
- [ ] ç†Ÿæ‚‰Spring Eventså’Œæ¶ˆæ¯é˜Ÿåˆ—
- [ ] äº†è§£äº‹ä»¶ç›‘æ§å’Œæ²»ç†æœºåˆ¶

### å®è·µæŠ€èƒ½è¯„ä¼° (60%)
- [ ] èƒ½å¤Ÿè®¾è®¡å’Œå®æ–½äº‹ä»¶é©±åŠ¨æ¶æ„
- [ ] èƒ½å¤Ÿé›†æˆSpring Eventså’Œæ¶ˆæ¯é˜Ÿåˆ—
- [ ] èƒ½å¤Ÿå¤„ç†äº‹ä»¶ç›‘æ§å’Œæ•…éšœ
- [ ] èƒ½å¤Ÿå»ºç«‹äº‹ä»¶æ²»ç†æœºåˆ¶

### è´¨é‡æ ‡å‡†
- **æ¶æ„è®¾è®¡**: äº‹ä»¶é©±åŠ¨æ¶æ„è®¾è®¡è¯„åˆ†â‰¥95åˆ†
- **ä»£ç è´¨é‡**: äº‹ä»¶å¤„ç†ä»£ç è¯„åˆ†â‰¥90åˆ†
- **æ€§èƒ½æ ‡å‡†**: äº‹ä»¶å¤„ç†å»¶è¿ŸP95â‰¤2ç§’
- **ç›‘æ§å®Œå–„**: å®Œæ•´çš„äº‹ä»¶ç›‘æ§å’Œå‘Šè­¦

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### äº‹ä»¶è®¾è®¡æé†’
- äº‹ä»¶åº”è¯¥æ˜¯ä¸å¯å˜çš„
- äº‹ä»¶åº”è¯¥åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- é¿å…äº‹ä»¶å¾ªç¯ä¾èµ–
- åˆç†è®¾è®¡äº‹ä»¶ç²’åº¦

### å¼‚æ­¥å¤„ç†æé†’
- å¼‚æ­¥äº‹ä»¶å¤±è´¥ä¸å½±å“ä¸»æµç¨‹
- é‡è¦ä¸šåŠ¡é€»è¾‘è¦æœ‰è¡¥å¿æœºåˆ¶
- åˆç†æ§åˆ¶å¼‚æ­¥çº¿ç¨‹æ± å¤§å°
- æ³¨æ„å¼‚æ­¥å¼‚å¸¸å¤„ç†

### ç›‘æ§è¿ç»´æé†’
- å»ºç«‹å®Œå–„çš„äº‹ä»¶ç›‘æ§æŒ‡æ ‡
- è®¾ç½®åˆç†çš„å‘Šè­¦é˜ˆå€¼
- å®šæœŸåˆ†æäº‹ä»¶å¤„ç†æ€§èƒ½
- åŠæ—¶å¤„ç†äº‹ä»¶å †ç§¯é—®é¢˜

---

## ğŸš€ è¿›é˜¶å­¦ä¹ 

### æ‰©å±•æŠ€èƒ½
- **CQRSæ¨¡å¼**: å‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»æ¨¡å¼
- **Event Sourcing**: äº‹ä»¶æº¯æºæ¶æ„æ¨¡å¼
- **Sagaæ¨¡å¼**: åˆ†å¸ƒå¼äº‹åŠ¡åè°ƒæ¨¡å¼
- **æµå¼å¤„ç†**: Kafka Streamsã€Flinkæµå¼å¤„ç†

### ç›¸å…³æŠ€èƒ½
- **åˆ†å¸ƒå¼ç³»ç»Ÿ**: åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡å’Œå®ç°
- **å¾®æœåŠ¡æ¶æ„**: å¾®æœåŠ¡äº‹ä»¶é€šä¿¡å’Œæ²»ç†
- **æ¶ˆæ¯é˜Ÿåˆ—**: æ¶ˆæ¯é˜Ÿåˆ—æ·±åº¦åº”ç”¨å’Œä¼˜åŒ–
- **ç³»ç»Ÿç›‘æ§**: åˆ†å¸ƒå¼ç³»ç»Ÿç›‘æ§å’Œå‘Šè­¦

---

## ğŸ“ æ”¯æŒä¸åé¦ˆ

å¦‚éœ€äº‹ä»¶é©±åŠ¨æ¶æ„ç›¸å…³æ”¯æŒï¼š
- **æŠ€æœ¯å’¨è¯¢**: event-driven-support@example.com
- **é—®é¢˜åé¦ˆ**: event-driven-feedback@example.com
- **æœ€ä½³å®è·µ**: event-driven-best-practices@example.com
- **åŸ¹è®­å’¨è¯¢**: event-driven-training@example.com

---

*æœ€åæ›´æ–°: 2025-11-16*
*ç‰ˆæœ¬: 1.0.0*
*ç»´æŠ¤è€…: SmartAdmin Team*
*åŸºäºrepowikiäº‹ä»¶é©±åŠ¨æ¶æ„è§„èŒƒ*
*æ¶æ„è¯„åˆ†: 96/100åˆ†*