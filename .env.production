# IOE-DREAM 生产环境配置文件
# ⚠️ 重要：生产环境请修改所有默认密码和密钥！

# ==================== 基础配置 ====================
# 环境标识
ENVIRONMENT=production
COMPOSE_PROJECT_NAME=ioedream-prod
COMPOSE_FILE=docker-compose-production.yml

# 数据和日志存储目录
DATA_DIR=./data
LOGS_DIR=./logs

# ==================== 数据库配置 ====================
# MySQL数据库配置
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_DATABASE=ioedream
MYSQL_USER=ioedream_user
MYSQL_ROOT_PASSWORD=IOEDREAM_MySQL_Root_Passw0rd!2024
MYSQL_PASSWORD=IOEDREAM_MySQL_Passw0rd!2024

# 数据库连接池配置
MYSQL_INITIAL_SIZE=10
MYSQL_MIN_IDLE=5
MYSQL_MAX_ACTIVE=50
MYSQL_MAX_WAIT=60000

# Nacos数据库配置
NACOS_DATABASE=nacos

# ==================== Redis配置 ====================
# Redis缓存配置
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=IOEDREAM_Redis_Passw0rd!2024

# Redis连接池配置
REDIS_MAX_ACTIVE=50
REDIS_MAX_IDLE=20
REDIS_MIN_IDLE=5
REDIS_MAX_WAIT=3000

# ==================== Nacos配置 ====================
# Nacos注册中心和配置中心
NACOS_HOST=nacos
NACOS_PORT=8848
NACOS_NAMESPACE=prod
NACOS_GROUP=IOE-DREAM

# Nacos认证配置（请生成新的安全密钥）
NACOS_AUTH_TOKEN=IOEDREAM_Nacos_SecretKey_2024_Secure_Random_String_64_Characters_Long_Enough_For_Production
NACOS_AUTH_IDENTITY_KEY=nacos
NACOS_AUTH_IDENTITY_VALUE=IOEDREAM_Nacos_Admin_Passw0rd!2024

# ==================== 应用服务端口配置 ====================
# 服务端口配置（可根据实际需要调整）
GATEWAY_PORT=8080
COMMON_SERVICE_PORT=8088
DEVICE_COMM_PORT=8087
OA_SERVICE_PORT=8089
ACCESS_SERVICE_PORT=8090
ATTENDANCE_SERVICE_PORT=8091
VIDEO_SERVICE_PORT=8092
CONSUME_SERVICE_PORT=8094
VISITOR_SERVICE_PORT=8095

# 前端应用端口
WEB_ADMIN_PORT=3000

# ==================== Nginx配置 ====================
# Nginx端口配置
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# SSL证书路径（需要提供实际的证书文件）
NGINX_SSL_CERT_PATH=./deployment/nginx/ssl/cert.pem
NGINX_SSL_KEY_PATH=./deployment/nginx/ssl/key.pem

# ==================== JVM配置 ====================
# JVM堆内存配置（根据服务器配置调整）
JVM_XMS=1g
JVM_XMX=4g
JVM_MAX_DIRECT_MEMORY_SIZE=1g

# JVM垃圾回收配置
JVM_GC_OPTS="-XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+HeapDumpOnOutOfMemoryError"

# JVM参数配置
JVM_OPTS="-server -Xms${JVM_XMS} -Xmx${JVM_XMX} ${JVM_GC_OPTS} -Dfile.encoding=UTF-8 -Duser.timezone=Asia/Shanghai"

# ==================== 监控配置 ====================
# Actuator端口配置
ACTUATOR_PORT=9999
ACTUATOR_MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus

# 日志级别配置
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_IOEDREAM=INFO
LOG_LEVEL_SPRING=WARN
LOG_LEVEL_MYBATIS=WARN

# 日志文件配置
LOG_FILE_MAX_SIZE=100MB
LOG_FILE_MAX_HISTORY=30

# ==================== 安全配置 ====================
# JWT配置
JWT_SECRET=IOEDREAM_JWT_Secret_Key_2024_Very_Secure_Random_String_At_Least_256_Bits_Long_For_Production_Use
JWT_EXPIRATION=86400

# 接口加密配置
API_ENCRYPT_ENABLED=true
API_ENCRYPT_KEY=IOEDREAM_API_Encrypt_Key_2024_32_Characters
API_ENCRYPT_IV=IOEDREAM_API_Encrypt_IV_2024_16

# ==================== 文件存储配置 ====================
# 文件上传配置
FILE_UPLOAD_MAX_SIZE=100MB
FILE_UPLOAD_ALLOWED_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx

# 文件存储路径
FILE_STORAGE_PATH=./data/files
FILE_TEMP_PATH=./data/temp

# ==================== 缓存配置 ====================
# 本地缓存配置
LOCAL_CACHE_MAX_SIZE=1000
LOCAL_CACHE_EXPIRE_MINUTES=30

# Redis缓存配置
REDIS_CACHE_EXPIRE_SECONDS=3600
REDIS_CACHE_MAX_IDLE=3600

# ==================== 队列配置 ====================
# RabbitMQ配置（如果使用）
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=ioedream_rabbit
RABBITMQ_PASSWORD=IOEDREAM_Rabbit_Passw0rd!2024
RABBITMQ_VIRTUAL_HOST=ioedream

# ==================== 邮件配置 ====================
# SMTP邮件配置
SMTP_HOST=smtp.your-domain.com
SMTP_PORT=587
SMTP_USERNAME=noreply@your-domain.com
SMTP_PASSWORD=your_smtp_password
SMTP_FROM_NAME=IOE-DREAM系统

# ==================== 业务配置 ====================
# 默认管理员账号
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=IOEDREAM_Admin_Passw0rd!2024
DEFAULT_ADMIN_EMAIL=admin@your-domain.com

# 系统配置
SYSTEM_NAME=IOE-DREAM智慧园区一卡通管理平台
SYSTEM_VERSION=1.0.0
SYSTEM_DESCRIPTION=企业级智慧安防管理平台

# ==================== 第三方服务配置 ====================
# 短信服务配置（阿里云短信为例）
SMS_ACCESS_KEY_ID=your_access_key_id
SMS_ACCESS_KEY_SECRET=your_access_key_secret
SMS_SIGN_NAME=IOE-DREAM
SMS_TEMPLATE_CODE=SMS_123456789

# 对象存储配置（阿里云OSS为例）
OSS_ACCESS_KEY_ID=your_oss_access_key_id
OSS_ACCESS_KEY_SECRET=your_oss_access_key_secret
OSS_BUCKET_NAME=ioedream-files
OSS_ENDPOINT=https://oss-cn-hangzhou.aliyuncs.com

# ==================== 备份配置 ====================
# 数据库备份配置
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_PATH=./data/backup

# ==================== 开发调试配置 ====================
# 生产环境请关闭调试选项
DEBUG_ENABLED=false
PROFILE_ENABLED=false
ACTUATOR_HEALTH_SHOW_DETAILS=never

# ==================== 高可用配置 ====================
# 集群配置（如果需要）
CLUSTER_ENABLED=false
CLUSTER_NODE_ID=node-1
CLUSTER_DISCOVERY_PORT=8849

# ==================== 性能优化配置 ====================
# 连接池配置
CONNECTION_POOL_MAX_SIZE=200
CONNECTION_POOL_MIN_SIZE=10
CONNECTION_POOL_CONNECTION_TIMEOUT=30000
CONNECTION_POOL_IDLE_TIMEOUT=600000

# 线程池配置
THREAD_POOL_CORE_SIZE=10
THREAD_POOL_MAX_SIZE=50
THREAD_POOL_QUEUE_CAPACITY=200
THREAD_POOL_KEEP_ALIVE_SECONDS=60

# ==================== 注意事项 ====================
# 1. 生产环境部署前请务必修改所有默认密码和密钥
# 2. 建议使用专业的密码管理工具生成强密码
# 3. 确保SSL证书已正确配置
# 4. 定期备份数据库和重要文件
# 5. 配置防火墙规则，只开放必要端口
# 6. 启用日志监控和告警机制
# 7. 定期更新系统和依赖包