# 故障排查手册（权威文档）

> **📋 文档版本**: v4.0.0 (整合版)
> **📋 文档职责**: SmartAdmin项目的故障排查指南，帮助开发者快速定位和解决问题。

## 🔍 常见问题排查

### 启动问题

#### 应用启动失败
```markdown
问题症状：
- 应用无法启动
- 报错端口被占用
- Bean创建失败

排查步骤：
1. 检查端口占用：netstat -ano | findstr :8080
2. 检查配置文件：application.yml/properties
3. 检查数据库连接：ping数据库地址
4. 检查依赖冲突：mvn dependency:tree
5. 查看详细日志：tail -f logs/smart-admin.log

常见解决方案：
- 更换端口配置
- 修复配置文件错误
- 检查网络连接
- 排除依赖冲突
```

#### 数据库连接失败
```markdown
问题症状：
- 数据库连接超时
- 认证失败
- 网络不通

排查步骤：
1. 检查数据库服务状态
2. 测试网络连通性：telnet db-host 3306
3. 验证用户名密码
4. 检查防火墙设置
5. 查看连接池配置

解决方案：
- 启动数据库服务
- 修复网络问题
- 更新连接配置
- 调整连接池参数
```

### 业务问题

#### 登录认证失败
```markdown
问题症状：
- 用户无法登录
- Token验证失败
- 权限验证失败

排查步骤：
1. 检查用户账号状态
2. 验证密码加密方式
3. 检查Token生成逻辑
4. 验证权限配置
5. 查看认证日志

解决方案：
- 激活用户账号
- 修复密码加密逻辑
- 更新Token配置
- 完善权限设置
```

#### 缓存问题
```markdown
问题症状：
- 缓存数据不一致
- 缓存穿透
- 缓存雪崩

排查步骤：
1. 检查缓存连接状态
2. 验证缓存更新逻辑
3. 分析缓存命中率
4. 检查缓存过期时间
5. 查看缓存监控指标

解决方案：
- 修复缓存连接
- 优化缓存策略
- 增加缓存预热
- 设置合理过期时间
```

### 性能问题

#### 接口响应慢
```markdown
问题症状：
- API响应时间过长
- 数据库查询慢
- 系统资源占用高

排查步骤：
1. 分析接口响应时间
2. 检查数据库查询性能
3. 分析系统资源使用
4. 查看JVM内存情况
5. 检查网络延迟

解决方案：
- 优化数据库查询
- 增加缓存使用
- 调整JVM参数
- 优化网络配置
```

#### 内存溢出
```markdown
问题症状：
- OutOfMemoryError
- 系统响应缓慢
- GC频繁

排查步骤：
1. 分析堆内存使用
2. 检查内存泄漏
3. 查看GC日志
4. 分析对象创建
5. 检查缓存大小

解决方案：
- 增加堆内存大小
- 修复内存泄漏
- 优化对象创建
- 调整缓存配置
```

---

**🔧 排查工具推荐**：
- **日志分析**: ELK Stack
- **性能监控**: Prometheus + Grafana
- **内存分析**: JProfiler、VisualVM
- **网络诊断**: Wireshark、ping、telnet

**📖 相关文档**：
- [最佳实践案例](./最佳实践案例.md) - 预防措施
- [架构规范](../01-核心规范层/架构规范.md) - 架构设计
- [运维指南](../02-实施指南层/部署运维指南.md) - 运维操作