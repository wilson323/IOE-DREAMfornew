<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“èµ„æ–™ - æ¶ˆè´¹ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="../js/menu.js" defer></script>
    <link rel="stylesheet" href="../css/main.css">
    <style>
        .split-container {
            display: flex;
            gap: var(--space-lg);
            height: calc(100vh - 180px);
            overflow: hidden;
        }

        /* å·¦ä¾§é¢æ¿ - å•†å“ç±»åˆ« */
        .left-panel {
            width: 280px;
            min-width: 240px;
            max-width: 350px;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--gray-900);
        }

        .panel-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-md);
        }

        /* ç±»åˆ«åˆ—è¡¨ */
        .category-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .category-item {
            margin-bottom: var(--space-xs);
        }

        .category-header {
            display: flex;
            align-items: center;
            padding: var(--space-md);
            cursor: pointer;
            border-radius: var(--radius-md);
            transition: background var(--transition);
        }

        .category-header:hover {
            background: var(--gray-50);
        }

        .category-header.active {
            background: var(--primary-50);
            color: var(--primary-600);
        }

        .category-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary-100);
            color: var(--primary-600);
            border-radius: var(--radius-md);
            margin-right: var(--space-sm);
            font-size: var(--text-base);
        }

        .category-header.active .category-icon {
            background: var(--primary-600);
            color: white;
        }

        .category-name {
            flex: 1;
            font-weight: 500;
            font-size: var(--text-sm);
        }

        .category-count {
            font-size: var(--text-xs);
            color: var(--gray-500);
            background: var(--gray-100);
            padding: 2px 8px;
            border-radius: var(--radius-full);
        }

        .category-header.active .category-count {
            background: var(--primary-600);
            color: white;
        }

        /* å³ä¾§é¢æ¿ - å•†å“åˆ—è¡¨ */
        .right-panel {
            flex: 1;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .products-header {
            padding: var(--space-lg) var(--space-xl);
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
        }

        .products-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .products-info h3 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--gray-900);
            margin: 0 0 var(--space-xs) 0;
        }

        .products-meta {
            font-size: var(--text-sm);
            color: var(--gray-500);
        }

        .products-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .view-toggle {
            display: flex;
            gap: var(--space-xs);
            background: white;
            border-radius: var(--radius-md);
            padding: 4px;
            border: 1px solid var(--gray-300);
        }

        .view-toggle-btn {
            padding: var(--space-xs) var(--space-sm);
            border: none;
            background: transparent;
            color: var(--gray-600);
            cursor: pointer;
            border-radius: var(--radius);
            font-size: var(--text-sm);
            transition: all var(--transition);
        }

        .view-toggle-btn.active {
            background: var(--primary-600);
            color: white;
        }

        .view-toggle-btn:hover:not(.active) {
            background: var(--gray-100);
        }

        .products-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 300px;
        }

        .search-box input {
            width: 100%;
            padding: var(--space-sm) var(--space-sm) var(--space-sm) var(--space-xl);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
        }

        .search-box i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-400);
        }

        .products-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-xl);
        }

        /* ç½‘æ ¼è§†å›¾ */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: var(--space-lg);
        }

        .product-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            border: 1px solid var(--gray-200);
            text-align: center;
            transition: all var(--transition);
            cursor: pointer;
        }

        .product-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .product-icon {
            width: 64px;
            height: 64px;
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            margin: 0 auto var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-2xl);
            color: var(--gray-400);
        }

        .product-name {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-xs);
            font-size: var(--text-base);
        }

        .product-desc {
            color: var(--gray-600);
            font-size: var(--text-xs);
            margin-bottom: var(--space-md);
            min-height: 32px;
        }

        .product-price {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--primary-600);
            margin-bottom: var(--space-md);
        }

        .product-actions {
            display: flex;
            gap: var(--space-xs);
            justify-content: center;
        }

        .btn-sm {
            padding: var(--space-xs) var(--space-sm);
            font-size: var(--text-xs);
        }

        /* åˆ—è¡¨è§†å›¾ */
        .products-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .products-table th {
            background: var(--gray-50);
            padding: var(--space-md);
            text-align: left;
            font-weight: 600;
            color: var(--gray-700);
            font-size: var(--text-sm);
            border-bottom: 1px solid var(--gray-200);
        }

        .products-table td {
            padding: var(--space-md);
            border-bottom: 1px solid var(--gray-100);
            font-size: var(--text-sm);
        }

        .products-table tr:hover {
            background: var(--gray-50);
        }

        .product-info {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .product-avatar {
            width: 48px;
            height: 48px;
            background: var(--gray-100);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-lg);
            color: var(--gray-400);
        }

        .product-details h4 {
            font-weight: 600;
            color: var(--gray-900);
            margin: 0 0 4px 0;
            font-size: var(--text-sm);
        }

        .product-details p {
            color: var(--gray-500);
            margin: 0;
            font-size: var(--text-xs);
        }

        .status-badge {
            display: inline-block;
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius);
            font-size: var(--text-xs);
            font-weight: 500;
        }

        .status-active {
            background: var(--success-light);
            color: var(--success);
        }

        .status-inactive {
            background: var(--gray-100);
            color: var(--gray-600);
        }

        /* æŠ½å±‰æ ·å¼ */
        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
        }

        .drawer-overlay.show {
            display: block;
        }

        .drawer {
            position: fixed;
            top: 0;
            right: -500px;
            width: 500px;
            max-width: 90vw;
            height: 100vh;
            background: white;
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .drawer.show {
            right: 0;
        }

        .drawer-header {
            padding: var(--space-xl);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .drawer-title {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--gray-900);
        }

        .drawer-close {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--gray-100);
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-600);
        }

        .drawer-close:hover {
            background: var(--gray-200);
        }

        .drawer-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-xl);
        }

        .drawer-footer {
            padding: var(--space-xl);
            border-top: 1px solid var(--gray-200);
            display: flex;
            gap: var(--space-sm);
            justify-content: flex-end;
        }

        .form-section {
            margin-bottom: var(--space-xl);
        }

        .form-section-title {
            font-size: var(--text-base);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid var(--gray-200);
        }

        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-label {
            display: block;
            font-weight: 500;
            color: var(--gray-700);
            margin-bottom: var(--space-xs);
            font-size: var(--text-sm);
        }

        .form-label .required {
            color: var(--error);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-hint {
            margin-top: var(--space-xs);
            font-size: var(--text-xs);
            color: var(--gray-500);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ä¾§è¾¹æ  -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-utensils fa-lg"></i>
                <div>
                    <div class="sidebar-title">æ¶ˆè´¹ç®¡ç†ç³»ç»Ÿ</div>
                    <div class="sidebar-subtitle">Consumption Hub</div>
                </div>
            </div>
            <div class="sidebar-menu">
                <!-- èœå•å°†ç”± menu.js è‡ªåŠ¨ç”Ÿæˆ -->
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <header class="header">
                <h1>å•†å“èµ„æ–™</h1>
                <div class="header-actions">
                    <button class="btn btn-outline">
                        <i class="fas fa-bell"></i>
                        é€šçŸ¥
                    </button>
                    <div class="user-info">
                        <div>
                            <div style="font-weight: 600;">ç³»ç»Ÿç®¡ç†å‘˜</div>
                            <div style="font-size: 12px; color: var(--gray-500);">åœ¨çº¿</div>
                        </div>
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </header>

            <!-- ä¸»è¦å†…å®¹ -->
            <div class="content">
                <div class="split-container">
                    <!-- å·¦ä¾§ï¼šå•†å“ç±»åˆ« -->
                    <div class="left-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">å•†å“ç±»åˆ«</h2>
                            <button class="btn btn-sm btn-primary" onclick="openCategoryDrawer('add')" title="æ–°å¢ç±»åˆ«">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="panel-body">
                            <ul class="category-list" id="categoryList">
                                <li class="category-item">
                                    <div class="category-header active" onclick="selectCategory(this, 'all')">
                                        <div class="category-icon"><i class="fas fa-th"></i></div>
                                        <div class="category-name">å…¨éƒ¨å•†å“</div>
                                        <span class="category-count">48</span>
                                    </div>
                                </li>
                                <li class="category-item">
                                    <div class="category-header" onclick="selectCategory(this, 'meal')">
                                        <div class="category-icon"><i class="fas fa-utensils"></i></div>
                                        <div class="category-name">ä¸»é£Ÿç±»</div>
                                        <span class="category-count">15</span>
                                    </div>
                                </li>
                                <li class="category-item">
                                    <div class="category-header" onclick="selectCategory(this, 'dish')">
                                        <div class="category-icon"><i class="fas fa-bowl-food"></i></div>
                                        <div class="category-name">èœå“ç±»</div>
                                        <span class="category-count">18</span>
                                    </div>
                                </li>
                                <li class="category-item">
                                    <div class="category-header" onclick="selectCategory(this, 'drink')">
                                        <div class="category-icon"><i class="fas fa-mug-hot"></i></div>
                                        <div class="category-name">é¥®æ–™ç±»</div>
                                        <span class="category-count">8</span>
                                    </div>
                                </li>
                                <li class="category-item">
                                    <div class="category-header" onclick="selectCategory(this, 'snack')">
                                        <div class="category-icon"><i class="fas fa-cookie"></i></div>
                                        <div class="category-name">å°åƒç±»</div>
                                        <span class="category-count">7</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- å³ä¾§ï¼šå•†å“åˆ—è¡¨ -->
                    <div class="right-panel">
                        <div class="products-header">
                            <div class="products-header-top">
                                <div class="products-info">
                                    <h3 id="currentCategoryName">å…¨éƒ¨å•†å“</h3>
                                    <div class="products-meta">å…± <span id="productCount">48</span> ä¸ªå•†å“</div>
                                </div>
                                <div class="products-actions">
                                    <div class="view-toggle">
                                        <button class="view-toggle-btn active" onclick="switchView('grid')">
                                            <i class="fas fa-th"></i>
                                        </button>
                                        <button class="view-toggle-btn" onclick="switchView('list')">
                                            <i class="fas fa-list"></i>
                                        </button>
                                    </div>
                                    <button class="btn btn-primary" onclick="openProductDrawer('add')">
                                        <i class="fas fa-plus"></i>
                                        æ–°å¢å•†å“
                                    </button>
                                </div>
                            </div>
                            <div class="products-toolbar">
                                <div class="search-box">
                                    <i class="fas fa-search"></i>
                                    <input type="text" placeholder="æœç´¢å•†å“åç§°..." oninput="searchProducts(this.value)">
                                </div>
                            </div>
                        </div>

                        <div class="products-body" id="productsBody">
                            <!-- ç½‘æ ¼è§†å›¾ -->
                            <div class="products-grid" id="gridView">
                                <!-- å•†å“å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </div>

                            <!-- åˆ—è¡¨è§†å›¾ -->
                            <table class="products-table" id="listView" style="display: none;">
                                <thead>
                                    <tr>
                                        <th>å•†å“ä¿¡æ¯</th>
                                        <th>ç±»åˆ«</th>
                                        <th>ä»·æ ¼</th>
                                        <th>åº“å­˜</th>
                                        <th>çŠ¶æ€</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody id="productTableBody">
                                    <!-- å•†å“å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- å•†å“æŠ½å±‰ -->
    <div class="drawer-overlay" id="productDrawerOverlay" onclick="closeProductDrawer()"></div>
    <div class="drawer" id="productDrawer">
        <div class="drawer-header">
            <h3 class="drawer-title" id="productDrawerTitle">æ–°å¢å•†å“</h3>
            <button class="drawer-close" onclick="closeProductDrawer()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="drawer-body">
            <form id="productForm">
                <div class="form-section">
                    <h4 class="form-section-title">åŸºæœ¬ä¿¡æ¯</h4>
                    <div class="form-group">
                        <label class="form-label">å•†å“åç§° <span class="required">*</span></label>
                        <input type="text" class="form-input" name="productName" placeholder="è¯·è¾“å…¥å•†å“åç§°" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">å•†å“ç¼–ç </label>
                        <input type="text" class="form-input" name="productCode" placeholder="è‡ªåŠ¨ç”Ÿæˆæˆ–æ‰‹åŠ¨è¾“å…¥">
                        <div class="form-hint">ç•™ç©ºåˆ™è‡ªåŠ¨ç”Ÿæˆ</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">å•†å“ç±»åˆ« <span class="required">*</span></label>
                        <select class="form-select" name="category" required>
                            <option value="">è¯·é€‰æ‹©ç±»åˆ«</option>
                            <option value="meal">ä¸»é£Ÿç±»</option>
                            <option value="dish">èœå“ç±»</option>
                            <option value="drink">é¥®æ–™ç±»</option>
                            <option value="snack">å°åƒç±»</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">å•†å“æè¿°</label>
                        <textarea class="form-textarea" name="description" placeholder="è¯·è¾“å…¥å•†å“æè¿°"></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h4 class="form-section-title">ä»·æ ¼ä¸åº“å­˜</h4>
                    <div class="form-group">
                        <label class="form-label">é”€å”®ä»·æ ¼ <span class="required">*</span></label>
                        <input type="number" class="form-input" name="price" placeholder="0.00" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">åˆå§‹åº“å­˜</label>
                        <input type="number" class="form-input" name="stock" placeholder="0" min="0">
                        <div class="form-hint">ç•™ç©ºè¡¨ç¤ºä¸é™åº“å­˜</div>
                    </div>
                </div>

                <div class="form-section">
                    <h4 class="form-section-title">å…¶ä»–è®¾ç½®</h4>
                    <div class="form-group">
                        <label class="form-label">å•†å“çŠ¶æ€</label>
                        <select class="form-select" name="status">
                            <option value="active">ä¸Šæ¶</option>
                            <option value="inactive">ä¸‹æ¶</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
        <div class="drawer-footer">
            <button class="btn btn-outline" onclick="closeProductDrawer()">å–æ¶ˆ</button>
            <button class="btn btn-primary" onclick="submitProduct()">ä¿å­˜</button>
        </div>
    </div>

    <!-- ç±»åˆ«æŠ½å±‰ -->
    <div class="drawer-overlay" id="categoryDrawerOverlay" onclick="closeCategoryDrawer()"></div>
    <div class="drawer" id="categoryDrawer">
        <div class="drawer-header">
            <h3 class="drawer-title" id="categoryDrawerTitle">æ–°å¢ç±»åˆ«</h3>
            <button class="drawer-close" onclick="closeCategoryDrawer()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="drawer-body">
            <form id="categoryForm">
                <div class="form-group">
                    <label class="form-label">ç±»åˆ«åç§° <span class="required">*</span></label>
                    <input type="text" class="form-input" name="categoryName" placeholder="è¯·è¾“å…¥ç±»åˆ«åç§°" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ç±»åˆ«å›¾æ ‡</label>
                    <select class="form-select" name="icon">
                        <option value="utensils">ğŸ´ é¤å…·</option>
                        <option value="bowl-food">ğŸœ ç¢—</option>
                        <option value="mug-hot">â˜• å’–å•¡æ¯</option>
                        <option value="cookie">ğŸª é¥¼å¹²</option>
                        <option value="pizza-slice">ğŸ• æŠ«è¨</option>
                        <option value="hamburger">ğŸ” æ±‰å ¡</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">æ’åº</label>
                    <input type="number" class="form-input" name="sort" placeholder="0" min="0">
                    <div class="form-hint">æ•°å€¼è¶Šå°è¶Šé å‰</div>
                </div>
            </form>
        </div>
        <div class="drawer-footer">
            <button class="btn btn-outline" onclick="closeCategoryDrawer()">å–æ¶ˆ</button>
            <button class="btn btn-primary" onclick="submitCategory()">ä¿å­˜</button>
        </div>
    </div>

    <script>
        // å•†å“æ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰
        const productsData = [
            { id: 1, name: 'ç»å…¸æ±‰å ¡å¥—é¤', category: 'meal', price: 28.00, stock: 50, status: 'active', desc: 'ç‰›è‚‰æ±‰å ¡é…è–¯æ¡å’Œå¯ä¹', icon: 'hamburger' },
            { id: 2, name: 'æ„å¤§åˆ©æŠ«è¨', category: 'meal', price: 35.00, stock: 30, status: 'active', desc: 'ç»å…¸æ„å¼æŠ«è¨ï¼Œé…æ–™ä¸°å¯Œ', icon: 'pizza-slice' },
            { id: 3, name: 'ç‚’é¥­å¥—é¤', category: 'meal', price: 18.00, stock: 100, status: 'active', desc: 'è›‹ç‚’é¥­é…å°èœ', icon: 'bowl-food' },
            { id: 4, name: 'å®«ä¿é¸¡ä¸', category: 'dish', price: 25.00, stock: 40, status: 'active', desc: 'ç»å…¸å·èœ', icon: 'pepper-hot' },
            { id: 5, name: 'ç³–é†‹æ’éª¨', category: 'dish', price: 32.00, stock: 35, status: 'active', desc: 'é…¸ç”œå¯å£', icon: 'drumstick-bite' },
            { id: 6, name: 'å¯å£å¯ä¹', category: 'drink', price: 5.00, stock: 200, status: 'active', desc: '330mlç½è£…', icon: 'mug-soda' },
            { id: 7, name: 'çƒ­å’–å•¡', category: 'drink', price: 12.00, stock: 150, status: 'active', desc: 'æ–°é²œç°ç£¨', icon: 'mug-hot' },
            { id: 8, name: 'è–¯æ¡', category: 'snack', price: 8.00, stock: 80, status: 'active', desc: 'é¦™è„†å¯å£', icon: 'french-fries' }
        ];

        let currentCategory = 'all';
        let currentView = 'grid';

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('å•†å“èµ„æ–™é¡µé¢åŠ è½½å®Œæˆ');
            renderProducts();
        });

        // é€‰æ‹©ç±»åˆ«
        function selectCategory(element, categoryId) {
            // æ›´æ–°é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.category-header').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');

            currentCategory = categoryId;
            
            // æ›´æ–°ç±»åˆ«åç§°
            const categoryNames = {
                'all': 'å…¨éƒ¨å•†å“',
                'meal': 'ä¸»é£Ÿç±»',
                'dish': 'èœå“ç±»',
                'drink': 'é¥®æ–™ç±»',
                'snack': 'å°åƒç±»'
            };
            document.getElementById('currentCategoryName').textContent = categoryNames[categoryId];

            // é‡æ–°æ¸²æŸ“å•†å“
            renderProducts();
        }

        // åˆ‡æ¢è§†å›¾
        function switchView(view) {
            currentView = view;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.view-toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.view-toggle-btn').classList.add('active');

            // åˆ‡æ¢è§†å›¾
            if (view === 'grid') {
                document.getElementById('gridView').style.display = 'grid';
                document.getElementById('listView').style.display = 'none';
            } else {
                document.getElementById('gridView').style.display = 'none';
                document.getElementById('listView').style.display = 'table';
            }

            renderProducts();
        }

        // æ¸²æŸ“å•†å“
        function renderProducts() {
            // ç­›é€‰å•†å“
            const filteredProducts = currentCategory === 'all' 
                ? productsData 
                : productsData.filter(p => p.category === currentCategory);

            // æ›´æ–°å•†å“æ•°é‡
            document.getElementById('productCount').textContent = filteredProducts.length;

            if (currentView === 'grid') {
                renderGridView(filteredProducts);
            } else {
                renderListView(filteredProducts);
            }
        }

        // æ¸²æŸ“ç½‘æ ¼è§†å›¾
        function renderGridView(products) {
            const gridView = document.getElementById('gridView');
            gridView.innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-icon">
                        <i class="fas fa-${product.icon}"></i>
                    </div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-desc">${product.desc}</div>
                    <div class="product-price">Â¥${product.price.toFixed(2)}</div>
                    <div class="product-actions">
                        <button class="btn btn-sm btn-outline" onclick="editProduct(${product.id})">
                            <i class="fas fa-edit"></i>
                            ç¼–è¾‘
                        </button>
                        <button class="btn btn-sm btn-primary">
                            <i class="fas fa-chart-line"></i>
                            ç»Ÿè®¡
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // æ¸²æŸ“åˆ—è¡¨è§†å›¾
        function renderListView(products) {
            const tableBody = document.getElementById('productTableBody');
            const categoryNames = {
                'meal': 'ä¸»é£Ÿç±»',
                'dish': 'èœå“ç±»',
                'drink': 'é¥®æ–™ç±»',
                'snack': 'å°åƒç±»'
            };

            tableBody.innerHTML = products.map(product => `
                <tr>
                    <td>
                        <div class="product-info">
                            <div class="product-avatar">
                                <i class="fas fa-${product.icon}"></i>
                            </div>
                            <div class="product-details">
                                <h4>${product.name}</h4>
                                <p>${product.desc}</p>
                            </div>
                        </div>
                    </td>
                    <td>${categoryNames[product.category]}</td>
                    <td><strong style="color: var(--primary-600);">Â¥${product.price.toFixed(2)}</strong></td>
                    <td>${product.stock}</td>
                    <td>
                        <span class="status-badge status-${product.status}">
                            ${product.status === 'active' ? 'ä¸Šæ¶' : 'ä¸‹æ¶'}
                        </span>
                    </td>
                    <td>
                        <div style="display: flex; gap: var(--space-xs);">
                            <button class="btn btn-sm btn-outline" onclick="editProduct(${product.id})">
                                <i class="fas fa-edit"></i>
                                ç¼–è¾‘
                            </button>
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-chart-line"></i>
                                ç»Ÿè®¡
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // æœç´¢å•†å“
        function searchProducts(keyword) {
            console.log('æœç´¢å•†å“:', keyword);
            // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨APIæœç´¢
        }

        // æ‰“å¼€å•†å“æŠ½å±‰
        function openProductDrawer(mode, productId) {
            const overlay = document.getElementById('productDrawerOverlay');
            const drawer = document.getElementById('productDrawer');
            const title = document.getElementById('productDrawerTitle');

            if (mode === 'add') {
                title.textContent = 'æ–°å¢å•†å“';
                document.getElementById('productForm').reset();
            } else {
                title.textContent = 'ç¼–è¾‘å•†å“';
                // åŠ è½½å•†å“æ•°æ®
            }

            overlay.classList.add('show');
            drawer.classList.add('show');
        }

        // å…³é—­å•†å“æŠ½å±‰
        function closeProductDrawer() {
            const overlay = document.getElementById('productDrawerOverlay');
            const drawer = document.getElementById('productDrawer');
            overlay.classList.remove('show');
            drawer.classList.remove('show');
        }

        // æäº¤å•†å“
        function submitProduct() {
            const form = document.getElementById('productForm');
            if (form.checkValidity()) {
                console.log('ä¿å­˜å•†å“');
                alert('å•†å“ä¿å­˜æˆåŠŸï¼');
                closeProductDrawer();
                // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨API
            } else {
                form.reportValidity();
            }
        }

        // ç¼–è¾‘å•†å“
        function editProduct(productId) {
            openProductDrawer('edit', productId);
        }

        // æ‰“å¼€ç±»åˆ«æŠ½å±‰
        function openCategoryDrawer(mode, categoryId) {
            const overlay = document.getElementById('categoryDrawerOverlay');
            const drawer = document.getElementById('categoryDrawer');
            const title = document.getElementById('categoryDrawerTitle');

            if (mode === 'add') {
                title.textContent = 'æ–°å¢ç±»åˆ«';
                document.getElementById('categoryForm').reset();
            } else {
                title.textContent = 'ç¼–è¾‘ç±»åˆ«';
                // åŠ è½½ç±»åˆ«æ•°æ®
            }

            overlay.classList.add('show');
            drawer.classList.add('show');
        }

        // å…³é—­ç±»åˆ«æŠ½å±‰
        function closeCategoryDrawer() {
            const overlay = document.getElementById('categoryDrawerOverlay');
            const drawer = document.getElementById('categoryDrawer');
            overlay.classList.remove('show');
            drawer.classList.remove('show');
        }

        // æäº¤ç±»åˆ«
        function submitCategory() {
            const form = document.getElementById('categoryForm');
            if (form.checkValidity()) {
                console.log('ä¿å­˜ç±»åˆ«');
                alert('ç±»åˆ«ä¿å­˜æˆåŠŸï¼');
                closeCategoryDrawer();
                // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨API
            } else {
                form.reportValidity();
            }
        }
    </script>
</body>
</html>
