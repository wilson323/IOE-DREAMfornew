<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¤åˆ«èµ„æ–™ - æ¶ˆè´¹ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="../js/menu.js" defer></script>
    <link rel="stylesheet" href="../css/main.css">
    <style>
        .split-container {
            display: flex;
            gap: var(--space-lg);
            height: calc(100vh - 180px);
            overflow: hidden;
        }

        /* å·¦ä¾§é¢æ¿ - å¤§é¤åˆ«åˆ†ç±» */
        .left-panel {
            width: 280px;
            min-width: 240px;
            max-width: 350px;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--gray-900);
        }

        .panel-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-md);
        }

        /* å¤§é¤åˆ«åˆ—è¡¨ */
        .meal-category-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .meal-category-item {
            margin-bottom: var(--space-xs);
        }

        .meal-category-header {
            display: flex;
            align-items: center;
            padding: var(--space-md);
            cursor: pointer;
            border-radius: var(--radius-md);
            transition: background var(--transition);
        }

        .meal-category-header:hover {
            background: var(--gray-50);
        }

        .meal-category-header.active {
            background: var(--primary-50);
            color: var(--primary-600);
        }

        .meal-category-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary-100);
            color: var(--primary-600);
            border-radius: var(--radius-md);
            margin-right: var(--space-sm);
            font-size: var(--text-base);
        }

        .meal-category-header.active .meal-category-icon {
            background: var(--primary-600);
            color: white;
        }

        .meal-category-name {
            flex: 1;
            font-weight: 500;
            font-size: var(--text-sm);
        }

        .meal-category-count {
            font-size: var(--text-xs);
            color: var(--gray-500);
            background: var(--gray-100);
            padding: 2px 8px;
            border-radius: var(--radius-full);
        }

        .meal-category-header.active .meal-category-count {
            background: var(--primary-600);
            color: white;
        }

        /* å³ä¾§é¢æ¿ - é¤åˆ«åˆ—è¡¨ */
        .right-panel {
            flex: 1;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .meals-header {
            padding: var(--space-lg) var(--space-xl);
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
        }

        .meals-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .meals-info h3 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--gray-900);
            margin: 0 0 var(--space-xs) 0;
        }

        .meals-meta {
            font-size: var(--text-sm);
            color: var(--gray-500);
        }

        .meals-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .meals-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-xl);
        }

        /* é¤åˆ«å¡ç‰‡ */
        .meals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-lg);
        }

        .meal-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            border: 1px solid var(--gray-200);
            transition: all var(--transition);
            cursor: pointer;
        }

        .meal-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
            border-color: var(--primary-300);
        }

        .meal-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-md);
        }

        .meal-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-100), var(--primary-200));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-xl);
            color: var(--primary-600);
        }

        .meal-status {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius);
            font-size: var(--text-xs);
            font-weight: 500;
        }

        .status-active {
            background: var(--success-light);
            color: var(--success);
        }

        .status-inactive {
            background: var(--gray-100);
            color: var(--gray-600);
        }

        .meal-name {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-xs);
            font-size: var(--text-lg);
        }

        .meal-time {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            color: var(--gray-600);
            font-size: var(--text-sm);
            margin-bottom: var(--space-md);
        }

        .meal-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
            padding: var(--space-md);
            background: var(--gray-50);
            border-radius: var(--radius-md);
        }

        .meal-info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .meal-info-label {
            font-size: var(--text-xs);
            color: var(--gray-500);
        }

        .meal-info-value {
            font-size: var(--text-sm);
            color: var(--gray-900);
            font-weight: 500;
        }

        .meal-actions {
            display: flex;
            gap: var(--space-xs);
            padding-top: var(--space-md);
            border-top: 1px solid var(--gray-200);
        }

        .btn-sm {
            padding: var(--space-xs) var(--space-sm);
            font-size: var(--text-xs);
            flex: 1;
        }

        /* æŠ½å±‰æ ·å¼ */
        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
        }

        .drawer-overlay.show {
            display: block;
        }

        .drawer {
            position: fixed;
            top: 0;
            right: -500px;
            width: 500px;
            max-width: 90vw;
            height: 100vh;
            background: white;
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .drawer.show {
            right: 0;
        }

        .drawer-header {
            padding: var(--space-xl);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .drawer-title {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--gray-900);
        }

        .drawer-close {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--gray-100);
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-600);
        }

        .drawer-close:hover {
            background: var(--gray-200);
        }

        .drawer-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-xl);
        }

        .drawer-footer {
            padding: var(--space-xl);
            border-top: 1px solid var(--gray-200);
            display: flex;
            gap: var(--space-sm);
            justify-content: flex-end;
        }

        .form-section {
            margin-bottom: var(--space-xl);
        }

        .form-section-title {
            font-size: var(--text-base);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid var(--gray-200);
        }

        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-label {
            display: block;
            font-weight: 500;
            color: var(--gray-700);
            margin-bottom: var(--space-xs);
            font-size: var(--text-sm);
        }

        .form-label .required {
            color: var(--error);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
        }

        .form-hint {
            margin-top: var(--space-xs);
            font-size: var(--text-xs);
            color: var(--gray-500);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ä¾§è¾¹æ  -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-utensils fa-lg"></i>
                <div>
                    <div class="sidebar-title">æ¶ˆè´¹ç®¡ç†ç³»ç»Ÿ</div>
                    <div class="sidebar-subtitle">Consumption Hub</div>
                </div>
            </div>
            <div class="sidebar-menu">
                <!-- èœå•å°†ç”± menu.js è‡ªåŠ¨ç”Ÿæˆ -->
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <header class="header">
                <h1>é¤åˆ«èµ„æ–™</h1>
                <div class="header-actions">
                    <button class="btn btn-outline">
                        <i class="fas fa-bell"></i>
                        é€šçŸ¥
                    </button>
                    <div class="user-info">
                        <div>
                            <div style="font-weight: 600;">ç³»ç»Ÿç®¡ç†å‘˜</div>
                            <div style="font-size: 12px; color: var(--gray-500);">åœ¨çº¿</div>
                        </div>
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </header>

            <!-- ä¸»è¦å†…å®¹ -->
            <div class="content">
                <div class="split-container">
                    <!-- å·¦ä¾§ï¼šå¤§é¤åˆ«åˆ†ç±» -->
                    <div class="left-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">å¤§é¤åˆ«åˆ†ç±»</h2>
                            <button class="btn btn-sm btn-primary" onclick="openCategoryDrawer('add')" title="æ–°å¢å¤§é¤åˆ«">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="panel-body">
                            <ul class="meal-category-list" id="categoryList">
                                <li class="meal-category-item">
                                    <div class="meal-category-header active" onclick="selectCategory(this, 'all')">
                                        <div class="meal-category-icon"><i class="fas fa-th"></i></div>
                                        <div class="meal-category-name">å…¨éƒ¨é¤åˆ«</div>
                                        <span class="meal-category-count">9</span>
                                    </div>
                                </li>
                                <li class="meal-category-item">
                                    <div class="meal-category-header" onclick="selectCategory(this, 'main')">
                                        <div class="meal-category-icon"><i class="fas fa-utensils"></i></div>
                                        <div class="meal-category-name">ä¸»é¤</div>
                                        <span class="meal-category-count">3</span>
                                    </div>
                                </li>
                                <li class="meal-category-item">
                                    <div class="meal-category-header" onclick="selectCategory(this, 'extra')">
                                        <div class="meal-category-icon"><i class="fas fa-cookie"></i></div>
                                        <div class="meal-category-name">åŠ é¤</div>
                                        <span class="meal-category-count">2</span>
                                    </div>
                                </li>
                                <li class="meal-category-item">
                                    <div class="meal-category-header" onclick="selectCategory(this, 'night')">
                                        <div class="meal-category-icon"><i class="fas fa-moon"></i></div>
                                        <div class="meal-category-name">å®µå¤œ</div>
                                        <span class="meal-category-count">2</span>
                                    </div>
                                </li>
                                <li class="meal-category-item">
                                    <div class="meal-category-header" onclick="selectCategory(this, 'special')">
                                        <div class="meal-category-icon"><i class="fas fa-star"></i></div>
                                        <div class="meal-category-name">ç‰¹æ®Šé¤</div>
                                        <span class="meal-category-count">2</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- å³ä¾§ï¼šé¤åˆ«åˆ—è¡¨ -->
                    <div class="right-panel">
                        <div class="meals-header">
                            <div class="meals-header-top">
                                <div class="meals-info">
                                    <h3 id="currentCategoryName">å…¨éƒ¨é¤åˆ«</h3>
                                    <div class="meals-meta">å…± <span id="mealCount">9</span> ä¸ªé¤åˆ«</div>
                                </div>
                                <div class="meals-actions">
                                    <button class="btn btn-primary" onclick="openMealDrawer('add')">
                                        <i class="fas fa-plus"></i>
                                        æ–°å¢é¤åˆ«
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="meals-body" id="mealsBody">
                            <!-- é¤åˆ«å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- é¤åˆ«æŠ½å±‰ -->
    <div class="drawer-overlay" id="mealDrawerOverlay" onclick="closeMealDrawer()"></div>
    <div class="drawer" id="mealDrawer">
        <div class="drawer-header">
            <h3 class="drawer-title" id="mealDrawerTitle">æ–°å¢é¤åˆ«</h3>
            <button class="drawer-close" onclick="closeMealDrawer()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="drawer-body">
            <form id="mealForm">
                <div class="form-section">
                    <h4 class="form-section-title">åŸºæœ¬ä¿¡æ¯</h4>
                    <div class="form-group">
                        <label class="form-label">é¤åˆ«åç§° <span class="required">*</span></label>
                        <input type="text" class="form-input" name="mealName" placeholder="è¯·è¾“å…¥é¤åˆ«åç§°" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ‰€å±å¤§é¤åˆ« <span class="required">*</span></label>
                        <select class="form-select" name="category" required>
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="main">ä¸»é¤</option>
                            <option value="extra">åŠ é¤</option>
                            <option value="night">å®µå¤œ</option>
                            <option value="special">ç‰¹æ®Šé¤</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">å›¾æ ‡</label>
                        <select class="form-select" name="icon">
                            <option value="sun">â˜€ï¸ å¤ªé˜³</option>
                            <option value="cloud-sun">ğŸŒ¤ï¸ äº‘å¤ªé˜³</option>
                            <option value="moon">ğŸŒ™ æœˆäº®</option>
                            <option value="star">â­ æ˜Ÿæ˜Ÿ</option>
                            <option value="cookie">ğŸª é¥¼å¹²</option>
                            <option value="coffee">â˜• å’–å•¡</option>
                        </select>
                    </div>
                </div>

                <div class="form-section">
                    <h4 class="form-section-title">æ—¶é—´è®¾ç½®</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">å¼€å§‹æ—¶é—´ <span class="required">*</span></label>
                            <input type="time" class="form-input" name="startTime" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ç»“æŸæ—¶é—´ <span class="required">*</span></label>
                            <input type="time" class="form-input" name="endTime" required>
                        </div>
                    </div>
                    <div class="form-hint">æ—¶é—´æ®µä¸èƒ½ä¸å…¶ä»–é¤åˆ«é‡å </div>
                </div>

                <div class="form-section">
                    <h4 class="form-section-title">ä»·æ ¼ç­–ç•¥</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">åŸºç¡€ä»·æ ¼</label>
                            <input type="number" class="form-input" name="basePrice" placeholder="0.00" step="0.01" min="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æŠ˜æ‰£æ¯”ä¾‹</label>
                            <input type="number" class="form-input" name="discount" placeholder="100" min="0" max="100">
                            <div class="form-hint">å¡«å†™æŠ˜æ‰£ç™¾åˆ†æ¯”ï¼Œå¦‚80è¡¨ç¤º8æŠ˜</div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4 class="form-section-title">å…¶ä»–è®¾ç½®</h4>
                    <div class="form-group">
                        <label class="form-label">çŠ¶æ€</label>
                        <select class="form-select" name="status">
                            <option value="active">å¯ç”¨</option>
                            <option value="inactive">åœç”¨</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ’åº</label>
                        <input type="number" class="form-input" name="sort" placeholder="0" min="0">
                        <div class="form-hint">æ•°å€¼è¶Šå°è¶Šé å‰</div>
                    </div>
                </div>
            </form>
        </div>
        <div class="drawer-footer">
            <button class="btn btn-outline" onclick="closeMealDrawer()">å–æ¶ˆ</button>
            <button class="btn btn-primary" onclick="submitMeal()">ä¿å­˜</button>
        </div>
    </div>

    <!-- å¤§é¤åˆ«æŠ½å±‰ -->
    <div class="drawer-overlay" id="categoryDrawerOverlay" onclick="closeCategoryDrawer()"></div>
    <div class="drawer" id="categoryDrawer">
        <div class="drawer-header">
            <h3 class="drawer-title" id="categoryDrawerTitle">æ–°å¢å¤§é¤åˆ«</h3>
            <button class="drawer-close" onclick="closeCategoryDrawer()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="drawer-body">
            <form id="categoryForm">
                <div class="form-group">
                    <label class="form-label">å¤§é¤åˆ«åç§° <span class="required">*</span></label>
                    <input type="text" class="form-input" name="categoryName" placeholder="è¯·è¾“å…¥å¤§é¤åˆ«åç§°" required>
                </div>
                <div class="form-group">
                    <label class="form-label">å›¾æ ‡</label>
                    <select class="form-select" name="icon">
                        <option value="utensils">ğŸ´ é¤å…·</option>
                        <option value="cookie">ğŸª é¥¼å¹²</option>
                        <option value="moon">ğŸŒ™ æœˆäº®</option>
                        <option value="star">â­ æ˜Ÿæ˜Ÿ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">æ’åº</label>
                    <input type="number" class="form-input" name="sort" placeholder="0" min="0">
                    <div class="form-hint">æ•°å€¼è¶Šå°è¶Šé å‰</div>
                </div>
            </form>
        </div>
        <div class="drawer-footer">
            <button class="btn btn-outline" onclick="closeCategoryDrawer()">å–æ¶ˆ</button>
            <button class="btn btn-primary" onclick="submitCategory()">ä¿å­˜</button>
        </div>
    </div>

    <script>
        // é¤åˆ«æ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰
        const mealsData = [
            { id: 1, name: 'æ—©é¤', category: 'main', startTime: '07:00', endTime: '09:00', basePrice: 10, discount: 100, status: 'active', icon: 'sun' },
            { id: 2, name: 'åˆé¤', category: 'main', startTime: '11:30', endTime: '13:30', basePrice: 15, discount: 100, status: 'active', icon: 'cloud-sun' },
            { id: 3, name: 'æ™šé¤', category: 'main', startTime: '17:30', endTime: '19:30', basePrice: 15, discount: 100, status: 'active', icon: 'moon' },
            { id: 4, name: 'ä¸ŠåˆèŒ¶', category: 'extra', startTime: '09:30', endTime: '10:30', basePrice: 5, discount: 100, status: 'active', icon: 'coffee' },
            { id: 5, name: 'ä¸‹åˆèŒ¶', category: 'extra', startTime: '15:00', endTime: '16:00', basePrice: 5, discount: 100, status: 'active', icon: 'cookie' },
            { id: 6, name: 'å¤œå®µ', category: 'night', startTime: '21:00', endTime: '23:00', basePrice: 12, discount: 100, status: 'active', icon: 'star' },
            { id: 7, name: 'æ—©å®µå¤œ', category: 'night', startTime: '00:00', endTime: '02:00', basePrice: 12, discount: 100, status: 'inactive', icon: 'moon' },
            { id: 8, name: 'èŠ‚æ—¥é¤', category: 'special', startTime: '00:00', endTime: '23:59', basePrice: 20, discount: 80, status: 'inactive', icon: 'star' },
            { id: 9, name: 'åŠ ç­é¤', category: 'special', startTime: '19:00', endTime: '21:00', basePrice: 15, discount: 100, status: 'active', icon: 'utensils' }
        ];

        let currentCategory = 'all';

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é¤åˆ«èµ„æ–™é¡µé¢åŠ è½½å®Œæˆ');
            renderMeals();
        });

        // é€‰æ‹©å¤§é¤åˆ«åˆ†ç±»
        function selectCategory(element, categoryId) {
            // æ›´æ–°é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.meal-category-header').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');

            currentCategory = categoryId;
            
            // æ›´æ–°åˆ†ç±»åç§°
            const categoryNames = {
                'all': 'å…¨éƒ¨é¤åˆ«',
                'main': 'ä¸»é¤',
                'extra': 'åŠ é¤',
                'night': 'å®µå¤œ',
                'special': 'ç‰¹æ®Šé¤'
            };
            document.getElementById('currentCategoryName').textContent = categoryNames[categoryId];

            // é‡æ–°æ¸²æŸ“é¤åˆ«
            renderMeals();
        }

        // æ¸²æŸ“é¤åˆ«å¡ç‰‡
        function renderMeals() {
            // ç­›é€‰é¤åˆ«
            const filteredMeals = currentCategory === 'all' 
                ? mealsData 
                : mealsData.filter(m => m.category === currentCategory);

            // æ›´æ–°æ•°é‡
            document.getElementById('mealCount').textContent = filteredMeals.length;

            // æ¸²æŸ“å¡ç‰‡
            const mealsBody = document.getElementById('mealsBody');
            mealsBody.innerHTML = `
                <div class="meals-grid">
                    ${filteredMeals.map(meal => `
                        <div class="meal-card">
                            <div class="meal-card-header">
                                <div class="meal-icon">
                                    <i class="fas fa-${meal.icon}"></i>
                                </div>
                                <span class="meal-status status-${meal.status}">
                                    <i class="fas fa-${meal.status === 'active' ? 'check-circle' : 'times-circle'}"></i>
                                    ${meal.status === 'active' ? 'å¯ç”¨' : 'åœç”¨'}
                                </span>
                            </div>
                            <div class="meal-name">${meal.name}</div>
                            <div class="meal-time">
                                <i class="fas fa-clock"></i>
                                ${meal.startTime} - ${meal.endTime}
                            </div>
                            <div class="meal-info">
                                <div class="meal-info-item">
                                    <div class="meal-info-label">åŸºç¡€ä»·æ ¼</div>
                                    <div class="meal-info-value">Â¥${meal.basePrice.toFixed(2)}</div>
                                </div>
                                <div class="meal-info-item">
                                    <div class="meal-info-label">æŠ˜æ‰£æ¯”ä¾‹</div>
                                    <div class="meal-info-value">${meal.discount}%</div>
                                </div>
                            </div>
                            <div class="meal-actions">
                                <button class="btn btn-sm btn-outline" onclick="editMeal(${meal.id})">
                                    <i class="fas fa-edit"></i>
                                    ç¼–è¾‘
                                </button>
                                <button class="btn btn-sm btn-primary">
                                    <i class="fas fa-cog"></i>
                                    é…ç½®
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // æ‰“å¼€é¤åˆ«æŠ½å±‰
        function openMealDrawer(mode, mealId) {
            const overlay = document.getElementById('mealDrawerOverlay');
            const drawer = document.getElementById('mealDrawer');
            const title = document.getElementById('mealDrawerTitle');

            if (mode === 'add') {
                title.textContent = 'æ–°å¢é¤åˆ«';
                document.getElementById('mealForm').reset();
            } else {
                title.textContent = 'ç¼–è¾‘é¤åˆ«';
                // åŠ è½½é¤åˆ«æ•°æ®
            }

            overlay.classList.add('show');
            drawer.classList.add('show');
        }

        // å…³é—­é¤åˆ«æŠ½å±‰
        function closeMealDrawer() {
            const overlay = document.getElementById('mealDrawerOverlay');
            const drawer = document.getElementById('mealDrawer');
            overlay.classList.remove('show');
            drawer.classList.remove('show');
        }

        // æäº¤é¤åˆ«
        function submitMeal() {
            const form = document.getElementById('mealForm');
            if (form.checkValidity()) {
                console.log('ä¿å­˜é¤åˆ«');
                alert('é¤åˆ«ä¿å­˜æˆåŠŸï¼');
                closeMealDrawer();
                // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨API
            } else {
                form.reportValidity();
            }
        }

        // ç¼–è¾‘é¤åˆ«
        function editMeal(mealId) {
            openMealDrawer('edit', mealId);
        }

        // æ‰“å¼€å¤§é¤åˆ«æŠ½å±‰
        function openCategoryDrawer(mode, categoryId) {
            const overlay = document.getElementById('categoryDrawerOverlay');
            const drawer = document.getElementById('categoryDrawer');
            const title = document.getElementById('categoryDrawerTitle');

            if (mode === 'add') {
                title.textContent = 'æ–°å¢å¤§é¤åˆ«';
                document.getElementById('categoryForm').reset();
            } else {
                title.textContent = 'ç¼–è¾‘å¤§é¤åˆ«';
                // åŠ è½½å¤§é¤åˆ«æ•°æ®
            }

            overlay.classList.add('show');
            drawer.classList.add('show');
        }

        // å…³é—­å¤§é¤åˆ«æŠ½å±‰
        function closeCategoryDrawer() {
            const overlay = document.getElementById('categoryDrawerOverlay');
            const drawer = document.getElementById('categoryDrawer');
            overlay.classList.remove('show');
            drawer.classList.remove('show');
        }

        // æäº¤å¤§é¤åˆ«
        function submitCategory() {
            const form = document.getElementById('categoryForm');
            if (form.checkValidity()) {
                console.log('ä¿å­˜å¤§é¤åˆ«');
                alert('å¤§é¤åˆ«ä¿å­˜æˆåŠŸï¼');
                closeCategoryDrawer();
                // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨API
            } else {
                form.reportValidity();
            }
        }
    </script>
</body>
</html>
