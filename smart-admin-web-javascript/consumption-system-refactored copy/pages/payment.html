<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>支付管理 - 消费管理系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="../js/menu.js" defer></script>
    <link rel="stylesheet" href="../css/main.css">
    <style>
        .content-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-2xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            margin-bottom: var(--space-xl);
        }
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-xl);
            margin-bottom: var(--space-xl);
        }
        .payment-method-card {
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            border: 2px solid var(--gray-200);
            transition: all var(--transition);
            cursor: pointer;
        }
        .payment-method-card:hover {
            border-color: var(--primary-300);
            transform: translateY(-2px);
        }
        .payment-method-card.active {
            border-color: var(--primary-500);
            background: var(--primary-50);
        }
        .payment-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }
        .payment-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-lg);
            font-size: var(--text-xl);
        }
        .wechat-icon {
            background: #07c160;
            color: white;
        }
        .alipay-icon {
            background: #1677ff;
            color: white;
        }
        .unionpay-icon {
            background: #e60012;
            color: white;
        }
        .payment-title {
            flex: 1;
        }
        .payment-title h3 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-xs);
        }
        .payment-title p {
            font-size: var(--text-sm);
            color: var(--gray-600);
        }
        .payment-status {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: var(--text-sm);
            font-weight: 500;
        }
        .status-active {
            color: var(--success-600);
        }
        .status-inactive {
            color: var(--danger-600);
        }
        .payment-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
            margin-top: var(--space-lg);
        }
        .stat-item {
            text-align: center;
            padding: var(--space-sm);
            background: white;
            border-radius: var(--radius);
        }
        .stat-value {
            font-size: var(--text-lg);
            font-weight: 700;
            color: var(--gray-900);
        }
        .stat-label {
            font-size: var(--text-xs);
            color: var(--gray-500);
            margin-top: var(--space-xs);
        }
        .config-section {
            margin-top: var(--space-lg);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--gray-200);
        }
        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }
        .config-label {
            font-weight: 500;
            color: var(--gray-700);
        }
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background: var(--gray-300);
            border-radius: 12px;
            cursor: pointer;
            transition: background var(--transition);
        }
        .toggle-switch.active {
            background: var(--success-500);
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform var(--transition);
        }
        .toggle-switch.active::after {
            transform: translateX(24px);
        }
        .recent-transactions {
            margin-top: var(--space-xl);
        }
        .transaction-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md);
            background: var(--gray-50);
            border-radius: var(--radius);
            border: 1px solid var(--gray-200);
        }
        .transaction-info {
            flex: 1;
        }
        .transaction-id {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-xs);
        }
        .transaction-meta {
            display: flex;
            gap: var(--space-lg);
            font-size: var(--text-sm);
            color: var(--gray-600);
        }
        .transaction-amount {
            font-size: var(--text-lg);
            font-weight: 700;
            color: var(--primary-600);
        }
        .filter-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
            padding: var(--space-xl);
            background: var(--gray-50);
            border-radius: var(--radius-lg);
        }
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }
        .filter-group label {
            font-weight: 500;
            color: var(--gray-700);
            font-size: var(--text-sm);
        }
        .filter-group input,
        .filter-group select {
            padding: var(--space-sm);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius);
            background: white;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        .data-table th {
            background: var(--gray-50);
            padding: var(--space-md);
            text-align: left;
            font-weight: 600;
            color: var(--gray-900);
            border-bottom: 1px solid var(--gray-200);
        }
        .data-table td {
            padding: var(--space-md);
            border-bottom: 1px solid var(--gray-100);
        }
        .data-table tr:hover {
            background: var(--gray-50);
        }
        .payment-badge {
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius);
            font-size: var(--text-xs);
            font-weight: 500;
        }
        .payment-wechat {
            background: #07c16020;
            color: #07c160;
        }
        .payment-alipay {
            background: #1677ff20;
            color: #1677ff;
        }
        .payment-unionpay {
            background: #e6001220;
            color: #e60012;
        }
        .status-badge {
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius);
            font-size: var(--text-xs);
            font-weight: 500;
        }
        .status-success {
            background: var(--success-100);
            color: var(--success-700);
        }
        .status-pending {
            background: var(--warning-100);
            color: var(--warning-700);
        }
        .status-failed {
            background: var(--danger-100);
            color: var(--danger-700);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- 侧边栏 -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-utensils fa-lg"></i>
                <div>
                    <div class="sidebar-title">消费管理系统</div>
                    <div class="sidebar-subtitle">Consumption Hub</div>
                </div>
            </div>
            <div class="sidebar-menu">
                <!-- 菜单将由 menu.js 自动生成 -->
            </div>
        </nav>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 顶部导航栏 -->
            <header class="header">
                <h1>支付管理</h1>
                <div class="header-actions">
                    <button class="btn btn-outline">
                        <i class="fas fa-bell"></i>
                        通知
                    </button>
                    <div class="user-info">
                        <div>
                            <div style="font-weight: 600;">系统管理员</div>
                            <div style="font-size: 12px; color: var(--gray-500);">在线</div>
                        </div>
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 主要内容 -->
            <div class="content">
                <!-- 支付方式配置 -->
                <section class="content-card">
                    <h2 style="font-size: var(--text-xl); font-weight: 600; color: var(--gray-900); margin-bottom: var(--space-xl);">支付方式配置</h2>

                    <div class="payment-methods">
                        <!-- 微信支付 -->
                        <div class="payment-method-card active" onclick="selectPaymentMethod('wechat')">
                            <div class="payment-header">
                                <div class="payment-icon wechat-icon">
                                    <i class="fab fa-weixin"></i>
                                </div>
                                <div class="payment-title">
                                    <h3>微信支付</h3>
                                    <p>扫码支付和小程序支付</p>
                                </div>
                                <div class="payment-status status-active">
                                    <i class="fas fa-check-circle"></i>
                                    已启用
                                </div>
                            </div>

                            <div class="payment-stats">
                                <div class="stat-item">
                                    <div class="stat-value">¥12,580</div>
                                    <div class="stat-label">今日交易额</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">186</div>
                                    <div class="stat-label">今日交易数</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">99.2%</div>
                                    <div class="stat-label">成功率</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">0.6%</div>
                                    <div class="stat-label">手续费率</div>
                                </div>
                            </div>

                            <div class="config-section">
                                <div class="config-item">
                                    <span class="config-label">扫码支付</span>
                                    <div class="toggle-switch active" onclick="toggleConfig(event, 'wechat_qr')"></div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">小程序支付</span>
                                    <div class="toggle-switch active" onclick="toggleConfig(event, 'wechat_mini')"></div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">自动退款</span>
                                    <div class="toggle-switch active" onclick="toggleConfig(event, 'wechat_refund')"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 支付宝支付 -->
                        <div class="payment-method-card active" onclick="selectPaymentMethod('alipay')">
                            <div class="payment-header">
                                <div class="payment-icon alipay-icon">
                                    <i class="fab fa-alipay"></i>
                                </div>
                                <div class="payment-title">
                                    <h3>支付宝</h3>
                                    <p>扫码支付和生活号支付</p>
                                </div>
                                <div class="payment-status status-active">
                                    <i class="fas fa-check-circle"></i>
                                    已启用
                                </div>
                            </div>

                            <div class="payment-stats">
                                <div class="stat-item">
                                    <div class="stat-value">¥8,960</div>
                                    <div class="stat-label">今日交易额</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">124</div>
                                    <div class="stat-label">今日交易数</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">98.8%</div>
                                    <div class="stat-label">成功率</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">0.55%</div>
                                    <div class="stat-label">手续费率</div>
                                </div>
                            </div>

                            <div class="config-section">
                                <div class="config-item">
                                    <span class="config-label">扫码支付</span>
                                    <div class="toggle-switch active" onclick="toggleConfig(event, 'alipay_qr')"></div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">生活号支付</span>
                                    <div class="toggle-switch" onclick="toggleConfig(event, 'alipay_service')"></div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">自动退款</span>
                                    <div class="toggle-switch active" onclick="toggleConfig(event, 'alipay_refund')"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 银联支付 -->
                        <div class="payment-method-card" onclick="selectPaymentMethod('unionpay')">
                            <div class="payment-header">
                                <div class="payment-icon unionpay-icon">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                                <div class="payment-title">
                                    <h3>银联支付</h3>
                                    <p>银行卡和云闪付支付</p>
                                </div>
                                <div class="payment-status status-inactive">
                                    <i class="fas fa-times-circle"></i>
                                    未启用
                                </div>
                            </div>

                            <div class="payment-stats">
                                <div class="stat-item">
                                    <div class="stat-value">¥0</div>
                                    <div class="stat-label">今日交易额</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">0</div>
                                    <div class="stat-label">今日交易数</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">-</div>
                                    <div class="stat-label">成功率</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">0.5%</div>
                                    <div class="stat-label">手续费率</div>
                                </div>
                            </div>

                            <div class="config-section">
                                <div class="config-item">
                                    <span class="config-label">银行卡支付</span>
                                    <div class="toggle-switch" onclick="toggleConfig(event, 'unionpay_card')"></div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">云闪付</span>
                                    <div class="toggle-switch" onclick="toggleConfig(event, 'unionpay_quick')"></div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">自动退款</span>
                                    <div class="toggle-switch" onclick="toggleConfig(event, 'unionpay_refund')"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 支付记录查询 -->
                <section class="content-card">
                    <h2 style="font-size: var(--text-xl); font-weight: 600; color: var(--gray-900); margin-bottom: var(--space-xl);">支付记录查询</h2>

                    <div class="filter-section">
                        <div class="filter-group">
                            <label>开始日期</label>
                            <input type="date" value="2024-03-15">
                        </div>
                        <div class="filter-group">
                            <label>结束日期</label>
                            <input type="date" value="2024-03-15">
                        </div>
                        <div class="filter-group">
                            <label>支付方式</label>
                            <select>
                                <option value="">全部</option>
                                <option value="wechat">微信支付</option>
                                <option value="alipay">支付宝</option>
                                <option value="unionpay">银联支付</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>支付状态</label>
                            <select>
                                <option value="">全部</option>
                                <option value="success">支付成功</option>
                                <option value="pending">支付中</option>
                                <option value="failed">支付失败</option>
                                <option value="refunded">已退款</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>金额范围</label>
                            <select>
                                <option value="">全部</option>
                                <option value="0-50">0-50元</option>
                                <option value="50-100">50-100元</option>
                                <option value="100-500">100-500元</option>
                                <option value="500+">500元以上</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>订单号</label>
                            <input type="text" placeholder="请输入订单号">
                        </div>
                    </div>

                    <div style="display: flex; gap: var(--space-md);">
                        <button class="btn btn-primary">
                            <i class="fas fa-search"></i>
                            查询
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-redo"></i>
                            重置
                        </button>
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i>
                            导出记录
                        </button>
                    </div>
                </section>

                <!-- 支付记录列表 -->
                <section class="content-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-xl);">
                        <h2 style="font-size: var(--text-xl); font-weight: 600; color: var(--gray-900);">支付记录</h2>
                        <div style="color: var(--gray-600); font-size: var(--text-sm);">共 310 条记录</div>
                    </div>

                    <div style="overflow-x: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>订单号</th>
                                    <th>支付时间</th>
                                    <th>支付方式</th>
                                    <th>支付金额</th>
                                    <th>账户信息</th>
                                    <th>商品信息</th>
                                    <th>支付状态</th>
                                    <th>手续费</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>P202403150001</td>
                                    <td>2024-03-15 14:30:25</td>
                                    <td><span class="payment-badge payment-wechat">微信支付</span></td>
                                    <td style="color: var(--primary-600); font-weight: 600;">¥28.00</td>
                                    <td>S202401001<br><small>张三</small></td>
                                    <td>经典汉堡套餐</td>
                                    <td><span class="status-badge status-success">支付成功</span></td>
                                    <td>¥0.17</td>
                                    <td>
                                        <button class="btn btn-outline btn-small" onclick="viewPaymentDetail('P202403150001')">
                                            <i class="fas fa-eye"></i>
                                            查看
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>P202403150002</td>
                                    <td>2024-03-15 14:25:18</td>
                                    <td><span class="payment-badge payment-alipay">支付宝</span></td>
                                    <td style="color: var(--primary-600); font-weight: 600;">¥35.00</td>
                                    <td>S202401002<br><small>李四</small></td>
                                    <td>意大利披萨</td>
                                    <td><span class="status-badge status-success">支付成功</span></td>
                                    <td>¥0.19</td>
                                    <td>
                                        <button class="btn btn-outline btn-small" onclick="viewPaymentDetail('P202403150002')">
                                            <i class="fas fa-eye"></i>
                                            查看
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>P202403150003</td>
                                    <td>2024-03-15 14:20:42</td>
                                    <td><span class="payment-badge payment-wechat">微信支付</span></td>
                                    <td style="color: var(--primary-600); font-weight: 600;">¥18.00</td>
                                    <td>S202401003<br><small>王五</small></td>
                                    <td>营养套餐</td>
                                    <td><span class="status-badge status-pending">支付中</span></td>
                                    <td>-</td>
                                    <td>
                                        <button class="btn btn-outline btn-small" onclick="viewPaymentDetail('P202403150003')">
                                            <i class="fas fa-eye"></i>
                                            查看
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>P202403150004</td>
                                    <td>2024-03-15 14:15:30</td>
                                    <td><span class="payment-badge payment-alipay">支付宝</span></td>
                                    <td style="color: var(--primary-600); font-weight: 600;">¥50.00</td>
                                    <td>S202401004<br><small>赵六</small></td>
                                    <td>账户充值</td>
                                    <td><span class="status-badge status-failed">支付失败</span></td>
                                    <td>-</td>
                                    <td>
                                        <button class="btn btn-outline btn-small" onclick="viewPaymentDetail('P202403150004')">
                                            <i class="fas fa-eye"></i>
                                            查看
                                        </button>
                                        <button class="btn btn-secondary btn-small" onclick="retryPayment('P202403150004')">
                                            <i class="fas fa-redo"></i>
                                            重试
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('支付管理页面加载完成');
        });

        // 选择支付方式
        function selectPaymentMethod(method) {
            // 移除所有活动状态
            document.querySelectorAll('.payment-method-card').forEach(card => {
                card.classList.remove('active');
            });

            // 添加当前选择的活动状态
            event.currentTarget.classList.add('active');

            console.log('选择支付方式:', method);
        }

        // 切换配置开关
        function toggleConfig(event, configKey) {
            event.stopPropagation();
            const toggle = event.currentTarget;
            toggle.classList.toggle('active');

            const isActive = toggle.classList.contains('active');
            console.log('切换配置:', configKey, isActive);

            // 这里可以发送配置更新请求到后端
        }

        // 查看支付详情
        function viewPaymentDetail(paymentId) {
            console.log('查看支付详情:', paymentId);
            alert('查看支付详情: ' + paymentId);
        }

        // 重试支付
        function retryPayment(paymentId) {
            console.log('重试支付:', paymentId);
            if (confirm('确认重试支付订单 ' + paymentId + ' 吗？')) {
                alert('支付重试请求已提交！');
                // 这里应该刷新列表
            }
        }
    </script>
</body>
</html>