# æ¶ˆè´¹ç®¡ç†æ¨¡å—

> ä¸“ä¸šçš„ä¼ä¸šæ¶ˆè´¹ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œè®©æ•°æ®åŒ–ç®¡ç†æ›´ç®€å•é«˜æ•ˆ

---

## ğŸ“ ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ api/business/consumption/
â”‚   â””â”€â”€ consumption-api.js              # API æ¥å£å®šä¹‰
â”œâ”€â”€ constants/business/consumption/
â”‚   â””â”€â”€ consumption-const.js            # å¸¸é‡æšä¸¾å®šä¹‰
â””â”€â”€ views/business/consumption/
    â”œâ”€â”€ dashboard/                      # æ•°æ®æ€»è§ˆæ¨¡å—
    â”‚   â”œâ”€â”€ index.vue                   # ä¸»é¡µé¢
    â”‚   â””â”€â”€ components/
    â”‚       â”œâ”€â”€ system-notice.vue       # ç³»ç»Ÿé€šçŸ¥ç»„ä»¶
    â”‚       â””â”€â”€ activity-feed.vue       # æ´»åŠ¨åŠ¨æ€ç»„ä»¶
    â”œâ”€â”€ è·¯ç”±é…ç½®è¯´æ˜.md                  # è·¯ç”±é…ç½®è¯¦ç»†æ–‡æ¡£
    â”œâ”€â”€ å¿«é€Ÿæµ‹è¯•è¯´æ˜.md                  # å¼€å‘æµ‹è¯•æŒ‡å—
    â”œâ”€â”€ æ¶ˆè´¹ç®¡ç†èœå•é…ç½®.sql             # æ•°æ®åº“èœå•é…ç½®
    â””â”€â”€ README.md                       # æœ¬æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šå¼€å‘æµ‹è¯•ï¼ˆæ¨èç”¨äºå¿«é€Ÿé¢„è§ˆï¼‰

#### 1. å¼•å…¥é™æ€è·¯ç”±

ç¼–è¾‘ `src/router/routers.js`ï¼š

```javascript
import { consumptionRouters } from './business/consumption';

export const routerArray = [
    ...loginRouters,
    ...homeRouters, 
    ...helpDocRouters,
    ...consumptionRouters,  // â­ï¸ æ·»åŠ è¿™ä¸€è¡Œ
    { path: '/:pathMatch(.*)*', name: '404', component: NotFound },
    { path: '/403', name: '403', component: NoPrivilege }
];
```

#### 2. å¯åŠ¨é¡¹ç›®

```bash
npm run dev
```

#### 3. è®¿é—®é¡µé¢

```
http://localhost:5173/#/business/consumption/dashboard
```

### æ–¹å¼äºŒï¼šç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰

#### 1. æ‰§è¡Œæ•°æ®åº“è„šæœ¬

åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œ `æ¶ˆè´¹ç®¡ç†èœå•é…ç½®.sql`

```sql
-- æ³¨æ„ä¿®æ”¹ parent_id ä¸ºå®é™…çš„èœå•ID
-- è¯¦è§ SQL æ–‡ä»¶ä¸­çš„æ³¨é‡Š
```

#### 2. é‡æ–°ç™»å½•ç³»ç»Ÿ

èœå•ä¼šè‡ªåŠ¨å‡ºç°åœ¨ä¾§è¾¹æ 

---

## ğŸ“Š å·²å®ç°åŠŸèƒ½

### Dashboard æ•°æ®æ€»è§ˆ

- âœ… **Hero Section** - æ¬¢è¿æ ‡é¢˜å’Œå‰¯æ ‡é¢˜
- âœ… **ç³»ç»Ÿé€šçŸ¥** - å¯é…ç½®ç±»å‹ï¼ˆinfo/success/warning/errorï¼‰
- âœ… **ç»Ÿè®¡å¡ç‰‡** - 4ä¸ªå…³é”®æŒ‡æ ‡
  - ä»Šæ—¥è¥ä¸šé¢ï¼ˆå¸¦è¶‹åŠ¿ï¼‰
  - ä»Šæ—¥è®¢å•æ•°ï¼ˆå¸¦è¶‹åŠ¿ï¼‰
  - æ´»è·ƒç”¨æˆ·ï¼ˆå¸¦è¶‹åŠ¿ï¼‰
  - å¹³å‡å®¢å•ä»·ï¼ˆå¸¦è¶‹åŠ¿ï¼‰
- âœ… **å¿«é€Ÿæ“ä½œ** - 9ä¸ªåŠŸèƒ½å…¥å£
  - è´¦æˆ·ç±»åˆ«ç®¡ç†
  - è´¦æˆ·ç®¡ç†
  - åŒºåŸŸç®¡ç†
  - é¤åˆ«èµ„æ–™
  - å‚æ•°è®¾ç½®
  - è®¾å¤‡ç®¡ç†
  - å•†å“èµ„æ–™
  - è¡¥è´´ç®¡ç†
  - æŠ¥è¡¨ä¸­å¿ƒ
- âœ… **æ´»åŠ¨åŠ¨æ€** - æœ€è¿‘æ´»åŠ¨åˆ—è¡¨
  - æ”¯æŒåˆ·æ–°
  - æ”¯æŒåŠ è½½çŠ¶æ€
  - æ”¯æŒç©ºçŠ¶æ€æç¤º
- âœ… **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…ç§»åŠ¨ç«¯

---

## ğŸ¨ æŠ€æœ¯ç‰¹ç‚¹

### ä»£ç è§„èŒƒ
- âœ… Vue 3 Composition API (`script setup`)
- âœ… å®Œå…¨éµå®ˆ SmartAdmin ç¼–ç è§„èŒƒ
- âœ… TypeScript ç±»å‹æ³¨é‡Š
- âœ… è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š

### è®¾è®¡ç‰¹ç‚¹
- âœ… Ant Design Vue 4 ç»„ä»¶åº“
- âœ… æ¸å˜è‰²å¡ç‰‡è®¾è®¡
- âœ… Hover åŠ¨ç”»æ•ˆæœ
- âœ… éª¨æ¶å±åŠ è½½
- âœ… ç§»åŠ¨ç«¯é€‚é…

### å·¥ç¨‹åŒ–
- âœ… è·¯å¾„åˆ«å `/@/`
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼ˆsmartSentryï¼‰
- âœ… åŠ è½½çŠ¶æ€ç®¡ç†
- âœ… æ¨¡æ‹Ÿæ•°æ®é¢„ç•™åç«¯å¯¹æ¥

---

## ğŸ“ æ¨¡æ‹Ÿæ•°æ®è¯´æ˜

å½“å‰æ‰€æœ‰æ•°æ®ä½¿ç”¨å‰ç«¯æ¨¡æ‹Ÿï¼Œå·²é¢„ç•™åç«¯å¯¹æ¥ä½ç½®ï¼š

### API æ¥å£æ–‡ä»¶

`src/api/business/consumption/consumption-api.js`

```javascript
export const consumptionApi = {
  // â­ï¸ æŸ¥è¯¢Dashboardç»Ÿè®¡æ•°æ®
  queryDashboardStats: () => {
    return getRequest('/consumption/dashboard/stats');
  },

  // â­ï¸ æŸ¥è¯¢æœ€è¿‘æ´»åŠ¨
  queryRecentActivities: (params) => {
    return postRequest('/consumption/dashboard/activities', params);
  },

  // â­ï¸ æŸ¥è¯¢ç³»ç»Ÿé€šçŸ¥
  querySystemNotice: () => {
    return getRequest('/consumption/dashboard/notice');
  },
};
```

### é¡µé¢å¯¹æ¥ä½ç½®

`src/views/business/consumption/dashboard/index.vue`

æ‰€æœ‰éœ€è¦å¯¹æ¥çš„æ–¹æ³•éƒ½æœ‰ `TODO` æ ‡è®°ï¼š

```javascript
// TODO: å¯¹æ¥åç«¯æ¥å£
async function queryDashboardData() {
  // TODO: åç«¯æ¥å£å¯¹æ¥
  // const res = await consumptionApi.queryDashboardStats();
  // if (res.data) {
  //   updateStatsData(res.data);
  // }
  
  // æ¨¡æ‹Ÿæ•°æ®ï¼ˆå¼€å‘é˜¶æ®µä½¿ç”¨ï¼‰
  // ... å½“å‰ä»£ç 
}
```

---

## ğŸ”Œ åç«¯æ¥å£æ ¼å¼

### 1. ç»Ÿè®¡æ•°æ®æ¥å£

**è¯·æ±‚ï¼š** `GET /consumption/dashboard/stats`

**å“åº”ï¼š**

```json
{
  "code": 1,
  "ok": true,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "turnover": {
      "value": "Â¥12,580.00",
      "change": "+12.5%",
      "changeType": "positive"
    },
    "orderCount": {
      "value": "856",
      "change": "+8.3%",
      "changeType": "positive"
    },
    "activeUsers": {
      "value": "425",
      "change": "+15.2%",
      "changeType": "positive"
    },
    "averagePrice": {
      "value": "Â¥14.70",
      "change": "-2.1%",
      "changeType": "negative"
    }
  }
}
```

### 2. æ´»åŠ¨åˆ—è¡¨æ¥å£

**è¯·æ±‚ï¼š** `POST /consumption/dashboard/activities`

**å‚æ•°ï¼š**

```json
{
  "pageSize": 10
}
```

**å“åº”ï¼š**

```json
{
  "code": 1,
  "ok": true,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "list": [
      {
        "id": 1,
        "type": "success",
        "icon": "UserAddOutlined",
        "title": "æ–°ç”¨æˆ·æ³¨å†Œ",
        "description": "å¼ ä¸‰ (å·¥å·: EMP001) å®Œæˆè´¦æˆ·æ³¨å†Œå¹¶å®¡æ ¸é€šè¿‡",
        "time": "2åˆ†é’Ÿå‰"
      }
    ],
    "total": 100
  }
}
```

### 3. ç³»ç»Ÿé€šçŸ¥æ¥å£

**è¯·æ±‚ï¼š** `GET /consumption/dashboard/notice`

**å“åº”ï¼š**

```json
{
  "code": 1,
  "ok": true,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "title": "ç³»ç»Ÿå½“å‰çŠ¶æ€",
    "content": "ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œå½“å‰å·²é…ç½® 8 ä¸ªåŸºç¡€æ¨¡å—...",
    "type": "info",
    "closable": false
  }
}
```

---

## ğŸ”§ å¸¸é‡å®šä¹‰

`src/constants/business/consumption/consumption-const.js`

### æ´»åŠ¨ç±»å‹æšä¸¾

```javascript
export const ACTIVITY_TYPE_ENUM = {
  USER_REGISTER: {
    value: 'user_register',
    desc: 'ç”¨æˆ·æ³¨å†Œ',
    icon: 'UserAddOutlined',
    color: 'success',
  },
  // ... æ›´å¤šç±»å‹
};
```

### ç»Ÿè®¡å¡ç‰‡ç±»å‹

```javascript
export const STAT_CARD_TYPE_ENUM = {
  TURNOVER: {
    value: 'turnover',
    desc: 'ä»Šæ—¥è¥ä¸šé¢',
    icon: 'DollarOutlined',
    color: '#1890ff',
  },
  // ... æ›´å¤šç±»å‹
};
```

### å¿«é€Ÿæ“ä½œèœå•

```javascript
export const QUICK_ACTION_MENU = [
  {
    title: 'è´¦æˆ·ç±»åˆ«ç®¡ç†',
    desc: 'é…ç½®è´¦æˆ·ç±»åˆ«å’Œæƒé™',
    icon: 'TagsOutlined',
    path: '/business/consumption/account-category',
  },
  // ... æ›´å¤šèœå•
];
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [è·¯ç”±é…ç½®è¯´æ˜.md](./è·¯ç”±é…ç½®è¯´æ˜.md) | è¯¦ç»†çš„è·¯ç”±é…ç½®æ–¹æ³•ï¼ˆé™æ€è·¯ç”± + åŠ¨æ€è·¯ç”±ï¼‰ |
| [å¿«é€Ÿæµ‹è¯•è¯´æ˜.md](./å¿«é€Ÿæµ‹è¯•è¯´æ˜.md) | å¼€å‘é˜¶æ®µæµ‹è¯•æŒ‡å—å’ŒåŠŸèƒ½æ¸…å• |
| [æ¶ˆè´¹ç®¡ç†èœå•é…ç½®.sql](./æ¶ˆè´¹ç®¡ç†èœå•é…ç½®.sql) | æ•°æ®åº“èœå•é…ç½® SQL è„šæœ¬ |

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

åœ¨æµ‹è¯•æ—¶è¯·é€é¡¹æ£€æŸ¥ï¼š

### åŠŸèƒ½æµ‹è¯•
- [ ] é¡µé¢æ­£å¸¸åŠ è½½ï¼Œæ— ç™½å±
- [ ] ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºæ­£ç¡®
- [ ] ç»Ÿè®¡æ•°æ®æœ‰åŠ è½½åŠ¨ç”»
- [ ] åˆ·æ–°é¡µé¢æ•°æ®ä¼šå˜åŒ–
- [ ] å¿«é€Ÿæ“ä½œå¡ç‰‡å¯ç‚¹å‡»
- [ ] ç‚¹å‡»å¿«é€Ÿæ“ä½œæœ‰æç¤º
- [ ] æ´»åŠ¨åˆ—è¡¨æ­£å¸¸å±•ç¤º
- [ ] åˆ·æ–°æŒ‰é’®åŠŸèƒ½æ­£å¸¸

### æ ·å¼æµ‹è¯•
- [ ] PC ç«¯å¸ƒå±€æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯å“åº”å¼æ­£å¸¸
- [ ] å¡ç‰‡ hover åŠ¨ç”»æµç•…
- [ ] å›¾æ ‡æ˜¾ç¤ºæ­£ç¡®
- [ ] é¢œè‰²ä¸»é¢˜ç»Ÿä¸€

### æŠ€æœ¯æµ‹è¯•
- [ ] æ— æ§åˆ¶å°é”™è¯¯
- [ ] æ—  ESLint é”™è¯¯
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] æ€§èƒ½è¡¨ç°è‰¯å¥½

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: é¡µé¢æ˜¾ç¤º 404
**A:** æ£€æŸ¥æ˜¯å¦åœ¨ `routers.js` ä¸­å¼•å…¥äº† `consumptionRouters`

### Q2: èœå•ä¸æ˜¾ç¤º
**A:** æ£€æŸ¥æ•°æ®åº“èœå•é…ç½®å’Œè§’è‰²æƒé™åˆ†é…

### Q3: å›¾æ ‡ä¸æ˜¾ç¤º
**A:** æ£€æŸ¥ Ant Design Icons æ˜¯å¦æ­£ç¡®å¼•å…¥

### Q4: æ•°æ®ä¸æ›´æ–°
**A:** æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ŒæŸ¥çœ‹æ¥å£è°ƒç”¨æƒ…å†µ

---

## ğŸ—ºï¸ åç»­å¼€å‘è®¡åˆ’

### å¾…å®ç°é¡µé¢

- [ ] è´¦æˆ·ç±»åˆ«ç®¡ç†
- [ ] è´¦æˆ·ç®¡ç†
- [ ] åŒºåŸŸç®¡ç†
- [ ] é¤åˆ«èµ„æ–™
- [ ] å‚æ•°è®¾ç½®
- [ ] è®¾å¤‡ç®¡ç†
- [ ] å•†å“èµ„æ–™
- [ ] è¡¥è´´ç®¡ç†
- [ ] æŠ¥è¡¨ä¸­å¿ƒ

### å¾…ä¼˜åŒ–åŠŸèƒ½

- [ ] å¯¹æ¥åç«¯æ¥å£
- [ ] æ·»åŠ å›¾è¡¨å±•ç¤º
- [ ] æ·»åŠ å¯¼å‡ºåŠŸèƒ½
- [ ] æ·»åŠ æ•°æ®ç­›é€‰
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- éµå¾ª SmartAdmin é¡¹ç›®è§„èŒƒ
- å‚è€ƒ `AIäºŒæ¬¡å¼€å‘æŒ‡ä»¤æ–‡æ¡£.md`
- å‚è€ƒ `AIäºŒæ¬¡å¼€å‘è§„èŒƒæ–‡æ¡£.md`

---

## ğŸ“„ License

Copyright 2025 SmartAdmin

