# OA工作流模块实施检查清单

## ✅ 代码完善检查

### 1. TODO项处理
- [x] **用户列表加载** - 已在 `ApprovalForm.vue` 和 `pending-task-list.vue` 中接入 `employeeApi.queryAll()`
- [x] **用户工作量统计** - 已在 `process-monitor.vue` 中添加说明注释，待后端API实现
- [x] **流程定义详情** - 已在 `definition-list.vue` 中添加Modal提示和实现说明

### 2. 依赖检查
- [ ] **bpmn-js库** - 流程图组件需要安装：`npm install bpmn-js`
  - 文件：`smart-admin-web-javascript/src/components/workflow/ProcessDiagram.vue`
  - 状态：代码已准备，需取消注释并安装依赖

### 3. API对接检查
- [x] **用户API** - 已接入 `employeeApi.queryAll()` 获取员工列表
- [ ] **用户工作量统计API** - 待后端实现 `getUserWorkloadStatistics` 接口
- [x] **工作流API** - 所有27个API方法已实现

### 4. WebSocket配置检查
- [ ] **WebSocket服务器地址** - 需要在应用启动时配置
- [ ] **WebSocket认证** - 需要配置token认证方式
- [ ] **WebSocket连接初始化** - 需要在用户登录后初始化连接

### 5. 路由配置检查
- [x] **移动端路由** - 已在 `pages.json` 中配置
- [ ] **Web端路由** - 需要在数据库中添加菜单配置（参考README.md）

### 6. 权限配置检查
- [ ] **权限标识** - 需要在后端配置以下权限：
  - `oa:workflow:task:query` - 任务查询
  - `oa:workflow:task:claim` - 任务受理
  - `oa:workflow:task:transfer` - 任务转办
  - `oa:workflow:task:delegate` - 任务委派
  - `oa:workflow:instance:query` - 流程实例查询
  - `oa:workflow:instance:suspend` - 流程挂起
  - `oa:workflow:instance:activate` - 流程激活
  - `oa:workflow:instance:terminate` - 流程终止
  - `oa:workflow:instance:revoke` - 流程撤销
  - `oa:workflow:definition:query` - 流程定义查询
  - `oa:workflow:definition:deploy` - 流程部署
  - `oa:workflow:definition:activate` - 流程定义激活
  - `oa:workflow:definition:disable` - 流程定义禁用
  - `oa:workflow:definition:delete` - 流程定义删除
  - `oa:workflow:monitor:query` - 流程监控查询

## 📋 功能测试检查

### Web端功能
- [ ] 待办任务列表查询
- [ ] 待办任务受理
- [ ] 待办任务转办/委派
- [ ] 待办任务审批（同意/驳回）
- [ ] 已办任务列表查询
- [ ] 任务详情查看
- [ ] 流程实例列表查询
- [ ] 流程实例操作（挂起/激活/终止）
- [ ] 流程定义部署
- [ ] 流程定义管理（激活/禁用/删除）
- [ ] 流程监控统计

### 移动端功能
- [ ] 待办任务列表（下拉刷新、上拉加载）
- [ ] 待办任务筛选
- [ ] 快速审批
- [ ] 任务详情查看
- [ ] 任务审批（同意/驳回/转办/委派）
- [ ] 已办任务列表
- [ ] 流程实例列表
- [ ] 流程实例详情

### WebSocket功能
- [ ] 连接建立
- [ ] 新任务通知
- [ ] 任务状态变更通知
- [ ] 流程实例状态变更通知
- [ ] 自动重连机制
- [ ] 心跳机制

## 🔧 配置检查

### 环境变量
- [ ] WebSocket服务器地址
- [ ] API基础URL
- [ ] 认证Token配置

### 菜单配置（数据库）
需要添加以下菜单项：
- [ ] 待办任务列表菜单
- [ ] 已办任务列表菜单
- [ ] 流程实例列表菜单
- [ ] 我发起的流程菜单
- [ ] 流程定义管理菜单
- [ ] 流程监控菜单

## 📝 文档检查

- [x] Web端使用说明文档
- [x] 移动端使用说明文档
- [x] 实施总结文档
- [x] 实施检查清单（本文档）

## ⚠️ 注意事项

1. **流程图组件**：需要安装 `bpmn-js` 库才能完整显示流程图
2. **用户选择**：转办/委派功能已接入员工API，确保员工数据正确
3. **WebSocket**：需要配置WebSocket服务器并确保网络连通
4. **权限控制**：所有页面都使用 `v-privilege` 指令，确保权限配置正确
5. **API路径**：确保后端API路径与前端调用路径一致

## 🎯 后续工作

1. 安装依赖：`npm install bpmn-js`
2. 配置WebSocket服务器
3. 在数据库中配置菜单和权限
4. 进行功能测试
5. 性能优化（如需要）

---

**最后更新**: 2025-01-30  
**检查人员**: IOE-DREAM Team

